(self.webpackChunkMERCv3=self.webpackChunkMERCv3||[]).push([[179],{2011:(cn,Ye,q)=>{"use strict";q.d(Ye,{Dh:()=>Se,GT:()=>Ae,cc:()=>Re,hO:()=>we,on:()=>ie,pX:()=>Ve,xv:()=>pe});var a=q(4650),V=q(127),W=q(4027);cn=q.hmd(cn);const _e=["ngOnDestroy"],Ve=(Fe,xt,gt,Ke={})=>new Proxy(Fe,{get:(Be,$e)=>gt.runOutsideAngular(()=>{var Je;if(Fe[$e])return!(null===(Je=Ke?.spy)||void 0===Je)&&Je.get&&Ke.spy.get($e,Fe[$e]),Fe[$e];if(_e.indexOf($e)>-1)return()=>{};const ge=xt.toPromise().then(Me=>{const ke=Me&&Me[$e];return"function"==typeof ke?ke.bind(Me):ke&&ke.then?ke.then(be=>gt.run(()=>be)):gt.run(()=>ke)});return new Proxy(()=>{},{get:(Me,ke)=>ge[ke],apply:(Me,ke,be)=>ge.then(Ce=>{var Ue;const Ne=Ce&&Ce(...be);return!(null===(Ue=Ke?.spy)||void 0===Ue)&&Ue.apply&&Ke.spy.apply($e,be,Ne),Ne})})})}),Ae=(Fe,xt)=>{xt.forEach(gt=>{Object.getOwnPropertyNames(gt.prototype||gt).forEach(Ke=>{Object.defineProperty(Fe.prototype,Ke,Object.getOwnPropertyDescriptor(gt.prototype||gt,Ke))})})};class ve{constructor(xt){return xt}}const Se=new a.OlP("angularfire2.app.options"),pe=new a.OlP("angularfire2.app.name");function ie(Fe,xt,gt){const Be="object"==typeof gt&&gt||{};Be.name=Be.name||"string"==typeof gt&&gt||"[DEFAULT]";const Je=V.Z.apps.filter(ge=>ge&&ge.name===Be.name)[0]||xt.runOutsideAngular(()=>V.Z.initializeApp(Fe,Be));try{JSON.stringify(Fe)!==JSON.stringify(Je.options)&&ne("error",`${Je.name} Firebase App already initialized with different options${cn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ve(Je)}const ne=(Fe,...xt)=>{(0,a.X6Q)()&&typeof console<"u"&&console[Fe](...xt)},ce={provide:ve,useFactory:ie,deps:[Se,a.R0b,[new a.FiY,pe]]};let we=(()=>{class Fe{constructor(gt){V.Z.registerVersion("angularfire",W.q4.full,"core"),V.Z.registerVersion("angularfire",W.q4.full,"app-compat"),V.Z.registerVersion("angular",a.q4F.full,gt.toString())}static initializeApp(gt,Ke){return{ngModule:Fe,providers:[{provide:Se,useValue:gt},{provide:pe,useValue:Ke}]}}}return Fe.\u0275fac=function(gt){return new(gt||Fe)(a.LFG(a.Lbi))},Fe.\u0275mod=a.oAB({type:Fe}),Fe.\u0275inj=a.cJS({providers:[ce]}),Fe})();function Re(Fe,xt,gt,Ke,Be){const[,$e,Je]=globalThis.\u0275AngularfireInstanceCache.find(ge=>ge[0]===Fe)||[];if($e)return function je(Fe,xt){try{return Fe.toString()===xt.toString()}catch{return Fe===xt}}(Be,Je)||(He("error",`${xt} was already initialized on the ${gt} Firebase App with different settings.${ct?" You may need to reload as Firebase is not HMR aware.":""}`),He("warn",{is:Be,was:Je})),$e;{const ge=Ke();return globalThis.\u0275AngularfireInstanceCache.push([Fe,ge,Be]),ge}}const ct=!!cn.hot,He=(Fe,...xt)=>{(0,a.X6Q)()&&typeof console<"u"&&console[Fe](...xt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4027:(cn,Ye,q)=>{"use strict";q.d(Ye,{q4:()=>He,iC:()=>Kt,fc:()=>Ct,HU:()=>lt,vb:()=>Ce,JM:()=>be,nk:()=>ke,n1:()=>ge,_J:()=>Me,u3:()=>Jt});var a=q(4650),V=q(5867),W=q(3226),_e=q(2375),Ve=q(6148),Ae=q(4408),Se=q(7565);const ie=new class pe extends Se.v{}(class ve extends Ae.o{constructor(sn,nn){super(sn,nn),this.scheduler=sn,this.work=nn}schedule(sn,nn=0){return nn>0?super.schedule(sn,nn):(this.delay=nn,this.state=sn,this.scheduler.flush(this),this)}execute(sn,nn){return nn>0||this.closed?super.execute(sn,nn):this._execute(sn,nn)}requestAsyncId(sn,nn,un=0){return null!=un&&un>0||null==un&&this.delay>0?super.requestAsyncId(sn,nn,un):sn.flush(this)}});var ce=q(4986),we=q(9751),Re=q(8505),je=q(5363),ct=q(9468);const He=new a.GfV("7.4.1"),Fe="__angularfire_symbol__analyticsIsSupportedValue",xt="__angularfire_symbol__analyticsIsSupported",gt="__angularfire_symbol__remoteConfigIsSupportedValue",Ke="__angularfire_symbol__remoteConfigIsSupported",Be="__angularfire_symbol__messagingIsSupportedValue",$e="__angularfire_symbol__messagingIsSupported";globalThis[xt]||(globalThis[xt]=(0,Ve.Gb)().then(ut=>globalThis[Fe]=ut).catch(()=>globalThis[Fe]=!1)),globalThis[$e]||(globalThis[$e]=(0,_e.Gb)().then(ut=>globalThis[Be]=ut).catch(()=>globalThis[Be]=!1)),globalThis[Ke]||(globalThis[Ke]=(0,W.Gb)().then(ut=>globalThis[gt]=ut).catch(()=>globalThis[gt]=!1));const Je=ut=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${ut} in the constructor, first ensure that ${ut} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${ut})\`.`,ge={async:()=>globalThis[$e],sync:()=>{const ut=globalThis[Be];if(void 0===ut)throw new Error(Je("Messaging"));return ut}},Me={async:()=>globalThis[Ke],sync:()=>{const ut=globalThis[gt];if(void 0===ut)throw new Error(Je("RemoteConfig"));return ut}},ke={async:()=>globalThis[xt],sync:()=>{const ut=globalThis[Fe];if(void 0===ut)throw new Error(Je("Analytics"));return ut}};function be(ut,sn,nn){if(sn){if(1===sn.length)return sn[0];const Tn=sn.filter(ri=>ri.app===nn);if(1===Tn.length)return Tn[0]}return nn.container.getProvider(ut).getImmediate({optional:!0})}const Ce=(ut,sn)=>{const nn=sn?[sn]:(0,V.C6)(),un=[];return nn.forEach(en=>{en.container.getProvider(ut).instances.forEach(ri=>{un.includes(ri)||un.push(ri)})}),un};function Ue(){}class Ne{constructor(sn,nn=ie){this.zone=sn,this.delegate=nn}now(){return this.delegate.now()}schedule(sn,nn,un){const en=this.zone;return this.delegate.schedule(function(ri){en.runGuarded(()=>{sn.apply(this,[ri])})},nn,un)}}class mt{constructor(sn){this.zone=sn,this.task=null}call(sn,nn){const un=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ue,{},Ue,Ue)),nn.pipe((0,Re.b)({next:un,complete:un,error:un})).subscribe(sn).add(un)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let lt=(()=>{class ut{constructor(nn){this.ngZone=nn,this.outsideAngular=nn.runOutsideAngular(()=>new Ne(Zone.current)),this.insideAngular=nn.run(()=>new Ne(Zone.current,ce.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return ut.\u0275fac=function(nn){return new(nn||ut)(a.LFG(a.R0b))},ut.\u0275prov=a.Yz7({token:ut,factory:ut.\u0275fac,providedIn:"root"}),ut})();function Xt(){const ut=globalThis.\u0275AngularFireScheduler;if(!ut)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return ut}function gn(ut){return Xt().ngZone.runOutsideAngular(()=>ut())}function rn(ut){return Xt().ngZone.run(()=>ut())}function Ct(ut){return ut.pipe((0,je.Q)(Xt().outsideAngular))}function Kt(ut){return Xt(),function Bt(ut){return function(nn){return(nn=nn.lift(new mt(ut.ngZone))).pipe((0,ct.R)(ut.outsideAngular),(0,je.Q)(ut.insideAngular))}}(Xt())(ut)}const Yt=(ut,sn)=>function(){const un=arguments;return sn&&setTimeout(()=>{"scheduled"===sn.state&&sn.invoke()},10),rn(()=>ut.apply(void 0,un))},Jt=(ut,sn)=>function(){let nn;const un=arguments;for(let Tn=0;Tn<arguments.length;Tn++)"function"==typeof un[Tn]&&(sn&&(nn||(nn=rn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ue,{},Ue,Ue)))),un[Tn]=Yt(un[Tn],nn));const en=gn(()=>ut.apply(this,un));if(!sn){if(en instanceof we.y){const Tn=Xt();return en.pipe((0,ct.R)(Tn.outsideAngular),(0,je.Q)(Tn.insideAngular))}return rn(()=>en)}return en instanceof we.y?en.pipe(Kt):en instanceof Promise?rn(()=>new Promise((Tn,ri)=>en.then(vn=>rn(()=>Tn(vn)),vn=>rn(()=>ri(vn))))):"function"==typeof en&&nn?function(){return setTimeout(()=>{nn&&"scheduled"===nn.state&&nn.invoke()},10),en.apply(this,arguments)}:rn(()=>en)}},6457:(cn,Ye,q)=>{"use strict";q.d(Ye,{$:()=>cp,A:()=>ne,B:()=>Re,G:()=>Xe,H:()=>An,J:()=>pa,L:()=>yn,M:()=>ds,N:()=>sv,P:()=>Tp,Q:()=>tl,R:()=>kr,T:()=>Zs,U:()=>_c,V:()=>mu,W:()=>vi,X:()=>ng,Y:()=>Bl,Z:()=>ap,_:()=>lp,a:()=>ll,a0:()=>Cc,a1:()=>up,a2:()=>ps,a3:()=>Tc,a4:()=>lv,a5:()=>yu,a6:()=>ka,a7:()=>dp,a8:()=>Oa,a9:()=>hp,aA:()=>Mp,aB:()=>ma,aC:()=>Zl,aD:()=>Kd,aE:()=>On,aI:()=>Ft,aL:()=>Ll,aa:()=>fp,ab:()=>bu,ac:()=>Ld,af:()=>Vd,ag:()=>mp,ah:()=>xc,ak:()=>As,al:()=>Ym,an:()=>jd,ao:()=>e_,ap:()=>ni,aq:()=>ke,ar:()=>dn,as:()=>Lt,at:()=>gt,au:()=>Xs,av:()=>Nc,aw:()=>Ke,ax:()=>ge,ay:()=>Ce,az:()=>Hn,b:()=>Qt,c:()=>Ep,d:()=>dg,e:()=>ug,f:()=>lr,g:()=>$l,h:()=>hl,i:()=>Ur,j:()=>ku,k:()=>gv,l:()=>Bo,m:()=>Fu,n:()=>mo,o:()=>Se,q:()=>yp,r:()=>s_,s:()=>jr,u:()=>fv,v:()=>zl});var a=q(5861),V=q(2090),W=q(9681),_e=q(655),Ve=q(1877),Ae=q(4859);const Se={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ne={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Re=function ce(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},je=function we(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ct=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fe=new Ve.Yd("@firebase/auth");function xt(R,...S){Fe.logLevel<=Ve.in.ERROR&&Fe.error(`Auth (${W.SDK_VERSION}): ${R}`,...S)}function gt(R,...S){throw Je(R,...S)}function Ke(R,...S){return Je(R,...S)}function Be(R,S,I){const L=Object.assign(Object.assign({},je()),{[S]:I});return new V.LL("auth","Firebase",L).create(S,{appName:R.name})}function $e(R,S,I){if(!(S instanceof I))throw I.name!==S.constructor.name&&gt(R,"argument-error"),Be(R,"argument-error",`Type of ${S.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Je(R,...S){if("string"!=typeof R){const I=S[0],L=[...S.slice(1)];return L[0]&&(L[0].appName=R.name),R._errorFactory.create(I,...L)}return ct.create(R,...S)}function ge(R,S,...I){if(!R)throw Je(S,...I)}function Me(R){const S="INTERNAL ASSERTION FAILED: "+R;throw xt(S),new Error(S)}function ke(R,S){R||Me(S)}const be=new Map;function Ce(R){ke(R instanceof Function,"Expected a class definition");let S=be.get(R);return S?(ke(S instanceof R,"Instance stored in cache mismatched with class"),S):(S=new R,be.set(R,S),S)}function mt(){var R;return typeof self<"u"&&(null===(R=self.location)||void 0===R?void 0:R.href)||""}function lt(){return"http:"===Xt()||"https:"===Xt()}function Xt(){var R;return typeof self<"u"&&(null===(R=self.location)||void 0===R?void 0:R.protocol)||null}class Ct{constructor(S,I){this.shortDelay=S,this.longDelay=I,ke(I>S,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function gn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(lt()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function At(R,S){ke(R.emulator,"Emulator should always be set here");const{url:I}=R.emulator;return S?`${I}${S.startsWith("/")?S.slice(1):S}`:I}class Kt{static initialize(S,I,L){this.fetchImpl=S,I&&(this.headersImpl=I),L&&(this.responseImpl=L)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Me("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Me("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Me("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Bt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Yt=new Ct(3e4,6e4);function Jt(R,S){return R.tenantId&&!S.tenantId?Object.assign(Object.assign({},S),{tenantId:R.tenantId}):S}function ut(R,S,I,L){return sn.apply(this,arguments)}function sn(){return(sn=(0,a.Z)(function*(R,S,I,L,Y={}){return nn(R,Y,(0,a.Z)(function*(){let se={},Ie={};L&&("GET"===S?Ie=L:se={body:JSON.stringify(L)});const vt=(0,V.xO)(Object.assign({key:R.config.apiKey},Ie)).slice(1),hn=yield R._getAdditionalHeaders();return hn["Content-Type"]="application/json",R.languageCode&&(hn["X-Firebase-Locale"]=R.languageCode),Kt.fetch()(ri(R,R.config.apiHost,I,vt),Object.assign({method:S,headers:hn,referrerPolicy:"no-referrer"},se))}))})).apply(this,arguments)}function nn(R,S,I){return un.apply(this,arguments)}function un(){return(un=(0,a.Z)(function*(R,S,I){R._canInitEmulator=!1;const L=Object.assign(Object.assign({},Bt),S);try{const Y=new vn(R),se=yield Promise.race([I(),Y.promise]);Y.clearNetworkTimeout();const Ie=yield se.json();if("needConfirmation"in Ie)throw Sn(R,"account-exists-with-different-credential",Ie);if(se.ok&&!("errorMessage"in Ie))return Ie;{const vt=se.ok?Ie.errorMessage:Ie.error.message,[hn,bn]=vt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===hn)throw Sn(R,"credential-already-in-use",Ie);if("EMAIL_EXISTS"===hn)throw Sn(R,"email-already-in-use",Ie);if("USER_DISABLED"===hn)throw Sn(R,"user-disabled",Ie);const Zn=L[hn]||hn.toLowerCase().replace(/[_\s]+/g,"-");if(bn)throw Be(R,Zn,bn);gt(R,Zn)}}catch(Y){if(Y instanceof V.ZR)throw Y;gt(R,"network-request-failed")}})).apply(this,arguments)}function en(R,S,I,L){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,a.Z)(function*(R,S,I,L,Y={}){const se=yield ut(R,S,I,L,Y);return"mfaPendingCredential"in se&&gt(R,"multi-factor-auth-required",{_serverResponse:se}),se})).apply(this,arguments)}function ri(R,S,I,L){const Y=`${S}${I}?${L}`;return R.config.emulator?At(R.config,Y):`${R.config.apiScheme}://${Y}`}class vn{constructor(S){this.auth=S,this.timer=null,this.promise=new Promise((I,L)=>{this.timer=setTimeout(()=>L(Ke(this.auth,"network-request-failed")),Yt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sn(R,S,I){const L={appName:R.name};I.email&&(L.email=I.email),I.phoneNumber&&(L.phoneNumber=I.phoneNumber);const Y=Ke(R,S,L);return Y.customData._tokenResponse=I,Y}function tt(){return(tt=(0,a.Z)(function*(R,S){return ut(R,"POST","/v1/accounts:delete",S)})).apply(this,arguments)}function Le(R,S){return _t.apply(this,arguments)}function _t(){return(_t=(0,a.Z)(function*(R,S){return ut(R,"POST","/v1/accounts:update",S)})).apply(this,arguments)}function Tt(R,S){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,a.Z)(function*(R,S){return ut(R,"POST","/v1/accounts:lookup",S)})).apply(this,arguments)}function Nn(R){if(R)try{const S=new Date(Number(R));if(!isNaN(S.getTime()))return S.toUTCString()}catch{}}function Kn(){return(Kn=(0,a.Z)(function*(R,S=!1){const I=(0,V.m9)(R),L=yield I.getIdToken(S),Y=Ht(L);ge(Y&&Y.exp&&Y.auth_time&&Y.iat,I.auth,"internal-error");const se="object"==typeof Y.firebase?Y.firebase:void 0,Ie=se?.sign_in_provider;return{claims:Y,token:L,authTime:Nn(Vn(Y.auth_time)),issuedAtTime:Nn(Vn(Y.iat)),expirationTime:Nn(Vn(Y.exp)),signInProvider:Ie||null,signInSecondFactor:se?.sign_in_second_factor||null}})).apply(this,arguments)}function Vn(R){return 1e3*Number(R)}function Ht(R){var S;const[I,L,Y]=R.split(".");if(void 0===I||void 0===L||void 0===Y)return xt("JWT malformed, contained fewer than 3 sections"),null;try{const se=(0,V.tV)(L);return se?JSON.parse(se):(xt("Failed to decode base64 JWT payload"),null)}catch(se){return xt("Caught error parsing JWT payload as JSON",null===(S=se)||void 0===S?void 0:S.toString()),null}}function Yn(R,S){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,a.Z)(function*(R,S,I=!1){if(I)return S;try{return yield S}catch(L){throw L instanceof V.ZR&&mi(L)&&R.auth.currentUser===R&&(yield R.auth.signOut()),L}})).apply(this,arguments)}function mi({code:R}){return"auth/user-disabled"===R||"auth/user-token-expired"===R}class kn{constructor(S){this.user=S,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(S){var I;if(S){const L=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),L}{this.errorBackoff=3e4;const Y=(null!==(I=this.user.stsTokenManager.expirationTime)&&void 0!==I?I:0)-Date.now()-3e5;return Math.max(0,Y)}}schedule(S=!1){var I=this;if(!this.isRunning)return;const L=this.getInterval(S);this.timerId=setTimeout((0,a.Z)(function*(){yield I.iteration()}),L)}iteration(){var S=this;return(0,a.Z)(function*(){var I;try{yield S.user.getIdToken(!0)}catch(L){return void("auth/network-request-failed"===(null===(I=L)||void 0===I?void 0:I.code)&&S.schedule(!0))}S.schedule()})()}}class ci{constructor(S,I){this.createdAt=S,this.lastLoginAt=I,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nn(this.lastLoginAt),this.creationTime=Nn(this.createdAt)}_copy(S){this.createdAt=S.createdAt,this.lastLoginAt=S.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Yi(R){return In.apply(this,arguments)}function In(){return(In=(0,a.Z)(function*(R){var S;const I=R.auth,L=yield R.getIdToken(),Y=yield Yn(R,Tt(I,{idToken:L}));ge(Y?.users.length,I,"internal-error");const se=Y.users[0];R._notifyReloadListener(se);const Ie=null!==(S=se.providerUserInfo)&&void 0!==S&&S.length?K(se.providerUserInfo):[],vt=z(R.providerData,Ie),Zn=!!R.isAnonymous&&!(R.email&&se.passwordHash||vt?.length),zi={uid:se.localId,displayName:se.displayName||null,photoURL:se.photoUrl||null,email:se.email||null,emailVerified:se.emailVerified||!1,phoneNumber:se.phoneNumber||null,tenantId:se.tenantId||null,providerData:vt,metadata:new ci(se.createdAt,se.lastLoginAt),isAnonymous:Zn};Object.assign(R,zi)})).apply(this,arguments)}function me(){return(me=(0,a.Z)(function*(R){const S=(0,V.m9)(R);yield Yi(S),yield S.auth._persistUserIfCurrent(S),S.auth._notifyListenersIfCurrent(S)})).apply(this,arguments)}function z(R,S){return[...R.filter(L=>!S.some(Y=>Y.providerId===L.providerId)),...S]}function K(R){return R.map(S=>{var{providerId:I}=S,L=(0,_e._T)(S,["providerId"]);return{providerId:I,uid:L.rawId||"",displayName:L.displayName||null,email:L.email||null,phoneNumber:L.phoneNumber||null,photoURL:L.photoUrl||null}})}function J(){return(J=(0,a.Z)(function*(R,S){const I=yield nn(R,{},(0,a.Z)(function*(){const L=(0,V.xO)({grant_type:"refresh_token",refresh_token:S}).slice(1),{tokenApiHost:Y,apiKey:se}=R.config,Ie=ri(R,Y,"/v1/token",`key=${se}`),vt=yield R._getAdditionalHeaders();return vt["Content-Type"]="application/x-www-form-urlencoded",Kt.fetch()(Ie,{method:"POST",headers:vt,body:L})}));return{accessToken:I.access_token,expiresIn:I.expires_in,refreshToken:I.refresh_token}})).apply(this,arguments)}class de{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(S){ge(S.idToken,"internal-error"),ge(typeof S.idToken<"u","internal-error"),ge(typeof S.refreshToken<"u","internal-error");const I="expiresIn"in S&&typeof S.expiresIn<"u"?Number(S.expiresIn):function Pt(R){const S=Ht(R);return ge(S,"internal-error"),ge(typeof S.exp<"u","internal-error"),ge(typeof S.iat<"u","internal-error"),Number(S.exp)-Number(S.iat)}(S.idToken);this.updateTokensAndExpiration(S.idToken,S.refreshToken,I)}getToken(S,I=!1){var L=this;return(0,a.Z)(function*(){return ge(!L.accessToken||L.refreshToken,S,"user-token-expired"),I||!L.accessToken||L.isExpired?L.refreshToken?(yield L.refresh(S,L.refreshToken),L.accessToken):null:L.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(S,I){var L=this;return(0,a.Z)(function*(){const{accessToken:Y,refreshToken:se,expiresIn:Ie}=yield function X(R,S){return J.apply(this,arguments)}(S,I);L.updateTokensAndExpiration(Y,se,Number(Ie))})()}updateTokensAndExpiration(S,I,L){this.refreshToken=I||null,this.accessToken=S||null,this.expirationTime=Date.now()+1e3*L}static fromJSON(S,I){const{refreshToken:L,accessToken:Y,expirationTime:se}=I,Ie=new de;return L&&(ge("string"==typeof L,"internal-error",{appName:S}),Ie.refreshToken=L),Y&&(ge("string"==typeof Y,"internal-error",{appName:S}),Ie.accessToken=Y),se&&(ge("number"==typeof se,"internal-error",{appName:S}),Ie.expirationTime=se),Ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(S){this.accessToken=S.accessToken,this.refreshToken=S.refreshToken,this.expirationTime=S.expirationTime}_clone(){return Object.assign(new de,this.toJSON())}_performRefresh(){return Me("not implemented")}}function Ge(R,S){ge("string"==typeof R||typeof R>"u","internal-error",{appName:S})}class wt{constructor(S){var{uid:I,auth:L,stsTokenManager:Y}=S,se=(0,_e._T)(S,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=I,this.auth=L,this.stsTokenManager=Y,this.accessToken=Y.accessToken,this.displayName=se.displayName||null,this.email=se.email||null,this.emailVerified=se.emailVerified||!1,this.phoneNumber=se.phoneNumber||null,this.photoURL=se.photoURL||null,this.isAnonymous=se.isAnonymous||!1,this.tenantId=se.tenantId||null,this.providerData=se.providerData?[...se.providerData]:[],this.metadata=new ci(se.createdAt||void 0,se.lastLoginAt||void 0)}getIdToken(S){var I=this;return(0,a.Z)(function*(){const L=yield Yn(I,I.stsTokenManager.getToken(I.auth,S));return ge(L,I.auth,"internal-error"),I.accessToken!==L&&(I.accessToken=L,yield I.auth._persistUserIfCurrent(I),I.auth._notifyListenersIfCurrent(I)),L})()}getIdTokenResult(S){return function Gn(R){return Kn.apply(this,arguments)}(this,S)}reload(){return function qi(R){return me.apply(this,arguments)}(this)}_assign(S){this!==S&&(ge(this.uid===S.uid,this.auth,"internal-error"),this.displayName=S.displayName,this.photoURL=S.photoURL,this.email=S.email,this.emailVerified=S.emailVerified,this.phoneNumber=S.phoneNumber,this.isAnonymous=S.isAnonymous,this.tenantId=S.tenantId,this.providerData=S.providerData.map(I=>Object.assign({},I)),this.metadata._copy(S.metadata),this.stsTokenManager._assign(S.stsTokenManager))}_clone(S){return new wt(Object.assign(Object.assign({},this),{auth:S,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(S){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=S,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(S){this.reloadListener?this.reloadListener(S):this.reloadUserInfo=S}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(S,I=!1){var L=this;return(0,a.Z)(function*(){let Y=!1;S.idToken&&S.idToken!==L.stsTokenManager.accessToken&&(L.stsTokenManager.updateFromServerResponse(S),Y=!0),I&&(yield Yi(L)),yield L.auth._persistUserIfCurrent(L),Y&&L.auth._notifyListenersIfCurrent(L)})()}delete(){var S=this;return(0,a.Z)(function*(){const I=yield S.getIdToken();return yield Yn(S,function yi(R,S){return tt.apply(this,arguments)}(S.auth,{idToken:I})),S.stsTokenManager.clearRefreshToken(),S.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(S=>Object.assign({},S)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(S,I){var L,Y,se,Ie,vt,hn,bn,Zn;const zi=null!==(L=I.displayName)&&void 0!==L?L:void 0,jo=null!==(Y=I.email)&&void 0!==Y?Y:void 0,gl=null!==(se=I.phoneNumber)&&void 0!==se?se:void 0,Lu=null!==(Ie=I.photoURL)&&void 0!==Ie?Ie:void 0,d_=null!==(vt=I.tenantId)&&void 0!==vt?vt:void 0,bg=null!==(hn=I._redirectEventId)&&void 0!==hn?hn:void 0,th=null!==(bn=I.createdAt)&&void 0!==bn?bn:void 0,Fp=null!==(Zn=I.lastLoginAt)&&void 0!==Zn?Zn:void 0,{uid:nh,emailVerified:Vu,isAnonymous:Hu,providerData:Lp,stsTokenManager:yv}=I;ge(nh&&yv,S,"internal-error");const U0=de.fromJSON(this.name,yv);ge("string"==typeof nh,S,"internal-error"),Ge(zi,S.name),Ge(jo,S.name),ge("boolean"==typeof Vu,S,"internal-error"),ge("boolean"==typeof Hu,S,"internal-error"),Ge(gl,S.name),Ge(Lu,S.name),Ge(d_,S.name),Ge(bg,S.name),Ge(th,S.name),Ge(Fp,S.name);const wg=new wt({uid:nh,auth:S,email:jo,emailVerified:Vu,displayName:zi,isAnonymous:Hu,photoURL:Lu,phoneNumber:gl,tenantId:d_,stsTokenManager:U0,createdAt:th,lastLoginAt:Fp});return Lp&&Array.isArray(Lp)&&(wg.providerData=Lp.map(Va=>Object.assign({},Va))),bg&&(wg._redirectEventId=bg),wg}static _fromIdTokenResponse(S,I,L=!1){return(0,a.Z)(function*(){const Y=new de;Y.updateFromServerResponse(I);const se=new wt({uid:I.localId,auth:S,stsTokenManager:Y,isAnonymous:L});return yield Yi(se),se})()}}const yn=(()=>{class R{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(I,L){var Y=this;return(0,a.Z)(function*(){Y.storage[I]=L})()}_get(I){var L=this;return(0,a.Z)(function*(){const Y=L.storage[I];return void 0===Y?null:Y})()}_remove(I){var L=this;return(0,a.Z)(function*(){delete L.storage[I]})()}_addListener(I,L){}_removeListener(I,L){}}return R.type="NONE",R})();function Hn(R,S,I){return`firebase:${R}:${S}:${I}`}class Pe{constructor(S,I,L){this.persistence=S,this.auth=I,this.userKey=L;const{config:Y,name:se}=this.auth;this.fullUserKey=Hn(this.userKey,Y.apiKey,se),this.fullPersistenceKey=Hn("persistence",Y.apiKey,se),this.boundEventHandler=I._onStorageEvent.bind(I),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(S){return this.persistence._set(this.fullUserKey,S.toJSON())}getCurrentUser(){var S=this;return(0,a.Z)(function*(){const I=yield S.persistence._get(S.fullUserKey);return I?wt._fromJSON(S.auth,I):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(S){var I=this;return(0,a.Z)(function*(){if(I.persistence===S)return;const L=yield I.getCurrentUser();return yield I.removeCurrentUser(),I.persistence=S,L?I.setCurrentUser(L):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(S,I,L="authUser"){return(0,a.Z)(function*(){if(!I.length)return new Pe(Ce(yn),S,L);const Y=(yield Promise.all(I.map(function(){var bn=(0,a.Z)(function*(Zn){if(yield Zn._isAvailable())return Zn});return function(Zn){return bn.apply(this,arguments)}}()))).filter(bn=>bn);let se=Y[0]||Ce(yn);const Ie=Hn(L,S.config.apiKey,S.name);let vt=null;for(const bn of I)try{const Zn=yield bn._get(Ie);if(Zn){const zi=wt._fromJSON(S,Zn);bn!==se&&(vt=zi),se=bn;break}}catch{}const hn=Y.filter(bn=>bn._shouldAllowMigration);return se._shouldAllowMigration&&hn.length?(se=hn[0],vt&&(yield se._set(Ie,vt.toJSON())),yield Promise.all(I.map(function(){var bn=(0,a.Z)(function*(Zn){if(Zn!==se)try{yield Zn._remove(Ie)}catch{}});return function(Zn){return bn.apply(this,arguments)}}())),new Pe(se,S,L)):new Pe(se,S,L)})()}}function le(R){const S=R.toLowerCase();if(S.includes("opera/")||S.includes("opr/")||S.includes("opios/"))return"Opera";if(at(S))return"IEMobile";if(S.includes("msie")||S.includes("trident/"))return"IE";if(S.includes("edge/"))return"Edge";if(oe(S))return"Firefox";if(S.includes("silk/"))return"Silk";if(it(S))return"Blackberry";if(Ot(S))return"Webos";if(ue(S))return"Safari";if((S.includes("chrome/")||De(S))&&!S.includes("edge/"))return"Chrome";if(Lt(S))return"Android";{const L=R.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===L?.length)return L[1]}return"Other"}function oe(R=(0,V.z$)()){return/firefox\//i.test(R)}function ue(R=(0,V.z$)()){const S=R.toLowerCase();return S.includes("safari/")&&!S.includes("chrome/")&&!S.includes("crios/")&&!S.includes("android")}function De(R=(0,V.z$)()){return/crios\//i.test(R)}function at(R=(0,V.z$)()){return/iemobile/i.test(R)}function Lt(R=(0,V.z$)()){return/android/i.test(R)}function it(R=(0,V.z$)()){return/blackberry/i.test(R)}function Ot(R=(0,V.z$)()){return/webos/i.test(R)}function dn(R=(0,V.z$)()){return/iphone|ipad|ipod/i.test(R)||/macintosh/i.test(R)&&/mobile/i.test(R)}function ni(R=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(R)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(R)}function Si(R=(0,V.z$)()){return dn(R)||Lt(R)||Ot(R)||it(R)||/windows phone/i.test(R)||at(R)}function Qe(R,S=[]){let I;switch(R){case"Browser":I=le((0,V.z$)());break;case"Worker":I=`${le((0,V.z$)())}-${R}`;break;default:I=R}const L=S.length?S.join(","):"FirebaseCore-web";return`${I}/JsCore/${W.SDK_VERSION}/${L}`}class Zt{constructor(S){this.auth=S,this.queue=[]}pushCallback(S,I){const L=se=>new Promise((Ie,vt)=>{try{Ie(S(se))}catch(hn){vt(hn)}});L.onAbort=I,this.queue.push(L);const Y=this.queue.length-1;return()=>{this.queue[Y]=()=>Promise.resolve()}}runMiddleware(S){var I=this;return(0,a.Z)(function*(){var L;if(I.auth.currentUser===S)return;const Y=[];try{for(const se of I.queue)yield se(S),se.onAbort&&Y.push(se.onAbort)}catch(se){Y.reverse();for(const Ie of Y)try{Ie()}catch{}throw I.auth._errorFactory.create("login-blocked",{originalMessage:null===(L=se)||void 0===L?void 0:L.message})}})()}}class Dt{constructor(S,I,L){this.app=S,this.heartbeatServiceProvider=I,this.config=L,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ee(this),this.idTokenSubscription=new Ee(this),this.beforeStateQueue=new Zt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ct,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=S.name,this.clientVersion=L.sdkClientVersion}_initializeWithPersistence(S,I){var L=this;return I&&(this._popupRedirectResolver=Ce(I)),this._initializationPromise=this.queue((0,a.Z)(function*(){var Y,se;if(!L._deleted&&(L.persistenceManager=yield Pe.create(L,S),!L._deleted)){if(null!==(Y=L._popupRedirectResolver)&&void 0!==Y&&Y._shouldInitProactively)try{yield L._popupRedirectResolver._initialize(L)}catch{}yield L.initializeCurrentUser(I),L.lastNotifiedUid=(null===(se=L.currentUser)||void 0===se?void 0:se.uid)||null,!L._deleted&&(L._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var S=this;return(0,a.Z)(function*(){if(S._deleted)return;const I=yield S.assertedPersistence.getCurrentUser();if(S.currentUser||I){if(S.currentUser&&I&&S.currentUser.uid===I.uid)return S._currentUser._assign(I),void(yield S.currentUser.getIdToken());yield S._updateCurrentUser(I,!0)}})()}initializeCurrentUser(S){var I=this;return(0,a.Z)(function*(){var L;const Y=yield I.assertedPersistence.getCurrentUser();let se=Y,Ie=!1;if(S&&I.config.authDomain){yield I.getOrInitRedirectPersistenceManager();const vt=null===(L=I.redirectUser)||void 0===L?void 0:L._redirectEventId,hn=se?._redirectEventId,bn=yield I.tryRedirectSignIn(S);(!vt||vt===hn)&&bn?.user&&(se=bn.user,Ie=!0)}if(!se)return I.directlySetCurrentUser(null);if(!se._redirectEventId){if(Ie)try{yield I.beforeStateQueue.runMiddleware(se)}catch(vt){se=Y,I._popupRedirectResolver._overrideRedirectResult(I,()=>Promise.reject(vt))}return se?I.reloadAndSetCurrentUserOrClear(se):I.directlySetCurrentUser(null)}return ge(I._popupRedirectResolver,I,"argument-error"),yield I.getOrInitRedirectPersistenceManager(),I.redirectUser&&I.redirectUser._redirectEventId===se._redirectEventId?I.directlySetCurrentUser(se):I.reloadAndSetCurrentUserOrClear(se)})()}tryRedirectSignIn(S){var I=this;return(0,a.Z)(function*(){let L=null;try{L=yield I._popupRedirectResolver._completeRedirectFn(I,S,!0)}catch{yield I._setRedirectUser(null)}return L})()}reloadAndSetCurrentUserOrClear(S){var I=this;return(0,a.Z)(function*(){var L;try{yield Yi(S)}catch(Y){if("auth/network-request-failed"!==(null===(L=Y)||void 0===L?void 0:L.code))return I.directlySetCurrentUser(null)}return I.directlySetCurrentUser(S)})()}useDeviceLanguage(){this.languageCode=function rn(){if(typeof navigator>"u")return null;const R=navigator;return R.languages&&R.languages[0]||R.language||null}()}_delete(){var S=this;return(0,a.Z)(function*(){S._deleted=!0})()}updateCurrentUser(S){var I=this;return(0,a.Z)(function*(){const L=S?(0,V.m9)(S):null;return L&&ge(L.auth.config.apiKey===I.config.apiKey,I,"invalid-user-token"),I._updateCurrentUser(L&&L._clone(I))})()}_updateCurrentUser(S,I=!1){var L=this;return(0,a.Z)(function*(){if(!L._deleted)return S&&ge(L.tenantId===S.tenantId,L,"tenant-id-mismatch"),I||(yield L.beforeStateQueue.runMiddleware(S)),L.queue((0,a.Z)(function*(){yield L.directlySetCurrentUser(S),L.notifyAuthListeners()}))})()}signOut(){var S=this;return(0,a.Z)(function*(){return yield S.beforeStateQueue.runMiddleware(null),(S.redirectPersistenceManager||S._popupRedirectResolver)&&(yield S._setRedirectUser(null)),S._updateCurrentUser(null,!0)})()}setPersistence(S){var I=this;return this.queue((0,a.Z)(function*(){yield I.assertedPersistence.setPersistence(Ce(S))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(S){this._errorFactory=new V.LL("auth","Firebase",S())}onAuthStateChanged(S,I,L){return this.registerStateListener(this.authStateSubscription,S,I,L)}beforeAuthStateChanged(S,I){return this.beforeStateQueue.pushCallback(S,I)}onIdTokenChanged(S,I,L){return this.registerStateListener(this.idTokenSubscription,S,I,L)}toJSON(){var S;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(S=this._currentUser)||void 0===S?void 0:S.toJSON()}}_setRedirectUser(S,I){var L=this;return(0,a.Z)(function*(){const Y=yield L.getOrInitRedirectPersistenceManager(I);return null===S?Y.removeCurrentUser():Y.setCurrentUser(S)})()}getOrInitRedirectPersistenceManager(S){var I=this;return(0,a.Z)(function*(){if(!I.redirectPersistenceManager){const L=S&&Ce(S)||I._popupRedirectResolver;ge(L,I,"argument-error"),I.redirectPersistenceManager=yield Pe.create(I,[Ce(L._redirectPersistence)],"redirectUser"),I.redirectUser=yield I.redirectPersistenceManager.getCurrentUser()}return I.redirectPersistenceManager})()}_redirectUserForId(S){var I=this;return(0,a.Z)(function*(){var L,Y;return I._isInitialized&&(yield I.queue((0,a.Z)(function*(){}))),(null===(L=I._currentUser)||void 0===L?void 0:L._redirectEventId)===S?I._currentUser:(null===(Y=I.redirectUser)||void 0===Y?void 0:Y._redirectEventId)===S?I.redirectUser:null})()}_persistUserIfCurrent(S){var I=this;return(0,a.Z)(function*(){if(S===I.currentUser)return I.queue((0,a.Z)(function*(){return I.directlySetCurrentUser(S)}))})()}_notifyListenersIfCurrent(S){S===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var S,I;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const L=null!==(I=null===(S=this.currentUser)||void 0===S?void 0:S.uid)&&void 0!==I?I:null;this.lastNotifiedUid!==L&&(this.lastNotifiedUid=L,this.authStateSubscription.next(this.currentUser))}registerStateListener(S,I,L,Y){if(this._deleted)return()=>{};const se="function"==typeof I?I:I.next.bind(I),Ie=this._isInitialized?Promise.resolve():this._initializationPromise;return ge(Ie,this,"internal-error"),Ie.then(()=>se(this.currentUser)),"function"==typeof I?S.addObserver(I,L,Y):S.addObserver(I)}directlySetCurrentUser(S){var I=this;return(0,a.Z)(function*(){I.currentUser&&I.currentUser!==S&&(I._currentUser._stopProactiveRefresh(),S&&I.isProactiveRefreshEnabled&&S._startProactiveRefresh()),I.currentUser=S,S?yield I.assertedPersistence.setCurrentUser(S):yield I.assertedPersistence.removeCurrentUser()})()}queue(S){return this.operations=this.operations.then(S,S),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(S){!S||this.frameworks.includes(S)||(this.frameworks.push(S),this.frameworks.sort(),this.clientVersion=Qe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var S=this;return(0,a.Z)(function*(){var I;const L={"X-Client-Version":S.clientVersion};S.app.options.appId&&(L["X-Firebase-gmpid"]=S.app.options.appId);const Y=yield null===(I=S.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===I?void 0:I.getHeartbeatsHeader();return Y&&(L["X-Firebase-Client"]=Y),L})()}}function On(R){return(0,V.m9)(R)}class Ee{constructor(S){this.auth=S,this.observer=null,this.addObserver=(0,V.ne)(I=>this.observer=I)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Xe(R,S,I){const L=On(R);ge(L._canInitEmulator,L,"emulator-config-failed"),ge(/^https?:\/\//.test(S),L,"invalid-emulator-scheme");const Y=!!I?.disableWarnings,se=yt(S),{host:Ie,port:vt}=function an(R){const S=yt(R),I=/(\/\/)?([^?#/]+)/.exec(R.substr(S.length));if(!I)return{host:"",port:null};const L=I[2].split("@").pop()||"",Y=/^(\[[^\]]+\])(:|$)/.exec(L);if(Y){const se=Y[1];return{host:se,port:wi(L.substr(se.length+1))}}{const[se,Ie]=L.split(":");return{host:se,port:wi(Ie)}}}(S);L.config.emulator={url:`${se}//${Ie}${null===vt?"":`:${vt}`}/`},L.settings.appVerificationDisabledForTesting=!0,L.emulatorConfig=Object.freeze({host:Ie,port:vt,protocol:se.replace(":",""),options:Object.freeze({disableWarnings:Y})}),Y||function si(){function R(){const S=document.createElement("p"),I=S.style;S.innerText="Running in emulator mode. Do not use with production credentials.",I.position="fixed",I.width="100%",I.backgroundColor="#ffffff",I.border=".1em solid #000000",I.color="#b50000",I.bottom="0px",I.left="0px",I.margin="0px",I.zIndex="10000",I.textAlign="center",S.classList.add("firebase-emulator-warning"),document.body.appendChild(S)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",R):R())}()}function yt(R){const S=R.indexOf(":");return S<0?"":R.substr(0,S+1)}function wi(R){if(!R)return null;const S=Number(R);return isNaN(S)?null:S}class An{constructor(S,I){this.providerId=S,this.signInMethod=I}toJSON(){return Me("not implemented")}_getIdTokenResponse(S){return Me("not implemented")}_linkToIdToken(S,I){return Me("not implemented")}_getReauthenticationResolver(S){return Me("not implemented")}}function Ir(R,S){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,a.Z)(function*(R,S){return ut(R,"POST","/v1/accounts:resetPassword",Jt(R,S))})).apply(this,arguments)}function ai(R,S){return lo.apply(this,arguments)}function lo(){return(lo=(0,a.Z)(function*(R,S){return ut(R,"POST","/v1/accounts:update",S)})).apply(this,arguments)}function gc(R,S){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,a.Z)(function*(R,S){return ut(R,"POST","/v1/accounts:update",Jt(R,S))})).apply(this,arguments)}function Fl(){return(Fl=(0,a.Z)(function*(R,S){return en(R,"POST","/v1/accounts:signInWithPassword",Jt(R,S))})).apply(this,arguments)}function Ui(R,S){return da.apply(this,arguments)}function da(){return(da=(0,a.Z)(function*(R,S){return ut(R,"POST","/v1/accounts:sendOobCode",Jt(R,S))})).apply(this,arguments)}function Bi(R,S){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,a.Z)(function*(R,S){return Ui(R,S)})).apply(this,arguments)}function co(R,S){return To.apply(this,arguments)}function To(){return(To=(0,a.Z)(function*(R,S){return Ui(R,S)})).apply(this,arguments)}function gu(R,S){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,a.Z)(function*(R,S){return Ui(R,S)})).apply(this,arguments)}function zs(R,S){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,a.Z)(function*(R,S){return Ui(R,S)})).apply(this,arguments)}function kd(){return(kd=(0,a.Z)(function*(R,S){return en(R,"POST","/v1/accounts:signInWithEmailLink",Jt(R,S))})).apply(this,arguments)}function uo(){return(uo=(0,a.Z)(function*(R,S){return en(R,"POST","/v1/accounts:signInWithEmailLink",Jt(R,S))})).apply(this,arguments)}class Hr extends An{constructor(S,I,L,Y=null){super("password",L),this._email=S,this._password=I,this._tenantId=Y}static _fromEmailAndPassword(S,I){return new Hr(S,I,"password")}static _fromEmailAndCode(S,I,L=null){return new Hr(S,I,"emailLink",L)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(S){const I="string"==typeof S?JSON.parse(S):S;if(I?.email&&I?.password){if("password"===I.signInMethod)return this._fromEmailAndPassword(I.email,I.password);if("emailLink"===I.signInMethod)return this._fromEmailAndCode(I.email,I.password,I.tenantId)}return null}_getIdTokenResponse(S){var I=this;return(0,a.Z)(function*(){switch(I.signInMethod){case"password":return function mc(R,S){return Fl.apply(this,arguments)}(S,{returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function tp(R,S){return kd.apply(this,arguments)}(S,{email:I._email,oobCode:I._password});default:gt(S,"internal-error")}})()}_linkToIdToken(S,I){var L=this;return(0,a.Z)(function*(){switch(L.signInMethod){case"password":return ai(S,{idToken:I,returnSecureToken:!0,email:L._email,password:L._password});case"emailLink":return function Qf(R,S){return uo.apply(this,arguments)}(S,{idToken:I,email:L._email,oobCode:L._password});default:gt(S,"internal-error")}})()}_getReauthenticationResolver(S){return this._getIdTokenResponse(S)}}function ha(R,S){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,a.Z)(function*(R,S){return en(R,"POST","/v1/accounts:signInWithIdp",Jt(R,S))})).apply(this,arguments)}class pa extends An{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(S){const I=new pa(S.providerId,S.signInMethod);return S.idToken||S.accessToken?(S.idToken&&(I.idToken=S.idToken),S.accessToken&&(I.accessToken=S.accessToken),S.nonce&&!S.pendingToken&&(I.nonce=S.nonce),S.pendingToken&&(I.pendingToken=S.pendingToken)):S.oauthToken&&S.oauthTokenSecret?(I.accessToken=S.oauthToken,I.secret=S.oauthTokenSecret):gt("argument-error"),I}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(S){const I="string"==typeof S?JSON.parse(S):S,{providerId:L,signInMethod:Y}=I,se=(0,_e._T)(I,["providerId","signInMethod"]);if(!L||!Y)return null;const Ie=new pa(L,Y);return Ie.idToken=se.idToken||void 0,Ie.accessToken=se.accessToken||void 0,Ie.secret=se.secret,Ie.nonce=se.nonce,Ie.pendingToken=se.pendingToken||null,Ie}_getIdTokenResponse(S){return ha(S,this.buildRequest())}_linkToIdToken(S,I){const L=this.buildRequest();return L.idToken=I,ha(S,L)}_getReauthenticationResolver(S){const I=this.buildRequest();return I.autoCreate=!1,ha(S,I)}buildRequest(){const S={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)S.pendingToken=this.pendingToken;else{const I={};this.idToken&&(I.id_token=this.idToken),this.accessToken&&(I.access_token=this.accessToken),this.secret&&(I.oauth_token_secret=this.secret),I.providerId=this.providerId,this.nonce&&!this.pendingToken&&(I.nonce=this.nonce),S.postBody=(0,V.xO)(I)}return S}}function Xf(R,S){return np.apply(this,arguments)}function np(){return(np=(0,a.Z)(function*(R,S){return ut(R,"POST","/v1/accounts:sendVerificationCode",Jt(R,S))})).apply(this,arguments)}function eg(){return(eg=(0,a.Z)(function*(R,S){return en(R,"POST","/v1/accounts:signInWithPhoneNumber",Jt(R,S))})).apply(this,arguments)}function Wm(){return(Wm=(0,a.Z)(function*(R,S){const I=yield en(R,"POST","/v1/accounts:signInWithPhoneNumber",Jt(R,S));if(I.temporaryProof)throw Sn(R,"account-exists-with-different-credential",I);return I})).apply(this,arguments)}const ip={USER_NOT_FOUND:"user-not-found"};function Od(){return(Od=(0,a.Z)(function*(R,S){return en(R,"POST","/v1/accounts:signInWithPhoneNumber",Jt(R,Object.assign(Object.assign({},S),{operation:"REAUTH"})),ip)})).apply(this,arguments)}class Gs extends An{constructor(S){super("phone","phone"),this.params=S}static _fromVerification(S,I){return new Gs({verificationId:S,verificationCode:I})}static _fromTokenResponse(S,I){return new Gs({phoneNumber:S,temporaryProof:I})}_getIdTokenResponse(S){return function nv(R,S){return eg.apply(this,arguments)}(S,this._makeVerificationRequest())}_linkToIdToken(S,I){return function iv(R,S){return Wm.apply(this,arguments)}(S,Object.assign({idToken:I},this._makeVerificationRequest()))}_getReauthenticationResolver(S){return function rv(R,S){return Od.apply(this,arguments)}(S,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:S,phoneNumber:I,verificationId:L,verificationCode:Y}=this.params;return S&&I?{temporaryProof:S,phoneNumber:I}:{sessionInfo:L,code:Y}}toJSON(){const S={providerId:this.providerId};return this.params.phoneNumber&&(S.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(S.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(S.verificationCode=this.params.verificationCode),this.params.verificationId&&(S.verificationId=this.params.verificationId),S}static fromJSON(S){"string"==typeof S&&(S=JSON.parse(S));const{verificationId:I,verificationCode:L,phoneNumber:Y,temporaryProof:se}=S;return L||I||Y||se?new Gs({verificationId:I,verificationCode:L,phoneNumber:Y,temporaryProof:se}):null}}class rp{constructor(S){var I,L,Y,se,Ie,vt;const hn=(0,V.zd)((0,V.pd)(S)),bn=null!==(I=hn.apiKey)&&void 0!==I?I:null,Zn=null!==(L=hn.oobCode)&&void 0!==L?L:null,zi=function el(R){switch(R){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Y=hn.mode)&&void 0!==Y?Y:null);ge(bn&&Zn&&zi,"argument-error"),this.apiKey=bn,this.operation=zi,this.code=Zn,this.continueUrl=null!==(se=hn.continueUrl)&&void 0!==se?se:null,this.languageCode=null!==(Ie=hn.languageCode)&&void 0!==Ie?Ie:null,this.tenantId=null!==(vt=hn.tenantId)&&void 0!==vt?vt:null}static parseLink(S){const I=function Km(R){const S=(0,V.zd)((0,V.pd)(R)).link,I=S?(0,V.zd)((0,V.pd)(S)).deep_link_id:null,L=(0,V.zd)((0,V.pd)(R)).deep_link_id;return(L?(0,V.zd)((0,V.pd)(L)).link:null)||L||I||S||R}(S);try{return new rp(I)}catch{return null}}}let ds=(()=>{class R{constructor(){this.providerId=R.PROVIDER_ID}static credential(I,L){return Hr._fromEmailAndPassword(I,L)}static credentialWithLink(I,L){const Y=rp.parseLink(L);return ge(Y,"argument-error"),Hr._fromEmailAndCode(I,Y.code,Y.tenantId)}}return R.PROVIDER_ID="password",R.EMAIL_PASSWORD_SIGN_IN_METHOD="password",R.EMAIL_LINK_SIGN_IN_METHOD="emailLink",R})();class qs{constructor(S){this.providerId=S,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(S){this.defaultLanguageCode=S}setCustomParameters(S){return this.customParameters=S,this}getCustomParameters(){return this.customParameters}}class hs extends qs{constructor(){super(...arguments),this.scopes=[]}addScope(S){return this.scopes.includes(S)||this.scopes.push(S),this}getScopes(){return[...this.scopes]}}class _c extends hs{static credentialFromJSON(S){const I="string"==typeof S?JSON.parse(S):S;return ge("providerId"in I&&"signInMethod"in I,"argument-error"),pa._fromParams(I)}credential(S){return this._credential(Object.assign(Object.assign({},S),{nonce:S.rawNonce}))}_credential(S){return ge(S.idToken||S.accessToken,"argument-error"),pa._fromParams(Object.assign(Object.assign({},S),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(S){return _c.oauthCredentialFromTaggedObject(S)}static credentialFromError(S){return _c.oauthCredentialFromTaggedObject(S.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:S}){if(!S)return null;const{oauthIdToken:I,oauthAccessToken:L,oauthTokenSecret:Y,pendingToken:se,nonce:Ie,providerId:vt}=S;if(!L&&!Y&&!I&&!se||!vt)return null;try{return new _c(vt)._credential({idToken:I,accessToken:L,nonce:Ie,pendingToken:se})}catch{return null}}}let sv=(()=>{class R extends hs{constructor(){super("facebook.com")}static credential(I){return pa._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.FACEBOOK_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return R.credentialFromTaggedObject(I)}static credentialFromError(I){return R.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return R.credential(I.oauthAccessToken)}catch{return null}}}return R.FACEBOOK_SIGN_IN_METHOD="facebook.com",R.PROVIDER_ID="facebook.com",R})(),tl=(()=>{class R extends hs{constructor(){super("google.com"),this.addScope("profile")}static credential(I,L){return pa._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.GOOGLE_SIGN_IN_METHOD,idToken:I,accessToken:L})}static credentialFromResult(I){return R.credentialFromTaggedObject(I)}static credentialFromError(I){return R.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthIdToken:L,oauthAccessToken:Y}=I;if(!L&&!Y)return null;try{return R.credential(L,Y)}catch{return null}}}return R.GOOGLE_SIGN_IN_METHOD="google.com",R.PROVIDER_ID="google.com",R})(),Zs=(()=>{class R extends hs{constructor(){super("github.com")}static credential(I){return pa._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.GITHUB_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return R.credentialFromTaggedObject(I)}static credentialFromError(I){return R.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return R.credential(I.oauthAccessToken)}catch{return null}}}return R.GITHUB_SIGN_IN_METHOD="github.com",R.PROVIDER_ID="github.com",R})();class Ll extends An{constructor(S,I){super(S,S),this.pendingToken=I}_getIdTokenResponse(S){return ha(S,this.buildRequest())}_linkToIdToken(S,I){const L=this.buildRequest();return L.idToken=I,ha(S,L)}_getReauthenticationResolver(S){const I=this.buildRequest();return I.autoCreate=!1,ha(S,I)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(S){const I="string"==typeof S?JSON.parse(S):S,{providerId:L,signInMethod:Y,pendingToken:se}=I;return L&&Y&&se&&L===Y?new Ll(L,se):null}static _create(S,I){return new Ll(S,I)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class mu extends qs{constructor(S){ge(S.startsWith("saml."),"argument-error"),super(S)}static credentialFromResult(S){return mu.samlCredentialFromTaggedObject(S)}static credentialFromError(S){return mu.samlCredentialFromTaggedObject(S.customData||{})}static credentialFromJSON(S){const I=Ll.fromJSON(S);return ge(I,"argument-error"),I}static samlCredentialFromTaggedObject({_tokenResponse:S}){if(!S)return null;const{pendingToken:I,providerId:L}=S;if(!I||!L)return null;try{return Ll._create(L,I)}catch{return null}}}let vi=(()=>{class R extends hs{constructor(){super("twitter.com")}static credential(I,L){return pa._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.TWITTER_SIGN_IN_METHOD,oauthToken:I,oauthTokenSecret:L})}static credentialFromResult(I){return R.credentialFromTaggedObject(I)}static credentialFromError(I){return R.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthAccessToken:L,oauthTokenSecret:Y}=I;if(!L||!Y)return null;try{return R.credential(L,Y)}catch{return null}}}return R.TWITTER_SIGN_IN_METHOD="twitter.com",R.PROVIDER_ID="twitter.com",R})();function yc(R,S){return tg.apply(this,arguments)}function tg(){return(tg=(0,a.Z)(function*(R,S){return en(R,"POST","/v1/accounts:signUp",Jt(R,S))})).apply(this,arguments)}class xo{constructor(S){this.user=S.user,this.providerId=S.providerId,this._tokenResponse=S._tokenResponse,this.operationType=S.operationType}static _fromIdTokenResponse(S,I,L,Y=!1){return(0,a.Z)(function*(){const se=yield wt._fromIdTokenResponse(S,L,Y),Ie=vc(L);return new xo({user:se,providerId:Ie,_tokenResponse:L,operationType:I})})()}static _forOperation(S,I,L){return(0,a.Z)(function*(){yield S._updateTokensIfNecessary(L,!0);const Y=vc(L);return new xo({user:S,providerId:Y,_tokenResponse:L,operationType:I})})()}}function vc(R){return R.providerId?R.providerId:"phoneNumber"in R?"phone":null}function ng(R){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,a.Z)(function*(R){var S;const I=On(R);if(yield I._initializationPromise,null!==(S=I.currentUser)&&void 0!==S&&S.isAnonymous)return new xo({user:I.currentUser,providerId:null,operationType:"signIn"});const L=yield yc(I,{returnSecureToken:!0}),Y=yield xo._fromIdTokenResponse(I,"signIn",L,!0);return yield I._updateCurrentUser(Y.user),Y})).apply(this,arguments)}class op extends V.ZR{constructor(S,I,L,Y){var se;super(I.code,I.message),this.operationType=L,this.user=Y,Object.setPrototypeOf(this,op.prototype),this.customData={appName:S.name,tenantId:null!==(se=S.tenantId)&&void 0!==se?se:void 0,_serverResponse:I.customData._serverResponse,operationType:L}}static _fromErrorAndOperation(S,I,L,Y){return new op(S,I,L,Y)}}function av(R,S,I,L){return("reauthenticate"===S?I._getReauthenticationResolver(R):I._getIdTokenResponse(R)).catch(se=>{throw"auth/multi-factor-auth-required"===se.code?op._fromErrorAndOperation(R,se,S,L):se})}function Pd(R){return new Set(R.map(({providerId:S})=>S).filter(S=>!!S))}function As(R,S){return ig.apply(this,arguments)}function ig(){return(ig=(0,a.Z)(function*(R,S){const I=(0,V.m9)(R);yield So(!0,I,S);const{providerUserInfo:L}=yield Le(I.auth,{idToken:yield I.getIdToken(),deleteProvider:[S]}),Y=Pd(L||[]);return I.providerData=I.providerData.filter(se=>Y.has(se.providerId)),Y.has("phone")||(I.phoneNumber=null),yield I.auth._persistUserIfCurrent(I),I})).apply(this,arguments)}function Vl(R,S){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,a.Z)(function*(R,S,I=!1){const L=yield Yn(R,S._linkToIdToken(R.auth,yield R.getIdToken()),I);return xo._forOperation(R,"link",L)})).apply(this,arguments)}function So(R,S,I){return bc.apply(this,arguments)}function bc(){return(bc=(0,a.Z)(function*(R,S,I){yield Yi(S);const Y=!1===R?"provider-already-linked":"no-such-provider";ge(Pd(S.providerData).has(I)===R,S.auth,Y)})).apply(this,arguments)}function nl(R,S){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,a.Z)(function*(R,S,I=!1){var L;const{auth:Y}=R,se="reauthenticate";try{const Ie=yield Yn(R,av(Y,se,S,R),I);ge(Ie.idToken,Y,"internal-error");const vt=Ht(Ie.idToken);ge(vt,Y,"internal-error");const{sub:hn}=vt;return ge(R.uid===hn,Y,"user-mismatch"),xo._forOperation(R,se,Ie)}catch(Ie){throw"auth/user-not-found"===(null===(L=Ie)||void 0===L?void 0:L.code)&&gt(Y,"user-mismatch"),Ie}})).apply(this,arguments)}function $s(R,S){return sp.apply(this,arguments)}function sp(){return(sp=(0,a.Z)(function*(R,S,I=!1){const L="signIn",Y=yield av(R,L,S),se=yield xo._fromIdTokenResponse(R,L,Y);return I||(yield R._updateCurrentUser(se.user)),se})).apply(this,arguments)}function Bl(R,S){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,a.Z)(function*(R,S){return $s(On(R),S)})).apply(this,arguments)}function ap(R,S){return rg.apply(this,arguments)}function rg(){return(rg=(0,a.Z)(function*(R,S){const I=(0,V.m9)(R);return yield So(!1,I,S.providerId),Vl(I,S)})).apply(this,arguments)}function lp(R,S){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,a.Z)(function*(R,S){return nl((0,V.m9)(R),S)})).apply(this,arguments)}function Nd(R,S){return _u.apply(this,arguments)}function _u(){return(_u=(0,a.Z)(function*(R,S){return en(R,"POST","/v1/accounts:signInWithCustomToken",Jt(R,S))})).apply(this,arguments)}function cp(R,S){return wc.apply(this,arguments)}function wc(){return(wc=(0,a.Z)(function*(R,S){const I=On(R),L=yield Nd(I,{token:S,returnSecureToken:!0}),Y=yield xo._fromIdTokenResponse(I,"signIn",L);return yield I._updateCurrentUser(Y.user),Y})).apply(this,arguments)}class Et{constructor(S,I){this.factorId=S,this.uid=I.mfaEnrollmentId,this.enrollmentTime=new Date(I.enrolledAt).toUTCString(),this.displayName=I.displayName}static _fromServerResponse(S,I){return"phoneInfo"in I?di._fromServerResponse(S,I):gt(S,"internal-error")}}class di extends Et{constructor(S){super("phone",S),this.phoneNumber=S.phoneInfo}static _fromServerResponse(S,I){return new di(I)}}function Aa(R,S,I){var L;ge((null===(L=I.url)||void 0===L?void 0:L.length)>0,R,"invalid-continue-uri"),ge(typeof I.dynamicLinkDomain>"u"||I.dynamicLinkDomain.length>0,R,"invalid-dynamic-link-domain"),S.continueUrl=I.url,S.dynamicLinkDomain=I.dynamicLinkDomain,S.canHandleCodeInApp=I.handleCodeInApp,I.iOS&&(ge(I.iOS.bundleId.length>0,R,"missing-ios-bundle-id"),S.iOSBundleId=I.iOS.bundleId),I.android&&(ge(I.android.packageName.length>0,R,"missing-android-pkg-name"),S.androidInstallApp=I.android.installApp,S.androidMinimumVersionCode=I.android.minimumVersion,S.androidPackageName=I.android.packageName)}function Cc(R,S,I){return nr.apply(this,arguments)}function nr(){return(nr=(0,a.Z)(function*(R,S,I){const L=(0,V.m9)(R),Y={requestType:"PASSWORD_RESET",email:S};I&&Aa(L,Y,I),yield co(L,Y)})).apply(this,arguments)}function up(R,S,I){return jl.apply(this,arguments)}function jl(){return(jl=(0,a.Z)(function*(R,S,I){yield Ir((0,V.m9)(R),{oobCode:S,newPassword:I})})).apply(this,arguments)}function ps(R,S){return il.apply(this,arguments)}function il(){return(il=(0,a.Z)(function*(R,S){yield gc((0,V.m9)(R),{oobCode:S})})).apply(this,arguments)}function Tc(R,S){return vr.apply(this,arguments)}function vr(){return(vr=(0,a.Z)(function*(R,S){const I=(0,V.m9)(R),L=yield Ir(I,{oobCode:S}),Y=L.requestType;switch(ge(Y,I,"internal-error"),Y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ge(L.newEmail,I,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ge(L.mfaInfo,I,"internal-error");default:ge(L.email,I,"internal-error")}let se=null;return L.mfaInfo&&(se=Et._fromServerResponse(On(I),L.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===L.requestType?L.newEmail:L.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===L.requestType?L.email:L.newEmail)||null,multiFactorInfo:se},operation:Y}})).apply(this,arguments)}function lv(R,S){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,a.Z)(function*(R,S){const{data:I}=yield Tc((0,V.m9)(R),S);return I.email})).apply(this,arguments)}function yu(R,S,I){return Do.apply(this,arguments)}function Do(){return(Do=(0,a.Z)(function*(R,S,I){const L=On(R),Y=yield yc(L,{returnSecureToken:!0,email:S,password:I}),se=yield xo._fromIdTokenResponse(L,"signIn",Y);return yield L._updateCurrentUser(se.user),se})).apply(this,arguments)}function ka(R,S,I){return Bl((0,V.m9)(R),ds.credential(S,I))}function dp(R,S,I){return rl.apply(this,arguments)}function rl(){return(rl=(0,a.Z)(function*(R,S,I){const L=(0,V.m9)(R),Y={requestType:"EMAIL_SIGNIN",email:S};ge(I.handleCodeInApp,L,"argument-error"),I&&Aa(L,Y,I),yield gu(L,Y)})).apply(this,arguments)}function Oa(R,S){return"EMAIL_SIGNIN"===rp.parseLink(S)?.operation}function hp(R,S,I){return vu.apply(this,arguments)}function vu(){return(vu=(0,a.Z)(function*(R,S,I){const L=(0,V.m9)(R),Y=ds.credentialWithLink(S,I||mt());return ge(Y._tenantId===(L.tenantId||null),L,"tenant-id-mismatch"),Bl(L,Y)})).apply(this,arguments)}function ol(R,S){return pp.apply(this,arguments)}function pp(){return(pp=(0,a.Z)(function*(R,S){return ut(R,"POST","/v1/accounts:createAuthUri",Jt(R,S))})).apply(this,arguments)}function fp(R,S){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,a.Z)(function*(R,S){const L={identifier:S,continueUri:lt()?mt():"http://localhost"},{signinMethods:Y}=yield ol((0,V.m9)(R),L);return Y||[]})).apply(this,arguments)}function bu(R,S){return wu.apply(this,arguments)}function wu(){return(wu=(0,a.Z)(function*(R,S){const I=(0,V.m9)(R),Y={requestType:"VERIFY_EMAIL",idToken:yield R.getIdToken()};S&&Aa(I.auth,Y,S);const{email:se}=yield Bi(I.auth,Y);se!==R.email&&(yield R.reload())})).apply(this,arguments)}function Ld(R,S,I){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,a.Z)(function*(R,S,I){const L=(0,V.m9)(R),se={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield R.getIdToken(),newEmail:S};I&&Aa(L.auth,se,I);const{email:Ie}=yield zs(L.auth,se);Ie!==R.email&&(yield R.reload())})).apply(this,arguments)}function og(R,S){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,a.Z)(function*(R,S){return ut(R,"POST","/v1/accounts:update",S)})).apply(this,arguments)}function Vd(R,S){return gp.apply(this,arguments)}function gp(){return(gp=(0,a.Z)(function*(R,{displayName:S,photoURL:I}){if(void 0===S&&void 0===I)return;const L=(0,V.m9)(R),se={idToken:yield L.getIdToken(),displayName:S,photoUrl:I,returnSecureToken:!0},Ie=yield Yn(L,og(L.auth,se));L.displayName=Ie.displayName||null,L.photoURL=Ie.photoUrl||null;const vt=L.providerData.find(({providerId:hn})=>"password"===hn);vt&&(vt.displayName=L.displayName,vt.photoURL=L.photoURL),yield L._updateTokensIfNecessary(Ie)})).apply(this,arguments)}function mp(R,S){return _p((0,V.m9)(R),S,null)}function xc(R,S){return _p((0,V.m9)(R),null,S)}function _p(R,S,I){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,a.Z)(function*(R,S,I){const{auth:L}=R,se={idToken:yield R.getIdToken(),returnSecureToken:!0};S&&(se.email=S),I&&(se.password=I);const Ie=yield Yn(R,ai(L,se));yield R._updateTokensIfNecessary(Ie,!0)})).apply(this,arguments)}class Io{constructor(S,I,L={}){this.isNewUser=S,this.providerId=I,this.profile=L}}class fr extends Io{constructor(S,I,L,Y){super(S,I,L),this.username=Y}}class Bd extends Io{constructor(S,I){super(S,"facebook.com",I)}}class cv extends fr{constructor(S,I){super(S,"github.com",I,"string"==typeof I?.login?I?.login:null)}}class sg extends Io{constructor(S,I){super(S,"google.com",I)}}class sl extends fr{constructor(S,I,L){super(S,"twitter.com",I,L)}}function Ym(R){const{user:S,_tokenResponse:I}=R;return S.isAnonymous&&!I?{providerId:null,isNewUser:!1,profile:null}:function ho(R){var S,I;if(!R)return null;const{providerId:L}=R,Y=R.rawUserInfo?JSON.parse(R.rawUserInfo):{},se=R.isNewUser||"identitytoolkit#SignupNewUserResponse"===R.kind;if(!L&&R?.idToken){const Ie=null===(I=null===(S=Ht(R.idToken))||void 0===S?void 0:S.firebase)||void 0===I?void 0:I.sign_in_provider;if(Ie)return new Io(se,"anonymous"!==Ie&&"custom"!==Ie?Ie:null)}if(!L)return null;switch(L){case"facebook.com":return new Bd(se,Y);case"github.com":return new cv(se,Y);case"google.com":return new sg(se,Y);case"twitter.com":return new sl(se,Y,R.screenName||null);case"custom":case"anonymous":return new Io(se,null);default:return new Io(se,L,Y)}}(I)}function yp(R,S,I,L){return(0,V.m9)(R).onIdTokenChanged(S,I,L)}function zl(R,S,I,L){return(0,V.m9)(R).onAuthStateChanged(S,I,L)}class Sc{constructor(S,I){this.type=S,this.credential=I}static _fromIdtoken(S){return new Sc("enroll",S)}static _fromMfaPendingCredential(S){return new Sc("signin",S)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(S){var I,L;if(S?.multiFactorSession){if(null!==(I=S.multiFactorSession)&&void 0!==I&&I.pendingCredential)return Sc._fromMfaPendingCredential(S.multiFactorSession.pendingCredential);if(null!==(L=S.multiFactorSession)&&void 0!==L&&L.idToken)return Sc._fromIdtoken(S.multiFactorSession.idToken)}return null}}class Ud{constructor(S,I,L){this.session=S,this.hints=I,this.signInResolver=L}static _fromError(S,I){const L=On(S),Y=I.customData._serverResponse,se=(Y.mfaInfo||[]).map(vt=>Et._fromServerResponse(L,vt));ge(Y.mfaPendingCredential,L,"internal-error");const Ie=Sc._fromMfaPendingCredential(Y.mfaPendingCredential);return new Ud(Ie,se,function(){var vt=(0,a.Z)(function*(hn){const bn=yield hn._process(L,Ie);delete Y.mfaInfo,delete Y.mfaPendingCredential;const Zn=Object.assign(Object.assign({},Y),{idToken:bn.idToken,refreshToken:bn.refreshToken});switch(I.operationType){case"signIn":const zi=yield xo._fromIdTokenResponse(L,I.operationType,Zn);return yield L._updateCurrentUser(zi.user),zi;case"reauthenticate":return ge(I.user,L,"internal-error"),xo._forOperation(I.user,I.operationType,Zn);default:gt(L,"internal-error")}});return function(hn){return vt.apply(this,arguments)}}())}resolveSignIn(S){var I=this;return(0,a.Z)(function*(){return I.signInResolver(S)})()}}function jd(R,S){var I;const L=(0,V.m9)(R),Y=S;return ge(S.customData.operationType,L,"argument-error"),ge(null===(I=Y.customData._serverResponse)||void 0===I?void 0:I.mfaPendingCredential,L,"argument-error"),Ud._fromError(L,Y)}function vp(R,S){return ut(R,"POST","/v2/accounts/mfaEnrollment:start",Jt(R,S))}class zd{constructor(S){this.user=S,this.enrolledFactors=[],S._onReload(I=>{I.mfaInfo&&(this.enrolledFactors=I.mfaInfo.map(L=>Et._fromServerResponse(S.auth,L)))})}static _fromUser(S){return new zd(S)}getSession(){var S=this;return(0,a.Z)(function*(){return Sc._fromIdtoken(yield S.user.getIdToken())})()}enroll(S,I){var L=this;return(0,a.Z)(function*(){const Y=S,se=yield L.getSession(),Ie=yield Yn(L.user,Y._process(L.user.auth,se,I));return yield L.user._updateTokensIfNecessary(Ie),L.user.reload()})()}unenroll(S){var I=this;return(0,a.Z)(function*(){var L;const Y="string"==typeof S?S:S.uid,se=yield I.user.getIdToken(),Ie=yield Yn(I.user,function hv(R,S){return ut(R,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(R,S))}(I.user.auth,{idToken:se,mfaEnrollmentId:Y}));I.enrolledFactors=I.enrolledFactors.filter(({uid:vt})=>vt!==Y),yield I.user._updateTokensIfNecessary(Ie);try{yield I.user.reload()}catch(vt){if("auth/user-token-expired"!==(null===(L=vt)||void 0===L?void 0:L.code))throw vt}})()}}const Xm=new WeakMap;function e_(R){const S=(0,V.m9)(R);return Xm.has(S)||Xm.set(S,zd._fromUser(S)),Xm.get(S)}const bp="__sak";class gs{constructor(S,I){this.storageRetriever=S,this.type=I}_isAvailable(){try{return this.storage?(this.storage.setItem(bp,"1"),this.storage.removeItem(bp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(S,I){return this.storage.setItem(S,JSON.stringify(I)),Promise.resolve()}_get(S){const I=this.storage.getItem(S);return Promise.resolve(I?JSON.parse(I):null)}_remove(S){return this.storage.removeItem(S),Promise.resolve()}get storage(){return this.storageRetriever()}}const Qt=(()=>{class R extends gs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(I,L)=>this.onStorageEvent(I,L),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function nt(){const R=(0,V.z$)();return ue(R)||dn(R)}()&&function Te(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Si(),this._shouldAllowMigration=!0}forAllChangedKeys(I){for(const L of Object.keys(this.listeners)){const Y=this.storage.getItem(L),se=this.localCache[L];Y!==se&&I(L,se,Y)}}onStorageEvent(I,L=!1){if(!I.key)return void this.forAllChangedKeys((vt,hn,bn)=>{this.notifyListeners(vt,bn)});const Y=I.key;if(L?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const vt=this.storage.getItem(Y);if(I.newValue!==vt)null!==I.newValue?this.storage.setItem(Y,I.newValue):this.storage.removeItem(Y);else if(this.localCache[Y]===I.newValue&&!L)return}const se=()=>{const vt=this.storage.getItem(Y);!L&&this.localCache[Y]===vt||this.notifyListeners(Y,vt)},Ie=this.storage.getItem(Y);!function En(){return(0,V.w1)()&&10===document.documentMode}()||Ie===I.newValue||I.newValue===I.oldValue?se():setTimeout(se,10)}notifyListeners(I,L){this.localCache[I]=L;const Y=this.listeners[I];if(Y)for(const se of Array.from(Y))se(L&&JSON.parse(L))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((I,L,Y)=>{this.onStorageEvent(new StorageEvent("storage",{key:I,oldValue:L,newValue:Y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(I,L){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[I]||(this.listeners[I]=new Set,this.localCache[I]=this.storage.getItem(I)),this.listeners[I].add(L)}_removeListener(I,L){this.listeners[I]&&(this.listeners[I].delete(L),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(I,L){var Y=()=>super._set,se=this;return(0,a.Z)(function*(){yield Y().call(se,I,L),se.localCache[I]=JSON.stringify(L)})()}_get(I){var L=()=>super._get,Y=this;return(0,a.Z)(function*(){const se=yield L().call(Y,I);return Y.localCache[I]=JSON.stringify(se),se})()}_remove(I){var L=()=>super._remove,Y=this;return(0,a.Z)(function*(){yield L().call(Y,I),delete Y.localCache[I]})()}}return R.type="LOCAL",R})(),ll=(()=>{class R extends gs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(I,L){}_removeListener(I,L){}}return R.type="SESSION",R})();let Fn=(()=>{class R{constructor(I){this.eventTarget=I,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(I){const L=this.receivers.find(se=>se.isListeningto(I));if(L)return L;const Y=new R(I);return this.receivers.push(Y),Y}isListeningto(I){return this.eventTarget===I}handleEvent(I){var L=this;return(0,a.Z)(function*(){const Y=I,{eventId:se,eventType:Ie,data:vt}=Y.data,hn=L.handlersMap[Ie];if(!hn?.size)return;Y.ports[0].postMessage({status:"ack",eventId:se,eventType:Ie});const bn=Array.from(hn).map(function(){var zi=(0,a.Z)(function*(jo){return jo(Y.origin,vt)});return function(jo){return zi.apply(this,arguments)}}()),Zn=yield function Dc(R){return Promise.all(R.map(function(){var S=(0,a.Z)(function*(I){try{return{fulfilled:!0,value:yield I}}catch(L){return{fulfilled:!1,reason:L}}});return function(I){return S.apply(this,arguments)}}()))}(bn);Y.ports[0].postMessage({status:"done",eventId:se,eventType:Ie,response:Zn})})()}_subscribe(I,L){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[I]||(this.handlersMap[I]=new Set),this.handlersMap[I].add(L)}_unsubscribe(I,L){this.handlersMap[I]&&L&&this.handlersMap[I].delete(L),(!L||0===this.handlersMap[I].size)&&delete this.handlersMap[I],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return R.receivers=[],R})();function Ft(R="",S=10){let I="";for(let L=0;L<S;L++)I+=Math.floor(10*Math.random());return R+I}class It{constructor(S){this.target=S,this.handlers=new Set}removeMessageHandler(S){S.messageChannel&&(S.messageChannel.port1.removeEventListener("message",S.onMessage),S.messageChannel.port1.close()),this.handlers.delete(S)}_send(S,I,L=50){var Y=this;return(0,a.Z)(function*(){const se=typeof MessageChannel<"u"?new MessageChannel:null;if(!se)throw new Error("connection_unavailable");let Ie,vt;return new Promise((hn,bn)=>{const Zn=Ft("",20);se.port1.start();const zi=setTimeout(()=>{bn(new Error("unsupported_event"))},L);vt={messageChannel:se,onMessage(jo){const gl=jo;if(gl.data.eventId===Zn)switch(gl.data.status){case"ack":clearTimeout(zi),Ie=setTimeout(()=>{bn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ie),hn(gl.data.response);break;default:clearTimeout(zi),clearTimeout(Ie),bn(new Error("invalid_response"))}}},Y.handlers.add(vt),se.port1.addEventListener("message",vt.onMessage),Y.target.postMessage({eventType:S,eventId:Zn,data:I},[se.port2])}).finally(()=>{vt&&Y.removeMessageHandler(vt)})})()}}function Br(){return window}function hi(){return typeof Br().WorkerGlobalScope<"u"&&"function"==typeof Br().importScripts}function Ic(){return(Ic=(0,a.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Mo="firebaseLocalStorageDb",Gd="firebaseLocalStorage",wp="fbase_key";class _i{constructor(S){this.request=S}toPromise(){return new Promise((S,I)=>{this.request.addEventListener("success",()=>{S(this.request.result)}),this.request.addEventListener("error",()=>{I(this.request.error)})})}}function Ws(R,S){return R.transaction([Gd],S?"readwrite":"readonly").objectStore(Gd)}function Ra(){const R=indexedDB.open(Mo,1);return new Promise((S,I)=>{R.addEventListener("error",()=>{I(R.error)}),R.addEventListener("upgradeneeded",()=>{const L=R.result;try{L.createObjectStore(Gd,{keyPath:wp})}catch(Y){I(Y)}}),R.addEventListener("success",(0,a.Z)(function*(){const L=R.result;L.objectStoreNames.contains(Gd)?S(L):(L.close(),yield function Ks(){const R=indexedDB.deleteDatabase(Mo);return new _i(R).toPromise()}(),S(yield Ra()))}))})}function Xr(R,S,I){return Cp.apply(this,arguments)}function Cp(){return(Cp=(0,a.Z)(function*(R,S,I){const L=Ws(R,!0).put({[wp]:S,value:I});return new _i(L).toPromise()})).apply(this,arguments)}function Ci(){return(Ci=(0,a.Z)(function*(R,S){const I=Ws(R,!1).get(S),L=yield new _i(I).toPromise();return void 0===L?null:L.value})).apply(this,arguments)}function ar(R,S){const I=Ws(R,!0).delete(S);return new _i(I).toPromise()}const Ur=(()=>{class R{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var I=this;return(0,a.Z)(function*(){return I.db||(I.db=yield Ra()),I.db})()}_withRetries(I){var L=this;return(0,a.Z)(function*(){let Y=0;for(;;)try{const se=yield L._openDb();return yield I(se)}catch(se){if(Y++>3)throw se;L.db&&(L.db.close(),L.db=void 0)}})()}initializeServiceWorkerMessaging(){var I=this;return(0,a.Z)(function*(){return hi()?I.initializeReceiver():I.initializeSender()})()}initializeReceiver(){var I=this;return(0,a.Z)(function*(){I.receiver=Fn._getInstance(function zn(){return hi()?self:null}()),I.receiver._subscribe("keyChanged",function(){var L=(0,a.Z)(function*(Y,se){return{keyProcessed:(yield I._poll()).includes(se.key)}});return function(Y,se){return L.apply(this,arguments)}}()),I.receiver._subscribe("ping",function(){var L=(0,a.Z)(function*(Y,se){return["keyChanged"]});return function(Y,se){return L.apply(this,arguments)}}())})()}initializeSender(){var I=this;return(0,a.Z)(function*(){var L,Y;if(I.activeServiceWorker=yield function sr(){return Ic.apply(this,arguments)}(),!I.activeServiceWorker)return;I.sender=new It(I.activeServiceWorker);const se=yield I.sender._send("ping",{},800);!se||(null===(L=se[0])||void 0===L?void 0:L.fulfilled)&&(null===(Y=se[0])||void 0===Y?void 0:Y.value.includes("keyChanged"))&&(I.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(I){var L=this;return(0,a.Z)(function*(){if(L.sender&&L.activeServiceWorker&&function Li(){var R;return(null===(R=navigator?.serviceWorker)||void 0===R?void 0:R.controller)||null}()===L.activeServiceWorker)try{yield L.sender._send("keyChanged",{key:I},L.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const I=yield Ra();return yield Xr(I,bp,"1"),yield ar(I,bp),!0}catch{}return!1})()}_withPendingWrite(I){var L=this;return(0,a.Z)(function*(){L.pendingWrites++;try{yield I()}finally{L.pendingWrites--}})()}_set(I,L){var Y=this;return(0,a.Z)(function*(){return Y._withPendingWrite((0,a.Z)(function*(){return yield Y._withRetries(se=>Xr(se,I,L)),Y.localCache[I]=L,Y.notifyServiceWorker(I)}))})()}_get(I){var L=this;return(0,a.Z)(function*(){const Y=yield L._withRetries(se=>function Pa(R,S){return Ci.apply(this,arguments)}(se,I));return L.localCache[I]=Y,Y})()}_remove(I){var L=this;return(0,a.Z)(function*(){return L._withPendingWrite((0,a.Z)(function*(){return yield L._withRetries(Y=>ar(Y,I)),delete L.localCache[I],L.notifyServiceWorker(I)}))})()}_poll(){var I=this;return(0,a.Z)(function*(){const L=yield I._withRetries(Ie=>{const vt=Ws(Ie,!1).getAll();return new _i(vt).toPromise()});if(!L)return[];if(0!==I.pendingWrites)return[];const Y=[],se=new Set;for(const{fbase_key:Ie,value:vt}of L)se.add(Ie),JSON.stringify(I.localCache[Ie])!==JSON.stringify(vt)&&(I.notifyListeners(Ie,vt),Y.push(Ie));for(const Ie of Object.keys(I.localCache))I.localCache[Ie]&&!se.has(Ie)&&(I.notifyListeners(Ie,null),Y.push(Ie));return Y})()}notifyListeners(I,L){this.localCache[I]=L;const Y=this.listeners[I];if(Y)for(const se of Array.from(Y))se(L)}startPolling(){var I=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return I._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(I,L){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[I]||(this.listeners[I]=new Set,this._get(I)),this.listeners[I].add(L)}_removeListener(I,L){this.listeners[I]&&(this.listeners[I].delete(L),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return R.type="LOCAL",R})();function ms(R,S){return ut(R,"POST","/v2/accounts/mfaSignIn:start",Jt(R,S))}function Ho(){return(Ho=(0,a.Z)(function*(R){return(yield ut(R,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Mc(R){return new Promise((S,I)=>{const L=document.createElement("script");L.setAttribute("src",R),L.onload=S,L.onerror=Y=>{const se=Ke("internal-error");se.customData=Y,I(se)},L.type="text/javascript",L.charset="UTF-8",function Qo(){var R,S;return null!==(S=null===(R=document.getElementsByTagName("head"))||void 0===R?void 0:R[0])&&void 0!==S?S:document}().appendChild(L)})}function cl(R){return`__${R}${Math.floor(1e6*Math.random())}`}const qd=1e12;class ji{constructor(S){this.auth=S,this.counter=qd,this._widgets=new Map}render(S,I){const L=this.counter;return this._widgets.set(L,new pv(S,this.auth.name,I||{})),this.counter++,L}reset(S){var I;const L=S||qd;null===(I=this._widgets.get(L))||void 0===I||I.delete(),this._widgets.delete(L)}getResponse(S){var I;return(null===(I=this._widgets.get(S||qd))||void 0===I?void 0:I.getResponse())||""}execute(S){var I=this;return(0,a.Z)(function*(){var L;return null===(L=I._widgets.get(S||qd))||void 0===L||L.execute(),""})()}}class pv{constructor(S,I,L){this.params=L,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Y="string"==typeof S?document.getElementById(S):S;ge(Y,"argument-error",{appName:I}),this.container=Y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function i_(R){const S=[],I="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let L=0;L<R;L++)S.push(I.charAt(Math.floor(Math.random()*I.length)));return S.join("")}(50);const{callback:S,"expired-callback":I}=this.params;if(S)try{S(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,I)try{I()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const r_=cl("rcb"),V0=new Ct(3e4,6e4);class rt{constructor(){var S;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(S=Br().grecaptcha)||void 0===S||!S.render)}load(S,I=""){return ge(function oi(R){return R.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(R)}(I),S,"argument-error"),this.shouldResolveImmediately(I)?Promise.resolve(Br().grecaptcha):new Promise((L,Y)=>{const se=Br().setTimeout(()=>{Y(Ke(S,"network-request-failed"))},V0.get());Br()[r_]=()=>{Br().clearTimeout(se),delete Br()[r_];const vt=Br().grecaptcha;if(!vt)return void Y(Ke(S,"internal-error"));const hn=vt.render;vt.render=(bn,Zn)=>{const zi=hn(bn,Zn);return this.counter++,zi},this.hostLanguage=I,L(vt)},Mc(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:r_,render:"explicit",hl:I})}`).catch(()=>{clearTimeout(se),Y(Ke(S,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(S){var I;return!(null===(I=Br().grecaptcha)||void 0===I||!I.render)&&(S===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class po{load(S){return(0,a.Z)(function*(){return new ji(S)})()}clearedOneInstance(){}}const re="recaptcha",Ys={theme:"light",type:"image"};class kr{constructor(S,I=Object.assign({},Ys),L){this.parameters=I,this.type=re,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=On(L),this.isInvisible="invisible"===this.parameters.size,ge(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const Y="string"==typeof S?document.getElementById(S):S;ge(Y,this.auth,"argument-error"),this.container=Y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new po:new rt,this.validateStartingState()}verify(){var S=this;return(0,a.Z)(function*(){S.assertNotDestroyed();const I=yield S.render(),L=S.getAssertedRecaptcha();return L.getResponse(I)||new Promise(se=>{const Ie=vt=>{!vt||(S.tokenChangeListeners.delete(Ie),se(vt))};S.tokenChangeListeners.add(Ie),S.isInvisible&&L.execute(I)})})()}render(){try{this.assertNotDestroyed()}catch(S){return Promise.reject(S)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(S=>{throw this.renderPromise=null,S})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(S=>{this.container.removeChild(S)})}validateStartingState(){ge(!this.parameters.sitekey,this.auth,"argument-error"),ge(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ge(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(S){return I=>{if(this.tokenChangeListeners.forEach(L=>L(I)),"function"==typeof S)S(I);else if("string"==typeof S){const L=Br()[S];"function"==typeof L&&L(I)}}}assertNotDestroyed(){ge(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var S=this;return(0,a.Z)(function*(){if(yield S.init(),!S.widgetId){let I=S.container;if(!S.isInvisible){const L=document.createElement("div");I.appendChild(L),I=L}S.widgetId=S.getAssertedRecaptcha().render(I,S.parameters)}return S.widgetId})()}init(){var S=this;return(0,a.Z)(function*(){ge(lt()&&!hi(),S.auth,"internal-error"),yield function kc(){let R=null;return new Promise(S=>{"complete"!==document.readyState?(R=()=>S(),window.addEventListener("load",R)):S()}).catch(S=>{throw R&&window.removeEventListener("load",R),S})}(),S.recaptcha=yield S._recaptchaLoader.load(S.auth,S.auth.languageCode||void 0);const I=yield function Mn(R){return Ho.apply(this,arguments)}(S.auth);ge(I,S.auth,"internal-error"),S.parameters.sitekey=I})()}getAssertedRecaptcha(){return ge(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Na{constructor(S,I){this.verificationId=S,this.onConfirmation=I}confirm(S){const I=Gs._fromVerification(this.verificationId,S);return this.onConfirmation(I)}}function jr(R,S,I){return ir.apply(this,arguments)}function ir(){return(ir=(0,a.Z)(function*(R,S,I){const L=On(R),Y=yield Gl(L,S,(0,V.m9)(I));return new Na(Y,se=>Bl(L,se))})).apply(this,arguments)}function Bo(R,S,I){return ks.apply(this,arguments)}function ks(){return(ks=(0,a.Z)(function*(R,S,I){const L=(0,V.m9)(R);yield So(!1,L,"phone");const Y=yield Gl(L.auth,S,(0,V.m9)(I));return new Na(Y,se=>ap(L,se))})).apply(this,arguments)}function s_(R,S,I){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,a.Z)(function*(R,S,I){const L=(0,V.m9)(R),Y=yield Gl(L.auth,S,(0,V.m9)(I));return new Na(Y,se=>lp(L,se))})).apply(this,arguments)}function Gl(R,S,I){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,a.Z)(function*(R,S,I){var L;const Y=yield I.verify();try{let se;if(ge("string"==typeof Y,R,"argument-error"),ge(I.type===re,R,"argument-error"),se="string"==typeof S?{phoneNumber:S}:S,"session"in se){const Ie=se.session;if("phoneNumber"in se)return ge("enroll"===Ie.type,R,"internal-error"),(yield vp(R,{idToken:Ie.credential,phoneEnrollmentInfo:{phoneNumber:se.phoneNumber,recaptchaToken:Y}})).phoneSessionInfo.sessionInfo;{ge("signin"===Ie.type,R,"internal-error");const vt=(null===(L=se.multiFactorHint)||void 0===L?void 0:L.uid)||se.multiFactorUid;return ge(vt,R,"missing-multi-factor-info"),(yield ms(R,{mfaPendingCredential:Ie.credential,mfaEnrollmentId:vt,phoneSignInInfo:{recaptchaToken:Y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ie}=yield Xf(R,{phoneNumber:se.phoneNumber,recaptchaToken:Y});return Ie}}finally{I._reset()}})).apply(this,arguments)}function fv(R,S){return cg.apply(this,arguments)}function cg(){return(cg=(0,a.Z)(function*(R,S){yield Vl((0,V.m9)(R),S)})).apply(this,arguments)}let Tp=(()=>{class R{constructor(I){this.providerId=R.PROVIDER_ID,this.auth=On(I)}verifyPhoneNumber(I,L){return Gl(this.auth,I,(0,V.m9)(L))}static credential(I,L){return Gs._fromVerification(I,L)}static credentialFromResult(I){return R.credentialFromTaggedObject(I)}static credentialFromError(I){return R.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{phoneNumber:L,temporaryProof:Y}=I;return L&&Y?Gs._fromTokenResponse(L,Y):null}}return R.PROVIDER_ID="phone",R.PHONE_SIGN_IN_METHOD="phone",R})();function ul(R,S){return S?Ce(S):(ge(R._popupRedirectResolver,R,"argument-error"),R._popupRedirectResolver)}class gr extends An{constructor(S){super("custom","custom"),this.params=S}_getIdTokenResponse(S){return ha(S,this._buildIdpRequest())}_linkToIdToken(S,I){return ha(S,this._buildIdpRequest(I))}_getReauthenticationResolver(S){return ha(S,this._buildIdpRequest())}_buildIdpRequest(S){const I={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return S&&(I.idToken=S),I}}function Uo(R){return $s(R.auth,new gr(R),R.bypassAuthState)}function $d(R){const{auth:S,user:I}=R;return ge(I,S,"internal-error"),nl(I,new gr(R),R.bypassAuthState)}function dl(R){return Os.apply(this,arguments)}function Os(){return(Os=(0,a.Z)(function*(R){const{auth:S,user:I}=R;return ge(I,S,"internal-error"),Vl(I,new gr(R),R.bypassAuthState)})).apply(this,arguments)}class Su{constructor(S,I,L,Y,se=!1){this.auth=S,this.resolver=L,this.user=Y,this.bypassAuthState=se,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(I)?I:[I]}execute(){var S=this;return new Promise(function(){var I=(0,a.Z)(function*(L,Y){S.pendingPromise={resolve:L,reject:Y};try{S.eventManager=yield S.resolver._initialize(S.auth),yield S.onExecution(),S.eventManager.registerConsumer(S)}catch(se){S.reject(se)}});return function(L,Y){return I.apply(this,arguments)}}())}onAuthEvent(S){var I=this;return(0,a.Z)(function*(){const{urlResponse:L,sessionId:Y,postBody:se,tenantId:Ie,error:vt,type:hn}=S;if(vt)return void I.reject(vt);const bn={auth:I.auth,requestUri:L,sessionId:Y,tenantId:Ie||void 0,postBody:se||void 0,user:I.user,bypassAuthState:I.bypassAuthState};try{I.resolve(yield I.getIdpTask(hn)(bn))}catch(Zn){I.reject(Zn)}})()}onError(S){this.reject(S)}getIdpTask(S){switch(S){case"signInViaPopup":case"signInViaRedirect":return Uo;case"linkViaPopup":case"linkViaRedirect":return dl;case"reauthViaPopup":case"reauthViaRedirect":return $d;default:gt(this.auth,"internal-error")}}resolve(S){ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(S),this.unregisterAndCleanUp()}reject(S){ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(S),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ql=new Ct(2e3,1e4);function Ep(R,S,I){return Du.apply(this,arguments)}function Du(){return(Du=(0,a.Z)(function*(R,S,I){const L=On(R);$e(R,S,qs);const Y=ul(L,I);return new fo(L,"signInViaPopup",S,Y).executeNotNull()})).apply(this,arguments)}function ug(R,S,I){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,a.Z)(function*(R,S,I){const L=(0,V.m9)(R);$e(L.auth,S,qs);const Y=ul(L.auth,I);return new fo(L.auth,"reauthViaPopup",S,Y,L).executeNotNull()})).apply(this,arguments)}function dg(R,S,I){return _s.apply(this,arguments)}function _s(){return(_s=(0,a.Z)(function*(R,S,I){const L=(0,V.m9)(R);$e(L.auth,S,qs);const Y=ul(L.auth,I);return new fo(L.auth,"linkViaPopup",S,Y,L).executeNotNull()})).apply(this,arguments)}let fo=(()=>{class R extends Su{constructor(I,L,Y,se,Ie){super(I,L,se,Ie),this.provider=Y,this.authWindow=null,this.pollId=null,R.currentPopupAction&&R.currentPopupAction.cancel(),R.currentPopupAction=this}executeNotNull(){var I=this;return(0,a.Z)(function*(){const L=yield I.execute();return ge(L,I.auth,"internal-error"),L})()}onExecution(){var I=this;return(0,a.Z)(function*(){ke(1===I.filter.length,"Popup operations only handle one event");const L=Ft();I.authWindow=yield I.resolver._openPopup(I.auth,I.provider,I.filter[0],L),I.authWindow.associatedEvent=L,I.resolver._originValidation(I.auth).catch(Y=>{I.reject(Y)}),I.resolver._isIframeWebStorageSupported(I.auth,Y=>{Y||I.reject(Ke(I.auth,"web-storage-unsupported"))}),I.pollUserCancellation()})()}get eventId(){var I;return(null===(I=this.authWindow)||void 0===I?void 0:I.associatedEvent)||null}cancel(){this.reject(Ke(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,R.currentPopupAction=null}pollUserCancellation(){const I=()=>{var L,Y;this.pollId=null!==(Y=null===(L=this.authWindow)||void 0===L?void 0:L.window)&&void 0!==Y&&Y.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ke(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(I,ql.get())};I()}}return R.currentPopupAction=null,R})();const ys=new Map;class Sp extends Su{constructor(S,I,L=!1){super(S,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],I,void 0,L),this.eventId=null}execute(){var S=()=>super.execute,I=this;return(0,a.Z)(function*(){let L=ys.get(I.auth._key());if(!L){try{const se=(yield function Iu(R,S){return Rc.apply(this,arguments)}(I.resolver,I.auth))?yield S().call(I):null;L=()=>Promise.resolve(se)}catch(Y){L=()=>Promise.reject(Y)}ys.set(I.auth._key(),L)}return I.bypassAuthState||ys.set(I.auth._key(),()=>Promise.resolve(null)),L()})()}onAuthEvent(S){var I=()=>super.onAuthEvent,L=this;return(0,a.Z)(function*(){if("signInViaRedirect"===S.type)return I().call(L,S);if("unknown"!==S.type){if(S.eventId){const Y=yield L.auth._redirectUserForId(S.eventId);if(Y)return L.user=Y,I().call(L,S);L.resolve(null)}}else L.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function Rc(){return(Rc=(0,a.Z)(function*(R,S){const I=Mu(S),L=Fa(R);if(!(yield L._isAvailable()))return!1;const Y="true"===(yield L._get(I));return yield L._remove(I),Y})).apply(this,arguments)}function Dp(R,S){return Ip.apply(this,arguments)}function Ip(){return(Ip=(0,a.Z)(function*(R,S){return Fa(R)._set(Mu(S),"true")})).apply(this,arguments)}function Kd(){ys.clear()}function Zl(R,S){ys.set(R._key(),S)}function Fa(R){return Ce(R._redirectPersistence)}function Mu(R){return Hn("pendingRedirect",R.config.apiKey,R.name)}function lr(R,S,I){return function a_(R,S,I){return Pc.apply(this,arguments)}(R,S,I)}function Pc(){return(Pc=(0,a.Z)(function*(R,S,I){const L=On(R);$e(R,S,qs);const Y=ul(L,I);return yield Dp(Y,L),Y._openRedirect(L,S,"signInViaRedirect")})).apply(this,arguments)}function hl(R,S,I){return function ga(R,S,I){return Au.apply(this,arguments)}(R,S,I)}function Au(){return(Au=(0,a.Z)(function*(R,S,I){const L=(0,V.m9)(R);$e(L.auth,S,qs);const Y=ul(L.auth,I);yield Dp(Y,L.auth);const se=yield zr(L);return Y._openRedirect(L.auth,S,"reauthViaRedirect",se)})).apply(this,arguments)}function $l(R,S,I){return function hg(R,S,I){return Js.apply(this,arguments)}(R,S,I)}function Js(){return(Js=(0,a.Z)(function*(R,S,I){const L=(0,V.m9)(R);$e(L.auth,S,qs);const Y=ul(L.auth,I);yield So(!1,L,S.providerId),yield Dp(Y,L.auth);const se=yield zr(L);return Y._openRedirect(L.auth,S,"linkViaRedirect",se)})).apply(this,arguments)}function ku(R,S){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,a.Z)(function*(R,S){return yield On(R)._initializationPromise,ma(R,S,!1)})).apply(this,arguments)}function ma(R,S){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,a.Z)(function*(R,S,I=!1){const L=On(R),Y=ul(L,S),Ie=yield new Sp(L,Y,I).execute();return Ie&&!I&&(delete Ie.user._redirectEventId,yield L._persistUserIfCurrent(Ie.user),yield L._setRedirectUser(null,S)),Ie})).apply(this,arguments)}function zr(R){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,a.Z)(function*(R){const S=Ft(`${R.uid}:::`);return R._redirectEventId=S,yield R.auth._setRedirectUser(R),yield R.auth._persistUserIfCurrent(R),S})).apply(this,arguments)}class Mp{constructor(S){this.auth=S,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(S){this.consumers.add(S),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,S)&&(this.sendToConsumer(this.queuedRedirectEvent,S),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(S){this.consumers.delete(S)}onEvent(S){if(this.hasEventBeenHandled(S))return!1;let I=!1;return this.consumers.forEach(L=>{this.isEventForConsumer(S,L)&&(I=!0,this.sendToConsumer(S,L),this.saveEventToCache(S))}),this.hasHandledPotentialRedirect||!function La(R){switch(R.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pg(R);default:return!1}}(S)||(this.hasHandledPotentialRedirect=!0,I||(this.queuedRedirectEvent=S,I=!0)),I}sendToConsumer(S,I){var L;if(S.error&&!pg(S)){const Y=(null===(L=S.error.code)||void 0===L?void 0:L.split("auth/")[1])||"internal-error";I.onError(Ke(this.auth,Y))}else I.onAuthEvent(S)}isEventForConsumer(S,I){const L=null===I.eventId||!!S.eventId&&S.eventId===I.eventId;return I.filter.includes(S.type)&&L}hasEventBeenHandled(S){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ap(S))}saveEventToCache(S){this.cachedEventUids.add(Ap(S)),this.lastProcessedEventTime=Date.now()}}function Ap(R){return[R.type,R.eventId,R.sessionId,R.tenantId].filter(S=>S).join("-")}function pg({type:R,error:S}){return"unknown"===R&&"auth/no-auth-event"===S?.code}function Nc(R){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,a.Z)(function*(R,S={}){return ut(R,"GET","/v1/projects",S)})).apply(this,arguments)}const Lc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fg=/^https?/;function gg(){return(gg=(0,a.Z)(function*(R){if(R.config.emulator)return;const{authorizedDomains:S}=yield Nc(R);for(const I of S)try{if(Gr(I))return}catch{}gt(R,"unauthorized-domain")})).apply(this,arguments)}function Gr(R){const S=mt(),{protocol:I,hostname:L}=new URL(S);if(R.startsWith("chrome-extension://")){const Ie=new URL(R);return""===Ie.hostname&&""===L?"chrome-extension:"===I&&R.replace("chrome-extension://","")===S.replace("chrome-extension://",""):"chrome-extension:"===I&&Ie.hostname===L}if(!fg.test(I))return!1;if(Lc.test(R))return L===R;const Y=R.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Y+"|"+Y+")$","i").test(L)}const Ti=new Ct(3e4,6e4);function Ru(){const R=Br().___jsl;if(R?.H)for(const S of Object.keys(R.H))if(R.H[S].r=R.H[S].r||[],R.H[S].L=R.H[S].L||[],R.H[S].r=[...R.H[S].L],R.CP)for(let I=0;I<R.CP.length;I++)R.CP[I]=null}let Wl=null;function mg(R){return Wl=Wl||function Pu(R){return new Promise((S,I)=>{var L,Y,se;function Ie(){Ru(),gapi.load("gapi.iframes",{callback:()=>{S(gapi.iframes.getContext())},ontimeout:()=>{Ru(),I(Ke(R,"network-request-failed"))},timeout:Ti.get()})}if(null!==(Y=null===(L=Br().gapi)||void 0===L?void 0:L.iframes)&&void 0!==Y&&Y.Iframe)S(gapi.iframes.getContext());else{if(null===(se=Br().gapi)||void 0===se||!se.load){const vt=cl("iframefcb");return Br()[vt]=()=>{gapi.load?Ie():I(Ke(R,"network-request-failed"))},Mc(`https://apis.google.com/js/api.js?onload=${vt}`).catch(hn=>I(hn))}Ie()}}).catch(S=>{throw Wl=null,S})}(R),Wl}const kp=new Ct(5e3,15e3),Vc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Or=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _g(R){const S=R.config;ge(S.authDomain,R,"auth-domain-config-required");const I=S.emulator?At(S,"emulator/auth/iframe"):`https://${R.config.authDomain}/__/auth/iframe`,L={apiKey:S.apiKey,appName:R.name,v:W.SDK_VERSION},Y=Or.get(R.config.apiHost);Y&&(L.eid=Y);const se=R._getFrameworks();return se.length&&(L.fw=se.join(",")),`${I}?${(0,V.xO)(L).slice(1)}`}function go(){return go=(0,a.Z)(function*(R){const S=yield mg(R),I=Br().gapi;return ge(I,R,"internal-error"),S.open({where:document.body,url:_g(R),messageHandlersFilter:I.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vc,dontclear:!0},L=>new Promise(function(){var Y=(0,a.Z)(function*(se,Ie){yield L.restyle({setHideOnLeave:!1});const vt=Ke(R,"network-request-failed"),hn=Br().setTimeout(()=>{Ie(vt)},kp.get());function bn(){Br().clearTimeout(hn),se(L)}L.ping(bn).then(bn,()=>{Ie(vt)})});return function(se,Ie){return Y.apply(this,arguments)}}()))}),go.apply(this,arguments)}const Op={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ki{constructor(S){this.window=S,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Xs(R,S,I,L,Y,se){ge(R.config.authDomain,R,"auth-domain-config-required"),ge(R.config.apiKey,R,"invalid-api-key");const Ie={apiKey:R.config.apiKey,appName:R.name,authType:I,redirectUrl:L,v:W.SDK_VERSION,eventId:Y};if(S instanceof qs){S.setDefaultLanguage(R.languageCode),Ie.providerId=S.providerId||"",(0,V.xb)(S.getCustomParameters())||(Ie.customParameters=JSON.stringify(S.getCustomParameters()));for(const[hn,bn]of Object.entries(se||{}))Ie[hn]=bn}if(S instanceof hs){const hn=S.getScopes().filter(bn=>""!==bn);hn.length>0&&(Ie.scopes=hn.join(","))}R.tenantId&&(Ie.tid=R.tenantId);const vt=Ie;for(const hn of Object.keys(vt))void 0===vt[hn]&&delete vt[hn];return`${function vg({config:R}){return R.emulator?At(R,"emulator/auth/handler"):`https://${R.authDomain}/__/auth/handler`}(R)}?${(0,V.xO)(vt).slice(1)}`}const Nu="webStorageSupport",gv=class _a{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ll,this._completeRedirectFn=ma,this._overrideRedirectResult=Zl}_openPopup(S,I,L,Y){var se=this;return(0,a.Z)(function*(){var Ie;ke(null===(Ie=se.eventManagers[S._key()])||void 0===Ie?void 0:Ie.manager,"_initialize() not called before _openPopup()");const vt=Xs(S,I,L,mt(),Y);return function Qd(R,S,I,L=500,Y=600){const se=Math.max((window.screen.availHeight-Y)/2,0).toString(),Ie=Math.max((window.screen.availWidth-L)/2,0).toString();let vt="";const hn=Object.assign(Object.assign({},Op),{width:L.toString(),height:Y.toString(),top:se,left:Ie}),bn=(0,V.z$)().toLowerCase();I&&(vt=De(bn)?"_blank":I),oe(bn)&&(S=S||"http://localhost",hn.scrollbars="yes");const Zn=Object.entries(hn).reduce((jo,[gl,Lu])=>`${jo}${gl}=${Lu},`,"");if(function Fi(R=(0,V.z$)()){var S;return dn(R)&&!(null===(S=window.navigator)||void 0===S||!S.standalone)}(bn)&&"_self"!==vt)return function Rp(R,S){const I=document.createElement("a");I.href=R,I.target=S;const L=document.createEvent("MouseEvent");L.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),I.dispatchEvent(L)}(S||"",vt),new ki(null);const zi=window.open(S||"",vt,Zn);ge(zi,R,"popup-blocked");try{zi.focus()}catch{}return new ki(zi)}(S,vt,Ft())})()}_openRedirect(S,I,L,Y){var se=this;return(0,a.Z)(function*(){return yield se._originValidation(S),function Jo(R){Br().location.href=R}(Xs(S,I,L,mt(),Y)),new Promise(()=>{})})()}_initialize(S){const I=S._key();if(this.eventManagers[I]){const{manager:Y,promise:se}=this.eventManagers[I];return Y?Promise.resolve(Y):(ke(se,"If manager is not set, promise should be"),se)}const L=this.initAndGetManager(S);return this.eventManagers[I]={promise:L},L.catch(()=>{delete this.eventManagers[I]}),L}initAndGetManager(S){var I=this;return(0,a.Z)(function*(){const L=yield function yg(R){return go.apply(this,arguments)}(S),Y=new Mp(S);return L.register("authEvent",se=>(ge(se?.authEvent,S,"invalid-auth-event"),{status:Y.onEvent(se.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),I.eventManagers[S._key()]={manager:Y},I.iframes[S._key()]=L,Y})()}_isIframeWebStorageSupported(S,I){this.iframes[S._key()].send(Nu,{type:Nu},Y=>{var se;const Ie=null===(se=Y?.[0])||void 0===se?void 0:se[Nu];void 0!==Ie&&I(!!Ie),gt(S,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(S){const I=S._key();return this.originValidationPromises[I]||(this.originValidationPromises[I]=function l_(R){return gg.apply(this,arguments)}(S)),this.originValidationPromises[I]}get _shouldInitProactively(){return Si()||ue()||dn()}};class ya extends class Np{constructor(S){this.factorId=S}_process(S,I,L){switch(I.type){case"enroll":return this._finalizeEnroll(S,I.credential,L);case"signin":return this._finalizeSignIn(S,I.credential);default:return Me("unexpected MultiFactorSessionType")}}}{constructor(S){super("phone"),this.credential=S}static _fromCredential(S){return new ya(S)}_finalizeEnroll(S,I,L){return function Qm(R,S){return ut(R,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(R,S))}(S,{idToken:I,displayName:L,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(S,I){return function lg(R,S){return ut(R,"POST","/v2/accounts/mfaSignIn:finalize",Jt(R,S))}(S,{mfaPendingCredential:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Fu=(()=>{class R{constructor(){}static assertion(I){return ya._fromCredential(I)}}return R.FACTOR_ID="phone",R})();var mv="@firebase/auth";class eh{constructor(S){this.auth=S,this.internalListeners=new Map}getUid(){var S;return this.assertAuthConfigured(),(null===(S=this.auth.currentUser)||void 0===S?void 0:S.uid)||null}getToken(S){var I=this;return(0,a.Z)(function*(){return I.assertAuthConfigured(),yield I.auth._initializationPromise,I.auth.currentUser?{accessToken:yield I.auth.currentUser.getIdToken(S)}:null})()}addAuthTokenListener(S){if(this.assertAuthConfigured(),this.internalListeners.has(S))return;const I=this.auth.onIdTokenChanged(L=>{var Y;S((null===(Y=L)||void 0===Y?void 0:Y.stsTokenManager.accessToken)||null)});this.internalListeners.set(S,I),this.updateProactiveRefresh()}removeAuthTokenListener(S){this.assertAuthConfigured();const I=this.internalListeners.get(S);!I||(this.internalListeners.delete(S),I(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function mo(R=(0,W.getApp)()){const S=(0,W._getProvider)(R,"auth");return S.isInitialized()?S.getImmediate():function Ue(R,S){const I=(0,W._getProvider)(R,"auth");if(I.isInitialized()){const Y=I.getImmediate(),se=I.getOptions();if((0,V.vZ)(se,S??{}))return Y;gt(Y,"already-initialized")}return I.initialize({options:S})}(R,{popupRedirectResolver:gv,persistence:[Ur,Qt,ll]})}!function B0(R){(0,W._registerComponent)(new Ae.wA("auth",(S,{options:I})=>{const L=S.getProvider("app").getImmediate(),Y=S.getProvider("heartbeat"),{apiKey:se,authDomain:Ie}=L.options;return((vt,hn)=>{ge(se&&!se.includes(":"),"invalid-api-key",{appName:vt.name}),ge(!Ie?.includes(":"),"argument-error",{appName:vt.name});const bn={apiKey:se,authDomain:Ie,clientPlatform:R,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qe(R)},Zn=new Dt(vt,hn,bn);return function Ne(R,S){const I=S?.persistence||[],L=(Array.isArray(I)?I:[I]).map(Ce);S?.errorMap&&R._updateErrorMap(S.errorMap),R._initializeWithPersistence(L,S?.popupRedirectResolver)}(Zn,I),Zn})(L,Y)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((S,I,L)=>{S.getProvider("auth-internal").initialize()})),(0,W._registerComponent)(new Ae.wA("auth-internal",S=>{const I=On(S.getProvider("auth").getImmediate());return new eh(I)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,W.registerVersion)(mv,"0.20.5",function _v(R){switch(R){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(R)),(0,W.registerVersion)(mv,"0.20.5","esm2017")}("Browser")},2090:(cn,Ye,q)=>{"use strict";q.d(Ye,{$s:()=>Yi,BH:()=>we,DV:()=>ut,Dv:()=>Nn,G6:()=>ge,GJ:()=>Yt,L:()=>Se,LL:()=>mt,Mn:()=>$e,Pz:()=>rn,Sg:()=>Re,UG:()=>He,UI:()=>nn,US:()=>Ae,Wj:()=>Kn,Yr:()=>Je,ZB:()=>ne,ZR:()=>Ne,b$:()=>gt,cI:()=>gn,d:()=>Ke,dS:()=>Ht,eu:()=>ke,g5:()=>W,gK:()=>Dn,gQ:()=>yi,h$:()=>ve,hl:()=>Me,hu:()=>V,jU:()=>Fe,lb:()=>Vn,m9:()=>me,ne:()=>tt,p$:()=>ie,pd:()=>Sn,r3:()=>Jt,ru:()=>xt,tV:()=>pe,uI:()=>ct,ug:()=>Pt,vZ:()=>un,w1:()=>Be,w9:()=>Bt,xO:()=>ri,xb:()=>sn,z$:()=>je,zI:()=>be,zd:()=>vn});const V=function(z,K){if(!z)throw W(K)},W=function(z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+z)},_e=function(z){const K=[];let X=0;for(let J=0;J<z.length;J++){let de=z.charCodeAt(J);de<128?K[X++]=de:de<2048?(K[X++]=de>>6|192,K[X++]=63&de|128):55296==(64512&de)&&J+1<z.length&&56320==(64512&z.charCodeAt(J+1))?(de=65536+((1023&de)<<10)+(1023&z.charCodeAt(++J)),K[X++]=de>>18|240,K[X++]=de>>12&63|128,K[X++]=de>>6&63|128,K[X++]=63&de|128):(K[X++]=de>>12|224,K[X++]=de>>6&63|128,K[X++]=63&de|128)}return K},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,K){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const X=K?this.byteToCharMapWebSafe_:this.byteToCharMap_,J=[];for(let de=0;de<z.length;de+=3){const Ge=z[de],wt=de+1<z.length,$t=wt?z[de+1]:0,yn=de+2<z.length,Hn=yn?z[de+2]:0;let oe=(15&$t)<<2|Hn>>6,ue=63&Hn;yn||(ue=64,wt||(oe=64)),J.push(X[Ge>>2],X[(3&Ge)<<4|$t>>4],X[oe],X[ue])}return J.join("")},encodeString(z,K){return this.HAS_NATIVE_SUPPORT&&!K?btoa(z):this.encodeByteArray(_e(z),K)},decodeString(z,K){return this.HAS_NATIVE_SUPPORT&&!K?atob(z):function(z){const K=[];let X=0,J=0;for(;X<z.length;){const de=z[X++];if(de<128)K[J++]=String.fromCharCode(de);else if(de>191&&de<224){const Ge=z[X++];K[J++]=String.fromCharCode((31&de)<<6|63&Ge)}else if(de>239&&de<365){const yn=((7&de)<<18|(63&z[X++])<<12|(63&z[X++])<<6|63&z[X++])-65536;K[J++]=String.fromCharCode(55296+(yn>>10)),K[J++]=String.fromCharCode(56320+(1023&yn))}else{const Ge=z[X++],wt=z[X++];K[J++]=String.fromCharCode((15&de)<<12|(63&Ge)<<6|63&wt)}}return K.join("")}(this.decodeStringToByteArray(z,K))},decodeStringToByteArray(z,K){this.init_();const X=K?this.charToByteMapWebSafe_:this.charToByteMap_,J=[];for(let de=0;de<z.length;){const Ge=X[z.charAt(de++)],$t=de<z.length?X[z.charAt(de)]:0;++de;const Hn=de<z.length?X[z.charAt(de)]:64;++de;const le=de<z.length?X[z.charAt(de)]:64;if(++de,null==Ge||null==$t||null==Hn||null==le)throw Error();J.push(Ge<<2|$t>>4),64!==Hn&&(J.push($t<<4&240|Hn>>2),64!==le&&J.push(Hn<<6&192|le))}return J},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},ve=function(z){const K=_e(z);return Ae.encodeByteArray(K,!0)},Se=function(z){return ve(z).replace(/\./g,"")},pe=function(z){try{return Ae.decodeString(z,!0)}catch(K){console.error("base64Decode failed: ",K)}return null};function ie(z){return ne(void 0,z)}function ne(z,K){if(!(K instanceof Object))return K;switch(K.constructor){case Date:return new Date(K.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return K}for(const X in K)!K.hasOwnProperty(X)||!ce(X)||(z[X]=ne(z[X],K[X]));return z}function ce(z){return"__proto__"!==z}class we{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((K,X)=>{this.resolve=K,this.reject=X})}wrapCallback(K){return(X,J)=>{X?this.reject(X):this.resolve(J),"function"==typeof K&&(this.promise.catch(()=>{}),1===K.length?K(X):K(X,J))}}}function Re(z,K){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const J=K||"demo-project",de=z.iat||0,Ge=z.sub||z.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const wt=Object.assign({iss:`https://securetoken.google.com/${J}`,aud:J,iat:de,exp:de+3600,auth_time:de,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},z);return[Se(JSON.stringify({alg:"none",type:"JWT"})),Se(JSON.stringify(wt)),""].join(".")}function je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ct(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function He(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Fe(){return"object"==typeof self&&self.self===self}function xt(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function gt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ke(){return je().indexOf("Electron/")>=0}function Be(){const z=je();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function $e(){return je().indexOf("MSAppHost/")>=0}function Je(){return!1}function ge(){return!He()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Me(){return"object"==typeof indexedDB}function ke(){return new Promise((z,K)=>{try{let X=!0;const J="validate-browser-context-for-indexeddb-analytics-module",de=self.indexedDB.open(J);de.onsuccess=()=>{de.result.close(),X||self.indexedDB.deleteDatabase(J),z(!0)},de.onupgradeneeded=()=>{X=!1},de.onerror=()=>{var Ge;K((null===(Ge=de.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(X){K(X)}})}function be(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ne extends Error{constructor(K,X,J){super(X),this.code=K,this.customData=J,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mt.prototype.create)}}class mt{constructor(K,X,J){this.service=K,this.serviceName=X,this.errors=J}create(K,...X){const J=X[0]||{},de=`${this.service}/${K}`,Ge=this.errors[K],wt=Ge?function lt(z,K){return z.replace(Xt,(X,J)=>{const de=K[J];return null!=de?String(de):`<${J}?>`})}(Ge,J):"Error";return new Ne(de,`${this.serviceName}: ${wt} (${de}).`,J)}}const Xt=/\{\$([^}]+)}/g;function gn(z){return JSON.parse(z)}function rn(z){return JSON.stringify(z)}const Ct=function(z){let K={},X={},J={},de="";try{const Ge=z.split(".");K=gn(pe(Ge[0])||""),X=gn(pe(Ge[1])||""),de=Ge[2],J=X.d||{},delete X.d}catch{}return{header:K,claims:X,data:J,signature:de}},Bt=function(z){const X=Ct(z).claims;return!!X&&"object"==typeof X&&X.hasOwnProperty("iat")},Yt=function(z){const K=Ct(z).claims;return"object"==typeof K&&!0===K.admin};function Jt(z,K){return Object.prototype.hasOwnProperty.call(z,K)}function ut(z,K){if(Object.prototype.hasOwnProperty.call(z,K))return z[K]}function sn(z){for(const K in z)if(Object.prototype.hasOwnProperty.call(z,K))return!1;return!0}function nn(z,K,X){const J={};for(const de in z)Object.prototype.hasOwnProperty.call(z,de)&&(J[de]=K.call(X,z[de],de,z));return J}function un(z,K){if(z===K)return!0;const X=Object.keys(z),J=Object.keys(K);for(const de of X){if(!J.includes(de))return!1;const Ge=z[de],wt=K[de];if(en(Ge)&&en(wt)){if(!un(Ge,wt))return!1}else if(Ge!==wt)return!1}for(const de of J)if(!X.includes(de))return!1;return!0}function en(z){return null!==z&&"object"==typeof z}function ri(z){const K=[];for(const[X,J]of Object.entries(z))Array.isArray(J)?J.forEach(de=>{K.push(encodeURIComponent(X)+"="+encodeURIComponent(de))}):K.push(encodeURIComponent(X)+"="+encodeURIComponent(J));return K.length?"&"+K.join("&"):""}function vn(z){const K={};return z.replace(/^\?/,"").split("&").forEach(J=>{if(J){const[de,Ge]=J.split("=");K[decodeURIComponent(de)]=decodeURIComponent(Ge)}}),K}function Sn(z){const K=z.indexOf("?");if(!K)return"";const X=z.indexOf("#",K);return z.substring(K,X>0?X:void 0)}class yi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let K=1;K<this.blockSize;++K)this.pad_[K]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(K,X){X||(X=0);const J=this.W_;if("string"==typeof K)for(let le=0;le<16;le++)J[le]=K.charCodeAt(X)<<24|K.charCodeAt(X+1)<<16|K.charCodeAt(X+2)<<8|K.charCodeAt(X+3),X+=4;else for(let le=0;le<16;le++)J[le]=K[X]<<24|K[X+1]<<16|K[X+2]<<8|K[X+3],X+=4;for(let le=16;le<80;le++){const oe=J[le-3]^J[le-8]^J[le-14]^J[le-16];J[le]=4294967295&(oe<<1|oe>>>31)}let Hn,Pe,de=this.chain_[0],Ge=this.chain_[1],wt=this.chain_[2],$t=this.chain_[3],yn=this.chain_[4];for(let le=0;le<80;le++){le<40?le<20?(Hn=$t^Ge&(wt^$t),Pe=1518500249):(Hn=Ge^wt^$t,Pe=1859775393):le<60?(Hn=Ge&wt|$t&(Ge|wt),Pe=2400959708):(Hn=Ge^wt^$t,Pe=3395469782);const oe=(de<<5|de>>>27)+Hn+yn+Pe+J[le]&4294967295;yn=$t,$t=wt,wt=4294967295&(Ge<<30|Ge>>>2),Ge=de,de=oe}this.chain_[0]=this.chain_[0]+de&4294967295,this.chain_[1]=this.chain_[1]+Ge&4294967295,this.chain_[2]=this.chain_[2]+wt&4294967295,this.chain_[3]=this.chain_[3]+$t&4294967295,this.chain_[4]=this.chain_[4]+yn&4294967295}update(K,X){if(null==K)return;void 0===X&&(X=K.length);const J=X-this.blockSize;let de=0;const Ge=this.buf_;let wt=this.inbuf_;for(;de<X;){if(0===wt)for(;de<=J;)this.compress_(K,de),de+=this.blockSize;if("string"==typeof K){for(;de<X;)if(Ge[wt]=K.charCodeAt(de),++wt,++de,wt===this.blockSize){this.compress_(Ge),wt=0;break}}else for(;de<X;)if(Ge[wt]=K[de],++wt,++de,wt===this.blockSize){this.compress_(Ge),wt=0;break}}this.inbuf_=wt,this.total_+=X}digest(){const K=[];let X=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let de=this.blockSize-1;de>=56;de--)this.buf_[de]=255&X,X/=256;this.compress_(this.buf_);let J=0;for(let de=0;de<5;de++)for(let Ge=24;Ge>=0;Ge-=8)K[J]=this.chain_[de]>>Ge&255,++J;return K}}function tt(z,K){const X=new Le(z,K);return X.subscribe.bind(X)}class Le{constructor(K,X){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=X,this.task.then(()=>{K(this)}).catch(J=>{this.error(J)})}next(K){this.forEachObserver(X=>{X.next(K)})}error(K){this.forEachObserver(X=>{X.error(K)}),this.close(K)}complete(){this.forEachObserver(K=>{K.complete()}),this.close()}subscribe(K,X,J){let de;if(void 0===K&&void 0===X&&void 0===J)throw new Error("Missing Observer.");de=function Tt(z,K){if("object"!=typeof z||null===z)return!1;for(const X of K)if(X in z&&"function"==typeof z[X])return!0;return!1}(K,["next","error","complete"])?K:{next:K,error:X,complete:J},void 0===de.next&&(de.next=Gt),void 0===de.error&&(de.error=Gt),void 0===de.complete&&(de.complete=Gt);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?de.error(this.finalError):de.complete()}catch{}}),this.observers.push(de),Ge}unsubscribeOne(K){void 0===this.observers||void 0===this.observers[K]||(delete this.observers[K],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(K){if(!this.finalized)for(let X=0;X<this.observers.length;X++)this.sendOne(X,K)}sendOne(K,X){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[K])try{X(this.observers[K])}catch(J){typeof console<"u"&&console.error&&console.error(J)}})}close(K){this.finalized||(this.finalized=!0,void 0!==K&&(this.finalError=K),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gt(){}const Nn=function(z,K,X,J){let de;if(J<K?de="at least "+K:J>X&&(de=0===X?"none":"no more than "+X),de)throw new Error(z+" failed: Was called with "+J+(1===J?" argument.":" arguments.")+" Expects "+de+".")};function Dn(z,K){return`${z} failed: ${K} argument `}function Kn(z,K,X,J){if((!J||X)&&"function"!=typeof X)throw new Error(Dn(z,K)+"must be a valid function.")}function Vn(z,K,X,J){if((!J||X)&&("object"!=typeof X||null===X))throw new Error(Dn(z,K)+"must be a valid context object.")}const Ht=function(z){const K=[];let X=0;for(let J=0;J<z.length;J++){let de=z.charCodeAt(J);if(de>=55296&&de<=56319){const Ge=de-55296;J++,V(J<z.length,"Surrogate pair missing trail surrogate."),de=65536+(Ge<<10)+(z.charCodeAt(J)-56320)}de<128?K[X++]=de:de<2048?(K[X++]=de>>6|192,K[X++]=63&de|128):de<65536?(K[X++]=de>>12|224,K[X++]=de>>6&63|128,K[X++]=63&de|128):(K[X++]=de>>18|240,K[X++]=de>>12&63|128,K[X++]=de>>6&63|128,K[X++]=63&de|128)}return K},Pt=function(z){let K=0;for(let X=0;X<z.length;X++){const J=z.charCodeAt(X);J<128?K++:J<2048?K+=2:J>=55296&&J<=56319?(K+=4,X++):K+=3}return K};function Yi(z,K=1e3,X=2){const J=K*Math.pow(X,z),de=Math.round(.5*J*(Math.random()-.5)*2);return Math.min(144e5,J+de)}function me(z){return z&&z._delegate?z._delegate:z}},5910:(cn,Ye,q)=>{"use strict";var a=q(4650);let V=null;function W(){return V}const ve=new a.OlP("DocumentToken");let Se=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:function(){return function pe(){return(0,a.LFG)(ne)}()},providedIn:"platform"}),i})();const ie=new a.OlP("Location Initialized");let ne=(()=>{class i extends Se{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return W().getBaseHref(this._doc)}onPopState(e){const o=W().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",e,!1),()=>o.removeEventListener("popstate",e)}onHashChange(e){const o=W().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",e,!1),()=>o.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,o,s){ce()?this._history.pushState(e,o,s):this.location.hash=s}replaceState(e,o,s){ce()?this._history.replaceState(e,o,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(ve))},i.\u0275prov=a.Yz7({token:i,factory:function(){return function we(){return new ne((0,a.LFG)(ve))}()},providedIn:"platform"}),i})();function ce(){return!!window.history.pushState}function Re(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function je(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function ct(i){return i&&"?"!==i[0]?"?"+i:i}let He=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:function(){return(0,a.f3M)(xt)},providedIn:"root"}),i})();const Fe=new a.OlP("appBaseHref");let xt=(()=>{class i extends He{constructor(e,o){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=o??this._platformLocation.getBaseHrefFromDOM()??(0,a.f3M)(ve).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Re(this._baseHref,e)}path(e=!1){const o=this._platformLocation.pathname+ct(this._platformLocation.search),s=this._platformLocation.hash;return s&&e?`${o}${s}`:o}pushState(e,o,s,l){const u=this.prepareExternalUrl(s+ct(l));this._platformLocation.pushState(e,o,u)}replaceState(e,o,s,l){const u=this.prepareExternalUrl(s+ct(l));this._platformLocation.replaceState(e,o,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Se),a.LFG(Fe,8))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),gt=(()=>{class i extends He{constructor(e,o){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=o&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let o=this._platformLocation.hash;return null==o&&(o="#"),o.length>0?o.substring(1):o}prepareExternalUrl(e){const o=Re(this._baseHref,e);return o.length>0?"#"+o:o}pushState(e,o,s,l){let u=this.prepareExternalUrl(s+ct(l));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(e,o,u)}replaceState(e,o,s,l){let u=this.prepareExternalUrl(s+ct(l));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(e,o,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Se),a.LFG(Fe,8))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})(),Ke=(()=>{class i{constructor(e){this._subject=new a.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const o=this._locationStrategy.getBaseHref();this._baseHref=je(Je(o)),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,o=""){return this.path()==this.normalize(e+ct(o))}normalize(e){return i.stripTrailingSlash(function $e(i,t){return i&&t.startsWith(i)?t.substring(i.length):t}(this._baseHref,Je(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,o="",s=null){this._locationStrategy.pushState(s,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ct(o)),s)}replaceState(e,o="",s=null){this._locationStrategy.replaceState(s,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ct(o)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)})),()=>{const o=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(o,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",o){this._urlChangeListeners.forEach(s=>s(e,o))}subscribe(e,o,s){return this._subject.subscribe({next:e,error:o,complete:s})}}return i.normalizeQueryParams=ct,i.joinWithSlash=Re,i.stripTrailingSlash=je,i.\u0275fac=function(e){return new(e||i)(a.LFG(He))},i.\u0275prov=a.Yz7({token:i,factory:function(){return function Be(){return new Ke((0,a.LFG)(He))}()},providedIn:"root"}),i})();function Je(i){return i.replace(/\/index.html$/,"")}function ai(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const o=e.indexOf("="),[s,l]=-1==o?[e,""]:[e.slice(0,o),e.slice(o+1)];if(s.trim()===t)return decodeURIComponent(l)}return null}let lo=(()=>{class i{constructor(e,o,s,l){this._iterableDiffers=e,this._keyValueDiffers=o,this._ngEl=s,this._renderer=l,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,a.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(o=>this._toggleClass(o.key,o.currentValue)),e.forEachChangedItem(o=>this._toggleClass(o.key,o.currentValue)),e.forEachRemovedItem(o=>{o.previousValue&&this._toggleClass(o.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(o=>{if("string"!=typeof o.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,a.AaK)(o.item)}`);this._toggleClass(o.item,!0)}),e.forEachRemovedItem(o=>this._toggleClass(o.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(o=>this._toggleClass(o,!0)):Object.keys(e).forEach(o=>this._toggleClass(o,!!e[o])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(o=>this._toggleClass(o,!1)):Object.keys(e).forEach(o=>this._toggleClass(o,!1)))}_toggleClass(e,o){(e=e.trim())&&e.split(/\s+/g).forEach(s=>{o?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.ZZ4),a.Y36(a.aQg),a.Y36(a.SBq),a.Y36(a.Qsj))},i.\u0275dir=a.lG2({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class Fl{constructor(t,e,o,s){this.$implicit=t,this.ngForOf=e,this.index=o,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ui=(()=>{class i{constructor(e,o,s){this._viewContainer=e,this._template=o,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const o=this._viewContainer;e.forEachOperation((s,l,u)=>{if(null==s.previousIndex)o.createEmbeddedView(this._template,new Fl(s.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)o.remove(null===l?void 0:l);else if(null!==l){const g=o.get(l);o.move(g,u),da(g,s)}});for(let s=0,l=o.length;s<l;s++){const g=o.get(s).context;g.index=s,g.count=l,g.ngForOf=this._ngForOf}e.forEachIdentityChange(s=>{da(o.get(s.currentIndex),s)})}static ngTemplateContextGuard(e,o){return!0}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},i.\u0275dir=a.lG2({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function da(i,t){i.context.$implicit=t.item}let Ji=(()=>{class i{constructor(e,o){this._viewContainer=e,this._context=new co,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){To("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){To("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,o){return!0}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.s_b),a.Y36(a.Rgc))},i.\u0275dir=a.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class co{constructor(){this.$implicit=null,this.ngIf=null}}function To(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${(0,a.AaK)(t)}'.`)}class gu{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Eo=(()=>{class i{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const o=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||o,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),o}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let o=0;o<this._defaultViews.length;o++)this._defaultViews[o].enforceState(e)}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=a.lG2({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),i})(),zs=(()=>{class i{constructor(e,o,s){this.ngSwitch=s,s._addCase(),this._view=new gu(e,o)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(Eo,9))},i.\u0275dir=a.lG2({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),i})(),Yo=(()=>{class i{constructor(e,o,s){s._addDefault(new gu(e,o))}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(Eo,9))},i.\u0275dir=a.lG2({type:i,selectors:[["","ngSwitchDefault",""]],standalone:!0}),i})(),uo=(()=>{class i{constructor(e,o,s){this._ngEl=e,this._differs=o,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,o){const[s,l]=e.split("."),u=-1===s.indexOf("-")?void 0:a.JOm.DashCase;null!=o?this._renderer.setStyle(this._ngEl.nativeElement,s,l?`${o}${l}`:o,u):this._renderer.removeStyle(this._ngEl.nativeElement,s,u)}_applyChanges(e){e.forEachRemovedItem(o=>this._setStyle(o.key,null)),e.forEachAddedItem(o=>this._setStyle(o.key,o.currentValue)),e.forEachChangedItem(o=>this._setStyle(o.key,o.currentValue))}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.SBq),a.Y36(a.aQg),a.Y36(a.Qsj))},i.\u0275dir=a.lG2({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),i})(),Hr=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const o=this._viewContainerRef;if(this._viewRef&&o.remove(o.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:s,ngTemplateOutletContext:l,ngTemplateOutletInjector:u}=this;this._viewRef=o.createEmbeddedView(s,l,u?{injector:u}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.s_b))},i.\u0275dir=a.lG2({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[a.TTD]}),i})(),jn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({}),i})();const mu="browser";function xo(i){return i===mu}function vc(i){return"server"===i}let av=(()=>{class i{}return i.\u0275prov=(0,a.Yz7)({token:i,providedIn:"root",factory:()=>new Pd((0,a.LFG)(ve),window)}),i})();class Pd{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function ig(i,t){const e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const o=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let s=o.currentNode;for(;s;){const l=s.shadowRoot;if(l){const u=l.getElementById(t)||l.querySelector(`[name="${t}"]`);if(u)return u}s=o.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),o=e.left+this.window.pageXOffset,s=e.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(o-l[0],s-l[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=As(this.window.history)||As(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function As(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class Vo{}class bc extends class So extends class Ae{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Ve(i){V||(V=i)}(new bc)}onAndCancel(t,e,o){return t.addEventListener(e,o,!1),()=>{t.removeEventListener(e,o,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Hl(){return nl=nl||document.querySelector("base"),nl?nl.getAttribute("href"):null}();return null==e?null:function sp(i){$s=$s||document.createElement("a"),$s.setAttribute("href",i);const t=$s.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){nl=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ai(document.cookie,t)}}let $s,nl=null;const Bl=new a.OlP("TRANSITION_ID"),ap=[{provide:a.ip1,useFactory:function Jn(i,t,e){return()=>{e.get(a.CZH).donePromise.then(()=>{const o=W(),s=t.querySelectorAll(`style[ng-transition="${i}"]`);for(let l=0;l<s.length;l++)o.remove(s[l])})}},deps:[Bl,ve,a.zs3],multi:!0}];let lp=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();const Ul=new a.OlP("EventManagerPlugins");let Nd=(()=>{class i{constructor(e,o){this._zone=o,this._eventNameToPlugin=new Map,e.forEach(s=>s.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,o,s){return this._findPluginFor(o).addEventListener(e,o,s)}addGlobalEventListener(e,o,s){return this._findPluginFor(o).addGlobalEventListener(e,o,s)}getZone(){return this._zone}_findPluginFor(e){const o=this._eventNameToPlugin.get(e);if(o)return o;const s=this._plugins;for(let l=0;l<s.length;l++){const u=s[l];if(u.supports(e))return this._eventNameToPlugin.set(e,u),u}throw new Error(`No event manager plugin found for event ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Ul),a.LFG(a.R0b))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();class _u{constructor(t){this._doc=t}addGlobalEventListener(t,e,o){const s=W().getGlobalEventTarget(this._doc,t);if(!s)throw new Error(`Unsupported event target ${s} for event ${e}`);return this.addEventListener(s,e,o)}}let cp=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(e){const o=new Set;e.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),o.add(s))}),this.onStylesAdded(o)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})(),wc=(()=>{class i extends cp{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,o,s){e.forEach(l=>{const u=this._doc.createElement("style");u.textContent=l,s.push(o.appendChild(u))})}addHost(e){const o=[];this._addStylesToHost(this._stylesSet,e,o),this._hostNodes.set(e,o)}removeHost(e){const o=this._hostNodes.get(e);o&&o.forEach(Et),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((o,s)=>{this._addStylesToHost(e,s,o)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Et))}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(ve))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();function Et(i){W().remove(i)}const di={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Aa=/%COMP%/g;function Tc(i,t,e){for(let o=0;o<t.length;o++){let s=t[o];Array.isArray(s)?Tc(i,s,e):(s=s.replace(Aa,i),e.push(s))}return e}function vr(i){return t=>{if("__ngUnwrap__"===t)return i;!1===i(t)&&(t.preventDefault(),t.returnValue=!1)}}let Fd=(()=>{class i{constructor(e,o,s){this.eventManager=e,this.sharedStylesHost=o,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new yu(e)}createRenderer(e,o){if(!e||!o)return this.defaultRenderer;switch(o.encapsulation){case a.ifc.Emulated:{let s=this.rendererByCompId.get(o.id);return s||(s=new rl(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,s)),s.applyToHost(e),s}case 1:case a.ifc.ShadowDom:return new Oa(this.eventManager,this.sharedStylesHost,e,o);default:if(!this.rendererByCompId.has(o.id)){const s=Tc(o.id,o.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Nd),a.LFG(wc),a.LFG(a.AFp))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();class yu{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(di[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(dp(t)?t.content:t).appendChild(e)}insertBefore(t,e,o){t&&(dp(t)?t.content:t).insertBefore(e,o)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let o="string"==typeof t?document.querySelector(t):t;if(!o)throw new Error(`The selector "${t}" did not match any elements`);return e||(o.textContent=""),o}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,o,s){if(s){e=s+":"+e;const l=di[s];l?t.setAttributeNS(l,e,o):t.setAttribute(e,o)}else t.setAttribute(e,o)}removeAttribute(t,e,o){if(o){const s=di[o];s?t.removeAttributeNS(s,e):t.removeAttribute(`${o}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,o,s){s&(a.JOm.DashCase|a.JOm.Important)?t.style.setProperty(e,o,s&a.JOm.Important?"important":""):t.style[e]=o}removeStyle(t,e,o){o&a.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,o){t[e]=o}setValue(t,e){t.nodeValue=e}listen(t,e,o){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,vr(o)):this.eventManager.addEventListener(t,e,vr(o))}}function dp(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class rl extends yu{constructor(t,e,o,s){super(t),this.component=o;const l=Tc(s+"-"+o.id,o.styles,[]);e.addStyles(l),this.contentAttr=function ps(i){return"_ngcontent-%COMP%".replace(Aa,i)}(s+"-"+o.id),this.hostAttr=function il(i){return"_nghost-%COMP%".replace(Aa,i)}(s+"-"+o.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const o=super.createElement(t,e);return super.setAttribute(o,this.contentAttr,""),o}}class Oa extends yu{constructor(t,e,o,s){super(t),this.sharedStylesHost=e,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Tc(s.id,s.styles,[]);for(let u=0;u<l.length;u++){const g=document.createElement("style");g.textContent=l[u],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,o){return super.insertBefore(this.nodeOrShadowRoot(t),e,o)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let hp=(()=>{class i extends _u{constructor(e){super(e)}supports(e){return!0}addEventListener(e,o,s){return e.addEventListener(o,s,!1),()=>this.removeEventListener(e,o,s)}removeEventListener(e,o,s){return e.removeEventListener(o,s)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(ve))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();const vu=["alt","control","meta","shift"],pp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fp={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ec={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let bu=(()=>{class i extends _u{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,o,s){const l=i.parseEventName(o),u=i.eventCallback(l.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>W().onAndCancel(e,l.domEventName,u))}static parseEventName(e){const o=e.toLowerCase().split("."),s=o.shift();if(0===o.length||"keydown"!==s&&"keyup"!==s)return null;const l=i._normalizeKey(o.pop());let u="";if(vu.forEach(_=>{const w=o.indexOf(_);w>-1&&(o.splice(w,1),u+=_+".")}),u+=l,0!=o.length||0===l.length)return null;const g={};return g.domEventName=s,g.fullKey=u,g}static getEventFullKey(e){let o="",s=function wu(i){let t=i.key;if(null==t){if(t=i.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===i.location&&fp.hasOwnProperty(t)&&(t=fp[t]))}return pp[t]||t}(e);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),vu.forEach(l=>{l!=s&&(0,Ec[l])(e)&&(o+=l+".")}),o+=s,o}static eventCallback(e,o,s){return l=>{i.getEventFullKey(l)===e&&s.runGuarded(()=>o(l))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(ve))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();const xc=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:mu},{provide:a.g9A,useValue:function Tu(){bc.makeCurrent()},multi:!0},{provide:ve,useFactory:function gp(){return(0,a.RDi)(document),document},deps:[]}]),_p=new a.OlP(""),Hd=[{provide:a.rWj,useClass:class rg{addToWindow(t){a.dqk.getAngularTestability=(o,s=!0)=>{const l=t.findTestabilityInTree(o,s);if(null==l)throw new Error("Could not find testability for element.");return l},a.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),a.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push(o=>{const s=a.dqk.getAllAngularTestabilities();let l=s.length,u=!1;const g=function(_){u=u||_,l--,0==l&&o(u)};s.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(t,e,o){return null==e?null:t.getTestability(e)??(o?W().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:a.lri,useClass:a.dDg,deps:[a.R0b,a.eoX,a.rWj]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b,a.eoX,a.rWj]}],ho=[{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function Vd(){return new a.qLn},deps:[]},{provide:Ul,useClass:hp,multi:!0,deps:[ve,a.R0b,a.Lbi]},{provide:Ul,useClass:bu,multi:!0,deps:[ve]},{provide:Fd,useClass:Fd,deps:[Nd,wc,a.AFp]},{provide:a.FYo,useExisting:Fd},{provide:cp,useExisting:wc},{provide:wc,useClass:wc,deps:[ve]},{provide:Nd,useClass:Nd,deps:[Ul,a.R0b]},{provide:Vo,useClass:lp,deps:[]},[]];let Io=(()=>{class i{constructor(e){}static withServerTransition(e){return{ngModule:i,providers:[{provide:a.AFp,useValue:e.appId},{provide:Bl,useExisting:a.AFp},ap]}}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(_p,12))},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[...ho,...Hd],imports:[jn,a.hGG]}),i})(),sl=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(ve))},i.\u0275prov=a.Yz7({token:i,factory:function(e){let o=null;return o=e?new e:function sg(){return new sl((0,a.LFG)(ve))}(),o},providedIn:"root"}),i})();typeof window<"u"&&window;var Ft=q(7579);class It{static equals(t,e,o){return o?this.resolveFieldData(t,o)===this.resolveFieldData(e,o):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var l,u,g,o=Array.isArray(t),s=Array.isArray(e);if(o&&s){if((u=t.length)!=e.length)return!1;for(l=u;0!=l--;)if(!this.equalsByValue(t[l],e[l]))return!1;return!0}if(o!=s)return!1;var _=t instanceof Date,w=e instanceof Date;if(_!=w)return!1;if(_&&w)return t.getTime()==e.getTime();var T=t instanceof RegExp,D=e instanceof RegExp;if(T!=D)return!1;if(T&&D)return t.toString()==e.toString();var O=Object.keys(t);if((u=O.length)!==Object.keys(e).length)return!1;for(l=u;0!=l--;)if(!Object.prototype.hasOwnProperty.call(e,O[l]))return!1;for(l=u;0!=l--;)if(!this.equalsByValue(t[g=O[l]],e[g]))return!1;return!0}return t!=t&&e!=e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(-1==e.indexOf("."))return t[e];{let o=e.split("."),s=t;for(let l=0,u=o.length;l<u;++l){if(null==s)return null;s=s[o[l]]}return s}}return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,o){t&&e!==o&&(o>=t.length&&(o%=t.length,e%=t.length),t.splice(o,0,t.splice(e,1)[0]))}static insertIntoOrderedArray(t,e,o,s){if(o.length>0){let l=!1;for(let u=0;u<o.length;u++)if(this.findIndexInList(o[u],s)>e){o.splice(u,0,t),l=!0;break}l||o.push(t)}else o.push(t)}static findIndexInList(t,e){let o=-1;if(e)for(let s=0;s<e.length;s++)if(e[s]==t){o=s;break}return o}static contains(t,e){if(null!=t&&e&&e.length)for(let o of e)if(this.equals(t,o))return!0;return!1}static removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}static isEmpty(t){return null==t||""===t||Array.isArray(t)&&0===t.length||!(t instanceof Date)&&"object"==typeof t&&0===Object.keys(t).length}static isNotEmpty(t){return!this.isEmpty(t)}}var Br=0;function Jo(){return"pr_id_"+ ++Br}var sr=function hi(){let i=[];const s=l=>l&&parseInt(l.style.zIndex,10)||0;return{get:s,set:(l,u,g)=>{u&&(u.style.zIndex=String(((l,u)=>{let g=i.length>0?i[i.length-1]:{key:l,value:u},_=g.value+(g.key===l?0:u)+1;return i.push({key:l,value:_}),_})(l,g)))},clear:l=>{l&&((l=>{i=i.filter(u=>u.value!==l)})(s(l)),l.style.zIndex="")},getCurrent:()=>i.length>0?i[i.length-1].value:0}}();const Ic=["*"];let Li=(()=>{class i{}return i.STARTS_WITH="startsWith",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.ENDS_WITH="endsWith",i.EQUALS="equals",i.NOT_EQUALS="notEquals",i.IN="in",i.LESS_THAN="lt",i.LESS_THAN_OR_EQUAL_TO="lte",i.GREATER_THAN="gt",i.GREATER_THAN_OR_EQUAL_TO="gte",i.BETWEEN="between",i.IS="is",i.IS_NOT="isNot",i.BEFORE="before",i.AFTER="after",i.DATE_IS="dateIs",i.DATE_IS_NOT="dateIsNot",i.DATE_BEFORE="dateBefore",i.DATE_AFTER="dateAfter",i})(),zn=(()=>{class i{constructor(){this.ripple=!1,this.filterMatchModeOptions={text:[Li.STARTS_WITH,Li.CONTAINS,Li.NOT_CONTAINS,Li.ENDS_WITH,Li.EQUALS,Li.NOT_EQUALS],numeric:[Li.EQUALS,Li.NOT_EQUALS,Li.LESS_THAN,Li.LESS_THAN_OR_EQUAL_TO,Li.GREATER_THAN,Li.GREATER_THAN_OR_EQUAL_TO],date:[Li.DATE_IS,Li.DATE_IS_NOT,Li.DATE_BEFORE,Li.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new Ft.x,this.translationObserver=this.translationSource.asObservable()}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation={...this.translation,...e},this.translationSource.next(this.translation)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Mo=(()=>{class i{}return i.STARTS_WITH="startsWith",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.ENDS_WITH="endsWith",i.EQUALS="equals",i.NOT_EQUALS="notEquals",i.NO_FILTER="noFilter",i.LT="lt",i.LTE="lte",i.GT="gt",i.GTE="gte",i.IS="is",i.IS_NOT="isNot",i.BEFORE="before",i.AFTER="after",i.CLEAR="clear",i.APPLY="apply",i.MATCH_ALL="matchAll",i.MATCH_ANY="matchAny",i.ADD_RULE="addRule",i.REMOVE_RULE="removeRule",i.ACCEPT="accept",i.REJECT="reject",i.CHOOSE="choose",i.UPLOAD="upload",i.CANCEL="cancel",i.DAY_NAMES="dayNames",i.DAY_NAMES_SHORT="dayNamesShort",i.DAY_NAMES_MIN="dayNamesMin",i.MONTH_NAMES="monthNames",i.MONTH_NAMES_SHORT="monthNamesShort",i.FIRST_DAY_OF_WEEK="firstDayOfWeek",i.TODAY="today",i.WEEK_HEADER="weekHeader",i.WEAK="weak",i.MEDIUM="medium",i.STRONG="strong",i.PASSWORD_PROMPT="passwordPrompt",i.EMPTY_MESSAGE="emptyMessage",i.EMPTY_FILTER_MESSAGE="emptyFilterMessage",i})(),wp=(()=>{class i{constructor(){this.filters={startsWith:(e,o,s)=>{if(null==o||""===o.trim())return!0;if(null==e)return!1;let l=It.removeAccents(o.toString()).toLocaleLowerCase(s);return It.removeAccents(e.toString()).toLocaleLowerCase(s).slice(0,l.length)===l},contains:(e,o,s)=>{if(null==o||"string"==typeof o&&""===o.trim())return!0;if(null==e)return!1;let l=It.removeAccents(o.toString()).toLocaleLowerCase(s);return-1!==It.removeAccents(e.toString()).toLocaleLowerCase(s).indexOf(l)},notContains:(e,o,s)=>{if(null==o||"string"==typeof o&&""===o.trim())return!0;if(null==e)return!1;let l=It.removeAccents(o.toString()).toLocaleLowerCase(s);return-1===It.removeAccents(e.toString()).toLocaleLowerCase(s).indexOf(l)},endsWith:(e,o,s)=>{if(null==o||""===o.trim())return!0;if(null==e)return!1;let l=It.removeAccents(o.toString()).toLocaleLowerCase(s),u=It.removeAccents(e.toString()).toLocaleLowerCase(s);return-1!==u.indexOf(l,u.length-l.length)},equals:(e,o,s)=>null==o||"string"==typeof o&&""===o.trim()||null!=e&&(e.getTime&&o.getTime?e.getTime()===o.getTime():It.removeAccents(e.toString()).toLocaleLowerCase(s)==It.removeAccents(o.toString()).toLocaleLowerCase(s)),notEquals:(e,o,s)=>!(null==o||"string"==typeof o&&""===o.trim()||null!=e&&(e.getTime&&o.getTime?e.getTime()===o.getTime():It.removeAccents(e.toString()).toLocaleLowerCase(s)==It.removeAccents(o.toString()).toLocaleLowerCase(s))),in:(e,o)=>{if(null==o||0===o.length)return!0;for(let s=0;s<o.length;s++)if(It.equals(e,o[s]))return!0;return!1},between:(e,o)=>null==o||null==o[0]||null==o[1]||null!=e&&(e.getTime?o[0].getTime()<=e.getTime()&&e.getTime()<=o[1].getTime():o[0]<=e&&e<=o[1]),lt:(e,o,s)=>null==o||null!=e&&(e.getTime&&o.getTime?e.getTime()<o.getTime():e<o),lte:(e,o,s)=>null==o||null!=e&&(e.getTime&&o.getTime?e.getTime()<=o.getTime():e<=o),gt:(e,o,s)=>null==o||null!=e&&(e.getTime&&o.getTime?e.getTime()>o.getTime():e>o),gte:(e,o,s)=>null==o||null!=e&&(e.getTime&&o.getTime?e.getTime()>=o.getTime():e>=o),is:(e,o,s)=>this.filters.equals(e,o,s),isNot:(e,o,s)=>this.filters.notEquals(e,o,s),before:(e,o,s)=>this.filters.lt(e,o,s),after:(e,o,s)=>this.filters.gt(e,o,s),dateIs:(e,o)=>null==o||null!=e&&e.toDateString()===o.toDateString(),dateIsNot:(e,o)=>null==o||null!=e&&e.toDateString()!==o.toDateString(),dateBefore:(e,o)=>null==o||null!=e&&e.getTime()<o.getTime(),dateAfter:(e,o)=>null==o||null!=e&&e.getTime()>o.getTime()}}filter(e,o,s,l,u){let g=[];if(e)for(let _ of e)for(let w of o){let T=It.resolveFieldData(_,w);if(this.filters[l](T,s,u)){g.push(_);break}}return g}register(e,o){this.filters[e]=o}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ws=(()=>{class i{constructor(){this.messageSource=new Ft.x,this.clearSource=new Ft.x,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(e){e&&this.messageSource.next(e)}addAll(e){e&&e.length&&this.messageSource.next(e)}clear(e){this.clearSource.next(e||null)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})(),Ks=(()=>{class i{constructor(){this.clickSource=new Ft.x,this.clickObservable=this.clickSource.asObservable()}add(e){e&&this.clickSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Cp=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=a.Xpm({type:i,selectors:[["p-header"]],ngContentSelectors:Ic,decls:1,vars:0,template:function(e,o){1&e&&(a.F$t(),a.Hsn(0))},encapsulation:2}),i})(),Pa=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=a.Xpm({type:i,selectors:[["p-footer"]],ngContentSelectors:Ic,decls:1,vars:0,template:function(e,o){1&e&&(a.F$t(),a.Hsn(0))},encapsulation:2}),i})(),Ci=(()=>{class i{constructor(e){this.template=e}getType(){return this.name}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.Rgc))},i.\u0275dir=a.lG2({type:i,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),i})(),ar=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn]}),i})();var St=q(4027),br=q(5867);class Ur{constructor(t){return t}}class ms{constructor(){return(0,br.C6)()}}const Ho=new a.OlP("angularfire2._apps"),Qo={provide:Ur,useFactory:function Mn(i){return i&&1===i.length?i[0]:new Ur((0,br.Mq)())},deps:[[new a.FiY,Ho]]},Mc={provide:ms,deps:[[new a.FiY,Ho]]};function cl(i){return(t,e)=>{const o=t.runOutsideAngular(()=>i(e));return new Ur(o)}}let Ac=(()=>{class i{constructor(e){(0,br.KN)("angularfire",St.q4.full,"core"),(0,br.KN)("angularfire",St.q4.full,"app"),(0,br.KN)("angular",a.q4F.full,e.toString())}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(a.Lbi))},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[Qo,Mc]}),i})();function n_(i,...t){return{ngModule:Ac,providers:[{provide:Ho,useFactory:cl(i),multi:!0,deps:[a.R0b,a.zs3,St.HU,...t]}]}}const i_=(0,St.u3)(br.ZF,!0);var rt=q(5861),oi=q(9681),po=q(4859),re=q(2090),Ys=q(1877);const kr=new Map,kc={activated:!1,tokenObservers:[]},Na={initialized:!1,enabled:!1};function jr(i){return kr.get(i)||kc}function ir(i,t){kr.set(i,t)}function Bo(){return Na}class cg{constructor(t,e,o,s,l){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=o,this.lowerBound=s,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=s,s>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,rt.Z)(function*(){e.stop();try{e.pending=new re.BH,yield function Tp(i){return new Promise(t=>{setTimeout(t,i)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new re.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(o){e.retryPolicy(o)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const gr=new re.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function $d(i){if(!jr(i).activated)throw gr.create("use-before-activation",{appName:i.name})}function Su(i,t){return ql.apply(this,arguments)}function ql(){return(ql=(0,rt.Z)(function*({url:i,body:t},e){var o,s;const l={"Content-Type":"application/json"},u=e.getImmediate({optional:!0});if(u){const F=yield u.getHeartbeatsHeader();F&&(l["X-Firebase-Client"]=F)}const g={method:"POST",body:JSON.stringify(t),headers:l};let _,w;try{_=yield fetch(i,g)}catch(F){throw gr.create("fetch-network-error",{originalErrorMessage:null===(o=F)||void 0===o?void 0:o.message})}if(200!==_.status)throw gr.create("fetch-status-error",{httpStatus:_.status});try{w=yield _.json()}catch(F){throw gr.create("fetch-parse-error",{originalErrorMessage:null===(s=F)||void 0===s?void 0:s.message})}const T=w.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw gr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const D=1e3*Number(T[1]),O=Date.now();return{token:w.token,expireTimeMillis:O+D,issuedAtTimeMillis:O}})).apply(this,arguments)}function ug(i,t){const{projectId:e,appId:o,apiKey:s}=i.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${o}:exchangeDebugToken?key=${s}`,body:{debug_token:t}}}const _s="firebase-app-check-store";let xp=null;function ys(){return xp||(xp=new Promise((i,t)=>{var e;try{const o=indexedDB.open("firebase-app-check-database",1);o.onsuccess=s=>{i(s.target.result)},o.onerror=s=>{var l;t(gr.create("storage-open",{originalErrorMessage:null===(l=s.target.error)||void 0===l?void 0:l.message}))},o.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(_s,{keyPath:"compositeKey"})}}catch(o){t(gr.create("storage-open",{originalErrorMessage:null===(e=o)||void 0===e?void 0:e.message}))}}),xp)}function Kd(){return(Kd=(0,rt.Z)(function*(i,t){const o=(yield ys()).transaction(_s,"readwrite"),l=o.objectStore(_s).put({compositeKey:i,value:t});return new Promise((u,g)=>{l.onsuccess=_=>{u()},o.onerror=_=>{var w;g(gr.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const lr=new Ys.Yd("@firebase/app-check");function hl(i,t){return(0,re.hl)()?function Iu(i,t){return function Ip(i,t){return Kd.apply(this,arguments)}(function Mu(i){return`${i.options.appId}-${i.name}`}(i),t)}(i,t).catch(e=>{lr.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function $l(){return Bo().enabled}function hg(){return Js.apply(this,arguments)}function Js(){return(Js=(0,rt.Z)(function*(){const i=Bo();if(i.enabled&&i.token)return i.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Yd={error:"UNKNOWN_ERROR"};function ma(i){return re.US.encodeString(JSON.stringify(i),!1)}function Ou(i){return zr.apply(this,arguments)}function zr(){return(zr=(0,rt.Z)(function*(i,t=!1){const e=i.app;$d(e);const o=jr(e);let l,s=o.token;if(!s){const _=yield o.cachedTokenPromise;_&&La(_)&&(s=_)}if(!t&&s&&La(s))return{token:s.token};let g,u=!1;if($l()){o.exchangeTokenPromise||(o.exchangeTokenPromise=Su(ug(e,yield hg()),i.heartbeatServiceProvider).then(w=>(o.exchangeTokenPromise=void 0,w)),u=!0);const _=yield o.exchangeTokenPromise;return yield hl(e,_),ir(e,Object.assign(Object.assign({},o),{token:_})),{token:_.token}}try{o.exchangeTokenPromise||(o.exchangeTokenPromise=o.provider.getToken().then(_=>(o.exchangeTokenPromise=void 0,_)),u=!0),s=yield o.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?lr.warn(_.message):lr.error(_),l=_}return s?(g={token:s.token},ir(e,Object.assign(Object.assign({},o),{token:s})),yield hl(e,s)):g=Nc(l),u&&pg(e,g),g})).apply(this,arguments)}function pl(i,t){const e=jr(i),o=e.tokenObservers.filter(s=>s.next!==t);0===o.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),ir(i,Object.assign(Object.assign({},e),{tokenObservers:o}))}function Mp(i){const{app:t}=i,e=jr(t);let o=e.tokenRefresher;o||(o=function Ap(i){const{app:t}=i;return new cg((0,rt.Z)(function*(){let o;if(o=jr(t).token?yield Ou(i,!0):yield Ou(i),o.error)throw o.error}),()=>!0,()=>{const e=jr(t);if(e.token){let o=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return o=Math.min(o,e.token.expireTimeMillis-3e5),Math.max(0,o-Date.now())}return 0},3e4,96e4)}(i),ir(t,Object.assign(Object.assign({},e),{tokenRefresher:o}))),!o.isRunning()&&e.isTokenAutoRefreshEnabled&&o.start()}function pg(i,t){const e=jr(i).tokenObservers;for(const o of e)try{"EXTERNAL"===o.type&&null!=t.error?o.error(t.error):o.next(t)}catch{}}function La(i){return i.expireTimeMillis-Date.now()>0}function Nc(i){return{token:ma(Yd),error:i}}class Fc{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=jr(this.app);for(const e of t)pl(this.app,e.next);return Promise.resolve()}}const Xd="app-check-internal";!function Xs(){(0,oi._registerComponent)(new po.wA("app-check",i=>function Lc(i,t){return new Fc(i,t)}(i.getProvider("app").getImmediate(),i.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((i,t,e)=>{i.getProvider(Xd).initialize()})),(0,oi._registerComponent)(new po.wA(Xd,i=>function fg(i){return{getToken:t=>Ou(i,t),addTokenListener:t=>function Qs(i,t,e,o){const{app:s}=i,l=jr(s),u={next:e,error:o,type:t};if(ir(s,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,u]})),l.token&&La(l.token)){const g=l.token;Promise.resolve().then(()=>{e({token:g.token}),Mp(i)}).catch(()=>{})}l.cachedTokenPromise.then(()=>Mp(i))}(i,"INTERNAL",t),removeTokenListener:t=>pl(i.app,t)}}(i.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,oi.registerVersion)("@firebase/app-check","0.5.12")}();class _a{constructor(){return(0,St.vb)("app-check")}}typeof window<"u"&&window;var se=q(6457),Ie=q(9751);function vt(i){return new Ie.y(function(t){return{unsubscribe:(0,se.v)(i,t.next.bind(t),t.error.bind(t),t.complete.bind(t))}})}function hn(i){return new Ie.y(function(t){return{unsubscribe:(0,se.q)(i,t.next.bind(t),t.error.bind(t),t.complete.bind(t))}})}class zi{constructor(t){return t}}class jo{constructor(){return(0,St.vb)("auth")}}const Lu=new a.OlP("angularfire2.auth-instances");function bg(i){return(t,e)=>{const o=t.runOutsideAngular(()=>i(e));return new zi(o)}}const th={provide:jo,deps:[[new a.FiY,Lu]]},Fp={provide:zi,useFactory:function d_(i,t){const e=(0,St.JM)("auth",i,t);return e&&new zi(e)},deps:[[new a.FiY,Lu],Ur]};let nh=(()=>{class i{constructor(){(0,br.KN)("angularfire",St.q4.full,"auth")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[Fp,th]}),i})();function Vu(i,...t){return{ngModule:nh,providers:[{provide:Lu,useFactory:bg(i),multi:!0,deps:[a.R0b,a.zs3,St.HU,ms,[new a.FiY,_a],...t]}]}}const Hu=(0,St.u3)(vt,!0),Lp=(0,St.u3)(hn,!0),mr=(0,St.u3)(se.n,!0);var wn,Cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ml={},Eg=Eg||{},ii=Cv||self;function ch(){}function J0(i){var t=typeof i;return"array"==(t="object"!=t?t:i?Array.isArray(i)?"array":t:"null")||"object"==t&&"number"==typeof i.length}function Bp(i){var t=typeof i;return"object"==t&&null!=i||"function"==t}var Ua="closure_uid_"+(1e9*Math.random()>>>0),uh=0;function Uu(i,t,e){return i.call.apply(i.bind,arguments)}function uT(i,t,e){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,o),i.apply(t,s)}}return function(){return i.apply(t,arguments)}}function Xo(i,t,e){return(Xo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Uu:uT).apply(null,arguments)}function ja(i,t){var e=Array.prototype.slice.call(arguments,1);return function(){var o=e.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function qr(i,t){function e(){}e.prototype=t.prototype,i.Z=t.prototype,i.prototype=new e,i.prototype.constructor=i,i.Vb=function(o,s,l){for(var u=Array(arguments.length-2),g=2;g<arguments.length;g++)u[g-2]=arguments[g];return t.prototype[s].apply(o,u)}}function jc(){this.s=this.s,this.o=this.o}var Q0={};jc.prototype.s=!1,jc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function Up(i){return Object.prototype.hasOwnProperty.call(i,Ua)&&i[Ua]||(i[Ua]=++uh)}(this);delete Q0[i]}},jc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ju=Array.prototype.indexOf?function(i,t){return Array.prototype.indexOf.call(i,t,void 0)}:function(i,t){if("string"==typeof i)return"string"!=typeof t||1!=t.length?-1:i.indexOf(t,0);for(let e=0;e<i.length;e++)if(e in i&&i[e]===t)return e;return-1},xg=Array.prototype.forEach?function(i,t,e){Array.prototype.forEach.call(i,t,e)}:function(i,t,e){const o=i.length,s="string"==typeof i?i.split(""):i;for(let l=0;l<o;l++)l in s&&t.call(e,s[l],l,i)};function Gu(i){return Array.prototype.concat.apply([],arguments)}function jp(i){const t=i.length;if(0<t){const e=Array(t);for(let o=0;o<t;o++)e[o]=i[o];return e}return[]}function Tv(i){return/^[\s\xa0]*$/.test(i)}var ts,dT=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function es(i,t){return-1!=i.indexOf(t)}function X0(i,t){return i<t?-1:i>t?1:0}e:{var zp=ii.navigator;if(zp){var ew=zp.userAgent;if(ew){ts=ew;break e}}ts=""}function tw(i,t,e){for(const o in i)t.call(e,i[o],o,i)}function nw(i){const t={};for(const e in i)t[e]=i[e];return t}var m_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _l(i,t){let e,o;for(let s=1;s<arguments.length;s++){for(e in o=arguments[s],o)i[e]=o[e];for(let l=0;l<m_.length;l++)e=m_[l],Object.prototype.hasOwnProperty.call(o,e)&&(i[e]=o[e])}}function dh(i){return dh[" "](i),i}dh[" "]=ch;var Sg,i,Ev=es(ts,"Opera"),Yl=es(ts,"Trident")||es(ts,"MSIE"),rw=es(ts,"Edge"),zc=rw||Yl,Gc=es(ts,"Gecko")&&!(es(ts.toLowerCase(),"webkit")&&!es(ts,"Edge"))&&!(es(ts,"Trident")||es(ts,"MSIE"))&&!es(ts,"Edge"),xv=es(ts.toLowerCase(),"webkit")&&!es(ts,"Edge");function ow(){var i=ii.document;return i?i.documentMode:void 0}e:{var __="",y_=(i=ts,Gc?/rv:([^\);]+)(\)|;)/.exec(i):rw?/Edge\/([\d\.]+)/.exec(i):Yl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):xv?/WebKit\/(\S+)/.exec(i):Ev?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(y_&&(__=y_?y_[1]:""),Yl){var Sv=ow();if(null!=Sv&&Sv>parseFloat(__)){Sg=String(Sv);break e}}Sg=__}var sw={};var hT=ii.document&&Yl&&(ow()||parseInt(Sg,10))||void 0,lw=function(){if(!ii.addEventListener||!Object.defineProperty)return!1;var i=!1,t=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ii.addEventListener("test",ch,t),ii.removeEventListener("test",ch,t)}catch{}return i}();function ns(i,t){this.type=i,this.g=this.target=t,this.defaultPrevented=!1}function Jl(i,t){if(ns.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var e=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=t,t=i.relatedTarget){if(Gc){e:{try{dh(t.nodeName);var s=!0;break e}catch{}s=!1}s||(t=null)}}else"mouseover"==e?t=i.fromElement:"mouseout"==e&&(t=i.toElement);this.relatedTarget=t,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Gp[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Jl.Z.h.call(this)}}ns.prototype.h=function(){this.defaultPrevented=!0},qr(Jl,ns);var Gp={2:"touch",3:"pen",4:"mouse"};Jl.prototype.h=function(){Jl.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Zr="closure_listenable_"+(1e6*Math.random()|0),v_=0;function Iv(i,t,e,o,s){this.listener=i,this.proxy=null,this.src=t,this.type=e,this.capture=!!o,this.ia=s,this.key=++v_,this.ca=this.fa=!1}function qp(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function ko(i){this.src=i,this.g={},this.h=0}function hh(i,t){var e=t.type;if(e in i.g){var l,o=i.g[e],s=ju(o,t);(l=0<=s)&&Array.prototype.splice.call(o,s,1),l&&(qp(t),0==i.g[e].length&&(delete i.g[e],i.h--))}}function Ig(i,t,e,o){for(var s=0;s<i.length;++s){var l=i[s];if(!l.ca&&l.listener==t&&l.capture==!!e&&l.ia==o)return s}return-1}ko.prototype.add=function(i,t,e,o,s){var l=i.toString();(i=this.g[l])||(i=this.g[l]=[],this.h++);var u=Ig(i,t,o,s);return-1<u?(t=i[u],e||(t.fa=!1)):((t=new Iv(t,this.src,l,!!o,s)).fa=e,i.push(t)),t};var Mg="closure_lm_"+(1e6*Math.random()|0),_o={};function Mv(i,t,e,o,s){if(o&&o.once)return dw(i,t,e,o,s);if(Array.isArray(t)){for(var l=0;l<t.length;l++)Mv(i,t[l],e,o,s);return null}return e=kg(e),i&&i[Zr]?i.N(t,e,Bp(o)?!!o.capture:!!o,s):cw(i,t,e,!1,o,s)}function cw(i,t,e,o,s,l){if(!t)throw Error("Invalid event type");var u=Bp(s)?!!s.capture:!!s,g=Ag(i);if(g||(i[Mg]=g=new ko(i)),(e=g.add(t,e,o,u,l)).proxy)return e;if(o=function uw(){var t=is;return function i(e){return t.call(i.src,i.listener,e)}}(),e.proxy=o,o.src=i,o.listener=e,i.addEventListener)lw||(s=u),void 0===s&&(s=!1),i.addEventListener(t.toString(),o,s);else if(i.attachEvent)i.attachEvent(hw(t.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return e}function dw(i,t,e,o,s){if(Array.isArray(t)){for(var l=0;l<t.length;l++)dw(i,t[l],e,o,s);return null}return e=kg(e),i&&i[Zr]?i.O(t,e,Bp(o)?!!o.capture:!!o,s):cw(i,t,e,!0,o,s)}function Av(i,t,e,o,s){if(Array.isArray(t))for(var l=0;l<t.length;l++)Av(i,t[l],e,o,s);else o=Bp(o)?!!o.capture:!!o,e=kg(e),i&&i[Zr]?(i=i.i,(t=String(t).toString())in i.g&&-1<(e=Ig(l=i.g[t],e,o,s))&&(qp(l[e]),Array.prototype.splice.call(l,e,1),0==l.length&&(delete i.g[t],i.h--))):i&&(i=Ag(i))&&(t=i.g[t.toString()],i=-1,t&&(i=Ig(t,e,o,s)),(e=-1<i?t[i]:null)&&kv(e))}function kv(i){if("number"!=typeof i&&i&&!i.ca){var t=i.src;if(t&&t[Zr])hh(t.i,i);else{var e=i.type,o=i.proxy;t.removeEventListener?t.removeEventListener(e,o,i.capture):t.detachEvent?t.detachEvent(hw(e),o):t.addListener&&t.removeListener&&t.removeListener(o),(e=Ag(t))?(hh(e,i),0==e.h&&(e.src=null,t[Mg]=null)):qp(i)}}}function hw(i){return i in _o?_o[i]:_o[i]="on"+i}function is(i,t){if(i.ca)i=!0;else{t=new Jl(t,this);var e=i.listener,o=i.ia||i.src;i.fa&&kv(i),i=e.call(o,t)}return i}function Ag(i){return(i=i[Mg])instanceof ko?i:null}var b_="__closure_events_fn_"+(1e9*Math.random()>>>0);function kg(i){return"function"==typeof i?i:(i[b_]||(i[b_]=function(t){return i.handleEvent(t)}),i[b_])}function wr(){jc.call(this),this.i=new ko(this),this.P=this,this.I=null}function or(i,t){var e,o=i.I;if(o)for(e=[];o;o=o.I)e.push(o);if(i=i.P,o=t.type||t,"string"==typeof t)t=new ns(t,i);else if(t instanceof ns)t.target=t.target||i;else{var s=t;_l(t=new ns(o,i),s)}if(s=!0,e)for(var l=e.length-1;0<=l;l--){var u=t.g=e[l];s=Og(u,o,!0,t)&&s}if(s=Og(u=t.g=i,o,!0,t)&&s,s=Og(u,o,!1,t)&&s,e)for(l=0;l<e.length;l++)s=Og(u=t.g=e[l],o,!1,t)&&s}function Og(i,t,e,o){if(!(t=i.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,l=0;l<t.length;++l){var u=t[l];if(u&&!u.ca&&u.capture==e){var g=u.listener,_=u.ia||u.src;u.fa&&hh(i.i,u),s=!1!==g.call(_,o)&&s}}return s&&!o.defaultPrevented}qr(wr,jc),wr.prototype[Zr]=!0,wr.prototype.removeEventListener=function(i,t,e,o){Av(this,i,t,e,o)},wr.prototype.M=function(){if(wr.Z.M.call(this),this.i){var t,i=this.i;for(t in i.g){for(var e=i.g[t],o=0;o<e.length;o++)qp(e[o]);delete i.g[t],i.h--}}this.I=null},wr.prototype.N=function(i,t,e,o){return this.i.add(String(i),t,!1,e,o)},wr.prototype.O=function(i,t,e,o){return this.i.add(String(i),t,!0,e,o)};var Ov=ii.JSON.stringify;function pw(){var i=Fg;let t=null;return i.g&&(t=i.g,i.g=i.g.next,i.g||(i.h=null),t.next=null),t}var Pg,w_=new class{constructor(i,t){this.i=i,this.j=t,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new sD,i=>i.reset());class sD{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function yl(i){ii.setTimeout(()=>{throw i},0)}function Rg(i,t){Pg||function pT(){var i=ii.Promise.resolve(void 0);Pg=function(){i.then(qc)}}(),Ng||(Pg(),Ng=!0),Fg.add(i,t)}var Ng=!1,Fg=new class fw{constructor(){this.h=this.g=null}add(t,e){const o=w_.get();o.set(t,e),this.h?this.h.next=o:this.g=o,this.h=o}};function qc(){for(var i;i=pw();){try{i.h.call(i.g)}catch(e){yl(e)}var t=w_;t.j(i),100>t.h&&(t.h++,i.next=t.g,t.g=i)}Ng=!1}function Zp(i,t){wr.call(this),this.h=i||1,this.g=t||ii,this.j=Xo(this.kb,this),this.l=Date.now()}function Lg(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Vg(i,t,e){if("function"==typeof i)e&&(i=Xo(i,e));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Xo(i.handleEvent,i)}return 2147483647<Number(t)?-1:ii.setTimeout(i,t||0)}function C_(i){i.g=Vg(()=>{i.g=null,i.i&&(i.i=!1,C_(i))},i.j);const t=i.h;i.h=null,i.m.apply(null,t)}qr(Zp,wr),(wn=Zp.prototype).da=!1,wn.S=null,wn.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),or(this,"tick"),this.da&&(Lg(this),this.start()))}},wn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},wn.M=function(){Zp.Z.M.call(this),Lg(this),delete this.g};class gw extends jc{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:C_(this)}M(){super.M(),this.g&&(ii.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function T_(i){jc.call(this),this.h=i,this.g={}}qr(T_,jc);var ph=[];function qu(i,t,e,o){Array.isArray(e)||(e&&(ph[0]=e.toString()),e=ph);for(var s=0;s<e.length;s++){var l=Mv(t,e[s],o||i.handleEvent,!1,i.h||i);if(!l)break;i.g[l.key]=l}}function Zu(i){tw(i.g,function(t,e){this.g.hasOwnProperty(e)&&kv(t)},i),i.g={}}function fh(){this.g=!0}function mh(i,t,e,o){i.info(function(){return"XMLHTTP TEXT ("+t+"): "+function Nv(i,t){if(!i.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(i=0;i<e.length;i++)if(Array.isArray(e[i])){var o=e[i];if(!(2>o.length)){var s=o[1];if(Array.isArray(s)&&!(1>s.length)){var l=s[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var u=1;u<s.length;u++)s[u]=""}}}return Ov(e)}catch{return t}}(i,e)+(o?" "+o:"")})}T_.prototype.M=function(){T_.Z.M.call(this),Zu(this)},T_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fh.prototype.Aa=function(){this.g=!1},fh.prototype.info=function(){};var ea={},Fv=null;function Hg(){return Fv=Fv||new wr}function E_(i){ns.call(this,ea.Ma,i)}function $p(i){const t=Hg();or(t,new E_(t,i))}function _h(i,t){ns.call(this,ea.STAT_EVENT,i),this.stat=t}function ws(i){const t=Hg();or(t,new _h(t,i))}function yh(i,t){ns.call(this,ea.Na,i),this.size=t}function vh(i,t){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ii.setTimeout(function(){i()},t)}ea.Ma="serverreachability",qr(E_,ns),ea.STAT_EVENT="statevent",qr(_h,ns),ea.Na="timingevent",qr(yh,ns);var Wp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},$u={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function x_(){}function mw(){}x_.prototype.h=null;var S_,Kp={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function vl(){ns.call(this,"d")}function Ql(){ns.call(this,"c")}function Xl(){}function bh(i,t,e,o){this.l=i,this.j=t,this.m=e,this.X=o||1,this.V=new T_(this),this.P=Ug,this.W=new Zp(i=zc?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Bg}function Bg(){this.i=null,this.g="",this.h=!1}qr(vl,ns),qr(Ql,ns),qr(Xl,x_),Xl.prototype.g=function(){return new XMLHttpRequest},Xl.prototype.i=function(){return{}},S_=new Xl;var Ug=45e3,Yp={},wh={};function Jp(i,t,e){i.K=1,i.v=qg($c(t)),i.s=e,i.U=!0,Qp(i,null)}function Qp(i,t){i.F=Date.now(),Th(i),i.A=$c(i.v);var e=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),Cw(e.h,"t",o),i.C=0,e=i.l.H,i.h=new Bg,i.g=yo(i.l,e?t:null,!i.s),0<i.O&&(i.L=new gw(Xo(i.Ia,i,i.g),i.O)),qu(i.V,i.g,"readystatechange",i.gb),t=i.H?nw(i.H):{},i.s?(i.u||(i.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,t)):(i.u="GET",i.g.ea(i.A,i.u,null,t)),$p(1),function gh(i,t,e,o,s,l){i.info(function(){if(i.g)if(l)for(var u="",g=l.split("&"),_=0;_<g.length;_++){var w=g[_].split("=");if(1<w.length){var T=w[0];w=w[1];var D=T.split("_");u=2<=D.length&&"type"==D[1]?u+(T+"=")+w+"&":u+(T+"=redacted&")}}else u=null;else u=l;return"XMLHTTP REQ ("+o+") [attempt "+s+"]: "+t+"\n"+e+"\n"+u})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Vv(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function D_(i,t,e){let s,o=!0;for(;!i.I&&i.C<e.length;){if(s=Ch(i,e),s==wh){4==t&&(i.o=4,ws(14),o=!1),mh(i.j,i.m,null,"[Incomplete Response]");break}if(s==Yp){i.o=4,ws(15),mh(i.j,i.m,e,"[Invalid Chunk]"),o=!1;break}mh(i.j,i.m,s,null),Xp(i,s)}Vv(i)&&s!=wh&&s!=Yp&&(i.h.g="",i.C=0),4!=t||0!=e.length||i.h.h||(i.o=1,ws(16),o=!1),i.i=i.i&&o,o?0<e.length&&!i.aa&&(i.aa=!0,(t=i.l).g==i&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),Xu(t),t.L=!0,ws(11))):(mh(i.j,i.m,e,"[Invalid Chunked Response]"),Zc(i),zg(i))}function Ch(i,t){var e=i.C,o=t.indexOf("\n",e);return-1==o?wh:(e=Number(t.substring(e,o)),isNaN(e)?Yp:(o+=1)+e>t.length?wh:(t=t.substr(o,e),i.C=o+e,t))}function Th(i){i.Y=Date.now()+i.P,Hv(i,i.P)}function Hv(i,t){if(null!=i.B)throw Error("WatchDog timer not null");i.B=vh(Xo(i.eb,i),t)}function jg(i){i.B&&(ii.clearTimeout(i.B),i.B=null)}function zg(i){0==i.l.G||i.I||yT(i.l,i)}function Zc(i){jg(i);var t=i.L;t&&"function"==typeof t.na&&t.na(),i.L=null,Lg(i.W),Zu(i.V),i.g&&(t=i.g,i.g=null,t.abort(),t.na())}function Xp(i,t){try{var e=i.l;if(0!=e.G&&(e.g==i||$v(e.i,i)))if(e.I=i.N,!i.J&&$v(e.i,i)&&3==e.G){try{var o=e.Ca.g.parse(t)}catch{o=null}if(Array.isArray(o)&&3==o.length){var s=o;if(0==s[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<i.F))break e;Ah(e),Ih(e)}Mh(e),ws(18)}}else e.ta=s[1],0<e.ta-e.U&&37500>s[2]&&e.N&&0==e.A&&!e.v&&(e.v=vh(Xo(e.ab,e),6e3));if(1>=xw(e.i)&&e.ka){try{e.ka()}catch{}e.ka=void 0}}else Oh(e,11)}else if((i.J||e.g==i)&&Ah(e),!Tv(t))for(s=e.Ca.g.parse(t),t=0;t<s.length;t++){let w=s[t];if(e.U=w[0],w=w[1],2==e.G)if("c"==w[0]){e.J=w[1],e.la=w[2];const T=w[3];null!=T&&(e.ma=T,e.h.info("VER="+e.ma));const D=w[4];null!=D&&(e.za=D,e.h.info("SVER="+e.za));const O=w[5];null!=O&&"number"==typeof O&&0<O&&(e.K=o=1.5*O,e.h.info("backChannelRequestTimeoutMs_="+o)),o=e;const F=i.g;if(F){const j=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var l=o.i;!l.g&&(es(j,"spdy")||es(j,"quic")||es(j,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Wv(l,l.h),l.h=null))}if(o.D){const Q=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(o.sa=Q,Cr(o.F,o.D,Q))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-i.F,e.h.info("Handshake RTT: "+e.O+"ms"));var u=i;if((o=e).oa=$r(o,o.H?o.la:null,o.W),u.J){gT(o.i,u);var g=u,_=o.K;_&&g.setTimeout(_),g.B&&(jg(g),Th(g)),o.g=u}else za(o);0<e.l.length&&af(e)}else"stop"!=w[0]&&"close"!=w[0]||Oh(e,7);else 3==e.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Oh(e,7):F_(e):"noop"!=w[0]&&e.j&&e.j.wa(w),e.A=0)}$p(4)}catch{}}function Uv(i,t){if(i.forEach&&"function"==typeof i.forEach)i.forEach(t,void 0);else if(J0(i)||"string"==typeof i)xg(i,t,void 0);else{if(i.T&&"function"==typeof i.T)var e=i.T();else if(i.R&&"function"==typeof i.R)e=void 0;else if(J0(i)||"string"==typeof i){e=[];for(var o=i.length,s=0;s<o;s++)e.push(s)}else for(s in e=[],o=0,i)e[o++]=s;o=function Bv(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(J0(i)){for(var t=[],e=i.length,o=0;o<e;o++)t.push(i[o]);return t}for(o in t=[],e=0,i)t[e++]=i[o];return t}(i),s=o.length;for(var l=0;l<s;l++)t.call(void 0,o[l],e&&e[l],i)}}function Eh(i,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var o=0;o<e;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof Eh)for(e=i.T(),o=0;o<e.length;o++)this.set(e[o],i.get(e[o]));else for(o in i)this.set(o,i[o])}function jv(i){if(i.i!=i.g.length){for(var t=0,e=0;t<i.g.length;){var o=i.g[t];Wu(i.h,o)&&(i.g[e++]=o),t++}i.g.length=e}if(i.i!=i.g.length){var s={};for(e=t=0;t<i.g.length;)Wu(s,o=i.g[t])||(i.g[e++]=o,s[o]=1),t++;i.g.length=e}}function Wu(i,t){return Object.prototype.hasOwnProperty.call(i,t)}(wn=bh.prototype).setTimeout=function(i){this.P=i},wn.gb=function(i){i=i.target;const t=this.L;t&&3==ta(i)?t.l():this.Ia(i)},wn.Ia=function(i){try{if(i==this.g)e:{const T=ta(this.g);var t=this.g.Da();const D=this.g.ba();if(!(3>T)&&(3!=T||zc||this.g&&(this.h.h||this.g.ga()||Qv(this.g)))){this.I||4!=T||7==t||$p(8==t||0>=D?3:2),jg(this);var e=this.g.ba();this.N=e;t:if(Vv(this)){var o=Qv(this.g);i="";var s=o.length,l=4==ta(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Zc(this),zg(this);var u="";break t}this.h.i=new ii.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,i+=this.h.i.decode(o[t],{stream:l&&t==s-1});o.splice(0,s),this.h.g+=i,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==e,function Rv(i,t,e,o,s,l,u){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+s+"]: "+t+"\n"+e+"\n"+l+" "+u})}(this.j,this.u,this.A,this.m,this.X,T,e),this.i){if(this.$&&!this.J){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tv(g)){var w=g;break t}}w=null}if(!(e=w)){this.i=!1,this.o=3,ws(12),Zc(this),zg(this);break e}mh(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Xp(this,e)}this.U?(D_(this,T,u),zc&&this.i&&3==T&&(qu(this.V,this.W,"tick",this.fb),this.W.start())):(mh(this.j,this.m,u,null),Xp(this,u)),4==T&&Zc(this),this.i&&!this.I&&(4==T?yT(this.l,this):(this.i=!1,Th(this)))}else 400==e&&0<u.indexOf("Unknown SID")?(this.o=3,ws(12)):(this.o=0,ws(13)),Zc(this),zg(this)}}}catch{}},wn.fb=function(){if(this.g){var i=ta(this.g),t=this.g.ga();this.C<t.length&&(jg(this),D_(this,i,t),this.i&&4!=i&&Th(this))}},wn.cancel=function(){this.I=!0,Zc(this)},wn.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Pv(i,t){i.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&($p(3),ws(17)),Zc(this),this.o=2,zg(this)):Hv(this,this.Y-i)},(wn=Eh.prototype).R=function(){jv(this);for(var i=[],t=0;t<this.g.length;t++)i.push(this.h[this.g[t]]);return i},wn.T=function(){return jv(this),this.g.concat()},wn.get=function(i,t){return Wu(this.h,i)?this.h[i]:t},wn.set=function(i,t){Wu(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=t},wn.forEach=function(i,t){for(var e=this.T(),o=0;o<e.length;o++){var s=e[o],l=this.get(s);i.call(t,l,s,this)}};var _w=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function rs(i,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof rs){this.g=void 0!==t?t:i.g,ef(this,i.j),this.s=i.s,Gg(this,i.i),I_(this,i.m),this.l=i.l,t=i.h;var e=new Zg;e.i=t.i,t.g&&(e.g=new Eh(t.g),e.h=t.h),yw(this,e),this.o=i.o}else i&&(e=String(i).match(_w))?(this.g=!!t,ef(this,e[1]||"",!0),this.s=ec(e[2]||""),Gg(this,e[3]||"",!0),I_(this,e[4]),this.l=ec(e[5]||"",!0),yw(this,e[6]||"",!0),this.o=ec(e[7]||"")):(this.g=!!t,this.h=new Zg(null,this.g))}function $c(i){return new rs(i)}function ef(i,t,e){i.j=e?ec(t,!0):t,i.j&&(i.j=i.j.replace(/:$/,""))}function Gg(i,t,e){i.i=e?ec(t,!0):t}function I_(i,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);i.m=t}else i.m=null}function yw(i,t,e){t instanceof Zg?(i.h=t,function Tw(i,t){t&&!i.j&&(Kc(i),i.i=null,i.g.forEach(function(e,o){var s=o.toLowerCase();o!=s&&(bw(this,o),Cw(this,s,e))},i)),i.j=t}(i.h,i.g)):(e||(t=Qn(t,fT)),i.h=new Zg(t,i.g))}function Cr(i,t,e){i.h.set(t,e)}function qg(i){return Cr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function ec(i,t){return i?t?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Qn(i,t,e){return"string"==typeof i?(i=encodeURI(i).replace(t,M_),e&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function M_(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}rs.prototype.toString=function(){var i=[],t=this.j;t&&i.push(Qn(t,Zv,!0),":");var e=this.i;return(e||"file"==t)&&(i.push("//"),(t=this.s)&&i.push(Qn(t,Zv,!0),"@"),i.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&i.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&i.push("/"),i.push(Qn(e,"/"==e.charAt(0)?Wc:A_,!0))),(e=this.h.toString())&&i.push("?",e),(e=this.o)&&i.push("#",Qn(e,vw)),i.join("")};var Zv=/[#\/\?@]/g,A_=/[#\?:]/g,Wc=/[#\?]/g,fT=/[#\?@]/g,vw=/#/g;function Zg(i,t){this.h=this.g=null,this.i=i||null,this.j=!!t}function Kc(i){i.g||(i.g=new Eh,i.h=0,i.i&&function zv(i,t){if(i){i=i.split("&");for(var e=0;e<i.length;e++){var o=i[e].indexOf("="),s=null;if(0<=o){var l=i[e].substring(0,o);s=i[e].substring(o+1)}else l=i[e];t(l,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(i.i,function(t,e){i.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function bw(i,t){Kc(i),t=Ku(i,t),Wu(i.g.h,t)&&(i.i=null,i.h-=i.g.get(t).length,Wu((i=i.g).h,t)&&(delete i.h[t],i.i--,i.g.length>2*i.i&&jv(i)))}function ww(i,t){return Kc(i),t=Ku(i,t),Wu(i.g.h,t)}function Cw(i,t,e){bw(i,t),0<e.length&&(i.i=null,i.g.set(Ku(i,t),jp(e)),i.h+=e.length)}function Ku(i,t){return t=String(t),i.j&&(t=t.toLowerCase()),t}function Ew(i){this.l=i||$g,i=ii.PerformanceNavigationTiming?0<(i=ii.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ii.g&&ii.g.Ea&&ii.g.Ea()&&ii.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(wn=Zg.prototype).add=function(i,t){Kc(this),this.i=null,i=Ku(this,i);var e=this.g.get(i);return e||this.g.set(i,e=[]),e.push(t),this.h+=1,this},wn.forEach=function(i,t){Kc(this),this.g.forEach(function(e,o){xg(e,function(s){i.call(t,s,o,this)},this)},this)},wn.T=function(){Kc(this);for(var i=this.g.R(),t=this.g.T(),e=[],o=0;o<t.length;o++)for(var s=i[o],l=0;l<s.length;l++)e.push(t[o]);return e},wn.R=function(i){Kc(this);var t=[];if("string"==typeof i)ww(this,i)&&(t=Gu(t,this.g.get(Ku(this,i))));else{i=this.g.R();for(var e=0;e<i.length;e++)t=Gu(t,i[e])}return t},wn.set=function(i,t){return Kc(this),this.i=null,ww(this,i=Ku(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[t]),this.h+=1,this},wn.get=function(i,t){return i&&0<(i=this.R(i)).length?String(i[0]):t},wn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],t=this.g.T(),e=0;e<t.length;e++){var o=t[e],s=encodeURIComponent(String(o));o=this.R(o);for(var l=0;l<o.length;l++){var u=s;""!==o[l]&&(u+="="+encodeURIComponent(String(o[l]))),i.push(u)}}return this.i=i.join("&")};var $g=10;function tf(i){return!!i.h||!!i.g&&i.g.size>=i.j}function xw(i){return i.h?1:i.g?i.g.size:0}function $v(i,t){return i.h?i.h==t:!!i.g&&i.g.has(t)}function Wv(i,t){i.g?i.g.add(t):i.h=t}function gT(i,t){i.h&&i.h==t?i.h=null:i.g&&i.g.has(t)&&i.g.delete(t)}function k_(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let t=i.i;for(const e of i.g.values())t=t.concat(e.D);return t}return jp(i.i)}function Wg(){}function Kv(){this.g=new Wg}function mT(i,t,e){const o=e||"";try{Uv(i,function(s,l){let u=s;Bp(s)&&(u=Ov(s)),t.push(o+l+"="+encodeURIComponent(u))})}catch(s){throw t.push(o+"type="+encodeURIComponent("_badmap")),s}}function O_(i,t,e,o,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(o)}catch{}}function rf(i){this.l=i.$b||null,this.j=i.ib||!1}function Yu(i,t){wr.call(this),this.D=i,this.u=t,this.m=void 0,this.readyState=R_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ew.prototype.cancel=function(){if(this.i=k_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Wg.prototype.stringify=function(i){return ii.JSON.stringify(i,void 0)},Wg.prototype.parse=function(i){return ii.JSON.parse(i,void 0)},qr(rf,x_),rf.prototype.g=function(){return new Yu(this.l,this.j)},rf.prototype.i=function(i){return function(){return i}}({}),qr(Yu,wr);var R_=0;function Kg(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Ju(i){i.readyState=4,i.l=null,i.j=null,i.A=null,sf(i)}function sf(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(wn=Yu.prototype).open=function(i,t){if(this.readyState!=R_)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=t,this.readyState=1,sf(this)},wn.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(t.body=i),(this.D||ii).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},wn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ju(this)),this.readyState=R_},wn.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,sf(this)),this.g&&(this.readyState=3,sf(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof ii.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Kg(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},wn.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var t=i.value?i.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!i.done}))&&(this.response=this.responseText+=t)}i.done?Ju(this):sf(this),3==this.readyState&&Kg(this)}},wn.Ua=function(i){this.g&&(this.response=this.responseText=i,Ju(this))},wn.Ta=function(i){this.g&&(this.response=i,Ju(this))},wn.ha=function(){this.g&&Ju(this)},wn.setRequestHeader=function(i,t){this.v.append(i,t)},wn.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},wn.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],t=this.h.entries();for(var e=t.next();!e.done;)i.push((e=e.value)[0]+": "+e[1]),e=t.next();return i.join("\r\n")},Object.defineProperty(Yu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Yv=ii.JSON.parse;function to(i){wr.call(this),this.headers=new Eh,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=P_,this.K=this.L=!1}qr(to,wr);var P_="",Sh=/^https?$/i,Sw=["POST","PUT"];function Dw(i){return"content-type"==i.toLowerCase()}function Dh(i,t){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=t,i.m=5,Iw(i),Jg(i)}function Iw(i){i.D||(i.D=!0,or(i,"complete"),or(i,"error"))}function Yg(i){if(i.h&&typeof Eg<"u"&&(!i.C[1]||4!=ta(i)||2!=i.ba()))if(i.v&&4==ta(i))Vg(i.Fa,0,i);else if(or(i,"readystatechange"),4==ta(i)){i.h=!1;try{const g=i.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var o;if(o=0===g){var s=String(i.H).match(_w)[1]||null;if(!s&&ii.self&&ii.self.location){var l=ii.self.location.protocol;s=l.substr(0,l.length-1)}o=!Sh.test(s?s.toLowerCase():"")}e=o}if(e)or(i,"complete"),or(i,"success");else{i.m=6;try{var u=2<ta(i)?i.g.statusText:""}catch{u=""}i.j=u+" ["+i.ba()+"]",Iw(i)}}finally{Jg(i)}}}function Jg(i,t){if(i.g){_T(i);const e=i.g,o=i.C[0]?ch:null;i.g=null,i.C=null,t||or(i,"ready");try{e.onreadystatechange=o}catch{}}}function _T(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ii.clearTimeout(i.A),i.A=null)}function ta(i){return i.g?i.g.readyState:0}function Qv(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case P_:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Qu(i,t,e){e:{for(o in e){var o=!1;break e}o=!0}o||(e=function Mw(i){let t="";return tw(i,function(e,o){t+=o,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof i?null!=e&&encodeURIComponent(String(e)):Cr(i,t,e))}function os(i,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[i]||t}function N_(i){this.za=0,this.l=[],this.h=new fh,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=os("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=os("baseRetryDelayMs",5e3,i),this.$a=os("retryDelaySeedMs",1e4,i),this.Ya=os("forwardChannelMaxRetries",2,i),this.ra=os("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Ew(i&&i.concurrentRequestLimit),this.Ca=new Kv,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function F_(i){if(ba(i),3==i.G){var t=i.V++,e=$c(i.F);Cr(e,"SID",i.J),Cr(e,"RID",t),Cr(e,"TYPE","terminate"),Xi(i,e),(t=new bh(i,i.h,t,void 0)).K=2,t.v=qg($c(e)),e=!1,ii.navigator&&ii.navigator.sendBeacon&&(e=ii.navigator.sendBeacon(t.v.toString(),"")),!e&&ii.Image&&((new Image).src=t.v,e=!0),e||(t.g=yo(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Th(t)}Aw(i)}function Ih(i){i.g&&(Xu(i),i.g.cancel(),i.g=null)}function ba(i){Ih(i),i.u&&(ii.clearTimeout(i.u),i.u=null),Ah(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ii.clearTimeout(i.m),i.m=null)}function Ei(i,t){i.l.push(new class{constructor(i,t){this.h=i,this.g=t}}(i.Za++,t)),3==i.G&&af(i)}function af(i){tf(i.i)||i.m||(i.m=!0,Rg(i.Ha,i),i.C=0)}function Qg(i,t){var e;e=t?t.m:i.V++;const o=$c(i.F);Cr(o,"SID",i.J),Cr(o,"RID",e),Cr(o,"AID",i.U),Xi(i,o),i.o&&i.s&&Qu(o,i.o,i.s),e=new bh(i,i.h,e,i.C+1),null===i.o&&(e.H=i.s),t&&(i.l=t.D.concat(i.l)),t=na(i,e,1e3),e.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),Wv(i.i,e),Jp(e,o,t)}function Xi(i,t){i.j&&Uv({},function(e,o){Cr(t,o,e)})}function na(i,t,e){e=Math.min(i.l.length,e);var o=i.j?Xo(i.j.Oa,i.j,i):null;e:{var s=i.l;let l=-1;for(;;){const u=["count="+e];-1==l?0<e?(l=s[0].h,u.push("ofs="+l)):l=0:u.push("ofs="+l);let g=!0;for(let _=0;_<e;_++){let w=s[_].h;const T=s[_].g;if(w-=l,0>w)l=Math.max(0,s[_].h-100),g=!1;else try{mT(T,u,"req"+w+"_")}catch{o&&o(T)}}if(g){o=u.join("&");break e}}}return i=i.l.splice(0,e),t.D=i,o}function za(i){i.g||i.u||(i.Y=1,Rg(i.Ga,i),i.A=0)}function Mh(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=vh(Xo(i.Ga,i),kh(i,i.A)),i.A++,0))}function Xu(i){null!=i.B&&(ii.clearTimeout(i.B),i.B=null)}function Xg(i){i.g=new bh(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var t=$c(i.oa);Cr(t,"RID","rpc"),Cr(t,"SID",i.J),Cr(t,"CI",i.N?"0":"1"),Cr(t,"AID",i.U),Xi(i,t),Cr(t,"TYPE","xmlhttp"),i.o&&i.s&&Qu(t,i.o,i.s),i.K&&i.g.setTimeout(i.K);var e=i.g;i=i.la,e.K=1,e.v=qg($c(t)),e.s=null,e.U=!0,Qp(e,i)}function Ah(i){null!=i.v&&(ii.clearTimeout(i.v),i.v=null)}function yT(i,t){var e=null;if(i.g==t){Ah(i),Xu(i),i.g=null;var o=2}else{if(!$v(i.i,t))return;e=t.D,gT(i.i,t),o=1}if(i.I=t.N,0!=i.G)if(t.i)if(1==o){e=t.s?t.s.length:0,t=Date.now()-t.F;var s=i.C;or(o=Hg(),new yh(o,e,t,s)),af(i)}else za(i);else if(3==(s=t.o)||0==s&&0<i.I||!(1==o&&function L_(i,t){return!(xw(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=t.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=vh(Xo(i.Ha,i,t),kh(i,i.C)),i.C++,0)))}(i,t)||2==o&&Mh(i)))switch(e&&0<e.length&&(t=i.i,t.i=t.i.concat(e)),s){case 1:Oh(i,5);break;case 4:Oh(i,10);break;case 3:Oh(i,6);break;default:Oh(i,2)}}function kh(i,t){let e=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(e*=2),e*t}function Oh(i,t){if(i.h.info("Error code "+t),2==t){var e=null;i.j&&(e=null);var o=Xo(i.jb,i);e||(e=new rs("//www.google.com/images/cleardot.gif"),ii.location&&"http"==ii.location.protocol||ef(e,"https"),qg(e)),function nf(i,t){const e=new fh;if(ii.Image){const o=new Image;o.onload=ja(O_,e,o,"TestLoadImage: loaded",!0,t),o.onerror=ja(O_,e,o,"TestLoadImage: error",!1,t),o.onabort=ja(O_,e,o,"TestLoadImage: abort",!1,t),o.ontimeout=ja(O_,e,o,"TestLoadImage: timeout",!1,t),ii.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else t(!1)}(e.toString(),o)}else ws(2);i.G=0,i.j&&i.j.va(t),Aw(i),ba(i)}function Aw(i){i.G=0,i.I=-1,i.j&&((0!=k_(i.i).length||0!=i.l.length)&&(i.i.i.length=0,jp(i.l),i.l.length=0),i.j.ua())}function $r(i,t,e){let o=function Gv(i){return i instanceof rs?$c(i):new rs(i,void 0)}(e);if(""!=o.i)t&&Gg(o,t+"."+o.i),I_(o,o.m);else{const s=ii.location;o=function qv(i,t,e,o){var s=new rs(null,void 0);return i&&ef(s,i),t&&Gg(s,t),e&&I_(s,e),o&&(s.l=o),s}(s.protocol,t?t+"."+s.hostname:s.hostname,+s.port,e)}return i.aa&&tw(i.aa,function(s,l){Cr(o,l,s)}),e=i.sa,(t=i.D)&&e&&Cr(o,t,e),Cr(o,"VER",i.ma),Xi(i,o),o}function yo(i,t,e){if(t&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new to(e&&i.Ba&&!i.qa?new rf({ib:!0}):i.qa)).L=i.H,t}function kw(){}function em(){if(Yl&&!(10<=Number(hT)))throw Error("Environmental error: no available transport.")}function wa(i,t){wr.call(this),this.g=new N_(t),this.l=i,this.h=t&&t.messageUrlParams||null,i=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(i?i["X-WebChannel-Content-Type"]=t.messageContentType:i={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(i?i["X-WebChannel-Client-Profile"]=t.ya:i={"X-WebChannel-Client-Profile":t.ya}),this.g.P=i,(i=t&&t.httpHeadersOverwriteParam)&&!Tv(i)&&(this.g.o=i),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Tv(t)&&(this.g.D=t,null!==(i=this.h)&&t in i&&t in(i=this.h)&&delete i[t]),this.j=new qa(this)}function Ga(i){vl.call(this);var t=i.__sm__;if(t){e:{for(const e in t){i=e;break e}i=void 0}(this.i=i)&&(i=this.i,t=null!==t&&i in t?t[i]:void 0),this.data=t}else this.data=i}function Yc(){Ql.call(this),this.status=1}function qa(i){this.g=i}(wn=to.prototype).ea=function(i,t,e,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);t=t?t.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():S_.g(),this.C=function Lv(i){return i.h||(i.h=i.i())}(this.u?this.u:S_),this.g.onreadystatechange=Xo(this.Fa,this);try{this.F=!0,this.g.open(t,String(i),!0),this.F=!1}catch(l){return void Dh(this,l)}i=e||"";const s=new Eh(this.headers);o&&Uv(o,function(l,u){s.set(u,l)}),o=function zu(i){e:{var t=Dw;const e=i.length,o="string"==typeof i?i.split(""):i;for(let s=0;s<e;s++)if(s in o&&t.call(void 0,o[s],s,i)){t=s;break e}t=-1}return 0>t?null:"string"==typeof i?i.charAt(t):i[t]}(s.T()),e=ii.FormData&&i instanceof ii.FormData,!(0<=ju(Sw,t))||o||e||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(l,u){this.g.setRequestHeader(u,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{_T(this),0<this.B&&((this.K=function Jv(i){return Yl&&function aw(){return function iw(i){var t=sw;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=i(9)}(function(){let i=0;const t=dT(String(Sg)).split("."),e=dT("9").split("."),o=Math.max(t.length,e.length);for(let u=0;0==i&&u<o;u++){var s=t[u]||"",l=e[u]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==s[0].length&&0==l[0].length)break;i=X0(0==s[1].length?0:parseInt(s[1],10),0==l[1].length?0:parseInt(l[1],10))||X0(0==s[2].length,0==l[2].length)||X0(s[2],l[2]),s=s[3],l=l[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xo(this.pa,this)):this.A=Vg(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(l){Dh(this,l)}},wn.pa=function(){typeof Eg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,or(this,"timeout"),this.abort(8))},wn.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,or(this,"complete"),or(this,"abort"),Jg(this))},wn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jg(this,!0)),to.Z.M.call(this)},wn.Fa=function(){this.s||(this.F||this.v||this.l?Yg(this):this.cb())},wn.cb=function(){Yg(this)},wn.ba=function(){try{return 2<ta(this)?this.g.status:-1}catch{return-1}},wn.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},wn.Qa=function(i){if(this.g){var t=this.g.responseText;return i&&0==t.indexOf(i)&&(t=t.substring(i.length)),Yv(t)}},wn.Da=function(){return this.m},wn.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(wn=N_.prototype).ma=8,wn.G=1,wn.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch{}},wn.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const s=new bh(this,this.h,i,void 0);let l=this.s;if(this.P&&(l?(l=nw(l),_l(l,this.P)):l=this.P),null===this.o&&(s.H=l),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var o=this.l[e];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=na(this,s,t),Cr(e=$c(this.F),"RID",i),Cr(e,"CVER",22),this.D&&Cr(e,"X-HTTP-Session-Id",this.D),Xi(this,e),this.o&&l&&Qu(e,this.o,l),Wv(this.i,s),this.Ra&&Cr(e,"TYPE","init"),this.ja?(Cr(e,"$req",t),Cr(e,"SID","null"),s.$=!0,Jp(s,e,null)):Jp(s,e,t),this.G=2}}else 3==this.G&&(i?Qg(this,i):0==this.l.length||tf(this.i)||Qg(this))},wn.Ga=function(){if(this.u=null,Xg(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=vh(Xo(this.bb,this),i)}},wn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ws(10),Ih(this),Xg(this))},wn.ab=function(){null!=this.v&&(this.v=null,Ih(this),Mh(this),ws(19))},wn.jb=function(i){i?(this.h.info("Successfully pinged google.com"),ws(2)):(this.h.info("Failed to ping google.com"),ws(1))},(wn=kw.prototype).xa=function(){},wn.wa=function(){},wn.va=function(){},wn.ua=function(){},wn.Oa=function(){},em.prototype.g=function(i,t){return new wa(i,t)},qr(wa,wr),wa.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,t=this.l,e=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Rg(Xo(i.hb,i,t))),ws(0),i.W=t,i.aa=e||{},i.N=i.X,i.F=$r(i,null,i.W),af(i)},wa.prototype.close=function(){F_(this.g)},wa.prototype.u=function(i){if("string"==typeof i){var t={};t.__data__=i,Ei(this.g,t)}else this.v?((t={}).__data__=Ov(i),Ei(this.g,t)):Ei(this.g,i)},wa.prototype.M=function(){this.g.j=null,delete this.j,F_(this.g),delete this.g,wa.Z.M.call(this)},qr(Ga,vl),qr(Yc,Ql),qr(qa,kw),qa.prototype.xa=function(){or(this.g,"a")},qa.prototype.wa=function(i){or(this.g,new Ga(i))},qa.prototype.va=function(i){or(this.g,new Yc(i))},qa.prototype.ua=function(){or(this.g,"b")},em.prototype.createWebChannel=em.prototype.g,wa.prototype.send=wa.prototype.u,wa.prototype.open=wa.prototype.m,wa.prototype.close=wa.prototype.close,Wp.NO_ERROR=0,Wp.TIMEOUT=8,Wp.HTTP_ERROR=6,$u.COMPLETE="complete",mw.EventType=Kp,Kp.OPEN="a",Kp.CLOSE="b",Kp.ERROR="c",Kp.MESSAGE="d",wr.prototype.listen=wr.prototype.N,to.prototype.listenOnce=to.prototype.O,to.prototype.getLastError=to.prototype.La,to.prototype.getLastErrorCode=to.prototype.Da,to.prototype.getStatus=to.prototype.ba,to.prototype.getResponseJson=to.prototype.Qa,to.prototype.getResponseText=to.prototype.ga,to.prototype.send=to.prototype.ea;var lf=ml.createWebChannelTransport=function(){return new em},aD=ml.getStatEventTarget=function(){return Hg()},Ow=ml.ErrorCode=Wp,vT=ml.EventType=$u,bT=ml.Event=ea,Rw=ml.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},lD=ml.FetchXmlHttpFactory=rf,Jc=ml.WebChannel=mw,Xv=ml.XhrIo=to;const eb="@firebase/firestore";class zo{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}zo.UNAUTHENTICATED=new zo(null),zo.GOOGLE_CREDENTIALS=new zo("google-credentials-uid"),zo.FIRST_PARTY=new zo("first-party-uid"),zo.MOCK_USER=new zo("mock-user");let Ca="9.9.1";const tc=new Ys.Yd("@firebase/firestore");function tb(){return tc.logLevel}function Nt(i,...t){if(tc.logLevel<=Ys.in.DEBUG){const e=t.map(Qc);tc.debug(`Firestore (${Ca}): ${i}`,...e)}}function Rr(i,...t){if(tc.logLevel<=Ys.in.ERROR){const e=t.map(Qc);tc.error(`Firestore (${Ca}): ${i}`,...e)}}function ed(i,...t){if(tc.logLevel<=Ys.in.WARN){const e=t.map(Qc);tc.warn(`Firestore (${Ca}): ${i}`,...e)}}function Qc(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function mn(i="Unexpected state"){const t=`FIRESTORE (${Ca}) INTERNAL ASSERTION FAILED: `+i;throw Rr(t),new Error(t)}function $n(i,t){i||mn()}function ln(i,t){return i}const ot={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Mt extends re.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class no{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class ib{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class td{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(zo.UNAUTHENTICATED))}shutdown(){}}class cf{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class uf{constructor(t){this.t=t,this.currentUser=zo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var o=this;let s=this.i;const l=w=>this.i!==s?(s=this.i,e(w)):Promise.resolve();let u=new no;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new no,t.enqueueRetryable(()=>l(this.currentUser))};const g=()=>{const w=u;t.enqueueRetryable((0,rt.Z)(function*(){yield w.promise,yield l(o.currentUser)}))},_=w=>{Nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new no)}},0),g()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(o=>this.i!==t?(Nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?($n("string"==typeof o.accessToken),new ib(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return $n(null===t||"string"==typeof t),new zo(t)}}class Za{constructor(t,e,o){this.type="FirstParty",this.user=zo.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const s=t.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class $a{constructor(t,e,o){this.h=t,this.l=e,this.m=o}getToken(){return Promise.resolve(new Za(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(zo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nc{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nd{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const o=l=>{null!=l.error&&Nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.p;return this.p=l.token,Nt("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>o(l))};const s=l=>{Nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>s(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?s(l):Nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?($n("string"==typeof e.token),this.p=e.token,new nc(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function rb(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let o=0;o<i;o++)e[o]=Math.floor(256*Math.random());return e}class tm{static I(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let o="";for(;o.length<20;){const s=rb(40);for(let l=0;l<s.length;++l)o.length<20&&s[l]<e&&(o+=t.charAt(s[l]%t.length))}return o}}function ei(i,t){return i<t?-1:i>t?1:0}function ia(i,t,e){return i.length===t.length&&i.every((o,s)=>e(o,t[s]))}function V_(i){return i+"\0"}class Tr{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Mt(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Mt(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Mt(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Mt(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Tr.fromMillis(Date.now())}static fromDate(t){return Tr.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),o=Math.floor(1e6*(t-1e3*e));return new Tr(e,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ei(this.nanoseconds,t.nanoseconds):ei(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Xn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Xn(t)}static min(){return new Xn(new Tr(0,0))}static max(){return new Xn(new Tr(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class df{constructor(t,e,o){void 0===e?e=0:e>t.length&&mn(),void 0===o?o=t.length-e:o>t.length-e&&mn(),this.segments=t,this.offset=e,this.len=o}get length(){return this.len}isEqual(t){return 0===df.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof df?t.forEach(o=>{e.push(o)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,o=this.limit();e<o;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const o=Math.min(t.length,e.length);for(let s=0;s<o;s++){const l=t.get(s),u=e.get(s);if(l<u)return-1;if(l>u)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class xi extends df{construct(t,e,o){return new xi(t,e,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const o of t){if(o.indexOf("//")>=0)throw new Mt(ot.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);e.push(...o.split("/").filter(s=>s.length>0))}return new xi(e)}static emptyPath(){return new xi([])}}const Nw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pr extends df{construct(t,e,o){return new Pr(t,e,o)}static isValidIdentifier(t){return Nw.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pr.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Pr(["__name__"])}static fromServerFormat(t){const e=[];let o="",s=0;const l=()=>{if(0===o.length)throw new Mt(ot.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(o),o=""};let u=!1;for(;s<t.length;){const g=t[s];if("\\"===g){if(s+1===t.length)throw new Mt(ot.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const _=t[s+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Mt(ot.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=_,s+=2}else"`"===g?(u=!u,s++):"."!==g||u?(o+=g,s++):(l(),s++)}if(l(),u)throw new Mt(ot.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Pr(e)}static emptyPath(){return new Pr([])}}class on{constructor(t){this.path=t}static fromPath(t){return new on(xi.fromString(t))}static fromName(t){return new on(xi.fromString(t).popFirst(5))}static empty(){return new on(xi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===xi.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return xi.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new on(new xi(t.slice()))}}class nm{constructor(t,e,o,s){this.indexId=t,this.collectionGroup=e,this.fields=o,this.indexState=s}}function ss(i){return i.fields.find(t=>2===t.kind)}function bl(i){return i.fields.filter(t=>2!==t.kind)}nm.UNKNOWN_ID=-1;class H_{constructor(t,e){this.fieldPath=t,this.kind=e}}class B_{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new B_(0,Ns.min())}}function Xc(i,t){const e=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,s=Xn.fromTimestamp(1e9===o?new Tr(e+1,0):new Tr(e,o));return new Ns(s,on.empty(),t)}function ic(i){return new Ns(i.readTime,i.key,-1)}class Ns{constructor(t,e,o){this.readTime=t,this.documentKey=e,this.largestBatchId=o}static min(){return new Ns(Xn.min(),on.empty(),-1)}static max(){return new Ns(Xn.max(),on.empty(),-1)}}function U_(i,t){let e=i.readTime.compareTo(t.readTime);return 0!==e?e:(e=on.comparator(i.documentKey,t.documentKey),0!==e?e:ei(i.largestBatchId,t.largestBatchId))}const ob="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function wl(i){return sb.apply(this,arguments)}function sb(){return sb=(0,rt.Z)(function*(i){if(i.code!==ot.FAILED_PRECONDITION||i.message!==ob)throw i;Nt("LocalStore","Unexpectedly lost primary lease")}),sb.apply(this,arguments)}class et{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&mn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new et((o,s)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(o,s)},this.catchCallback=l=>{this.wrapFailure(e,l).next(o,s)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof et?e:et.resolve(e)}catch(e){return et.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):et.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):et.reject(e)}static resolve(t){return new et((e,o)=>{e(t)})}static reject(t){return new et((e,o)=>{o(t)})}static waitFor(t){return new et((e,o)=>{let s=0,l=0,u=!1;t.forEach(g=>{++s,g.next(()=>{++l,u&&l===s&&e()},_=>o(_))}),u=!0,l===s&&e()})}static or(t){let e=et.resolve(!1);for(const o of t)e=e.next(s=>s?et.resolve(s):o());return e}static forEach(t,e){const o=[];return t.forEach((s,l)=>{o.push(e.call(this,s,l))}),this.waitFor(o)}static mapArray(t,e){return new et((o,s)=>{const l=t.length,u=new Array(l);let g=0;for(let _=0;_<l;_++){const w=_;e(t[w]).next(T=>{u[w]=T,++g,g===l&&o(u)},T=>s(T))}})}static doWhile(t,e){return new et((o,s)=>{const l=()=>{!0===t()?e().next(()=>{l()},s):o()};l()})}}class im{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.T=new no,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{e.error?this.T.reject(new Rh(t,e.error)):this.T.resolve()},this.transaction.onerror=o=>{const s=pf(o.target.error);this.T.reject(new Rh(t,s))}}static open(t,e,o,s){try{return new im(e,t.transaction(s,o))}catch(l){throw new Rh(e,l)}}get A(){return this.T.promise}abort(t){t&&this.T.reject(t),this.aborted||(Nt("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new rc(e)}}class Wa{constructor(t,e,o){this.name=t,this.version=e,this.P=o,12.2===Wa.v((0,re.z$)())&&Rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Nt("SimpleDb","Removing database:",t),oc(window.indexedDB.deleteDatabase(t)).toPromise()}static V(){if(!(0,re.hl)())return!1;if(Wa.S())return!0;const t=(0,re.z$)(),e=Wa.v(t),o=0<e&&e<10,s=Wa.D(t),l=0<s&&s<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||o||l)}static S(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.C)}static N(t,e){return t.store(e)}static v(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static D(t){const e=t.match(/Android ([\d.]+)/i),o=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(o)}k(t){var e=this;return(0,rt.Z)(function*(){return e.db||(Nt("SimpleDb","Opening database:",e.name),e.db=yield new Promise((o,s)=>{const l=indexedDB.open(e.name,e.version);l.onsuccess=u=>{o(u.target.result)},l.onblocked=()=>{s(new Rh(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=u=>{const g=u.target.error;s("VersionError"===g.name?new Mt(ot.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Mt(ot.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Rh(t,g))},l.onupgradeneeded=u=>{Nt("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',u.oldVersion),e.P.O(u.target.result,l.transaction,u.oldVersion,e.version).next(()=>{Nt("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.M&&(e.db.onversionchange=o=>e.M(o)),e.db})()}F(t){this.M=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,o,s){var l=this;return(0,rt.Z)(function*(){const u="readonly"===e;let g=0;for(;;){++g;try{l.db=yield l.k(t);const _=im.open(l.db,t,u?"readonly":"readwrite",o),w=s(_).next(T=>(_.R(),T)).catch(T=>(_.abort(T),et.reject(T))).toPromise();return w.catch(()=>{}),yield _.A,w}catch(_){const w=_,T="FirebaseError"!==w.name&&g<3;if(Nt("SimpleDb","Transaction failed with error:",w.message,"Retrying:",T),l.close(),!T)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Fw{constructor(t){this.$=t,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(t){this.$=t}done(){this.B=!0}q(t){this.L=t}delete(){return oc(this.$.delete())}}class Rh extends Mt{constructor(t,e){super(ot.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Cl(i){return"IndexedDbTransactionError"===i.name}class rc{constructor(t){this.store=t}put(t,e){let o;return void 0!==e?(Nt("SimpleDb","PUT",this.store.name,t,e),o=this.store.put(e,t)):(Nt("SimpleDb","PUT",this.store.name,"<auto-key>",t),o=this.store.put(t)),oc(o)}add(t){return Nt("SimpleDb","ADD",this.store.name,t,t),oc(this.store.add(t))}get(t){return oc(this.store.get(t)).next(e=>(void 0===e&&(e=null),Nt("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Nt("SimpleDb","DELETE",this.store.name,t),oc(this.store.delete(t))}count(){return Nt("SimpleDb","COUNT",this.store.name),oc(this.store.count())}K(t,e){const o=this.options(t,e);if(o.index||"function"!=typeof this.store.getAll){const s=this.cursor(o),l=[];return this.G(s,(u,g)=>{l.push(g)}).next(()=>l)}{const s=this.store.getAll(o.range);return new et((l,u)=>{s.onerror=g=>{u(g.target.error)},s.onsuccess=g=>{l(g.target.result)}})}}j(t,e){const o=this.store.getAll(t,null===e?void 0:e);return new et((s,l)=>{o.onerror=u=>{l(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}W(t,e){Nt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(t,e);o.H=!1;const s=this.cursor(o);return this.G(s,(l,u,g)=>g.delete())}J(t,e){let o;e?o=t:(o={},e=t);const s=this.cursor(o);return this.G(s,e)}Y(t){const e=this.cursor({});return new et((o,s)=>{e.onerror=l=>{const u=pf(l.target.error);s(u)},e.onsuccess=l=>{const u=l.target.result;u?t(u.primaryKey,u.value).next(g=>{g?u.continue():o()}):o()}})}G(t,e){const o=[];return new et((s,l)=>{t.onerror=u=>{l(u.target.error)},t.onsuccess=u=>{const g=u.target.result;if(!g)return void s();const _=new Fw(g),w=e(g.primaryKey,g.value,_);if(w instanceof et){const T=w.catch(D=>(_.done(),et.reject(D)));o.push(T)}_.isDone?s():null===_.U?g.continue():g.continue(_.U)}}).next(()=>et.waitFor(o))}options(t,e){let o;return void 0!==t&&("string"==typeof t?o=t:e=t),{index:o,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const o=this.store.index(t.index);return t.H?o.openKeyCursor(t.range,e):o.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function oc(i){return new et((t,e)=>{i.onsuccess=o=>{t(o.target.result)},i.onerror=o=>{const s=pf(o.target.error);e(s)}})}let ab=!1;function pf(i){const t=Wa.v((0,re.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(e)>=0){const o=new Mt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ab||(ab=!0,setTimeout(()=>{throw o},0)),o}}return i}class ff{constructor(t,e){this.asyncQueue=t,this.X=e,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(t){var e=this;Nt("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,rt.Z)(function*(){e.task=null;try{Nt("IndexBackiller",`Documents written: ${yield e.X.tt()}`)}catch(o){Cl(o)?Nt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield wl(o)}yield e.Z(1)}))}}class Cs{constructor(t,e){this.localStore=t,this.persistence=e}tt(t=50){var e=this;return(0,rt.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>e.et(o,t))})()}et(t,e){const o=new Set;let s=e,l=!0;return et.doWhile(()=>!0===l&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(u=>{if(null!==u&&!o.has(u))return Nt("IndexBackiller",`Processing collection: ${u}`),this.nt(t,u,s).next(g=>{s-=g,o.add(u)});l=!1})).next(()=>e-s)}nt(t,e,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(s=>this.localStore.localDocuments.getNextDocuments(t,e,s,o).next(l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(t,u).next(()=>this.st(s,l)).next(g=>(Nt("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(t,e,g))).next(()=>u.size)}))}st(t,e){let o=t;return e.changes.forEach((s,l)=>{const u=ic(l);U_(u,o)>0&&(o=u)}),new Ns(o.readTime,o.documentKey,Math.max(e.batchId,t.largestBatchId))}}class Fs{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=o=>this.it(o),this.rt=o=>e.writeSequenceNumber(o))}it(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.rt&&this.rt(t),t}}function lb(i){let t=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function Tl(i,t){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function id(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}Fs.ot=-1;class cr{constructor(t,e){this.comparator=t,this.root=e||Wr.EMPTY}insert(t,e){return new cr(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Wr.BLACK,null,null))}remove(t){return new cr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Wr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const o=this.comparator(t,e.key);if(0===o)return e.value;o<0?e=e.left:o>0&&(e=e.right)}return null}indexOf(t){let e=0,o=this.root;for(;!o.isEmpty();){const s=this.comparator(t,o.key);if(0===s)return e+o.left.size;s<0?o=o.left:(e+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,o)=>(t(e,o),!1))}toString(){const t=[];return this.inorderTraversal((e,o)=>(t.push(`${e}:${o}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new j_(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new j_(this.root,t,this.comparator,!1)}getReverseIterator(){return new j_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new j_(this.root,t,this.comparator,!0)}}class j_{constructor(t,e,o,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?o(t.key,e):1,e&&s&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(0===l){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Wr{constructor(t,e,o,s,l){this.key=t,this.value=e,this.color=o??Wr.RED,this.left=s??Wr.EMPTY,this.right=l??Wr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,o,s,l){return new Wr(t??this.key,e??this.value,o??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,o){let s=this;const l=o(t,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(t,e,o),null):0===l?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,o)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Wr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let o,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===e(t,s.key)){if(s.right.isEmpty())return Wr.EMPTY;o=s.right.min(),s=s.copy(o.key,o.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Wr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Wr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mn();const t=this.left.check();if(t!==this.right.check())throw mn();return t+(this.isRed()?0:1)}}Wr.EMPTY=null,Wr.RED=!0,Wr.BLACK=!1,Wr.EMPTY=new class{constructor(){this.size=0}get key(){throw mn()}get value(){throw mn()}get color(){throw mn()}get left(){throw mn()}get right(){throw mn()}copy(i,t,e,o,s){return this}insert(i,t,e){return new Wr(i,t)}remove(i,t){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vi{constructor(t){this.comparator=t,this.data=new cr(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,o)=>(t(e),!1))}forEachInRange(t,e){const o=this.data.getIteratorFrom(t[0]);for(;o.hasNext();){const s=o.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let o;for(o=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new rd(this.data.getIterator())}getIteratorFrom(t){return new rd(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(o=>{e=e.add(o)}),e}isEqual(t){if(!(t instanceof Vi)||this.size!==t.size)return!1;const e=this.data.getIterator(),o=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,l=o.getNext().key;if(0!==this.comparator(s,l))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Vi(this.comparator);return e.data=t,e}}class rd{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ph(i){return i.hasNext()?i.getNext():void 0}class Ls{constructor(t){this.fields=t,t.sort(Pr.comparator)}static empty(){return new Ls([])}unionWith(t){let e=new Vi(Pr.comparator);for(const o of this.fields)e=e.add(o);for(const o of t)e=e.add(o);return new Ls(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ia(this.fields,t.fields,(e,o)=>e.isEqual(o))}}class as{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new as(e)}static fromUint8Array(t){const e=function(o){let s="";for(let l=0;l<o.length;++l)s+=String.fromCharCode(o[l]);return s}(t);return new as(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let o=0;o<t.length;o++)e[o]=t.charCodeAt(o);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ei(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}as.EMPTY_BYTE_STRING=new as("");const cD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sc(i){if($n(!!i),"string"==typeof i){let t=0;const e=cD.exec(i);if($n(!!e),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:io(i.seconds),nanos:io(i.nanos)}}function io(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function d(i){return"string"==typeof i?as.fromBase64String(i):as.fromUint8Array(i)}function c(i){var t,e;return"server_timestamp"===(null===(e=((null===(t=i?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function p(i){const t=i.mapValue.fields.__previous_value__;return c(t)?p(t):t}function y(i){const t=sc(i.mapValue.fields.__local_write_time__.timestampValue);return new Tr(t.seconds,t.nanos)}class b{constructor(t,e,o,s,l,u,g,_){this.databaseId=t,this.appId=e,this.persistenceKey=o,this.host=s,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=g,this.useFetchStreams=_}}class E{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new E("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof E&&t.projectId===this.projectId&&t.database===this.database}}function M(i){return null==i}function P(i){return 0===i&&1/i==-1/0}function B(i){return"number"==typeof i&&Number.isInteger(i)&&!P(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const G={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},te={nullValue:"NULL_VALUE"};function fe(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?c(i)?4:Nh(i)?9007199254740991:10:mn()}function ye(i,t){if(i===t)return!0;const e=fe(i);if(e!==fe(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return y(i).isEqual(y(t));case 3:return function(o,s){if("string"==typeof o.timestampValue&&"string"==typeof s.timestampValue&&o.timestampValue.length===s.timestampValue.length)return o.timestampValue===s.timestampValue;const l=sc(o.timestampValue),u=sc(s.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return s=t,d(i.bytesValue).isEqual(d(s.bytesValue));case 7:return i.referenceValue===t.referenceValue;case 8:return function(o,s){return io(o.geoPointValue.latitude)===io(s.geoPointValue.latitude)&&io(o.geoPointValue.longitude)===io(s.geoPointValue.longitude)}(i,t);case 2:return function(o,s){if("integerValue"in o&&"integerValue"in s)return io(o.integerValue)===io(s.integerValue);if("doubleValue"in o&&"doubleValue"in s){const l=io(o.doubleValue),u=io(s.doubleValue);return l===u?P(l)===P(u):isNaN(l)&&isNaN(u)}return!1}(i,t);case 9:return ia(i.arrayValue.values||[],t.arrayValue.values||[],ye);case 10:return function(o,s){const l=o.mapValue.fields||{},u=s.mapValue.fields||{};if(lb(l)!==lb(u))return!1;for(const g in l)if(l.hasOwnProperty(g)&&(void 0===u[g]||!ye(l[g],u[g])))return!1;return!0}(i,t);default:return mn()}var s}function qe(i,t){return void 0!==(i.values||[]).find(e=>ye(e,t))}function ze(i,t){if(i===t)return 0;const e=fe(i),o=fe(t);if(e!==o)return ei(e,o);switch(e){case 0:case 9007199254740991:return 0;case 1:return ei(i.booleanValue,t.booleanValue);case 2:return function(s,l){const u=io(s.integerValue||s.doubleValue),g=io(l.integerValue||l.doubleValue);return u<g?-1:u>g?1:u===g?0:isNaN(u)?isNaN(g)?0:-1:1}(i,t);case 3:return st(i.timestampValue,t.timestampValue);case 4:return st(y(i),y(t));case 5:return ei(i.stringValue,t.stringValue);case 6:return function(s,l){const u=d(s),g=d(l);return u.compareTo(g)}(i.bytesValue,t.bytesValue);case 7:return function(s,l){const u=s.split("/"),g=l.split("/");for(let _=0;_<u.length&&_<g.length;_++){const w=ei(u[_],g[_]);if(0!==w)return w}return ei(u.length,g.length)}(i.referenceValue,t.referenceValue);case 8:return function(s,l){const u=ei(io(s.latitude),io(l.latitude));return 0!==u?u:ei(io(s.longitude),io(l.longitude))}(i.geoPointValue,t.geoPointValue);case 9:return function(s,l){const u=s.values||[],g=l.values||[];for(let _=0;_<u.length&&_<g.length;++_){const w=ze(u[_],g[_]);if(w)return w}return ei(u.length,g.length)}(i.arrayValue,t.arrayValue);case 10:return function(s,l){if(s===G.mapValue&&l===G.mapValue)return 0;if(s===G.mapValue)return 1;if(l===G.mapValue)return-1;const u=s.fields||{},g=Object.keys(u),_=l.fields||{},w=Object.keys(_);g.sort(),w.sort();for(let T=0;T<g.length&&T<w.length;++T){const D=ei(g[T],w[T]);if(0!==D)return D;const O=ze(u[g[T]],_[w[T]]);if(0!==O)return O}return ei(g.length,w.length)}(i.mapValue,t.mapValue);default:throw mn()}}function st(i,t){if("string"==typeof i&&"string"==typeof t&&i.length===t.length)return ei(i,t);const e=sc(i),o=sc(t),s=ei(e.seconds,o.seconds);return 0!==s?s:ei(e.nanos,o.nanos)}function Vt(i){return tn(i)}function tn(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const s=sc(o);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?d(i.bytesValue).toBase64():"referenceValue"in i?on.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(t=i.geoPointValue).latitude},${t.longitude})`:"arrayValue"in i?function(o){let s="[",l=!0;for(const u of o.values||[])l?l=!1:s+=",",s+=tn(u);return s+"]"}(i.arrayValue):"mapValue"in i?function(o){const s=Object.keys(o.fields||{}).sort();let l="{",u=!0;for(const g of s)u?u=!1:l+=",",l+=`${g}:${tn(o.fields[g])}`;return l+"}"}(i.mapValue):mn();var t}function Rn(i,t){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${t.path.canonicalString()}`}}function Un(i){return!!i&&"integerValue"in i}function li(i){return!!i&&"arrayValue"in i}function Di(i){return!!i&&"nullValue"in i}function Zi(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function vo(i){return!!i&&"mapValue"in i}function gf(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const t={mapValue:{fields:{}}};return Tl(i.mapValue.fields,(e,o)=>t.mapValue.fields[e]=gf(o)),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=gf(i.arrayValue.values[e]);return t}return Object.assign({},i)}function Nh(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function z_(i){return"nullValue"in i?te:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Rn(E.empty(),on.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:mn()}function Lw(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Rn(E.empty(),on.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?G:mn()}function Vw(i,t){const e=ze(i.value,t.value);return 0!==e?e:i.inclusive&&!t.inclusive?-1:!i.inclusive&&t.inclusive?1:0}function uD(i,t){const e=ze(i.value,t.value);return 0!==e?e:i.inclusive&&!t.inclusive?1:!i.inclusive&&t.inclusive?-1:0}class Vs{constructor(t){this.value=t}static empty(){return new Vs({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let o=0;o<t.length-1;++o)if(e=(e.mapValue.fields||{})[t.get(o)],!vo(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=gf(e)}setAll(t){let e=Pr.emptyPath(),o={},s=[];t.forEach((u,g)=>{if(!e.isImmediateParentOf(g)){const _=this.getFieldsMap(e);this.applyChanges(_,o,s),o={},s=[],e=g.popLast()}u?o[g.lastSegment()]=gf(u):s.push(g.lastSegment())});const l=this.getFieldsMap(e);this.applyChanges(l,o,s)}delete(t){const e=this.field(t.popLast());vo(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ye(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let o=0;o<t.length;++o){let s=e.mapValue.fields[t.get(o)];vo(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(o)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,o){Tl(e,(s,l)=>t[s]=l);for(const s of o)delete t[s]}clone(){return new Vs(gf(this.value))}}function dD(i){const t=[];return Tl(i.fields,(e,o)=>{const s=new Pr([e]);if(vo(o)){const l=dD(o.mapValue).fields;if(0===l.length)t.push(s);else for(const u of l)t.push(s.child(u))}else t.push(s)}),new Ls(t)}class Er{constructor(t,e,o,s,l,u){this.key=t,this.documentType=e,this.version=o,this.readTime=s,this.data=l,this.documentState=u}static newInvalidDocument(t){return new Er(t,0,Xn.min(),Xn.min(),Vs.empty(),0)}static newFoundDocument(t,e,o){return new Er(t,1,e,Xn.min(),o,0)}static newNoDocument(t,e){return new Er(t,2,e,Xn.min(),Vs.empty(),0)}static newUnknownDocument(t,e){return new Er(t,3,e,Xn.min(),Vs.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Vs.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Vs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Er&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Er(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yO{constructor(t,e=null,o=[],s=[],l=null,u=null,g=null){this.path=t,this.collectionGroup=e,this.orderBy=o,this.filters=s,this.limit=l,this.startAt=u,this.endAt=g,this.ut=null}}function hD(i,t=null,e=[],o=[],s=null,l=null,u=null){return new yO(i,t,e,o,s,l,u)}function od(i){const t=ln(i);if(null===t.ut){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(o=>{return(s=o).field.canonicalString()+s.op.toString()+Vt(s.value);var s}).join(","),e+="|ob:",e+=t.orderBy.map(o=>{return(s=o).field.canonicalString()+s.dir;var s}).join(","),M(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(o=>Vt(o)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(o=>Vt(o)).join(",")),t.ut=e}return t.ut}function Hw(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let s=0;s<i.orderBy.length;s++)if(!q_(i.orderBy[s],t.orderBy[s]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let s=0;s<i.filters.length;s++)if((e=i.filters[s]).op!==(o=t.filters[s]).op||!e.field.isEqual(o.field)||!ye(e.value,o.value))return!1;var e,o;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!sm(i.startAt,t.startAt)&&sm(i.endAt,t.endAt)}function mf(i){return on.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Bw(i,t){return i.filters.filter(e=>e instanceof Hs&&e.field.isEqual(t))}function pD(i,t,e){let o=te,s=!0;for(const l of Bw(i,t)){let u=te,g=!0;switch(l.op){case"<":case"<=":u=z_(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,g=!1;break;case"!=":case"not-in":u=te}Vw({value:o,inclusive:s},{value:u,inclusive:g})<0&&(o=u,s=g)}if(null!==e)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(t)){const u=e.position[l];Vw({value:o,inclusive:s},{value:u,inclusive:e.inclusive})<0&&(o=u,s=e.inclusive);break}return{value:o,inclusive:s}}function Uw(i,t,e){let o=G,s=!0;for(const l of Bw(i,t)){let u=G,g=!0;switch(l.op){case">=":case">":u=Lw(l.value),g=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,g=!1;break;case"!=":case"not-in":u=G}uD({value:o,inclusive:s},{value:u,inclusive:g})>0&&(o=u,s=g)}if(null!==e)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(t)){const u=e.position[l];uD({value:o,inclusive:s},{value:u,inclusive:e.inclusive})>0&&(o=u,s=e.inclusive);break}return{value:o,inclusive:s}}class Hs extends class{}{constructor(t,e,o){super(),this.field=t,this.op=e,this.value=o}static create(t,e,o){return t.isKeyField()?"in"===e||"not-in"===e?this.ct(t,e,o):new sd(t,e,o):"array-contains"===e?new jw(t,o):"in"===e?new ac(t,o):"not-in"===e?new TT(t,o):"array-contains-any"===e?new G_(t,o):new Hs(t,e,o)}static ct(t,e,o){return"in"===e?new cb(t,o):new ra(t,o)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.at(ze(e,this.value)):null!==e&&fe(this.value)===fe(e)&&this.at(ze(e,this.value))}at(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return mn()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class sd extends Hs{constructor(t,e,o){super(t,e,o),this.key=on.fromName(o.referenceValue)}matches(t){const e=on.comparator(t.key,this.key);return this.at(e)}}class cb extends Hs{constructor(t,e){super(t,"in",e),this.keys=_f(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class ra extends Hs{constructor(t,e){super(t,"not-in",e),this.keys=_f(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function _f(i,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(o=>on.fromName(o.referenceValue))}class jw extends Hs{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return li(e)&&qe(e.arrayValue,this.value)}}class ac extends Hs{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&qe(this.value.arrayValue,e)}}class TT extends Hs{constructor(t,e){super(t,"not-in",e)}matches(t){if(qe(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!qe(this.value.arrayValue,e)}}class G_ extends Hs{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!li(e)||!e.arrayValue.values)&&e.arrayValue.values.some(o=>qe(this.value.arrayValue,o))}}class El{constructor(t,e){this.position=t,this.inclusive=e}}class eu{constructor(t,e="asc"){this.field=t,this.dir=e}}function q_(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}function om(i,t,e){let o=0;for(let s=0;s<i.position.length;s++){const l=t[s],u=i.position[s];if(o=l.field.isKeyField()?on.comparator(on.fromName(u.referenceValue),e.key):ze(u,e.data.field(l.field)),"desc"===l.dir&&(o*=-1),0!==o)break}return o}function sm(i,t){if(null===i)return null===t;if(null===t||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!ye(i.position[e],t.position[e]))return!1;return!0}class Ka{constructor(t,e=null,o=[],s=[],l=null,u="F",g=null,_=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=o,this.filters=s,this.limit=l,this.limitType=u,this.startAt=g,this.endAt=_,this.lt=null,this.ft=null}}function am(i,t,e,o,s,l,u,g){return new Ka(i,t,e,o,s,l,u,g)}function tu(i){return new Ka(i)}function zw(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Gw(i){for(const t of i.filters)if(t.ht())return t.field;return null}function qw(i){return null!==i.collectionGroup}function lm(i){const t=ln(i);if(null===t.lt){t.lt=[];const e=Gw(t),o=zw(t);if(null!==e&&null===o)e.isKeyField()||t.lt.push(new eu(e)),t.lt.push(new eu(Pr.keyField(),"asc"));else{let s=!1;for(const l of t.explicitOrderBy)t.lt.push(l),l.field.isKeyField()&&(s=!0);if(!s){const l=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new eu(Pr.keyField(),l))}}}return t.lt}function xl(i){const t=ln(i);if(!t.ft)if("F"===t.limitType)t.ft=hD(t.path,t.collectionGroup,lm(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const l of lm(t))e.push(new eu(l.field,"desc"===l.dir?"asc":"desc"));const o=t.endAt?new El(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new El(t.startAt.position,t.startAt.inclusive):null;t.ft=hD(t.path,t.collectionGroup,e,t.filters,t.limit,o,s)}return t.ft}function ET(i,t,e){return new Ka(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function Z_(i,t){return Hw(xl(i),xl(t))&&i.limitType===t.limitType}function xT(i){return`${od(xl(i))}|lt:${i.limitType}`}function ST(i){return`Query(target=${function rm(i){let t=i.path.canonicalString();return null!==i.collectionGroup&&(t+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(t+=`, filters: [${i.filters.map(e=>{return`${(o=e).field.canonicalString()} ${o.op} ${Vt(o.value)}`;var o}).join(", ")}]`),M(i.limit)||(t+=", limit: "+i.limit),i.orderBy.length>0&&(t+=`, orderBy: [${i.orderBy.map(e=>{return`${(o=e).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(t+=", startAt: ",t+=i.startAt.inclusive?"b:":"a:",t+=i.startAt.position.map(e=>Vt(e)).join(",")),i.endAt&&(t+=", endAt: ",t+=i.endAt.inclusive?"a:":"b:",t+=i.endAt.position.map(e=>Vt(e)).join(",")),`Target(${t})`}(xl(i))}; limitType=${i.limitType})`}function DT(i,t){return t.isFoundDocument()&&function(e,o){const s=o.key.path;return null!==e.collectionGroup?o.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(s):on.isDocumentKey(e.path)?e.path.isEqual(s):e.path.isImmediateParentOf(s)}(i,t)&&function(e,o){for(const s of e.explicitOrderBy)if(!s.field.isKeyField()&&null===o.data.field(s.field))return!1;return!0}(i,t)&&function(e,o){for(const s of e.filters)if(!s.matches(o))return!1;return!0}(i,t)&&(o=t,!((e=i).startAt&&!function(s,l,u){const g=om(s,l,u);return s.inclusive?g<=0:g<0}(e.startAt,lm(e),o)||e.endAt&&!function(s,l,u){const g=om(s,l,u);return s.inclusive?g>=0:g>0}(e.endAt,lm(e),o)));var e,o}function gD(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function IT(i){return(t,e)=>{let o=!1;for(const s of lm(i)){const l=vO(s,t,e);if(0!==l)return l;o=o||s.field.isKeyField()}return 0}}function vO(i,t,e){const o=i.field.isKeyField()?on.comparator(t.key,e.key):function(s,l,u){const g=l.data.field(s),_=u.data.field(s);return null!==g&&null!==_?ze(g,_):mn()}(i.field,t,e);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return mn()}}function MT(i,t){if(i.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:P(t)?"-0":t}}function Zw(i){return{integerValue:""+i}}function $w(i,t){return B(t)?Zw(t):MT(i,t)}class Ww{constructor(){this._=void 0}}function Kw(i,t,e){return i instanceof $_?function(o,s){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return s&&(l.fields.__previous_value__=s),{mapValue:l}}(e,t):i instanceof ad?ub(i,t):i instanceof Fh?AT(i,t):function(o,s){const l=Jw(o,s),u=kT(l)+kT(o._t);return Un(l)&&Un(o._t)?Zw(u):MT(o.wt,u)}(i,t)}function Yw(i,t,e){return i instanceof ad?ub(i,t):i instanceof Fh?AT(i,t):e}function Jw(i,t){return i instanceof yf?Un(e=t)||(o=e)&&"doubleValue"in o?t:{integerValue:0}:null;var o,e}class $_ extends Ww{}class ad extends Ww{constructor(t){super(),this.elements=t}}function ub(i,t){const e=OT(t);for(const o of i.elements)e.some(s=>ye(s,o))||e.push(o);return{arrayValue:{values:e}}}class Fh extends Ww{constructor(t){super(),this.elements=t}}function AT(i,t){let e=OT(t);for(const o of i.elements)e=e.filter(s=>!ye(s,o));return{arrayValue:{values:e}}}class yf extends Ww{constructor(t,e){super(),this.wt=t,this._t=e}}function kT(i){return io(i.integerValue||i.doubleValue)}function OT(i){return li(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class cm{constructor(t,e){this.field=t,this.transform=e}}class bO{constructor(t,e){this.version=t,this.transformResults=e}}class Kr{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Kr}static exists(t){return new Kr(void 0,t)}static updateTime(t){return new Kr(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function db(i,t){return void 0!==i.updateTime?t.isFoundDocument()&&t.version.isEqual(i.updateTime):void 0===i.exists||i.exists===t.isFoundDocument()}class hb{}function RT(i,t){if(!i.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return i.isNoDocument()?new um(i.key,Kr.none()):new Lh(i.key,i.data,Kr.none());{const e=i.data,o=Vs.empty();let s=new Vi(Pr.comparator);for(let l of t.fields)if(!s.has(l)){let u=e.field(l);null===u&&l.length>1&&(l=l.popLast(),u=e.field(l)),null===u?o.delete(l):o.set(l,u),s=s.add(l)}return new ld(i.key,o,new Ls(s.toArray()),Kr.none())}}function wO(i,t,e){i instanceof Lh?function(o,s,l){const u=o.value.clone(),g=NT(o.fieldTransforms,s,l.transformResults);u.setAll(g),s.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(i,t,e):i instanceof ld?function(o,s,l){if(!db(o.precondition,s))return void s.convertToUnknownDocument(l.version);const u=NT(o.fieldTransforms,s,l.transformResults),g=s.data;g.setAll(PT(o)),g.setAll(u),s.convertToFoundDocument(l.version,g).setHasCommittedMutations()}(i,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function W_(i,t,e,o){return i instanceof Lh?function(s,l,u,g){if(!db(s.precondition,l))return u;const _=s.value.clone(),w=FT(s.fieldTransforms,g,l);return _.setAll(w),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),null}(i,t,e,o):i instanceof ld?function(s,l,u,g){if(!db(s.precondition,l))return u;const _=FT(s.fieldTransforms,g,l),w=l.data;return w.setAll(PT(s)),w.setAll(_),l.convertToFoundDocument(l.version,w).setHasLocalMutations(),null===u?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(T=>T.field))}(i,t,e,o):(u=e,db(i.precondition,l=t)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u);var l,u}function _D(i,t){let e=null;for(const o of i.fieldTransforms){const s=t.data.field(o.field),l=Jw(o.transform,s||null);null!=l&&(null===e&&(e=Vs.empty()),e.set(o.field,l))}return e||null}function Qw(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&(o=t.fieldTransforms,!!(void 0===(e=i.fieldTransforms)&&void 0===o||e&&o&&ia(e,o,(s,l)=>function mD(i,t){return i.field.isEqual(t.field)&&(o=t.transform,(e=i.transform)instanceof ad&&o instanceof ad||e instanceof Fh&&o instanceof Fh?ia(e.elements,o.elements,ye):e instanceof yf&&o instanceof yf?ye(e._t,o._t):e instanceof $_&&o instanceof $_);var e,o}(s,l))))&&(0===i.type?i.value.isEqual(t.value):1!==i.type||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask));var e,o}class Lh extends hb{constructor(t,e,o,s=[]){super(),this.key=t,this.value=e,this.precondition=o,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ld extends hb{constructor(t,e,o,s,l=[]){super(),this.key=t,this.data=e,this.fieldMask=o,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function PT(i){const t=new Map;return i.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const o=i.data.field(e);t.set(e,o)}}),t}function NT(i,t,e){const o=new Map;$n(i.length===e.length);for(let s=0;s<e.length;s++){const l=i[s],u=l.transform,g=t.data.field(l.field);o.set(l.field,Yw(u,g,e[s]))}return o}function FT(i,t,e){const o=new Map;for(const s of i){const l=s.transform,u=e.data.field(s.field);o.set(s.field,Kw(l,u,t))}return o}class um extends hb{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xw extends hb{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class yD{constructor(t){this.count=t}}var Oo,Gi;function vD(i){switch(i){default:return mn();case ot.CANCELLED:case ot.UNKNOWN:case ot.DEADLINE_EXCEEDED:case ot.RESOURCE_EXHAUSTED:case ot.INTERNAL:case ot.UNAVAILABLE:case ot.UNAUTHENTICATED:return!1;case ot.INVALID_ARGUMENT:case ot.NOT_FOUND:case ot.ALREADY_EXISTS:case ot.PERMISSION_DENIED:case ot.FAILED_PRECONDITION:case ot.ABORTED:case ot.OUT_OF_RANGE:case ot.UNIMPLEMENTED:case ot.DATA_LOSS:return!0}}function bD(i){if(void 0===i)return Rr("GRPC error has no .code"),ot.UNKNOWN;switch(i){case Oo.OK:return ot.OK;case Oo.CANCELLED:return ot.CANCELLED;case Oo.UNKNOWN:return ot.UNKNOWN;case Oo.DEADLINE_EXCEEDED:return ot.DEADLINE_EXCEEDED;case Oo.RESOURCE_EXHAUSTED:return ot.RESOURCE_EXHAUSTED;case Oo.INTERNAL:return ot.INTERNAL;case Oo.UNAVAILABLE:return ot.UNAVAILABLE;case Oo.UNAUTHENTICATED:return ot.UNAUTHENTICATED;case Oo.INVALID_ARGUMENT:return ot.INVALID_ARGUMENT;case Oo.NOT_FOUND:return ot.NOT_FOUND;case Oo.ALREADY_EXISTS:return ot.ALREADY_EXISTS;case Oo.PERMISSION_DENIED:return ot.PERMISSION_DENIED;case Oo.FAILED_PRECONDITION:return ot.FAILED_PRECONDITION;case Oo.ABORTED:return ot.ABORTED;case Oo.OUT_OF_RANGE:return ot.OUT_OF_RANGE;case Oo.UNIMPLEMENTED:return ot.UNIMPLEMENTED;case Oo.DATA_LOSS:return ot.DATA_LOSS;default:return mn()}}(Gi=Oo||(Oo={}))[Gi.OK=0]="OK",Gi[Gi.CANCELLED=1]="CANCELLED",Gi[Gi.UNKNOWN=2]="UNKNOWN",Gi[Gi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gi[Gi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gi[Gi.NOT_FOUND=5]="NOT_FOUND",Gi[Gi.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gi[Gi.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gi[Gi.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gi[Gi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gi[Gi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gi[Gi.ABORTED=10]="ABORTED",Gi[Gi.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gi[Gi.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gi[Gi.INTERNAL=13]="INTERNAL",Gi[Gi.UNAVAILABLE=14]="UNAVAILABLE",Gi[Gi.DATA_LOSS=15]="DATA_LOSS";class Vh{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),o=this.inner[e];if(void 0!==o)for(const[s,l]of o)if(this.equalsFn(s,t))return l}has(t){return void 0!==this.get(t)}set(t,e){const o=this.mapKeyFn(t),s=this.inner[o];if(void 0===s)return this.inner[o]=[[t,e]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return void(s[l]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),o=this.inner[e];if(void 0===o)return!1;for(let s=0;s<o.length;s++)if(this.equalsFn(o[s][0],t))return 1===o.length?delete this.inner[e]:o.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Tl(this.inner,(e,o)=>{for(const[s,l]of o)t(s,l)})}isEmpty(){return id(this.inner)}size(){return this.innerSize}}const CO=new cr(on.comparator);function $i(){return CO}const LT=new cr(on.comparator);function pb(...i){let t=LT;for(const e of i)t=t.insert(e.key,e);return t}function wD(i){let t=LT;return i.forEach((e,o)=>t=t.insert(e,o.overlayedDocument)),t}function nu(){return K_()}function CD(){return K_()}function K_(){return new Vh(i=>i.toString(),(i,t)=>i.isEqual(t))}const TD=new cr(on.comparator),Y_=new Vi(on.comparator);function pi(...i){let t=Y_;for(const e of i)t=t.add(e);return t}const TO=new Vi(ei);function fb(){return TO}class gb{constructor(t,e,o,s,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=o,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e){const o=new Map;return o.set(t,J_.createSynthesizedTargetChangeForCurrentChange(t,e)),new gb(Xn.min(),o,fb(),$i(),pi())}}class J_{constructor(t,e,o,s,l){this.resumeToken=t,this.current=e,this.addedDocuments=o,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e){return new J_(as.EMPTY_BYTE_STRING,e,pi(),pi(),pi())}}class VT{constructor(t,e,o,s){this.gt=t,this.removedTargetIds=e,this.key=o,this.yt=s}}class eC{constructor(t,e){this.targetId=t,this.It=e}}class tC{constructor(t,e,o=as.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=o,this.cause=s}}class lc{constructor(){this.Tt=0,this.Et=iu(),this.At=as.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(t){t.approximateByteSize()>0&&(this.bt=!0,this.At=t)}St(){let t=pi(),e=pi(),o=pi();return this.Et.forEach((s,l)=>{switch(l){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:o=o.add(s);break;default:mn()}}),new J_(this.At,this.Rt,t,e,o)}Dt(){this.bt=!1,this.Et=iu()}Ct(t,e){this.bt=!0,this.Et=this.Et.insert(t,e)}xt(t){this.bt=!0,this.Et=this.Et.remove(t)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class EO{constructor(t){this.Mt=t,this.Ft=new Map,this.$t=$i(),this.Bt=HT(),this.Lt=new Vi(ei)}Ut(t){for(const e of t.gt)t.yt&&t.yt.isFoundDocument()?this.qt(e,t.yt):this.Kt(e,t.key,t.yt);for(const e of t.removedTargetIds)this.Kt(e,t.key,t.yt)}Gt(t){this.forEachTarget(t,e=>{const o=this.Qt(e);switch(t.state){case 0:this.jt(e)&&o.Vt(t.resumeToken);break;case 1:o.kt(),o.Pt||o.Dt(),o.Vt(t.resumeToken);break;case 2:o.kt(),o.Pt||this.removeTarget(e);break;case 3:this.jt(e)&&(o.Ot(),o.Vt(t.resumeToken));break;case 4:this.jt(e)&&(this.Wt(e),o.Vt(t.resumeToken));break;default:mn()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ft.forEach((o,s)=>{this.jt(s)&&e(s)})}zt(t){const e=t.targetId,o=t.It.count,s=this.Ht(e);if(s){const l=s.target;if(mf(l))if(0===o){const u=new on(l.path);this.Kt(e,u,Er.newNoDocument(u,Xn.min()))}else $n(1===o);else this.Jt(e)!==o&&(this.Wt(e),this.Lt=this.Lt.add(e))}}Yt(t){const e=new Map;this.Ft.forEach((l,u)=>{const g=this.Ht(u);if(g){if(l.current&&mf(g.target)){const _=new on(g.target.path);null!==this.$t.get(_)||this.Xt(u,_)||this.Kt(u,_,Er.newNoDocument(_,t))}l.vt&&(e.set(u,l.St()),l.Dt())}});let o=pi();this.Bt.forEach((l,u)=>{let g=!0;u.forEachWhile(_=>{const w=this.Ht(_);return!w||2===w.purpose||(g=!1,!1)}),g&&(o=o.add(l))}),this.$t.forEach((l,u)=>u.setReadTime(t));const s=new gb(t,e,this.Lt,this.$t,o);return this.$t=$i(),this.Bt=HT(),this.Lt=new Vi(ei),s}qt(t,e){if(!this.jt(t))return;const o=this.Xt(t,e.key)?2:0;this.Qt(t).Ct(e.key,o),this.$t=this.$t.insert(e.key,e),this.Bt=this.Bt.insert(e.key,this.Zt(e.key).add(t))}Kt(t,e,o){if(!this.jt(t))return;const s=this.Qt(t);this.Xt(t,e)?s.Ct(e,1):s.xt(e),this.Bt=this.Bt.insert(e,this.Zt(e).delete(t)),o&&(this.$t=this.$t.insert(e,o))}removeTarget(t){this.Ft.delete(t)}Jt(t){const e=this.Qt(t).St();return this.Mt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Nt(t){this.Qt(t).Nt()}Qt(t){let e=this.Ft.get(t);return e||(e=new lc,this.Ft.set(t,e)),e}Zt(t){let e=this.Bt.get(t);return e||(e=new Vi(ei),this.Bt=this.Bt.insert(t,e)),e}jt(t){const e=null!==this.Ht(t);return e||Nt("WatchChangeAggregator","Detected inactive target",t),e}Ht(t){const e=this.Ft.get(t);return e&&e.Pt?null:this.Mt.te(t)}Wt(t){this.Ft.set(t,new lc),this.Mt.getRemoteKeysForTarget(t).forEach(e=>{this.Kt(t,e,null)})}Xt(t,e){return this.Mt.getRemoteKeysForTarget(t).has(e)}}function HT(){return new cr(on.comparator)}function iu(){return new cr(on.comparator)}const ru={asc:"ASCENDING",desc:"DESCENDING"},ou={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ED{constructor(t,e){this.databaseId=t,this.dt=e}}function Q_(i,t){return i.dt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function xD(i,t){return i.dt?t.toBase64():t.toUint8Array()}function xO(i,t){return Q_(i,t.toTimestamp())}function Ts(i){return $n(!!i),Xn.fromTimestamp(function(t){const e=sc(t);return new Tr(e.seconds,e.nanos)}(i))}function BT(i,t){return(e=i,new xi(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function nC(i){const t=xi.fromString(i);return $n(RD(t)),t}function Hh(i,t){return BT(i.databaseId,t.path)}function cd(i,t){const e=nC(t);if(e.get(1)!==i.databaseId.projectId)throw new Mt(ot.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new Mt(ot.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new on(UT(e))}function iC(i,t){return BT(i.databaseId,t)}function SD(i){const t=nC(i);return 4===t.length?xi.emptyPath():UT(t)}function X_(i){return new xi(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function UT(i){return $n(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function mb(i,t,e){return{name:Hh(i,t),fields:e.value.mapValue.fields}}function DD(i,t,e){const o=cd(i,t.name),s=Ts(t.updateTime),l=new Vs({mapValue:{fields:t.fields}}),u=Er.newFoundDocument(o,s,l);return e&&u.setHasCommittedMutations(),e?u.setHasCommittedMutations():u}function dm(i,t){let e;if(t instanceof Lh)e={update:mb(i,t.key,t.value)};else if(t instanceof um)e={delete:Hh(i,t.key)};else if(t instanceof ld)e={update:mb(i,t.key,t.data),updateMask:IO(t.fieldMask)};else{if(!(t instanceof Xw))return mn();e={verify:Hh(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(o=>function(s,l){const u=l.transform;if(u instanceof $_)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ad)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Fh)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof yf)return{fieldPath:l.field.canonicalString(),increment:u._t};throw mn()}(0,o))),t.precondition.isNone||(e.currentDocument=void 0!==(s=t.precondition).updateTime?{updateTime:xO(i,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:mn()),e;var s}function ey(i,t){const e=t.currentDocument?void 0!==(s=t.currentDocument).updateTime?Kr.updateTime(Ts(s.updateTime)):void 0!==s.exists?Kr.exists(s.exists):Kr.none():Kr.none(),o=t.updateTransforms?t.updateTransforms.map(s=>function(l,u){let g=null;"setToServerValue"in u?($n("REQUEST_TIME"===u.setToServerValue),g=new $_):"appendMissingElements"in u?g=new ad(u.appendMissingElements.values||[]):"removeAllFromArray"in u?g=new Fh(u.removeAllFromArray.values||[]):"increment"in u?g=new yf(l,u.increment):mn();const _=Pr.fromServerFormat(u.fieldPath);return new cm(_,g)}(i,s)):[];var s;if(t.update){const s=cd(i,t.update.name),l=new Vs({mapValue:{fields:t.update.fields}});if(t.updateMask){const u=new Ls((t.updateMask.fieldPaths||[]).map(w=>Pr.fromServerFormat(w)));return new ld(s,l,u,e,o)}return new Lh(s,l,e,o)}if(t.delete){const s=cd(i,t.delete);return new um(s,e)}if(t.verify){const s=cd(i,t.verify);return new Xw(s,e)}return mn()}function zT(i,t){return{documents:[iC(i,t.path)]}}function GT(i,t){const e={structuredQuery:{}},o=t.path;null!==t.collectionGroup?(e.parent=iC(i,o),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=iC(i,o.popLast()),e.structuredQuery.from=[{collectionId:o.lastSegment()}]);const s=function(_){if(0===_.length)return;const w=_.map(T=>function(D){if("=="===D.op){if(Zi(D.value))return{unaryFilter:{field:ty(D.field),op:"IS_NAN"}};if(Di(D.value))return{unaryFilter:{field:ty(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(Zi(D.value))return{unaryFilter:{field:ty(D.field),op:"IS_NOT_NAN"}};if(Di(D.value))return{unaryFilter:{field:ty(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ty(D.field),op:OD(D.op),value:D.value}}}(T));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(t.filters);s&&(e.structuredQuery.where=s);const l=function(_){if(0!==_.length)return _.map(w=>{return{field:ty((T=w).field),direction:kD(T.dir)};var T})}(t.orderBy);l&&(e.structuredQuery.orderBy=l);const u=(w=t.limit,i.dt||M(w)?w:{value:w});var w,g,_;return null!==u&&(e.structuredQuery.limit=u),t.startAt&&(e.structuredQuery.startAt={before:(g=t.startAt).inclusive,values:g.position}),t.endAt&&(e.structuredQuery.endAt={before:!(_=t.endAt).inclusive,values:_.position}),e}function qT(i){let t=SD(i.parent);const e=i.structuredQuery,o=e.from?e.from.length:0;let s=null;if(o>0){$n(1===o);const T=e.from[0];T.allDescendants?s=T.collectionId:t=t.child(T.collectionId)}let l=[];e.where&&(l=ZT(e.where));let u=[];e.orderBy&&(u=e.orderBy.map(T=>{return new eu(ny((D=T).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let g=null;e.limit&&(g=function(T){let D;return D="object"==typeof T?T.value:T,M(D)?null:D}(e.limit));let _=null;var T;e.startAt&&(_=new El((T=e.startAt).values||[],!!T.before));let w=null;return e.endAt&&(w=function(T){return new El(T.values||[],!T.before)}(e.endAt)),am(t,s,u,l,g,"F",_,w)}function ZT(i){return i?void 0!==i.unaryFilter?[DO(i)]:void 0!==i.fieldFilter?[SO(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(t=>ZT(t)).reduce((t,e)=>t.concat(e)):mn():[]}function kD(i){return ru[i]}function OD(i){return ou[i]}function ty(i){return{fieldPath:i.canonicalString()}}function ny(i){return Pr.fromServerFormat(i.fieldPath)}function SO(i){return Hs.create(ny(i.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mn()}}(i.fieldFilter.op),i.fieldFilter.value)}function DO(i){switch(i.unaryFilter.op){case"IS_NAN":const t=ny(i.unaryFilter.field);return Hs.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=ny(i.unaryFilter.field);return Hs.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ny(i.unaryFilter.field);return Hs.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ny(i.unaryFilter.field);return Hs.create(s,"!=",{nullValue:"NULL_VALUE"});default:return mn()}}function IO(i){const t=[];return i.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function RD(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Ta(i){let t="";for(let e=0;e<i.length;e++)t.length>0&&(t=PD(t)),t=MO(i.get(e),t);return PD(t)}function MO(i,t){let e=t;const o=i.length;for(let s=0;s<o;s++){const l=i.charAt(s);switch(l){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=l}}return e}function PD(i){return i+"\x01\x01"}function ud(i){const t=i.length;if($n(t>=2),2===t)return $n("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),xi.emptyPath();const e=t-2,o=[];let s="";for(let l=0;l<t;){const u=i.indexOf("\x01",l);switch((u<0||u>e)&&mn(),i.charAt(u+1)){case"\x01":const g=i.substring(l,u);let _;0===s.length?_=g:(s+=g,_=s,s=""),o.push(_);break;case"\x10":s+=i.substring(l,u),s+="\0";break;case"\x11":s+=i.substring(l,u+1);break;default:mn()}l=u+2}return new xi(o)}const ND=["userId","batchId"];function rC(i,t){return[i,Ta(t)]}function FD(i,t,e){return[i,Ta(t),e]}const AO={},kO=["prefixPath","collectionGroup","readTime","documentId"],OO=["prefixPath","collectionGroup","documentId"],RO=["collectionGroup","readTime","prefixPath","documentId"],PO=["canonicalId","targetId"],LD=["targetId","path"],VD=["path","targetId"],HD=["collectionId","parent"],BD=["indexId","uid"],UD=["uid","sequenceNumber"],jD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],zD=["indexId","uid","orderedDocumentKey"],GD=["userId","collectionPath","documentId"],qD=["userId","collectionPath","largestBatchId"],$T=["userId","collectionGroup","largestBatchId"],WT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hm=[...WT,"documentOverlays"],ZD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$D=ZD,iy=[...$D,"indexConfiguration","indexState","indexEntries"];class WD extends hf{constructor(t,e){super(),this.ee=t,this.currentSequenceNumber=e}}function Go(i,t){const e=ln(i);return Wa.N(e.ee,t)}class KD{constructor(t,e,o,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=o,this.mutations=s}applyToRemoteDocument(t,e){const o=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(t.key)&&wO(l,t,o[s])}}applyToLocalView(t,e){for(const o of this.baseMutations)o.key.isEqual(t.key)&&(e=W_(o,t,e,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(t.key)&&(e=W_(o,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const o=CD();return this.mutations.forEach(s=>{const l=t.get(s.key),u=l.overlayedDocument;let g=this.applyToLocalView(u,l.mutatedFields);g=e.has(s.key)?null:g;const _=RT(u,g);null!==_&&o.set(s.key,_),u.isValidDocument()||u.convertToNoDocument(Xn.min())}),o}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),pi())}isEqual(t){return this.batchId===t.batchId&&ia(this.mutations,t.mutations,(e,o)=>Qw(e,o))&&ia(this.baseMutations,t.baseMutations,(e,o)=>Qw(e,o))}}class oC{constructor(t,e,o,s){this.batch=t,this.commitVersion=e,this.mutationResults=o,this.docVersions=s}static from(t,e,o){$n(t.mutations.length===o.length);let s=TD;const l=t.mutations;for(let u=0;u<l.length;u++)s=s.insert(l[u].key,o[u].version);return new oC(t,e,o,s)}}class sC{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class pm{constructor(t,e,o,s,l=Xn.min(),u=Xn.min(),g=as.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=o,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=g}withSequenceNumber(t){return new pm(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new pm(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new pm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class qn{constructor(t){this.ne=t}}function YD(i,t){const e=t.key,o={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:aC(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())o.document={name:Hh(s=i.ne,(l=t).key),fields:l.data.value.mapValue.fields,updateTime:Q_(s,l.version.toTimestamp())};else if(t.isNoDocument())o.noDocument={path:e.path.toArray(),readTime:cc(t.version)};else{if(!t.isUnknownDocument())return mn();o.unknownDocument={path:e.path.toArray(),version:cc(t.version)}}var s,l;return o}function aC(i){const t=i.toTimestamp();return[t.seconds,t.nanoseconds]}function cc(i){const t=i.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function fm(i){const t=new Tr(i.seconds,i.nanoseconds);return Xn.fromTimestamp(t)}function dd(i,t){const e=(t.baseMutations||[]).map(l=>ey(i.ne,l));for(let l=0;l<t.mutations.length-1;++l){const u=t.mutations[l];l+1<t.mutations.length&&void 0!==t.mutations[l+1].transform&&(u.updateTransforms=t.mutations[l+1].transform.fieldTransforms,t.mutations.splice(l+1,1),++l)}const o=t.mutations.map(l=>ey(i.ne,l)),s=Tr.fromMillis(t.localWriteTimeMs);return new KD(t.batchId,s,e,o)}function vf(i){const t=fm(i.readTime),e=void 0!==i.lastLimboFreeSnapshotVersion?fm(i.lastLimboFreeSnapshotVersion):Xn.min();let o;var s;return void 0!==i.query.documents?($n(1===(s=i.query).documents.length),o=xl(tu(SD(s.documents[0])))):o=xl(qT(i.query)),new pm(o,i.targetId,0,i.lastListenSequenceNumber,t,e,as.fromBase64String(i.resumeToken))}function ro(i,t){const e=cc(t.snapshotVersion),o=cc(t.lastLimboFreeSnapshotVersion);let s;s=mf(t.target)?zT(i.ne,t.target):GT(i.ne,t.target);const l=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:od(t.target),readTime:e,resumeToken:l,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:s}}function JD(i){const t=qT({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?ET(t,t.limit,"L"):t}function lC(i,t){return new sC(t.largestBatchId,ey(i.ne,t.overlayMutation))}function KT(i,t){const e=t.path.lastSegment();return[i,Ta(t.path.popLast()),e]}function QD(i,t,e,o){return{indexId:i,uid:t.uid||"",sequenceNumber:e,readTime:cc(o.readTime),documentKey:Ta(o.documentKey.path),largestBatchId:o.largestBatchId}}class XD{getBundleMetadata(t,e){return YT(t).get(e).next(o=>{if(o)return{id:(s=o).bundleId,createTime:fm(s.createTime),version:s.version};var s})}saveBundleMetadata(t,e){return YT(t).put({bundleId:(o=e).id,createTime:cc(Ts(o.createTime)),version:o.version});var o}getNamedQuery(t,e){return JT(t).get(e).next(o=>{if(o)return{name:(s=o).name,query:JD(s.bundledQuery),readTime:fm(s.readTime)};var s})}saveNamedQuery(t,e){return JT(t).put({name:(o=e).name,readTime:cc(Ts(o.readTime)),bundledQuery:o.bundledQuery});var o}}function YT(i){return Go(i,"bundles")}function JT(i){return Go(i,"namedQueries")}class _b{constructor(t,e){this.wt=t,this.userId=e}static se(t,e){return new _b(t,e.uid||"")}getOverlay(t,e){return yb(t).get(KT(this.userId,e)).next(o=>o?lC(this.wt,o):null)}getOverlays(t,e){const o=nu();return et.forEach(e,s=>this.getOverlay(t,s).next(l=>{null!==l&&o.set(s,l)})).next(()=>o)}saveOverlays(t,e,o){const s=[];return o.forEach((l,u)=>{const g=new sC(e,u);s.push(this.ie(t,g))}),et.waitFor(s)}removeOverlaysForBatchId(t,e,o){const s=new Set;e.forEach(u=>s.add(Ta(u.getCollectionPath())));const l=[];return s.forEach(u=>{const g=IDBKeyRange.bound([this.userId,u,o],[this.userId,u,o+1],!1,!0);l.push(yb(t).W("collectionPathOverlayIndex",g))}),et.waitFor(l)}getOverlaysForCollection(t,e,o){const s=nu(),l=Ta(e),u=IDBKeyRange.bound([this.userId,l,o],[this.userId,l,Number.POSITIVE_INFINITY],!0);return yb(t).K("collectionPathOverlayIndex",u).next(g=>{for(const _ of g){const w=lC(this.wt,_);s.set(w.getKey(),w)}return s})}getOverlaysForCollectionGroup(t,e,o,s){const l=nu();let u;const g=IDBKeyRange.bound([this.userId,e,o],[this.userId,e,Number.POSITIVE_INFINITY],!0);return yb(t).J({index:"collectionGroupOverlayIndex",range:g},(_,w,T)=>{const D=lC(this.wt,w);l.size()<s||D.largestBatchId===u?(l.set(D.getKey(),D),u=D.largestBatchId):T.done()}).next(()=>l)}ie(t,e){return yb(t).put(function(o,s,l){const[u,g,_]=KT(s,l.mutation.key);return{userId:s,collectionPath:g,documentId:_,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:dm(o.ne,l.mutation)}}(this.wt,this.userId,e))}}function yb(i){return Go(i,"documentOverlays")}class gm{constructor(){}re(t,e){this.oe(t,e),e.ue()}oe(t,e){if("nullValue"in t)this.ce(e,5);else if("booleanValue"in t)this.ce(e,10),e.ae(t.booleanValue?1:0);else if("integerValue"in t)this.ce(e,15),e.ae(io(t.integerValue));else if("doubleValue"in t){const o=io(t.doubleValue);isNaN(o)?this.ce(e,13):(this.ce(e,15),P(o)?e.ae(0):e.ae(o))}else if("timestampValue"in t){const o=t.timestampValue;this.ce(e,20),"string"==typeof o?e.he(o):(e.he(`${o.seconds||""}`),e.ae(o.nanos||0))}else if("stringValue"in t)this.le(t.stringValue,e),this.fe(e);else if("bytesValue"in t)this.ce(e,30),e.de(d(t.bytesValue)),this.fe(e);else if("referenceValue"in t)this._e(t.referenceValue,e);else if("geoPointValue"in t){const o=t.geoPointValue;this.ce(e,45),e.ae(o.latitude||0),e.ae(o.longitude||0)}else"mapValue"in t?Nh(t)?this.ce(e,Number.MAX_SAFE_INTEGER):(this.we(t.mapValue,e),this.fe(e)):"arrayValue"in t?(this.me(t.arrayValue,e),this.fe(e)):mn()}le(t,e){this.ce(e,25),this.ge(t,e)}ge(t,e){e.he(t)}we(t,e){const o=t.fields||{};this.ce(e,55);for(const s of Object.keys(o))this.le(s,e),this.oe(o[s],e)}me(t,e){const o=t.values||[];this.ce(e,50);for(const s of o)this.oe(s,e)}_e(t,e){this.ce(e,37),on.fromName(t).path.forEach(o=>{this.ce(e,60),this.ge(o,e)})}ce(t,e){t.ae(e)}fe(t){t.ae(2)}}function FO(i){if(0===i)return 8;let t=0;return i>>4==0&&(t+=4,i<<=4),i>>6==0&&(t+=2,i<<=2),i>>7==0&&(t+=1),t}function ry(i){const t=64-function(e){let o=0;for(let s=0;s<8;++s){const l=FO(255&e[s]);if(o+=l,8!==l)break}return o}(i);return Math.ceil(t/8)}gm.ye=new gm;class LO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(t){const e=t[Symbol.iterator]();let o=e.next();for(;!o.done;)this.Ie(o.value),o=e.next();this.Te()}Ee(t){const e=t[Symbol.iterator]();let o=e.next();for(;!o.done;)this.Ae(o.value),o=e.next();this.Re()}be(t){for(const e of t){const o=e.charCodeAt(0);if(o<128)this.Ie(o);else if(o<2048)this.Ie(960|o>>>6),this.Ie(128|63&o);else if(e<"\ud800"||"\udbff"<e)this.Ie(480|o>>>12),this.Ie(128|63&o>>>6),this.Ie(128|63&o);else{const s=e.codePointAt(0);this.Ie(240|s>>>18),this.Ie(128|63&s>>>12),this.Ie(128|63&s>>>6),this.Ie(128|63&s)}}this.Te()}Pe(t){for(const e of t){const o=e.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(e<"\ud800"||"\udbff"<e)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const s=e.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}ve(t){const e=this.Ve(t),o=ry(e);this.Se(1+o),this.buffer[this.position++]=255&o;for(let s=e.length-o;s<e.length;++s)this.buffer[this.position++]=255&e[s]}De(t){const e=this.Ve(t),o=ry(e);this.Se(1+o),this.buffer[this.position++]=~(255&o);for(let s=e.length-o;s<e.length;++s)this.buffer[this.position++]=~(255&e[s])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(t){this.Se(t.length),this.buffer.set(t,this.position),this.position+=t.length}Oe(){return this.buffer.slice(0,this.position)}Ve(t){const e=function(s){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,s,!1),new Uint8Array(l.buffer)}(t),o=0!=(128&e[0]);e[0]^=o?255:128;for(let s=1;s<e.length;++s)e[s]^=o?255:0;return e}Ie(t){const e=255&t;0===e?(this.xe(0),this.xe(255)):255===e?(this.xe(255),this.xe(0)):this.xe(e)}Ae(t){const e=255&t;0===e?(this.ke(0),this.ke(255)):255===e?(this.ke(255),this.ke(0)):this.ke(t)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(t){this.Se(1),this.buffer[this.position++]=t}ke(t){this.Se(1),this.buffer[this.position++]=~t}Se(t){const e=t+this.position;if(e<=this.buffer.length)return;let o=2*this.buffer.length;o<e&&(o=e);const s=new Uint8Array(o);s.set(this.buffer),this.buffer=s}}class VO{constructor(t){this.Me=t}de(t){this.Me.pe(t)}he(t){this.Me.be(t)}ae(t){this.Me.ve(t)}ue(){this.Me.Ce()}}class HO{constructor(t){this.Me=t}de(t){this.Me.Ee(t)}he(t){this.Me.Pe(t)}ae(t){this.Me.De(t)}ue(){this.Me.Ne()}}class bf{constructor(){this.Me=new LO,this.Fe=new VO(this.Me),this.$e=new HO(this.Me)}seed(t){this.Me.seed(t)}Be(t){return 0===t?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class wf{constructor(t,e,o,s){this.indexId=t,this.documentKey=e,this.arrayValue=o,this.directionalValue=s}Le(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,o=new Uint8Array(e);return o.set(this.directionalValue,0),e!==t?o.set([0],this.directionalValue.length):++o[o.length-1],new wf(this.indexId,this.documentKey,this.arrayValue,o)}}function Cf(i,t){let e=i.indexId-t.indexId;return 0!==e?e:(e=QT(i.arrayValue,t.arrayValue),0!==e?e:(e=QT(i.directionalValue,t.directionalValue),0!==e?e:on.comparator(i.documentKey,t.documentKey)))}function QT(i,t){for(let e=0;e<i.length&&e<t.length;++e){const o=i[e]-t[e];if(0!==o)return o}return i.length-t.length}class BO{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];for(const e of t.filters){const o=e;o.ht()?this.Ke=o:this.qe.push(o)}}Ge(t){const e=ss(t);if(void 0!==e&&!this.Qe(e))return!1;const o=bl(t);let s=0,l=0;for(;s<o.length&&this.Qe(o[s]);++s);if(s===o.length)return!0;if(void 0!==this.Ke){const u=o[s];if(!this.je(this.Ke,u)||!this.We(this.Ue[l++],u))return!1;++s}for(;s<o.length;++s){const u=o[s];if(l>=this.Ue.length||!this.We(this.Ue[l++],u))return!1}return!0}Qe(t){for(const e of this.qe)if(this.je(e,t))return!0;return!1}je(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}We(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class vb{constructor(){this.ze=new mm}addToCollectionParentIndex(t,e){return this.ze.add(e),et.resolve()}getCollectionParents(t,e){return et.resolve(this.ze.getEntries(e))}addFieldIndex(t,e){return et.resolve()}deleteFieldIndex(t,e){return et.resolve()}getDocumentsMatchingTarget(t,e){return et.resolve(null)}getIndexType(t,e){return et.resolve(0)}getFieldIndexes(t,e){return et.resolve([])}getNextCollectionGroupToUpdate(t){return et.resolve(null)}getMinOffset(t,e){return et.resolve(Ns.min())}getMinOffsetFromCollectionGroup(t,e){return et.resolve(Ns.min())}updateCollectionGroup(t,e,o){return et.resolve()}updateIndexEntries(t,e){return et.resolve()}}class mm{constructor(){this.index={}}add(t){const e=t.lastSegment(),o=t.popLast(),s=this.index[e]||new Vi(xi.comparator),l=!s.has(o);return this.index[e]=s.add(o),l}has(t){const e=t.lastSegment(),o=t.popLast(),s=this.index[e];return s&&s.has(o)}getEntries(t){return(this.index[t]||new Vi(xi.comparator)).toArray()}}const cC=new Uint8Array(0);class UO{constructor(t,e){this.user=t,this.databaseId=e,this.He=new mm,this.Je=new Vh(o=>od(o),(o,s)=>Hw(o,s)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.He.has(e)){const o=e.lastSegment(),s=e.popLast();t.addOnCommittedListener(()=>{this.He.add(e)});const l={collectionId:o,parent:Ta(s)};return eI(t).put(l)}return et.resolve()}getCollectionParents(t,e){const o=[],s=IDBKeyRange.bound([e,""],[V_(e),""],!1,!0);return eI(t).K(s).next(l=>{for(const u of l){if(u.collectionId!==e)break;o.push(ud(u.parent))}return o})}addFieldIndex(t,e){const o=bb(t),s={indexId:(u=e).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var u;delete s.indexId;const l=o.add(s);if(e.indexState){const u=sy(t);return l.next(g=>{u.put(QD(g,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return l.next()}deleteFieldIndex(t,e){const o=bb(t),s=sy(t),l=oy(t);return o.delete(e.indexId).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const o=oy(t);let s=!0;const l=new Map;return et.forEach(this.Ye(e),u=>this.Xe(t,u).next(g=>{s&&(s=!!g),l.set(u,g)})).next(()=>{if(s){let u=pi();const g=[];return et.forEach(l,(_,w)=>{var T;Nt("IndexedDbIndexManager",`Using index ${T=_,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(ft=>`${ft.fieldPath}:${ft.kind}`).join(",")}`} to execute ${od(e)}`);const D=function(ft,dt){const zt=ss(dt);if(void 0===zt)return null;for(const Wt of Bw(ft,zt.fieldPath))switch(Wt.op){case"array-contains-any":return Wt.value.arrayValue.values||[];case"array-contains":return[Wt.value]}return null}(w,_),O=function(ft,dt){const zt=new Map;for(const Wt of bl(dt))for(const Cn of Bw(ft,Wt.fieldPath))switch(Cn.op){case"==":case"in":zt.set(Wt.fieldPath.canonicalString(),Cn.value);break;case"not-in":case"!=":return zt.set(Wt.fieldPath.canonicalString(),Cn.value),Array.from(zt.values())}return null}(w,_),F=function(ft,dt){const zt=[];let Wt=!0;for(const Cn of bl(dt)){const Ln=0===Cn.kind?pD(ft,Cn.fieldPath,ft.startAt):Uw(ft,Cn.fieldPath,ft.startAt);zt.push(Ln.value),Wt&&(Wt=Ln.inclusive)}return new El(zt,Wt)}(w,_),j=function(ft,dt){const zt=[];let Wt=!0;for(const Cn of bl(dt)){const Ln=0===Cn.kind?Uw(ft,Cn.fieldPath,ft.endAt):pD(ft,Cn.fieldPath,ft.endAt);zt.push(Ln.value),Wt&&(Wt=Ln.inclusive)}return new El(zt,Wt)}(w,_),Q=this.Ze(_,w,F),ae=this.Ze(_,w,j),Oe=this.tn(_,w,O),We=this.en(_.indexId,D,Q,F.inclusive,ae,j.inclusive,Oe);return et.forEach(We,ft=>o.j(ft,e.limit).next(dt=>{dt.forEach(zt=>{const Wt=on.fromSegments(zt.documentKey);u.has(Wt)||(u=u.add(Wt),g.push(Wt))})}))}).next(()=>g)}return et.resolve(null)})}Ye(t){let e=this.Je.get(t);return e||(e=[t],this.Je.set(t,e),e)}en(t,e,o,s,l,u,g){const _=(null!=e?e.length:1)*Math.max(o.length,l.length),w=_/(null!=e?e.length:1),T=[];for(let D=0;D<_;++D){const O=e?this.nn(e[D/w]):cC,F=this.sn(t,O,o[D%w],s),j=this.rn(t,O,l[D%w],u),Q=g.map(ae=>this.sn(t,O,ae,!0));T.push(...this.createRange(F,j,Q))}return T}sn(t,e,o,s){const l=new wf(t,on.empty(),e,o);return s?l:l.Le()}rn(t,e,o,s){const l=new wf(t,on.empty(),e,o);return s?l.Le():l}Xe(t,e){const o=new BO(e),s=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,s).next(l=>{let u=null;for(const g of l)o.Ge(g)&&(!u||g.fields.length>u.fields.length)&&(u=g);return u})}getIndexType(t,e){let o=2;return et.forEach(this.Ye(e),s=>this.Xe(t,s).next(l=>{l?0!==o&&l.fields.length<function(u){let g=new Vi(Pr.comparator),_=!1;for(const w of u.filters){const T=w;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?_=!0:g=g.add(T.field))}for(const w of u.orderBy)w.field.isKeyField()||(g=g.add(w.field));return g.size+(_?1:0)}(s)&&(o=1):o=0})).next(()=>o)}on(t,e){const o=new bf;for(const s of bl(t)){const l=e.data.field(s.fieldPath);if(null==l)return null;const u=o.Be(s.kind);gm.ye.re(l,u)}return o.Oe()}nn(t){const e=new bf;return gm.ye.re(t,e.Be(0)),e.Oe()}un(t,e){const o=new bf;return gm.ye.re(Rn(this.databaseId,e),o.Be(function(s){const l=bl(s);return 0===l.length?0:l[l.length-1].kind}(t))),o.Oe()}tn(t,e,o){if(null===o)return[];let s=[];s.push(new bf);let l=0;for(const u of bl(t)){const g=o[l++];for(const _ of s)if(this.cn(e,u.fieldPath)&&li(g))s=this.an(s,u,g);else{const w=_.Be(u.kind);gm.ye.re(g,w)}}return this.hn(s)}Ze(t,e,o){return this.tn(t,e,o.position)}hn(t){const e=[];for(let o=0;o<t.length;++o)e[o]=t[o].Oe();return e}an(t,e,o){const s=[...t],l=[];for(const u of o.arrayValue.values||[])for(const g of s){const _=new bf;_.seed(g.Oe()),gm.ye.re(u,_.Be(e.kind)),l.push(_)}return l}cn(t,e){return!!t.filters.find(o=>o instanceof Hs&&o.field.isEqual(e)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(t,e){const o=bb(t),s=sy(t);return(e?o.K("collectionGroupIndex",IDBKeyRange.bound(e,e)):o.K()).next(l=>{const u=[];return et.forEach(l,g=>s.get([g.indexId,this.uid]).next(_=>{u.push(function(w,T){const D=T?new B_(T.sequenceNumber,new Ns(fm(T.readTime),new on(ud(T.documentKey)),T.largestBatchId)):B_.empty(),O=w.fields.map(([F,j])=>new H_(Pr.fromServerFormat(F),j));return new nm(w.indexId,w.collectionGroup,O,D)}(g,_))})).next(()=>u)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((o,s)=>{const l=o.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==l?l:ei(o.collectionGroup,s.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,o){const s=bb(t),l=sy(t);return this.ln(t).next(u=>s.K("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(g=>et.forEach(g,_=>l.put(QD(_.indexId,this.user,u,o)))))}updateIndexEntries(t,e){const o=new Map;return et.forEach(e,(s,l)=>{const u=o.get(s.collectionGroup);return(u?et.resolve(u):this.getFieldIndexes(t,s.collectionGroup)).next(g=>(o.set(s.collectionGroup,g),et.forEach(g,_=>this.fn(t,s,_).next(w=>{const T=this.dn(l,_);return w.isEqual(T)?et.resolve():this._n(t,l,_,w,T)}))))})}wn(t,e,o,s){return oy(t).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.un(o,e.key),documentKey:e.key.path.toArray()})}mn(t,e,o,s){return oy(t).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.un(o,e.key),e.key.path.toArray()])}fn(t,e,o){const s=oy(t);let l=new Vi(Cf);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.un(o,e)])},(u,g)=>{l=l.add(new wf(o.indexId,e,g.arrayValue,g.directionalValue))}).next(()=>l)}dn(t,e){let o=new Vi(Cf);const s=this.on(e,t);if(null==s)return o;const l=ss(e);if(null!=l){const u=t.data.field(l.fieldPath);if(li(u))for(const g of u.arrayValue.values||[])o=o.add(new wf(e.indexId,t.key,this.nn(g),s))}else o=o.add(new wf(e.indexId,t.key,cC,s));return o}_n(t,e,o,s,l){Nt("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const u=[];return function(g,_,w,T,D){const O=g.getIterator(),F=_.getIterator();let j=Ph(O),Q=Ph(F);for(;j||Q;){let ae=!1,Oe=!1;if(j&&Q){const We=w(j,Q);We<0?Oe=!0:We>0&&(ae=!0)}else null!=j?Oe=!0:ae=!0;ae?(T(Q),Q=Ph(F)):Oe?(D(j),j=Ph(O)):(j=Ph(O),Q=Ph(F))}}(s,l,Cf,g=>{u.push(this.wn(t,e,o,g))},g=>{u.push(this.mn(t,e,o,g))}),et.waitFor(u)}ln(t){let e=1;return sy(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,s,l)=>{l.done(),e=s.sequenceNumber+1}).next(()=>e)}createRange(t,e,o){o=o.sort((u,g)=>Cf(u,g)).filter((u,g,_)=>!g||0!==Cf(u,_[g-1]));const s=[];s.push(t);for(const u of o){const g=Cf(u,t),_=Cf(u,e);if(0===g)s[0]=t.Le();else if(g>0&&_<0)s.push(u),s.push(u.Le());else if(_>0)break}s.push(e);const l=[];for(let u=0;u<s.length;u+=2)l.push(IDBKeyRange.bound([s[u].indexId,this.uid,s[u].arrayValue,s[u].directionalValue,cC,[]],[s[u+1].indexId,this.uid,s[u+1].arrayValue,s[u+1].directionalValue,cC,[]]));return l}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(tI)}getMinOffset(t,e){return et.mapArray(this.Ye(e),o=>this.Xe(t,o).next(s=>s||mn())).next(tI)}}function eI(i){return Go(i,"collectionParents")}function oy(i){return Go(i,"indexEntries")}function bb(i){return Go(i,"indexConfiguration")}function sy(i){return Go(i,"indexState")}function tI(i){$n(0!==i.length);let t=i[0].indexState.offset,e=t.largestBatchId;for(let o=1;o<i.length;o++){const s=i[o].indexState.offset;U_(s,t)<0&&(t=s),e<s.largestBatchId&&(e=s.largestBatchId)}return new Ns(t.readTime,t.documentKey,e)}const XT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ya{constructor(t,e,o){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=o}static withCacheSize(t){return new Ya(t,Ya.DEFAULT_COLLECTION_PERCENTILE,Ya.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function nI(i,t,e){const o=i.store("mutations"),s=i.store("documentMutations"),l=[],u=IDBKeyRange.only(e.batchId);let g=0;const _=o.J({range:u},(T,D,O)=>(g++,O.delete()));l.push(_.next(()=>{$n(1===g)}));const w=[];for(const T of e.mutations){const D=FD(t,T.key.path,e.batchId);l.push(s.delete(D)),w.push(T.key)}return et.waitFor(l).next(()=>w)}function eE(i){if(!i)return 0;let t;if(i.document)t=i.document;else if(i.unknownDocument)t=i.unknownDocument;else{if(!i.noDocument)throw mn();t=i.noDocument}return JSON.stringify(t).length}Ya.DEFAULT_COLLECTION_PERCENTILE=10,Ya.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ya.DEFAULT=new Ya(41943040,Ya.DEFAULT_COLLECTION_PERCENTILE,Ya.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ya.DISABLED=new Ya(-1,0,0);class tE{constructor(t,e,o,s){this.userId=t,this.wt=e,this.indexManager=o,this.referenceDelegate=s,this.gn={}}static se(t,e,o,s){$n(""!==t.uid);const l=t.isAuthenticated()?t.uid:"";return new tE(l,e,o,s)}checkEmpty(t){let e=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _m(t).J({index:"userMutationsIndex",range:o},(s,l,u)=>{e=!1,u.done()}).next(()=>e)}addMutationBatch(t,e,o,s){const l=ym(t),u=_m(t);return u.add({}).next(g=>{$n("number"==typeof g);const _=new KD(g,e,o,s),w=function(O,F,j){const Q=j.baseMutations.map(Oe=>dm(O.ne,Oe)),ae=j.mutations.map(Oe=>dm(O.ne,Oe));return{userId:F,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:Q,mutations:ae}}(this.wt,this.userId,_),T=[];let D=new Vi((O,F)=>ei(O.canonicalString(),F.canonicalString()));for(const O of s){const F=FD(this.userId,O.key.path,g);D=D.add(O.key.path.popLast()),T.push(u.put(w)),T.push(l.put(F,AO))}return D.forEach(O=>{T.push(this.indexManager.addToCollectionParentIndex(t,O))}),t.addOnCommittedListener(()=>{this.gn[g]=_.keys()}),et.waitFor(T).next(()=>_)})}lookupMutationBatch(t,e){return _m(t).get(e).next(o=>o?($n(o.userId===this.userId),dd(this.wt,o)):null)}yn(t,e){return this.gn[e]?et.resolve(this.gn[e]):this.lookupMutationBatch(t,e).next(o=>{if(o){const s=o.keys();return this.gn[e]=s,s}return null})}getNextMutationBatchAfterBatchId(t,e){const o=e+1,s=IDBKeyRange.lowerBound([this.userId,o]);let l=null;return _m(t).J({index:"userMutationsIndex",range:s},(u,g,_)=>{g.userId===this.userId&&($n(g.batchId>=o),l=dd(this.wt,g)),_.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return _m(t).J({index:"userMutationsIndex",range:e,reverse:!0},(s,l,u)=>{o=l.batchId,u.done()}).next(()=>o)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _m(t).K("userMutationsIndex",e).next(o=>o.map(s=>dd(this.wt,s)))}getAllMutationBatchesAffectingDocumentKey(t,e){const o=rC(this.userId,e.path),s=IDBKeyRange.lowerBound(o),l=[];return ym(t).J({range:s},(u,g,_)=>{const[w,T,D]=u,O=ud(T);if(w===this.userId&&e.path.isEqual(O))return _m(t).get(D).next(F=>{if(!F)throw mn();$n(F.userId===this.userId),l.push(dd(this.wt,F))});_.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let o=new Vi(ei);const s=[];return e.forEach(l=>{const u=rC(this.userId,l.path),g=IDBKeyRange.lowerBound(u),_=ym(t).J({range:g},(w,T,D)=>{const[O,F,j]=w,Q=ud(F);O===this.userId&&l.path.isEqual(Q)?o=o.add(j):D.done()});s.push(_)}),et.waitFor(s).next(()=>this.pn(t,o))}getAllMutationBatchesAffectingQuery(t,e){const o=e.path,s=o.length+1,l=rC(this.userId,o),u=IDBKeyRange.lowerBound(l);let g=new Vi(ei);return ym(t).J({range:u},(_,w,T)=>{const[D,O,F]=_,j=ud(O);D===this.userId&&o.isPrefixOf(j)?j.length===s&&(g=g.add(F)):T.done()}).next(()=>this.pn(t,g))}pn(t,e){const o=[],s=[];return e.forEach(l=>{s.push(_m(t).get(l).next(u=>{if(null===u)throw mn();$n(u.userId===this.userId),o.push(dd(this.wt,u))}))}),et.waitFor(s).next(()=>o)}removeMutationBatch(t,e){return nI(t.ee,this.userId,e).next(o=>(t.addOnCommittedListener(()=>{this.In(e.batchId)}),et.forEach(o,s=>this.referenceDelegate.markPotentiallyOrphaned(t,s))))}In(t){delete this.gn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return et.resolve();const o=IDBKeyRange.lowerBound([this.userId]),s=[];return ym(t).J({range:o},(l,u,g)=>{if(l[0]===this.userId){const _=ud(l[1]);s.push(_)}else g.done()}).next(()=>{$n(0===s.length)})})}containsKey(t,e){return jO(t,this.userId,e)}Tn(t){return wb(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function jO(i,t,e){const o=rC(t,e.path),s=o[1],l=IDBKeyRange.lowerBound(o);let u=!1;return ym(i).J({range:l,H:!0},(g,_,w)=>{const[T,D,O]=g;T===t&&D===s&&(u=!0),w.done()}).next(()=>u)}function _m(i){return Go(i,"mutations")}function ym(i){return Go(i,"documentMutations")}function wb(i){return Go(i,"mutationQueues")}class vm{constructor(t){this.En=t}next(){return this.En+=2,this.En}static An(){return new vm(0)}static Rn(){return new vm(-1)}}class zO{constructor(t,e){this.referenceDelegate=t,this.wt=e}allocateTargetId(t){return this.bn(t).next(e=>{const o=new vm(e.highestTargetId);return e.highestTargetId=o.next(),this.Pn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.bn(t).next(e=>Xn.fromTimestamp(new Tr(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.bn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,o){return this.bn(t).next(s=>(s.highestListenSequenceNumber=e,o&&(s.lastRemoteSnapshotVersion=o.toTimestamp()),e>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=e),this.Pn(t,s)))}addTargetData(t,e){return this.vn(t,e).next(()=>this.bn(t).next(o=>(o.targetCount+=1,this.Vn(e,o),this.Pn(t,o))))}updateTargetData(t,e){return this.vn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>bm(t).delete(e.targetId)).next(()=>this.bn(t)).next(o=>($n(o.targetCount>0),o.targetCount-=1,this.Pn(t,o)))}removeTargets(t,e,o){let s=0;const l=[];return bm(t).J((u,g)=>{const _=vf(g);_.sequenceNumber<=e&&null===o.get(_.targetId)&&(s++,l.push(this.removeTargetData(t,_)))}).next(()=>et.waitFor(l)).next(()=>s)}forEachTarget(t,e){return bm(t).J((o,s)=>{const l=vf(s);e(l)})}bn(t){return ay(t).get("targetGlobalKey").next(e=>($n(null!==e),e))}Pn(t,e){return ay(t).put("targetGlobalKey",e)}vn(t,e){return bm(t).put(ro(this.wt,e))}Vn(t,e){let o=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,o=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,o=!0),o}getTargetCount(t){return this.bn(t).next(e=>e.targetCount)}getTargetData(t,e){const o=od(e),s=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let l=null;return bm(t).J({range:s,index:"queryTargetsIndex"},(u,g,_)=>{const w=vf(g);Hw(e,w.target)&&(l=w,_.done())}).next(()=>l)}addMatchingKeys(t,e,o){const s=[],l=Tf(t);return e.forEach(u=>{const g=Ta(u.path);s.push(l.put({targetId:o,path:g})),s.push(this.referenceDelegate.addReference(t,o,u))}),et.waitFor(s)}removeMatchingKeys(t,e,o){const s=Tf(t);return et.forEach(e,l=>{const u=Ta(l.path);return et.waitFor([s.delete([o,u]),this.referenceDelegate.removeReference(t,o,l)])})}removeMatchingKeysForTargetId(t,e){const o=Tf(t),s=IDBKeyRange.bound([e],[e+1],!1,!0);return o.delete(s)}getMatchingKeysForTargetId(t,e){const o=IDBKeyRange.bound([e],[e+1],!1,!0),s=Tf(t);let l=pi();return s.J({range:o,H:!0},(u,g,_)=>{const w=ud(u[1]),T=new on(w);l=l.add(T)}).next(()=>l)}containsKey(t,e){const o=Ta(e.path),s=IDBKeyRange.bound([o],[V_(o)],!1,!0);let l=0;return Tf(t).J({index:"documentTargetsIndex",H:!0,range:s},([u,g],_,w)=>{0!==u&&(l++,w.done())}).next(()=>l>0)}te(t,e){return bm(t).get(e).next(o=>o?vf(o):null)}}function bm(i){return Go(i,"targets")}function ay(i){return Go(i,"targetGlobal")}function Tf(i){return Go(i,"targetDocuments")}function iI([i,t],[e,o]){const s=ei(i,e);return 0===s?ei(t,o):s}class GO{constructor(t){this.Sn=t,this.buffer=new Vi(iI),this.Dn=0}Cn(){return++this.Dn}xn(t){const e=[t,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(e);else{const o=this.buffer.last();iI(e,o)<0&&(this.buffer=this.buffer.delete(o).add(e))}}get maxValue(){return this.buffer.last()[0]}}class qO{constructor(t,e,o){this.garbageCollector=t,this.asyncQueue=e,this.localStore=o,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(t){var e=this;Nt("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,rt.Z)(function*(){e.Nn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(o){Cl(o)?Nt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield wl(o)}yield e.kn(3e5)}))}}class ZO{constructor(t,e){this.On=t,this.params=e}calculateTargetCount(t,e){return this.On.Mn(t).next(o=>Math.floor(e/100*o))}nthSequenceNumber(t,e){if(0===e)return et.resolve(Fs.ot);const o=new GO(e);return this.On.forEachTarget(t,s=>o.xn(s.sequenceNumber)).next(()=>this.On.Fn(t,s=>o.xn(s))).next(()=>o.maxValue)}removeTargets(t,e,o){return this.On.removeTargets(t,e,o)}removeOrphanedDocuments(t,e){return this.On.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Nt("LruGarbageCollector","Garbage collection skipped; disabled"),et.resolve(XT)):this.getCacheSize(t).next(o=>o<this.params.cacheSizeCollectionThreshold?(Nt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XT):this.$n(t,e))}getCacheSize(t){return this.On.getCacheSize(t)}$n(t,e){let o,s,l,u,g,_,w;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Nt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),s=this.params.maximumSequenceNumbersToCollect):s=D,u=Date.now(),this.nthSequenceNumber(t,s))).next(D=>(o=D,g=Date.now(),this.removeTargets(t,o,e))).next(D=>(l=D,_=Date.now(),this.removeOrphanedDocuments(t,o))).next(D=>(w=Date.now(),tb()<=Ys.in.DEBUG&&Nt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-T}ms\n\tDetermined least recently used ${s} in `+(g-u)+`ms\n\tRemoved ${l} targets in `+(_-g)+`ms\n\tRemoved ${D} documents in `+(w-_)+`ms\nTotal Duration: ${w-T}ms`),et.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:D})))}}class rI{constructor(t,e){this.db=t,this.garbageCollector=new ZO(this,e)}Mn(t){const e=this.Bn(t);return this.db.getTargetCache().getTargetCount(t).next(o=>e.next(s=>o+s))}Bn(t){let e=0;return this.Fn(t,o=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Fn(t,e){return this.Ln(t,(o,s)=>e(s))}addReference(t,e,o){return uC(t,o)}removeReference(t,e,o){return uC(t,o)}removeTargets(t,e,o){return this.db.getTargetCache().removeTargets(t,e,o)}markPotentiallyOrphaned(t,e){return uC(t,e)}Un(t,e){return function(o,s){let l=!1;return wb(o).Y(u=>jO(o,u,s).next(g=>(g&&(l=!0),et.resolve(!g)))).next(()=>l)}(t,e)}removeOrphanedDocuments(t,e){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let l=0;return this.Ln(t,(u,g)=>{if(g<=e){const _=this.Un(t,u).next(w=>{if(!w)return l++,o.getEntry(t,u).next(()=>(o.removeEntry(u,Xn.min()),Tf(t).delete([0,Ta(u.path)])))});s.push(_)}}).next(()=>et.waitFor(s)).next(()=>o.apply(t)).next(()=>l)}removeTarget(t,e){const o=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,o)}updateLimboDocument(t,e){return uC(t,e)}Ln(t,e){const o=Tf(t);let s,l=Fs.ot;return o.J({index:"documentTargetsIndex"},([u,g],{path:_,sequenceNumber:w})=>{0===u?(l!==Fs.ot&&e(new on(ud(s)),l),l=w,s=_):l=Fs.ot}).next(()=>{l!==Fs.ot&&e(new on(ud(s)),l)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function uC(i,t){return Tf(i).put((o=i.currentSequenceNumber,{targetId:0,path:Ta(t.path),sequenceNumber:o}));var o}class oI{constructor(){this.changes=new Vh(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Er.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const o=this.changes.get(e);return void 0!==o?et.resolve(o):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class ly{constructor(t){this.wt=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,o){return Ef(t).put(o)}removeEntry(t,e,o){return Ef(t).delete(function(s,l){const u=s.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],aC(l),u[u.length-1]]}(e,o))}updateMetadata(t,e){return this.getMetadata(t).next(o=>(o.byteSize+=e,this.qn(t,o)))}getEntry(t,e){let o=Er.newInvalidDocument(e);return Ef(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cb(e))},(s,l)=>{o=this.Kn(e,l)}).next(()=>o)}Gn(t,e){let o={size:0,document:Er.newInvalidDocument(e)};return Ef(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cb(e))},(s,l)=>{o={document:this.Kn(e,l),size:eE(l)}}).next(()=>o)}getEntries(t,e){let o=$i();return this.Qn(t,e,(s,l)=>{const u=this.Kn(s,l);o=o.insert(s,u)}).next(()=>o)}jn(t,e){let o=$i(),s=new cr(on.comparator);return this.Qn(t,e,(l,u)=>{const g=this.Kn(l,u);o=o.insert(l,g),s=s.insert(l,eE(u))}).next(()=>({documents:o,Wn:s}))}Qn(t,e,o){if(e.isEmpty())return et.resolve();let s=new Vi(cI);e.forEach(_=>s=s.add(_));const l=IDBKeyRange.bound(Cb(s.first()),Cb(s.last())),u=s.getIterator();let g=u.getNext();return Ef(t).J({index:"documentKeyIndex",range:l},(_,w,T)=>{const D=on.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;g&&cI(g,D)<0;)o(g,null),g=u.getNext();g&&g.isEqual(D)&&(o(g,w),g=u.hasNext()?u.getNext():null),g?T.q(Cb(g)):T.done()}).next(()=>{for(;g;)o(g,null),g=u.hasNext()?u.getNext():null})}getAllFromCollection(t,e,o){const s=[e.popLast().toArray(),e.lastSegment(),aC(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],l=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ef(t).K(IDBKeyRange.bound(s,l,!0)).next(u=>{let g=$i();for(const _ of u){const w=this.Kn(on.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);g=g.insert(w.key,w)}return g})}getAllFromCollectionGroup(t,e,o,s){let l=$i();const u=nE(e,o),g=nE(e,Ns.max());return Ef(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,g,!0)},(_,w,T)=>{const D=this.Kn(on.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);l=l.insert(D.key,D),l.size===s&&T.done()}).next(()=>l)}newChangeBuffer(t){return new aI(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return lI(t).get("remoteDocumentGlobalKey").next(e=>($n(!!e),e))}qn(t,e){return lI(t).put("remoteDocumentGlobalKey",e)}Kn(t,e){if(e){const o=function NO(i,t){let e;if(t.document)e=DD(i.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const o=on.fromSegments(t.noDocument.path),s=fm(t.noDocument.readTime);e=Er.newNoDocument(o,s),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return mn();{const o=on.fromSegments(t.unknownDocument.path),s=fm(t.unknownDocument.version);e=Er.newUnknownDocument(o,s)}}return t.readTime&&e.setReadTime(function(o){const s=new Tr(o[0],o[1]);return Xn.fromTimestamp(s)}(t.readTime)),e}(this.wt,e);if(!o.isNoDocument()||!o.version.isEqual(Xn.min()))return o}return Er.newInvalidDocument(t)}}function sI(i){return new ly(i)}class aI extends oI{constructor(t,e){super(),this.zn=t,this.trackRemovals=e,this.Hn=new Vh(o=>o.toString(),(o,s)=>o.isEqual(s))}applyChanges(t){const e=[];let o=0,s=new Vi((l,u)=>ei(l.canonicalString(),u.canonicalString()));return this.changes.forEach((l,u)=>{const g=this.Hn.get(l);if(e.push(this.zn.removeEntry(t,l,g.readTime)),u.isValidDocument()){const _=YD(this.zn.wt,u);s=s.add(l.path.popLast()),o+=eE(_)-g.size,e.push(this.zn.addEntry(t,l,_))}else if(o-=g.size,this.trackRemovals){const _=YD(this.zn.wt,u.convertToNoDocument(Xn.min()));e.push(this.zn.addEntry(t,l,_))}}),s.forEach(l=>{e.push(this.zn.indexManager.addToCollectionParentIndex(t,l))}),e.push(this.zn.updateMetadata(t,o)),et.waitFor(e)}getFromCache(t,e){return this.zn.Gn(t,e).next(o=>(this.Hn.set(e,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(t,e){return this.zn.jn(t,e).next(({documents:o,Wn:s})=>(s.forEach((l,u)=>{this.Hn.set(l,{size:u,readTime:o.get(l).readTime})}),o))}}function lI(i){return Go(i,"remoteDocumentGlobal")}function Ef(i){return Go(i,"remoteDocumentsV14")}function Cb(i){const t=i.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function nE(i,t){const e=t.documentKey.path.toArray();return[i,aC(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function cI(i,t){const e=i.path.toArray(),o=t.path.toArray();let s=0;for(let l=0;l<e.length-2&&l<o.length-2;++l)if(s=ei(e[l],o[l]),s)return s;return s=ei(e.length,o.length),s||(s=ei(e[e.length-2],o[o.length-2]),s||ei(e[e.length-1],o[o.length-1]))}class iE{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class uI{constructor(t,e,o,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=o,this.indexManager=s}getDocument(t,e){let o=null;return this.documentOverlayCache.getOverlay(t,e).next(s=>(o=s,this.getBaseDocument(t,e,o))).next(s=>(null!==o&&W_(o.mutation,s,Ls.empty(),Tr.now()),s))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(o=>this.getLocalViewOfDocuments(t,o,pi()).next(()=>o))}getLocalViewOfDocuments(t,e,o=pi()){const s=nu();return this.populateOverlays(t,s,e).next(()=>this.computeViews(t,e,s,o).next(l=>{let u=pb();return l.forEach((g,_)=>{u=u.insert(g,_.overlayedDocument)}),u}))}getOverlayedDocuments(t,e){const o=nu();return this.populateOverlays(t,o,e).next(()=>this.computeViews(t,e,o,pi()))}populateOverlays(t,e,o){const s=[];return o.forEach(l=>{e.has(l)||s.push(l)}),this.documentOverlayCache.getOverlays(t,s).next(l=>{l.forEach((u,g)=>{e.set(u,g)})})}computeViews(t,e,o,s){let l=$i();const u=K_(),g=K_();return e.forEach((_,w)=>{const T=o.get(w.key);s.has(w.key)&&(void 0===T||T.mutation instanceof ld)?l=l.insert(w.key,w):void 0!==T&&(u.set(w.key,T.mutation.getFieldMask()),W_(T.mutation,w,T.mutation.getFieldMask(),Tr.now()))}),this.recalculateAndSaveOverlays(t,l).next(_=>(_.forEach((w,T)=>u.set(w,T)),e.forEach((w,T)=>{var D;return g.set(w,new iE(T,null!==(D=u.get(w))&&void 0!==D?D:null))}),g))}recalculateAndSaveOverlays(t,e){const o=K_();let s=new cr((u,g)=>u-g),l=pi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(u=>{for(const g of u)g.keys().forEach(_=>{const w=e.get(_);if(null===w)return;let T=o.get(_)||Ls.empty();T=g.applyToLocalView(w,T),o.set(_,T);const D=(s.get(g.batchId)||pi()).add(_);s=s.insert(g.batchId,D)})}).next(()=>{const u=[],g=s.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),w=_.key,T=_.value,D=CD();T.forEach(O=>{if(!l.has(O)){const F=RT(e.get(O),o.get(O));null!==F&&D.set(O,F),l=l.add(O)}}),u.push(this.documentOverlayCache.saveOverlays(t,w,D))}return et.waitFor(u)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(o=>this.recalculateAndSaveOverlays(t,o))}getDocumentsMatchingQuery(t,e,o){return on.isDocumentKey((s=e).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):qw(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,o):this.getDocumentsMatchingCollectionQuery(t,e,o);var s}getNextDocuments(t,e,o,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,o,s).next(l=>{const u=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,o.largestBatchId,s-l.size):et.resolve(nu());let g=-1,_=l;return u.next(w=>et.forEach(w,(T,D)=>(g<D.largestBatchId&&(g=D.largestBatchId),l.get(T)?et.resolve():this.getBaseDocument(t,T,D).next(O=>{_=_.insert(T,O)}))).next(()=>this.populateOverlays(t,w,l)).next(()=>this.computeViews(t,_,w,pi())).next(T=>({batchId:g,changes:wD(T)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new on(e)).next(o=>{let s=pb();return o.isFoundDocument()&&(s=s.insert(o.key,o)),s})}getDocumentsMatchingCollectionGroupQuery(t,e,o){const s=e.collectionGroup;let l=pb();return this.indexManager.getCollectionParents(t,s).next(u=>et.forEach(u,g=>{const _=(w=e,T=g.child(s),new Ka(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,T;return this.getDocumentsMatchingCollectionQuery(t,_,o).next(w=>{w.forEach((T,D)=>{l=l.insert(T,D)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(t,e,o){let s;return this.remoteDocumentCache.getAllFromCollection(t,e.path,o).next(l=>(s=l,this.documentOverlayCache.getOverlaysForCollection(t,e.path,o.largestBatchId))).next(l=>{l.forEach((g,_)=>{const w=_.getKey();null===s.get(w)&&(s=s.insert(w,Er.newInvalidDocument(w)))});let u=pb();return s.forEach((g,_)=>{const w=l.get(g);void 0!==w&&W_(w.mutation,_,Ls.empty(),Tr.now()),DT(e,_)&&(u=u.insert(g,_))}),u})}getBaseDocument(t,e,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(t,e):et.resolve(Er.newInvalidDocument(e))}}class dI{constructor(t){this.wt=t,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(t,e){return et.resolve(this.Jn.get(e))}saveBundleMetadata(t,e){var o;return this.Jn.set(e.id,{id:(o=e).id,version:o.version,createTime:Ts(o.createTime)}),et.resolve()}getNamedQuery(t,e){return et.resolve(this.Yn.get(e))}saveNamedQuery(t,e){return this.Yn.set(e.name,{name:(o=e).name,query:JD(o.bundledQuery),readTime:Ts(o.readTime)}),et.resolve();var o}}class hI{constructor(){this.overlays=new cr(on.comparator),this.Xn=new Map}getOverlay(t,e){return et.resolve(this.overlays.get(e))}getOverlays(t,e){const o=nu();return et.forEach(e,s=>this.getOverlay(t,s).next(l=>{null!==l&&o.set(s,l)})).next(()=>o)}saveOverlays(t,e,o){return o.forEach((s,l)=>{this.ie(t,e,l)}),et.resolve()}removeOverlaysForBatchId(t,e,o){const s=this.Xn.get(o);return void 0!==s&&(s.forEach(l=>this.overlays=this.overlays.remove(l)),this.Xn.delete(o)),et.resolve()}getOverlaysForCollection(t,e,o){const s=nu(),l=e.length+1,u=new on(e.child("")),g=this.overlays.getIteratorFrom(u);for(;g.hasNext();){const _=g.getNext().value,w=_.getKey();if(!e.isPrefixOf(w.path))break;w.path.length===l&&_.largestBatchId>o&&s.set(_.getKey(),_)}return et.resolve(s)}getOverlaysForCollectionGroup(t,e,o,s){let l=new cr((w,T)=>w-T);const u=this.overlays.getIterator();for(;u.hasNext();){const w=u.getNext().value;if(w.getKey().getCollectionGroup()===e&&w.largestBatchId>o){let T=l.get(w.largestBatchId);null===T&&(T=nu(),l=l.insert(w.largestBatchId,T)),T.set(w.getKey(),w)}}const g=nu(),_=l.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,T)=>g.set(w,T)),!(g.size()>=s)););return et.resolve(g)}ie(t,e,o){const s=this.overlays.get(o.key);if(null!==s){const u=this.Xn.get(s.largestBatchId).delete(o.key);this.Xn.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(o.key,new sC(e,o));let l=this.Xn.get(e);void 0===l&&(l=pi(),this.Xn.set(e,l)),this.Xn.set(e,l.add(o.key))}}class rE{constructor(){this.Zn=new Vi(Es.ts),this.es=new Vi(Es.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(t,e){const o=new Es(t,e);this.Zn=this.Zn.add(o),this.es=this.es.add(o)}ss(t,e){t.forEach(o=>this.addReference(o,e))}removeReference(t,e){this.rs(new Es(t,e))}os(t,e){t.forEach(o=>this.removeReference(o,e))}us(t){const e=new on(new xi([])),o=new Es(e,t),s=new Es(e,t+1),l=[];return this.es.forEachInRange([o,s],u=>{this.rs(u),l.push(u.key)}),l}cs(){this.Zn.forEach(t=>this.rs(t))}rs(t){this.Zn=this.Zn.delete(t),this.es=this.es.delete(t)}hs(t){const e=new on(new xi([])),o=new Es(e,t),s=new Es(e,t+1);let l=pi();return this.es.forEachInRange([o,s],u=>{l=l.add(u.key)}),l}containsKey(t){const e=new Es(t,0),o=this.Zn.firstAfterOrEqual(e);return null!==o&&t.isEqual(o.key)}}class Es{constructor(t,e){this.key=t,this.ls=e}static ts(t,e){return on.comparator(t.key,e.key)||ei(t.ls,e.ls)}static ns(t,e){return ei(t.ls,e.ls)||on.comparator(t.key,e.key)}}class $O{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.fs=1,this.ds=new Vi(Es.ts)}checkEmpty(t){return et.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,o,s){const l=this.fs;this.fs++;const u=new KD(l,e,o,s);this.mutationQueue.push(u);for(const g of s)this.ds=this.ds.add(new Es(g.key,l)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return et.resolve(u)}lookupMutationBatch(t,e){return et.resolve(this._s(e))}getNextMutationBatchAfterBatchId(t,e){const s=this.ws(e+1),l=s<0?0:s;return et.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return et.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(t){return et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const o=new Es(e,0),s=new Es(e,Number.POSITIVE_INFINITY),l=[];return this.ds.forEachInRange([o,s],u=>{const g=this._s(u.ls);l.push(g)}),et.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let o=new Vi(ei);return e.forEach(s=>{const l=new Es(s,0),u=new Es(s,Number.POSITIVE_INFINITY);this.ds.forEachInRange([l,u],g=>{o=o.add(g.ls)})}),et.resolve(this.gs(o))}getAllMutationBatchesAffectingQuery(t,e){const o=e.path,s=o.length+1;let l=o;on.isDocumentKey(l)||(l=l.child(""));const u=new Es(new on(l),0);let g=new Vi(ei);return this.ds.forEachWhile(_=>{const w=_.key.path;return!!o.isPrefixOf(w)&&(w.length===s&&(g=g.add(_.ls)),!0)},u),et.resolve(this.gs(g))}gs(t){const e=[];return t.forEach(o=>{const s=this._s(o);null!==s&&e.push(s)}),e}removeMutationBatch(t,e){$n(0===this.ys(e.batchId,"removed")),this.mutationQueue.shift();let o=this.ds;return et.forEach(e.mutations,s=>{const l=new Es(s.key,e.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.ds=o})}In(t){}containsKey(t,e){const o=new Es(e,0),s=this.ds.firstAfterOrEqual(o);return et.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return et.resolve()}ys(t,e){return this.ws(t)}ws(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}_s(t){const e=this.ws(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class oE{constructor(t){this.ps=t,this.docs=new cr(on.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const o=e.key,s=this.docs.get(o),l=s?s.size:0,u=this.ps(e);return this.docs=this.docs.insert(o,{document:e.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const o=this.docs.get(e);return et.resolve(o?o.document.mutableCopy():Er.newInvalidDocument(e))}getEntries(t,e){let o=$i();return e.forEach(s=>{const l=this.docs.get(s);o=o.insert(s,l?l.document.mutableCopy():Er.newInvalidDocument(s))}),et.resolve(o)}getAllFromCollection(t,e,o){let s=$i();const l=new on(e.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:g,value:{document:_}}=u.getNext();if(!e.isPrefixOf(g.path))break;g.path.length>e.length+1||U_(ic(_),o)<=0||(s=s.insert(_.key,_.mutableCopy()))}return et.resolve(s)}getAllFromCollectionGroup(t,e,o,s){mn()}Is(t,e){return et.forEach(this.docs,o=>e(o))}newChangeBuffer(t){return new WO(this)}getSize(t){return et.resolve(this.size)}}class WO extends oI{constructor(t){super(),this.zn=t}applyChanges(t){const e=[];return this.changes.forEach((o,s)=>{s.isValidDocument()?e.push(this.zn.addEntry(t,s)):this.zn.removeEntry(o)}),et.waitFor(e)}getFromCache(t,e){return this.zn.getEntry(t,e)}getAllFromCache(t,e){return this.zn.getEntries(t,e)}}class pI{constructor(t){this.persistence=t,this.Ts=new Vh(e=>od(e),Hw),this.lastRemoteSnapshotVersion=Xn.min(),this.highestTargetId=0,this.Es=0,this.As=new rE,this.targetCount=0,this.Rs=vm.An()}forEachTarget(t,e){return this.Ts.forEach((o,s)=>e(s)),et.resolve()}getLastRemoteSnapshotVersion(t){return et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return et.resolve(this.Es)}allocateTargetId(t){return this.highestTargetId=this.Rs.next(),et.resolve(this.highestTargetId)}setTargetsMetadata(t,e,o){return o&&(this.lastRemoteSnapshotVersion=o),e>this.Es&&(this.Es=e),et.resolve()}vn(t){this.Ts.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Rs=new vm(e),this.highestTargetId=e),t.sequenceNumber>this.Es&&(this.Es=t.sequenceNumber)}addTargetData(t,e){return this.vn(e),this.targetCount+=1,et.resolve()}updateTargetData(t,e){return this.vn(e),et.resolve()}removeTargetData(t,e){return this.Ts.delete(e.target),this.As.us(e.targetId),this.targetCount-=1,et.resolve()}removeTargets(t,e,o){let s=0;const l=[];return this.Ts.forEach((u,g)=>{g.sequenceNumber<=e&&null===o.get(g.targetId)&&(this.Ts.delete(u),l.push(this.removeMatchingKeysForTargetId(t,g.targetId)),s++)}),et.waitFor(l).next(()=>s)}getTargetCount(t){return et.resolve(this.targetCount)}getTargetData(t,e){const o=this.Ts.get(e)||null;return et.resolve(o)}addMatchingKeys(t,e,o){return this.As.ss(e,o),et.resolve()}removeMatchingKeys(t,e,o){this.As.os(e,o);const s=this.persistence.referenceDelegate,l=[];return s&&e.forEach(u=>{l.push(s.markPotentiallyOrphaned(t,u))}),et.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.As.us(e),et.resolve()}getMatchingKeysForTargetId(t,e){const o=this.As.hs(e);return et.resolve(o)}containsKey(t,e){return et.resolve(this.As.containsKey(e))}}class fI{constructor(t,e){this.bs={},this.overlays={},this.Ps=new Fs(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new pI(this),this.indexManager=new vb,this.remoteDocumentCache=new oE(o=>this.referenceDelegate.Ss(o)),this.wt=new qn(e),this.Ds=new dI(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new hI,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let o=this.bs[t.toKey()];return o||(o=new $O(e,this.referenceDelegate),this.bs[t.toKey()]=o),o}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(t,e,o){Nt("MemoryPersistence","Starting transaction:",t);const s=new KO(this.Ps.next());return this.referenceDelegate.Cs(),o(s).next(l=>this.referenceDelegate.xs(s).next(()=>l)).toPromise().then(l=>(s.raiseOnCommittedEvent(),l))}Ns(t,e){return et.or(Object.values(this.bs).map(o=>()=>o.containsKey(t,e)))}}class KO extends hf{constructor(t){super(),this.currentSequenceNumber=t}}class dC{constructor(t){this.persistence=t,this.ks=new rE,this.Os=null}static Ms(t){return new dC(t)}get Fs(){if(this.Os)return this.Os;throw mn()}addReference(t,e,o){return this.ks.addReference(o,e),this.Fs.delete(o.toString()),et.resolve()}removeReference(t,e,o){return this.ks.removeReference(o,e),this.Fs.add(o.toString()),et.resolve()}markPotentiallyOrphaned(t,e){return this.Fs.add(e.toString()),et.resolve()}removeTarget(t,e){this.ks.us(e.targetId).forEach(s=>this.Fs.add(s.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,e.targetId).next(s=>{s.forEach(l=>this.Fs.add(l.toString()))}).next(()=>o.removeTargetData(t,e))}Cs(){this.Os=new Set}xs(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return et.forEach(this.Fs,o=>{const s=on.fromPath(o);return this.$s(t,s).next(l=>{l||e.removeEntry(s,Xn.min())})}).next(()=>(this.Os=null,e.apply(t)))}updateLimboDocument(t,e){return this.$s(t,e).next(o=>{o?this.Fs.delete(e.toString()):this.Fs.add(e.toString())})}Ss(t){return 0}$s(t,e){return et.or([()=>et.resolve(this.ks.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ns(t,e)])}}class YO{constructor(t){this.wt=t}O(t,e,o,s){const l=new im("createOrUpgrade",e);var g;o<1&&s>=1&&(t.createObjectStore("owner"),(g=t).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ND,{unique:!0}),g.createObjectStore("documentMutations"),gI(t),function(g){g.createObjectStore("remoteDocuments")}(t));let u=et.resolve();return o<3&&s>=3&&(0!==o&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(t),gI(t)),u=u.next(()=>function(g){const _=g.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Xn.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(l))),o<4&&s>=4&&(0!==o&&(u=u.next(()=>function(g,_){return _.store("mutations").K().next(w=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ND,{unique:!0});const T=_.store("mutations"),D=w.map(O=>T.put(O));return et.waitFor(D)})}(t,l))),u=u.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),o<5&&s>=5&&(u=u.next(()=>this.Bs(l))),o<6&&s>=6&&(u=u.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(t),this.Ls(l)))),o<7&&s>=7&&(u=u.next(()=>this.Us(l))),o<8&&s>=8&&(u=u.next(()=>this.qs(t,l))),o<9&&s>=9&&(u=u.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(t)})),o<10&&s>=10&&(u=u.next(()=>this.Ks(l))),o<11&&s>=11&&(u=u.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),o<12&&s>=12&&(u=u.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:GD});_.createIndex("collectionPathOverlayIndex",qD,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",$T,{unique:!1})}(t)})),o<13&&s>=13&&(u=u.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:kO});_.createIndex("documentKeyIndex",OO),_.createIndex("collectionGroupIndex",RO)}(t)).next(()=>this.Gs(t,l)).next(()=>t.deleteObjectStore("remoteDocuments"))),o<14&&s>=14&&(u=u.next(()=>this.Qs(t,l))),o<15&&s>=15&&(u=u.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:BD}).createIndex("sequenceNumberIndex",UD,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:jD}).createIndex("documentKeyIndex",zD,{unique:!1})}(t))),u}Ls(t){let e=0;return t.store("remoteDocuments").J((o,s)=>{e+=eE(s)}).next(()=>{const o={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Bs(t){const e=t.store("mutationQueues"),o=t.store("mutations");return e.K().next(s=>et.forEach(s,l=>{const u=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return o.K("userMutationsIndex",u).next(g=>et.forEach(g,_=>{$n(_.userId===l.userId);const w=dd(this.wt,_);return nI(t,l.userId,w).next(()=>{})}))}))}Us(t){const e=t.store("targetDocuments"),o=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(s=>{const l=[];return o.J((u,g)=>{const _=new xi(u),w=[0,Ta(_)];l.push(e.get(w).next(T=>T?et.resolve():e.put({targetId:0,path:Ta(_),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>et.waitFor(l))})}qs(t,e){t.createObjectStore("collectionParents",{keyPath:HD});const o=e.store("collectionParents"),s=new mm,l=u=>{if(s.add(u)){const g=u.lastSegment(),_=u.popLast();return o.put({collectionId:g,parent:Ta(_)})}};return e.store("remoteDocuments").J({H:!0},(u,g)=>{const _=new xi(u);return l(_.popLast())}).next(()=>e.store("documentMutations").J({H:!0},([u,g,_],w)=>{const T=ud(g);return l(T.popLast())}))}Ks(t){const e=t.store("targets");return e.J((o,s)=>{const l=vf(s),u=ro(this.wt,l);return e.put(u)})}Gs(t,e){const o=e.store("remoteDocuments"),s=[];return o.J((l,u)=>{const g=e.store("remoteDocumentsV14"),_=(w=u,w.document?new on(xi.fromString(w.document.name).popFirst(5)):w.noDocument?on.fromSegments(w.noDocument.path):w.unknownDocument?on.fromSegments(w.unknownDocument.path):mn()).path.toArray();var w;const T={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};s.push(g.put(T))}).next(()=>et.waitFor(s))}Qs(t,e){const o=e.store("mutations"),s=sI(this.wt),l=new fI(dC.Ms,this.wt.ne);return o.K().next(u=>{const g=new Map;return u.forEach(_=>{var w;let T=null!==(w=g.get(_.userId))&&void 0!==w?w:pi();dd(this.wt,_).keys().forEach(D=>T=T.add(D)),g.set(_.userId,T)}),et.forEach(g,(_,w)=>{const T=new zo(w),D=_b.se(this.wt,T),O=l.getIndexManager(T),F=tE.se(T,this.wt,O,l.referenceDelegate);return new uI(s,F,D,O).recalculateAndSaveOverlaysForDocumentKeys(new WD(e,Fs.ot),_).next()})})}}function gI(i){i.createObjectStore("targetDocuments",{keyPath:LD}).createIndex("documentTargetsIndex",VD,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",PO,{unique:!0}),i.createObjectStore("targetGlobal")}const sE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class aE{constructor(t,e,o,s,l,u,g,_,w,T,D=14){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=o,this.js=l,this.window=u,this.document=g,this.Ws=w,this.zs=T,this.Hs=D,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=O=>Promise.resolve(),!aE.V())throw new Mt(ot.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rI(this,s),this.ei=e+"main",this.wt=new qn(_),this.ni=new Wa(this.ei,this.Hs,new YO(this.wt)),this.Vs=new zO(this.referenceDelegate,this.wt),this.remoteDocumentCache=sI(this.wt),this.Ds=new XD,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===T&&Rr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Mt(ot.FAILED_PRECONDITION,sE);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Vs.getHighestSequenceNumber(t))}).then(t=>{this.Ps=new Fs(t,this.Ws)}).then(()=>{this.vs=!0}).catch(t=>(this.ni&&this.ni.close(),Promise.reject(t)))}ci(t){var e=this;return this.ti=function(){var o=(0,rt.Z)(function*(s){if(e.started)return t(s)});return function(s){return o.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ni.F(function(){var e=(0,rt.Z)(function*(o){null===o.newVersion&&(yield t())});return function(o){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.js.enqueueAndForget((0,rt.Z)(function*(){e.started&&(yield e.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Eb(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(t).next(e=>{e||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(t)).next(e=>this.isPrimary&&!e?this.li(t).next(()=>!1):!!e&&this.fi(t).next(()=>!0))).catch(t=>{if(Cl(t))return Nt("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Nt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.js.enqueueRetryable(()=>this.ti(t)),this.isPrimary=t})}ai(t){return Tb(t).get("owner").next(e=>et.resolve(this.di(e)))}_i(t){return Eb(t).delete(this.clientId)}wi(){var t=this;return(0,rt.Z)(function*(){if(t.isPrimary&&!t.mi(t.Zs,18e5)){t.Zs=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const s=Go(o,"clientMetadata");return s.K().next(l=>{const u=t.gi(l,18e5),g=l.filter(_=>-1===u.indexOf(_));return et.forEach(g,_=>s.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(t.si)for(const o of e)t.si.removeItem(t.yi(o.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(t){return!!t&&t.ownerId===this.clientId}hi(t){return this.zs?et.resolve(!0):Tb(t).get("owner").next(e=>{if(null!==e&&this.mi(e.leaseTimestampMs,5e3)&&!this.pi(e.ownerId)){if(this.di(e)&&this.networkEnabled)return!0;if(!this.di(e)){if(!e.allowTabSynchronization)throw new Mt(ot.FAILED_PRECONDITION,sE);return!1}}return!(!this.networkEnabled||!this.inForeground)||Eb(t).K().next(o=>void 0===this.gi(o,5e3).find(s=>{if(this.clientId!==s.clientId){const u=!this.inForeground&&s.inForeground,g=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||u&&g)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Nt("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,rt.Z)(function*(){t.vs=!1,t.Ii(),t.Xs&&(t.Xs.cancel(),t.Xs=null),t.Ti(),t.Ei(),yield t.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const o=new WD(e,Fs.ot);return t.li(o).next(()=>t._i(o))}),t.ni.close(),t.Ai()})()}gi(t,e){return t.filter(o=>this.mi(o.updateTimeMs,e)&&!this.pi(o.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",t=>Eb(t).K().next(e=>this.gi(e,18e5).map(o=>o.clientId)))}get started(){return this.vs}getMutationQueue(t,e){return tE.se(t,this.wt,e,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new UO(t,this.wt.ne.databaseId)}getDocumentOverlayCache(t){return _b.se(this.wt,t)}getBundleCache(){return this.Ds}runTransaction(t,e,o){Nt("IndexedDbPersistence","Starting transaction:",t);const s="readonly"===e?"readonly":"readwrite",l=15===(u=this.Hs)?iy:14===u?$D:13===u?ZD:12===u?hm:11===u?WT:void mn();var u;let g;return this.ni.runTransaction(t,s,l,_=>(g=new WD(_,this.Ps?this.Ps.next():Fs.ot),"readwrite-primary"===e?this.ai(g).next(w=>!!w||this.hi(g)).next(w=>{if(!w)throw Rr(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Mt(ot.FAILED_PRECONDITION,ob);return o(g)}).next(w=>this.fi(g).next(()=>w)):this.bi(g).next(()=>o(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}bi(t){return Tb(t).get("owner").next(e=>{if(null!==e&&this.mi(e.leaseTimestampMs,5e3)&&!this.pi(e.ownerId)&&!this.di(e)&&!(this.zs||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Mt(ot.FAILED_PRECONDITION,sE)})}fi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Tb(t).put("owner",e)}static V(){return Wa.V()}li(t){const e=Tb(t);return e.get("owner").next(o=>this.di(o)?(Nt("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):et.resolve())}mi(t,e){const o=Date.now();return!(t<o-e||t>o&&(Rr(`Detected an update time that is in the future: ${t} > ${o}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Js=()=>{this.Ii(),(0,re.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(t){var e;try{const o=null!==(null===(e=this.si)||void 0===e?void 0:e.getItem(this.yi(t)));return Nt("IndexedDbPersistence",`Client '${t}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Rr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(t){Rr("Failed to set zombie client id.",t)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Tb(i){return Go(i,"owner")}function Eb(i){return Go(i,"clientMetadata")}function hC(i,t){let e=i.projectId;return i.isDefaultDatabase||(e+="."+i.database),"firestore/"+t+"/"+e+"/"}class pC{constructor(t,e,o,s){this.targetId=t,this.fromCache=e,this.Pi=o,this.vi=s}static Vi(t,e){let o=pi(),s=pi();for(const l of e.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new pC(t,e.fromCache,o,s)}}class mI{constructor(){this.Si=!1}initialize(t,e){this.Di=t,this.indexManager=e,this.Si=!0}getDocumentsMatchingQuery(t,e,o,s){return this.Ci(t,e).next(l=>l||this.xi(t,e,s,o)).next(l=>l||this.Ni(t,e))}Ci(t,e){return et.resolve(null)}xi(t,e,o,s){return function fD(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}(e)||s.isEqual(Xn.min())?this.Ni(t,e):this.Di.getDocuments(t,o).next(l=>{const u=this.ki(e,l);return this.Oi(e,u,o,s)?this.Ni(t,e):(tb()<=Ys.in.DEBUG&&Nt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ST(e)),this.Mi(t,u,e,Xc(s,-1)))})}ki(t,e){let o=new Vi(IT(t));return e.forEach((s,l)=>{DT(t,l)&&(o=o.add(l))}),o}Oi(t,e,o,s){if(null===t.limit)return!1;if(o.size!==e.size)return!0;const l="F"===t.limitType?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}Ni(t,e){return tb()<=Ys.in.DEBUG&&Nt("QueryEngine","Using full collection scan to execute query:",ST(e)),this.Di.getDocumentsMatchingQuery(t,e,Ns.min())}Mi(t,e,o,s){return this.Di.getDocumentsMatchingQuery(t,o,s).next(l=>(e.forEach(u=>{l=l.insert(u.key,u)}),l))}}class lE{constructor(t,e,o,s){this.persistence=t,this.Fi=e,this.wt=s,this.$i=new cr(ei),this.Bi=new Vh(l=>od(l),Hw),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(o)}qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new uI(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.$i))}}function cE(i,t,e,o){return new lE(i,t,e,o)}function _I(i,t){return uE.apply(this,arguments)}function uE(){return uE=(0,rt.Z)(function*(i,t){const e=ln(i);return yield e.persistence.runTransaction("Handle user change","readonly",o=>{let s;return e.mutationQueue.getAllMutationBatches(o).next(l=>(s=l,e.qi(t),e.mutationQueue.getAllMutationBatches(o))).next(l=>{const u=[],g=[];let _=pi();for(const w of s){u.push(w.batchId);for(const T of w.mutations)_=_.add(T.key)}for(const w of l){g.push(w.batchId);for(const T of w.mutations)_=_.add(T.key)}return e.localDocuments.getDocuments(o,_).next(w=>({Ki:w,removedBatchIds:u,addedBatchIds:g}))})})}),uE.apply(this,arguments)}function dE(i,t){const e=ln(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const s=t.batch.keys(),l=e.Ui.newChangeBuffer({trackRemovals:!0});return function(u,g,_,w){const T=_.batch,D=T.keys();let O=et.resolve();return D.forEach(F=>{O=O.next(()=>w.getEntry(g,F)).next(j=>{const Q=_.docVersions.get(F);$n(null!==Q),j.version.compareTo(Q)<0&&(T.applyToRemoteDocument(j,_),j.isValidDocument()&&(j.setReadTime(_.commitVersion),w.addEntry(j)))})}),O.next(()=>u.mutationQueue.removeMutationBatch(g,T))}(e,o,t,l).next(()=>l.apply(o)).next(()=>e.mutationQueue.performConsistencyCheck(o)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(o,s,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(u){let g=pi();for(let _=0;_<u.mutationResults.length;++_)u.mutationResults[_].transformResults.length>0&&(g=g.add(u.batch.mutations[_].key));return g}(t))).next(()=>e.localDocuments.getDocuments(o,s))})}function fC(i){const t=ln(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Vs.getLastRemoteSnapshotVersion(e))}function yI(i,t){const e=ln(i),o=t.snapshotVersion;let s=e.$i;return e.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=e.Ui.newChangeBuffer({trackRemovals:!0});s=e.$i;const g=[];t.targetChanges.forEach((T,D)=>{const O=s.get(D);if(!O)return;g.push(e.Vs.removeMatchingKeys(l,T.removedDocuments,D).next(()=>e.Vs.addMatchingKeys(l,T.addedDocuments,D)));let F=O.withSequenceNumber(l.currentSequenceNumber);var j,Q,ae;t.targetMismatches.has(D)?F=F.withResumeToken(as.EMPTY_BYTE_STRING,Xn.min()).withLastLimboFreeSnapshotVersion(Xn.min()):T.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(T.resumeToken,o)),s=s.insert(D,F),Q=F,ae=T,(0===(j=O).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||ae.addedDocuments.size+ae.modifiedDocuments.size+ae.removedDocuments.size>0)&&g.push(e.Vs.updateTargetData(l,F))});let _=$i(),w=pi();if(t.documentUpdates.forEach(T=>{t.resolvedLimboDocuments.has(T)&&g.push(e.persistence.referenceDelegate.updateLimboDocument(l,T))}),g.push(gC(l,u,t.documentUpdates).next(T=>{_=T.Gi,w=T.Qi})),!o.isEqual(Xn.min())){const T=e.Vs.getLastRemoteSnapshotVersion(l).next(D=>e.Vs.setTargetsMetadata(l,l.currentSequenceNumber,o));g.push(T)}return et.waitFor(g).next(()=>u.apply(l)).next(()=>e.localDocuments.getLocalViewOfDocuments(l,_,w)).next(()=>_)}).then(l=>(e.$i=s,l))}function gC(i,t,e){let o=pi(),s=pi();return e.forEach(l=>o=o.add(l)),t.getEntries(i,o).next(l=>{let u=$i();return e.forEach((g,_)=>{const w=l.get(g);_.isFoundDocument()!==w.isFoundDocument()&&(s=s.add(g)),_.isNoDocument()&&_.version.isEqual(Xn.min())?(t.removeEntry(g,_.readTime),u=u.insert(g,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(t.addEntry(_),u=u.insert(g,_)):Nt("LocalStore","Ignoring outdated watch update for ",g,". Current version:",w.version," Watch version:",_.version)}),{Gi:u,Qi:s}})}function JO(i,t){const e=ln(i);return e.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(o,t)))}function cy(i,t){const e=ln(i);return e.persistence.runTransaction("Allocate target","readwrite",o=>{let s;return e.Vs.getTargetData(o,t).next(l=>l?(s=l,et.resolve(s)):e.Vs.allocateTargetId(o).next(u=>(s=new pm(t,u,0,o.currentSequenceNumber),e.Vs.addTargetData(o,s).next(()=>s))))}).then(o=>{const s=e.$i.get(o.targetId);return(null===s||o.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.$i=e.$i.insert(o.targetId,o),e.Bi.set(t,o.targetId)),o})}function xf(i,t,e){return hE.apply(this,arguments)}function hE(){return hE=(0,rt.Z)(function*(i,t,e){const o=ln(i),s=o.$i.get(t),l=e?"readwrite":"readwrite-primary";try{e||(yield o.persistence.runTransaction("Release target",l,u=>o.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Cl(u))throw u;Nt("LocalStore",`Failed to update sequence numbers for target ${t}: ${u}`)}o.$i=o.$i.remove(t),o.Bi.delete(s.target)}),hE.apply(this,arguments)}function xb(i,t,e){const o=ln(i);let s=Xn.min(),l=pi();return o.persistence.runTransaction("Execute query","readonly",u=>function(g,_,w){const T=ln(g),D=T.Bi.get(w);return void 0!==D?et.resolve(T.$i.get(D)):T.Vs.getTargetData(_,w)}(o,u,xl(t)).next(g=>{if(g)return s=g.lastLimboFreeSnapshotVersion,o.Vs.getMatchingKeysForTargetId(u,g.targetId).next(_=>{l=_})}).next(()=>o.Fi.getDocumentsMatchingQuery(u,t,e?s:Xn.min(),e?l:pi())).next(g=>(vI(o,gD(t),g),{documents:g,ji:l})))}function wm(i,t){const e=ln(i),o=ln(e.Vs),s=e.$i.get(t);return s?Promise.resolve(s.target):e.persistence.runTransaction("Get target data","readonly",l=>o.te(l,t).next(u=>u?u.target:null))}function pE(i,t){const e=ln(i),o=e.Li.get(t)||Xn.min();return e.persistence.runTransaction("Get new document changes","readonly",s=>e.Ui.getAllFromCollectionGroup(s,t,Xc(o,-1),Number.MAX_SAFE_INTEGER)).then(s=>(vI(e,t,s),s))}function vI(i,t,e){let o=Xn.min();e.forEach((s,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)}),i.Li.set(t,o)}function mC(){return mC=(0,rt.Z)(function*(i,t,e,o){const s=ln(i);let l=pi(),u=$i();for(const w of e){const T=t.Wi(w.metadata.name);w.document&&(l=l.add(T));const D=t.zi(w);D.setReadTime(t.Hi(w.metadata.readTime)),u=u.insert(T,D)}const g=s.Ui.newChangeBuffer({trackRemovals:!0}),_=yield cy(s,(w=o,xl(tu(xi.fromString(`__bundle__/docs/${w}`)))));var w;return s.persistence.runTransaction("Apply bundle documents","readwrite",w=>gC(w,g,u).next(T=>(g.apply(w),T)).next(T=>s.Vs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>s.Vs.addMatchingKeys(w,l,_.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(w,T.Gi,T.Qi)).next(()=>T.Gi)))}),mC.apply(this,arguments)}function fE(i,t){return gE.apply(this,arguments)}function gE(){return gE=(0,rt.Z)(function*(i,t,e=pi()){const o=yield cy(i,xl(JD(t.bundledQuery))),s=ln(i);return s.persistence.runTransaction("Save named query","readwrite",l=>{const u=Ts(t.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Ds.saveNamedQuery(l,t);const g=o.withResumeToken(as.EMPTY_BYTE_STRING,u);return s.$i=s.$i.insert(g.targetId,g),s.Vs.updateTargetData(l,g).next(()=>s.Vs.removeMatchingKeysForTargetId(l,o.targetId)).next(()=>s.Vs.addMatchingKeys(l,e,o.targetId)).next(()=>s.Ds.saveNamedQuery(l,t))})}),gE.apply(this,arguments)}function _C(i,t){return`firestore_clients_${i}_${t}`}function bI(i,t,e){let o=`firestore_mutations_${i}_${e}`;return t.isAuthenticated()&&(o+=`_${t.uid}`),o}function mE(i,t){return`firestore_targets_${i}_${t}`}class uy{constructor(t,e,o,s){this.user=t,this.batchId=e,this.state=o,this.error=s}static Ji(t,e,o){const s=JSON.parse(o);let l,u="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return u&&s.error&&(u="string"==typeof s.error.message&&"string"==typeof s.error.code,u&&(l=new Mt(s.error.code,s.error.message))),u?new uy(t,e,s.state,l):(Rr("SharedClientState",`Failed to parse mutation state for ID '${e}': ${o}`),null)}Yi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class dy{constructor(t,e,o){this.targetId=t,this.state=e,this.error=o}static Ji(t,e){const o=JSON.parse(e);let s,l="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(s=new Mt(o.error.code,o.error.message))),l?new dy(t,o.state,s):(Rr("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Yi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Sb{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ji(t,e){const o=JSON.parse(e);let s="object"==typeof o&&o.activeTargetIds instanceof Array,l=fb();for(let u=0;s&&u<o.activeTargetIds.length;++u)s=B(o.activeTargetIds[u]),l=l.add(o.activeTargetIds[u]);return s?new Sb(t,l):(Rr("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class yC{constructor(t,e){this.clientId=t,this.onlineState=e}static Ji(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new yC(e.clientId,e.onlineState):(Rr("SharedClientState",`Failed to parse online state: ${t}`),null)}}class vC{constructor(){this.activeTargetIds=fb()}Xi(t){this.activeTargetIds=this.activeTargetIds.add(t)}Zi(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Yi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class _E{constructor(t,e,o,s,l){this.window=t,this.js=e,this.persistenceKey=o,this.tr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new cr(ei),this.started=!1,this.ir=[];const u=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.rr=_C(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new vC),this.cr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,rt.Z)(function*(){const e=yield t.syncEngine.Ri();for(const s of e){if(s===t.tr)continue;const l=t.getItem(_C(t.persistenceKey,s));if(l){const u=Sb.Ji(s,l);u&&(t.sr=t.sr.insert(u.clientId,u))}}t._r();const o=t.storage.getItem(t.lr);if(o){const s=t.wr(o);s&&t.mr(s)}for(const s of t.ir)t.nr(s);t.ir=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.ur,JSON.stringify(t))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(t){let e=!1;return this.sr.forEach((o,s)=>{s.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.yr(t,"pending")}updateMutationState(t,e,o){this.yr(t,e,o),this.pr(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const o=this.storage.getItem(mE(this.persistenceKey,t));if(o){const s=dy.Ji(t,o);s&&(e=s.state)}}return this.Ir.Xi(t),this._r(),e}removeLocalQueryTarget(t){this.Ir.Zi(t),this._r()}isLocalQueryTarget(t){return this.Ir.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(mE(this.persistenceKey,t))}updateQueryState(t,e,o){this.Tr(t,e,o)}handleUserChange(t,e,o){e.forEach(s=>{this.pr(s)}),this.currentUser=t,o.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(t){this.Er(t)}notifyBundleLoaded(t){this.Ar(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Nt("SharedClientState","READ",t,e),e}setItem(t,e){Nt("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Nt("SharedClientState","REMOVE",t),this.storage.removeItem(t)}nr(t){var e=this;const o=t;if(o.storageArea===this.storage){if(Nt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.rr)return void Rr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,rt.Z)(function*(){if(e.started){if(null!==o.key)if(e.cr.test(o.key)){if(null==o.newValue){const s=e.Rr(o.key);return e.br(s,null)}{const s=e.Pr(o.key,o.newValue);if(s)return e.br(s.clientId,s)}}else if(e.ar.test(o.key)){if(null!==o.newValue){const s=e.vr(o.key,o.newValue);if(s)return e.Vr(s)}}else if(e.hr.test(o.key)){if(null!==o.newValue){const s=e.Sr(o.key,o.newValue);if(s)return e.Dr(s)}}else if(o.key===e.lr){if(null!==o.newValue){const s=e.wr(o.newValue);if(s)return e.mr(s)}}else if(o.key===e.ur){const s=function(l){let u=Fs.ot;if(null!=l)try{const g=JSON.parse(l);$n("number"==typeof g),u=g}catch(g){Rr("SharedClientState","Failed to read sequence number from WebStorage",g)}return u}(o.newValue);s!==Fs.ot&&e.sequenceNumberHandler(s)}else if(o.key===e.dr){const s=e.Cr(o.newValue);yield Promise.all(s.map(l=>e.syncEngine.Nr(l)))}}else e.ir.push(o)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(t,e,o){const s=new uy(this.currentUser,t,e,o),l=bI(this.persistenceKey,this.currentUser,t);this.setItem(l,s.Yi())}pr(t){const e=bI(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Er(t){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:t}))}Tr(t,e,o){const s=mE(this.persistenceKey,t),l=new dy(t,e,o);this.setItem(s,l.Yi())}Ar(t){const e=JSON.stringify(Array.from(t));this.setItem(this.dr,e)}Rr(t){const e=this.cr.exec(t);return e?e[1]:null}Pr(t,e){const o=this.Rr(t);return Sb.Ji(o,e)}vr(t,e){const o=this.ar.exec(t),s=Number(o[1]);return uy.Ji(new zo(void 0!==o[2]?o[2]:null),s,e)}Sr(t,e){const o=this.hr.exec(t),s=Number(o[1]);return dy.Ji(s,e)}wr(t){return yC.Ji(t)}Cr(t){return JSON.parse(t)}Vr(t){var e=this;return(0,rt.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.kr(t.batchId,t.state,t.error);Nt("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Dr(t){return this.syncEngine.Or(t.targetId,t.state,t.error)}br(t,e){const o=e?this.sr.insert(t,e):this.sr.remove(t),s=this.gr(this.sr),l=this.gr(o),u=[],g=[];return l.forEach(_=>{s.has(_)||u.push(_)}),s.forEach(_=>{l.has(_)||g.push(_)}),this.syncEngine.Mr(u,g).then(()=>{this.sr=o})}mr(t){this.sr.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}gr(t){let e=fb();return t.forEach((o,s)=>{e=e.unionWith(s.activeTargetIds)}),e}}class wI{constructor(){this.Fr=new vC,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,o){}addLocalQueryTarget(t){return this.Fr.Xi(t),this.$r[t]||"not-current"}updateQueryState(t,e,o){this.$r[t]=e}removeLocalQueryTarget(t){this.Fr.Zi(t)}isLocalQueryTarget(t){return this.Fr.activeTargetIds.has(t)}clearQueryState(t){delete this.$r[t]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(t){return this.Fr.activeTargetIds.has(t)}start(){return this.Fr=new vC,Promise.resolve()}handleUserChange(t,e,o){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class QO{Br(t){}shutdown(){}}class CI{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(t){this.Gr.push(t)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Nt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Gr)t(0)}Kr(){Nt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Gr)t(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const TI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class qL{constructor(t){this.jr=t.jr,this.Wr=t.Wr}zr(t){this.Hr=t}Jr(t){this.Yr=t}onMessage(t){this.Xr=t}close(){this.Wr()}send(t){this.jr(t)}Zr(){this.Hr()}eo(t){this.Yr(t)}no(t){this.Xr(t)}}class EI extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.so=(t.ssl?"https":"http")+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(t,e,o,s,l){const u=this.oo(t,e);Nt("RestConnection","Sending: ",u,o);const g={};return this.uo(g,s,l),this.co(t,u,g,o).then(_=>(Nt("RestConnection","Received: ",_),_),_=>{throw ed("RestConnection",`${t} failed with error: `,_,"url: ",u,"request:",o),_})}ao(t,e,o,s,l,u){return this.ro(t,e,o,s,l)}uo(t,e,o){t["X-Goog-Api-Client"]="gl-js/ fire/"+Ca,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((s,l)=>t[l]=s),o&&o.headers.forEach((s,l)=>t[l]=s)}oo(t,e){return`${this.so}/v1/${e}:${TI[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,e,o,s){return new Promise((l,u)=>{const g=new Xv;g.listenOnce(vT.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Ow.NO_ERROR:const w=g.getResponseJson();Nt("Connection","XHR received:",JSON.stringify(w)),l(w);break;case Ow.TIMEOUT:Nt("Connection",'RPC "'+t+'" timed out'),u(new Mt(ot.DEADLINE_EXCEEDED,"Request time out"));break;case Ow.HTTP_ERROR:const T=g.getStatus();if(Nt("Connection",'RPC "'+t+'" failed with status:',T,"response text:",g.getResponseText()),T>0){const D=g.getResponseJson().error;if(D&&D.status&&D.message){const O=function(F){const j=F.toLowerCase().replace(/_/g,"-");return Object.values(ot).indexOf(j)>=0?j:ot.UNKNOWN}(D.status);u(new Mt(O,D.message))}else u(new Mt(ot.UNKNOWN,"Server responded with status "+g.getStatus()))}else u(new Mt(ot.UNAVAILABLE,"Connection failed."));break;default:mn()}}finally{Nt("Connection",'RPC "'+t+'" completed.')}});const _=JSON.stringify(s);g.send(e,"POST",_,o,15)})}ho(t,e,o){const s=[this.so,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=lf(),u=aD(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new lD({})),this.uo(g.initMessageHeaders,e,o),(0,re.uI)()||(0,re.b$)()||(0,re.d)()||(0,re.w1)()||(0,re.Mn)()||(0,re.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const _=s.join("");Nt("Connection","Creating WebChannel: "+_,g);const w=l.createWebChannel(_,g);let T=!1,D=!1;const O=new qL({jr:j=>{D?Nt("Connection","Not sending because WebChannel is closed:",j):(T||(Nt("Connection","Opening WebChannel transport."),w.open(),T=!0),Nt("Connection","WebChannel sending:",j),w.send(j))},Wr:()=>w.close()}),F=(j,Q,ae)=>{j.listen(Q,Oe=>{try{ae(Oe)}catch(We){setTimeout(()=>{throw We},0)}})};return F(w,Jc.EventType.OPEN,()=>{D||Nt("Connection","WebChannel transport opened.")}),F(w,Jc.EventType.CLOSE,()=>{D||(D=!0,Nt("Connection","WebChannel transport closed"),O.eo())}),F(w,Jc.EventType.ERROR,j=>{D||(D=!0,ed("Connection","WebChannel transport errored:",j),O.eo(new Mt(ot.UNAVAILABLE,"The operation could not be completed")))}),F(w,Jc.EventType.MESSAGE,j=>{var Q;if(!D){const ae=j.data[0];$n(!!ae);const Oe=ae,We=Oe.error||(null===(Q=Oe[0])||void 0===Q?void 0:Q.error);if(We){Nt("Connection","WebChannel received error:",We);const ft=We.status;let dt=function(Wt){const Cn=Oo[Wt];if(void 0!==Cn)return bD(Cn)}(ft),zt=We.message;void 0===dt&&(dt=ot.INTERNAL,zt="Unknown error status: "+ft+" with message "+We.message),D=!0,O.eo(new Mt(dt,zt)),w.close()}else Nt("Connection","WebChannel received:",ae),O.no(ae)}}),F(u,bT.STAT_EVENT,j=>{j.stat===Rw.PROXY?Nt("Connection","Detected buffering proxy"):j.stat===Rw.NOPROXY&&Nt("Connection","Detected no buffering proxy")}),setTimeout(()=>{O.Zr()},0),O}}function xI(){return typeof window<"u"?window:null}function bC(){return typeof document<"u"?document:null}function wC(i){return new ED(i,!0)}class SI{constructor(t,e,o=1e3,s=1.5,l=6e4){this.js=t,this.timerId=e,this.lo=o,this.fo=s,this._o=l,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(t){this.cancel();const e=Math.floor(this.wo+this.To()),o=Math.max(0,Date.now()-this.yo),s=Math.max(0,e-o);s>0&&Nt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.wo} ms, delay with jitter: ${e} ms, last attempt: ${o} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,s,()=>(this.yo=Date.now(),t())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class DI{constructor(t,e,o,s,l,u,g,_){this.js=t,this.Ao=o,this.Ro=s,this.bo=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new SI(t,e)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var t=this;return(0,rt.Z)(function*(){t.Do()&&(yield t.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(t){this.Fo(),this.stream.send(t)}Oo(){var t=this;return(0,rt.Z)(function*(){if(t.Co())return t.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(t,e){var o=this;return(0,rt.Z)(function*(){o.Fo(),o.$o(),o.So.cancel(),o.Po++,4!==t?o.So.reset():e&&e.code===ot.RESOURCE_EXHAUSTED?(Rr(e.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),o.So.po()):e&&e.code===ot.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Bo(),o.stream.close(),o.stream=null),o.state=t,yield o.listener.Jr(e)})()}Bo(){}auth(){this.state=1;const t=this.Lo(this.Po),e=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,s])=>{this.Po===e&&this.Uo(o,s)},o=>{t(()=>{const s=new Mt(ot.UNKNOWN,"Fetching auth token failed: "+o.message);return this.qo(s)})})}Uo(t,e){const o=this.Lo(this.Po);this.stream=this.Ko(t,e),this.stream.zr(()=>{o(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(s=>{o(()=>this.qo(s))}),this.stream.onMessage(s=>{o(()=>this.onMessage(s))})}xo(){var t=this;this.state=5,this.So.Io((0,rt.Z)(function*(){t.state=0,t.start()}))}qo(t){return Nt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Lo(t){return e=>{this.js.enqueueAndForget(()=>this.Po===t?e():(Nt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XO extends DI{constructor(t,e,o,s,l,u){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,o,s,u),this.wt=l}Ko(t,e){return this.bo.ho("Listen",t,e)}onMessage(t){this.So.reset();const e=function MD(i,t){let e;if("targetChange"in t){const o="NO_CHANGE"===(_=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:mn(),s=t.targetChange.targetIds||[],l=function(_,w){return _.dt?($n(void 0===w||"string"==typeof w),as.fromBase64String(w||"")):($n(void 0===w||w instanceof Uint8Array),as.fromUint8Array(w||new Uint8Array))}(i,t.targetChange.resumeToken),u=t.targetChange.cause,g=u&&function(_){const w=void 0===_.code?ot.UNKNOWN:bD(_.code);return new Mt(w,_.message||"")}(u);e=new tC(o,s,l,g||null)}else if("documentChange"in t){const o=t.documentChange,s=cd(i,o.document.name),l=Ts(o.document.updateTime),u=new Vs({mapValue:{fields:o.document.fields}}),g=Er.newFoundDocument(s,l,u);e=new VT(o.targetIds||[],o.removedTargetIds||[],g.key,g)}else if("documentDelete"in t){const o=t.documentDelete,s=cd(i,o.document),l=o.readTime?Ts(o.readTime):Xn.min(),u=Er.newNoDocument(s,l);e=new VT([],o.removedTargetIds||[],u.key,u)}else if("documentRemove"in t){const o=t.documentRemove,s=cd(i,o.document);e=new VT([],o.removedTargetIds||[],s,null)}else{if(!("filter"in t))return mn();{const o=t.filter,l=new yD(o.count||0);e=new eC(o.targetId,l)}}var _;return e}(this.wt,t),o=function(s){if(!("targetChange"in s))return Xn.min();const l=s.targetChange;return l.targetIds&&l.targetIds.length?Xn.min():l.readTime?Ts(l.readTime):Xn.min()}(t);return this.listener.Go(e,o)}Qo(t){const e={};e.database=X_(this.wt),e.addTarget=function(s,l){let u;const g=l.target;return u=mf(g)?{documents:zT(s,g)}:{query:GT(s,g)},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?u.resumeToken=xD(s,l.resumeToken):l.snapshotVersion.compareTo(Xn.min())>0&&(u.readTime=Q_(s,l.snapshotVersion.toTimestamp())),u}(this.wt,t);const o=function AD(i,t){const e=function(o,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return mn()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);o&&(e.labels=o),this.Mo(e)}jo(t){const e={};e.database=X_(this.wt),e.removeTarget=t,this.Mo(e)}}class II extends DI{constructor(t,e,o,s,l,u){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,o,s,u),this.wt=l,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(t,e){return this.bo.ho("Write",t,e)}onMessage(t){if($n(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Wo){this.So.reset();const e=function jT(i,t){return i&&i.length>0?($n(void 0!==t),i.map(e=>function(o,s){let l=Ts(o.updateTime?o.updateTime:s);return l.isEqual(Xn.min())&&(l=Ts(s)),new bO(l,o.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),o=Ts(t.commitTime);return this.listener.Jo(o,e)}return $n(!t.writeResults||0===t.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const t={};t.database=X_(this.wt),this.Mo(t)}Ho(t){const e={streamToken:this.lastStreamToken,writes:t.map(o=>dm(this.wt,o))};this.Mo(e)}}class MI extends class{}{constructor(t,e,o,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.bo=o,this.wt=s,this.Zo=!1}tu(){if(this.Zo)throw new Mt(ot.FAILED_PRECONDITION,"The client has already been terminated.")}ro(t,e,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.bo.ro(t,e,o,s,l)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Mt(ot.UNKNOWN,s.toString())})}ao(t,e,o,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.bo.ao(t,e,o,l,u,s)).catch(l=>{throw"FirebaseError"===l.name?(l.code===ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Mt(ot.UNKNOWN,l.toString())})}terminate(){this.Zo=!0}}class AI{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(t){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ru("Offline")))}set(t){this.cu(),this.eu=0,"Online"===t&&(this.su=!1),this.ru(t)}ru(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ou(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Rr(e),this.su=!1):Nt("OnlineStateTracker",e)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class kI{constructor(t,e,o,s,l){var u=this;this.localStore=t,this.datastore=e,this.asyncQueue=o,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=l,this.du.Br(g=>{o.enqueueAndForget((0,rt.Z)(function*(){var _;Bh(u)&&(Nt("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,rt.Z)(function*(w){const T=ln(w);T.lu.add(4),yield Cm(T),T._u.set("Unknown"),T.lu.delete(4),yield hy(T)}),function(w){return _.apply(this,arguments)})(u))}))}),this._u=new AI(o,s)}}function hy(i){return yE.apply(this,arguments)}function yE(){return yE=(0,rt.Z)(function*(i){if(Bh(i))for(const t of i.fu)yield t(!0)}),yE.apply(this,arguments)}function Cm(i){return vE.apply(this,arguments)}function vE(){return vE=(0,rt.Z)(function*(i){for(const t of i.fu)yield t(!1)}),vE.apply(this,arguments)}function CC(i,t){const e=ln(i);e.hu.has(t.targetId)||(e.hu.set(t.targetId,t),EC(e)?TC(e):yy(e).Co()&&Tm(e,t))}function py(i,t){const e=ln(i),o=yy(e);e.hu.delete(t),o.Co()&&bE(e,t),0===e.hu.size&&(o.Co()?o.ko():Bh(e)&&e._u.set("Unknown"))}function Tm(i,t){i.wu.Nt(t.targetId),yy(i).Qo(t)}function bE(i,t){i.wu.Nt(t),yy(i).jo(t)}function TC(i){i.wu=new EO({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),te:t=>i.hu.get(t)||null}),yy(i).start(),i._u.iu()}function EC(i){return Bh(i)&&!yy(i).Do()&&i.hu.size>0}function Bh(i){return 0===ln(i).lu.size}function wE(i){i.wu=void 0}function eR(i){return CE.apply(this,arguments)}function CE(){return CE=(0,rt.Z)(function*(i){i.hu.forEach((t,e)=>{Tm(i,t)})}),CE.apply(this,arguments)}function ZL(i,t){return TE.apply(this,arguments)}function TE(){return TE=(0,rt.Z)(function*(i,t){wE(i),EC(i)?(i._u.uu(t),TC(i)):i._u.set("Unknown")}),TE.apply(this,arguments)}function tR(i,t,e){return EE.apply(this,arguments)}function EE(){return EE=(0,rt.Z)(function*(i,t,e){if(i._u.set("Online"),t instanceof tC&&2===t.state&&t.cause)try{yield(o=(0,rt.Z)(function*(s,l){const u=l.cause;for(const g of l.targetIds)s.hu.has(g)&&(yield s.remoteSyncer.rejectListen(g,u),s.hu.delete(g),s.wu.removeTarget(g))}),function(s,l){return o.apply(this,arguments)})(i,t)}catch(o){Nt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),o),yield xC(i,o)}else if(t instanceof VT?i.wu.Ut(t):t instanceof eC?i.wu.zt(t):i.wu.Gt(t),!e.isEqual(Xn.min()))try{const o=yield fC(i.localStore);e.compareTo(o)>=0&&(yield function(s,l){const u=s.wu.Yt(l);return u.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const w=s.hu.get(_);w&&s.hu.set(_,w.withResumeToken(g.resumeToken,l))}}),u.targetMismatches.forEach(g=>{const _=s.hu.get(g);if(!_)return;s.hu.set(g,_.withResumeToken(as.EMPTY_BYTE_STRING,_.snapshotVersion)),bE(s,g);const w=new pm(_.target,g,1,_.sequenceNumber);Tm(s,w)}),s.remoteSyncer.applyRemoteEvent(u)}(i,e))}catch(o){Nt("RemoteStore","Failed to raise snapshot:",o),yield xC(i,o)}var o}),EE.apply(this,arguments)}function xC(i,t,e){return xE.apply(this,arguments)}function xE(){return xE=(0,rt.Z)(function*(i,t,e){if(!Cl(t))throw t;i.lu.add(1),yield Cm(i),i._u.set("Offline"),e||(e=()=>fC(i.localStore)),i.asyncQueue.enqueueRetryable((0,rt.Z)(function*(){Nt("RemoteStore","Retrying IndexedDB access"),yield e(),i.lu.delete(1),yield hy(i)}))}),xE.apply(this,arguments)}function fy(i,t){return t().catch(e=>xC(i,e,t))}function gy(i){return Db.apply(this,arguments)}function Db(){return Db=(0,rt.Z)(function*(i){const t=ln(i),e=Em(t);let o=t.au.length>0?t.au[t.au.length-1].batchId:-1;for(;hd(t);)try{const s=yield JO(t.localStore,o);if(null===s){0===t.au.length&&e.ko();break}o=s.batchId,nR(t,s)}catch(s){yield xC(t,s)}SC(t)&&my(t)}),Db.apply(this,arguments)}function hd(i){return Bh(i)&&i.au.length<10}function nR(i,t){i.au.push(t);const e=Em(i);e.Co()&&e.zo&&e.Ho(t.mutations)}function SC(i){return Bh(i)&&!Em(i).Do()&&i.au.length>0}function my(i){Em(i).start()}function iR(i){return SE.apply(this,arguments)}function SE(){return SE=(0,rt.Z)(function*(i){Em(i).Xo()}),SE.apply(this,arguments)}function rR(i){return _y.apply(this,arguments)}function _y(){return _y=(0,rt.Z)(function*(i){const t=Em(i);for(const e of i.au)t.Ho(e.mutations)}),_y.apply(this,arguments)}function DC(i,t,e){return DE.apply(this,arguments)}function DE(){return DE=(0,rt.Z)(function*(i,t,e){const o=i.au.shift(),s=oC.from(o,t,e);yield fy(i,()=>i.remoteSyncer.applySuccessfulWrite(s)),yield gy(i)}),DE.apply(this,arguments)}function oR(i,t){return IC.apply(this,arguments)}function IC(){return IC=(0,rt.Z)(function*(i,t){var e;t&&Em(i).zo&&(yield(e=(0,rt.Z)(function*(o,s){if(vD(l=s.code)&&l!==ot.ABORTED){const u=o.au.shift();Em(o).No(),yield fy(o,()=>o.remoteSyncer.rejectFailedWrite(u.batchId,s)),yield gy(o)}var l}),function(o,s){return e.apply(this,arguments)})(i,t)),SC(i)&&my(i)}),IC.apply(this,arguments)}function IE(i,t){return Ib.apply(this,arguments)}function Ib(){return Ib=(0,rt.Z)(function*(i,t){const e=ln(i);e.asyncQueue.verifyOperationInProgress(),Nt("RemoteStore","RemoteStore received new credentials");const o=Bh(e);e.lu.add(3),yield Cm(e),o&&e._u.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.lu.delete(3),yield hy(e)}),Ib.apply(this,arguments)}function MC(i,t){return ME.apply(this,arguments)}function ME(){return ME=(0,rt.Z)(function*(i,t){const e=ln(i);t?(e.lu.delete(2),yield hy(e)):t||(e.lu.add(2),yield Cm(e),e._u.set("Unknown"))}),ME.apply(this,arguments)}function yy(i){return i.mu||(i.mu=function(t,e,o){const s=ln(t);return s.tu(),new XO(e,s.bo,s.authCredentials,s.appCheckCredentials,s.wt,o)}(i.datastore,i.asyncQueue,{zr:eR.bind(null,i),Jr:ZL.bind(null,i),Go:tR.bind(null,i)}),i.fu.push(function(){var t=(0,rt.Z)(function*(e){e?(i.mu.No(),EC(i)?TC(i):i._u.set("Unknown")):(yield i.mu.stop(),wE(i))});return function(e){return t.apply(this,arguments)}}())),i.mu}function Em(i){return i.gu||(i.gu=function(t,e,o){const s=ln(t);return s.tu(),new II(e,s.bo,s.authCredentials,s.appCheckCredentials,s.wt,o)}(i.datastore,i.asyncQueue,{zr:iR.bind(null,i),Jr:oR.bind(null,i),Yo:rR.bind(null,i),Jo:DC.bind(null,i)}),i.fu.push(function(){var t=(0,rt.Z)(function*(e){e?(i.gu.No(),yield gy(i)):(yield i.gu.stop(),i.au.length>0&&(Nt("RemoteStore",`Stopping write stream with ${i.au.length} pending writes`),i.au=[]))});return function(e){return t.apply(this,arguments)}}())),i.gu}class Mb{constructor(t,e,o,s,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=o,this.op=s,this.removalCallback=l,this.deferred=new no,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(t,e,o,s,l){const u=Date.now()+o,g=new Mb(t,e,u,s,l);return g.start(o),g}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Mt(ot.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sf(i,t){if(Rr("AsyncQueue",`${t}: ${i}`),Cl(i))return new Mt(ot.UNAVAILABLE,`${t}: ${i}`);throw i}class xm{constructor(t){this.comparator=t?(e,o)=>t(e,o)||on.comparator(e.key,o.key):(e,o)=>on.comparator(e.key,o.key),this.keyedMap=pb(),this.sortedSet=new cr(this.comparator)}static emptySet(t){return new xm(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,o)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof xm)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),o=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,l=o.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const o=new xm;return o.comparator=this.comparator,o.keyedMap=t,o.sortedSet=e,o}}class AC{constructor(){this.yu=new cr(on.comparator)}track(t){const e=t.doc.key,o=this.yu.get(e);o?0!==t.type&&3===o.type?this.yu=this.yu.insert(e,t):3===t.type&&1!==o.type?this.yu=this.yu.insert(e,{type:o.type,doc:t.doc}):2===t.type&&2===o.type?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===o.type?this.yu=this.yu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===o.type?this.yu=this.yu.remove(e):1===t.type&&2===o.type?this.yu=this.yu.insert(e,{type:1,doc:o.doc}):0===t.type&&1===o.type?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):mn():this.yu=this.yu.insert(e,t)}pu(){const t=[];return this.yu.inorderTraversal((e,o)=>{t.push(o)}),t}}class Df{constructor(t,e,o,s,l,u,g,_){this.query=t,this.docs=e,this.oldDocs=o,this.docChanges=s,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=g,this.excludesMetadataChanges=_}static fromInitialDocuments(t,e,o,s){const l=[];return e.forEach(u=>{l.push({type:0,doc:u})}),new Df(t,e,xm.emptySet(e),l,o,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Z_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,o=t.docChanges;if(e.length!==o.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==o[s].type||!e[s].doc.isEqual(o[s].doc))return!1;return!0}}class sR{constructor(){this.Iu=void 0,this.listeners=[]}}class aR{constructor(){this.queries=new Vh(t=>xT(t),Z_),this.onlineState="Unknown",this.Tu=new Set}}function AE(i,t){return kE.apply(this,arguments)}function kE(){return kE=(0,rt.Z)(function*(i,t){const e=ln(i),o=t.query;let s=!1,l=e.queries.get(o);if(l||(s=!0,l=new sR),s)try{l.Iu=yield e.onListen(o)}catch(u){const g=Sf(u,`Initialization of query '${ST(t.query)}' failed`);return void t.onError(g)}e.queries.set(o,l),l.listeners.push(t),t.Eu(e.onlineState),l.Iu&&t.Au(l.Iu)&&OC(e)}),kE.apply(this,arguments)}function kC(i,t){return Ab.apply(this,arguments)}function Ab(){return Ab=(0,rt.Z)(function*(i,t){const e=ln(i),o=t.query;let s=!1;const l=e.queries.get(o);if(l){const u=l.listeners.indexOf(t);u>=0&&(l.listeners.splice(u,1),s=0===l.listeners.length)}if(s)return e.queries.delete(o),e.onUnlisten(o)}),Ab.apply(this,arguments)}function OI(i,t){const e=ln(i);let o=!1;for(const s of t){const u=e.queries.get(s.query);if(u){for(const g of u.listeners)g.Au(s)&&(o=!0);u.Iu=s}}o&&OC(e)}function RI(i,t,e){const o=ln(i),s=o.queries.get(t);if(s)for(const l of s.listeners)l.onError(e);o.queries.delete(t)}function OC(i){i.Tu.forEach(t=>{t.next()})}class RC{constructor(t,e,o){this.query=t,this.Ru=e,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=o||{}}Au(t){if(!this.options.includeMetadataChanges){const o=[];for(const s of t.docChanges)3!==s.type&&o.push(s);t=new Df(t.query,t.docs,t.oldDocs,o,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.bu?this.vu(t)&&(this.Ru.next(t),e=!0):this.Vu(t,this.onlineState)&&(this.Su(t),e=!0),this.Pu=t,e}onError(t){this.Ru.error(t)}Eu(t){this.onlineState=t;let e=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,t)&&(this.Su(this.Pu),e=!0),e}Vu(t,e){return!t.fromCache||!(this.options.Du&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}vu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(t){t=Df.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Ru.next(t)}}class lR{constructor(t,e){this.payload=t,this.byteLength=e}Cu(){return"metadata"in this.payload}}class OE{constructor(t){this.wt=t}Wi(t){return cd(this.wt,t)}zi(t){return t.metadata.exists?DD(this.wt,t.document,!1):Er.newNoDocument(this.Wi(t.metadata.name),this.Hi(t.metadata.readTime))}Hi(t){return Ts(t)}}class PI{constructor(t,e,o){this.xu=t,this.localStore=e,this.wt=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=NI(t)}Nu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const o=xi.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}ku(t){const e=new Map,o=new OE(this.wt);for(const s of t)if(s.metadata.queries){const l=o.Wi(s.metadata.name);for(const u of s.metadata.queries){const g=(e.get(u)||pi()).add(l);e.set(u,g)}}return e}complete(){var t=this;return(0,rt.Z)(function*(){const e=yield function GL(i,t,e,o){return mC.apply(this,arguments)}(t.localStore,new OE(t.wt),t.documents,t.xu.id),o=t.ku(t.documents);for(const s of t.queries)yield fE(t.localStore,s,o.get(s.name));return t.progress.taskState="Success",{progress:t.progress,Ou:t.collectionGroups,Mu:e}})()}}function NI(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class RE{constructor(t){this.key=t}}class PE{constructor(t){this.key=t}}class oa{constructor(t,e){this.query=t,this.Fu=e,this.$u=null,this.current=!1,this.Bu=pi(),this.mutatedKeys=pi(),this.Lu=IT(t),this.Uu=new xm(this.Lu)}get qu(){return this.Fu}Ku(t,e){const o=e?e.Gu:new AC,s=e?e.Uu:this.Uu;let l=e?e.mutatedKeys:this.mutatedKeys,u=s,g=!1;const _="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,w="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((T,D)=>{const O=s.get(T),F=DT(this.query,D)?D:null,j=!!O&&this.mutatedKeys.has(O.key),Q=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let ae=!1;O&&F?O.data.isEqual(F.data)?j!==Q&&(o.track({type:3,doc:F}),ae=!0):this.Qu(O,F)||(o.track({type:2,doc:F}),ae=!0,(_&&this.Lu(F,_)>0||w&&this.Lu(F,w)<0)&&(g=!0)):!O&&F?(o.track({type:0,doc:F}),ae=!0):O&&!F&&(o.track({type:1,doc:O}),ae=!0,(_||w)&&(g=!0)),ae&&(F?(u=u.add(F),l=Q?l.add(T):l.delete(T)):(u=u.delete(T),l=l.delete(T)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const T="F"===this.query.limitType?u.last():u.first();u=u.delete(T.key),l=l.delete(T.key),o.track({type:1,doc:T})}return{Uu:u,Gu:o,Oi:g,mutatedKeys:l}}Qu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,o){const s=this.Uu;this.Uu=t.Uu,this.mutatedKeys=t.mutatedKeys;const l=t.Gu.pu();l.sort((w,T)=>function(D,O){const F=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mn()}};return F(D)-F(O)}(w.type,T.type)||this.Lu(w.doc,T.doc)),this.ju(o);const u=e?this.Wu():[],g=0===this.Bu.size&&this.current?1:0,_=g!==this.$u;return this.$u=g,0!==l.length||_?{snapshot:new Df(this.query,t.Uu,s,l,t.mutatedKeys,0===g,_,!1),zu:u}:{zu:u}}Eu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new AC,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(t){return!this.Fu.has(t)&&!!this.Uu.has(t)&&!this.Uu.get(t).hasLocalMutations}ju(t){t&&(t.addedDocuments.forEach(e=>this.Fu=this.Fu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Fu=this.Fu.delete(e)),this.current=t.current)}Wu(){if(!this.current)return[];const t=this.Bu;this.Bu=pi(),this.Uu.forEach(o=>{this.Hu(o.key)&&(this.Bu=this.Bu.add(o.key))});const e=[];return t.forEach(o=>{this.Bu.has(o)||e.push(new PE(o))}),this.Bu.forEach(o=>{t.has(o)||e.push(new RE(o))}),e}Ju(t){this.Fu=t.ji,this.Bu=pi();const e=this.Ku(t.documents);return this.applyChanges(e,!0)}Yu(){return Df.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class vy{constructor(t,e,o){this.query=t,this.targetId=e,this.view=o}}class cR{constructor(t){this.key=t,this.Xu=!1}}class uR{constructor(t,e,o,s,l,u){this.localStore=t,this.remoteStore=e,this.eventManager=o,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Zu={},this.tc=new Vh(g=>xT(g),Z_),this.ec=new Map,this.nc=new Set,this.sc=new cr(on.comparator),this.ic=new Map,this.rc=new rE,this.oc={},this.uc=new Map,this.cc=vm.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function $L(i,t){return FI.apply(this,arguments)}function FI(){return FI=(0,rt.Z)(function*(i,t){const e=qI(i);let o,s;const l=e.tc.get(t);if(l)o=l.targetId,e.sharedClientState.addLocalQueryTarget(o),s=l.view.Yu();else{const u=yield cy(e.localStore,xl(t));e.isPrimaryClient&&CC(e.remoteStore,u);const g=e.sharedClientState.addLocalQueryTarget(u.targetId);o=u.targetId,s=yield PC(e,t,o,"current"===g)}return s}),FI.apply(this,arguments)}function PC(i,t,e,o){return NC.apply(this,arguments)}function NC(){return NC=(0,rt.Z)(function*(i,t,e,o){i.hc=(T,D,O)=>{return(F=(0,rt.Z)(function*(j,Q,ae,Oe){let We=Q.view.Ku(ae);We.Oi&&(We=yield xb(j.localStore,Q.query,!1).then(({documents:zt})=>Q.view.Ku(zt,We)));const ft=Oe&&Oe.targetChanges.get(Q.targetId),dt=Q.view.applyChanges(We,j.isPrimaryClient,ft);return GE(j,Q.targetId,dt.zu),dt.snapshot}),function(j,Q,ae,Oe){return F.apply(this,arguments)})(i,T,D,O);var F};const s=yield xb(i.localStore,t,!0),l=new oa(t,s.ji),u=l.Ku(s.documents),g=J_.createSynthesizedTargetChangeForCurrentChange(e,o&&"Offline"!==i.onlineState),_=l.applyChanges(u,i.isPrimaryClient,g);GE(i,e,_.zu);const w=new vy(t,e,l);return i.tc.set(t,w),i.ec.has(e)?i.ec.get(e).push(t):i.ec.set(e,[t]),_.snapshot}),NC.apply(this,arguments)}function kb(i,t){return NE.apply(this,arguments)}function NE(){return NE=(0,rt.Z)(function*(i,t){const e=ln(i),o=e.tc.get(t),s=e.ec.get(o.targetId);if(s.length>1)return e.ec.set(o.targetId,s.filter(l=>!Z_(l,t))),void e.tc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(o.targetId),e.sharedClientState.isActiveQueryTarget(o.targetId)||(yield xf(e.localStore,o.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(o.targetId),py(e.remoteStore,o.targetId),Sm(e,o.targetId)}).catch(wl))):(Sm(e,o.targetId),yield xf(e.localStore,o.targetId,!0))}),NE.apply(this,arguments)}function LE(){return LE=(0,rt.Z)(function*(i,t,e){const o=UC(i);try{const s=yield function(l,u){const g=ln(l),_=Tr.now(),w=u.reduce((O,F)=>O.add(F.key),pi());let T,D;return g.persistence.runTransaction("Locally write mutations","readwrite",O=>{let F=$i(),j=pi();return g.Ui.getEntries(O,w).next(Q=>{F=Q,F.forEach((ae,Oe)=>{Oe.isValidDocument()||(j=j.add(ae))})}).next(()=>g.localDocuments.getOverlayedDocuments(O,F)).next(Q=>{T=Q;const ae=[];for(const Oe of u){const We=_D(Oe,T.get(Oe.key).overlayedDocument);null!=We&&ae.push(new ld(Oe.key,We,dD(We.value.mapValue),Kr.exists(!0)))}return g.mutationQueue.addMutationBatch(O,_,ae,u)}).next(Q=>{D=Q;const ae=Q.applyToLocalDocumentSet(T,j);return g.documentOverlayCache.saveOverlays(O,Q.batchId,ae)})}).then(()=>({batchId:D.batchId,changes:wD(T)}))}(o.localStore,t);o.sharedClientState.addPendingMutation(s.batchId),function(l,u,g){let _=l.oc[l.currentUser.toKey()];_||(_=new cr(ei)),_=_.insert(u,g),l.oc[l.currentUser.toKey()]=_}(o,s.batchId,e),yield If(o,s.changes),yield gy(o.remoteStore)}catch(s){const l=Sf(s,"Failed to persist write");e.reject(l)}}),LE.apply(this,arguments)}function VE(i,t){return HE.apply(this,arguments)}function HE(){return HE=(0,rt.Z)(function*(i,t){const e=ln(i);try{const o=yield yI(e.localStore,t);t.targetChanges.forEach((s,l)=>{const u=e.ic.get(l);u&&($n(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.Xu=!0:s.modifiedDocuments.size>0?$n(u.Xu):s.removedDocuments.size>0&&($n(u.Xu),u.Xu=!1))}),yield If(e,o,t)}catch(o){yield wl(o)}}),HE.apply(this,arguments)}function LI(i,t,e){const o=ln(i);if(o.isPrimaryClient&&0===e||!o.isPrimaryClient&&1===e){const s=[];o.tc.forEach((l,u)=>{const g=u.view.Eu(t);g.snapshot&&s.push(g.snapshot)}),function(l,u){const g=ln(l);g.onlineState=u;let _=!1;g.queries.forEach((w,T)=>{for(const D of T.listeners)D.Eu(u)&&(_=!0)}),_&&OC(g)}(o.eventManager,t),s.length&&o.Zu.Go(s),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}function by(i,t,e){return BE.apply(this,arguments)}function BE(){return BE=(0,rt.Z)(function*(i,t,e){const o=ln(i);o.sharedClientState.updateQueryState(t,"rejected",e);const s=o.ic.get(t),l=s&&s.key;if(l){let u=new cr(on.comparator);u=u.insert(l,Er.newNoDocument(l,Xn.min()));const g=pi().add(l),_=new gb(Xn.min(),new Map,new Vi(ei),u,g);yield VE(o,_),o.sc=o.sc.remove(l),o.ic.delete(t),Ob(o)}else yield xf(o.localStore,t,!1).then(()=>Sm(o,t,e)).catch(wl)}),BE.apply(this,arguments)}function UE(i,t){return FC.apply(this,arguments)}function FC(){return FC=(0,rt.Z)(function*(i,t){const e=ln(i),o=t.batch.batchId;try{const s=yield dE(e.localStore,t);zE(e,o,null),LC(e,o),e.sharedClientState.updateMutationState(o,"acknowledged"),yield If(e,s)}catch(s){yield wl(s)}}),FC.apply(this,arguments)}function VI(i,t,e){return wy.apply(this,arguments)}function wy(){return wy=(0,rt.Z)(function*(i,t,e){const o=ln(i);try{const s=yield function(l,u){const g=ln(l);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return g.mutationQueue.lookupMutationBatch(_,u).next(T=>($n(null!==T),w=T.keys(),g.mutationQueue.removeMutationBatch(_,T))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,w,u)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>g.localDocuments.getDocuments(_,w))})}(o.localStore,t);zE(o,t,e),LC(o,t),o.sharedClientState.updateMutationState(t,"rejected",e),yield If(o,s)}catch(s){yield wl(s)}}),wy.apply(this,arguments)}function HI(){return HI=(0,rt.Z)(function*(i,t){const e=ln(i);Bh(e.remoteStore)||Nt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(l){const u=ln(l);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>u.mutationQueue.getHighestUnacknowledgedBatchId(g))}(e.localStore);if(-1===o)return void t.resolve();const s=e.uc.get(o)||[];s.push(t),e.uc.set(o,s)}catch(o){const s=Sf(o,"Initialization of waitForPendingWrites() operation failed");t.reject(s)}}),HI.apply(this,arguments)}function LC(i,t){(i.uc.get(t)||[]).forEach(e=>{e.resolve()}),i.uc.delete(t)}function zE(i,t,e){const o=ln(i);let s=o.oc[o.currentUser.toKey()];if(s){const l=s.get(t);l&&(e?l.reject(e):l.resolve(),s=s.remove(t)),o.oc[o.currentUser.toKey()]=s}}function Sm(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(const o of i.ec.get(t))i.tc.delete(o),e&&i.Zu.lc(o,e);i.ec.delete(t),i.isPrimaryClient&&i.rc.us(t).forEach(o=>{i.rc.containsKey(o)||Dm(i,o)})}function Dm(i,t){i.nc.delete(t.path.canonicalString());const e=i.sc.get(t);null!==e&&(py(i.remoteStore,e),i.sc=i.sc.remove(t),i.ic.delete(e),Ob(i))}function GE(i,t,e){for(const o of e)o instanceof RE?(i.rc.addReference(o.key,t),BI(i,o)):o instanceof PE?(Nt("SyncEngine","Document no longer in limbo: "+o.key),i.rc.removeReference(o.key,t),i.rc.containsKey(o.key)||Dm(i,o.key)):mn()}function BI(i,t){const e=t.key,o=e.path.canonicalString();i.sc.get(e)||i.nc.has(o)||(Nt("SyncEngine","New document in limbo: "+e),i.nc.add(o),Ob(i))}function Ob(i){for(;i.nc.size>0&&i.sc.size<i.maxConcurrentLimboResolutions;){const t=i.nc.values().next().value;i.nc.delete(t);const e=new on(xi.fromString(t)),o=i.cc.next();i.ic.set(o,new cR(e)),i.sc=i.sc.insert(e,o),CC(i.remoteStore,new pm(xl(tu(e.path)),o,2,Fs.ot))}}function If(i,t,e){return qE.apply(this,arguments)}function qE(){return qE=(0,rt.Z)(function*(i,t,e){const o=ln(i),s=[],l=[],u=[];var g;o.tc.isEmpty()||(o.tc.forEach((g,_)=>{u.push(o.hc(_,t,e).then(w=>{if(w){o.isPrimaryClient&&o.sharedClientState.updateQueryState(_.targetId,w.fromCache?"not-current":"current"),s.push(w);const T=pC.Vi(_.targetId,w);l.push(T)}}))}),yield Promise.all(u),o.Zu.Go(s),yield(g=(0,rt.Z)(function*(_,w){const T=ln(_);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>et.forEach(w,O=>et.forEach(O.Pi,F=>T.persistence.referenceDelegate.addReference(D,O.targetId,F)).next(()=>et.forEach(O.vi,F=>T.persistence.referenceDelegate.removeReference(D,O.targetId,F)))))}catch(D){if(!Cl(D))throw D;Nt("LocalStore","Failed to update sequence numbers: "+D)}for(const D of w){const O=D.targetId;if(!D.fromCache){const F=T.$i.get(O),Q=F.withLastLimboFreeSnapshotVersion(F.snapshotVersion);T.$i=T.$i.insert(O,Q)}}}),function(_,w){return g.apply(this,arguments)})(o.localStore,l))}),qE.apply(this,arguments)}function WL(i,t){return ZE.apply(this,arguments)}function ZE(){return ZE=(0,rt.Z)(function*(i,t){const e=ln(i);if(!e.currentUser.isEqual(t)){Nt("SyncEngine","User change. New user:",t.toKey());const o=yield _I(e.localStore,t);e.currentUser=t,(s=e).uc.forEach(u=>{u.forEach(g=>{g.reject(new Mt(ot.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.uc.clear(),e.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),yield If(e,o.Ki)}var s}),ZE.apply(this,arguments)}function dR(i,t){const e=ln(i),o=e.ic.get(t);if(o&&o.Xu)return pi().add(o.key);{let s=pi();const l=e.ec.get(t);if(!l)return s;for(const u of l){const g=e.tc.get(u);s=s.unionWith(g.view.qu)}return s}}function hR(i,t){return VC.apply(this,arguments)}function VC(){return VC=(0,rt.Z)(function*(i,t){const e=ln(i),o=yield xb(e.localStore,t.query,!0),s=t.view.Ju(o);return e.isPrimaryClient&&GE(e,t.targetId,s.zu),s}),VC.apply(this,arguments)}function UI(i,t){return $E.apply(this,arguments)}function $E(){return $E=(0,rt.Z)(function*(i,t){const e=ln(i);return pE(e.localStore,t).then(o=>If(e,o))}),$E.apply(this,arguments)}function jI(i,t,e,o){return HC.apply(this,arguments)}function HC(){return HC=(0,rt.Z)(function*(i,t,e,o){const s=ln(i),l=yield function(u,g){const _=ln(u),w=ln(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",T=>w.yn(T,g).next(D=>D?_.localDocuments.getDocuments(T,D):et.resolve(null)))}(s.localStore,t);var g;null!==l?("pending"===e?yield gy(s.remoteStore):"acknowledged"===e||"rejected"===e?(zE(s,t,o||null),LC(s,t),g=t,ln(ln(s.localStore).mutationQueue).In(g)):mn(),yield If(s,l)):Nt("SyncEngine","Cannot apply mutation batch with id: "+t)}),HC.apply(this,arguments)}function WE(){return WE=(0,rt.Z)(function*(i,t){const e=ln(i);if(qI(e),UC(e),!0===t&&!0!==e.ac){const o=e.sharedClientState.getAllActiveQueryTargets(),s=yield KE(e,o.toArray());e.ac=!0,yield MC(e.remoteStore,!0);for(const l of s)CC(e.remoteStore,l)}else if(!1===t&&!1!==e.ac){const o=[];let s=Promise.resolve();e.ec.forEach((l,u)=>{e.sharedClientState.isLocalQueryTarget(u)?o.push(u):s=s.then(()=>(Sm(e,u),xf(e.localStore,u,!0))),py(e.remoteStore,u)}),yield s,yield KE(e,o),function(l){const u=ln(l);u.ic.forEach((g,_)=>{py(u.remoteStore,_)}),u.rc.cs(),u.ic=new Map,u.sc=new cr(on.comparator)}(e),e.ac=!1,yield MC(e.remoteStore,!1)}}),WE.apply(this,arguments)}function KE(i,t,e){return YE.apply(this,arguments)}function YE(){return YE=(0,rt.Z)(function*(i,t,e){const o=ln(i),s=[],l=[];for(const u of t){let g;const _=o.ec.get(u);if(_&&0!==_.length){g=yield cy(o.localStore,xl(_[0]));for(const w of _){const T=o.tc.get(w),D=yield hR(o,T);D.snapshot&&l.push(D.snapshot)}}else{const w=yield wm(o.localStore,u);g=yield cy(o.localStore,w),yield PC(o,JE(w),u,!1)}s.push(g)}return o.Zu.Go(l),s}),YE.apply(this,arguments)}function JE(i){return am(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function zI(i){const t=ln(i);return ln(ln(t.localStore).persistence).Ri()}function GI(i,t,e,o){return BC.apply(this,arguments)}function BC(){return BC=(0,rt.Z)(function*(i,t,e,o){const s=ln(i);if(s.ac)return void Nt("SyncEngine","Ignoring unexpected query state notification.");const l=s.ec.get(t);if(l&&l.length>0)switch(e){case"current":case"not-current":{const u=yield pE(s.localStore,gD(l[0])),g=gb.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield If(s,u,g);break}case"rejected":yield xf(s.localStore,t,!0),Sm(s,t,o);break;default:mn()}}),BC.apply(this,arguments)}function fR(i,t,e){return QE.apply(this,arguments)}function QE(){return QE=(0,rt.Z)(function*(i,t,e){const o=qI(i);if(o.ac){for(const s of t){if(o.ec.has(s)){Nt("SyncEngine","Adding an already active target "+s);continue}const l=yield wm(o.localStore,s),u=yield cy(o.localStore,l);yield PC(o,JE(l),u.targetId,!1),CC(o.remoteStore,u)}for(const s of e)o.ec.has(s)&&(yield xf(o.localStore,s,!1).then(()=>{py(o.remoteStore,s),Sm(o,s)}).catch(wl))}}),QE.apply(this,arguments)}function qI(i){const t=ln(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=VE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=dR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=by.bind(null,t),t.Zu.Go=OI.bind(null,t.eventManager),t.Zu.lc=RI.bind(null,t.eventManager),t}function UC(i){const t=ln(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=UE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=VI.bind(null,t),t}class gR{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,rt.Z)(function*(){e.wt=wC(t.databaseInfo.databaseId),e.sharedClientState=e.dc(t),e.persistence=e._c(t),yield e.persistence.start(),e.localStore=e.wc(t),e.gcScheduler=e.mc(t,e.localStore),e.indexBackfillerScheduler=e.gc(t,e.localStore)})()}mc(t,e){return null}gc(t,e){return null}wc(t){return cE(this.persistence,new mI,t.initialUser,this.wt)}_c(t){return new fI(dC.Ms,this.wt)}dc(t){return new wI}terminate(){var t=this;return(0,rt.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class mR extends gR{constructor(t,e,o){super(),this.yc=t,this.cacheSizeBytes=e,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,o=this;return(0,rt.Z)(function*(){yield e().call(o,t),yield o.yc.initialize(o,t),yield UC(o.yc.syncEngine),yield gy(o.yc.remoteStore),yield o.persistence.ci(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(t){return cE(this.persistence,new mI,t.initialUser,this.wt)}mc(t,e){return new qO(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}gc(t,e){const o=new Cs(e,this.persistence);return new ff(t.asyncQueue,o)}_c(t){const e=hC(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Ya.withCacheSize(this.cacheSizeBytes):Ya.DEFAULT;return new aE(this.synchronizeTabs,e,t.clientId,o,t.asyncQueue,xI(),bC(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(t){return new wI}}class YL extends mR{constructor(t,e){super(t,e,!1),this.yc=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,o=this;return(0,rt.Z)(function*(){yield e().call(o,t);const s=o.yc.syncEngine;o.sharedClientState instanceof _E&&(o.sharedClientState.syncEngine={kr:jI.bind(null,s),Or:GI.bind(null,s),Mr:fR.bind(null,s),Ri:zI.bind(null,s),Nr:UI.bind(null,s)},yield o.sharedClientState.start()),yield o.persistence.ci(function(){var l=(0,rt.Z)(function*(u){yield function pR(i,t){return WE.apply(this,arguments)}(o.yc.syncEngine,u),o.gcScheduler&&(u&&!o.gcScheduler.started?o.gcScheduler.start():u||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(u&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():u||o.indexBackfillerScheduler.stop())});return function(u){return l.apply(this,arguments)}}())})()}dc(t){const e=xI();if(!_E.V(e))throw new Mt(ot.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=hC(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new _E(e,t.asyncQueue,o,t.clientId,t.initialUser)}}class ZI{initialize(t,e){var o=this;return(0,rt.Z)(function*(){o.localStore||(o.localStore=t.localStore,o.sharedClientState=t.sharedClientState,o.datastore=o.createDatastore(e),o.remoteStore=o.createRemoteStore(e),o.eventManager=o.createEventManager(e),o.syncEngine=o.createSyncEngine(e,!t.synchronizeTabs),o.sharedClientState.onlineStateHandler=s=>LI(o.syncEngine,s,1),o.remoteStore.remoteSyncer.handleCredentialChange=WL.bind(null,o.syncEngine),yield MC(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(t){return new aR}createDatastore(t){const e=wC(t.databaseInfo.databaseId),o=new EI(t.databaseInfo);return new MI(t.authCredentials,t.appCheckCredentials,o,e)}createRemoteStore(t){return e=this.localStore,o=this.datastore,s=t.asyncQueue,l=g=>LI(this.syncEngine,g,0),u=CI.V()?new CI:new QO,new kI(e,o,s,l,u);var e,o,s,l,u}createSyncEngine(t,e){return function(o,s,l,u,g,_,w){const T=new uR(o,s,l,u,g,_);return w&&(T.ac=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,rt.Z)(function*(e){const o=ln(e);Nt("RemoteStore","RemoteStore shutting down."),o.lu.add(5),yield Cm(o),o.du.shutdown(),o._u.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function _R(i,t=10240){let e=0;return{read:()=>(0,rt.Z)(function*(){if(e<i.byteLength){const o={value:i.slice(e,e+t),done:!1};return e+=t,o}return{done:!0}})(),cancel:()=>(0,rt.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class XE{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ic(this.observer.next,t)}error(t){this.observer.error?this.Ic(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Tc(){this.muted=!0}Ic(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class JL{constructor(t,e){this.Ec=t,this.wt=e,this.metadata=new no,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(o=>{o&&o.Cu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ec.cancel()}getMetadata(){var t=this;return(0,rt.Z)(function*(){return t.metadata.promise})()}fc(){var t=this;return(0,rt.Z)(function*(){return yield t.getMetadata(),t.Rc()})()}Rc(){var t=this;return(0,rt.Z)(function*(){const e=yield t.bc();if(null===e)return null;const o=t.Ac.decode(e),s=Number(o);isNaN(s)&&t.Pc(`length string (${o}) is not valid number`);const l=yield t.vc(s);return new lR(JSON.parse(l),e.length+s)})()}Vc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}bc(){var t=this;return(0,rt.Z)(function*(){for(;t.Vc()<0&&!(yield t.Sc()););if(0===t.buffer.length)return null;const e=t.Vc();e<0&&t.Pc("Reached the end of bundle when a length string is expected.");const o=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),o})()}vc(t){var e=this;return(0,rt.Z)(function*(){for(;e.buffer.length<t;)(yield e.Sc())&&e.Pc("Reached the end of bundle when more is expected.");const o=e.Ac.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),o})()}Pc(t){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${t}`)}Sc(){var t=this;return(0,rt.Z)(function*(){const e=yield t.Ec.read();if(!e.done){const o=new Uint8Array(t.buffer.length+e.value.length);o.set(t.buffer),o.set(e.value,t.buffer.length),t.buffer=o}return e.done})()}}class jC{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,rt.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Mt(ot.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(s=(0,rt.Z)(function*(l,u){const g=ln(l),_=X_(g.wt)+"/documents",w={documents:u.map(F=>Hh(g.wt,F))},T=yield g.ao("BatchGetDocuments",_,w,u.length),D=new Map;T.forEach(F=>{const j=function ID(i,t){return"found"in t?function(e,o){$n(!!o.found);const s=cd(e,o.found.name),l=Ts(o.found.updateTime),u=new Vs({mapValue:{fields:o.found.fields}});return Er.newFoundDocument(s,l,u)}(i,t):"missing"in t?function(e,o){$n(!!o.missing),$n(!!o.readTime);const s=cd(e,o.missing),l=Ts(o.readTime);return Er.newNoDocument(s,l)}(i,t):mn()}(g.wt,F);D.set(j.key.toString(),j)});const O=[];return u.forEach(F=>{const j=D.get(F.toString());$n(!!j),O.push(j)}),O}),function(l,u){return s.apply(this,arguments)})(e.datastore,t);var s;return o.forEach(s=>e.recordVersion(s)),o})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(t.toString())}delete(t){this.write(new um(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,rt.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var o;t.mutations.forEach(o=>{e.delete(o.key.toString())}),e.forEach((o,s)=>{const l=on.fromPath(s);t.mutations.push(new Xw(l,t.precondition(l)))}),yield(o=(0,rt.Z)(function*(s,l){const u=ln(s),g=X_(u.wt)+"/documents",_={writes:l.map(w=>dm(u.wt,w))};yield u.ro("Commit",g,_)}),function(s,l){return o.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw mn();e=Xn.min()}const o=this.readVersions.get(t.key.toString());if(o){if(!e.isEqual(o))throw new Mt(ot.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Kr.updateTime(e):Kr.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Xn.min()))throw new Mt(ot.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kr.updateTime(e)}return Kr.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class QL{constructor(t,e,o,s,l){this.asyncQueue=t,this.datastore=e,this.options=o,this.updateFunction=s,this.deferred=l,this.Dc=o.maxAttempts,this.So=new SI(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var t=this;this.So.Io((0,rt.Z)(function*(){const e=new jC(t.datastore),o=t.xc(e);o&&o.then(s=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(s)}).catch(l=>{t.Nc(l)}))}).catch(s=>{t.Nc(s)})}))}xc(t){try{const e=this.updateFunction(t);return!M(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Nc(t){this.Dc>0&&this.kc(t)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(t)}kc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!vD(e)}return!1}}class $I{constructor(t,e,o,s){var l=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=o,this.databaseInfo=s,this.user=zo.UNAUTHENTICATED,this.clientId=tm.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var u=(0,rt.Z)(function*(g){Nt("FirestoreClient","Received user=",g.uid),yield l.authCredentialListener(g),l.user=g});return function(g){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(o,u=>(Nt("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var t=this;return(0,rt.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Mt(ot.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new no;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,rt.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(o){const s=Sf(o,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}function Rb(i,t){return zC.apply(this,arguments)}function zC(){return zC=(0,rt.Z)(function*(i,t){i.asyncQueue.verifyOperationInProgress(),Nt("FirestoreClient","Initializing OfflineComponentProvider");const e=yield i.getConfiguration();yield t.initialize(e);let o=e.initialUser;i.setCredentialChangeListener(function(){var s=(0,rt.Z)(function*(l){o.isEqual(l)||(yield _I(t.localStore,l),o=l)});return function(l){return s.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=t}),zC.apply(this,arguments)}function ex(i,t){return WI.apply(this,arguments)}function WI(){return WI=(0,rt.Z)(function*(i,t){i.asyncQueue.verifyOperationInProgress();const e=yield Pb(i);Nt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield t.initialize(e,o),i.setCredentialChangeListener(s=>IE(t.remoteStore,s)),i.setAppCheckTokenChangeListener((s,l)=>IE(t.remoteStore,l)),i.onlineComponents=t}),WI.apply(this,arguments)}function Pb(i){return GC.apply(this,arguments)}function GC(){return GC=(0,rt.Z)(function*(i){return i.offlineComponents||(Nt("FirestoreClient","Using default OfflineComponentProvider"),yield Rb(i,new gR)),i.offlineComponents}),GC.apply(this,arguments)}function qC(i){return ZC.apply(this,arguments)}function ZC(){return ZC=(0,rt.Z)(function*(i){return i.onlineComponents||(Nt("FirestoreClient","Using default OnlineComponentProvider"),yield ex(i,new ZI)),i.onlineComponents}),ZC.apply(this,arguments)}function yR(i){return Pb(i).then(t=>t.persistence)}function tx(i){return Pb(i).then(t=>t.localStore)}function KI(i){return qC(i).then(t=>t.remoteStore)}function nx(i){return qC(i).then(t=>t.syncEngine)}function Uh(i){return ix.apply(this,arguments)}function ix(){return ix=(0,rt.Z)(function*(i){const t=yield qC(i),e=t.eventManager;return e.onListen=$L.bind(null,t.syncEngine),e.onUnlisten=kb.bind(null,t.syncEngine),e}),ix.apply(this,arguments)}function YI(i,t,e={}){const o=new no;return i.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return function(s,l,u,g,_){const w=new XE({next:D=>{l.enqueueAndForget(()=>kC(s,T));const O=D.docs.has(u);!O&&D.fromCache?_.reject(new Mt(ot.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&D.fromCache&&g&&"server"===g.source?_.reject(new Mt(ot.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(D)},error:D=>_.reject(D)}),T=new RC(tu(u.path),w,{includeMetadataChanges:!0,Du:!0});return AE(s,T)}(yield Uh(i),i.asyncQueue,t,e,o)})),o.promise}function JI(i,t,e={}){const o=new no;return i.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return function(s,l,u,g,_){const w=new XE({next:D=>{l.enqueueAndForget(()=>kC(s,T)),D.fromCache&&"server"===g.source?_.reject(new Mt(ot.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(D)},error:D=>_.reject(D)}),T=new RC(u,w,{includeMetadataChanges:!0,Du:!0});return AE(s,T)}(yield Uh(i),i.asyncQueue,t,e,o)})),o.promise}const wR=new Map;function Sl(i,t,e){if(!e)throw new Mt(ot.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function eM(i,t,e,o){if(!0===t&&!0===o)throw new Mt(ot.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function $C(i){if(!on.isDocumentKey(i))throw new Mt(ot.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function tM(i){if(on.isDocumentKey(i))throw new Mt(ot.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function sa(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const t=(e=i).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof i?"a function":mn()}function Hi(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new Mt(ot.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=sa(i);throw new Mt(ot.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}function WC(i,t){if(t<=0)throw new Mt(ot.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${t}.`)}class nM{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Mt(ot.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Mt(ot.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,eM("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Nb{constructor(t,e,o){this._authCredentials=e,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nM({}),this._settingsFrozen=!1,t instanceof E?this._databaseId=t:(this._app=t,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Mt(ot.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new E(s.options.projectId)}(t))}get app(){if(!this._app)throw new Mt(ot.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Mt(ot.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nM(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new td;switch(e.type){case"gapi":const o=e.client;return $n(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new $a(o,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Mt(ot.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=wR.get(t);e&&(Nt("ComponentProvider","Removing Datastore"),wR.delete(t),e.terminate())}(this),Promise.resolve()}}class xr{constructor(t,e,o){this.converter=e,this._key=o,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pd(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new xr(this.firestore,t,this._key)}}class Bs{constructor(t,e,o){this.converter=e,this._query=o,this.type="query",this.firestore=t}withConverter(t){return new Bs(this.firestore,t,this._query)}}class pd extends Bs{constructor(t,e,o){super(t,e,tu(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new xr(this.firestore,null,new on(t))}withConverter(t){return new pd(this.firestore,t,this._path)}}function KC(i,t,...e){if(i=(0,re.m9)(i),Sl("collection","path",t),i instanceof Nb){const o=xi.fromString(t,...e);return tM(o),new pd(i,null,o)}{if(!(i instanceof xr||i instanceof pd))throw new Mt(ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(xi.fromString(t,...e));return tM(o),new pd(i.firestore,null,o)}}function Fb(i,t,...e){if(i=(0,re.m9)(i),1===arguments.length&&(t=tm.I()),Sl("doc","path",t),i instanceof Nb){const o=xi.fromString(t,...e);return $C(o),new xr(i,null,new on(o))}{if(!(i instanceof xr||i instanceof pd))throw new Mt(ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(xi.fromString(t,...e));return $C(o),new xr(i.firestore,i instanceof pd?i.converter:null,new on(o))}}function ox(i,t){return i=(0,re.m9)(i),t=(0,re.m9)(t),(i instanceof xr||i instanceof pd)&&(t instanceof xr||t instanceof pd)&&i.firestore===t.firestore&&i.path===t.path&&i.converter===t.converter}function rM(i,t){return i=(0,re.m9)(i),t=(0,re.m9)(t),i instanceof Bs&&t instanceof Bs&&i.firestore===t.firestore&&Z_(i._query,t._query)&&i.converter===t.converter}class sx{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new SI(this,"async_queue_retry"),this.Kc=()=>{const e=bC();e&&Nt("AsyncQueue","Visibility state changed to "+e.visibilityState),this.So.Eo()};const t=bC();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Gc(),this.Qc(t)}enterRestrictedMode(t){if(!this.Fc){this.Fc=!0,this.Uc=t||!1;const e=bC();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Kc)}}enqueue(t){if(this.Gc(),this.Fc)return new Promise(()=>{});const e=new no;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Mc.push(t),this.jc()))}jc(){var t=this;return(0,rt.Z)(function*(){if(0!==t.Mc.length){try{yield t.Mc[0](),t.Mc.shift(),t.So.reset()}catch(e){if(!Cl(e))throw e;Nt("AsyncQueue","Operation failed with retryable error: "+e)}t.Mc.length>0&&t.So.Io(()=>t.jc())}})()}Qc(t){const e=this.Oc.then(()=>(this.Lc=!0,t().catch(o=>{throw this.Bc=o,this.Lc=!1,Rr("INTERNAL UNHANDLED ERROR: ",function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),u}(o)),o}).then(o=>(this.Lc=!1,o))));return this.Oc=e,e}enqueueAfterDelay(t,e,o){this.Gc(),this.qc.indexOf(t)>-1&&(e=0);const s=Mb.createAndSchedule(this,t,e,o,l=>this.Wc(l));return this.$c.push(s),s}Gc(){this.Bc&&mn()}verifyOperationInProgress(){}zc(){var t=this;return(0,rt.Z)(function*(){let e;do{e=t.Oc,yield e}while(e!==t.Oc)})()}Hc(t){for(const e of this.$c)if(e.timerId===t)return!0;return!1}Jc(t){return this.zc().then(()=>{this.$c.sort((e,o)=>e.targetTimeMs-o.targetTimeMs);for(const e of this.$c)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.zc()})}Yc(t){this.qc.push(t)}Wc(t){const e=this.$c.indexOf(t);this.$c.splice(e,1)}}function fd(i){return function(t,e){if("object"!=typeof t||null===t)return!1;const o=t;for(const s of["next","error","complete"])if(s in o&&"function"==typeof o[s])return!0;return!1}(i)}class oM{constructor(){this._progressObserver={},this._taskCompletionResolver=new no,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,o){this._progressObserver={next:t,error:e,complete:o}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Wi extends Nb{constructor(t,e,o){super(t,e,o),this.type="firestore",this._queue=new sx,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||sM(this),this._firestoreClient.terminate()}}function rV(i=(0,oi.getApp)()){return(0,oi._getProvider)(i,"firestore").getImmediate()}function qo(i){return i._firestoreClient||sM(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function sM(i){var t;const e=i._freezeSettings(),o=(l=(null===(t=i._app)||void 0===t?void 0:t.options.appId)||"",new b(i._databaseId,l,i._persistenceKey,(g=e).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var l,g;i._firestoreClient=new $I(i._authCredentials,i._appCheckCredentials,i._queue,o)}function lx(i,t,e){const o=new no;return i.asyncQueue.enqueue((0,rt.Z)(function*(){try{yield Rb(i,e),yield ex(i,t),o.resolve()}catch(s){const l=s;if(!("FirebaseError"===(u=l).name?u.code===ot.FAILED_PRECONDITION||u.code===ot.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw l;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+l),o.reject(l)}var u})).then(()=>o.promise)}function ux(i){if(i._initialized||i._terminated)throw new Mt(ot.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class jh{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Mt(ot.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pr(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class su{constructor(t){this._byteString=t}static fromBase64String(t){try{return new su(as.fromBase64String(t))}catch(e){throw new Mt(ot.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new su(as.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class gd{constructor(t){this._methodName=t}}class Im{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Mt(ot.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Mt(ot.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ei(this._lat,t._lat)||ei(this._long,t._long)}}const uM=/^__.*__$/;class SR{constructor(t,e,o){this.data=t,this.fieldMask=e,this.fieldTransforms=o}toMutation(t,e){return null!==this.fieldMask?new ld(t,this.data,this.fieldMask,e,this.fieldTransforms):new Lh(t,this.data,e,this.fieldTransforms)}}class dx{constructor(t,e,o){this.data=t,this.fieldMask=e,this.fieldTransforms=o}toMutation(t,e){return new ld(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function hx(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mn()}}class YC{constructor(t,e,o,s,l,u){this.settings=t,this.databaseId=e,this.wt=o,this.ignoreUndefinedProperties=s,void 0===l&&this.Xc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(t){return new YC(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(t){var e;const o=null===(e=this.path)||void 0===e?void 0:e.child(t),s=this.ta({path:o,na:!1});return s.sa(t),s}ia(t){var e;const o=null===(e=this.path)||void 0===e?void 0:e.child(t),s=this.ta({path:o,na:!1});return s.Xc(),s}ra(t){return this.ta({path:void 0,na:!0})}oa(t){return Ey(t,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Xc(){if(this.path)for(let t=0;t<this.path.length;t++)this.sa(this.path.get(t))}sa(t){if(0===t.length)throw this.oa("Document fields must not be empty");if(hx(this.Zc)&&uM.test(t))throw this.oa('Document fields cannot begin and end with "__"')}}class DR{constructor(t,e,o){this.databaseId=t,this.ignoreUndefinedProperties=e,this.wt=o||wC(t)}aa(t,e,o,s=!1){return new YC({Zc:t,methodName:e,ca:o,path:Pr.emptyPath(),na:!1,ua:s},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Cy(i){const t=i._freezeSettings(),e=wC(i._databaseId);return new DR(i._databaseId,!!t.ignoreUndefinedProperties,e)}function px(i,t,e,o,s,l={}){const u=i.aa(l.merge||l.mergeFields?2:0,t,e,s);gx("Data must be an object, but it was:",u,o);const g=Lb(o,u);let _,w;if(l.merge)_=new Ls(u.fieldMask),w=u.fieldTransforms;else if(l.mergeFields){const T=[];for(const D of l.mergeFields){const O=JC(t,D,e);if(!u.contains(O))throw new Mt(ot.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);QC(T,O)||T.push(O)}_=new Ls(T),w=u.fieldTransforms.filter(D=>_.covers(D.field))}else _=null,w=u.fieldTransforms;return new SR(new Vs(g),_,w)}class Ty extends gd{_toFieldTransform(t){if(2!==t.Zc)throw t.oa(1===t.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ty}}function dM(i,t,e){return new YC({Zc:3,ca:t.settings.ca,methodName:i._methodName,na:e},t.databaseId,t.wt,t.ignoreUndefinedProperties)}class fx extends gd{_toFieldTransform(t){return new cm(t.path,new $_)}isEqual(t){return t instanceof fx}}class IR extends gd{constructor(t,e){super(t),this.ha=e}_toFieldTransform(t){const e=dM(this,t,!0),o=this.ha.map(l=>Mm(l,e)),s=new ad(o);return new cm(t.path,s)}isEqual(t){return this===t}}class sV extends gd{constructor(t,e){super(t),this.ha=e}_toFieldTransform(t){const e=dM(this,t,!0),o=this.ha.map(l=>Mm(l,e)),s=new Fh(o);return new cm(t.path,s)}isEqual(t){return this===t}}class aV extends gd{constructor(t,e){super(t),this.la=e}_toFieldTransform(t){const e=new yf(t.wt,$w(t.wt,this.la));return new cm(t.path,e)}isEqual(t){return this===t}}function hM(i,t,e,o){const s=i.aa(1,t,e);gx("Data must be an object, but it was:",s,o);const l=[],u=Vs.empty();Tl(o,(_,w)=>{const T=Vb(t,_,e);w=(0,re.m9)(w);const D=s.ia(T);if(w instanceof Ty)l.push(T);else{const O=Mm(w,D);null!=O&&(l.push(T),u.set(T,O))}});const g=new Ls(l);return new dx(u,g,s.fieldTransforms)}function pM(i,t,e,o,s,l){const u=i.aa(1,t,e),g=[JC(t,o,e)],_=[s];if(l.length%2!=0)throw new Mt(ot.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<l.length;O+=2)g.push(JC(t,l[O])),_.push(l[O+1]);const w=[],T=Vs.empty();for(let O=g.length-1;O>=0;--O)if(!QC(w,g[O])){const F=g[O];let j=_[O];j=(0,re.m9)(j);const Q=u.ia(F);if(j instanceof Ty)w.push(F);else{const ae=Mm(j,Q);null!=ae&&(w.push(F),T.set(F,ae))}}const D=new Ls(w);return new dx(T,D,u.fieldTransforms)}function MR(i,t,e,o=!1){return Mm(e,i.aa(o?4:3,t))}function Mm(i,t){if(fM(i=(0,re.m9)(i)))return gx("Unsupported field value:",t,i),Lb(i,t);if(i instanceof gd)return function(e,o){if(!hx(o.Zc))throw o.oa(`${e._methodName}() can only be used with update() and set()`);if(!o.path)throw o.oa(`${e._methodName}() is not currently supported inside arrays`);const s=e._toFieldTransform(o);s&&o.fieldTransforms.push(s)}(i,t),null;if(void 0===i&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,o){const s=[];let l=0;for(const u of e){let g=Mm(u,o.ra(l));null==g&&(g={nullValue:"NULL_VALUE"}),s.push(g),l++}return{arrayValue:{values:s}}}(i,t)}return function(e,o){if(null===(e=(0,re.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return $w(o.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const s=Tr.fromDate(e);return{timestampValue:Q_(o.wt,s)}}if(e instanceof Tr){const s=new Tr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Q_(o.wt,s)}}if(e instanceof Im)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof su)return{bytesValue:xD(o.wt,e._byteString)};if(e instanceof xr){const s=o.databaseId,l=e.firestore._databaseId;if(!l.isEqual(s))throw o.oa(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:BT(e.firestore._databaseId||o.databaseId,e._key.path)}}throw o.oa(`Unsupported field value: ${sa(e)}`)}(i,t)}function Lb(i,t){const e={};return id(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Tl(i,(o,s)=>{const l=Mm(s,t.ea(o));null!=l&&(e[o]=l)}),{mapValue:{fields:e}}}function fM(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Tr||i instanceof Im||i instanceof su||i instanceof xr||i instanceof gd)}function gx(i,t,e){if(!fM(e)||"object"!=typeof(o=e)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=sa(e);throw t.oa("an object"===o?i+" a custom object":i+" "+o)}var o}function JC(i,t,e){if((t=(0,re.m9)(t))instanceof jh)return t._internalPath;if("string"==typeof t)return Vb(i,t);throw Ey("Field path arguments must be of type string or ",i,!1,void 0,e)}const Am=new RegExp("[~\\*/\\[\\]]");function Vb(i,t,e){if(t.search(Am)>=0)throw Ey(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new jh(...t.split("."))._internalPath}catch{throw Ey(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function Ey(i,t,e,o,s){const l=o&&!o.isEmpty(),u=void 0!==s;let g=`Function ${t}() called with invalid data`;e&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(l||u)&&(_+=" (found",l&&(_+=` in field ${o}`),u&&(_+=` in document ${s}`),_+=")"),new Mt(ot.INVALID_ARGUMENT,g+i+_)}function QC(i,t){return i.some(e=>e.isEqual(t))}class Hb{constructor(t,e,o,s,l){this._firestore=t,this._userDataWriter=e,this._key=o,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new xr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new mx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(xy("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class mx extends Hb{data(){return super.data()}}function xy(i,t){return"string"==typeof t?Vb(i,t):t instanceof jh?t._internalPath:t._delegate._internalPath}class md{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Mf extends Hb{constructor(t,e,o,s,l,u){super(t,e,o,s,u),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new XC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const o=this._document.data.field(xy("DocumentSnapshot.get",t));if(null!==o)return this._userDataWriter.convertValue(o,e.serverTimestamps)}}}class XC extends Mf{data(t={}){return super.data(t)}}class km{constructor(t,e,o,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new md(s.hasPendingWrites,s.fromCache),this.query=o}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(o=>{t.call(e,new XC(this._firestore,this._userDataWriter,o.key,o,new md(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Mt(ot.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(o,s){if(o._snapshot.oldDocs.isEmpty()){let l=0;return o._snapshot.docChanges.map(u=>({type:"added",doc:new XC(o._firestore,o._userDataWriter,u.doc.key,u.doc,new md(o._snapshot.mutatedKeys.has(u.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:l++}))}{let l=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(u=>s||3!==u.type).map(u=>{const g=new XC(o._firestore,o._userDataWriter,u.doc.key,u.doc,new md(o._snapshot.mutatedKeys.has(u.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,w=-1;return 0!==u.type&&(_=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),1!==u.type&&(l=l.add(u.doc),w=l.indexOf(u.doc.key)),{type:lV(u.type),doc:g,oldIndex:_,newIndex:w}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function lV(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mn()}}function _x(i,t){return i instanceof Mf&&t instanceof Mf?i._firestore===t._firestore&&i._key.isEqual(t._key)&&(null===i._document?null===t._document:i._document.isEqual(t._document))&&i._converter===t._converter:i instanceof km&&t instanceof km&&i._firestore===t._firestore&&rM(i.query,t.query)&&i.metadata.isEqual(t.metadata)&&i._snapshot.isEqual(t._snapshot)}function gM(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Mt(ot.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bb{}function Af(i,...t){for(const e of t)i=e._apply(i);return i}class AR extends Bb{constructor(t,e,o){super(),this.fa=t,this.da=e,this._a=o,this.type="where"}_apply(t){const e=Cy(t.firestore),o=function(s,l,u,g,_,w,T){let D;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Mt(ot.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){CM(T,w);const F=[];for(const j of T)F.push(NR(g,s,j));D={arrayValue:{values:F}}}else D=NR(g,s,T)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||CM(T,w),D=MR(u,"where",T,"in"===w||"not-in"===w);const O=Hs.create(_,w,D);return function(F,j){if(j.ht()){const ae=Gw(F);if(null!==ae&&!ae.isEqual(j.field))throw new Mt(ot.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ae.toString()}' and '${j.field.toString()}'`);const Oe=zw(F);null!==Oe&&TM(0,j.field,Oe)}const Q=function(ae,Oe){for(const We of ae.filters)if(Oe.indexOf(We.op)>=0)return We.op;return null}(F,function(ae){switch(ae){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(j.op));if(null!==Q)throw new Mt(ot.INVALID_ARGUMENT,Q===j.op?`Invalid query. You cannot use more than one '${j.op.toString()}' filter.`:`Invalid query. You cannot use '${j.op.toString()}' filters with '${Q.toString()}' filters.`)}(s,O),O}(t._query,0,e,t.firestore._databaseId,this.fa,this.da,this._a);return new Bs(t.firestore,t.converter,function(s,l){const u=s.filters.concat([l]);return new Ka(s.path,s.collectionGroup,s.explicitOrderBy.slice(),u,s.limit,s.limitType,s.startAt,s.endAt)}(t._query,o))}}class _M extends Bb{constructor(t,e){super(),this.fa=t,this.wa=e,this.type="orderBy"}_apply(t){const e=function(o,s,l){if(null!==o.startAt)throw new Mt(ot.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new Mt(ot.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new eu(s,l);return function(g,_){if(null===zw(g)){const w=Gw(g);null!==w&&TM(0,w,_.field)}}(o,u),u}(t._query,this.fa,this.wa);return new Bs(t.firestore,t.converter,function(o,s){const l=o.explicitOrderBy.concat([s]);return new Ka(o.path,o.collectionGroup,l,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(t._query,e))}}class vM extends Bb{constructor(t,e,o){super(),this.type=t,this.ma=e,this.ga=o}_apply(t){return new Bs(t.firestore,t.converter,ET(t._query,this.ma,this.ga))}}class e1 extends Bb{constructor(t,e,o){super(),this.type=t,this.ya=e,this.pa=o}_apply(t){const e=PR(t,this.type,this.ya,this.pa);return new Bs(t.firestore,t.converter,(s=e,new Ka((o=t._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,s,o.endAt)));var o,s}}class t1 extends Bb{constructor(t,e,o){super(),this.type=t,this.ya=e,this.pa=o}_apply(t){const e=PR(t,this.type,this.ya,this.pa);return new Bs(t.firestore,t.converter,(s=e,new Ka((o=t._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,s)));var o,s}}function PR(i,t,e,o){if(e[0]=(0,re.m9)(e[0]),e[0]instanceof Hb)return function(s,l,u,g,_){if(!g)throw new Mt(ot.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const w=[];for(const T of lm(s))if(T.field.isKeyField())w.push(Rn(l,g.key));else{const D=g.data.field(T.field);if(c(D))throw new Mt(ot.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const O=T.field.canonicalString();throw new Mt(ot.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}w.push(D)}return new El(w,_)}(i._query,i.firestore._databaseId,t,e[0]._document,o);{const s=Cy(i.firestore);return function(l,u,g,_,w,T){const D=l.explicitOrderBy;if(w.length>D.length)throw new Mt(ot.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let F=0;F<w.length;F++){const j=w[F];if(D[F].field.isKeyField()){if("string"!=typeof j)throw new Mt(ot.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof j}`);if(!qw(l)&&-1!==j.indexOf("/"))throw new Mt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${j}' contains a slash.`);const Q=l.path.child(xi.fromString(j));if(!on.isDocumentKey(Q))throw new Mt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const ae=new on(Q);O.push(Rn(u,ae))}else{const Q=MR(g,_,j);O.push(Q)}}return new El(O,T)}(i._query,i.firestore._databaseId,s,t,e,o)}}function NR(i,t,e){if("string"==typeof(e=(0,re.m9)(e))){if(""===e)throw new Mt(ot.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qw(t)&&-1!==e.indexOf("/"))throw new Mt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const o=t.path.child(xi.fromString(e));if(!on.isDocumentKey(o))throw new Mt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Rn(i,new on(o))}if(e instanceof xr)return Rn(i,e._key);throw new Mt(ot.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sa(e)}.`)}function CM(i,t){if(!Array.isArray(i)||0===i.length)throw new Mt(ot.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(i.length>10)throw new Mt(ot.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function TM(i,t,e){if(!e.isEqual(t))throw new Mt(ot.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}const FR={maxAttempts:5};class EM{convertValue(t,e="none"){switch(fe(t)){case 0:return null;case 1:return t.booleanValue;case 2:return io(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(d(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw mn()}}convertObject(t,e){const o={};return Tl(t.fields,(s,l)=>{o[s]=this.convertValue(l,e)}),o}convertGeoPoint(t){return new Im(io(t.latitude),io(t.longitude))}convertArray(t,e){return(t.values||[]).map(o=>this.convertValue(o,e))}convertServerTimestamp(t,e){switch(e){case"previous":const o=p(t);return null==o?null:this.convertValue(o,e);case"estimate":return this.convertTimestamp(y(t));default:return null}}convertTimestamp(t){const e=sc(t);return new Tr(e.seconds,e.nanos)}convertDocumentKey(t,e){const o=xi.fromString(t);$n(RD(o));const s=new E(o.get(1),o.get(3)),l=new on(o.popFirst(5));return s.isEqual(e)||Rr(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}function yx(i,t,e){let o;return o=i?e&&(e.merge||e.mergeFields)?i.toFirestore(t,e):i.toFirestore(t):t,o}class uV extends EM{constructor(t){super(),this.firestore=t}convertBytes(t){return new su(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new xr(this.firestore,null,e)}}class LR{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Cy(t)}set(t,e,o){this._verifyNotCommitted();const s=Om(t,this._firestore),l=yx(s.converter,e,o),u=px(this._dataReader,"WriteBatch.set",s._key,l,null!==s.converter,o);return this._mutations.push(u.toMutation(s._key,Kr.none())),this}update(t,e,o,...s){this._verifyNotCommitted();const l=Om(t,this._firestore);let u;return u="string"==typeof(e=(0,re.m9)(e))||e instanceof jh?pM(this._dataReader,"WriteBatch.update",l._key,e,o,s):hM(this._dataReader,"WriteBatch.update",l._key,e),this._mutations.push(u.toMutation(l._key,Kr.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Om(t,this._firestore);return this._mutations=this._mutations.concat(new um(e._key,Kr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Mt(ot.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Om(i,t){if((i=(0,re.m9)(i)).firestore!==t)throw new Mt(ot.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Sy extends EM{constructor(t){super(),this.firestore=t}convertBytes(t){return new su(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new xr(this.firestore,null,e)}}function h(i,t,e){i=Hi(i,xr);const o=Hi(i.firestore,Wi),s=yx(i.converter,t,e);return k(o,[px(Cy(o),"setDoc",i._key,s,null!==i.converter,e).toMutation(i._key,Kr.none())])}function f(i,t,e,...o){i=Hi(i,xr);const s=Hi(i.firestore,Wi),l=Cy(s);let u;return u="string"==typeof(t=(0,re.m9)(t))||t instanceof jh?pM(l,"updateDoc",i._key,t,e,o):hM(l,"updateDoc",i._key,t),k(s,[u.toMutation(i._key,Kr.exists(!0))])}function m(i){return k(Hi(i.firestore,Wi),[new um(i._key,Kr.none())])}function v(i,t){const e=Hi(i.firestore,Wi),o=Fb(i),s=yx(i.converter,t);return k(e,[px(Cy(i.firestore),"addDoc",o._key,s,null!==i.converter,{}).toMutation(o._key,Kr.exists(!1))]).then(()=>o)}function C(i,...t){var e,o,s;i=(0,re.m9)(i);let l={includeMetadataChanges:!1},u=0;"object"!=typeof t[u]||fd(t[u])||(l=t[u],u++);const g={includeMetadataChanges:l.includeMetadataChanges};if(fd(t[u])){const D=t[u];t[u]=null===(e=D.next)||void 0===e?void 0:e.bind(D),t[u+1]=null===(o=D.error)||void 0===o?void 0:o.bind(D),t[u+2]=null===(s=D.complete)||void 0===s?void 0:s.bind(D)}let _,w,T;if(i instanceof xr)w=Hi(i.firestore,Wi),T=tu(i._key.path),_={next:D=>{t[u]&&t[u](N(w,i,D))},error:t[u+1],complete:t[u+2]};else{const D=Hi(i,Bs);w=Hi(D.firestore,Wi),T=D._query;const O=new Sy(w);_={next:F=>{t[u]&&t[u](new km(w,O,D,F))},error:t[u+1],complete:t[u+2]},gM(i._query)}return function(D,O,F,j){const Q=new XE(j),ae=new RC(O,Q,F);return D.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return AE(yield Uh(D),ae)})),()=>{Q.Tc(),D.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return kC(yield Uh(D),ae)}))}}(qo(w),T,g,_)}function k(i,t){return function(e,o){const s=new no;return e.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return function FE(i,t,e){return LE.apply(this,arguments)}(yield nx(e),o,s)})),s.promise}(qo(i),t)}function N(i,t,e){const o=e.docs.get(t._key),s=new Sy(i);return new Mf(i,s,t._key,o,new md(e.hasPendingWrites,e.fromCache),t.converter)}class H extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Cy(t)}get(t){const e=Om(t,this._firestore),o=new uV(this._firestore);return this._transaction.lookup([e._key]).then(s=>{if(!s||1!==s.length)return mn();const l=s[0];if(l.isFoundDocument())return new Hb(this._firestore,o,l.key,l,e.converter);if(l.isNoDocument())return new Hb(this._firestore,o,e._key,null,e.converter);throw mn()})}set(t,e,o){const s=Om(t,this._firestore),l=yx(s.converter,e,o),u=px(this._dataReader,"Transaction.set",s._key,l,null!==s.converter,o);return this._transaction.set(s._key,u),this}update(t,e,o,...s){const l=Om(t,this._firestore);let u;return u="string"==typeof(e=(0,re.m9)(e))||e instanceof jh?pM(this._dataReader,"Transaction.update",l._key,e,o,s):hM(this._dataReader,"Transaction.update",l._key,e),this._transaction.update(l._key,u),this}delete(t){const e=Om(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Om(t,this._firestore),o=new Sy(this._firestore);return super.get(t).then(s=>new Mf(this._firestore,o,e._key,s._document,new md(!1,!1),e.converter))}}!function(i,t=!0){Ca=oi.SDK_VERSION,(0,oi._registerComponent)(new po.wA("firestore",(e,{options:o})=>{const s=e.getProvider("app").getImmediate(),l=new Wi(s,new uf(e.getProvider("auth-internal")),new nd(e.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:t},o),l._setSettings(o),l},"PUBLIC")),(0,oi.registerVersion)(eb,"3.4.13",i),(0,oi.registerVersion)(eb,"3.4.13","esm2017")}();var pt=q(4004),kt={includeMetadataChanges:!1};function Bn(i,t){return void 0===t&&(t=kt),new Ie.y(function(e){return{unsubscribe:C(i,t,{next:e.next.bind(e),error:e.error.bind(e),complete:e.complete.bind(e)})}})}function Nr(i,t){return void 0===t&&(t={}),function Oi(i){return Bn(i,{includeMetadataChanges:!0})}(i).pipe((0,pt.U)(function(e){return kf(e,t)}))}function kf(i,t){void 0===t&&(t={});var e=i.data();return!i.exists()||"object"!=typeof e||null===e||t.idField&&(e[t.idField]=i.id),e}function bq(i,t){return void 0===t&&(t={}),function vq(i){return Bn(i,{includeMetadataChanges:!0}).pipe((0,pt.U)(function(t){return t.docs}))}(i).pipe((0,pt.U)(function(e){return e.map(function(o){return kf(o,t)})}))}class xM{constructor(t){return t}}const mV="firestore",HR=new a.OlP("angularfire2.firestore-instances");function Tq(i){return(t,e)=>{const o=t.runOutsideAngular(()=>i(e));return new xM(o)}}const Eq={provide:class wq{constructor(){return(0,St.vb)(mV)}},deps:[[new a.FiY,HR]]},xq={provide:xM,useFactory:function Cq(i,t){const e=(0,St.JM)(mV,i,t);return e&&new xM(e)},deps:[[new a.FiY,HR],Ur]};let Sq=(()=>{class i{constructor(){(0,br.KN)("angularfire",St.q4.full,"fst")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[xq,Eq]}),i})();function Dq(i,...t){return{ngModule:Sq,providers:[{provide:HR,useFactory:Tq(i),multi:!0,deps:[a.R0b,a.zs3,St.HU,ms,[new a.FiY,jo],[new a.FiY,_a],...t]}]}}const s1=(0,St.u3)(bq,!0),SM=(0,St.u3)(Nr,!0),Iq=(0,St.u3)(v,!0),zb=(0,St.u3)(KC,!0),Gb=(0,St.u3)(m,!0),oo=(0,St.u3)(Fb,!0),Mq=(0,St.u3)(rV,!0),Of=(0,St.u3)(h,!0),DM=(0,St.u3)(f,!0),a1=q(2707);class qb{static init(t){return a1.default.initializeApp(t),[]}static getFirestore(){return a1.default.firestore()}static _getFirestore(){return a1.default.firestore}static getAuth(){return a1.default.auth()}static getStorage(){return a1.default.storage()}static getFirestoreTimestamp(){return a1.default.firestore.Timestamp.now()}}q(8739);class _V{constructor(){this.listeners=new Map}appendArray(t){return qb._getFirestore().FieldValue.arrayUnion(t)}increment(t){return qb._getFirestore().FieldValue.increment(t)}genDocId(){return qb.getFirestore().collection("TEMP").doc().id}all(t){const e=qb.getFirestore().batch();for(let o of t.operations)o.getOperation(e);return new Promise((o,s)=>{e.commit().then(()=>{try{t.onComplete()}catch{}o()}).catch(l=>{try{t.onFail(l)}catch{}s(l)})})}create(t){return new Promise((e,o)=>{if(null==t.data||null==t.data)throw new Error("Error creating data. Data is null or undefined.");if(this.isCollectionPath(t.path)){let s=this.genCollectionReference(t.path).doc();s.set(t.data).then(()=>{try{t.onComplete(s.id)}catch{}e(s.id)}).catch(l=>{try{t.onFail(l)}catch{}o(l)})}else if(this.isDocumentPath(t.path)){let s=this.genDocumentReference(t.path);s.set(t.data).then(()=>{try{t.onComplete(s.id)}catch{}e(s.id)}).catch(l=>{try{t.onFail(l)}catch{}o(l)})}})}delete(t){return new Promise((e,o)=>{this.checkDocumentPathValidity(t.path),this.genDocumentReference(t.path).delete().then(()=>{try{t.onComplete()}catch{}e()}).catch(s=>{try{t.onFail(s)}catch{}o(s)})})}update(t){return new Promise((e,o)=>{this.checkDocumentPathValidity(t.path);const s=this.genDocumentReference(t.path);s.update(t.data).then(()=>{try{t.onComplete(s)}catch{}e(s)}).catch(l=>{try{t.onFail(l)}catch{}o(l)})})}getCollection(t){let e=this.genCollectionReference(t.path);return new Promise((null!=t.where||null!=t.where)&&t.where.length>0?(o,s)=>{let l;const u=Array(t.where)[0];for(let g=0;g<u.length;g++)l=null==l?u[g].getQuery(e):u[g].concatQuery(l);l.get().then(g=>{try{t.onComplete(g)}catch{}o(g)}).catch(g=>{try{t.onFail(g)}catch{}s(g)})}:(o,s)=>{e.get().then(l=>{try{t.onComplete(l)}catch{}o(l)}).catch(l=>{try{t.onFail(l)}catch{}s(l)})})}getDocument(t){return new Promise((e,o)=>{this.genDocumentReference(t.path).get().then(s=>{try{t.onComplete(s)}catch{}e(s)}).catch(s=>{try{t.onFail(s)}catch{}o(s)})})}listenToDocument(t){this.validateListenerName(t.name),this.addListener(t.name,this.genDocumentReference(t.path).onSnapshot(e=>{try{t.onUpdate(e)}catch{}}))}listenToCollection(t){this.validateListenerName(t.name);let e=this.genCollectionReference(t.path);if((null!=t.where||null!=t.where)&&t.where.length>0){let o;const s=Array(t.where)[0];for(let l=0;l<s.length;l++)o=null==o?s[l].getQuery(e):s[l].concatQuery(o);this.addListener(t.name,o.onSnapshot(l=>{try{t.onUpdate(l)}catch{}}))}else this.addListener(t.name,e.onSnapshot(o=>{try{t.onUpdate(o)}catch{}}))}genCollectionReference(t){this.checkCollectionPathValidity(t);const e=Array(t)[0];let o,s;for(let l=0;l<e.length;l++)l%2==0?o=null==o?qb.getFirestore().collection(e[l]):s.collection(e[l]):s=o.doc(e[l]);return o}genDocumentReference(t){this.checkDocumentPathValidity(t);const e=Array(t)[0];let o,s;for(let l=0;l<e.length;l++)l%2==0?o=null==o?qb.getFirestore().collection(e[l]):s.collection(e[l]):s=o.doc(e[l]);return s}addListener(t,e){return this.listeners.set(t,e),e}stopListeningTo(t){try{this.listeners.get(t)(),this.listeners.delete(t)}catch{}}stopListeningToAll(){this.listeners.forEach((t,e,o)=>{this.stopListeningTo(e)})}validateListenerName(t){if(null==t||null==t||"string"!=typeof t||t.trim().length<=0)throw"Listener name cannot be empty.";if(null!=this.listeners.get(t))throw`Listener name: ${t} is already taken.`}checkCollectionPathValidity(t){if(null==t||null==t||t.length<=0||!this.isCollectionPath(t))throw"Not a valid path to a collection."}isCollectionPath(t){return Array(t)[0].length%2==1}checkDocumentPathValidity(t){if(null==t||null==t||t.length<=0||!this.isDocumentPath(t))throw"Not a valid path to a document."}isDocumentPath(t){return Array(t)[0].length%2==0}}let Rf=(()=>{class i{constructor(e){this.firestore=e,this.firestoreDB=new _V}setProductsFromAllProducts(e){const o=oo(this.firestore,`products/${e.id}`);return Of(o,e)}deleteProductCollectionFromAllProducts(e){const o=oo(this.firestore,"products");return Gb(o)}deleteProductIDFromAllProducts(e){const o=oo(this.firestore,`products/${e.id}`);return Gb(o)}updateProductIDFromAllProducts(e){const o=oo(this.firestore,`products/${e.id}`);return Of(o,e)}getProductByIDFromAllProducts(e){const o=oo(this.firestore,`products/${e}`);return SM(o,{idField:"id"})}setProductsFromDiscountedProducts(e){const o=oo(this.firestore,`discountedProducts/${e.id}`);return Of(o,e)}deleteProductCollectionFromDiscountedProducts(e){const o=oo(this.firestore,"discountedProducts");return Gb(o)}deleteProductIDFromDiscountedProducts(e){const o=oo(this.firestore,`discountedProducts/${e.id}`);return Gb(o)}updateProductIDFromDiscountedProducts(e){const o=oo(this.firestore,`discountedProducts/${e.id}`);return Of(o,e)}getProductByIDFromDiscountedProducts(e){const o=oo(this.firestore,`discountedProducts/${e}`);return SM(o,{idField:"id"})}addToCart(e){const o=zb(this.firestore,"cart");return Iq(o,e)}setCart(e){const o=oo(this.firestore,`cart/${e.id}`);return Of(o,e)}getCart(){const e=zb(this.firestore,"cart");return s1(e,{idField:"id"})}updateCartPriceQuantity(e,o,s){const l=oo(this.firestore,`cart/${e}`);return DM(l,{quantity:o,totalPrice:s})}populateWithFirebaseTSFirestore(e){this.firestoreDB.create({path:["Cart",e.id],data:{id:e.id,placeholderImg:e.placeholderImg,title:e.title,variations:e.variations,oldPrice:e.oldPrice,discountedPrice:e.discountedPrice,quantity:e.quantity,totalPrice:e.totalPrice},onComplete:o=>{},onFail:o=>{alert(o.message)}})}deleteCartItem(e){const o=oo(this.firestore,`cart/${e}`);return Gb(o)}populateVoucher(e){const o=oo(this.firestore,`voucher/${e.type}`);return Of(o,e)}getVouchers(){const e=zb(this.firestore,"voucher");return s1(e,{idField:"type"})}setSelectedVouchers(e){const o=oo(this.firestore,`selectedVoucher/${e.id}`);return Of(o,e)}getSelectedVouchers(){const e=zb(this.firestore,"selectedVoucher");return s1(e,{idField:"id"})}getUserData(){const e=zb(this.firestore,"users");return s1(e,{idField:"id"})}getIndividualUser(e){const o=oo(this.firestore,`users/${e}`);return SM(o,{idField:"id"})}updateProfileImage(e,o){const s=oo(this.firestore,`users/${o}`);return DM(s,{photoURL:e})}setUserDetails(e,o){const s=oo(this.firestore,`userDetails/${e}`);return Of(s,o)}getUserDetails(e){const o=oo(this.firestore,`userDetails/${e}`);return SM(o,{idField:"id"})}updateUserDetails(e,o){const s=oo(this.firestore,`userDetails/${e}`);return DM(s,{address:o})}storeUserCard(e,o){console.log(o.id);const s=oo(this.firestore,`${e}/${o.id}`);return Of(s,o)}getUserCard(e){const o=zb(this.firestore,`${e}`);return s1(o,{idField:"id"})}deleteCard(e,o){let s=parseInt(o);const l=oo(this.firestore,`${e}/${s}`);return Gb(l)}addAddress(e,o,s){const l=oo(this.firestore,`${e}+_address/${o}`);return Of(l,s)}getUserAddress(e){const o=zb(this.firestore,`${e}+_address`);return s1(o,{idField:"id"})}updateAddress(e,o,s){const l=oo(this.firestore,`${e}+_address/${o}`);return DM(l,{address:s})}deleteAddress(e,o){const s=oo(this.firestore,`${e}+_address/${o}`);return Gb(s)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(xM))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Dy=q(3269),ur=q(8996);function fn(...i){const t=(0,Dy.yG)(i);return(0,ur.D)(i,t)}var aa=q(5577),_d=q(576);function Iy(i,t){return(0,_d.m)(t)?(0,aa.z)(i,t,1):(0,aa.z)(i,1)}var Zo=q(4482),Sr=q(5403);function Yr(i,t){return(0,Zo.e)((e,o)=>{let s=0;e.subscribe((0,Sr.x)(o,l=>i.call(t,l,s++)&&o.next(l)))})}class yV{}class vV{}class Ro{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const o=e.indexOf(":");if(o>0){const s=e.slice(0,o),l=s.toLowerCase(),u=e.slice(o+1).trim();this.maybeSetNormalizedName(s,l),this.headers.has(l)?this.headers.get(l).push(u):this.headers.set(l,[u])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let o=t[e];const s=e.toLowerCase();"string"==typeof o&&(o=[o]),o.length>0&&(this.headers.set(s,o),this.maybeSetNormalizedName(e,s))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Ro?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Ro;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Ro?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let o=t.value;if("string"==typeof o&&(o=[o]),0===o.length)return;this.maybeSetNormalizedName(t.name,e);const s=("a"===t.op?this.headers.get(e):void 0)||[];s.push(...o),this.headers.set(e,s);break;case"d":const l=t.value;if(l){let u=this.headers.get(e);if(!u)return;u=u.filter(g=>-1===l.indexOf(g)),0===u.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,u)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Aq{encodeKey(t){return bV(t)}encodeValue(t){return bV(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const Oq=/%(\d[a-f0-9])/gi,Rq={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function bV(i){return encodeURIComponent(i).replace(Oq,(t,e)=>Rq[e]??t)}function IM(i){return`${i}`}class ui{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Aq,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function kq(i,t){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(s=>{const l=s.indexOf("="),[u,g]=-1==l?[t.decodeKey(s),""]:[t.decodeKey(s.slice(0,l)),t.decodeValue(s.slice(l+1))],_=e.get(u)||[];_.push(g),e.set(u,_)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const o=t.fromObject[e],s=Array.isArray(o)?o.map(IM):[IM(o)];this.map.set(e,s)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(o=>{const s=t[o];Array.isArray(s)?s.forEach(l=>{e.push({param:o,value:l,op:"a"})}):e.push({param:o,value:s,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(o=>e+"="+this.encoder.encodeValue(o)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new ui({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(IM(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let o=this.map.get(t.param)||[];const s=o.indexOf(IM(t.value));-1!==s&&o.splice(s,1),o.length>0?this.map.set(t.param,o):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class jt{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function wV(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function CV(i){return typeof Blob<"u"&&i instanceof Blob}function TV(i){return typeof FormData<"u"&&i instanceof FormData}class Tx{constructor(t,e,o,s){let l;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function Pq(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==o?o:null,l=s):l=o,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new Ro),this.context||(this.context=new jt),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=e;else{const g=e.indexOf("?");this.urlWithParams=e+(-1===g?"?":g<e.length-1?"&":"")+u}}else this.params=new ui,this.urlWithParams=e}serializeBody(){return null===this.body?null:wV(this.body)||CV(this.body)||TV(this.body)||function Nq(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ui?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||TV(this.body)?null:CV(this.body)?this.body.type||null:wV(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ui?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,o=t.url||this.url,s=t.responseType||this.responseType,l=void 0!==t.body?t.body:this.body,u=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,g=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let _=t.headers||this.headers,w=t.params||this.params;const T=t.context??this.context;return void 0!==t.setHeaders&&(_=Object.keys(t.setHeaders).reduce((D,O)=>D.set(O,t.setHeaders[O]),_)),t.setParams&&(w=Object.keys(t.setParams).reduce((D,O)=>D.set(O,t.setParams[O]),w)),new Tx(e,o,l,{params:w,headers:_,context:T,reportProgress:g,responseType:s,withCredentials:u})}}var xs=(()=>((xs=xs||{})[xs.Sent=0]="Sent",xs[xs.UploadProgress=1]="UploadProgress",xs[xs.ResponseHeader=2]="ResponseHeader",xs[xs.DownloadProgress=3]="DownloadProgress",xs[xs.Response=4]="Response",xs[xs.User=5]="User",xs))();class BR{constructor(t,e=200,o="OK"){this.headers=t.headers||new Ro,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||o,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class UR extends BR{constructor(t={}){super(t),this.type=xs.ResponseHeader}clone(t={}){return new UR({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class MM extends BR{constructor(t={}){super(t),this.type=xs.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new MM({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class EV extends BR{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function jR(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let Po=(()=>{class i{constructor(e){this.handler=e}request(e,o,s={}){let l;if(e instanceof Tx)l=e;else{let _,w;_=s.headers instanceof Ro?s.headers:new Ro(s.headers),s.params&&(w=s.params instanceof ui?s.params:new ui({fromObject:s.params})),l=new Tx(e,o,void 0!==s.body?s.body:null,{headers:_,context:s.context,params:w,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const u=fn(l).pipe(Iy(_=>this.handler.handle(_)));if(e instanceof Tx||"events"===s.observe)return u;const g=u.pipe(Yr(_=>_ instanceof MM));switch(s.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return g.pipe((0,pt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return g.pipe((0,pt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return g.pipe((0,pt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return g.pipe((0,pt.U)(_=>_.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(e,o={}){return this.request("DELETE",e,o)}get(e,o={}){return this.request("GET",e,o)}head(e,o={}){return this.request("HEAD",e,o)}jsonp(e,o){return this.request("JSONP",e,{params:(new ui).append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,o={}){return this.request("OPTIONS",e,o)}patch(e,o,s={}){return this.request("PATCH",e,jR(s,o))}post(e,o,s={}){return this.request("POST",e,jR(s,o))}put(e,o,s={}){return this.request("PUT",e,jR(s,o))}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(yV))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();class xV{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const SV=new a.OlP("HTTP_INTERCEPTORS");let Fq=(()=>{class i{intercept(e,o){return o.handle(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();const Lq=/^\)\]\}',?\n/;let DV=(()=>{class i{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ie.y(o=>{const s=this.xhrFactory.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((F,j)=>s.setRequestHeader(F,j.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const F=e.detectContentTypeHeader();null!==F&&s.setRequestHeader("Content-Type",F)}if(e.responseType){const F=e.responseType.toLowerCase();s.responseType="json"!==F?F:"text"}const l=e.serializeBody();let u=null;const g=()=>{if(null!==u)return u;const F=s.statusText||"OK",j=new Ro(s.getAllResponseHeaders()),Q=function Vq(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(s)||e.url;return u=new UR({headers:j,status:s.status,statusText:F,url:Q}),u},_=()=>{let{headers:F,status:j,statusText:Q,url:ae}=g(),Oe=null;204!==j&&(Oe=typeof s.response>"u"?s.responseText:s.response),0===j&&(j=Oe?200:0);let We=j>=200&&j<300;if("json"===e.responseType&&"string"==typeof Oe){const ft=Oe;Oe=Oe.replace(Lq,"");try{Oe=""!==Oe?JSON.parse(Oe):null}catch(dt){Oe=ft,We&&(We=!1,Oe={error:dt,text:Oe})}}We?(o.next(new MM({body:Oe,headers:F,status:j,statusText:Q,url:ae||void 0})),o.complete()):o.error(new EV({error:Oe,headers:F,status:j,statusText:Q,url:ae||void 0}))},w=F=>{const{url:j}=g(),Q=new EV({error:F,status:s.status||0,statusText:s.statusText||"Unknown Error",url:j||void 0});o.error(Q)};let T=!1;const D=F=>{T||(o.next(g()),T=!0);let j={type:xs.DownloadProgress,loaded:F.loaded};F.lengthComputable&&(j.total=F.total),"text"===e.responseType&&!!s.responseText&&(j.partialText=s.responseText),o.next(j)},O=F=>{let j={type:xs.UploadProgress,loaded:F.loaded};F.lengthComputable&&(j.total=F.total),o.next(j)};return s.addEventListener("load",_),s.addEventListener("error",w),s.addEventListener("timeout",w),s.addEventListener("abort",w),e.reportProgress&&(s.addEventListener("progress",D),null!==l&&s.upload&&s.upload.addEventListener("progress",O)),s.send(l),o.next({type:xs.Sent}),()=>{s.removeEventListener("error",w),s.removeEventListener("abort",w),s.removeEventListener("load",_),s.removeEventListener("timeout",w),e.reportProgress&&(s.removeEventListener("progress",D),null!==l&&s.upload&&s.upload.removeEventListener("progress",O)),s.readyState!==s.DONE&&s.abort()}})}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Vo))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();const zR=new a.OlP("XSRF_COOKIE_NAME"),GR=new a.OlP("XSRF_HEADER_NAME");class IV{}let Hq=(()=>{class i{constructor(e,o,s){this.doc=e,this.platform=o,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=ai(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(ve),a.LFG(a.Lbi),a.LFG(zR))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})(),qR=(()=>{class i{constructor(e,o){this.tokenService=e,this.headerName=o}intercept(e,o){const s=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||s.startsWith("http://")||s.startsWith("https://"))return o.handle(e);const l=this.tokenService.getToken();return null!==l&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,l)})),o.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(IV),a.LFG(GR))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})(),Bq=(()=>{class i{constructor(e,o){this.backend=e,this.injector=o,this.chain=null}handle(e){if(null===this.chain){const o=this.injector.get(SV,[]);this.chain=o.reduceRight((s,l)=>new xV(s,l),this.backend)}return this.chain.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(vV),a.LFG(a.zs3))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})(),Uq=(()=>{class i{static disable(){return{ngModule:i,providers:[{provide:qR,useClass:Fq}]}}static withOptions(e={}){return{ngModule:i,providers:[e.cookieName?{provide:zR,useValue:e.cookieName}:[],e.headerName?{provide:GR,useValue:e.headerName}:[]]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[qR,{provide:SV,useExisting:qR,multi:!0},{provide:IV,useClass:Hq},{provide:zR,useValue:"XSRF-TOKEN"},{provide:GR,useValue:"X-XSRF-TOKEN"}]}),i})(),jq=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[Po,{provide:yV,useClass:Bq},DV,{provide:vV,useExisting:DV}],imports:[Uq.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),i})(),Zb=(()=>{class i{constructor(e){this.http=e,this.status=["OUTOFSTOCK","INSTOCK","LOWSTOCK"],this.productNames=["Bamboo Watch","Black Watch","Blue Band","Blue T-Shirt","Bracelet","Brown Purse","Chakra Bracelet","Galaxy Earrings","Game Controller","Gaming Set","Gold Phone Case","Green Earbuds","Green T-Shirt","Grey T-Shirt","Headphones","Light Green T-Shirt","Lime Band","Mini Speakers","Painted Phone Case","Pink Band","Pink Purse","Purple Band","Purple Gemstone Necklace","Purple T-Shirt","Shoes","Sneakers","Teal T-Shirt","Yellow Earbuds","Yoga Mat","Yoga Set"]}getDiscountedProducts(){return this.http.get("/assets/data/discountedProducts.json").toPromise().then(e=>e.data).then(e=>e)}getAllProducts(){return this.http.get("/assets/data/products.json").toPromise().then(e=>e.data).then(e=>e)}getAllProductsDetails(){return this.http.get("/assets/data/productDetails.json").toPromise().then(e=>e.data).then(e=>e)}getCartItems(){return this.http.get("/assets/data/cart.json").toPromise().then(e=>e.data).then(e=>e)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Po))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();class ls extends Ft.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:o}=this;if(t)throw e;return this._throwIfClosed(),o}next(t){super.next(this._value=t)}}const{isArray:zq}=Array,{getPrototypeOf:Gq,prototype:qq,keys:Zq}=Object;function MV(i){if(1===i.length){const t=i[0];if(zq(t))return{args:t,keys:null};if(function $q(i){return i&&"object"==typeof i&&Gq(i)===qq}(t)){const e=Zq(t);return{args:e.map(o=>t[o]),keys:e}}}return{args:i,keys:null}}var l1=q(4671);const{isArray:Wq}=Array;function ZR(i){return(0,pt.U)(t=>function Kq(i,t){return Wq(t)?i(...t):i(t)}(i,t))}function AV(i,t){return i.reduce((e,o,s)=>(e[o]=t[s],e),{})}var Yq=q(9672);function Ex(...i){const t=(0,Dy.yG)(i),e=(0,Dy.jO)(i),{args:o,keys:s}=MV(i);if(0===o.length)return(0,ur.D)([],t);const l=new Ie.y(function Jq(i,t,e=l1.y){return o=>{kV(t,()=>{const{length:s}=i,l=new Array(s);let u=s,g=s;for(let _=0;_<s;_++)kV(t,()=>{const w=(0,ur.D)(i[_],t);let T=!1;w.subscribe((0,Sr.x)(o,D=>{l[_]=D,T||(T=!0,g--),g||o.next(e(l.slice()))},()=>{--u||o.complete()}))},o)},o)}}(o,t,s?u=>AV(s,u):l1.y));return e?l.pipe(ZR(e)):l}function kV(i,t,e){i?(0,Yq.f)(e,i,t):t()}var xx=q(8189);function c1(...i){return function Qq(){return(0,xx.J)(1)}()((0,ur.D)(i,(0,Dy.yG)(i)))}var yd=q(8421);function $R(i){return new Ie.y(t=>{(0,yd.Xf)(i()).subscribe(t)})}var Xq=q(9635);function u1(i,t){const e=(0,_d.m)(i)?i:()=>i,o=s=>s.error(e());return new Ie.y(t?s=>t.schedule(o,0,s):o)}const d1=(0,q(3888).d)(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});var Rm=q(515),h1=q(727);function WR(){return(0,Zo.e)((i,t)=>{let e=null;i._refCount++;const o=(0,Sr.x)(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const s=i._connection,l=e;e=null,s&&(!l||s===l)&&s.unsubscribe(),t.unsubscribe()});i.subscribe(o),o.closed||(e=i.connect())})}class OV extends Ie.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Zo.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new h1.w0;const e=this.getSubject();t.add(this.source.subscribe((0,Sr.x)(e,void 0,()=>{this._teardown(),e.complete()},o=>{this._teardown(),e.error(o)},()=>this._teardown()))),t.closed&&(this._connection=null,t=h1.w0.EMPTY)}return t}refCount(){return WR()(this)}}function Dr(i,t){return(0,Zo.e)((e,o)=>{let s=null,l=0,u=!1;const g=()=>u&&!s&&o.complete();e.subscribe((0,Sr.x)(o,_=>{s?.unsubscribe();let w=0;const T=l++;(0,yd.Xf)(i(_,T)).subscribe(s=(0,Sr.x)(o,D=>o.next(t?t(_,D,T,w++):D),()=>{s=null,g()}))},()=>{u=!0,g()}))})}function bo(i){return i<=0?()=>Rm.E:(0,Zo.e)((t,e)=>{let o=0;t.subscribe((0,Sr.x)(e,s=>{++o<=i&&(e.next(s),i<=o&&e.complete())}))})}function Pf(...i){const t=(0,Dy.yG)(i);return(0,Zo.e)((e,o)=>{(t?c1(i,e,t):c1(i,e)).subscribe(o)})}function AM(i){return(0,Zo.e)((t,e)=>{let o=!1;t.subscribe((0,Sr.x)(e,s=>{o=!0,e.next(s)},()=>{o||e.next(i),e.complete()}))})}function RV(i=tZ){return(0,Zo.e)((t,e)=>{let o=!1;t.subscribe((0,Sr.x)(e,s=>{o=!0,e.next(s)},()=>o?e.complete():e.error(i())))})}function tZ(){return new d1}function Pm(i,t){const e=arguments.length>=2;return o=>o.pipe(i?Yr((s,l)=>i(s,l,o)):l1.y,bo(1),e?AM(t):RV(()=>new d1))}var $o=q(8505);function Nm(i){return(0,Zo.e)((t,e)=>{let l,o=null,s=!1;o=t.subscribe((0,Sr.x)(e,void 0,void 0,u=>{l=(0,yd.Xf)(i(u,Nm(i)(t))),o?(o.unsubscribe(),o=null,l.subscribe(e)):s=!0})),s&&(o.unsubscribe(),o=null,l.subscribe(e))})}function nZ(i,t,e,o,s){return(l,u)=>{let g=e,_=t,w=0;l.subscribe((0,Sr.x)(u,T=>{const D=w++;_=g?i(_,T,D):(g=!0,T),o&&u.next(_)},s&&(()=>{g&&u.next(_),u.complete()})))}}function $b(i,t){return(0,Zo.e)(nZ(i,t,arguments.length>=2,!0))}function KR(i){return i<=0?()=>Rm.E:(0,Zo.e)((t,e)=>{let o=[];t.subscribe((0,Sr.x)(e,s=>{o.push(s),i<o.length&&o.shift()},()=>{for(const s of o)e.next(s);e.complete()},void 0,()=>{o=null}))})}function PV(i,t){const e=arguments.length>=2;return o=>o.pipe(i?Yr((s,l)=>i(s,l,o)):l1.y,KR(1),e?AM(t):RV(()=>new d1))}function Sx(i){return(0,Zo.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}const Ii="primary";class rZ{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function p1(i){return new rZ(i)}function oZ(i,t,e){const o=e.path.split("/");if(o.length>i.length||"full"===e.pathMatch&&(t.hasChildren()||o.length<i.length))return null;const s={};for(let l=0;l<o.length;l++){const u=o[l],g=i[l];if(u.startsWith(":"))s[u.substring(1)]=g;else if(u!==g.path)return null}return{consumed:i.slice(0,o.length),posParams:s}}function Nf(i,t){const e=i?Object.keys(i):void 0,o=t?Object.keys(t):void 0;if(!e||!o||e.length!=o.length)return!1;let s;for(let l=0;l<e.length;l++)if(s=e[l],!FV(i[s],t[s]))return!1;return!0}function FV(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const e=[...i].sort(),o=[...t].sort();return e.every((s,l)=>o[l]===s)}return i===t}function LV(i){return Array.prototype.concat.apply([],i)}function VV(i){return i.length>0?i[i.length-1]:null}function Ea(i,t){for(const e in i)i.hasOwnProperty(e)&&t(i[e],e)}function Fm(i){return(0,a.CqO)(i)?i:(0,a.QGY)(i)?(0,ur.D)(Promise.resolve(i)):fn(i)}const lZ={exact:function UV(i,t,e){if(!Kb(i.segments,t.segments)||!kM(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const o in t.children)if(!i.children[o]||!UV(i.children[o],t.children[o],e))return!1;return!0},subset:jV},HV={exact:function cZ(i,t){return Nf(i,t)},subset:function uZ(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>FV(i[e],t[e]))},ignored:()=>!0};function BV(i,t,e){return lZ[e.paths](i.root,t.root,e.matrixParams)&&HV[e.queryParams](i.queryParams,t.queryParams)&&!("exact"===e.fragment&&i.fragment!==t.fragment)}function jV(i,t,e){return zV(i,t,t.segments,e)}function zV(i,t,e,o){if(i.segments.length>e.length){const s=i.segments.slice(0,e.length);return!(!Kb(s,e)||t.hasChildren()||!kM(s,e,o))}if(i.segments.length===e.length){if(!Kb(i.segments,e)||!kM(i.segments,e,o))return!1;for(const s in t.children)if(!i.children[s]||!jV(i.children[s],t.children[s],o))return!1;return!0}{const s=e.slice(0,i.segments.length),l=e.slice(i.segments.length);return!!(Kb(i.segments,s)&&kM(i.segments,s,o)&&i.children[Ii])&&zV(i.children[Ii],t,l,o)}}function kM(i,t,e){return t.every((o,s)=>HV[e](i[s].parameters,o.parameters))}class Wb{constructor(t,e,o){this.root=t,this.queryParams=e,this.fragment=o}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=p1(this.queryParams)),this._queryParamMap}toString(){return pZ.serialize(this)}}class Ri{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Ea(e,(o,s)=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return OM(this)}}class Dx{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=p1(this.parameters)),this._parameterMap}toString(){return WV(this)}}function Kb(i,t){return i.length===t.length&&i.every((e,o)=>e.path===t[o].path)}class GV{}class qV{parse(t){const e=new CZ(t);return new Wb(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Ix(t.root,!0)}`,o=function mZ(i){const t=Object.keys(i).map(e=>{const o=i[e];return Array.isArray(o)?o.map(s=>`${RM(e)}=${RM(s)}`).join("&"):`${RM(e)}=${RM(o)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams),s="string"==typeof t.fragment?`#${function fZ(i){return encodeURI(i)}(t.fragment)}`:"";return`${e}${o}${s}`}}const pZ=new qV;function OM(i){return i.segments.map(t=>WV(t)).join("/")}function Ix(i,t){if(!i.hasChildren())return OM(i);if(t){const e=i.children[Ii]?Ix(i.children[Ii],!1):"",o=[];return Ea(i.children,(s,l)=>{l!==Ii&&o.push(`${l}:${Ix(s,!1)}`)}),o.length>0?`${e}(${o.join("//")})`:e}{const e=function hZ(i,t){let e=[];return Ea(i.children,(o,s)=>{s===Ii&&(e=e.concat(t(o,s)))}),Ea(i.children,(o,s)=>{s!==Ii&&(e=e.concat(t(o,s)))}),e}(i,(o,s)=>s===Ii?[Ix(i.children[Ii],!1)]:[`${s}:${Ix(o,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[Ii]?`${OM(i)}/${e[0]}`:`${OM(i)}/(${e.join("//")})`}}function ZV(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function RM(i){return ZV(i).replace(/%3B/gi,";")}function JR(i){return ZV(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function PM(i){return decodeURIComponent(i)}function $V(i){return PM(i.replace(/\+/g,"%20"))}function WV(i){return`${JR(i.path)}${function gZ(i){return Object.keys(i).map(t=>`;${JR(t)}=${JR(i[t])}`).join("")}(i.parameters)}`}const _Z=/^[^\/()?;=#]+/;function NM(i){const t=i.match(_Z);return t?t[0]:""}const yZ=/^[^=?&#]+/,bZ=/^[^&#]+/;class CZ{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ri([],{}):new Ri([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(o[Ii]=new Ri(t,e)),o}parseSegment(){const t=NM(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new a.vHH(4009,!1);return this.capture(t),new Dx(PM(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=NM(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){const s=NM(this.remaining);s&&(o=s,this.capture(o))}t[PM(e)]=PM(o)}parseQueryParam(t){const e=function vZ(i){const t=i.match(yZ);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){const u=function wZ(i){const t=i.match(bZ);return t?t[0]:""}(this.remaining);u&&(o=u,this.capture(o))}const s=$V(e),l=$V(o);if(t.hasOwnProperty(s)){let u=t[s];Array.isArray(u)||(u=[u],t[s]=u),u.push(l)}else t[s]=l}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const o=NM(this.remaining),s=this.remaining[o.length];if("/"!==s&&")"!==s&&";"!==s)throw new a.vHH(4010,!1);let l;o.indexOf(":")>-1?(l=o.slice(0,o.indexOf(":")),this.capture(l),this.capture(":")):t&&(l=Ii);const u=this.parseChildren();e[l]=1===Object.keys(u).length?u[Ii]:new Ri([],u),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new a.vHH(4011,!1)}}function QR(i){return i.segments.length>0?new Ri([],{[Ii]:i}):i}function FM(i){const t={};for(const o of Object.keys(i.children)){const l=FM(i.children[o]);(l.segments.length>0||l.hasChildren())&&(t[o]=l)}return function TZ(i){if(1===i.numberOfChildren&&i.children[Ii]){const t=i.children[Ii];return new Ri(i.segments.concat(t.segments),t.children)}return i}(new Ri(i.segments,t))}function Yb(i){return i instanceof Wb}function SZ(i,t,e,o,s){if(0===e.length)return f1(t.root,t.root,t.root,o,s);const l=function JV(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new YV(!0,0,i);let t=0,e=!1;const o=i.reduce((s,l,u)=>{if("object"==typeof l&&null!=l){if(l.outlets){const g={};return Ea(l.outlets,(_,w)=>{g[w]="string"==typeof _?_.split("/"):_}),[...s,{outlets:g}]}if(l.segmentPath)return[...s,l.segmentPath]}return"string"!=typeof l?[...s,l]:0===u?(l.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?e=!0:".."===g?t++:""!=g&&s.push(g))}),s):[...s,l]},[]);return new YV(e,t,o)}(e);return l.toRoot()?f1(t.root,t.root,new Ri([],{}),o,s):function u(_){const w=function IZ(i,t,e,o){if(i.isAbsolute)return new g1(t.root,!0,0);if(-1===o)return new g1(e,e===t.root,0);return function QV(i,t,e){let o=i,s=t,l=e;for(;l>s;){if(l-=s,o=o.parent,!o)throw new a.vHH(4005,!1);s=o.segments.length}return new g1(o,!1,s-l)}(e,o+(Mx(i.commands[0])?0:1),i.numberOfDoubleDots)}(l,t,i.snapshot?._urlSegment,_),T=w.processChildren?kx(w.segmentGroup,w.index,l.commands):eP(w.segmentGroup,w.index,l.commands);return f1(t.root,w.segmentGroup,T,o,s)}(i.snapshot?._lastPathIndex)}function Mx(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function Ax(i){return"object"==typeof i&&null!=i&&i.outlets}function f1(i,t,e,o,s){let u,l={};o&&Ea(o,(_,w)=>{l[w]=Array.isArray(_)?_.map(T=>`${T}`):`${_}`}),u=i===t?e:KV(i,t,e);const g=QR(FM(u));return new Wb(g,l,s)}function KV(i,t,e){const o={};return Ea(i.children,(s,l)=>{o[l]=s===t?e:KV(s,t,e)}),new Ri(i.segments,o)}class YV{constructor(t,e,o){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=o,t&&o.length>0&&Mx(o[0]))throw new a.vHH(4003,!1);const s=o.find(Ax);if(s&&s!==VV(o))throw new a.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class g1{constructor(t,e,o){this.segmentGroup=t,this.processChildren=e,this.index=o}}function eP(i,t,e){if(i||(i=new Ri([],{})),0===i.segments.length&&i.hasChildren())return kx(i,t,e);const o=function AZ(i,t,e){let o=0,s=t;const l={match:!1,pathIndex:0,commandIndex:0};for(;s<i.segments.length;){if(o>=e.length)return l;const u=i.segments[s],g=e[o];if(Ax(g))break;const _=`${g}`,w=o<e.length-1?e[o+1]:null;if(s>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!e3(_,w,u))return l;o+=2}else{if(!e3(_,{},u))return l;o++}s++}return{match:!0,pathIndex:s,commandIndex:o}}(i,t,e),s=e.slice(o.commandIndex);if(o.match&&o.pathIndex<i.segments.length){const l=new Ri(i.segments.slice(0,o.pathIndex),{});return l.children[Ii]=new Ri(i.segments.slice(o.pathIndex),i.children),kx(l,0,s)}return o.match&&0===s.length?new Ri(i.segments,{}):o.match&&!i.hasChildren()?tP(i,t,e):o.match?kx(i,0,s):tP(i,t,e)}function kx(i,t,e){if(0===e.length)return new Ri(i.segments,{});{const o=function MZ(i){return Ax(i[0])?i[0].outlets:{[Ii]:i}}(e),s={};return Ea(o,(l,u)=>{"string"==typeof l&&(l=[l]),null!==l&&(s[u]=eP(i.children[u],t,l))}),Ea(i.children,(l,u)=>{void 0===o[u]&&(s[u]=l)}),new Ri(i.segments,s)}}function tP(i,t,e){const o=i.segments.slice(0,t);let s=0;for(;s<e.length;){const l=e[s];if(Ax(l)){const _=kZ(l.outlets);return new Ri(o,_)}if(0===s&&Mx(e[0])){o.push(new Dx(i.segments[t].path,XV(e[0]))),s++;continue}const u=Ax(l)?l.outlets[Ii]:`${l}`,g=s<e.length-1?e[s+1]:null;u&&g&&Mx(g)?(o.push(new Dx(u,XV(g))),s+=2):(o.push(new Dx(u,{})),s++)}return new Ri(o,{})}function kZ(i){const t={};return Ea(i,(e,o)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[o]=tP(new Ri([],{}),0,e))}),t}function XV(i){const t={};return Ea(i,(e,o)=>t[o]=`${e}`),t}function e3(i,t,e){return i==e.path&&Nf(t,e.parameters)}class Lm{constructor(t,e){this.id=t,this.url=e}}class LM extends Lm{constructor(t,e,o="imperative",s=null){super(t,e),this.type=0,this.navigationTrigger=o,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ff extends Lm{constructor(t,e,o){super(t,e),this.urlAfterRedirects=o,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class VM extends Lm{constructor(t,e,o,s){super(t,e),this.reason=o,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class t3 extends Lm{constructor(t,e,o,s){super(t,e),this.error=o,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class OZ extends Lm{constructor(t,e,o,s){super(t,e),this.urlAfterRedirects=o,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RZ extends Lm{constructor(t,e,o,s){super(t,e),this.urlAfterRedirects=o,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PZ extends Lm{constructor(t,e,o,s,l){super(t,e),this.urlAfterRedirects=o,this.state=s,this.shouldActivate=l,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class NZ extends Lm{constructor(t,e,o,s){super(t,e),this.urlAfterRedirects=o,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class FZ extends Lm{constructor(t,e,o,s){super(t,e),this.urlAfterRedirects=o,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class LZ{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class VZ{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class HZ{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BZ{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UZ{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class n3{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class r3{constructor(t,e,o){this.routerEvent=t,this.position=e,this.anchor=o,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class o3{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=nP(t,this._root);return e?e.children.map(o=>o.value):[]}firstChild(t){const e=nP(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=iP(t,this._root);return e.length<2?[]:e[e.length-2].children.map(s=>s.value).filter(s=>s!==t)}pathFromRoot(t){return iP(t,this._root).map(e=>e.value)}}function nP(i,t){if(i===t.value)return t;for(const e of t.children){const o=nP(i,e);if(o)return o}return null}function iP(i,t){if(i===t.value)return[t];for(const e of t.children){const o=iP(i,e);if(o.length)return o.unshift(t),o}return[]}class Vm{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function m1(i){const t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}class s3 extends o3{constructor(t,e){super(t),this.snapshot=e,rP(this,t)}toString(){return this.snapshot.toString()}}function a3(i,t){const e=function zZ(i,t){const u=new HM([],{},{},"",{},Ii,t,null,i.root,-1,{});return new c3("",new Vm(u,[]))}(i,t),o=new ls([new Dx("",{})]),s=new ls({}),l=new ls({}),u=new ls({}),g=new ls(""),_=new vd(o,s,u,g,l,Ii,t,e.root);return _.snapshot=e.root,new s3(new Vm(_,[]),e)}class vd{constructor(t,e,o,s,l,u,g,_){this.url=t,this.params=e,this.queryParams=o,this.fragment=s,this.data=l,this.outlet=u,this.component=g,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(t=>p1(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(t=>p1(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function l3(i,t="emptyOnly"){const e=i.pathFromRoot;let o=0;if("always"!==t)for(o=e.length-1;o>=1;){const s=e[o],l=e[o-1];if(s.routeConfig&&""===s.routeConfig.path)o--;else{if(l.component)break;o--}}return function GZ(i){return i.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(o))}class HM{constructor(t,e,o,s,l,u,g,_,w,T,D,O){this.url=t,this.params=e,this.queryParams=o,this.fragment=s,this.data=l,this.outlet=u,this.component=g,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=T,this._correctedLastPathIndex=O??T,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=p1(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=p1(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(o=>o.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class c3 extends o3{constructor(t,e){super(e),this.url=t,rP(this,e)}toString(){return u3(this._root)}}function rP(i,t){t.value._routerState=i,t.children.forEach(e=>rP(i,e))}function u3(i){const t=i.children.length>0?` { ${i.children.map(u3).join(", ")} } `:"";return`${i.value}${t}`}function oP(i){if(i.snapshot){const t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,Nf(t.queryParams,e.queryParams)||i.queryParams.next(e.queryParams),t.fragment!==e.fragment&&i.fragment.next(e.fragment),Nf(t.params,e.params)||i.params.next(e.params),function sZ(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!Nf(i[e],t[e]))return!1;return!0}(t.url,e.url)||i.url.next(e.url),Nf(t.data,e.data)||i.data.next(e.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function sP(i,t){const e=Nf(i.params,t.params)&&function dZ(i,t){return Kb(i,t)&&i.every((e,o)=>Nf(e.parameters,t[o].parameters))}(i.url,t.url);return e&&!(!i.parent!=!t.parent)&&(!i.parent||sP(i.parent,t.parent))}function Ox(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){const o=e.value;o._futureSnapshot=t.value;const s=function ZZ(i,t,e){return t.children.map(o=>{for(const s of e.children)if(i.shouldReuseRoute(o.value,s.value.snapshot))return Ox(i,o,s);return Ox(i,o)})}(i,t,e);return new Vm(o,s)}{if(i.shouldAttach(t.value)){const l=i.retrieve(t.value);if(null!==l){const u=l.route;return u.value._futureSnapshot=t.value,u.children=t.children.map(g=>Ox(i,g)),u}}const o=function $Z(i){return new vd(new ls(i.url),new ls(i.params),new ls(i.queryParams),new ls(i.fragment),new ls(i.data),i.outlet,i.component,i)}(t.value),s=t.children.map(l=>Ox(i,l));return new Vm(o,s)}}const aP="ngNavigationCancelingError";function d3(i,t){const{redirectTo:e,navigationBehaviorOptions:o}=Yb(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,s=h3(!1,0,t);return s.url=e,s.navigationBehaviorOptions=o,s}function h3(i,t,e){const o=new Error("NavigationCancelingError: "+(i||""));return o[aP]=!0,o.cancellationCode=t,e&&(o.url=e),o}function p3(i){return f3(i)&&Yb(i.url)}function f3(i){return i&&i[aP]}class WZ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Rx,this.attachRef=null}}class Rx{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const o=this.getOrCreateContext(t);o.outlet=e,this.contexts.set(t,o)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new WZ,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}const BM=!1;let lP=(()=>{class i{constructor(e,o,s,l,u){this.parentContexts=e,this.location=o,this.changeDetector=l,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.attachEvents=new a.vpe,this.detachEvents=new a.vpe,this.name=s||Ii,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new a.vHH(4012,BM);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new a.vHH(4012,BM);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new a.vHH(4012,BM);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,o){this.activated=e,this._activatedRoute=o,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,o){if(this.isActivated)throw new a.vHH(4013,BM);this._activatedRoute=e;const s=this.location,u=e._futureSnapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,_=new KZ(e,g,s.injector);if(o&&function YZ(i){return!!i.resolveComponentFactory}(o)){const w=o.resolveComponentFactory(u);this.activated=s.createComponent(w,s.length,_)}else this.activated=s.createComponent(u,{index:s.length,injector:_,environmentInjector:o??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(Rx),a.Y36(a.s_b),a.$8M("name"),a.Y36(a.sBO),a.Y36(a.lqb))},i.\u0275dir=a.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),i})();class KZ{constructor(t,e,o){this.route=t,this.childContexts=e,this.parent=o}get(t,e){return t===vd?this.route:t===Rx?this.childContexts:this.parent.get(t,e)}}let cP=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=a.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,o){1&e&&a._UZ(0,"router-outlet")},dependencies:[lP],encapsulation:2}),i})();function g3(i,t){return i.providers&&!i._injector&&(i._injector=(0,a.MMx)(i.providers,t,`Route: ${i.path}`)),i._injector??t}function dP(i){const t=i.children&&i.children.map(dP),e=t?{...i,children:t}:{...i};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Ii&&(e.component=cP),e}function bd(i){return i.outlet||Ii}function m3(i,t){const e=i.filter(o=>bd(o)===t);return e.push(...i.filter(o=>bd(o)!==t)),e}function _3(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class t${constructor(t,e,o,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=o,this.forwardEvent=s}activate(t){const e=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,o,t),oP(this.futureState.root),this.activateChildRoutes(e,o,t)}deactivateChildRoutes(t,e,o){const s=m1(e);t.children.forEach(l=>{const u=l.value.outlet;this.deactivateRoutes(l,s[u],o),delete s[u]}),Ea(s,(l,u)=>{this.deactivateRouteAndItsChildren(l,o)})}deactivateRoutes(t,e,o){const s=t.value,l=e?e.value:null;if(s===l)if(s.component){const u=o.getContext(s.outlet);u&&this.deactivateChildRoutes(t,e,u.children)}else this.deactivateChildRoutes(t,e,o);else l&&this.deactivateRouteAndItsChildren(e,o)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const o=e.getContext(t.value.outlet),s=o&&t.value.component?o.children:e,l=m1(t);for(const u of Object.keys(l))this.deactivateRouteAndItsChildren(l[u],s);if(o&&o.outlet){const u=o.outlet.detach(),g=o.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:u,route:t,contexts:g})}}deactivateRouteAndOutlet(t,e){const o=e.getContext(t.value.outlet),s=o&&t.value.component?o.children:e,l=m1(t);for(const u of Object.keys(l))this.deactivateRouteAndItsChildren(l[u],s);o&&o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated(),o.attachRef=null,o.resolver=null,o.route=null)}activateChildRoutes(t,e,o){const s=m1(e);t.children.forEach(l=>{this.activateRoutes(l,s[l.value.outlet],o),this.forwardEvent(new n3(l.value.snapshot))}),t.children.length&&this.forwardEvent(new BZ(t.value.snapshot))}activateRoutes(t,e,o){const s=t.value,l=e?e.value:null;if(oP(s),s===l)if(s.component){const u=o.getOrCreateContext(s.outlet);this.activateChildRoutes(t,e,u.children)}else this.activateChildRoutes(t,e,o);else if(s.component){const u=o.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const g=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),u.children.onOutletReAttached(g.contexts),u.attachRef=g.componentRef,u.route=g.route.value,u.outlet&&u.outlet.attach(g.componentRef,g.route.value),oP(g.route.value),this.activateChildRoutes(t,null,u.children)}else{const g=_3(s.snapshot),_=g?.get(a._Vd)??null;u.attachRef=null,u.route=s,u.resolver=_,u.injector=g,u.outlet&&u.outlet.activateWith(s,u.injector),this.activateChildRoutes(t,null,u.children)}}else this.activateChildRoutes(t,null,o)}}class y3{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class UM{constructor(t,e){this.component=t,this.route=e}}function n$(i,t,e){const o=i._root;return Px(o,t?t._root:null,e,[o.value])}function jM(i,t,e){return(_3(t)??e).get(i)}function Px(i,t,e,o,s={canDeactivateChecks:[],canActivateChecks:[]}){const l=m1(t);return i.children.forEach(u=>{(function r$(i,t,e,o,s={canDeactivateChecks:[],canActivateChecks:[]}){const l=i.value,u=t?t.value:null,g=e?e.getContext(i.value.outlet):null;if(u&&l.routeConfig===u.routeConfig){const _=function o$(i,t,e){if("function"==typeof e)return e(i,t);switch(e){case"pathParamsChange":return!Kb(i.url,t.url);case"pathParamsOrQueryParamsChange":return!Kb(i.url,t.url)||!Nf(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sP(i,t)||!Nf(i.queryParams,t.queryParams);default:return!sP(i,t)}}(u,l,l.routeConfig.runGuardsAndResolvers);_?s.canActivateChecks.push(new y3(o)):(l.data=u.data,l._resolvedData=u._resolvedData),Px(i,t,l.component?g?g.children:null:e,o,s),_&&g&&g.outlet&&g.outlet.isActivated&&s.canDeactivateChecks.push(new UM(g.outlet.component,u))}else u&&Nx(t,g,s),s.canActivateChecks.push(new y3(o)),Px(i,null,l.component?g?g.children:null:e,o,s)})(u,l[u.value.outlet],e,o.concat([u.value]),s),delete l[u.value.outlet]}),Ea(l,(u,g)=>Nx(u,e.getContext(g),s)),s}function Nx(i,t,e){const o=m1(i),s=i.value;Ea(o,(l,u)=>{Nx(l,s.component?t?t.children.getContext(u):null:t,e)}),e.canDeactivateChecks.push(new UM(s.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,s))}function Fx(i){return"function"==typeof i}const zM=Symbol("INITIAL_VALUE");function _1(){return Dr(i=>Ex(i.map(t=>t.pipe(bo(1),Pf(zM)))).pipe((0,pt.U)(t=>{for(const e of t)if(!0!==e){if(e===zM)return zM;if(!1===e||e instanceof Wb)return e}return!0}),Yr(t=>t!==zM),bo(1)))}function v3(i){return(0,Xq.z)((0,$o.b)(t=>{if(Yb(t))throw d3(0,t)}),(0,pt.U)(t=>!0===t))}const hP={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function b3(i,t,e,o,s){const l=pP(i,t,e);return l.matched?function C$(i,t,e,o){const s=t.canMatch;return s&&0!==s.length?fn(s.map(u=>{const g=i.get(u),_=function d$(i){return i&&Fx(i.canMatch)}(g)?g.canMatch(t,e):g(t,e);return Fm(_)})).pipe(_1(),v3()):fn(!0)}(o=g3(t,o),t,e).pipe((0,pt.U)(u=>!0===u?l:{...hP})):fn(l)}function pP(i,t,e){if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||e.length>0)?{...hP}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const s=(t.matcher||oZ)(e,i,t);if(!s)return{...hP};const l={};Ea(s.posParams,(g,_)=>{l[_]=g.path});const u=s.consumed.length>0?{...l,...s.consumed[s.consumed.length-1].parameters}:l;return{matched:!0,consumedSegments:s.consumed,remainingSegments:e.slice(s.consumed.length),parameters:u,positionalParamSegments:s.posParams??{}}}function GM(i,t,e,o,s="corrected"){if(e.length>0&&function x$(i,t,e){return e.some(o=>qM(i,t,o)&&bd(o)!==Ii)}(i,e,o)){const u=new Ri(t,function E$(i,t,e,o){const s={};s[Ii]=o,o._sourceSegment=i,o._segmentIndexShift=t.length;for(const l of e)if(""===l.path&&bd(l)!==Ii){const u=new Ri([],{});u._sourceSegment=i,u._segmentIndexShift=t.length,s[bd(l)]=u}return s}(i,t,o,new Ri(e,i.children)));return u._sourceSegment=i,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:[]}}if(0===e.length&&function S$(i,t,e){return e.some(o=>qM(i,t,o))}(i,e,o)){const u=new Ri(i.segments,function T$(i,t,e,o,s,l){const u={};for(const g of o)if(qM(i,e,g)&&!s[bd(g)]){const _=new Ri([],{});_._sourceSegment=i,_._segmentIndexShift="legacy"===l?i.segments.length:t.length,u[bd(g)]=_}return{...s,...u}}(i,t,e,o,i.children,s));return u._sourceSegment=i,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:e}}const l=new Ri(i.segments,i.children);return l._sourceSegment=i,l._segmentIndexShift=t.length,{segmentGroup:l,slicedSegments:e}}function qM(i,t,e){return(!(i.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function w3(i,t,e,o){return!!(bd(i)===o||o!==Ii&&qM(t,e,i))&&("**"===i.path||pP(t,i,e).matched)}function C3(i,t,e){return 0===t.length&&!i.children[e]}const ZM=!1;class $M{constructor(t){this.segmentGroup=t||null}}class T3{constructor(t){this.urlTree=t}}function Lx(i){return u1(new $M(i))}function E3(i){return u1(new T3(i))}class A${constructor(t,e,o,s,l){this.injector=t,this.configLoader=e,this.urlSerializer=o,this.urlTree=s,this.config=l,this.allowRedirects=!0}apply(){const t=GM(this.urlTree.root,[],[],this.config).segmentGroup,e=new Ri(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,Ii).pipe((0,pt.U)(l=>this.createUrlTree(FM(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Nm(l=>{if(l instanceof T3)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof $M?this.noMatchError(l):l}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Ii).pipe((0,pt.U)(s=>this.createUrlTree(FM(s),t.queryParams,t.fragment))).pipe(Nm(s=>{throw s instanceof $M?this.noMatchError(s):s}))}noMatchError(t){return new a.vHH(4002,ZM)}createUrlTree(t,e,o){const s=QR(t);return new Wb(s,e,o)}expandSegmentGroup(t,e,o,s){return 0===o.segments.length&&o.hasChildren()?this.expandChildren(t,e,o).pipe((0,pt.U)(l=>new Ri([],l))):this.expandSegment(t,o,e,o.segments,s,!0)}expandChildren(t,e,o){const s=[];for(const l of Object.keys(o.children))"primary"===l?s.unshift(l):s.push(l);return(0,ur.D)(s).pipe(Iy(l=>{const u=o.children[l],g=m3(e,l);return this.expandSegmentGroup(t,g,u,l).pipe((0,pt.U)(_=>({segment:_,outlet:l})))}),$b((l,u)=>(l[u.outlet]=u.segment,l),{}),PV())}expandSegment(t,e,o,s,l,u){return(0,ur.D)(o).pipe(Iy(g=>this.expandSegmentAgainstRoute(t,e,o,g,s,l,u).pipe(Nm(w=>{if(w instanceof $M)return fn(null);throw w}))),Pm(g=>!!g),Nm((g,_)=>{if(g instanceof d1||"EmptyError"===g.name)return C3(e,s,l)?fn(new Ri([],{})):Lx(e);throw g}))}expandSegmentAgainstRoute(t,e,o,s,l,u,g){return w3(s,e,l,u)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(t,e,s,l,u):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,o,s,l,u):Lx(e):Lx(e)}expandSegmentAgainstRouteUsingRedirect(t,e,o,s,l,u){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,o,s,u):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,o,s,l,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,o,s){const l=this.applyRedirectCommands([],o.redirectTo,{});return o.redirectTo.startsWith("/")?E3(l):this.lineralizeSegments(o,l).pipe((0,aa.z)(u=>{const g=new Ri(u,{});return this.expandSegment(t,g,e,u,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,o,s,l,u){const{matched:g,consumedSegments:_,remainingSegments:w,positionalParamSegments:T}=pP(e,s,l);if(!g)return Lx(e);const D=this.applyRedirectCommands(_,s.redirectTo,T);return s.redirectTo.startsWith("/")?E3(D):this.lineralizeSegments(s,D).pipe((0,aa.z)(O=>this.expandSegment(t,e,o,O.concat(w),u,!1)))}matchSegmentAgainstRoute(t,e,o,s,l){return"**"===o.path?(t=g3(o,t),o.loadChildren?(o._loadedRoutes?fn({routes:o._loadedRoutes,injector:o._loadedInjector}):this.configLoader.loadChildren(t,o)).pipe((0,pt.U)(g=>(o._loadedRoutes=g.routes,o._loadedInjector=g.injector,new Ri(s,{})))):fn(new Ri(s,{}))):b3(e,o,s,t).pipe(Dr(({matched:u,consumedSegments:g,remainingSegments:_})=>u?this.getChildConfig(t=o._injector??t,o,s).pipe((0,aa.z)(T=>{const D=T.injector??t,O=T.routes,{segmentGroup:F,slicedSegments:j}=GM(e,g,_,O),Q=new Ri(F.segments,F.children);if(0===j.length&&Q.hasChildren())return this.expandChildren(D,O,Q).pipe((0,pt.U)(ft=>new Ri(g,ft)));if(0===O.length&&0===j.length)return fn(new Ri(g,{}));const ae=bd(o)===l;return this.expandSegment(D,Q,O,j,ae?Ii:l,!0).pipe((0,pt.U)(We=>new Ri(g.concat(We.segments),We.children)))})):Lx(e)))}getChildConfig(t,e,o){return e.children?fn({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?fn({routes:e._loadedRoutes,injector:e._loadedInjector}):function w$(i,t,e,o){const s=t.canLoad;return void 0===s||0===s.length?fn(!0):fn(s.map(u=>{const g=i.get(u),_=function a$(i){return i&&Fx(i.canLoad)}(g)?g.canLoad(t,e):g(t,e);return Fm(_)})).pipe(_1(),v3())}(t,e,o).pipe((0,aa.z)(s=>s?this.configLoader.loadChildren(t,e).pipe((0,$o.b)(l=>{e._loadedRoutes=l.routes,e._loadedInjector=l.injector})):function I$(i){return u1(h3(ZM,3))}())):fn({routes:[],injector:t})}lineralizeSegments(t,e){let o=[],s=e.root;for(;;){if(o=o.concat(s.segments),0===s.numberOfChildren)return fn(o);if(s.numberOfChildren>1||!s.children[Ii])return u1(new a.vHH(4e3,ZM));s=s.children[Ii]}}applyRedirectCommands(t,e,o){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,o)}applyRedirectCreateUrlTree(t,e,o,s){const l=this.createSegmentGroup(t,e.root,o,s);return new Wb(l,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const o={};return Ea(t,(s,l)=>{if("string"==typeof s&&s.startsWith(":")){const g=s.substring(1);o[l]=e[g]}else o[l]=s}),o}createSegmentGroup(t,e,o,s){const l=this.createSegments(t,e.segments,o,s);let u={};return Ea(e.children,(g,_)=>{u[_]=this.createSegmentGroup(t,g,o,s)}),new Ri(l,u)}createSegments(t,e,o,s){return e.map(l=>l.path.startsWith(":")?this.findPosParam(t,l,s):this.findOrReturn(l,o))}findPosParam(t,e,o){const s=o[e.path.substring(1)];if(!s)throw new a.vHH(4001,ZM);return s}findOrReturn(t,e){let o=0;for(const s of e){if(s.path===t.path)return e.splice(o),s;o++}return t}}class O${}class N${constructor(t,e,o,s,l,u,g,_){this.injector=t,this.rootComponentType=e,this.config=o,this.urlTree=s,this.url=l,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=g,this.urlSerializer=_}recognize(){const t=GM(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Ii).pipe((0,pt.U)(e=>{if(null===e)return null;const o=new HM([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ii,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Vm(o,e),l=new c3(this.url,s);return this.inheritParamsAndData(l._root),l}))}inheritParamsAndData(t){const e=t.value,o=l3(e,this.paramsInheritanceStrategy);e.params=Object.freeze(o.params),e.data=Object.freeze(o.data),t.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(t,e,o,s){return 0===o.segments.length&&o.hasChildren()?this.processChildren(t,e,o):this.processSegment(t,e,o,o.segments,s)}processChildren(t,e,o){return(0,ur.D)(Object.keys(o.children)).pipe(Iy(s=>{const l=o.children[s],u=m3(e,s);return this.processSegmentGroup(t,u,l,s)}),$b((s,l)=>s&&l?(s.push(...l),s):null),function iZ(i,t=!1){return(0,Zo.e)((e,o)=>{let s=0;e.subscribe((0,Sr.x)(o,l=>{const u=i(l,s++);(u||t)&&o.next(l),!u&&o.complete()}))})}(s=>null!==s),AM(null),PV(),(0,pt.U)(s=>{if(null===s)return null;const l=x3(s);return function F$(i){i.sort((t,e)=>t.value.outlet===Ii?-1:e.value.outlet===Ii?1:t.value.outlet.localeCompare(e.value.outlet))}(l),l}))}processSegment(t,e,o,s,l){return(0,ur.D)(e).pipe(Iy(u=>this.processSegmentAgainstRoute(u._injector??t,u,o,s,l)),Pm(u=>!!u),Nm(u=>{if(u instanceof d1)return C3(o,s,l)?fn([]):fn(null);throw u}))}processSegmentAgainstRoute(t,e,o,s,l){if(e.redirectTo||!w3(e,o,s,l))return fn(null);let u;if("**"===e.path){const g=s.length>0?VV(s).parameters:{},_=D3(o)+s.length;u=fn({snapshot:new HM(s,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,M3(e),bd(e),e.component??e._loadedComponent??null,e,S3(o),_,A3(e),_),consumedSegments:[],remainingSegments:[]})}else u=b3(o,e,s,t).pipe((0,pt.U)(({matched:g,consumedSegments:_,remainingSegments:w,parameters:T})=>{if(!g)return null;const D=D3(o)+_.length;return{snapshot:new HM(_,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,M3(e),bd(e),e.component??e._loadedComponent??null,e,S3(o),D,A3(e),D),consumedSegments:_,remainingSegments:w}}));return u.pipe(Dr(g=>{if(null===g)return fn(null);const{snapshot:_,consumedSegments:w,remainingSegments:T}=g;t=e._injector??t;const D=e._loadedInjector??t,O=function L$(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(e),{segmentGroup:F,slicedSegments:j}=GM(o,w,T,O.filter(ae=>void 0===ae.redirectTo),this.relativeLinkResolution);if(0===j.length&&F.hasChildren())return this.processChildren(D,O,F).pipe((0,pt.U)(ae=>null===ae?null:[new Vm(_,ae)]));if(0===O.length&&0===j.length)return fn([new Vm(_,[])]);const Q=bd(e)===l;return this.processSegment(D,O,F,j,Q?Ii:l).pipe((0,pt.U)(ae=>null===ae?null:[new Vm(_,ae)]))}))}}function V$(i){const t=i.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function x3(i){const t=[],e=new Set;for(const o of i){if(!V$(o)){t.push(o);continue}const s=t.find(l=>o.value.routeConfig===l.value.routeConfig);void 0!==s?(s.children.push(...o.children),e.add(s)):t.push(o)}for(const o of e){const s=x3(o.children);t.push(new Vm(o.value,s))}return t.filter(o=>!e.has(o))}function S3(i){let t=i;for(;t._sourceSegment;)t=t._sourceSegment;return t}function D3(i){let t=i,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function M3(i){return i.data||{}}function A3(i){return i.resolve||{}}const fP=Symbol("RouteTitle");function U$(i,t){return(0,aa.z)(e=>{const{targetSnapshot:o,guards:{canActivateChecks:s}}=e;if(!s.length)return fn(e);let l=0;return(0,ur.D)(s).pipe(Iy(u=>function j$(i,t,e,o){const s=i.routeConfig,l=i._resolve;return void 0!==s?.title&&!k3(s)&&(l[fP]=s.title),function z$(i,t,e,o){const s=function G$(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===s.length)return fn({});const l={};return(0,ur.D)(s).pipe((0,aa.z)(u=>function q$(i,t,e,o){const s=jM(i,t,o);return Fm(s.resolve?s.resolve(t,e):s(t,e))}(i[u],t,e,o).pipe(Pm(),(0,$o.b)(g=>{l[u]=g}))),KR(1),function NV(i){return(0,pt.U)(()=>i)}(l),Nm(u=>u instanceof d1?Rm.E:u1(u)))}(l,i,t,o).pipe((0,pt.U)(u=>(i._resolvedData=u,i.data=l3(i,e).resolve,s&&k3(s)&&(i.data[fP]=s.title),null)))}(u.route,o,i,t)),(0,$o.b)(()=>l++),KR(1),(0,aa.z)(u=>l===s.length?fn(e):Rm.E))})}function k3(i){return"string"==typeof i.title||null===i.title}function gP(i){return Dr(t=>{const e=i(t);return e?(0,ur.D)(e).pipe((0,pt.U)(()=>t)):fn(t)})}let O3=(()=>{class i{buildTitle(e){let o,s=e.root;for(;void 0!==s;)o=this.getResolvedTitleForRoute(s)??o,s=s.children.find(l=>l.outlet===Ii);return o}getResolvedTitleForRoute(e){return e.data[fP]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:function(){return(0,a.f3M)(R3)},providedIn:"root"}),i})(),R3=(()=>{class i extends O3{constructor(e){super(),this.title=e}updateTitle(e){const o=this.buildTitle(e);void 0!==o&&this.title.setTitle(o)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(sl))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Z${}class W$ extends class $${shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const mP=new a.OlP("",{providedIn:"root",factory:()=>({})}),_P=new a.OlP("ROUTES");let yP=(()=>{class i{constructor(e,o){this.injector=e,this.compiler=o,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return fn(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const o=Fm(e.loadComponent()).pipe((0,$o.b)(l=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=l}),Sx(()=>{this.componentLoaders.delete(e)})),s=new OV(o,()=>new Ft.x).pipe(WR());return this.componentLoaders.set(e,s),s}loadChildren(e,o){if(this.childrenLoaders.get(o))return this.childrenLoaders.get(o);if(o._loadedRoutes)return fn({routes:o._loadedRoutes,injector:o._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(o);const l=this.loadModuleFactoryOrRoutes(o.loadChildren).pipe((0,pt.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(o);let _,w,T=!1;Array.isArray(g)?w=g:(_=g.create(e).injector,w=LV(_.get(_P,[],a.XFs.Self|a.XFs.Optional)));return{routes:w.map(dP),injector:_}}),Sx(()=>{this.childrenLoaders.delete(o)})),u=new OV(l,()=>new Ft.x).pipe(WR());return this.childrenLoaders.set(o,u),u}loadModuleFactoryOrRoutes(e){return Fm(e()).pipe((0,aa.z)(o=>o instanceof a.YKP||Array.isArray(o)?fn(o):(0,ur.D)(this.compiler.compileModuleAsync(o))))}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(a.zs3),a.LFG(a.Sil))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();class Y${}class J${shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Q$(i){throw i}function X$(i,t,e){return t.parse("/")}const e8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},t8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function N3(){const i=(0,a.f3M)(GV),t=(0,a.f3M)(Rx),e=(0,a.f3M)(Ke),o=(0,a.f3M)(a.zs3),s=(0,a.f3M)(a.Sil),l=(0,a.f3M)(_P,{optional:!0})??[],u=(0,a.f3M)(mP,{optional:!0})??{},g=(0,a.f3M)(R3),_=(0,a.f3M)(O3,{optional:!0}),w=(0,a.f3M)(Y$,{optional:!0}),T=(0,a.f3M)(Z$,{optional:!0}),D=new er(null,i,t,e,o,s,LV(l));return w&&(D.urlHandlingStrategy=w),T&&(D.routeReuseStrategy=T),D.titleStrategy=_??g,function n8(i,t){i.errorHandler&&(t.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(t.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(t.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(t.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(t.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(t.canceledNavigationResolution=i.canceledNavigationResolution)}(u,D),D}let er=(()=>{class i{constructor(e,o,s,l,u,g,_){this.rootComponentType=e,this.urlSerializer=o,this.rootContexts=s,this.location=l,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ft.x,this.errorHandler=Q$,this.malformedUriErrorHandler=X$,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>fn(void 0),this.urlHandlingStrategy=new J$,this.routeReuseStrategy=new W$,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(yP),this.configLoader.onLoadEndListener=O=>this.triggerEvent(new VZ(O)),this.configLoader.onLoadStartListener=O=>this.triggerEvent(new LZ(O)),this.ngModule=u.get(a.h0i),this.console=u.get(a.c2e);const D=u.get(a.R0b);this.isNgZoneEnabled=D instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function aZ(){return new Wb(new Ri([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=a3(this.currentUrlTree,this.rootComponentType),this.transitions=new ls({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const o=this.events;return e.pipe(Yr(s=>0!==s.id),(0,pt.U)(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Dr(s=>{let l=!1,u=!1;return fn(s).pipe((0,$o.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Dr(g=>{const _=this.browserUrlTree.toString(),w=!this.navigated||g.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return F3(g.source)&&(this.browserUrlTree=g.extractedUrl),fn(g).pipe(Dr(D=>{const O=this.transitions.getValue();return o.next(new LM(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),O!==this.transitions.getValue()?Rm.E:Promise.resolve(D)}),function k$(i,t,e,o){return Dr(s=>function M$(i,t,e,o,s){return new A$(i,t,e,o,s).apply()}(i,t,e,s.extractedUrl,o).pipe((0,pt.U)(l=>({...s,urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,$o.b)(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},s.urlAfterRedirects=D.urlAfterRedirects}),function B$(i,t,e,o,s,l){return(0,aa.z)(u=>function P$(i,t,e,o,s,l,u="emptyOnly",g="legacy"){return new N$(i,t,e,o,s,u,g,l).recognize().pipe(Dr(_=>null===_?function R$(i){return new Ie.y(t=>t.error(i))}(new O$):fn(_)))}(i,t,e,u.urlAfterRedirects,o.serialize(u.urlAfterRedirects),o,s,l).pipe((0,pt.U)(g=>({...u,targetSnapshot:g}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,$o.b)(D=>{if(s.targetSnapshot=D.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const F=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(F,D)}this.browserUrlTree=D.urlAfterRedirects}const O=new OZ(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);o.next(O)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:F,source:j,restoredState:Q,extras:ae}=g,Oe=new LM(O,this.serializeUrl(F),j,Q);o.next(Oe);const We=a3(F,this.rootComponentType).snapshot;return fn(s={...g,targetSnapshot:We,urlAfterRedirects:F,extras:{...ae,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=g.rawUrl,g.resolve(null),Rm.E}),(0,$o.b)(g=>{const _=new RZ(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(_)}),(0,pt.U)(g=>s={...g,guards:n$(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),function p$(i,t){return(0,aa.z)(e=>{const{targetSnapshot:o,currentSnapshot:s,guards:{canActivateChecks:l,canDeactivateChecks:u}}=e;return 0===u.length&&0===l.length?fn({...e,guardsResult:!0}):function f$(i,t,e,o){return(0,ur.D)(i).pipe((0,aa.z)(s=>function b$(i,t,e,o,s){const l=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return l&&0!==l.length?fn(l.map(g=>{const _=jM(g,t,s);return Fm(function u$(i){return i&&Fx(i.canDeactivate)}(_)?_.canDeactivate(i,t,e,o):_(i,t,e,o)).pipe(Pm())})).pipe(_1()):fn(!0)}(s.component,s.route,e,t,o)),Pm(s=>!0!==s,!0))}(u,o,s,i).pipe((0,aa.z)(g=>g&&function s$(i){return"boolean"==typeof i}(g)?function g$(i,t,e,o){return(0,ur.D)(t).pipe(Iy(s=>c1(function _$(i,t){return null!==i&&t&&t(new HZ(i)),fn(!0)}(s.route.parent,o),function m$(i,t){return null!==i&&t&&t(new UZ(i)),fn(!0)}(s.route,o),function v$(i,t,e){const o=t[t.length-1],l=t.slice(0,t.length-1).reverse().map(u=>function i$(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(u)).filter(u=>null!==u).map(u=>$R(()=>fn(u.guards.map(_=>{const w=jM(_,u.node,e);return Fm(function c$(i){return i&&Fx(i.canActivateChild)}(w)?w.canActivateChild(o,i):w(o,i)).pipe(Pm())})).pipe(_1())));return fn(l).pipe(_1())}(i,s.path,e),function y$(i,t,e){const o=t.routeConfig?t.routeConfig.canActivate:null;if(!o||0===o.length)return fn(!0);const s=o.map(l=>$R(()=>{const u=jM(l,t,e);return Fm(function l$(i){return i&&Fx(i.canActivate)}(u)?u.canActivate(t,i):u(t,i)).pipe(Pm())}));return fn(s).pipe(_1())}(i,s.route,e))),Pm(s=>!0!==s,!0))}(o,l,i,t):fn(g)),(0,pt.U)(g=>({...e,guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,$o.b)(g=>{if(s.guardsResult=g.guardsResult,Yb(g.guardsResult))throw d3(0,g.guardsResult);const _=new PZ(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(_)}),Yr(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",3),!1)),gP(g=>{if(g.guards.canActivateChecks.length)return fn(g).pipe((0,$o.b)(_=>{const w=new NZ(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),Dr(_=>{let w=!1;return fn(_).pipe(U$(this.paramsInheritanceStrategy,this.ngModule.injector),(0,$o.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),(0,$o.b)(_=>{const w=new FZ(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),gP(g=>{const _=w=>{const T=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,$o.b)(D=>{w.component=D}),(0,pt.U)(()=>{})));for(const D of w.children)T.push(..._(D));return T};return Ex(_(g.targetSnapshot.root)).pipe(AM(),bo(1))}),gP(()=>this.afterPreactivation()),(0,pt.U)(g=>{const _=function qZ(i,t,e){const o=Ox(i,t._root,e?e._root:void 0);return new s3(o,t)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return s={...g,targetRouterState:_}}),(0,$o.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((i,t,e)=>(0,pt.U)(o=>(new t$(t,o.targetRouterState,o.currentRouterState,e).activate(i),o)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,$o.b)({next(){l=!0},complete(){l=!0}}),Sx(()=>{l||u||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Nm(g=>{if(u=!0,f3(g)){p3(g)||(this.navigated=!0,this.restoreHistory(s,!0));const _=new VM(s.id,this.serializeUrl(s.extractedUrl),g.message,g.cancellationCode);if(o.next(_),p3(g)){const w=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),T={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||F3(s.source)};this.scheduleNavigation(w,"imperative",null,T,{resolve:s.resolve,reject:s.reject,promise:s.promise})}else s.resolve(!1)}else{this.restoreHistory(s,!0);const _=new t3(s.id,this.serializeUrl(s.extractedUrl),g,s.targetSnapshot??void 0);o.next(_);try{s.resolve(this.errorHandler(g))}catch(w){s.reject(w)}}return Rm.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const o="popstate"===e.type?"popstate":"hashchange";"popstate"===o&&setTimeout(()=>{const s={replaceUrl:!0},l=e.state?.navigationId?e.state:null;if(l){const g={...l};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(s.state=g)}const u=this.parseUrl(e.url);this.scheduleNavigation(u,o,l,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(dP),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,o={}){const{relativeTo:s,queryParams:l,fragment:u,queryParamsHandling:g,preserveFragment:_}=o,w=s||this.routerState.root,T=_?this.currentUrlTree.fragment:u;let D=null;switch(g){case"merge":D={...this.currentUrlTree.queryParams,...l};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=l||null}return null!==D&&(D=this.removeEmptyProps(D)),SZ(w,this.currentUrlTree,e,D,T??null)}navigateByUrl(e,o={skipLocationChange:!1}){const s=Yb(e)?e:this.parseUrl(e),l=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,o)}navigate(e,o={skipLocationChange:!1}){return function r8(i){for(let t=0;t<i.length;t++){if(null==i[t])throw new a.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,o),o)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let o;try{o=this.urlSerializer.parse(e)}catch(s){o=this.malformedUriErrorHandler(s,this.urlSerializer,e)}return o}isActive(e,o){let s;if(s=!0===o?{...e8}:!1===o?{...t8}:o,Yb(e))return BV(this.currentUrlTree,e,s);const l=this.parseUrl(e);return BV(this.currentUrlTree,l,s)}removeEmptyProps(e){return Object.keys(e).reduce((o,s)=>{const l=e[s];return null!=l&&(o[s]=l),o},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Ff(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,o,s,l,u){if(this.disposed)return Promise.resolve(!1);let g,_,w;u?(g=u.resolve,_=u.reject,w=u.promise):w=new Promise((O,F)=>{g=O,_=F});const T=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),D=s&&s.\u0275routerPageId?s.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):D=0,this.setTransition({id:T,targetPageId:D,source:o,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:l,resolve:g,reject:_,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(O=>Promise.reject(O))}setBrowserUrl(e,o){const s=this.urlSerializer.serialize(e),l={...o.extras.state,...this.generateNgRouterState(o.id,o.targetPageId)};this.location.isCurrentPathEqualTo(s)||o.extras.replaceUrl?this.location.replaceState(s,"",l):this.location.go(s,"",l)}restoreHistory(e,o=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===s?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(o&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,o,s){const l=new VM(e.id,this.serializeUrl(e.extractedUrl),o,s);this.triggerEvent(l),e.resolve(!1)}generateNgRouterState(e,o){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:o}:{navigationId:e}}}return i.\u0275fac=function(e){a.$Z()},i.\u0275prov=a.Yz7({token:i,factory:function(){return N3()},providedIn:"root"}),i})();function F3(i){return"imperative"!==i}let YM=(()=>{class i{constructor(e,o,s,l,u){this.router=e,this.route=o,this.tabIndexAttribute=s,this.renderer=l,this.el=u,this.commands=null,this.onChanges=new Ft.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const o=this.renderer,s=this.el.nativeElement;null!==e?o.setAttribute(s,"tabindex",e):o.removeAttribute(s,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:(0,a.D6c)(this.skipLocationChange),replaceUrl:(0,a.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,a.D6c)(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(er),a.Y36(vd),a.$8M("tabindex"),a.Y36(a.Qsj),a.Y36(a.SBq))},i.\u0275dir=a.lG2({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,o){1&e&&a.NdJ("click",function(){return o.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[a.TTD]}),i})(),Vx=(()=>{class i{constructor(e,o,s){this.router=e,this.route=o,this.locationStrategy=s,this.commands=null,this.href=null,this.onChanges=new Ft.x,this.subscription=e.events.subscribe(l=>{l instanceof Ff&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,o,s,l,u){if(0!==e||o||s||l||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const g={skipLocationChange:(0,a.D6c)(this.skipLocationChange),replaceUrl:(0,a.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,g),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,a.D6c)(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(er),a.Y36(vd),a.Y36(He))},i.\u0275dir=a.lG2({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,o){1&e&&a.NdJ("click",function(l){return o.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&e&&a.uIk("target",o.target)("href",o.href,a.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[a.TTD]}),i})(),L3=(()=>{class i{constructor(e,o,s,l,u,g){this.router=e,this.element=o,this.renderer=s,this.cdr=l,this.link=u,this.linkWithHref=g,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new a.vpe,this.routerEventsSubscription=e.events.subscribe(_=>{_ instanceof Ff&&this.update()})}ngAfterContentInit(){fn(this.links.changes,this.linksWithHrefs.changes,fn(null)).pipe((0,xx.J)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(o=>!!o).map(o=>o.onChanges);this.linkInputChangesSubscription=(0,ur.D)(e).pipe((0,xx.J)()).subscribe(o=>{this.isActive!==this.isLinkActive(this.router)(o)&&this.update()})}set routerLinkActive(e){const o=Array.isArray(e)?e:e.split(" ");this.classes=o.filter(s=>!!s)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(o=>{e?this.renderer.addClass(this.element.nativeElement,o):this.renderer.removeClass(this.element.nativeElement,o)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const o=function o8(i){return!!i.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>!!s.urlTree&&e.isActive(s.urlTree,o)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(er),a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(a.sBO),a.Y36(YM,8),a.Y36(Vx,8))},i.\u0275dir=a.lG2({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(e,o,s){if(1&e&&(a.Suo(s,YM,5),a.Suo(s,Vx,5)),2&e){let l;a.iGM(l=a.CRH())&&(o.links=l),a.iGM(l=a.CRH())&&(o.linksWithHrefs=l)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[a.TTD]}),i})();class V3{}let H3=(()=>{class i{constructor(e,o,s,l,u){this.router=e,this.injector=s,this.preloadingStrategy=l,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Yr(e=>e instanceof Ff),Iy(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,o){const s=[];for(const l of o){l.providers&&!l._injector&&(l._injector=(0,a.MMx)(l.providers,e,`Route: ${l.path}`));const u=l._injector??e,g=l._loadedInjector??u;l.loadChildren&&!l._loadedRoutes&&void 0===l.canLoad||l.loadComponent&&!l._loadedComponent?s.push(this.preloadConfig(u,l)):(l.children||l._loadedRoutes)&&s.push(this.processRoutes(g,l.children??l._loadedRoutes))}return(0,ur.D)(s).pipe((0,xx.J)())}preloadConfig(e,o){return this.preloadingStrategy.preload(o,()=>{let s;s=o.loadChildren&&void 0===o.canLoad?this.loader.loadChildren(e,o):fn(null);const l=s.pipe((0,aa.z)(u=>null===u?fn(void 0):(o._loadedRoutes=u.routes,o._loadedInjector=u.injector,this.processRoutes(u.injector??e,u.routes))));if(o.loadComponent&&!o._loadedComponent){const u=this.loader.loadComponent(o);return(0,ur.D)([l,u]).pipe((0,xx.J)())}return l})}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(er),a.LFG(a.Sil),a.LFG(a.lqb),a.LFG(V3),a.LFG(yP))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();const B3=new a.OlP("");let s8=(()=>{class i{constructor(e,o,s={}){this.router=e,this.viewportScroller=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof LM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ff&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof r3&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,o){this.router.triggerEvent(new r3(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,o))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(e){a.$Z()},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();const U3=new a.OlP("ROUTER_FORROOT_GUARD"),j3=new a.OlP(""),a8=[Ke,{provide:GV,useClass:qV},{provide:er,useFactory:N3},Rx,{provide:vd,useFactory:function l8(i){return i.routerState.root},deps:[er]},yP];function c8(){return new a.PXZ("Router",er)}let z3=(()=>{class i{constructor(e){}static forRoot(e,o){return{ngModule:i,providers:[a8,[],G3(e),{provide:U3,useFactory:p8,deps:[[er,new a.FiY,new a.tp0]]},{provide:mP,useValue:o||{}},o?.useHash?{provide:He,useClass:gt}:{provide:He,useClass:xt},{provide:B3,useFactory:()=>{const i=(0,a.f3M)(er),t=(0,a.f3M)(av),e=(0,a.f3M)(mP);return e.scrollOffset&&t.setOffset(e.scrollOffset),new s8(i,t,e)}},o?.preloadingStrategy?b8(o.preloadingStrategy):[],{provide:a.PXZ,multi:!0,useFactory:c8},o?.initialNavigation?g8(o):[],[{provide:q3,useFactory:f8},{provide:a.tb,multi:!0,useExisting:q3}]]}}static forChild(e){return{ngModule:i,providers:[G3(e)]}}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(U3,8))},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({}),i})();function p8(i){return"guarded"}function G3(i){return[{provide:_P,multi:!0,useValue:i}]}function f8(){const i=(0,a.f3M)(a.zs3);return t=>{const e=i.get(a.z2F);if(t!==e.components[0])return;const o=i.get(er),s=i.get(Z3);1===i.get(vP)&&o.initialNavigation(),i.get(j3,null,a.XFs.Optional)?.setUpPreloading(),i.get(B3,null,a.XFs.Optional)?.init(),o.resetRootComponentType(e.componentTypes[0]),s.next(),s.complete()}}const q3=new a.OlP("");function g8(i){return["disabled"===i.initialNavigation?[{provide:a.ip1,multi:!0,useFactory:()=>{const i=(0,a.f3M)(er);return()=>{i.setUpLocationChangeListener()}}},{provide:vP,useValue:2}]:[],"enabledBlocking"===i.initialNavigation?[{provide:vP,useValue:0},{provide:a.ip1,multi:!0,deps:[a.zs3],useFactory:i=>{const t=i.get(ie,Promise.resolve(null));let e=!1;return()=>t.then(()=>new Promise(s=>{const l=i.get(er),u=i.get(Z3);(function o(s){i.get(er).events.pipe(Yr(u=>u instanceof Ff||u instanceof VM||u instanceof t3),(0,pt.U)(u=>u instanceof Ff||u instanceof VM&&(0===u.code||1===u.code)&&null),Yr(u=>null!==u),bo(1)).subscribe(()=>{s()})})(()=>{s(!0),e=!0}),l.afterPreactivation=()=>(s(!0),e||u.closed?fn(void 0):u),l.initialNavigation()}))}}]:[]]}const Z3=new a.OlP("",{factory:()=>new Ft.x}),vP=new a.OlP("",{providedIn:"root",factory:()=>1});function b8(i){return[H3,{provide:j3,useExisting:H3},{provide:V3,useExisting:i}]}let w8=(()=>{class i{constructor(e,o,s){this.primengConfig=e,this.firebasecrudservice=o,this.productService=s,this.title="MERCv3",this.voucher=[{title:"RM 50 off",min:500,cashback:0,freeShipping:!1,discount:50,type:"discount"},{title:"Free shipping",min:500,cashback:0,freeShipping:!0,discount:0,type:"free shipping"},{title:"Cashback 15%",min:100,cashback:15,freeShipping:!1,discount:0,type:"cash back"}],this.selectedVoucher=[{id:"v001",voucher1:"",voucher2:"",voucher3:""},{id:"v002",voucher1:"",voucher2:"",voucher3:""},{id:"v003",voucher1:"",voucher2:"",voucher3:""}]}ngOnInit(){this.primengConfig.ripple=!0,this.productService.getCartItems().then(e=>{this.items=e,this.count=e.length;for(let o=0;o<this.count;o++);})}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(zn),a.Y36(Rf),a.Y36(Zb))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(e,o){1&e&&a._UZ(0,"router-outlet")},dependencies:[lP]}),i})();let W3=(()=>{class i{constructor(e,o){this._renderer=e,this._elementRef=o,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(e,o){this._renderer.setProperty(this._elementRef.nativeElement,e,o)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.Qsj),a.Y36(a.SBq))},i.\u0275dir=a.lG2({type:i}),i})(),Jb=(()=>{class i extends W3{}return i.\u0275fac=function(){let t;return function(o){return(t||(t=a.n5z(i)))(o||i)}}(),i.\u0275dir=a.lG2({type:i,features:[a.qOj]}),i})();const Ss=new a.OlP("NgValueAccessor"),T8={provide:Ss,useExisting:(0,a.Gpc)(()=>y1),multi:!0},x8=new a.OlP("CompositionEventMode");let y1=(()=>{class i extends W3{constructor(e,o,s){super(e,o),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function E8(){const i=W()?W().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(x8,8))},i.\u0275dir=a.lG2({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,o){1&e&&a.NdJ("input",function(l){return o._handleInput(l.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(l){return o._compositionEnd(l.target.value)})},features:[a._Bn([T8]),a.qOj]}),i})();const xa=new a.OlP("NgValidators"),ky=new a.OlP("NgAsyncValidators");function X3(i){return function Ay(i){return null==i||("string"==typeof i||Array.isArray(i))&&0===i.length}(i.value)?{required:!0}:null}function JM(i){return null}function oH(i){return null!=i}function sH(i){return(0,a.QGY)(i)?(0,ur.D)(i):i}function aH(i){let t={};return i.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function lH(i,t){return t.map(e=>e(i))}function cH(i){return i.map(t=>function I8(i){return!i.validate}(t)?t:e=>t.validate(e))}function bP(i){return null!=i?function uH(i){if(!i)return null;const t=i.filter(oH);return 0==t.length?null:function(e){return aH(lH(e,t))}}(cH(i)):null}function dH(i){if(!i)return null;const t=i.filter(oH);return 0==t.length?null:function(e){return function $3(...i){const t=(0,Dy.jO)(i),{args:e,keys:o}=MV(i),s=new Ie.y(l=>{const{length:u}=e;if(!u)return void l.complete();const g=new Array(u);let _=u,w=u;for(let T=0;T<u;T++){let D=!1;(0,yd.Xf)(e[T]).subscribe((0,Sr.x)(l,O=>{D||(D=!0,w--),g[T]=O},()=>_--,void 0,()=>{(!_||!D)&&(w||l.next(o?AV(o,g):g),l.complete())}))}});return t?s.pipe(ZR(t)):s}(lH(e,t).map(sH)).pipe((0,pt.U)(aH))}}function wP(i){return null!=i?dH(cH(i)):null}function hH(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function CP(i){return i?Array.isArray(i)?i:[i]:[]}function QM(i,t){return Array.isArray(i)?i.includes(t):i===t}function gH(i,t){const e=CP(t);return CP(i).forEach(s=>{QM(e,s)||e.push(s)}),e}function mH(i,t){return CP(t).filter(e=>!QM(i,e))}class _H{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=bP(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=wP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Dl extends _H{get formDirective(){return null}get path(){return null}}class Oy extends _H{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yH{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let XM=(()=>{class i extends yH{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(Oy,2))},i.\u0275dir=a.lG2({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,o){2&e&&a.ekj("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[a.qOj]}),i})(),Hx=(()=>{class i extends yH{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(Dl,10))},i.\u0275dir=a.lG2({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,o){2&e&&a.ekj("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[a.qOj]}),i})();const Bx="VALID",tA="INVALID",v1="PENDING",Ux="DISABLED";function SP(i){return(nA(i)?i.validators:i)||null}function bH(i){return Array.isArray(i)?bP(i):i||null}function DP(i,t){return(nA(t)?t.asyncValidators:i)||null}function wH(i){return Array.isArray(i)?wP(i):i||null}function nA(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}function CH(i,t,e){const o=i.controls;if(!(t?Object.keys(o):o).length)throw new a.vHH(1e3,"");if(!o[e])throw new a.vHH(1001,"")}function TH(i,t,e){i._forEachChild((o,s)=>{if(void 0===e[s])throw new a.vHH(1002,"")})}class iA{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=bH(this._rawValidators),this._composedAsyncValidatorFn=wH(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Bx}get invalid(){return this.status===tA}get pending(){return this.status==v1}get disabled(){return this.status===Ux}get enabled(){return this.status!==Ux}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=bH(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=wH(t)}addValidators(t){this.setValidators(gH(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(gH(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(mH(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(mH(t,this._rawAsyncValidators))}hasValidator(t){return QM(this._rawValidators,t)}hasAsyncValidator(t){return QM(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=v1,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Ux,this.errors=null,this._forEachChild(o=>{o.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Bx,this._forEachChild(o=>{o.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bx||this.status===v1)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ux:Bx}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=v1,this._hasOwnPendingAsyncValidator=!0;const e=sH(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((o,s)=>o&&o._find(s),this)}getError(t,e){const o=e?this.get(e):this;return o&&o.errors?o.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}_calculateStatus(){return this._allControlsDisabled()?Ux:this.errors?tA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(v1)?v1:this._anyControlsHaveStatus(tA)?tA:Bx}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){nA(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}class rA extends iA{constructor(t,e,o){super(SP(e),DP(o,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,o={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,o={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){TH(this,0,t),Object.keys(t).forEach(o=>{CH(this,!0,o),this.controls[o].setValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(o=>{const s=this.controls[o];s&&s.patchValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((o,s)=>{o.reset(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,o)=>(t[o]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,o)=>!!o._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const o=this.controls[e];o&&t(o,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,o]of Object.entries(this.controls))if(this.contains(e)&&t(o))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,o,s)=>((o.enabled||this.disabled)&&(e[s]=o.value),e))}_reduceChildren(t,e){let o=t;return this._forEachChild((s,l)=>{o=e(o,s,l)}),o}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}function jx(i,t){IP(i,t),t.valueAccessor.writeValue(i.value),i.disabled&&t.valueAccessor.setDisabledState?.(!0),function L8(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&EH(i,t)})}(i,t),function H8(i,t){const e=(o,s)=>{t.valueAccessor.writeValue(o),s&&t.viewToModelUpdate(o)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function V8(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&EH(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function F8(i,t){if(t.valueAccessor.setDisabledState){const e=o=>{t.valueAccessor.setDisabledState(o)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function aA(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function IP(i,t){const e=function pH(i){return i._rawValidators}(i);null!==t.validator?i.setValidators(hH(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const o=function fH(i){return i._rawAsyncValidators}(i);null!==t.asyncValidator?i.setAsyncValidators(hH(o,t.asyncValidator)):"function"==typeof o&&i.setAsyncValidators([o]);const s=()=>i.updateValueAndValidity();aA(t._rawValidators,s),aA(t._rawAsyncValidators,s)}function EH(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}const G8={provide:Dl,useExisting:(0,a.Gpc)(()=>Qb)},zx=(()=>Promise.resolve(null))();let Qb=(()=>{class i extends Dl{constructor(e,o){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new a.vpe,this.form=new rA({},bP(e),wP(o))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){zx.then(()=>{const o=this._findContainer(e.path);e.control=o.registerControl(e.name,e.control),jx(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){zx.then(()=>{const o=this._findContainer(e.path);o&&o.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){zx.then(()=>{const o=this._findContainer(e.path),s=new rA({});(function xH(i,t){IP(i,t)})(s,e),o.registerControl(e.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){zx.then(()=>{const o=this._findContainer(e.path);o&&o.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,o){zx.then(()=>{this.form.get(e.path).setValue(o)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,function DH(i,t){i._syncPendingControls(),t.forEach(e=>{const o=e.control;"submit"===o.updateOn&&o._pendingChange&&(e.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(xa,10),a.Y36(ky,10))},i.\u0275dir=a.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,o){1&e&&a.NdJ("submit",function(l){return o.onSubmit(l)})("reset",function(){return o.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[a._Bn([G8]),a.qOj]}),i})();function IH(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}function MH(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const Gx=class extends iA{constructor(t=null,e,o){super(SP(e),DP(o,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),nA(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=MH(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){IH(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){IH(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){MH(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},$8={provide:Oy,useExisting:(0,a.Gpc)(()=>b1)},OH=(()=>Promise.resolve(null))();let b1=(()=>{class i extends Oy{constructor(e,o,s,l,u){super(),this._changeDetectorRef=u,this.control=new Gx,this._registered=!1,this.update=new a.vpe,this._parent=e,this._setValidators(o),this._setAsyncValidators(s),this.valueAccessor=function AP(i,t){if(!t)return null;let e,o,s;return Array.isArray(t),t.forEach(l=>{l.constructor===y1?e=l:function j8(i){return Object.getPrototypeOf(i.constructor)===Jb}(l)?o=l:s=l}),s||o||e||null}(0,l)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const o=e.name.previousValue;this.formDirective.removeControl({name:o,path:this._getPath(o)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function MP(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){jx(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){OH.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const o=e.isDisabled.currentValue,s=0!==o&&(0,a.D6c)(o);OH.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function oA(i,t){return[...t.path,i]}(e,this._parent):[e]}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(Dl,9),a.Y36(xa,10),a.Y36(ky,10),a.Y36(Ss,10),a.Y36(a.sBO,8))},i.\u0275dir=a.lG2({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[a._Bn([$8]),a.qOj,a.TTD]}),i})(),qx=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=a.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})(),PH=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({}),i})();const kP=new a.OlP("NgModelWithFormControlWarning"),iW={provide:Ss,useExisting:(0,a.Gpc)(()=>NP),multi:!0};function BH(i,t){return null==i?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${i}: ${t}`.slice(0,50))}let NP=(()=>{class i extends Jb{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const s=BH(this._getOptionId(e),e);this.setProperty("value",s)}registerOnChange(e){this.onChange=o=>{this.value=this._getOptionValue(o),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const o of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(o),e))return o;return null}_getOptionValue(e){const o=function rW(i){return i.split(":")[0]}(e);return this._optionMap.has(o)?this._optionMap.get(o):e}}return i.\u0275fac=function(){let t;return function(o){return(t||(t=a.n5z(i)))(o||i)}}(),i.\u0275dir=a.lG2({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,o){1&e&&a.NdJ("change",function(l){return o.onChange(l.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([iW]),a.qOj]}),i})(),UH=(()=>{class i{constructor(e,o,s){this._element=e,this._renderer=o,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(BH(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(NP,9))},i.\u0275dir=a.lG2({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),i})();const oW={provide:Ss,useExisting:(0,a.Gpc)(()=>FP),multi:!0};function jH(i,t){return null==i?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${i}: ${t}`.slice(0,50))}let FP=(()=>{class i extends Jb{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let o;if(this.value=e,Array.isArray(e)){const s=e.map(l=>this._getOptionId(l));o=(l,u)=>{l._setSelected(s.indexOf(u.toString())>-1)}}else o=(s,l)=>{s._setSelected(!1)};this._optionMap.forEach(o)}registerOnChange(e){this.onChange=o=>{const s=[],l=o.selectedOptions;if(void 0!==l){const u=l;for(let g=0;g<u.length;g++){const w=this._getOptionValue(u[g].value);s.push(w)}}else{const u=o.options;for(let g=0;g<u.length;g++){const _=u[g];if(_.selected){const w=this._getOptionValue(_.value);s.push(w)}}}this.value=s,e(s)}}_registerOption(e){const o=(this._idCounter++).toString();return this._optionMap.set(o,e),o}_getOptionId(e){for(const o of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(o)._value,e))return o;return null}_getOptionValue(e){const o=function sW(i){return i.split(":")[0]}(e);return this._optionMap.has(o)?this._optionMap.get(o)._value:e}}return i.\u0275fac=function(){let t;return function(o){return(t||(t=a.n5z(i)))(o||i)}}(),i.\u0275dir=a.lG2({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,o){1&e&&a.NdJ("change",function(l){return o.onChange(l.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([oW]),a.qOj]}),i})(),zH=(()=>{class i{constructor(e,o,s){this._element=e,this._renderer=o,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(jH(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(jH(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(FP,9))},i.\u0275dir=a.lG2({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),i})(),Xb=(()=>{class i{constructor(){this._validator=JM}ngOnChanges(e){if(this.inputName in e){const o=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(o),this._validator=this._enabled?this.createValidator(o):JM,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=a.lG2({type:i,features:[a.TTD]}),i})();const cW={provide:xa,useExisting:(0,a.Gpc)(()=>Zx),multi:!0};let Zx=(()=>{class i extends Xb{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=a.D6c,this.createValidator=e=>X3}enabled(e){return e}}return i.\u0275fac=function(){let t;return function(o){return(t||(t=a.n5z(i)))(o||i)}}(),i.\u0275dir=a.lG2({type:i,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,o){2&e&&a.uIk("required",o._enabled?"":null)},inputs:{required:"required"},features:[a._Bn([cW]),a.qOj]}),i})(),QH=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[PH]}),i})(),w1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[QH]}),i})(),VP=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:kP,useValue:e.warnOnNgModelWithFormControl}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[QH]}),i})();class XH extends iA{constructor(t,e,o){super(SP(e),DP(o,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,o={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:o.emitEvent})}removeAt(t,e={}){let o=this._adjustIndex(t);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,o={}){let s=this._adjustIndex(t);s<0&&(s=0),this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),e&&(this.controls.splice(s,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){TH(this,0,t),t.forEach((o,s)=>{CH(this,!1,s),this.at(s).setValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((o,s)=>{this.at(s)&&this.at(s).patchValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((o,s)=>{o.reset(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,o)=>!!o._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,o)=>{t(e,o)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}}function eB(i){return!!i&&(void 0!==i.asyncValidators||void 0!==i.validators||void 0!==i.updateOn)}let tB=(()=>{class i{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new i;return e.useNonNullable=!0,e}group(e,o=null){const s=this._reduceControls(e);let l={};return eB(o)?l=o:null!==o&&(l.validators=o.validator,l.asyncValidators=o.asyncValidator),new rA(s,l)}control(e,o,s){let l={};return this.useNonNullable?(eB(o)?l=o:(l.validators=o,l.asyncValidators=s),new Gx(e,{...l,nonNullable:!0})):new Gx(e,o,s)}array(e,o,s){const l=e.map(u=>this._createControl(u));return new XH(l,o,s)}_reduceControls(e){const o={};return Object.keys(e).forEach(s=>{o[s]=this._createControl(e[s])}),o}_createControl(e){return e instanceof Gx||e instanceof iA?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:VP}),i})();class nB{}const Hm="*";function Sa(i,t){return{type:7,name:i,definitions:t,options:{}}}function Fr(i,t=null){return{type:4,styles:t,timings:i}}function iB(i,t=null){return{type:2,steps:i,options:t}}function ti(i){return{type:6,styles:i,offset:null}}function Wo(i,t,e){return{type:0,name:i,styles:t,options:e}}function dr(i,t,e=null){return{type:1,expr:i,animation:t,options:e}}function rB(i,t=null){return{type:8,animation:i,options:t}}function HP(i=null){return{type:9,options:i}}function oB(i,t=null){return{type:10,animation:i,options:t}}function BP(i,t,e=null){return{type:11,selector:i,animation:t,options:e}}function sB(i){Promise.resolve(null).then(i)}class Wx{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){sB(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}class aB{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,o=0,s=0;const l=this.players.length;0==l?sB(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++e==l&&this._onFinish()}),u.onDestroy(()=>{++o==l&&this._onDestroy()}),u.onStart(()=>{++s==l&&this._onStart()})}),this.totalTime=this.players.reduce((u,g)=>Math.max(u,g.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(o=>{const s=o.totalTime?Math.min(1,e/o.totalTime):1;o.setPosition(s)})}getPosition(){const t=this.players.reduce((e,o)=>null===e||o.totalTime>e.totalTime?o:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}function lB(i){return new a.vHH(3e3,!1)}function YW(){return typeof window<"u"&&typeof window.document<"u"}function jP(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Ry(i){switch(i.length){case 0:return new Wx;case 1:return i[0];default:return new aB(i)}}function cB(i,t,e,o,s=new Map,l=new Map){const u=[],g=[];let _=-1,w=null;if(o.forEach(T=>{const D=T.get("offset"),O=D==_,F=O&&w||new Map;T.forEach((j,Q)=>{let ae=Q,Oe=j;if("offset"!==Q)switch(ae=t.normalizePropertyName(ae,u),Oe){case"!":Oe=s.get(Q);break;case Hm:Oe=l.get(Q);break;default:Oe=t.normalizeStyleValue(Q,ae,Oe,u)}F.set(ae,Oe)}),O||g.push(F),w=F,_=D}),u.length)throw function VW(i){return new a.vHH(3502,!1)}();return g}function zP(i,t,e,o){switch(t){case"start":i.onStart(()=>o(e&&GP(e,"start",i)));break;case"done":i.onDone(()=>o(e&&GP(e,"done",i)));break;case"destroy":i.onDestroy(()=>o(e&&GP(e,"destroy",i)))}}function GP(i,t,e){const l=qP(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,e.totalTime??i.totalTime,!!e.disabled),u=i._data;return null!=u&&(l._data=u),l}function qP(i,t,e,o,s="",l=0,u){return{element:i,triggerName:t,fromState:e,toState:o,phaseName:s,totalTime:l,disabled:!!u}}function au(i,t,e){let o=i.get(t);return o||i.set(t,o=e),o}function uB(i){const t=i.indexOf(":");return[i.substring(1,t),i.slice(t+1)]}let ZP=(i,t)=>!1,dB=(i,t,e)=>[],hB=null;function $P(i){const t=i.parentNode||i.host;return t===hB?null:t}(jP()||typeof Element<"u")&&(YW()?(hB=(()=>document.documentElement)(),ZP=(i,t)=>{for(;t;){if(t===i)return!0;t=$P(t)}return!1}):ZP=(i,t)=>i.contains(t),dB=(i,t,e)=>{if(e)return Array.from(i.querySelectorAll(t));const o=i.querySelector(t);return o?[o]:[]});let e0=null,pB=!1;const fB=ZP,gB=dB;let mB=(()=>{class i{validateStyleProperty(e){return function QW(i){e0||(e0=function XW(){return typeof document<"u"?document.body:null}()||{},pB=!!e0.style&&"WebkitAppearance"in e0.style);let t=!0;return e0.style&&!function JW(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in e0.style,!t&&pB&&(t="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in e0.style)),t}(e)}matchesElement(e,o){return!1}containsElement(e,o){return fB(e,o)}getParentElement(e){return $P(e)}query(e,o,s){return gB(e,o,s)}computeStyle(e,o,s){return s||""}animate(e,o,s,l,u,g=[],_){return new Wx(s,l)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})(),WP=(()=>{class i{}return i.NOOP=new mB,i})();const KP="ng-enter",cA="ng-leave",uA="ng-trigger",dA=".ng-trigger",yB="ng-animating",YP=".ng-animating";function Py(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:JP(parseFloat(t[1]),t[2])}function JP(i,t){return"s"===t?1e3*i:i}function hA(i,t,e){return i.hasOwnProperty("duration")?i:function nK(i,t,e){let s,l=0,u="";if("string"==typeof i){const g=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===g)return t.push(lB()),{duration:0,delay:0,easing:""};s=JP(parseFloat(g[1]),g[2]);const _=g[3];null!=_&&(l=JP(parseFloat(_),g[4]));const w=g[5];w&&(u=w)}else s=i;if(!e){let g=!1,_=t.length;s<0&&(t.push(function mW(){return new a.vHH(3100,!1)}()),g=!0),l<0&&(t.push(function _W(){return new a.vHH(3101,!1)}()),g=!0),g&&t.splice(_,0,lB())}return{duration:s,delay:l,easing:u}}(i,t,e)}function Kx(i,t={}){return Object.keys(i).forEach(e=>{t[e]=i[e]}),t}function vB(i){const t=new Map;return Object.keys(i).forEach(e=>{t.set(e,i[e])}),t}function Ny(i,t=new Map,e){if(e)for(let[o,s]of e)t.set(o,s);for(let[o,s]of i)t.set(o,s);return t}function wB(i,t,e){return e?t+":"+e+";":""}function CB(i){let t="";for(let e=0;e<i.style.length;e++){const o=i.style.item(e);t+=wB(0,o,i.style.getPropertyValue(o))}for(const e in i.style)i.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=wB(0,sK(e),i.style[e]));i.setAttribute("style",t)}function Lf(i,t,e){i.style&&(t.forEach((o,s)=>{const l=XP(s);e&&!e.has(s)&&e.set(s,i.style[l]),i.style[l]=o}),jP()&&CB(i))}function t0(i,t){i.style&&(t.forEach((e,o)=>{const s=XP(o);i.style[s]=""}),jP()&&CB(i))}function Yx(i){return Array.isArray(i)?1==i.length?i[0]:iB(i):i}const QP=new RegExp("{{\\s*(.+?)\\s*}}","g");function TB(i){let t=[];if("string"==typeof i){let e;for(;e=QP.exec(i);)t.push(e[1]);QP.lastIndex=0}return t}function pA(i,t,e){const o=i.toString(),s=o.replace(QP,(l,u)=>{let g=t[u];return null==g&&(e.push(function vW(i){return new a.vHH(3003,!1)}()),g=""),g.toString()});return s==o?i:s}function fA(i){const t=[];let e=i.next();for(;!e.done;)t.push(e.value),e=i.next();return t}const oK=/-+([a-z0-9])/g;function XP(i){return i.replace(oK,(...t)=>t[1].toUpperCase())}function sK(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function lu(i,t,e){switch(t.type){case 7:return i.visitTrigger(t,e);case 0:return i.visitState(t,e);case 1:return i.visitTransition(t,e);case 2:return i.visitSequence(t,e);case 3:return i.visitGroup(t,e);case 4:return i.visitAnimate(t,e);case 5:return i.visitKeyframes(t,e);case 6:return i.visitStyle(t,e);case 8:return i.visitReference(t,e);case 9:return i.visitAnimateChild(t,e);case 10:return i.visitAnimateRef(t,e);case 11:return i.visitQuery(t,e);case 12:return i.visitStagger(t,e);default:throw function bW(i){return new a.vHH(3004,!1)}()}}function EB(i,t){return window.getComputedStyle(i)[t]}function hK(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(o=>function pK(i,t,e){if(":"==i[0]){const _=function fK(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,o)=>parseFloat(o)>parseFloat(e);case":decrement":return(e,o)=>parseFloat(o)<parseFloat(e);default:return t.push(function PW(i){return new a.vHH(3016,!1)}()),"* => *"}}(i,e);if("function"==typeof _)return void t.push(_);i=_}const o=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==o||o.length<4)return e.push(function RW(i){return new a.vHH(3015,!1)}()),t;const s=o[1],l=o[2],u=o[3];t.push(xB(s,u));"<"==l[0]&&!("*"==s&&"*"==u)&&t.push(xB(u,s))}(o,e,t)):e.push(i),e}const yA=new Set(["true","1"]),vA=new Set(["false","0"]);function xB(i,t){const e=yA.has(i)||vA.has(i),o=yA.has(t)||vA.has(t);return(s,l)=>{let u="*"==i||i==s,g="*"==t||t==l;return!u&&e&&"boolean"==typeof s&&(u=s?yA.has(i):vA.has(i)),!g&&o&&"boolean"==typeof l&&(g=l?yA.has(t):vA.has(t)),u&&g}}const gK=new RegExp("s*:selfs*,?","g");function eN(i,t,e,o){return new mK(i).build(t,e,o)}class mK{constructor(t){this._driver=t}build(t,e,o){const s=new vK(e);return this._resetContextStyleTimingState(s),lu(this,Yx(t),s)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let o=e.queryCount=0,s=e.depCount=0;const l=[],u=[];return"@"==t.name.charAt(0)&&e.errors.push(function CW(){return new a.vHH(3006,!1)}()),t.definitions.forEach(g=>{if(this._resetContextStyleTimingState(e),0==g.type){const _=g,w=_.name;w.toString().split(/\s*,\s*/).forEach(T=>{_.name=T,l.push(this.visitState(_,e))}),_.name=w}else if(1==g.type){const _=this.visitTransition(g,e);o+=_.queryCount,s+=_.depCount,u.push(_)}else e.errors.push(function TW(){return new a.vHH(3007,!1)}())}),{type:7,name:t.name,states:l,transitions:u,queryCount:o,depCount:s,options:null}}visitState(t,e){const o=this.visitStyle(t.styles,e),s=t.options&&t.options.params||null;if(o.containsDynamicStyles){const l=new Set,u=s||{};o.styles.forEach(g=>{g instanceof Map&&g.forEach(_=>{TB(_).forEach(w=>{u.hasOwnProperty(w)||l.add(w)})})}),l.size&&(fA(l.values()),e.errors.push(function EW(i,t){return new a.vHH(3008,!1)}()))}return{type:0,name:t.name,style:o,options:s?{params:s}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const o=lu(this,Yx(t.animation),e);return{type:1,matchers:hK(t.expr,e.errors),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:n0(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(o=>lu(this,o,e)),options:n0(t.options)}}visitGroup(t,e){const o=e.currentTime;let s=0;const l=t.steps.map(u=>{e.currentTime=o;const g=lu(this,u,e);return s=Math.max(s,e.currentTime),g});return e.currentTime=s,{type:3,steps:l,options:n0(t.options)}}visitAnimate(t,e){const o=function wK(i,t){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return tN(hA(i,t).duration,0,"");const e=i;if(e.split(/\s+/).some(l=>"{"==l.charAt(0)&&"{"==l.charAt(1))){const l=tN(0,0,"");return l.dynamic=!0,l.strValue=e,l}const s=hA(e,t);return tN(s.duration,s.delay,s.easing)}(t.timings,e.errors);e.currentAnimateTimings=o;let s,l=t.styles?t.styles:ti({});if(5==l.type)s=this.visitKeyframes(l,e);else{let u=t.styles,g=!1;if(!u){g=!0;const w={};o.easing&&(w.easing=o.easing),u=ti(w)}e.currentTime+=o.duration+o.delay;const _=this.visitStyle(u,e);_.isEmptyStep=g,s=_}return e.currentAnimateTimings=null,{type:4,timings:o,style:s,options:null}}visitStyle(t,e){const o=this._makeStyleAst(t,e);return this._validateStyleAst(o,e),o}_makeStyleAst(t,e){const o=[],s=Array.isArray(t.styles)?t.styles:[t.styles];for(let g of s)"string"==typeof g?g===Hm?o.push(g):e.errors.push(new a.vHH(3002,!1)):o.push(vB(g));let l=!1,u=null;return o.forEach(g=>{if(g instanceof Map&&(g.has("easing")&&(u=g.get("easing"),g.delete("easing")),!l))for(let _ of g.values())if(_.toString().indexOf("{{")>=0){l=!0;break}}),{type:6,styles:o,easing:u,offset:t.offset,containsDynamicStyles:l,options:null}}_validateStyleAst(t,e){const o=e.currentAnimateTimings;let s=e.currentTime,l=e.currentTime;o&&l>0&&(l-=o.duration+o.delay),t.styles.forEach(u=>{"string"!=typeof u&&u.forEach((g,_)=>{const w=e.collectedStyles.get(e.currentQuerySelector),T=w.get(_);let D=!0;T&&(l!=s&&l>=T.startTime&&s<=T.endTime&&(e.errors.push(function SW(i,t,e,o,s){return new a.vHH(3010,!1)}()),D=!1),l=T.startTime),D&&w.set(_,{startTime:l,endTime:s}),e.options&&function rK(i,t,e){const o=t.params||{},s=TB(i);s.length&&s.forEach(l=>{o.hasOwnProperty(l)||e.push(function yW(i){return new a.vHH(3001,!1)}())})}(g,e.options,e.errors)})})}visitKeyframes(t,e){const o={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function DW(){return new a.vHH(3011,!1)}()),o;let l=0;const u=[];let g=!1,_=!1,w=0;const T=t.steps.map(Oe=>{const We=this._makeStyleAst(Oe,e);let ft=null!=We.offset?We.offset:function bK(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){const o=e;t=parseFloat(o.get("offset")),o.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const e=i;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(We.styles),dt=0;return null!=ft&&(l++,dt=We.offset=ft),_=_||dt<0||dt>1,g=g||dt<w,w=dt,u.push(dt),We});_&&e.errors.push(function IW(){return new a.vHH(3012,!1)}()),g&&e.errors.push(function MW(){return new a.vHH(3200,!1)}());const D=t.steps.length;let O=0;l>0&&l<D?e.errors.push(function AW(){return new a.vHH(3202,!1)}()):0==l&&(O=1/(D-1));const F=D-1,j=e.currentTime,Q=e.currentAnimateTimings,ae=Q.duration;return T.forEach((Oe,We)=>{const ft=O>0?We==F?1:O*We:u[We],dt=ft*ae;e.currentTime=j+Q.delay+dt,Q.duration=dt,this._validateStyleAst(Oe,e),Oe.offset=ft,o.styles.push(Oe)}),o}visitReference(t,e){return{type:8,animation:lu(this,Yx(t.animation),e),options:n0(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:n0(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:n0(t.options)}}visitQuery(t,e){const o=e.currentQuerySelector,s=t.options||{};e.queryCount++,e.currentQuery=t;const[l,u]=function _K(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(gK,"")),i=i.replace(/@\*/g,dA).replace(/@\w+/g,e=>dA+"-"+e.slice(1)).replace(/:animating/g,YP),[i,t]}(t.selector);e.currentQuerySelector=o.length?o+" "+l:l,au(e.collectedStyles,e.currentQuerySelector,new Map);const g=lu(this,Yx(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=o,{type:11,selector:l,limit:s.limit||0,optional:!!s.optional,includeSelf:u,animation:g,originalSelector:t.selector,options:n0(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function kW(){return new a.vHH(3013,!1)}());const o="full"===t.timings?{duration:0,delay:0,easing:"full"}:hA(t.timings,e.errors,!0);return{type:12,animation:lu(this,Yx(t.animation),e),timings:o,options:null}}}class vK{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function n0(i){return i?(i=Kx(i)).params&&(i.params=function yK(i){return i?Kx(i):null}(i.params)):i={},i}function tN(i,t,e){return{duration:i,delay:t,easing:e}}function nN(i,t,e,o,s,l,u=null,g=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:o,duration:s,delay:l,totalTime:s+l,easing:u,subTimeline:g}}class bA{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let o=this._map.get(t);o||this._map.set(t,o=[]),o.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const EK=new RegExp(":enter","g"),SK=new RegExp(":leave","g");function iN(i,t,e,o,s,l=new Map,u=new Map,g,_,w=[]){return(new DK).buildKeyframes(i,t,e,o,s,l,u,g,_,w)}class DK{buildKeyframes(t,e,o,s,l,u,g,_,w,T=[]){w=w||new bA;const D=new rN(t,e,w,s,l,T,[]);D.options=_;const O=_.delay?Py(_.delay):0;D.currentTimeline.delayNextStep(O),D.currentTimeline.setStyles([u],null,D.errors,_),lu(this,o,D);const F=D.timelines.filter(j=>j.containsAnimation());if(F.length&&g.size){let j;for(let Q=F.length-1;Q>=0;Q--){const ae=F[Q];if(ae.element===e){j=ae;break}}j&&!j.allowOnlyTimelineStyles()&&j.setStyles([g],null,D.errors,_)}return F.length?F.map(j=>j.buildKeyframes()):[nN(e,[],[],[],0,O,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const o=e.subInstructions.get(e.element);if(o){const s=e.createSubContext(t.options),l=e.currentTimeline.currentTime,u=this._visitSubInstructions(o,s,s.options);l!=u&&e.transformIntoNewTimeline(u)}e.previousNode=t}visitAnimateRef(t,e){const o=e.createSubContext(t.options);o.transformIntoNewTimeline(),this.visitReference(t.animation,o),e.transformIntoNewTimeline(o.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,o){let l=e.currentTimeline.currentTime;const u=null!=o.duration?Py(o.duration):null,g=null!=o.delay?Py(o.delay):null;return 0!==u&&t.forEach(_=>{const w=e.appendInstructionToTimeline(_,u,g);l=Math.max(l,w.duration+w.delay)}),l}visitReference(t,e){e.updateOptions(t.options,!0),lu(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const o=e.subContextCount;let s=e;const l=t.options;if(l&&(l.params||l.delay)&&(s=e.createSubContext(l),s.transformIntoNewTimeline(),null!=l.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=wA);const u=Py(l.delay);s.delayNextStep(u)}t.steps.length&&(t.steps.forEach(u=>lu(this,u,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>o&&s.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const o=[];let s=e.currentTimeline.currentTime;const l=t.options&&t.options.delay?Py(t.options.delay):0;t.steps.forEach(u=>{const g=e.createSubContext(t.options);l&&g.delayNextStep(l),lu(this,u,g),s=Math.max(s,g.currentTimeline.currentTime),o.push(g.currentTimeline)}),o.forEach(u=>e.currentTimeline.mergeTimelineCollectedStyles(u)),e.transformIntoNewTimeline(s),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const o=t.strValue;return hA(e.params?pA(o,e.params,e.errors):o,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const o=e.currentAnimateTimings=this._visitTiming(t.timings,e),s=e.currentTimeline;o.delay&&(e.incrementTime(o.delay),s.snapshotCurrentStyles());const l=t.style;5==l.type?this.visitKeyframes(l,e):(e.incrementTime(o.duration),this.visitStyle(l,e),s.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const o=e.currentTimeline,s=e.currentAnimateTimings;!s&&o.hasCurrentStyleProperties()&&o.forwardFrame();const l=s&&s.easing||t.easing;t.isEmptyStep?o.applyEmptyStep(l):o.setStyles(t.styles,l,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const o=e.currentAnimateTimings,s=e.currentTimeline.duration,l=o.duration,g=e.createSubContext().currentTimeline;g.easing=o.easing,t.styles.forEach(_=>{g.forwardTime((_.offset||0)*l),g.setStyles(_.styles,_.easing,e.errors,e.options),g.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(g),e.transformIntoNewTimeline(s+l),e.previousNode=t}visitQuery(t,e){const o=e.currentTimeline.currentTime,s=t.options||{},l=s.delay?Py(s.delay):0;l&&(6===e.previousNode.type||0==o&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=wA);let u=o;const g=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!s.optional,e.errors);e.currentQueryTotal=g.length;let _=null;g.forEach((w,T)=>{e.currentQueryIndex=T;const D=e.createSubContext(t.options,w);l&&D.delayNextStep(l),w===e.element&&(_=D.currentTimeline),lu(this,t.animation,D),D.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,D.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(u),_&&(e.currentTimeline.mergeTimelineCollectedStyles(_),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const o=e.parentContext,s=e.currentTimeline,l=t.timings,u=Math.abs(l.duration),g=u*(e.currentQueryTotal-1);let _=u*e.currentQueryIndex;switch(l.duration<0?"reverse":l.easing){case"reverse":_=g-_;break;case"full":_=o.currentStaggerTime}const T=e.currentTimeline;_&&T.delayNextStep(_);const D=T.currentTime;lu(this,t.animation,e),e.previousNode=t,o.currentStaggerTime=s.currentTime-D+(s.startTime-o.currentTimeline.startTime)}}const wA={};class rN{constructor(t,e,o,s,l,u,g,_){this._driver=t,this.element=e,this.subInstructions=o,this._enterClassName=s,this._leaveClassName=l,this.errors=u,this.timelines=g,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=wA,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new CA(this._driver,e,0),g.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const o=t;let s=this.options;null!=o.duration&&(s.duration=Py(o.duration)),null!=o.delay&&(s.delay=Py(o.delay));const l=o.params;if(l){let u=s.params;u||(u=this.options.params={}),Object.keys(l).forEach(g=>{(!e||!u.hasOwnProperty(g))&&(u[g]=pA(l[g],u,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const o=t.params={};Object.keys(e).forEach(s=>{o[s]=e[s]})}}return t}createSubContext(t=null,e,o){const s=e||this.element,l=new rN(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,o||0));return l.previousNode=this.previousNode,l.currentAnimateTimings=this.currentAnimateTimings,l.options=this._copyOptions(),l.updateOptions(t),l.currentQueryIndex=this.currentQueryIndex,l.currentQueryTotal=this.currentQueryTotal,l.parentContext=this,this.subContextCount++,l}transformIntoNewTimeline(t){return this.previousNode=wA,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,o){const s={duration:e??t.duration,delay:this.currentTimeline.currentTime+(o??0)+t.delay,easing:""},l=new IK(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,s,t.stretchStartingKeyframe);return this.timelines.push(l),s}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,o,s,l,u){let g=[];if(s&&g.push(this.element),t.length>0){t=(t=t.replace(EK,"."+this._enterClassName)).replace(SK,"."+this._leaveClassName);let w=this._driver.query(this.element,t,1!=o);0!==o&&(w=o<0?w.slice(w.length+o,w.length):w.slice(0,o)),g.push(...w)}return!l&&0==g.length&&u.push(function OW(i){return new a.vHH(3014,!1)}()),g}}class CA{constructor(t,e,o,s){this._driver=t,this.element=e,this.startTime=o,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new CA(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,o]of this._globalTimelineStyles)this._backFill.set(e,o||Hm),this._currentKeyframe.set(e,Hm);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,o,s){e&&this._previousKeyframe.set("easing",e);const l=s&&s.params||{},u=function MK(i,t){const e=new Map;let o;return i.forEach(s=>{if("*"===s){o=o||t.keys();for(let l of o)e.set(l,Hm)}else Ny(s,e)}),e}(t,this._globalTimelineStyles);for(let[g,_]of u){const w=pA(_,l,o);this._pendingStyles.set(g,w),this._localTimelineStyles.has(g)||this._backFill.set(g,this._globalTimelineStyles.get(g)??Hm),this._updateStyle(g,w)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,o)=>{const s=this._styleSummary.get(o);(!s||e.time>s.time)&&this._updateStyle(o,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,o=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((g,_)=>{const w=Ny(g,new Map,this._backFill);w.forEach((T,D)=>{"!"===T?t.add(D):T===Hm&&e.add(D)}),o||w.set("offset",_/this.duration),s.push(w)});const l=t.size?fA(t.values()):[],u=e.size?fA(e.values()):[];if(o){const g=s[0],_=new Map(g);g.set("offset",0),_.set("offset",1),s=[g,_]}return nN(this.element,s,l,u,this.duration,this.startTime,this.easing,!1)}}class IK extends CA{constructor(t,e,o,s,l,u,g=!1){super(t,e,u.delay),this.keyframes=o,this.preStyleProps=s,this.postStyleProps=l,this._stretchStartingKeyframe=g,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:o,easing:s}=this.timings;if(this._stretchStartingKeyframe&&e){const l=[],u=o+e,g=e/u,_=Ny(t[0]);_.set("offset",0),l.push(_);const w=Ny(t[0]);w.set("offset",IB(g)),l.push(w);const T=t.length-1;for(let D=1;D<=T;D++){let O=Ny(t[D]);const F=O.get("offset");O.set("offset",IB((e+F*o)/u)),l.push(O)}o=u,e=0,s="",t=l}return nN(this.element,t,this.preStyleProps,this.postStyleProps,o,e,s,!0)}}function IB(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}class oN{}const AK=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class kK extends oN{normalizePropertyName(t,e){return XP(t)}normalizeStyleValue(t,e,o,s){let l="";const u=o.toString().trim();if(AK.has(e)&&0!==o&&"0"!==o)if("number"==typeof o)l="px";else{const g=o.match(/^[+-]?[\d\.]+([a-z]*)$/);g&&0==g[1].length&&s.push(function wW(i,t){return new a.vHH(3005,!1)}())}return u+l}}function MB(i,t,e,o,s,l,u,g,_,w,T,D,O){return{type:0,element:i,triggerName:t,isRemovalTransition:s,fromState:e,fromStyles:l,toState:o,toStyles:u,timelines:g,queriedElements:_,preStyleProps:w,postStyleProps:T,totalTime:D,errors:O}}const sN={};class AB{constructor(t,e,o){this._triggerName=t,this.ast=e,this._stateStyles=o}match(t,e,o,s){return function OK(i,t,e,o,s){return i.some(l=>l(t,e,o,s))}(this.ast.matchers,t,e,o,s)}buildStyles(t,e,o){let s=this._stateStyles.get("*");return void 0!==t&&(s=this._stateStyles.get(t?.toString())||s),s?s.buildStyles(e,o):new Map}build(t,e,o,s,l,u,g,_,w,T){const D=[],O=this.ast.options&&this.ast.options.params||sN,j=this.buildStyles(o,g&&g.params||sN,D),Q=_&&_.params||sN,ae=this.buildStyles(s,Q,D),Oe=new Set,We=new Map,ft=new Map,dt="void"===s,zt={params:RK(Q,O),delay:this.ast.options?.delay},Wt=T?[]:iN(t,e,this.ast.animation,l,u,j,ae,zt,w,D);let Cn=0;if(Wt.forEach(gi=>{Cn=Math.max(gi.duration+gi.delay,Cn)}),D.length)return MB(e,this._triggerName,o,s,dt,j,ae,[],[],We,ft,Cn,D);Wt.forEach(gi=>{const Ki=gi.element,ao=au(We,Ki,new Set);gi.preStyleProps.forEach(cs=>ao.add(cs));const Ma=au(ft,Ki,new Set);gi.postStyleProps.forEach(cs=>Ma.add(cs)),Ki!==e&&Oe.add(Ki)});const Ln=fA(Oe.values());return MB(e,this._triggerName,o,s,dt,j,ae,Wt,Ln,We,ft,Cn)}}function RK(i,t){const e=Kx(t);for(const o in i)i.hasOwnProperty(o)&&null!=i[o]&&(e[o]=i[o]);return e}class PK{constructor(t,e,o){this.styles=t,this.defaultParams=e,this.normalizer=o}buildStyles(t,e){const o=new Map,s=Kx(this.defaultParams);return Object.keys(t).forEach(l=>{const u=t[l];null!==u&&(s[l]=u)}),this.styles.styles.forEach(l=>{"string"!=typeof l&&l.forEach((u,g)=>{u&&(u=pA(u,s,e));const _=this.normalizer.normalizePropertyName(g,e);u=this.normalizer.normalizeStyleValue(g,_,u,e),o.set(_,u)})}),o}}class FK{constructor(t,e,o){this.name=t,this.ast=e,this._normalizer=o,this.transitionFactories=[],this.states=new Map,e.states.forEach(s=>{this.states.set(s.name,new PK(s.style,s.options&&s.options.params||{},o))}),kB(this.states,"true","1"),kB(this.states,"false","0"),e.transitions.forEach(s=>{this.transitionFactories.push(new AB(t,s,this.states))}),this.fallbackTransition=function LK(i,t,e){return new AB(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,g)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,o,s){return this.transitionFactories.find(u=>u.match(t,e,o,s))||null}matchStyles(t,e,o){return this.fallbackTransition.buildStyles(t,e,o)}}function kB(i,t,e){i.has(t)?i.has(e)||i.set(e,i.get(t)):i.has(e)&&i.set(t,i.get(e))}const VK=new bA;class HK{constructor(t,e,o){this.bodyNode=t,this._driver=e,this._normalizer=o,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const o=[],l=eN(this._driver,e,o,[]);if(o.length)throw function HW(i){return new a.vHH(3503,!1)}();this._animations.set(t,l)}_buildPlayer(t,e,o){const s=t.element,l=cB(0,this._normalizer,0,t.keyframes,e,o);return this._driver.animate(s,l,t.duration,t.delay,t.easing,[],!0)}create(t,e,o={}){const s=[],l=this._animations.get(t);let u;const g=new Map;if(l?(u=iN(this._driver,e,l,KP,cA,new Map,new Map,o,VK,s),u.forEach(T=>{const D=au(g,T.element,new Map);T.postStyleProps.forEach(O=>D.set(O,null))})):(s.push(function BW(){return new a.vHH(3300,!1)}()),u=[]),s.length)throw function UW(i){return new a.vHH(3504,!1)}();g.forEach((T,D)=>{T.forEach((O,F)=>{T.set(F,this._driver.computeStyle(D,F,Hm))})});const w=Ry(u.map(T=>{const D=g.get(T.element);return this._buildPlayer(T,new Map,D)}));return this._playersById.set(t,w),w.onDestroy(()=>this.destroy(t)),this.players.push(w),w}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const o=this.players.indexOf(e);o>=0&&this.players.splice(o,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function jW(i){return new a.vHH(3301,!1)}();return e}listen(t,e,o,s){const l=qP(e,"","","");return zP(this._getPlayer(t),o,l,s),()=>{}}command(t,e,o,s){if("register"==o)return void this.register(t,s[0]);if("create"==o)return void this.create(t,e,s[0]||{});const l=this._getPlayer(t);switch(o){case"play":l.play();break;case"pause":l.pause();break;case"reset":l.reset();break;case"restart":l.restart();break;case"finish":l.finish();break;case"init":l.init();break;case"setPosition":l.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(t)}}}const OB="ng-animate-queued",aN="ng-animate-disabled",GK=[],RB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},qK={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},wd="__ng_removed";class lN{constructor(t,e=""){this.namespaceId=e;const o=t&&t.hasOwnProperty("value");if(this.value=function KK(i){return i??null}(o?t.value:t),o){const l=Kx(t);delete l.value,this.options=l}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const o=this.options.params;Object.keys(e).forEach(s=>{null==o[s]&&(o[s]=e[s])})}}}const Jx="void",cN=new lN(Jx);class ZK{constructor(t,e,o){this.id=t,this.hostElement=e,this._engine=o,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Cd(e,this._hostClassName)}listen(t,e,o,s){if(!this._triggers.has(e))throw function zW(i,t){return new a.vHH(3302,!1)}();if(null==o||0==o.length)throw function GW(i){return new a.vHH(3303,!1)}();if(!function YK(i){return"start"==i||"done"==i}(o))throw function qW(i,t){return new a.vHH(3400,!1)}();const l=au(this._elementListeners,t,[]),u={name:e,phase:o,callback:s};l.push(u);const g=au(this._engine.statesByElement,t,new Map);return g.has(e)||(Cd(t,uA),Cd(t,uA+"-"+e),g.set(e,cN)),()=>{this._engine.afterFlush(()=>{const _=l.indexOf(u);_>=0&&l.splice(_,1),this._triggers.has(e)||g.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function ZW(i){return new a.vHH(3401,!1)}();return e}trigger(t,e,o,s=!0){const l=this._getTrigger(e),u=new uN(this.id,e,t);let g=this._engine.statesByElement.get(t);g||(Cd(t,uA),Cd(t,uA+"-"+e),this._engine.statesByElement.set(t,g=new Map));let _=g.get(e);const w=new lN(o,this.id);if(!(o&&o.hasOwnProperty("value"))&&_&&w.absorbOptions(_.options),g.set(e,w),_||(_=cN),w.value!==Jx&&_.value===w.value){if(!function XK(i,t){const e=Object.keys(i),o=Object.keys(t);if(e.length!=o.length)return!1;for(let s=0;s<e.length;s++){const l=e[s];if(!t.hasOwnProperty(l)||i[l]!==t[l])return!1}return!0}(_.params,w.params)){const Q=[],ae=l.matchStyles(_.value,_.params,Q),Oe=l.matchStyles(w.value,w.params,Q);Q.length?this._engine.reportError(Q):this._engine.afterFlush(()=>{t0(t,ae),Lf(t,Oe)})}return}const O=au(this._engine.playersByElement,t,[]);O.forEach(Q=>{Q.namespaceId==this.id&&Q.triggerName==e&&Q.queued&&Q.destroy()});let F=l.matchTransition(_.value,w.value,t,w.params),j=!1;if(!F){if(!s)return;F=l.fallbackTransition,j=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:F,fromState:_,toState:w,player:u,isFallbackTransition:j}),j||(Cd(t,OB),u.onStart(()=>{C1(t,OB)})),u.onDone(()=>{let Q=this.players.indexOf(u);Q>=0&&this.players.splice(Q,1);const ae=this._engine.playersByElement.get(t);if(ae){let Oe=ae.indexOf(u);Oe>=0&&ae.splice(Oe,1)}}),this.players.push(u),O.push(u),u}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,o)=>{this._elementListeners.set(o,e.filter(s=>s.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(o=>o.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const o=this._engine.driver.query(t,dA,!0);o.forEach(s=>{if(s[wd])return;const l=this._engine.fetchNamespacesByElement(s);l.size?l.forEach(u=>u.triggerLeaveAnimation(s,e,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>o.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(t,e,o,s){const l=this._engine.statesByElement.get(t),u=new Map;if(l){const g=[];if(l.forEach((_,w)=>{if(u.set(w,_.value),this._triggers.has(w)){const T=this.trigger(t,w,Jx,s);T&&g.push(T)}}),g.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,u),o&&Ry(g).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),o=this._engine.statesByElement.get(t);if(e&&o){const s=new Set;e.forEach(l=>{const u=l.name;if(s.has(u))return;s.add(u);const _=this._triggers.get(u).fallbackTransition,w=o.get(u)||cN,T=new lN(Jx),D=new uN(this.id,u,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:u,transition:_,fromState:w,toState:T,player:D,isFallbackTransition:!0})})}}removeNode(t,e){const o=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let s=!1;if(o.totalAnimations){const l=o.players.length?o.playersByQueriedElement.get(t):[];if(l&&l.length)s=!0;else{let u=t;for(;u=u.parentNode;)if(o.statesByElement.get(u)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(t),s)o.markElementAsRemoved(this.id,t,!1,e);else{const l=t[wd];(!l||l===RB)&&(o.afterFlush(()=>this.clearElementCache(t)),o.destroyInnerAnimations(t),o._onRemovalComplete(t,e))}}insertNode(t,e){Cd(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(o=>{const s=o.player;if(s.destroyed)return;const l=o.element,u=this._elementListeners.get(l);u&&u.forEach(g=>{if(g.name==o.triggerName){const _=qP(l,o.triggerName,o.fromState.value,o.toState.value);_._data=t,zP(o.player,g.phase,_,g.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):e.push(o)}),this._queue=[],e.sort((o,s)=>{const l=o.transition.ast.depCount,u=s.transition.ast.depCount;return 0==l||0==u?l-u:this._engine.driver.containsElement(o.element,s.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(o=>o.element===t)||e,e}}class $K{constructor(t,e,o){this.bodyNode=t,this.driver=e,this._normalizer=o,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,l)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(o=>{o.queued&&t.push(o)})}),t}createNamespace(t,e){const o=new ZK(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(o,e):(this.newHostElements.set(e,o),this.collectEnterElement(e)),this._namespaceLookup[t]=o}_balanceNamespaceList(t,e){const o=this._namespaceList,s=this.namespacesByHostElement;if(o.length-1>=0){let u=!1,g=this.driver.getParentElement(e);for(;g;){const _=s.get(g);if(_){const w=o.indexOf(_);o.splice(w+1,0,t),u=!0;break}g=this.driver.getParentElement(g)}u||o.unshift(t)}else o.push(t);return s.set(e,t),t}register(t,e){let o=this._namespaceLookup[t];return o||(o=this.createNamespace(t,e)),o}registerTrigger(t,e,o){let s=this._namespaceLookup[t];s&&s.register(e,o)&&this.totalAnimations++}destroy(t,e){if(!t)return;const o=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(o.hostElement),delete this._namespaceLookup[t];const s=this._namespaceList.indexOf(o);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>o.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,o=this.statesByElement.get(t);if(o)for(let s of o.values())if(s.namespaceId){const l=this._fetchNamespace(s.namespaceId);l&&e.add(l)}return e}trigger(t,e,o,s){if(TA(e)){const l=this._fetchNamespace(t);if(l)return l.trigger(e,o,s),!0}return!1}insertNode(t,e,o,s){if(!TA(e))return;const l=e[wd];if(l&&l.setForRemoval){l.setForRemoval=!1,l.setForMove=!0;const u=this.collectedLeaveElements.indexOf(e);u>=0&&this.collectedLeaveElements.splice(u,1)}if(t){const u=this._fetchNamespace(t);u&&u.insertNode(e,o)}s&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Cd(t,aN)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),C1(t,aN))}removeNode(t,e,o,s){if(TA(e)){const l=t?this._fetchNamespace(t):null;if(l?l.removeNode(e,s):this.markElementAsRemoved(t,e,!1,s),o){const u=this.namespacesByHostElement.get(e);u&&u.id!==t&&u.removeNode(e,s)}}else this._onRemovalComplete(e,s)}markElementAsRemoved(t,e,o,s,l){this.collectedLeaveElements.push(e),e[wd]={namespaceId:t,setForRemoval:s,hasAnimation:o,removedBeforeQueried:!1,previousTriggersValues:l}}listen(t,e,o,s,l){return TA(e)?this._fetchNamespace(t).listen(e,o,s,l):()=>{}}_buildInstruction(t,e,o,s,l){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,o,s,t.fromState.options,t.toState.options,e,l)}destroyInnerAnimations(t){let e=this.driver.query(t,dA,!0);e.forEach(o=>this.destroyActiveAnimationsForElement(o)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,YP,!0),e.forEach(o=>this.finishActiveQueriedAnimationOnElement(o)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(o=>{o.queued?o.markedForDestroy=!0:o.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(o=>o.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Ry(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[wd];if(e&&e.setForRemoval){if(t[wd]=RB,e.namespaceId){this.destroyInnerAnimations(t);const o=this._fetchNamespace(e.namespaceId);o&&o.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(aN)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(o=>{this.markElementAsDisabled(o,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((o,s)=>this._balanceNamespaceList(o,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let o=0;o<this.collectedEnterElements.length;o++)Cd(this.collectedEnterElements[o],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const o=[];try{e=this._flushAnimations(o,t)}finally{for(let s=0;s<o.length;s++)o[s]()}}else for(let o=0;o<this.collectedLeaveElements.length;o++)this.processLeaveNode(this.collectedLeaveElements[o]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(o=>o()),this._flushFns=[],this._whenQuietFns.length){const o=this._whenQuietFns;this._whenQuietFns=[],e.length?Ry(e).onDone(()=>{o.forEach(s=>s())}):o.forEach(s=>s())}}reportError(t){throw function $W(i){return new a.vHH(3402,!1)}()}_flushAnimations(t,e){const o=new bA,s=[],l=new Map,u=[],g=new Map,_=new Map,w=new Map,T=new Set;this.disabledNodes.forEach(_n=>{T.add(_n);const Pn=this.driver.query(_n,".ng-animate-queued",!0);for(let Wn=0;Wn<Pn.length;Wn++)T.add(Pn[Wn])});const D=this.bodyNode,O=Array.from(this.statesByElement.keys()),F=FB(O,this.collectedEnterElements),j=new Map;let Q=0;F.forEach((_n,Pn)=>{const Wn=KP+Q++;j.set(Pn,Wn),_n.forEach(bi=>Cd(bi,Wn))});const ae=[],Oe=new Set,We=new Set;for(let _n=0;_n<this.collectedLeaveElements.length;_n++){const Pn=this.collectedLeaveElements[_n],Wn=Pn[wd];Wn&&Wn.setForRemoval&&(ae.push(Pn),Oe.add(Pn),Wn.hasAnimation?this.driver.query(Pn,".ng-star-inserted",!0).forEach(bi=>Oe.add(bi)):We.add(Pn))}const ft=new Map,dt=FB(O,Array.from(Oe));dt.forEach((_n,Pn)=>{const Wn=cA+Q++;ft.set(Pn,Wn),_n.forEach(bi=>Cd(bi,Wn))}),t.push(()=>{F.forEach((_n,Pn)=>{const Wn=j.get(Pn);_n.forEach(bi=>C1(bi,Wn))}),dt.forEach((_n,Pn)=>{const Wn=ft.get(Pn);_n.forEach(bi=>C1(bi,Wn))}),ae.forEach(_n=>{this.processLeaveNode(_n)})});const zt=[],Wt=[];for(let _n=this._namespaceList.length-1;_n>=0;_n--)this._namespaceList[_n].drainQueuedTransitions(e).forEach(Wn=>{const bi=Wn.player,Fo=Wn.element;if(zt.push(bi),this.collectedEnterElements.length){const us=Fo[wd];if(us&&us.setForMove){if(us.previousTriggersValues&&us.previousTriggersValues.has(Wn.triggerName)){const Pl=us.previousTriggersValues.get(Wn.triggerName),Xa=this.statesByElement.get(Wn.element);if(Xa&&Xa.has(Wn.triggerName)){const nT=Xa.get(Wn.triggerName);nT.value=Pl,Xa.set(Wn.triggerName,nT)}}return void bi.destroy()}}const fc=!D||!this.driver.containsElement(D,Fo),js=ft.get(Fo),fu=j.get(Fo),pr=this._buildInstruction(Wn,o,fu,js,fc);if(pr.errors&&pr.errors.length)return void Wt.push(pr);if(fc)return bi.onStart(()=>t0(Fo,pr.fromStyles)),bi.onDestroy(()=>Lf(Fo,pr.toStyles)),void s.push(bi);if(Wn.isFallbackTransition)return bi.onStart(()=>t0(Fo,pr.fromStyles)),bi.onDestroy(()=>Lf(Fo,pr.toStyles)),void s.push(bi);const ep=[];pr.timelines.forEach(us=>{us.stretchStartingKeyframe=!0,this.disabledNodes.has(us.element)||ep.push(us)}),pr.timelines=ep,o.append(Fo,pr.timelines),u.push({instruction:pr,player:bi,element:Fo}),pr.queriedElements.forEach(us=>au(g,us,[]).push(bi)),pr.preStyleProps.forEach((us,Pl)=>{if(us.size){let Xa=_.get(Pl);Xa||_.set(Pl,Xa=new Set),us.forEach((nT,N0)=>Xa.add(N0))}}),pr.postStyleProps.forEach((us,Pl)=>{let Xa=w.get(Pl);Xa||w.set(Pl,Xa=new Set),us.forEach((nT,N0)=>Xa.add(N0))})});if(Wt.length){const _n=[];Wt.forEach(Pn=>{_n.push(function WW(i,t){return new a.vHH(3505,!1)}())}),zt.forEach(Pn=>Pn.destroy()),this.reportError(_n)}const Cn=new Map,Ln=new Map;u.forEach(_n=>{const Pn=_n.element;o.has(Pn)&&(Ln.set(Pn,Pn),this._beforeAnimationBuild(_n.player.namespaceId,_n.instruction,Cn))}),s.forEach(_n=>{const Pn=_n.element;this._getPreviousPlayers(Pn,!1,_n.namespaceId,_n.triggerName,null).forEach(bi=>{au(Cn,Pn,[]).push(bi),bi.destroy()})});const gi=ae.filter(_n=>VB(_n,_,w)),Ki=new Map;NB(Ki,this.driver,We,w,Hm).forEach(_n=>{VB(_n,_,w)&&gi.push(_n)});const Ma=new Map;F.forEach((_n,Pn)=>{NB(Ma,this.driver,new Set(_n),_,"!")}),gi.forEach(_n=>{const Pn=Ki.get(_n),Wn=Ma.get(_n);Ki.set(_n,new Map([...Array.from(Pn?.entries()??[]),...Array.from(Wn?.entries()??[])]))});const cs=[],ev=[],tv={};u.forEach(_n=>{const{element:Pn,player:Wn,instruction:bi}=_n;if(o.has(Pn)){if(T.has(Pn))return Wn.onDestroy(()=>Lf(Pn,bi.toStyles)),Wn.disabled=!0,Wn.overrideTotalTime(bi.totalTime),void s.push(Wn);let Fo=tv;if(Ln.size>1){let js=Pn;const fu=[];for(;js=js.parentNode;){const pr=Ln.get(js);if(pr){Fo=pr;break}fu.push(js)}fu.forEach(pr=>Ln.set(pr,Fo))}const fc=this._buildAnimation(Wn.namespaceId,bi,Cn,l,Ma,Ki);if(Wn.setRealPlayer(fc),Fo===tv)cs.push(Wn);else{const js=this.playersByElement.get(Fo);js&&js.length&&(Wn.parentPlayer=Ry(js)),s.push(Wn)}}else t0(Pn,bi.fromStyles),Wn.onDestroy(()=>Lf(Pn,bi.toStyles)),ev.push(Wn),T.has(Pn)&&s.push(Wn)}),ev.forEach(_n=>{const Pn=l.get(_n.element);if(Pn&&Pn.length){const Wn=Ry(Pn);_n.setRealPlayer(Wn)}}),s.forEach(_n=>{_n.parentPlayer?_n.syncPlayerEvents(_n.parentPlayer):_n.destroy()});for(let _n=0;_n<ae.length;_n++){const Pn=ae[_n],Wn=Pn[wd];if(C1(Pn,cA),Wn&&Wn.hasAnimation)continue;let bi=[];if(g.size){let fc=g.get(Pn);fc&&fc.length&&bi.push(...fc);let js=this.driver.query(Pn,YP,!0);for(let fu=0;fu<js.length;fu++){let pr=g.get(js[fu]);pr&&pr.length&&bi.push(...pr)}}const Fo=bi.filter(fc=>!fc.destroyed);Fo.length?JK(this,Pn,Fo):this.processLeaveNode(Pn)}return ae.length=0,cs.forEach(_n=>{this.players.push(_n),_n.onDone(()=>{_n.destroy();const Pn=this.players.indexOf(_n);this.players.splice(Pn,1)}),_n.play()}),cs}elementContainsData(t,e){let o=!1;const s=e[wd];return s&&s.setForRemoval&&(o=!0),this.playersByElement.has(e)&&(o=!0),this.playersByQueriedElement.has(e)&&(o=!0),this.statesByElement.has(e)&&(o=!0),this._fetchNamespace(t).elementContainsData(e)||o}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,o,s,l){let u=[];if(e){const g=this.playersByQueriedElement.get(t);g&&(u=g)}else{const g=this.playersByElement.get(t);if(g){const _=!l||l==Jx;g.forEach(w=>{w.queued||!_&&w.triggerName!=s||u.push(w)})}}return(o||s)&&(u=u.filter(g=>!(o&&o!=g.namespaceId||s&&s!=g.triggerName))),u}_beforeAnimationBuild(t,e,o){const l=e.element,u=e.isRemovalTransition?void 0:t,g=e.isRemovalTransition?void 0:e.triggerName;for(const _ of e.timelines){const w=_.element,T=w!==l,D=au(o,w,[]);this._getPreviousPlayers(w,T,u,g,e.toState).forEach(F=>{const j=F.getRealPlayer();j.beforeDestroy&&j.beforeDestroy(),F.destroy(),D.push(F)})}t0(l,e.fromStyles)}_buildAnimation(t,e,o,s,l,u){const g=e.triggerName,_=e.element,w=[],T=new Set,D=new Set,O=e.timelines.map(j=>{const Q=j.element;T.add(Q);const ae=Q[wd];if(ae&&ae.removedBeforeQueried)return new Wx(j.duration,j.delay);const Oe=Q!==_,We=function QK(i){const t=[];return LB(i,t),t}((o.get(Q)||GK).map(Cn=>Cn.getRealPlayer())).filter(Cn=>!!Cn.element&&Cn.element===Q),ft=l.get(Q),dt=u.get(Q),zt=cB(0,this._normalizer,0,j.keyframes,ft,dt),Wt=this._buildPlayer(j,zt,We);if(j.subTimeline&&s&&D.add(Q),Oe){const Cn=new uN(t,g,Q);Cn.setRealPlayer(Wt),w.push(Cn)}return Wt});w.forEach(j=>{au(this.playersByQueriedElement,j.element,[]).push(j),j.onDone(()=>function WK(i,t,e){let o=i.get(t);if(o){if(o.length){const s=o.indexOf(e);o.splice(s,1)}0==o.length&&i.delete(t)}return o}(this.playersByQueriedElement,j.element,j))}),T.forEach(j=>Cd(j,yB));const F=Ry(O);return F.onDestroy(()=>{T.forEach(j=>C1(j,yB)),Lf(_,e.toStyles)}),D.forEach(j=>{au(s,j,[]).push(F)}),F}_buildPlayer(t,e,o){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,o):new Wx(t.duration,t.delay)}}class uN{constructor(t,e,o){this.namespaceId=t,this.triggerName=e,this.element=o,this._player=new Wx,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,o)=>{e.forEach(s=>zP(t,o,void 0,s))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){au(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function TA(i){return i&&1===i.nodeType}function PB(i,t){const e=i.style.display;return i.style.display=t??"none",e}function NB(i,t,e,o,s){const l=[];e.forEach(_=>l.push(PB(_)));const u=[];o.forEach((_,w)=>{const T=new Map;_.forEach(D=>{const O=t.computeStyle(w,D,s);T.set(D,O),(!O||0==O.length)&&(w[wd]=qK,u.push(w))}),i.set(w,T)});let g=0;return e.forEach(_=>PB(_,l[g++])),u}function FB(i,t){const e=new Map;if(i.forEach(g=>e.set(g,[])),0==t.length)return e;const s=new Set(t),l=new Map;function u(g){if(!g)return 1;let _=l.get(g);if(_)return _;const w=g.parentNode;return _=e.has(w)?w:s.has(w)?1:u(w),l.set(g,_),_}return t.forEach(g=>{const _=u(g);1!==_&&e.get(_).push(g)}),e}function Cd(i,t){i.classList?.add(t)}function C1(i,t){i.classList?.remove(t)}function JK(i,t,e){Ry(e).onDone(()=>i.processLeaveNode(t))}function LB(i,t){for(let e=0;e<i.length;e++){const o=i[e];o instanceof aB?LB(o.players,t):t.push(o)}}function VB(i,t,e){const o=e.get(i);if(!o)return!1;let s=t.get(i);return s?o.forEach(l=>s.add(l)):t.set(i,o),e.delete(i),!0}class EA{constructor(t,e,o){this.bodyNode=t,this._driver=e,this._normalizer=o,this._triggerCache={},this.onRemovalComplete=(s,l)=>{},this._transitionEngine=new $K(t,e,o),this._timelineEngine=new HK(t,e,o),this._transitionEngine.onRemovalComplete=(s,l)=>this.onRemovalComplete(s,l)}registerTrigger(t,e,o,s,l){const u=t+"-"+s;let g=this._triggerCache[u];if(!g){const _=[],T=eN(this._driver,l,_,[]);if(_.length)throw function LW(i,t){return new a.vHH(3404,!1)}();g=function NK(i,t,e){return new FK(i,t,e)}(s,T,this._normalizer),this._triggerCache[u]=g}this._transitionEngine.registerTrigger(e,s,g)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,o,s){this._transitionEngine.insertNode(t,e,o,s)}onRemove(t,e,o,s){this._transitionEngine.removeNode(t,e,s||!1,o)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,o,s){if("@"==o.charAt(0)){const[l,u]=uB(o);this._timelineEngine.command(l,e,u,s)}else this._transitionEngine.trigger(t,e,o,s)}listen(t,e,o,s,l){if("@"==o.charAt(0)){const[u,g]=uB(o);return this._timelineEngine.listen(u,e,g,l)}return this._transitionEngine.listen(t,e,o,s,l)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let tY=(()=>{class i{constructor(e,o,s){this._element=e,this._startStyles=o,this._endStyles=s,this._state=0;let l=i.initialStylesByElement.get(e);l||i.initialStylesByElement.set(e,l=new Map),this._initialStyles=l}start(){this._state<1&&(this._startStyles&&Lf(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Lf(this._element,this._initialStyles),this._endStyles&&(Lf(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(t0(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(t0(this._element,this._endStyles),this._endStyles=null),Lf(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function dN(i){let t=null;return i.forEach((e,o)=>{(function nY(i){return"display"===i||"position"===i})(o)&&(t=t||new Map,t.set(o,e))}),t}class HB{constructor(t,e,o,s){this.element=t,this.keyframes=e,this.options=o,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=o.duration,this._delay=o.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(o=>{e.push(Object.fromEntries(o))}),e}_triggerWebAnimation(t,e,o){return t.animate(this._convertKeyframesToObject(e),o)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((o,s)=>{"offset"!==s&&t.set(s,this._finished?o:EB(this.element,s))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}class iY{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return fB(t,e)}getParentElement(t){return $P(t)}query(t,e,o){return gB(t,e,o)}computeStyle(t,e,o){return window.getComputedStyle(t)[e]}animate(t,e,o,s,l,u=[]){const _={duration:o,delay:s,fill:0==s?"both":"forwards"};l&&(_.easing=l);const w=new Map,T=u.filter(F=>F instanceof HB);(function aK(i,t){return 0===i||0===t})(o,s)&&T.forEach(F=>{F.currentSnapshot.forEach((j,Q)=>w.set(Q,j))});let D=function iK(i){return i.length?i[0]instanceof Map?i:i.map(t=>vB(t)):[]}(e).map(F=>Ny(F));D=function lK(i,t,e){if(e.size&&t.length){let o=t[0],s=[];if(e.forEach((l,u)=>{o.has(u)||s.push(u),o.set(u,l)}),s.length)for(let l=1;l<t.length;l++){let u=t[l];s.forEach(g=>u.set(g,EB(i,g)))}}return t}(t,D,w);const O=function eY(i,t){let e=null,o=null;return Array.isArray(t)&&t.length?(e=dN(t[0]),t.length>1&&(o=dN(t[t.length-1]))):t instanceof Map&&(e=dN(t)),e||o?new tY(i,e,o):null}(t,D);return new HB(t,D,_,O)}}let rY=(()=>{class i extends nB{constructor(e,o){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(o.body,{id:"0",encapsulation:a.ifc.None,styles:[],data:{animation:[]}})}build(e){const o=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(e)?iB(e):e;return BB(this._renderer,null,o,"register",[s]),new oY(o,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(a.FYo),a.LFG(ve))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();class oY extends class gW{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new sY(this._id,t,e||{},this._renderer)}}class sY{constructor(t,e,o,s){this.id=t,this.element=e,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",o)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return BB(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function BB(i,t,e,o,s){return i.setProperty(t,`@@${e}:${o}`,s)}const UB="@.disabled";let aY=(()=>{class i{constructor(e,o,s){this.delegate=e,this.engine=o,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),o.onRemovalComplete=(l,u)=>{const g=u?.parentNode(l);g&&u.removeChild(g,l)}}createRenderer(e,o){const l=this.delegate.createRenderer(e,o);if(!(e&&o&&o.data&&o.data.animation)){let T=this._rendererCache.get(l);return T||(T=new jB("",l,this.engine),this._rendererCache.set(l,T)),T}const u=o.id,g=o.id+"-"+this._currentId;this._currentId++,this.engine.register(g,e);const _=T=>{Array.isArray(T)?T.forEach(_):this.engine.registerTrigger(u,g,e,T.name,T)};return o.data.animation.forEach(_),new lY(this,g,l,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,o,s){e>=0&&e<this._microtaskId?this._zone.run(()=>o(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(l=>{const[u,g]=l;u(g)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([o,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(a.FYo),a.LFG(EA),a.LFG(a.R0b))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();class jB{constructor(t,e,o){this.namespaceId=t,this.delegate=e,this.engine=o,this.destroyNode=this.delegate.destroyNode?s=>e.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,o,s=!0){this.delegate.insertBefore(t,e,o),this.engine.onInsert(this.namespaceId,e,t,s)}removeChild(t,e,o){this.engine.onRemove(this.namespaceId,e,this.delegate,o)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,o,s){this.delegate.setAttribute(t,e,o,s)}removeAttribute(t,e,o){this.delegate.removeAttribute(t,e,o)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,o,s){this.delegate.setStyle(t,e,o,s)}removeStyle(t,e,o){this.delegate.removeStyle(t,e,o)}setProperty(t,e,o){"@"==e.charAt(0)&&e==UB?this.disableAnimations(t,!!o):this.delegate.setProperty(t,e,o)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,o){return this.delegate.listen(t,e,o)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class lY extends jB{constructor(t,e,o,s){super(e,o,s),this.factory=t,this.namespaceId=e}setProperty(t,e,o){"@"==e.charAt(0)?"."==e.charAt(1)&&e==UB?this.disableAnimations(t,o=void 0===o||!!o):this.engine.process(this.namespaceId,t,e.slice(1),o):this.delegate.setProperty(t,e,o)}listen(t,e,o){if("@"==e.charAt(0)){const s=function cY(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let l=e.slice(1),u="";return"@"!=l.charAt(0)&&([l,u]=function uY(i){const t=i.indexOf(".");return[i.substring(0,t),i.slice(t+1)]}(l)),this.engine.listen(this.namespaceId,s,l,u,g=>{this.factory.scheduleListenerCallback(g._data||-1,o,g)})}return this.delegate.listen(t,e,o)}}let dY=(()=>{class i extends EA{constructor(e,o,s,l){super(e.body,o,s)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(ve),a.LFG(WP),a.LFG(oN),a.LFG(a.z2F))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();const zB=[{provide:nB,useClass:rY},{provide:oN,useFactory:function hY(){return new kK}},{provide:EA,useClass:dY},{provide:a.FYo,useFactory:function pY(i,t,e){return new aY(i,t,e)},deps:[Fd,EA,a.R0b]}],hN=[{provide:WP,useFactory:()=>new iY},{provide:a.QbO,useValue:"BrowserAnimations"},...zB],pN=[{provide:WP,useClass:mB},{provide:a.QbO,useValue:"NoopAnimations"},...zB];let fY=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?pN:hN}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:hN,imports:[Io]}),i})(),gY=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:pN,imports:[Io]}),i})();var Ds=q(2011),Fy=q(6451),SA=q(5363),mY=q(6063);class _Y extends Ft.x{constructor(t=1/0,e=1/0,o=mY.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=o,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:o,_infiniteTimeWindow:s,_timestampProvider:l,_windowTime:u}=this;e||(o.push(t),!s&&o.push(l.now()+u)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:o,_buffer:s}=this,l=s.slice();for(let u=0;u<l.length&&!t.closed;u+=o?1:2)t.next(l[u]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:o,_infiniteTimeWindow:s}=this,l=(s?1:2)*t;if(t<1/0&&l<o.length&&o.splice(0,o.length-l),!s){const u=e.now();let g=0;for(let _=1;_<o.length&&o[_]<=u;_+=2)g=_;g&&o.splice(0,g+1)}}}var fN=q(3099);function GB(i,t,e){let o,s=!1;return i&&"object"==typeof i?({bufferSize:o=1/0,windowTime:t=1/0,refCount:s=!1,scheduler:e}=i):o=i??1/0,(0,fN.B)({connector:()=>new _Y(o,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function qB(i,t){return(0,_d.m)(t)?Dr(()=>i,t):Dr(()=>i)}var gN=q(9468),DA=q(127);const mN=new a.OlP("angularfire2.auth.use-emulator"),_N=new a.OlP("angularfire2.auth.settings"),yN=new a.OlP("angularfire2.auth.tenant-id"),vN=new a.OlP("angularfire2.auth.langugage-code"),bN=new a.OlP("angularfire2.auth.use-device-language"),wN=new a.OlP("angularfire.auth.persistence"),CN=(i,t,e,o,s,l,u,g)=>(0,Ds.cc)(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{const _=t.runOutsideAngular(()=>i.auth());if(e&&_.useEmulator(...e),o&&(_.tenantId=o),_.languageCode=s,l&&_.useDeviceLanguage(),u)for(const[w,T]of Object.entries(u))_.settings[w]=T;return g&&_.setPersistence(g),_},[e,o,s,l,u,g]);let Qx=(()=>{class i{constructor(e,o,s,l,u,g,_,w,T,D,O,F){const j=new Ft.x,Q=fn(void 0).pipe((0,SA.Q)(u.outsideAngular),Dr(()=>l.runOutsideAngular(()=>Promise.resolve().then(q.bind(q,5881)))),(0,pt.U)(()=>(0,Ds.on)(e,l,o)),(0,pt.U)(ae=>CN(ae,l,g,w,T,D,_,O)),GB({bufferSize:1,refCount:!1}));if(vc(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=fn(null);else{Q.pipe(Pm()).subscribe();const Oe=Q.pipe(Dr(dt=>dt.getRedirectResult().then(zt=>zt,()=>null)),St.iC,GB({bufferSize:1,refCount:!1})),We=Q.pipe(Dr(dt=>new Ie.y(zt=>({unsubscribe:l.runOutsideAngular(()=>dt.onAuthStateChanged(Wt=>zt.next(Wt),Wt=>zt.error(Wt),()=>zt.complete()))})))),ft=Q.pipe(Dr(dt=>new Ie.y(zt=>({unsubscribe:l.runOutsideAngular(()=>dt.onIdTokenChanged(Wt=>zt.next(Wt),Wt=>zt.error(Wt),()=>zt.complete()))}))));this.authState=Oe.pipe(qB(We),(0,gN.R)(u.outsideAngular),(0,SA.Q)(u.insideAngular)),this.user=Oe.pipe(qB(ft),(0,gN.R)(u.outsideAngular),(0,SA.Q)(u.insideAngular)),this.idToken=this.user.pipe(Dr(dt=>dt?(0,ur.D)(dt.getIdToken()):fn(null))),this.idTokenResult=this.user.pipe(Dr(dt=>dt?(0,ur.D)(dt.getIdTokenResult()):fn(null))),this.credential=(0,Fy.T)(Oe,j,this.authState.pipe(Yr(dt=>!dt))).pipe((0,pt.U)(dt=>dt?.user?dt:null),(0,gN.R)(u.outsideAngular),(0,SA.Q)(u.insideAngular))}return(0,Ds.pX)(this,Q,l,{spy:{apply:(ae,Oe,We)=>{(ae.startsWith("signIn")||ae.startsWith("createUser"))&&We.then(ft=>j.next(ft))}}})}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Ds.Dh),a.LFG(Ds.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(St.HU),a.LFG(mN,8),a.LFG(_N,8),a.LFG(yN,8),a.LFG(vN,8),a.LFG(bN,8),a.LFG(wN,8),a.LFG(_a,8))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),vY=(()=>{class i{constructor(){DA.Z.registerVersion("angularfire",St.q4.full,"auth-compat")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[Qx]}),i})();var T1=q(4986);function TN(i,t=T1.z){return(0,Zo.e)((e,o)=>{let s=null,l=null,u=null;const g=()=>{if(s){s.unsubscribe(),s=null;const w=l;l=null,o.next(w)}};function _(){const w=u+i,T=t.now();if(T<w)return s=this.schedule(void 0,w-T),void o.add(s);g()}e.subscribe((0,Sr.x)(o,w=>{l=w,u=t.now(),s||(s=t.schedule(_,i),o.add(s))},()=>{g(),o.complete()},void 0,()=>{l=s=null}))})}var EN=q(3942);const ZB="firebasestorage.googleapis.com",$B="storageBucket";class Ko extends re.ZR{constructor(t,e){super(xN(t),`Firebase Storage: ${e} (${xN(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ko.prototype)}_codeEquals(t){return xN(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function xN(i){return"storage/"+i}function SN(){return new Ko("unknown","An unknown error occurred, please check the error payload for server response.")}function WB(){return new Ko("canceled","User canceled the upload/download.")}function KB(){return new Ko("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function E1(i){return new Ko("invalid-argument",i)}function YB(){return new Ko("app-deleted","The Firebase app was deleted.")}function JB(i){return new Ko("invalid-root-operation","The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xx(i,t){return new Ko("invalid-format","String does not match format '"+i+"': "+t)}function eS(i){throw new Ko("internal-error","Internal error: "+i)}class Ja{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let o;try{o=Ja.makeFromUrl(t,e)}catch{return new Ja(t,"")}if(""===o.path)return o;throw function MY(i){return new Ko("invalid-default-bucket","Invalid default bucket '"+i+"'.")}(t)}static makeFromUrl(t,e){let o=null;const s="([A-Za-z0-9.\\-_]+)",g=new RegExp("^gs://"+s+"(/(.*))?$","i");function w(dt){dt.path_=decodeURIComponent(dt.path)}const D=e.replace(/[.]/g,"\\."),ft=[{regex:g,indices:{bucket:1,path:3},postModify:function l(dt){"/"===dt.path.charAt(dt.path.length-1)&&(dt.path_=dt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${e===ZB?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let dt=0;dt<ft.length;dt++){const zt=ft[dt],Wt=zt.regex.exec(t);if(Wt){let Ln=Wt[zt.indices.path];Ln||(Ln=""),o=new Ja(Wt[zt.indices.bucket],Ln),zt.postModify(o);break}}if(null==o)throw function IY(i){return new Ko("invalid-url","Invalid URL '"+i+"'.")}(t);return o}}class RY{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function IA(i){return"string"==typeof i||i instanceof String}function QB(i){return DN()&&i instanceof Blob}function DN(){return typeof Blob<"u"}function IN(i,t,e,o){if(o<t)throw E1(`Invalid value for '${i}'. Expected ${t} or greater.`);if(o>e)throw E1(`Invalid value for '${i}'. Expected ${e} or less.`)}function Bm(i,t,e){let o=t;return null==e&&(o=`https://${t}`),`${e}://${o}/v0${i}`}function XB(i){const t=encodeURIComponent;let e="?";for(const o in i)i.hasOwnProperty(o)&&(e=e+(t(o)+"=")+t(i[o])+"&");return e=e.slice(0,-1),e}var Ly=(()=>(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"}(Ly||(Ly={})),Ly))();class HY{constructor(t,e,o,s,l,u,g,_,w,T,D){this.url_=t,this.method_=e,this.headers_=o,this.body_=s,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=g,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=T,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,F)=>{this.resolve_=O,this.reject_=F,this.start_()})}start_(){const e=(o,s)=>{const l=this.resolve_,u=this.reject_,g=s.connection;if(s.wasSuccessCode)try{const _=this.callback_(g,g.getResponse());!function FY(i){return void 0!==i}(_)?l():l(_)}catch(_){u(_)}else if(null!==g){const _=SN();_.serverResponse=g.getErrorText(),u(this.errorCallback_?this.errorCallback_(g,_):_)}else u(s.canceled?this.appDelete_?YB():WB():function DY(){return new Ko("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?e(0,new MA(!1,null,!0)):this.backoffId_=function PY(i,t,e){let o=1,s=null,l=null,u=!1,g=0;function _(){return 2===g}let w=!1;function T(...ae){w||(w=!0,t.apply(null,ae))}function D(ae){s=setTimeout(()=>{s=null,i(F,_())},ae)}function O(){l&&clearTimeout(l)}function F(ae,...Oe){if(w)return void O();if(ae)return O(),void T.call(null,ae,...Oe);if(_()||u)return O(),void T.call(null,ae,...Oe);let ft;o<64&&(o*=2),1===g?(g=2,ft=0):ft=1e3*(o+Math.random()),D(ft)}let j=!1;function Q(ae){j||(j=!0,O(),!w&&(null!==s?(ae||(g=2),clearTimeout(s),D(0)):ae||(g=1)))}return D(0),l=setTimeout(()=>{u=!0,Q(!0)},e),Q}((o,s)=>{if(s)return void o(!1,new MA(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const u=g=>{null!==this.progressCallback_&&this.progressCallback_(g.loaded,g.lengthComputable?g.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const g=l.getErrorCode()===Ly.NO_ERROR,_=l.getStatus();if(!g||this.isRetryStatusCode_(_)){const T=l.getErrorCode()===Ly.ABORT;return void o(!1,new MA(!1,null,T))}const w=-1!==this.successCodes_.indexOf(_);o(!0,new MA(w,l))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function NY(i){i(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,s=-1!==[408,429].indexOf(t),l=-1!==this.additionalRetryCodes_.indexOf(t);return e||s||l}}class MA{constructor(t,e,o){this.wasSuccessCode=t,this.connection=e,this.canceled=!!o}}function ZY(...i){const t=function qY(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let o=0;o<i.length;o++)e.append(i[o]);return e.getBlob()}if(DN())return new Blob(i);throw new Ko("unsupported-environment","This browser doesn't seem to support creating Blobs")}const cu={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class MN{constructor(t,e){this.data=t,this.contentType=e||null}}function AN(i,t){switch(i){case cu.RAW:return new MN(eU(t));case cu.BASE64:case cu.BASE64URL:return new MN(tU(i,t));case cu.DATA_URL:return new MN(function YY(i){const t=new nU(i);return t.base64?tU(cu.BASE64,t.rest):function KY(i){let t;try{t=decodeURIComponent(i)}catch{throw Xx(cu.DATA_URL,"Malformed data URL.")}return eU(t)}(t.rest)}(t),function JY(i){return new nU(i).contentType}(t))}throw SN()}function eU(i){const t=[];for(let e=0;e<i.length;e++){let o=i.charCodeAt(e);o<=127?t.push(o):o<=2047?t.push(192|o>>6,128|63&o):55296==(64512&o)?e<i.length-1&&56320==(64512&i.charCodeAt(e+1))?(o=65536|(1023&o)<<10|1023&i.charCodeAt(++e),t.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o)):t.push(239,191,189):56320==(64512&o)?t.push(239,191,189):t.push(224|o>>12,128|o>>6&63,128|63&o)}return new Uint8Array(t)}function tU(i,t){switch(i){case cu.BASE64:{const s=-1!==t.indexOf("-"),l=-1!==t.indexOf("_");if(s||l)throw Xx(i,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case cu.BASE64URL:{const s=-1!==t.indexOf("+"),l=-1!==t.indexOf("/");if(s||l)throw Xx(i,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function WY(i){return atob(i)}(t)}catch{throw Xx(i,"Invalid character found")}const o=new Uint8Array(e.length);for(let s=0;s<e.length;s++)o[s]=e.charCodeAt(s);return o}class nU{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw Xx(cu.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const o=e[1]||null;null!=o&&(this.base64=function QY(i,t){return i.length>=t.length&&i.substring(i.length-t.length)===t}(o,";base64"),this.contentType=this.base64?o.substring(0,o.length-7):o),this.rest=t.substring(t.indexOf(",")+1)}}class Vf{constructor(t,e){let o=0,s="";QB(t)?(this.data_=t,o=t.size,s=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),o=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),o=t.length),this.size_=o,this.type_=s}size(){return this.size_}type(){return this.type_}slice(t,e){if(QB(this.data_)){const s=function $Y(i,t,e){return i.webkitSlice?i.webkitSlice(t,e):i.mozSlice?i.mozSlice(t,e):i.slice?i.slice(t,e):null}(this.data_,t,e);return null===s?null:new Vf(s)}{const o=new Uint8Array(this.data_.buffer,t,e-t);return new Vf(o,!0)}}static getBlob(...t){if(DN()){const e=t.map(o=>o instanceof Vf?o.data_:o);return new Vf(ZY.apply(null,e))}{const e=t.map(u=>IA(u)?AN(cu.RAW,u).data:u.data_);let o=0;e.forEach(u=>{o+=u.byteLength});const s=new Uint8Array(o);let l=0;return e.forEach(u=>{for(let g=0;g<u.length;g++)s[l++]=u[g]}),new Vf(s,!0)}}uploadData(){return this.data_}}function kN(i){let t;try{t=JSON.parse(i)}catch{return null}return function VY(i){return"object"==typeof i&&!Array.isArray(i)}(t)?t:null}function iU(i){const t=i.lastIndexOf("/",i.length-2);return-1===t?i:i.slice(t+1)}function t7(i,t){return t}class Il{constructor(t,e,o,s){this.server=t,this.local=e||t,this.writable=!!o,this.xform=s||t7}}let AA=null;function tS(){if(AA)return AA;const i=[];i.push(new Il("bucket")),i.push(new Il("generation")),i.push(new Il("metageneration")),i.push(new Il("name","fullPath",!0));const e=new Il("name");e.xform=function t(l,u){return function n7(i){return!IA(i)||i.length<2?i:iU(i)}(u)},i.push(e);const s=new Il("size");return s.xform=function o(l,u){return void 0!==u?Number(u):u},i.push(s),i.push(new Il("timeCreated")),i.push(new Il("updated")),i.push(new Il("md5Hash",null,!0)),i.push(new Il("cacheControl",null,!0)),i.push(new Il("contentDisposition",null,!0)),i.push(new Il("contentEncoding",null,!0)),i.push(new Il("contentLanguage",null,!0)),i.push(new Il("contentType",null,!0)),i.push(new Il("metadata","customMetadata",!0)),AA=i,AA}function rU(i,t,e){const o=kN(t);return null===o?null:function o7(i,t,e){const o={type:"file"},s=e.length;for(let l=0;l<s;l++){const u=e[l];o[u.local]=u.xform(o,t[u.server])}return function r7(i,t){Object.defineProperty(i,"ref",{get:function e(){const l=new Ja(i.bucket,i.fullPath);return t._makeStorageReference(l)}})}(o,i),o}(i,o,e)}function ON(i,t){const e={},o=t.length;for(let s=0;s<o;s++){const l=t[s];l.writable&&(e[l.server]=i[l.local])}return JSON.stringify(e)}const oU="prefixes";class Hf{constructor(t,e,o,s){this.url=t,this.method=e,this.handler=o,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Bf(i){if(!i)throw SN()}function kA(i,t){return function e(o,s){const l=rU(i,s,t);return Bf(null!==l),l}}function x1(i){return function t(e,o){let s;return s=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function xY(){return new Ko("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function EY(){return new Ko("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function TY(i){return new Ko("quota-exceeded","Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(i.bucket):403===e.getStatus()?function SY(i){return new Ko("unauthorized","User does not have permission to access '"+i+"'.")}(i.path):o,s.serverResponse=o.serverResponse,s}}function nS(i){const t=x1(i);return function e(o,s){let l=t(o,s);return 404===o.getStatus()&&(l=function CY(i){return new Ko("object-not-found","Object '"+i+"' does not exist.")}(i.path)),l.serverResponse=s.serverResponse,l}}function aU(i,t,e){const s=Bm(t.fullServerUrl(),i.host,i._protocol),u=i.maxOperationRetryTime,g=new Hf(s,"GET",kA(i,e),u);return g.errorHandler=nS(t),g}function d7(i,t,e,o,s){const l={};l.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(l.delimiter=e),o&&(l.pageToken=o),s&&(l.maxResults=s);const g=Bm(t.bucketOnlyServerUrl(),i.host,i._protocol),w=i.maxOperationRetryTime,T=new Hf(g,"GET",function c7(i,t){return function e(o,s){const l=function l7(i,t,e){const o=kN(e);return null===o?null:function a7(i,t,e){const o={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[oU])for(const s of e[oU]){const l=s.replace(/\/$/,""),u=i._makeStorageReference(new Ja(t,l));o.prefixes.push(u)}if(e.items)for(const s of e.items){const l=i._makeStorageReference(new Ja(t,s.name));o.items.push(l)}return o}(i,t,o)}(i,t,s);return Bf(null!==l),l}}(i,t.bucket),w);return T.urlParams=l,T.errorHandler=x1(t),T}function cU(i,t,e){const o=Object.assign({},e);return o.fullPath=i.path,o.size=t.size(),o.contentType||(o.contentType=function g7(i,t){return i&&i.contentType||t&&t.type()||"application/octet-stream"}(null,t)),o}class OA{constructor(t,e,o,s){this.current=t,this.total=e,this.finalized=!!o,this.metadata=s||null}}function RN(i,t){let e=null;try{e=i.getResponseHeader("X-Goog-Upload-Status")}catch{Bf(!1)}return Bf(!!e&&-1!==(t||["active"]).indexOf(e)),e}const v7={STATE_CHANGED:"state_changed"},Ml={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function PN(i){switch(i){case"running":case"pausing":case"canceling":return Ml.RUNNING;case"paused":return Ml.PAUSED;case"success":return Ml.SUCCESS;case"canceled":return Ml.CANCELED;default:return Ml.ERROR}}class b7{constructor(t,e,o){if(function LY(i){return"function"==typeof i}(t)||null!=e||null!=o)this.next=t,this.error=e??void 0,this.complete=o??void 0;else{const l=t;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function S1(i){return(...t)=>{Promise.resolve().then(()=>i(...t))}}class C7 extends class w7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ly.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ly.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ly.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,o,s){if(this.sent_)throw eS("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==s)for(const l in s)s.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,s[l].toString());return void 0!==o?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw eS("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw eS("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw eS("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw eS("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function zh(){return new C7}class pU{constructor(t,e,o=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=o,this._mappings=tS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=s,this._transition("error"))},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this._promise=new Promise((s,l)=>{this._resolve=s,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,o])=>{switch(this._state){case"running":t(e,o);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const o=function m7(i,t,e,o,s){const l=t.bucketOnlyServerUrl(),u=cU(t,o,s),g={name:u.fullPath},_=Bm(l,i.host,i._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},D=ON(u,e),j=new Hf(_,"POST",function F(Q){let ae;RN(Q);try{ae=Q.getResponseHeader("X-Goog-Upload-URL")}catch{Bf(!1)}return Bf(IA(ae)),ae},i.maxUploadRetryTime);return j.urlParams=g,j.headers=T,j.body=D,j.errorHandler=x1(t),j}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(o,zh,t,e);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,o)=>{const s=function _7(i,t,e,o){const _=new Hf(e,"POST",function l(w){const T=RN(w,["active","final"]);let D=null;try{D=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Bf(!1)}D||Bf(!1);const O=Number(D);return Bf(!isNaN(O)),new OA(O,o.size(),"final"===T)},i.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=x1(t),_}(this._ref.storage,this._ref._location,t,this._blob),l=this._ref.storage._makeRequest(s,zh,e,o);this._request=l,l.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new OA(this._transferred,this._blob.size()),o=this._uploadUrl;this._resolveToken((s,l)=>{let u;try{u=function y7(i,t,e,o,s,l,u,g){const _=new OA(0,0);if(u?(_.current=u.current,_.total=u.total):(_.current=0,_.total=o.size()),o.size()!==_.total)throw function kY(){return new Ko("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let T=w;s>0&&(T=Math.min(T,s));const D=_.current,j={"X-Goog-Upload-Command":T===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},Q=o.slice(D,D+T);if(null===Q)throw KB();const ft=new Hf(e,"POST",function ae(dt,zt){const Wt=RN(dt,["active","final"]),Cn=_.current+T,Ln=o.size();let gi;return gi="final"===Wt?kA(t,l)(dt,zt):null,new OA(Cn,Ln,"final"===Wt,gi)},t.maxUploadRetryTime);return ft.headers=j,ft.body=Q.uploadData(),ft.progressCallback=g||null,ft.errorHandler=x1(i),ft}(this._ref._location,this._ref.storage,o,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const g=this._ref.storage._makeRequest(u,zh,s,l);this._request=g,g.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const o=aU(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(o,zh,t,e);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const o=function uU(i,t,e,o,s){const l=t.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},_=function g(){let ft="";for(let dt=0;dt<2;dt++)ft+=Math.random().toString().slice(2);return ft}();u["Content-Type"]="multipart/related; boundary="+_;const w=cU(t,o,s),T=ON(w,e),F=Vf.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",o,"\r\n--"+_+"--");if(null===F)throw KB();const j={name:w.fullPath},Q=Bm(l,i.host,i._protocol),Oe=i.maxUploadRetryTime,We=new Hf(Q,"POST",kA(i,e),Oe);return We.urlParams=j,We.headers=u,We.body=F.uploadData(),We.errorHandler=x1(t),We}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(o,zh,t,e);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=WB(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=PN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,o,s){const l=new b7(e||void 0,o||void 0,s||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(PN(this._state)){case Ml.SUCCESS:S1(this._resolve.bind(null,this.snapshot))();break;case Ml.CANCELED:case Ml.ERROR:S1(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(PN(this._state)){case Ml.RUNNING:case Ml.PAUSED:t.next&&S1(t.next.bind(t,this.snapshot))();break;case Ml.SUCCESS:t.complete&&S1(t.complete.bind(t))();break;default:t.error&&S1(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class r0{constructor(t,e){this._service=t,this._location=e instanceof Ja?e:Ja.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new r0(t,e)}get root(){const t=new Ja(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return iU(this._location.path)}get storage(){return this._service}get parent(){const t=function XY(i){if(0===i.length)return null;const t=i.lastIndexOf("/");return-1===t?"":i.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Ja(this._location.bucket,t);return new r0(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw JB(t)}}function gU(i,t,e){return NN.apply(this,arguments)}function NN(){return NN=(0,rt.Z)(function*(i,t,e){const s=yield mU(i,{pageToken:e});t.prefixes.push(...s.prefixes),t.items.push(...s.items),null!=s.nextPageToken&&(yield gU(i,t,s.nextPageToken))}),NN.apply(this,arguments)}function mU(i,t){null!=t&&"number"==typeof t.maxResults&&IN("options.maxResults",1,1e3,t.maxResults);const e=t||{},o=d7(i.storage,i._location,"/",e.pageToken,e.maxResults);return i.storage.makeRequestWithTokens(o,zh)}function P7(i){i._throwIfRoot("getDownloadURL");const t=function h7(i,t,e){const s=Bm(t.fullServerUrl(),i.host,i._protocol),u=i.maxOperationRetryTime,g=new Hf(s,"GET",function u7(i,t){return function e(o,s){const l=rU(i,s,t);return Bf(null!==l),function s7(i,t,e,o){const s=kN(t);if(null===s||!IA(s.downloadTokens))return null;const l=s.downloadTokens;if(0===l.length)return null;const u=encodeURIComponent;return l.split(",").map(w=>{const D=i.fullPath;return Bm("/b/"+u(i.bucket)+"/o/"+u(D),e,o)+XB({alt:"media",token:w})})[0]}(l,s,i.host,i._protocol)}}(i,e),u);return g.errorHandler=nS(t),g}(i.storage,i._location,tS());return i.storage.makeRequestWithTokens(t,zh).then(e=>{if(null===e)throw function OY(){return new Ko("no-download-url","The given file does not have any download URLs.")}();return e})}function _U(i,t){const e=function e7(i,t){const e=t.split("/").filter(o=>o.length>0).join("/");return 0===i.length?e:i+"/"+e}(i._location.path,t),o=new Ja(i._location.bucket,e);return new r0(i.storage,o)}function yU(i,t){if(i instanceof FN){const e=i;if(null==e._bucket)throw function AY(){return new Ko("no-default-bucket","No default bucket found. Did you set the '"+$B+"' property when initializing the app?")}();const o=new r0(e,e._bucket);return null!=t?yU(o,t):o}return void 0!==t?_U(i,t):i}function V7(i,t){if(t&&function F7(i){return/^[A-Za-z]+:\/\//.test(i)}(t)){if(i instanceof FN)return function L7(i,t){return new r0(i,t)}(i,t);throw E1("To use ref(service, url), the first argument must be a Storage instance.")}return yU(i,t)}function vU(i,t){const e=t?.[$B];return null==e?null:Ja.makeFromBucketSpec(e,i)}class FN{constructor(t,e,o,s,l){this.app=t,this._authProvider=e,this._appCheckProvider=o,this._url=s,this._firebaseVersion=l,this._bucket=null,this._host=ZB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?Ja.makeFromBucketSpec(s,this._host):vU(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Ja.makeFromBucketSpec(this._url,t):vU(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){IN("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){IN("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,rt.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const o=yield e.getToken();if(null!==o)return o.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,rt.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new r0(this,t)}_makeRequest(t,e,o,s){if(this._deleted)return new RY(YB());{const l=function GY(i,t,e,o,s,l){const u=XB(i.urlParams),g=i.url+u,_=Object.assign({},i.headers);return function jY(i,t){t&&(i["X-Firebase-GMPID"]=t)}(_,t),function BY(i,t){null!==t&&t.length>0&&(i.Authorization="Firebase "+t)}(_,e),function UY(i,t){i["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(_,l),function zY(i,t){null!==t&&(i["X-Firebase-AppCheck"]=t)}(_,o),new HY(g,i.method,_,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,s)}(t,this._appId,o,s,e,this._firebaseVersion);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(t,e){var o=this;return(0,rt.Z)(function*(){const[s,l]=yield Promise.all([o._getAuthToken(),o._getAppCheckToken()]);return o._makeRequest(t,e,s,l).getPromise()})()}}const bU="@firebase/storage",CU="storage";function TU(i,t){return V7(i=(0,re.m9)(i),t)}function W7(i=(0,oi.getApp)(),t){return i=(0,re.m9)(i),(0,oi._getProvider)(i,CU).getImmediate({identifier:t})}function Y7(i,{instanceIdentifier:t}){const e=i.getProvider("app").getImmediate(),o=i.getProvider("auth-internal"),s=i.getProvider("app-check-internal");return new FN(e,o,s,t,oi.SDK_VERSION)}!function J7(){(0,oi._registerComponent)(new po.wA(CU,Y7,"PUBLIC").setMultipleInstances(!0)),(0,oi.registerVersion)(bU,"0.9.9",""),(0,oi.registerVersion)(bU,"0.9.9","esm2017")}();class RA{constructor(t,e,o){this._delegate=t,this.task=e,this.ref=o}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class EU{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new RA(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(o=>{if(t)return t(new RA(o,this,this._ref))},e)}on(t,e,o,s){let l;return e&&(l="function"==typeof e?u=>e(new RA(u,this,this._ref)):{next:e.next?u=>e.next(new RA(u,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,l,o||void 0,s||void 0)}}class xU{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Um(t,this._service))}get items(){return this._delegate.items.map(t=>new Um(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Um{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function $7(i,t){return _U(i,t)}(this._delegate,t);return new Um(e,this.storage)}get root(){return new Um(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new Um(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new EU(function B7(i,t,e){return function M7(i,t,e){return i._throwIfRoot("uploadBytesResumable"),new pU(i,new Vf(t),e)}(i=(0,re.m9)(i),t,e)}(this._delegate,t,e),this)}putString(t,e=cu.RAW,o){this._throwIfRoot("putString");const s=AN(e,t),l=Object.assign({},o);return null==l.contentType&&null!=s.contentType&&(l.contentType=s.contentType),new EU(new pU(this._delegate,new Vf(s.data,!0),l),this)}listAll(){return function G7(i){return function k7(i){const t={prefixes:[],items:[]};return gU(i,t).then(()=>t)}(i=(0,re.m9)(i))}(this._delegate).then(t=>new xU(t,this.storage))}list(t){return function z7(i,t){return mU(i=(0,re.m9)(i),t)}(this._delegate,t||void 0).then(e=>new xU(e,this.storage))}getMetadata(){return function U7(i){return function O7(i){i._throwIfRoot("getMetadata");const t=aU(i.storage,i._location,tS());return i.storage.makeRequestWithTokens(t,zh)}(i=(0,re.m9)(i))}(this._delegate)}updateMetadata(t){return function j7(i,t){return function R7(i,t){i._throwIfRoot("updateMetadata");const e=function p7(i,t,e,o){const l=Bm(t.fullServerUrl(),i.host,i._protocol),g=ON(e,o),w=i.maxOperationRetryTime,T=new Hf(l,"PATCH",kA(i,o),w);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=g,T.errorHandler=nS(t),T}(i.storage,i._location,t,tS());return i.storage.makeRequestWithTokens(e,zh)}(i=(0,re.m9)(i),t)}(this._delegate,t)}getDownloadURL(){return function q7(i){return P7(i=(0,re.m9)(i))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Z7(i){return function N7(i){i._throwIfRoot("deleteObject");const t=function f7(i,t){const o=Bm(t.fullServerUrl(),i.host,i._protocol),g=new Hf(o,"DELETE",function u(_,w){},i.maxOperationRetryTime);return g.successCodes=[200,204],g.errorHandler=nS(t),g}(i.storage,i._location);return i.storage.makeRequestWithTokens(t,zh)}(i=(0,re.m9)(i))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw JB(t)}}class SU{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(DU(t))throw E1("ref() expected a child path but got a URL, use refFromURL instead.");return new Um(TU(this._delegate,t),this)}refFromURL(t){if(!DU(t))throw E1("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ja.makeFromUrl(t,this._delegate.host)}catch{throw E1("refFromUrl() expected a valid full URL but got an invalid one.")}return new Um(TU(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,o={}){!function K7(i,t,e,o={}){!function H7(i,t,e,o={}){i.host=`${t}:${e}`,i._protocol="http";const{mockUserToken:s}=o;s&&(i._overrideAuthToken="string"==typeof s?s:(0,re.Sg)(s,i.app.options.projectId))}(i,t,e,o)}(this._delegate,t,e,o)}}function DU(i){return/^[A-Za-z]+:\/\//.test(i)}function t9(i,{instanceIdentifier:t}){const e=i.getProvider("app-compat").getImmediate(),o=i.getProvider("storage").getImmediate({identifier:t});return new SU(e,o)}function IU(i){const t=function r9(i){return new Ie.y(t=>{const e=u=>t.next(u);e(i.snapshot);const l=i.on("state_changed",e);return i.then(u=>{e(u),t.complete()},u=>{e(i.snapshot),(u=>{t.error(u)})(u)}),function(){l()}}).pipe(TN(0))}(i);return{task:i,then:i.then.bind(i),catch:i.catch.bind(i),pause:i.pause.bind(i),cancel:i.cancel.bind(i),resume:i.resume.bind(i),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,pt.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function PA(i){return{getDownloadURL:()=>fn(void 0).pipe(St.fc,Dr(()=>i.getDownloadURL()),St.iC),getMetadata:()=>fn(void 0).pipe(St.fc,Dr(()=>i.getMetadata()),St.iC),delete:()=>(0,ur.D)(i.delete()),child:t=>PA(i.child(t)),updateMetadata:t=>(0,ur.D)(i.updateMetadata(t)),put:(t,e)=>IU(i.put(t,e)),putString:(t,e,o)=>IU(i.putString(t,e,o)),list:t=>(0,ur.D)(i.list(t)),listAll:()=>(0,ur.D)(i.listAll())}}!function n9(i){const t={TaskState:Ml,TaskEvent:v7,StringFormat:cu,Storage:SU,Reference:Um};i.INTERNAL.registerComponent(new po.wA("storage-compat",t9,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),i.registerVersion("@firebase/storage-compat","0.1.17")}(EN.Z);const o9=new a.OlP("angularfire2.storageBucket"),s9=new a.OlP("angularfire2.storage.maxUploadRetryTime"),a9=new a.OlP("angularfire2.storage.maxOperationRetryTime"),l9=new a.OlP("angularfire2.storage.use-emulator");let MU=(()=>{class i{constructor(e,o,s,l,u,g,_,w,T,D){const O=(0,Ds.on)(e,u,o);this.storage=(0,Ds.cc)(`${O.name}.storage.${s}`,"AngularFireStorage",O.name,()=>{const F=u.runOutsideAngular(()=>O.storage(s||void 0)),j=T;return j&&F.useEmulator(...j),_&&F.setMaxUploadRetryTime(_),w&&F.setMaxOperationRetryTime(w),F},[_,w])}ref(e){return PA(this.storage.ref(e))}refFromURL(e){return PA(this.storage.refFromURL(e))}upload(e,o,s){return PA(this.storage.ref(e)).put(o,s)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Ds.Dh),a.LFG(Ds.xv,8),a.LFG(o9,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(St.HU),a.LFG(s9,8),a.LFG(a9,8),a.LFG(l9,8),a.LFG(_a,8))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),c9=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({}),i})(),u9=(()=>{class i{constructor(){DA.Z.registerVersion("angularfire",St.q4.full,"gcs-compat")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[MU],imports:[c9]}),i})();function NA(){return(0,Zo.e)((i,t)=>{let e,o=!1;i.subscribe((0,Sr.x)(t,s=>{const l=e;e=s,o&&t.next([l,s]),o=!0}))})}function o0(i,t=l1.y){return i=i??d9,(0,Zo.e)((e,o)=>{let s,l=!0;e.subscribe((0,Sr.x)(o,u=>{const g=t(u);(l||!i(s,g))&&(l=!1,s=g,o.next(u))}))})}function d9(i,t){return i===t}function LN(i,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Mt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return t}function AU(){if(typeof Uint8Array>"u")throw new Mt("unimplemented","Uint8Arrays are not available in this environment.")}function kU(){if(!function CT(){return typeof atob<"u"}())throw new Mt("unimplemented","Blobs are unavailable in Firestore in this environment.")}q(5881);class iS{constructor(t){this._delegate=t}static fromBase64String(t){return kU(),new iS(su.fromBase64String(t))}static fromUint8Array(t){return AU(),new iS(su.fromUint8Array(t))}toBase64(){return kU(),this._delegate.toBase64()}toUint8Array(){return AU(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function VN(i){return function f9(i,t){if("object"!=typeof i||null===i)return!1;const e=i;for(const o of t)if(o in e&&"function"==typeof e[o])return!0;return!1}(i,["next","error","complete"])}class g9{enableIndexedDbPersistence(t,e){return function CR(i,t){ux(i=Hi(i,Wi));const e=qo(i),o=i._freezeSettings(),s=new ZI;return lx(e,s,new mR(s,o.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function TR(i){ux(i=Hi(i,Wi));const t=qo(i),e=i._freezeSettings(),o=new ZI;return lx(t,o,new YL(o,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function oV(i){if(i._initialized&&!i._terminated)throw new Mt(ot.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new no;return i._queue.enqueueAndForgetEvenWhileRestricted((0,rt.Z)(function*(){try{yield(e=(0,rt.Z)(function*(o){if(!Wa.V())return Promise.resolve();const s=o+"main";yield Wa.delete(s)}),function(o){return e.apply(this,arguments)})(hC(i._databaseId,i._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class OU{constructor(t,e,o){this._delegate=e,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},t instanceof E||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&ed("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,o={}){!function rx(i,t,e,o={}){var s;const l=(i=Hi(i,Nb))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==t&&ed("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},l),{host:`${t}:${e}`,ssl:!1})),o.mockUserToken){let u,g;if("string"==typeof o.mockUserToken)u=o.mockUserToken,g=zo.MOCK_USER;else{u=(0,re.Sg)(o.mockUserToken,null===(s=i._app)||void 0===s?void 0:s.options.projectId);const _=o.mockUserToken.sub||o.mockUserToken.user_id;if(!_)throw new Mt(ot.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new zo(_)}i._authCredentials=new cf(new ib(u,g))}}(this._delegate,t,e,o)}enableNetwork(){return function ER(i){return function XL(i){return i.asyncQueue.enqueue((0,rt.Z)(function*(){const t=yield yR(i),e=yield KI(i);return t.setNetworkEnabled(!0),function(o){const s=ln(o);return s.lu.delete(0),hy(s)}(e)}))}(qo(i=Hi(i,Wi)))}(this._delegate)}disableNetwork(){return function lM(i){return function eV(i){return i.asyncQueue.enqueue((0,rt.Z)(function*(){const t=yield yR(i),e=yield KI(i);return t.setNetworkEnabled(!1),(o=(0,rt.Z)(function*(s){const l=ln(s);l.lu.add(0),yield Cm(l),l._u.set("Offline")}),function(s){return o.apply(this,arguments)})(e);var o}))}(qo(i=Hi(i,Wi)))}(this._delegate)}enablePersistence(t){let e=!1,o=!1;return t&&(e=!!t.synchronizeTabs,o=!!t.experimentalForceOwningTab,eM("synchronizeTabs",e,"experimentalForceOwningTab",o)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function aM(i){return function(t){const e=new no;return t.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return function jE(i,t){return HI.apply(this,arguments)}(yield nx(t),e)})),e.promise}(qo(i=Hi(i,Wi)))}(this._delegate)}onSnapshotsInSync(t){return function x(i,t){return function nV(i,t){const e=new XE(t);return i.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return o=yield Uh(i),s=e,ln(o).Tu.add(s),void s.next();var o,s})),()=>{e.Tc(),i.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return o=yield Uh(i),s=e,void ln(o).Tu.delete(s);var o,s}))}}(qo(i=Hi(i,Wi)),fd(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Mt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new D1(this,KC(this._delegate,t))}catch(e){throw Al(e,"collection()","Firestore.collection()")}}doc(t){try{return new Td(this,Fb(this._delegate,t))}catch(e){throw Al(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new kl(this,function iM(i,t){if(i=Hi(i,Nb),Sl("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Mt(ot.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bs(i,null,(e=t,new Ka(xi.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw Al(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function U(i,t,e){i=Hi(i,Wi);const o=Object.assign(Object.assign({},FR),e);return function(s){if(s.maxAttempts<1)throw new Mt(ot.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function bR(i,t,e){const o=new no;return i.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){const s=yield(l=i,qC(l).then(u=>u.datastore));var l;new QL(i.asyncQueue,s,e,t,o).run()})),o.promise}(qo(i),s=>t(new H(i,s)),o)}(this._delegate,e=>t(new RU(this,e)))}batch(){return qo(this._delegate),new PU(new LR(this._delegate,t=>k(this._delegate,t)))}loadBundle(t){return function cx(i,t){const e=qo(i=Hi(i,Wi)),o=new oM;return function QI(i,t,e,o){const s=function(l,u){let g;return g="string"==typeof l?(new TextEncoder).encode(l):l,_=function(_,w){if(_ instanceof Uint8Array)return _R(_,w);if(_ instanceof ArrayBuffer)return _R(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new JL(_,u);var _}(e,wC(t));i.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){!function KL(i,t,e){const o=ln(i);var s;(s=(0,rt.Z)(function*(l,u,g){try{const _=yield u.getMetadata();if(yield function(O,F){const j=ln(O),Q=Ts(F.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",ae=>j.Ds.getBundleMetadata(ae,F.id)).then(ae=>!!ae&&ae.createTime.compareTo(Q)>=0)}(l.localStore,_))return yield u.close(),g._completeWith({taskState:"Success",documentsLoaded:(O=_).totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}),Promise.resolve(new Set);g._updateProgress(NI(_));const w=new PI(_,l.localStore,u.wt);let T=yield u.fc();for(;T;){const O=yield w.Nu(T);O&&g._updateProgress(O),T=yield u.fc()}const D=yield w.complete();return yield If(l,D.Mu,void 0),yield function(O,F){const j=ln(O);return j.persistence.runTransaction("Save bundle","readwrite",Q=>j.Ds.saveBundleMetadata(Q,F))}(l.localStore,_),g._completeWith(D.progress),Promise.resolve(D.Ou)}catch(_){return ed("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var O}),function(l,u,g){return s.apply(this,arguments)})(o,t,e).then(s=>{o.sharedClientState.notifyBundleLoaded(s)})}(yield nx(i),s,o)}))}(e,i._databaseId,t,o),o}(this._delegate,t)}namedQuery(t){return function cM(i,t){return function XI(i,t){return i.asyncQueue.enqueue((0,rt.Z)(function*(){return function(e,o){const s=ln(e);return s.persistence.runTransaction("Get named query","readonly",l=>s.Ds.getNamedQuery(l,o))}(yield tx(i),t)}))}(qo(i=Hi(i,Wi)),t).then(e=>e?new Bs(i,null,e.query):null)}(this._delegate,t).then(e=>e?new kl(this,e):null)}}class FA extends EM{constructor(t){super(),this.firestore=t}convertBytes(t){return new iS(new su(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Td.forKey(e,this.firestore,null)}}class RU{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new FA(t)}get(t){const e=a0(t);return this._delegate.get(e).then(o=>new rS(this._firestore,new Mf(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,e.converter)))}set(t,e,o){const s=a0(t);return o?(LN("Transaction.set",o),this._delegate.set(s,e,o)):this._delegate.set(s,e),this}update(t,e,o,...s){const l=a0(t);return 2===arguments.length?this._delegate.update(l,e):this._delegate.update(l,e,o,...s),this}delete(t){const e=a0(t);return this._delegate.delete(e),this}}class PU{constructor(t){this._delegate=t}set(t,e,o){const s=a0(t);return o?(LN("WriteBatch.set",o),this._delegate.set(s,e,o)):this._delegate.set(s,e),this}update(t,e,o,...s){const l=a0(t);return 2===arguments.length?this._delegate.update(l,e):this._delegate.update(l,e,o,...s),this}delete(t){const e=a0(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class s0{constructor(t,e,o){this._firestore=t,this._userDataWriter=e,this._delegate=o}fromFirestore(t,e){const o=new XC(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new oS(this._firestore,o),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const o=s0.INSTANCES;let s=o.get(t);s||(s=new WeakMap,o.set(t,s));let l=s.get(e);return l||(l=new s0(t,new FA(t),e),s.set(e,l)),l}}s0.INSTANCES=new WeakMap;class Td{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new FA(t)}static forPath(t,e,o){if(t.length%2!=0)throw new Mt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Td(e,new xr(e._delegate,o,new on(t)))}static forKey(t,e,o){return new Td(e,new xr(e._delegate,o,t))}get id(){return this._delegate.id}get parent(){return new D1(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new D1(this.firestore,KC(this._delegate,t))}catch(e){throw Al(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,re.m9)(t))instanceof xr&&ox(this._delegate,t)}set(t,e){e=LN("DocumentReference.set",e);try{return e?h(this._delegate,t,e):h(this._delegate,t)}catch(o){throw Al(o,"setDoc()","DocumentReference.set()")}}update(t,e,...o){try{return 1===arguments.length?f(this._delegate,t):f(this._delegate,t,e,...o)}catch(s){throw Al(s,"updateDoc()","DocumentReference.update()")}}delete(){return m(this._delegate)}onSnapshot(...t){const e=NU(t),o=FU(t,s=>new rS(this.firestore,new Mf(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return C(this._delegate,e,o)}get(t){let e;return e="cache"===t?.source?function dV(i){i=Hi(i,xr);const t=Hi(i.firestore,Wi),e=qo(t),o=new Sy(t);return function tV(i,t){const e=new no;return i.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return(o=(0,rt.Z)(function*(s,l,u){try{const g=yield function(_,w){const T=ln(_);return T.persistence.runTransaction("read document","readonly",D=>T.localDocuments.getDocument(D,w))}(s,l);g.isFoundDocument()?u.resolve(g):g.isNoDocument()?u.resolve(null):u.reject(new Mt(ot.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=Sf(g,`Failed to get document '${l} from cache`);u.reject(_)}}),function(s,l,u){return o.apply(this,arguments)})(yield tx(i),t,e);var o})),e.promise}(e,i._key).then(s=>new Mf(t,o,i._key,s,new md(null!==s&&s.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===t?.source?function hV(i){i=Hi(i,xr);const t=Hi(i.firestore,Wi);return YI(qo(t),i._key,{source:"server"}).then(e=>N(t,i,e))}(this._delegate):function VR(i){i=Hi(i,xr);const t=Hi(i.firestore,Wi);return YI(qo(t),i._key).then(e=>N(t,i,e))}(this._delegate),e.then(o=>new rS(this.firestore,new Mf(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(t){return new Td(this.firestore,this._delegate.withConverter(t?s0.getInstance(this.firestore,t):null))}}function Al(i,t,e){return i.message=i.message.replace(t,e),i}function NU(i){for(const t of i)if("object"==typeof t&&!VN(t))return t;return{}}function FU(i,t){var e,o;let s;return s=VN(i[0])?i[0]:VN(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:l=>{s.next&&s.next(t(l))},error:null===(e=s.error)||void 0===e?void 0:e.bind(s),complete:null===(o=s.complete)||void 0===o?void 0:o.bind(s)}}class rS{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Td(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return _x(this._delegate,t._delegate)}}class oS extends rS{data(t){const e=this._delegate.data(t);return function nb(i,t){i||mn()}(void 0!==e),e}}class kl{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new FA(t)}where(t,e,o){try{return new kl(this.firestore,Af(this._delegate,function mM(i,t,e){const o=t,s=xy("where",i);return new AR(s,o,e)}(t,e,o)))}catch(s){throw Al(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new kl(this.firestore,Af(this._delegate,function yM(i,t="asc"){const e=t,o=xy("orderBy",i);return new _M(o,e)}(t,e)))}catch(o){throw Al(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new kl(this.firestore,Af(this._delegate,function kR(i){return WC("limit",i),new vM("limit",i,"F")}(t)))}catch(e){throw Al(e,"limit()","Query.limit()")}}limitToLast(t){try{return new kl(this.firestore,Af(this._delegate,function bM(i){return WC("limitToLast",i),new vM("limitToLast",i,"L")}(t)))}catch(e){throw Al(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new kl(this.firestore,Af(this._delegate,function cV(...i){return new e1("startAt",i,!0)}(...t)))}catch(e){throw Al(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new kl(this.firestore,Af(this._delegate,function wM(...i){return new e1("startAfter",i,!1)}(...t)))}catch(e){throw Al(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new kl(this.firestore,Af(this._delegate,function OR(...i){return new t1("endBefore",i,!1)}(...t)))}catch(e){throw Al(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new kl(this.firestore,Af(this._delegate,function RR(...i){return new t1("endAt",i,!0)}(...t)))}catch(e){throw Al(e,"endAt()","Query.endAt()")}}isEqual(t){return rM(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function fV(i){i=Hi(i,Bs);const t=Hi(i.firestore,Wi),e=qo(t),o=new Sy(t);return function vR(i,t){const e=new no;return i.asyncQueue.enqueueAndForget((0,rt.Z)(function*(){return(o=(0,rt.Z)(function*(s,l,u){try{const g=yield xb(s,l,!0),_=new oa(l,g.ji),w=_.Ku(g.documents),T=_.applyChanges(w,!1);u.resolve(T.snapshot)}catch(g){const _=Sf(g,`Failed to execute query '${l} against cache`);u.reject(_)}}),function(s,l,u){return o.apply(this,arguments)})(yield tx(i),t,e);var o})),e.promise}(e,i._query).then(s=>new km(t,o,i,s))}(this._delegate):"server"===t?.source?function gV(i){i=Hi(i,Bs);const t=Hi(i.firestore,Wi),e=qo(t),o=new Sy(t);return JI(e,i._query,{source:"server"}).then(s=>new km(t,o,i,s))}(this._delegate):function pV(i){i=Hi(i,Bs);const t=Hi(i.firestore,Wi),e=qo(t),o=new Sy(t);return gM(i._query),JI(e,i._query).then(s=>new km(t,o,i,s))}(this._delegate),e.then(o=>new HN(this.firestore,new km(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...t){const e=NU(t),o=FU(t,s=>new HN(this.firestore,new km(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return C(this._delegate,e,o)}withConverter(t){return new kl(this.firestore,this._delegate.withConverter(t?s0.getInstance(this.firestore,t):null))}}class _9{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new oS(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class HN{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new kl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new oS(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new _9(this._firestore,e))}forEach(t,e){this._delegate.forEach(o=>{t.call(e,new oS(this._firestore,o))})}isEqual(t){return _x(this._delegate,t._delegate)}}class D1 extends kl{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Td(this.firestore,t):null}doc(t){try{return new Td(this.firestore,void 0===t?Fb(this._delegate):Fb(this._delegate,t))}catch(e){throw Al(e,"doc()","CollectionReference.doc()")}}add(t){return v(this._delegate,t).then(e=>new Td(this.firestore,e))}isEqual(t){return ox(this._delegate,t._delegate)}withConverter(t){return new D1(this.firestore,this._delegate.withConverter(t?s0.getInstance(this.firestore,t):null))}}function a0(i){return Hi(i,xr)}class BN{constructor(...t){this._delegate=new jh(...t)}static documentId(){return new BN(Pr.keyField().canonicalString())}isEqual(t){return(t=(0,re.m9)(t))instanceof jh&&this._delegate._internalPath.isEqual(t._internalPath)}}class l0{constructor(t){this._delegate=t}static serverTimestamp(){const t=function he(){return new fx("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new l0(t)}static delete(){const t=function ee(){return new Ty("deleteField")}();return t._methodName="FieldValue.delete",new l0(t)}static arrayUnion(...t){const e=function xe(...i){return new IR("arrayUnion",i)}(...t);return e._methodName="FieldValue.arrayUnion",new l0(e)}static arrayRemove(...t){const e=function Ze(...i){return new sV("arrayRemove",i)}(...t);return e._methodName="FieldValue.arrayRemove",new l0(e)}static increment(t){const e=function bt(i){return new aV("increment",i)}(t);return e._methodName="FieldValue.increment",new l0(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const y9={Firestore:OU,GeoPoint:Im,Timestamp:Tr,Blob:iS,Transaction:RU,WriteBatch:PU,DocumentReference:Td,DocumentSnapshot:rS,Query:kl,QueryDocumentSnapshot:oS,QuerySnapshot:HN,CollectionReference:D1,FieldPath:BN,FieldValue:l0,setLogLevel:function m9(i){!function Pw(i){tc.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};function LU(i,t){return function w9(i,t=T1.z){return new Ie.y(e=>{let o;return null!=t?t.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},e)}):o=i.onSnapshot({includeMetadataChanges:!0},e),()=>{o?.()}})}(i,t)}function UN(i,t){return LU(i,t).pipe((0,pt.U)(e=>({payload:e,type:"query"})))}function LA(i,t){return UN(i,t).pipe(Pf(void 0),NA(),(0,pt.U)(([e,o])=>{const s=o.payload.docChanges(),l=s.map(u=>({type:u.type,payload:u}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((u,g)=>{const _=s.find(T=>T.doc.ref.isEqual(u.ref)),w=e?.payload.docs.find(T=>T.ref.isEqual(u.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(u.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(u.metadata)||l.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:u}})}),l}))}function VU(i,t,e){return LA(i,e).pipe($b((o,s)=>function T9(i,t,e){return t.forEach(o=>{e.indexOf(o.type)>-1&&(i=function E9(i,t){switch(t.type){case"added":if(!i[t.newIndex]||!i[t.newIndex].doc.ref.isEqual(t.doc.ref))return jN(i,t.newIndex,0,t);break;case"modified":if(null==i[t.oldIndex]||i[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=i.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return jN(i,t.newIndex,1,t)}break;case"removed":if(i[t.oldIndex]&&i[t.oldIndex].doc.ref.isEqual(t.doc.ref))return jN(i,t.oldIndex,1)}return i}(i,o))}),i}(o,s.map(l=>l.payload),t),[]),o0(),(0,pt.U)(o=>o.map(s=>({type:s.type,payload:s}))))}function jN(i,t,e,...o){const s=i.slice();return s.splice(t,e,...o),s}function HU(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}!function b9(i){(function v9(i,t){i.INTERNAL.registerComponent(new po.wA("firestore-compat",e=>{const o=e.getProvider("app-compat").getImmediate(),s=e.getProvider("firestore").getImmediate();return t(o,s)},"PUBLIC").setServiceProps(Object.assign({},y9)))})(i,(t,e)=>new OU(t,e,new g9)),i.registerVersion("@firebase/firestore-compat","0.1.22")}(EN.Z);class BU{constructor(t,e,o){this.ref=t,this.query=e,this.afs=o}stateChanges(t){let e=LA(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,pt.U)(o=>o.filter(s=>t.indexOf(s.type)>-1)))),e.pipe(Pf(void 0),NA(),Yr(([o,s])=>s.length>0||!o),(0,pt.U)(([o,s])=>s),St.iC)}auditTrail(t){return this.stateChanges(t).pipe($b((e,o)=>[...e,...o],[]))}snapshotChanges(t){const e=HU(t);return VU(this.query,e,this.afs.schedulers.outsideAngular).pipe(St.iC)}valueChanges(t={}){return UN(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(e=>e.payload.docs.map(o=>t.idField?Object.assign(Object.assign({},o.data()),{[t.idField]:o.id}):o.data())),St.iC)}get(t){return(0,ur.D)(this.query.get(t)).pipe(St.iC)}add(t){return this.ref.add(t)}doc(t){return new UU(this.ref.doc(t),this.afs)}}class UU{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const o=this.ref.collection(t),{ref:s,query:l}=GU(o,e);return new BU(s,l,this.afs)}snapshotChanges(){return function C9(i,t){return LU(i,t).pipe(Pf(void 0),NA(),(0,pt.U)(([e,o])=>o.exists?e?.exists?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(St.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,ur.D)(this.ref.get(t)).pipe(St.iC)}}class x9{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?LA(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(e=>e.filter(o=>t.indexOf(o.type)>-1)),Yr(e=>e.length>0),St.iC):LA(this.query,this.afs.schedulers.outsideAngular).pipe(St.iC)}auditTrail(t){return this.stateChanges(t).pipe($b((e,o)=>[...e,...o],[]))}snapshotChanges(t){const e=HU(t);return VU(this.query,e,this.afs.schedulers.outsideAngular).pipe(St.iC)}valueChanges(t={}){return UN(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(o=>o.payload.docs.map(s=>t.idField?Object.assign({[t.idField]:s.id},s.data()):s.data())),St.iC)}get(t){return(0,ur.D)(this.query.get(t)).pipe(St.iC)}}const jU=new a.OlP("angularfire2.enableFirestorePersistence"),zU=new a.OlP("angularfire2.firestore.persistenceSettings"),S9=new a.OlP("angularfire2.firestore.settings"),D9=new a.OlP("angularfire2.firestore.use-emulator");function GU(i,t=(e=>e)){return{query:t(i),ref:i}}let qU=(()=>{class i{constructor(e,o,s,l,u,g,_,w,T,D,O,F,j,Q,ae,Oe,We){this.schedulers=_;const ft=(0,Ds.on)(e,g,o),dt=T;D&&CN(ft,g,O,j,Q,ae,F,Oe),[this.firestore,this.persistenceEnabled$]=(0,Ds.cc)(`${ft.name}.firestore`,"AngularFirestore",ft.name,()=>{const zt=g.runOutsideAngular(()=>ft.firestore());if(l&&zt.settings(l),dt&&zt.useEmulator(...dt),s&&!vc(u)){const Wt=()=>{try{return(0,ur.D)(zt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Cn){return typeof console<"u"&&console.warn(Cn),fn(!1)}};return[zt,g.runOutsideAngular(Wt)]}return[zt,fn(!1)]},[l,dt,s])}collection(e,o){let s;s="string"==typeof e?this.firestore.collection(e):e;const{ref:l,query:u}=GU(s,o),g=this.schedulers.ngZone.run(()=>l);return new BU(g,u,this)}collectionGroup(e,o){const s=o||(u=>u),l=this.firestore.collectionGroup(e);return new x9(s(l),this)}doc(e){let o;o="string"==typeof e?this.firestore.doc(e):e;const s=this.schedulers.ngZone.run(()=>o);return new UU(s,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Ds.Dh),a.LFG(Ds.xv,8),a.LFG(jU,8),a.LFG(S9,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(St.HU),a.LFG(zU,8),a.LFG(D9,8),a.LFG(Qx,8),a.LFG(mN,8),a.LFG(_N,8),a.LFG(yN,8),a.LFG(vN,8),a.LFG(bN,8),a.LFG(wN,8),a.LFG(_a,8))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),I9=(()=>{class i{constructor(){DA.Z.registerVersion("angularfire",St.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:i,providers:[{provide:jU,useValue:!0},{provide:zU,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[qU]}),i})();var VA=q(5032);function HA(...i){const t=(0,Dy.jO)(i);return(0,Zo.e)((e,o)=>{const s=i.length,l=new Array(s);let u=i.map(()=>!1),g=!1;for(let _=0;_<s;_++)(0,yd.Xf)(i[_]).subscribe((0,Sr.x)(o,w=>{l[_]=w,!g&&!u[_]&&(u[_]=!0,(g=u.every(l1.y))&&(u=null))},VA.Z));e.subscribe((0,Sr.x)(o,_=>{if(g){const w=[_,...l];o.next(t?t(...w):w)}}))})}const ZU="@firebase/database";let zN="";function WU(i){zN=i}class A9{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,re.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,re.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class k9{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,re.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const KU=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const t=window[i];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new A9(t)}}catch{}return new k9},c0=KU("localStorage"),GN=KU("sessionStorage"),I1=new Ys.Yd("@firebase/database"),YU=function(){let i=1;return function(){return i++}}(),JU=function(i){const t=(0,re.dS)(i),e=new re.gQ;e.update(t);const o=e.digest();return re.US.encodeByteArray(o)},sS=function(...i){let t="";for(let e=0;e<i.length;e++){const o=i[e];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?t+=sS.apply(null,o):t+="object"==typeof o?(0,re.Pz)(o):o,t+=" "}return t};let u0=null,QU=!0;const XU=function(i,t){(0,re.hu)(!t||!0===i||!1===i,"Can't turn on custom loggers persistently."),!0===i?(I1.logLevel=Ys.in.VERBOSE,u0=I1.log.bind(I1),t&&GN.set("logging_enabled",!0)):"function"==typeof i?u0=i:(u0=null,GN.remove("logging_enabled"))},la=function(...i){if(!0===QU&&(QU=!1,null===u0&&!0===GN.get("logging_enabled")&&XU(!0)),u0){const t=sS.apply(null,i);u0(t)}},aS=function(i){return function(...t){la(i,...t)}},qN=function(...i){const t="FIREBASE INTERNAL ERROR: "+sS(...i);I1.error(t)},Uf=function(...i){const t=`FIREBASE FATAL ERROR: ${sS(...i)}`;throw I1.error(t),new Error(t)},Qa=function(...i){const t="FIREBASE WARNING: "+sS(...i);I1.warn(t)},BA=function(i){return"number"==typeof i&&(i!=i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},jm="[MIN_NAME]",jf="[MAX_NAME]",d0=function(i,t){if(i===t)return 0;if(i===jm||t===jf)return-1;if(t===jm||i===jf)return 1;{const e=UA(i),o=UA(t);return null!==e?null!==o?e-o==0?i.length-t.length:e-o:-1:null!==o?1:i<t?-1:1}},P9=function(i,t){return i===t?0:i<t?-1:1},lS=function(i,t){if(t&&i in t)return t[i];throw new Error("Missing required key ("+i+") in object: "+(0,re.Pz)(t))},ZN=function(i){if("object"!=typeof i||null===i)return(0,re.Pz)(i);const t=[];for(const o in i)t.push(o);t.sort();let e="{";for(let o=0;o<t.length;o++)0!==o&&(e+=","),e+=(0,re.Pz)(t[o]),e+=":",e+=ZN(i[t[o]]);return e+="}",e},e6=function(i,t){const e=i.length;if(e<=t)return[i];const o=[];for(let s=0;s<e;s+=t)o.push(i.substring(s,s+t>e?e:s+t));return o};function ca(i,t){for(const e in i)i.hasOwnProperty(e)&&t(e,i[e])}const t6=function(i){(0,re.hu)(!BA(i),"Invalid JSON number");const o=1023;let s,l,u,g,_;0===i?(l=0,u=0,s=1/i==-1/0?1:0):(s=i<0,(i=Math.abs(i))>=Math.pow(2,1-o)?(g=Math.min(Math.floor(Math.log(i)/Math.LN2),o),l=g+o,u=Math.round(i*Math.pow(2,52-g)-Math.pow(2,52))):(l=0,u=Math.round(i/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(u%2?1:0),u=Math.floor(u/2);for(_=11;_;_-=1)w.push(l%2?1:0),l=Math.floor(l/2);w.push(s?1:0),w.reverse();const T=w.join("");let D="";for(_=0;_<64;_+=8){let O=parseInt(T.substr(_,8),2).toString(16);1===O.length&&(O="0"+O),D+=O}return D.toLowerCase()},V9=new RegExp("^-?(0*)\\d{1,10}$"),n6=-2147483648,$N=2147483647,UA=function(i){if(V9.test(i)){const t=Number(i);if(t>=n6&&t<=$N)return t}return null},M1=function(i){try{i()}catch(t){setTimeout(()=>{throw Qa("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},cS=function(i,t){const e=setTimeout(i,t);return"object"==typeof e&&e.unref&&e.unref(),e};class B9{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(o=>this.appCheck=o)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,o)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,o):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(o=>o.addTokenListener(t))}notifyForInvalidToken(){Qa(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class U9{constructor(t,e,o){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(la("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,o)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,o):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qa(t)}}let uS=(()=>{class i{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return i.OWNER="owner",i})();const l6=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,d6="websocket",h6="long_polling";class KN{constructor(t,e,o,s,l=!1,u="",g=!1){this.secure=e,this.namespace=o,this.webSocketOnly=s,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=g,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=c0.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&c0.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function p6(i,t,e){let o;if((0,re.hu)("string"==typeof t,"typeof type must == string"),(0,re.hu)("object"==typeof e,"typeof params must == object"),t===d6)o=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else{if(t!==h6)throw new Error("Unknown connection type: "+t);o=(i.secure?"https://":"http://")+i.internalHost+"/.lp?"}(function j9(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams})(i)&&(e.ns=i.namespace);const s=[];return ca(e,(l,u)=>{s.push(l+"="+u)}),o+s.join("&")}class z9{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,re.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,re.p$)(this.counters_)}}const YN={},JN={};function QN(i){const t=i.toString();return YN[t]||(YN[t]=new z9),YN[t]}class q9{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<o.length;++s)o[s]&&M1(()=>{this.onMessage_(o[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Vy{constructor(t,e,o,s,l,u,g){this.connId=t,this.repoInfo=e,this.applicationId=o,this.appCheckToken=s,this.authToken=l,this.transportSessionId=u,this.lastSessionId=g,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=aS(t),this.stats_=QN(e),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),p6(e,h6,_))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new q9(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(i){if((0,re.Yr)()||"complete"===document.readyState)i();else{let t=!1;const e=function(){document.body?t||(t=!0,i()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new XN((...l)=>{const[u,g,_,w,T]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=g,this.password=_;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);g?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(g,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[u,g]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,g)},()=>{this.onClosed_()},this.urlFn);const o={start:"t"};o.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(o.cb=this.scriptTagHolder.uniqueCallbackIdentifier),o.v="5",this.transportSessionId&&(o.s=this.transportSessionId),this.lastSessionId&&(o.ls=this.lastSessionId),this.applicationId&&(o.p=this.applicationId),this.appCheckToken&&(o.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&l6.test(location.hostname)&&(o.r="f");const s=this.urlFn(o);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Vy.forceAllow_=!0}static forceDisallow(){Vy.forceDisallow_=!0}static isAvailable(){return!((0,re.Yr)()||!Vy.forceAllow_&&(Vy.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,re.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const o=(0,re.h$)(e),s=e6(o,1840);for(let l=0;l<s.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[l]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,re.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const o={dframe:"t"};o.id=t,o.pw=e,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,re.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class XN{constructor(t,e,o,s){if(this.onDisconnect=o,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,re.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=YU(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=XN.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(g){la("frame writing exception"),g.stack&&la(g.stack),la(g)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||la("No IE domain setting required")}catch{const o=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),o="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+o.length<=1870;){const u=this.pendingSegs.shift();o=o+"&seg"+s+"="+u.seg+"&ts"+s+"="+u.ts+"&d"+s+"="+u.d,s++}return e+=o,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,o){this.pendingSegs.push({seg:t,ts:e,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const o=()=>{this.outstandingRequests.delete(e),this.newRequest_()},s=setTimeout(o,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(s),o()})}addTag(t,e){(0,re.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=t,o.onload=o.onreadystatechange=function(){const s=o.readyState;(!s||"loaded"===s||"complete"===s)&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),e())},o.onerror=()=>{la("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}let zA=null;typeof MozWebSocket<"u"?zA=MozWebSocket:typeof WebSocket<"u"&&(zA=WebSocket);let A1=(()=>{class i{constructor(e,o,s,l,u,g,_){this.connId=e,this.applicationId=s,this.appCheckToken=l,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=aS(this.connId),this.stats_=QN(o),this.connURL=i.connectionURL_(o,g,_,l,s),this.nodeAdmin=o.nodeAdmin}static connectionURL_(e,o,s,l,u){const g={v:"5"};return!(0,re.Yr)()&&typeof location<"u"&&location.hostname&&l6.test(location.hostname)&&(g.r="f"),o&&(g.s=o),s&&(g.ls=s),l&&(g.ac=l),u&&(g.p=u),p6(e,d6,g)}open(e,o){this.onDisconnect=o,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,c0.set("previous_websocket_failure",!0);try{let s;if((0,re.Yr)()){s={headers:{"User-Agent":`Firebase/5/${zN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,g=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;g&&(s.proxy={origin:g})}this.mySock=new zA(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const l=s.message||s.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const s=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&null!==zA&&!i.forceDisallow_}static previouslyFailed(){return c0.isInMemoryStorage||!0===c0.get("previous_websocket_failure")}markConnectionHealthy(){c0.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const o=this.frames.join("");this.frames=null;const s=(0,re.cI)(o);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,re.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const o=Number(e);if(!isNaN(o))return this.handleNewFrameCount_(o),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const o=e.data;if(this.bytesReceived+=o.length,this.stats_.incrementCounter("bytes_received",o.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(o);else{const s=this.extractFrameCount_(o);null!==s&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const o=(0,re.Pz)(e);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);const s=e6(o,16384);s.length>1&&this.sendString_(String(s.length));for(let l=0;l<s.length;l++)this.sendString_(s[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(o){this.log_("Exception thrown from WebSocket.send():",o.message||o.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i})(),b6=(()=>{class i{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Vy,A1]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const o=A1&&A1.isAvailable();let s=o&&!A1.previouslyFailed();if(e.webSocketOnly&&(o||Qa("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[A1];else{const l=this.transports_=[];for(const u of i.ALL_TRANSPORTS)u&&u.isAvailable()&&l.push(u);i.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return i.globalTransportInitialized_=!1,i})();class D6{constructor(t,e,o,s,l,u,g,_,w,T){this.id=t,this.repoInfo_=e,this.applicationId_=o,this.appCheckToken_=s,this.authToken_=l,this.onMessage_=u,this.onReady_=g,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=aS("c:"+this.id+":"),this.transportManager_=new b6(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,o)},Math.floor(0));const s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=cS(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=lS("t",t),o=lS("d",t);if("c"===e)this.onSecondaryControl_(o);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(o)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=lS("t",t),o=lS("d",t);"c"===e?this.onControl_(o):"d"===e&&this.onDataMessage_(o)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=lS("t",t);if("d"in t){const o=t.d;if("h"===e)this.onHandshake_(o);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(o):"r"===e?this.onReset_(o):"e"===e?qN("Server Error: "+o):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qN("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,o=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==o&&Qa("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,o),cS(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):cS(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(c0.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class I6{put(t,e,o,s){}merge(t,e,o,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,o){}onDisconnectMerge(t,e,o){}onDisconnectCancel(t,e){}reportStats(t){}}class M6{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,re.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const o=[...this.listeners_[t]];for(let s=0;s<o.length;s++)o[s].callback.apply(o[s].context,e)}}on(t,e,o){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:o});const s=this.getInitialEvent(t);s&&e.apply(o,s)}off(t,e,o){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let l=0;l<s.length;l++)if(s[l].callback===e&&(!o||o===s[l].context))return void s.splice(l,1)}validateEventType_(t){(0,re.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class GA extends M6{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,re.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new GA}getInitialEvent(t){return(0,re.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class hr{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let o=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[o]=this.pieces_[s],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function tr(){return new hr("")}function Mi(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Hy(i){return i.pieces_.length-i.pieceNum_}function Lr(i){let t=i.pieceNum_;return t<i.pieces_.length&&t++,new hr(i.pieces_,t)}function tF(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function dS(i,t=0){return i.pieces_.slice(i.pieceNum_+t)}function O6(i){if(i.pieceNum_>=i.pieces_.length)return null;const t=[];for(let e=i.pieceNum_;e<i.pieces_.length-1;e++)t.push(i.pieces_[e]);return new hr(t,0)}function wo(i,t){const e=[];for(let o=i.pieceNum_;o<i.pieces_.length;o++)e.push(i.pieces_[o]);if(t instanceof hr)for(let o=t.pieceNum_;o<t.pieces_.length;o++)e.push(t.pieces_[o]);else{const o=t.split("/");for(let s=0;s<o.length;s++)o[s].length>0&&e.push(o[s])}return new hr(e,0)}function Ai(i){return i.pieceNum_>=i.pieces_.length}function Ol(i,t){const e=Mi(i),o=Mi(t);if(null===e)return t;if(e===o)return Ol(Lr(i),Lr(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+i+")")}function pJ(i,t){const e=dS(i,0),o=dS(t,0);for(let s=0;s<e.length&&s<o.length;s++){const l=d0(e[s],o[s]);if(0!==l)return l}return e.length===o.length?0:e.length<o.length?-1:1}function nF(i,t){if(Hy(i)!==Hy(t))return!1;for(let e=i.pieceNum_,o=t.pieceNum_;e<=i.pieces_.length;e++,o++)if(i.pieces_[e]!==t.pieces_[o])return!1;return!0}function Ed(i,t){let e=i.pieceNum_,o=t.pieceNum_;if(Hy(i)>Hy(t))return!1;for(;e<i.pieces_.length;){if(i.pieces_[e]!==t.pieces_[o])return!1;++e,++o}return!0}class fJ{constructor(t,e){this.errorPrefix_=e,this.parts_=dS(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=(0,re.ug)(this.parts_[o]);R6(this)}}function R6(i){if(i.byteLength_>768)throw new Error(i.errorPrefix_+"has a key path longer than 768 bytes ("+i.byteLength_+").");if(i.parts_.length>32)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+h0(i))}function h0(i){return 0===i.parts_.length?"":"in property '"+i.parts_.join(".")+"'"}class iF extends M6{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const o=!document[t];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}static getInstance(){return new iF}getInitialEvent(t){return(0,re.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const hS=1e3;let ZA,p0=(()=>{class i extends I6{constructor(e,o,s,l,u,g,_,w){if(super(),this.repoInfo_=e,this.applicationId_=o,this.onDataUpdate_=s,this.onConnectStatus_=l,this.onServerInfoUpdate_=u,this.authTokenProvider_=g,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=i.nextPersistentConnectionId_++,this.log_=aS("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=hS,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,re.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");iF.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&GA.getInstance().on("online",this.onOnline_,this)}sendRequest(e,o,s){const l=++this.requestNumber_,u={r:l,a:e,b:o};this.log_((0,re.Pz)(u)),(0,re.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),s&&(this.requestCBHash_[l]=s)}get(e){this.initConnection_();const o=new re.BH,s={p:e._path.toString(),q:e._queryObject};return this.outstandingGets_.push({action:"g",request:s,onComplete:g=>{const _=g.d;"ok"===g.s?o.resolve(_):o.reject(_)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),o.promise}listen(e,o,s,l){this.initConnection_();const u=e._queryIdentifier,g=e._path.toString();this.log_("Listen called for "+g+" "+u),this.listens.has(g)||this.listens.set(g,new Map),(0,re.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,re.hu)(!this.listens.get(g).has(u),"listen() called twice for same path/queryId.");const _={onComplete:l,hashFn:o,query:e,tag:s};this.listens.get(g).set(u,_),this.connected_&&this.sendListen_(_)}sendGet_(e){const o=this.outstandingGets_[e];this.sendRequest("g",o.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),o.onComplete&&o.onComplete(s)})}sendListen_(e){const o=e.query,s=o._path.toString(),l=o._queryIdentifier;this.log_("Listen on "+s+" for "+l);const u={p:s};e.tag&&(u.q=o._queryObject,u.t=e.tag),u.h=e.hashFn(),this.sendRequest("q",u,_=>{const w=_.d,T=_.s;i.warnOnListenWarnings_(w,o),(this.listens.get(s)&&this.listens.get(s).get(l))===e&&(this.log_("listen response",_),"ok"!==T&&this.removeListen_(s,l),e.onComplete&&e.onComplete(T,w))})}static warnOnListenWarnings_(e,o){if(e&&"object"==typeof e&&(0,re.r3)(e,"w")){const s=(0,re.DV)(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const l='".indexOn": "'+o._queryParams.getIndex().toString()+'"',u=o._path.toString();Qa(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,re.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,o=(0,re.w9)(e)?"auth":"gauth",s={cred:e};null===this.authOverride_?s.noauth=!0:"object"==typeof this.authOverride_&&(s.authvar=this.authOverride_),this.sendRequest(o,s,l=>{const u=l.s,g=l.d||"error";this.authToken_===e&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,g))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const o=e.s,s=e.d||"error";"ok"===o?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(o,s)})}unlisten(e,o){const s=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+l),(0,re.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,l)&&this.connected_&&this.sendUnlisten_(s,l,e._queryObject,o)}sendUnlisten_(e,o,s,l){this.log_("Unlisten on "+e+" for "+o);const u={p:e};l&&(u.q=s,u.t=l),this.sendRequest("n",u)}onDisconnectPut(e,o,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,o,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:o,onComplete:s})}onDisconnectMerge(e,o,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,o,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:o,onComplete:s})}onDisconnectCancel(e,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:o})}sendOnDisconnect_(e,o,s,l){const u={p:o,d:s};this.log_("onDisconnect "+e,u),this.sendRequest(e,u,g=>{l&&setTimeout(()=>{l(g.s,g.d)},Math.floor(0))})}put(e,o,s,l){this.putInternal("p",e,o,s,l)}merge(e,o,s,l){this.putInternal("m",e,o,s,l)}putInternal(e,o,s,l,u){this.initConnection_();const g={p:o,d:s};void 0!==u&&(g.h=u),this.outstandingPuts_.push({action:e,request:g,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+o)}sendPut_(e){const o=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(o,s,u=>{this.log_(o+" response",u),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(u.s,u.d)})}reportStats(e){if(this.connected_){const o={c:e};this.log_("reportStats",o),this.sendRequest("s",o,s=>{"ok"!==s.s&&this.log_("reportStats","Error sending stats: "+s.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,re.Pz)(e));const o=e.r,s=this.requestCBHash_[o];s&&(delete this.requestCBHash_[o],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,o){this.log_("handleServerMessage",e,o),"d"===e?this.onDataUpdate_(o.p,o.d,!1,o.t):"m"===e?this.onDataUpdate_(o.p,o.d,!0,o.t):"c"===e?this.onListenRevoked_(o.p,o.q):"ac"===e?this.onAuthRevoked_(o.s,o.d):"apc"===e?this.onAppCheckRevoked_(o.s,o.d):"sd"===e?this.onSecurityDebugPacket_(o):qN("Unrecognized action received from server: "+(0,re.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,o){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=o,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,re.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=hS,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=hS,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=hS),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let o=Math.max(0,this.reconnectDelay_-e);o=Math.random()*o,this.log_("Trying to reconnect in "+o+"ms"),this.scheduleConnect_(o),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,rt.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const o=e.onDataMessage_.bind(e),s=e.onReady_.bind(e),l=e.onRealtimeDisconnect_.bind(e),u=e.id+":"+i.nextConnectionId_++,g=e.lastSessionId;let _=!1,w=null;const T=function(){w?w.close():(_=!0,l())};e.realtime_={close:T,sendRequest:function(F){(0,re.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(F)}};const O=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[F,j]=yield Promise.all([e.authTokenProvider_.getToken(O),e.appCheckTokenProvider_.getToken(O)]);_?la("getToken() completed but was canceled"):(la("getToken() completed. Creating connection."),e.authToken_=F&&F.accessToken,e.appCheckToken_=j&&j.token,w=new D6(u,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,o,s,l,Q=>{Qa(Q+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},g))}catch(F){e.log_("Failed to get token: "+F),_||(e.repoInfo_.nodeAdmin&&Qa(F),T())}}})()}interrupt(e){la("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){la("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,re.xb)(this.interruptReasons_)&&(this.reconnectDelay_=hS,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const o=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:o})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const o=this.outstandingPuts_[e];o&&"h"in o.request&&o.queued&&(o.onComplete&&o.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,o){let s;s=o?o.map(u=>ZN(u)).join("$"):"default";const l=this.removeListen_(e,s);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,o){const s=new hr(e).toString();let l;if(this.listens.has(s)){const u=this.listens.get(s);l=u.get(o),u.delete(o),0===u.size&&this.listens.delete(s)}else l=void 0;return l}onAuthRevoked_(e,o){la("Auth token revoked: "+e+"/"+o),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,o){la("App check token revoked: "+e+"/"+o),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const o of e.values())this.sendListen_(o);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let o="js";(0,re.Yr)()&&(o=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+o+"."+zN.replace(/\./g,"-")]=1,(0,re.uI)()?e["framework.cordova"]=1:(0,re.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=GA.getInstance().currentlyOnline();return(0,re.xb)(this.interruptReasons_)&&e}}return i.nextPersistentConnectionId_=0,i.nextConnectionId_=0,i})();class Pi{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Pi(t,e)}}class qA{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const o=new Pi(jm,t),s=new Pi(jm,e);return 0!==this.compare(o,s)}minPost(){return Pi.MIN}}class F6 extends qA{static get __EMPTY_NODE(){return ZA}static set __EMPTY_NODE(t){ZA=t}compare(t,e){return d0(t.name,e.name)}isDefinedOn(t){throw(0,re.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Pi.MIN}maxPost(){return new Pi(jf,ZA)}makePost(t,e){return(0,re.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Pi(t,ZA)}toString(){return".key"}}const zf=new F6;class $A{constructor(t,e,o,s,l=null){this.isReverse_=s,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!t.isEmpty();)if(u=e?o(t.key,e):1,s&&(u*=-1),u<0)t=this.isReverse_?t.left:t.right;else{if(0===u){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let oF,Gh=(()=>{class i{constructor(e,o,s,l,u){this.key=e,this.value=o,this.color=s??i.RED,this.left=l??uc.EMPTY_NODE,this.right=u??uc.EMPTY_NODE}copy(e,o,s,l,u){return new i(e??this.key,o??this.value,s??this.color,l??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,o,s){let l=this;const u=s(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,o,s),null):0===u?l.copy(null,o,null,null,null):l.copy(null,null,null,null,l.right.insert(e,o,s)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return uc.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,o){let s,l;if(s=this,o(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,o),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),0===o(e,s.key)){if(s.right.isEmpty())return uc.EMPTY_NODE;l=s.right.min_(),s=s.copy(l.key,l.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,o))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),o=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,o)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})();class uc{constructor(t,e=uc.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new uc(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Gh.BLACK,null,null))}remove(t){return new uc(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Gh.BLACK,null,null))}get(t){let e,o=this.root_;for(;!o.isEmpty();){if(e=this.comparator_(t,o.key),0===e)return o.value;e<0?o=o.left:e>0&&(o=o.right)}return null}getPredecessorKey(t){let e,o=this.root_,s=null;for(;!o.isEmpty();){if(e=this.comparator_(t,o.key),0===e){if(o.left.isEmpty())return s?s.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}e<0?o=o.left:e>0&&(s=o,o=o.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new $A(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new $A(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new $A(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new $A(this.root_,null,this.comparator_,!0,t)}}function CJ(i,t){return d0(i.name,t.name)}function rF(i,t){return d0(i,t)}uc.EMPTY_NODE=new class wJ{copy(t,e,o,s,l){return this}insert(t,e,o){return new Gh(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const L6=function(i){return"number"==typeof i?"number:"+t6(i):"string:"+i},V6=function(i){if(i.isLeafNode()){const t=i.val();(0,re.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,re.r3)(t,".sv"),"Priority must be a string or number.")}else(0,re.hu)(i===oF||i.isEmpty(),"priority of unexpected type.");(0,re.hu)(i===oF||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let H6,B6,U6,k1=(()=>{class i{constructor(e,o=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=o,this.lazyHash_=null,(0,re.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),V6(this.priorityNode_)}static set __childrenNodeConstructor(e){H6=e}static get __childrenNodeConstructor(){return H6}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new i(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ai(e)?this:".priority"===Mi(e)?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,o){return null}updateImmediateChild(e,o){return".priority"===e?this.updatePriority(o):o.isEmpty()&&".priority"!==e?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,o).updatePriority(this.priorityNode_)}updateChild(e,o){const s=Mi(e);return null===s?o:o.isEmpty()&&".priority"!==s?this:((0,re.hu)(".priority"!==s||1===Hy(e),".priority must be the last token in a path"),this.updateImmediateChild(s,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(Lr(e),o)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,o){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+L6(this.priorityNode_.val())+":");const o=typeof this.value_;e+=o+":",e+="number"===o?t6(this.value_):this.value_,this.lazyHash_=JU(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===i.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof i.__childrenNodeConstructor?-1:((0,re.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const o=typeof e.value_,s=typeof this.value_,l=i.VALUE_TYPE_ORDER.indexOf(o),u=i.VALUE_TYPE_ORDER.indexOf(s);return(0,re.hu)(l>=0,"Unknown leaf type: "+o),(0,re.hu)(u>=0,"Unknown leaf type: "+s),l===u?"object"===s?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:u-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const o=e;return this.value_===o.value_&&this.priorityNode_.equals(o.priorityNode_)}return!1}}return i.VALUE_TYPE_ORDER=["object","boolean","number","string"],i})();const Jr=new class SJ extends qA{compare(t,e){const o=t.node.getPriority(),s=e.node.getPriority(),l=o.compareTo(s);return 0===l?d0(t.name,e.name):l}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Pi.MIN}maxPost(){return new Pi(jf,new k1("[PRIORITY-POST]",U6))}makePost(t,e){const o=B6(t);return new Pi(e,new k1("[PRIORITY-POST]",o))}toString(){return".priority"}},DJ=Math.log(2);class IJ{constructor(t){this.count=parseInt(Math.log(t+1)/DJ,10),this.current_=this.count-1;const s=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const WA=function(i,t,e,o){i.sort(t);const s=function(_,w){const T=w-_;let D,O;if(0===T)return null;if(1===T)return D=i[_],O=e?e(D):D,new Gh(O,D.node,Gh.BLACK,null,null);{const F=parseInt(T/2,10)+_,j=s(_,F),Q=s(F+1,w);return D=i[F],O=e?e(D):D,new Gh(O,D.node,Gh.BLACK,j,Q)}},g=function(_){let w=null,T=null,D=i.length;const O=function(j,Q){const ae=D-j,Oe=D;D-=j;const We=s(ae+1,Oe),ft=i[ae],dt=e?e(ft):ft;F(new Gh(dt,ft.node,Q,null,We))},F=function(j){w?(w.left=j,w=j):(T=j,w=j)};for(let j=0;j<_.count;++j){const Q=_.nextBitIsOne(),ae=Math.pow(2,_.count-(j+1));Q?O(ae,Gh.BLACK):(O(ae,Gh.BLACK),O(ae,Gh.RED))}return T}(new IJ(i.length));return new uc(o||t,g)};let sF;const O1={};class zm{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,re.hu)(O1&&Jr,"ChildrenNode.ts has not been loaded"),sF=sF||new zm({".priority":O1},{".priority":Jr}),sF}get(t){const e=(0,re.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof uc?e:null}hasIndex(t){return(0,re.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,re.hu)(t!==zf,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let s=!1;const l=e.getIterator(Pi.Wrap);let g,u=l.getNext();for(;u;)s=s||t.isDefinedOn(u.node),o.push(u),u=l.getNext();g=s?WA(o,t.getCompare()):O1;const _=t.toString(),w=Object.assign({},this.indexSet_);w[_]=t;const T=Object.assign({},this.indexes_);return T[_]=g,new zm(T,w)}addToIndexes(t,e){const o=(0,re.UI)(this.indexes_,(s,l)=>{const u=(0,re.DV)(this.indexSet_,l);if((0,re.hu)(u,"Missing index implementation for "+l),s===O1){if(u.isDefinedOn(t.node)){const g=[],_=e.getIterator(Pi.Wrap);let w=_.getNext();for(;w;)w.name!==t.name&&g.push(w),w=_.getNext();return g.push(t),WA(g,u.getCompare())}return O1}{const g=e.get(t.name);let _=s;return g&&(_=_.remove(new Pi(t.name,g))),_.insert(t,t.node)}});return new zm(o,this.indexSet_)}removeFromIndexes(t,e){const o=(0,re.UI)(this.indexes_,s=>{if(s===O1)return s;{const l=e.get(t.name);return l?s.remove(new Pi(t.name,l)):s}});return new zm(o,this.indexSet_)}}let pS,fi=(()=>{class i{constructor(e,o,s){this.children_=e,this.priorityNode_=o,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&V6(this.priorityNode_),this.children_.isEmpty()&&(0,re.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return pS||(pS=new i(new uc(rF),null,zm.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pS}updatePriority(e){return this.children_.isEmpty()?this:new i(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const o=this.children_.get(e);return null===o?pS:o}}getChild(e){const o=Mi(e);return null===o?this:this.getImmediateChild(o).getChild(Lr(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,o){if((0,re.hu)(o,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(o);{const s=new Pi(e,o);let l,u;o.isEmpty()?(l=this.children_.remove(e),u=this.indexMap_.removeFromIndexes(s,this.children_)):(l=this.children_.insert(e,o),u=this.indexMap_.addToIndexes(s,this.children_));const g=l.isEmpty()?pS:this.priorityNode_;return new i(l,g,u)}}updateChild(e,o){const s=Mi(e);if(null===s)return o;{(0,re.hu)(".priority"!==Mi(e)||1===Hy(e),".priority must be the last token in a path");const l=this.getImmediateChild(s).updateChild(Lr(e),o);return this.updateImmediateChild(s,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const o={};let s=0,l=0,u=!0;if(this.forEachChild(Jr,(g,_)=>{o[g]=_.val(e),s++,u&&i.INTEGER_REGEXP_.test(g)?l=Math.max(l,Number(g)):u=!1}),!e&&u&&l<2*s){const g=[];for(const _ in o)g[_]=o[_];return g}return e&&!this.getPriority().isEmpty()&&(o[".priority"]=this.getPriority().val()),o}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+L6(this.getPriority().val())+":"),this.forEachChild(Jr,(o,s)=>{const l=s.hash();""!==l&&(e+=":"+o+":"+l)}),this.lazyHash_=""===e?"":JU(e)}return this.lazyHash_}getPredecessorChildName(e,o,s){const l=this.resolveIndex_(s);if(l){const u=l.getPredecessorKey(new Pi(e,o));return u?u.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const o=this.resolveIndex_(e);if(o){const s=o.minKey();return s&&s.name}return this.children_.minKey()}getFirstChild(e){const o=this.getFirstChildName(e);return o?new Pi(o,this.children_.get(o)):null}getLastChildName(e){const o=this.resolveIndex_(e);if(o){const s=o.maxKey();return s&&s.name}return this.children_.maxKey()}getLastChild(e){const o=this.getLastChildName(e);return o?new Pi(o,this.children_.get(o)):null}forEachChild(e,o){const s=this.resolveIndex_(e);return s?s.inorderTraversal(l=>o(l.name,l.node)):this.children_.inorderTraversal(o)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,o){const s=this.resolveIndex_(o);if(s)return s.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,Pi.Wrap);let u=l.peek();for(;null!=u&&o.compare(u,e)<0;)l.getNext(),u=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,o){const s=this.resolveIndex_(o);if(s)return s.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,Pi.Wrap);let u=l.peek();for(;null!=u&&o.compare(u,e)>0;)l.getNext(),u=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===fS?-1:0}withIndex(e){if(e===zf||this.indexMap_.hasIndex(e))return this;{const o=this.indexMap_.addIndex(e,this.children_);return new i(this.children_,this.priorityNode_,o)}}isIndexed(e){return e===zf||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const o=e;if(this.getPriority().equals(o.getPriority())){if(this.children_.count()===o.children_.count()){const s=this.getIterator(Jr),l=o.getIterator(Jr);let u=s.getNext(),g=l.getNext();for(;u&&g;){if(u.name!==g.name||!u.node.equals(g.node))return!1;u=s.getNext(),g=l.getNext()}return null===u&&null===g}return!1}return!1}}resolveIndex_(e){return e===zf?null:this.indexMap_.get(e.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})();const fS=new class MJ extends fi{constructor(){super(new uc(rF),fi.EMPTY_NODE,zm.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return fi.EMPTY_NODE}isEmpty(){return!1}};function No(i,t=null){if(null===i)return fi.EMPTY_NODE;if("object"==typeof i&&".priority"in i&&(t=i[".priority"]),(0,re.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof i&&".value"in i&&null!==i[".value"]&&(i=i[".value"]),"object"!=typeof i||".sv"in i)return new k1(i,No(t));if(i instanceof Array){let e=fi.EMPTY_NODE;return ca(i,(o,s)=>{if((0,re.r3)(i,o)&&"."!==o.substring(0,1)){const l=No(s);(l.isLeafNode()||!l.isEmpty())&&(e=e.updateImmediateChild(o,l))}}),e.updatePriority(No(t))}{const e=[];let o=!1;if(ca(i,(u,g)=>{if("."!==u.substring(0,1)){const _=No(g);_.isEmpty()||(o=o||!_.getPriority().isEmpty(),e.push(new Pi(u,_)))}}),0===e.length)return fi.EMPTY_NODE;const l=WA(e,CJ,u=>u.name,rF);if(o){const u=WA(e,Jr.getCompare());return new fi(l,No(t),new zm({".priority":u},{".priority":Jr}))}return new fi(l,No(t),zm.Default)}}Object.defineProperties(Pi,{MIN:{value:new Pi(jm,fi.EMPTY_NODE)},MAX:{value:new Pi(jf,fS)}}),F6.__EMPTY_NODE=fi.EMPTY_NODE,k1.__childrenNodeConstructor=fi,function TJ(i){oF=i}(fS),function xJ(i){U6=i}(fS),function EJ(i){B6=i}(No);class aF extends qA{constructor(t){super(),this.indexPath_=t,(0,re.hu)(!Ai(t)&&".priority"!==Mi(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const o=this.extractChild(t.node),s=this.extractChild(e.node),l=o.compareTo(s);return 0===l?d0(t.name,e.name):l}makePost(t,e){const o=No(t),s=fi.EMPTY_NODE.updateChild(this.indexPath_,o);return new Pi(e,s)}maxPost(){const t=fi.EMPTY_NODE.updateChild(this.indexPath_,fS);return new Pi(jf,t)}toString(){return dS(this.indexPath_,0).join("/")}}const lF=new class kJ extends qA{compare(t,e){const o=t.node.compareTo(e.node);return 0===o?d0(t.name,e.name):o}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Pi.MIN}maxPost(){return Pi.MAX}makePost(t,e){const o=No(t);return new Pi(e,o)}toString(){return".value"}},R1="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",OJ=function(){let i=0;const t=[];return function(e){const o=e===i;let s;i=e;const l=new Array(8);for(s=7;s>=0;s--)l[s]=R1.charAt(e%64),e=Math.floor(e/64);(0,re.hu)(0===e,"Cannot push at time == 0");let u=l.join("");if(o){for(s=11;s>=0&&63===t[s];s--)t[s]=0;t[s]++}else for(s=0;s<12;s++)t[s]=Math.floor(64*Math.random());for(s=0;s<12;s++)u+=R1.charAt(t[s]);return(0,re.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),G6=function(i){if(i===""+$N)return"-";const t=UA(i);if(null!=t)return""+(t+1);const e=new Array(i.length);for(let u=0;u<e.length;u++)e[u]=i.charAt(u);if(e.length<786)return e.push("-"),e.join("");let o=e.length-1;for(;o>=0&&"z"===e[o];)o--;if(-1===o)return jf;const l=R1.charAt(R1.indexOf(e[o])+1);return e[o]=l,e.slice(0,o+1).join("")},q6=function(i){if(i===""+n6)return jm;const t=UA(i);if(null!=t)return""+(t-1);const e=new Array(i.length);for(let o=0;o<e.length;o++)e[o]=i.charAt(o);return"-"===e[e.length-1]?1===e.length?""+$N:(delete e[e.length-1],e.join("")):(e[e.length-1]=R1.charAt(R1.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function Z6(i){return{type:"value",snapshotNode:i}}function P1(i,t){return{type:"child_added",snapshotNode:t,childName:i}}function gS(i,t){return{type:"child_removed",snapshotNode:t,childName:i}}function mS(i,t,e){return{type:"child_changed",snapshotNode:t,childName:i,oldSnap:e}}class uF{constructor(t){this.index_=t}updateChild(t,e,o,s,l,u){(0,re.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const g=t.getImmediateChild(e);return g.getChild(s).equals(o.getChild(s))&&g.isEmpty()===o.isEmpty()||(null!=u&&(o.isEmpty()?t.hasChild(e)?u.trackChildChange(gS(e,g)):(0,re.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):g.isEmpty()?u.trackChildChange(P1(e,o)):u.trackChildChange(mS(e,o,g))),t.isLeafNode()&&o.isEmpty())?t:t.updateImmediateChild(e,o).withIndex(this.index_)}updateFullNode(t,e,o){return null!=o&&(t.isLeafNode()||t.forEachChild(Jr,(s,l)=>{e.hasChild(s)||o.trackChildChange(gS(s,l))}),e.isLeafNode()||e.forEachChild(Jr,(s,l)=>{if(t.hasChild(s)){const u=t.getImmediateChild(s);u.equals(l)||o.trackChildChange(mS(s,l,u))}else o.trackChildChange(P1(s,l))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?fi.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class _S{constructor(t){this.indexedFilter_=new uF(t.getIndex()),this.index_=t.getIndex(),this.startPost_=_S.getStartPost_(t),this.endPost_=_S.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,o,s,l,u){return this.matches(new Pi(e,o))||(o=fi.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,o,s,l,u)}updateFullNode(t,e,o){e.isLeafNode()&&(e=fi.EMPTY_NODE);let s=e.withIndex(this.index_);s=s.updatePriority(fi.EMPTY_NODE);const l=this;return e.forEachChild(Jr,(u,g)=>{l.matches(new Pi(u,g))||(s=s.updateImmediateChild(u,fi.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,s,o)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class PJ{constructor(t){this.rangedFilter_=new _S(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,o,s,l,u){return this.rangedFilter_.matches(new Pi(e,o))||(o=fi.EMPTY_NODE),t.getImmediateChild(e).equals(o)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,o,s,l,u):this.fullLimitUpdateChild_(t,e,o,l,u)}updateFullNode(t,e,o){let s;if(e.isLeafNode()||e.isEmpty())s=fi.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let l;s=fi.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;l.hasNext()&&u<this.limit_;){const g=l.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),g)<=0:this.index_.compare(g,this.rangedFilter_.getEndPost())<=0,!_)break;s=s.updateImmediateChild(g.name,g.node),u++}}else{let l,u,g,_;if(s=e.withIndex(this.index_),s=s.updatePriority(fi.EMPTY_NODE),this.reverse_){_=s.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();g=(O,F)=>D(F,O)}else _=s.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),g=this.index_.getCompare();let w=0,T=!1;for(;_.hasNext();){const D=_.getNext();!T&&g(l,D)<=0&&(T=!0),T&&w<this.limit_&&g(D,u)<=0?w++:s=s.updateImmediateChild(D.name,fi.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,s,o)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,o,s,l){let u;if(this.reverse_){const D=this.index_.getCompare();u=(O,F)=>D(F,O)}else u=this.index_.getCompare();const g=t;(0,re.hu)(g.numChildren()===this.limit_,"");const _=new Pi(e,o),w=this.reverse_?g.getFirstChild(this.index_):g.getLastChild(this.index_),T=this.rangedFilter_.matches(_);if(g.hasChild(e)){const D=g.getImmediateChild(e);let O=s.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=O&&(O.name===e||g.hasChild(O.name));)O=s.getChildAfterChild(this.index_,O,this.reverse_);const F=null==O?1:u(O,_);if(T&&!o.isEmpty()&&F>=0)return l?.trackChildChange(mS(e,o,D)),g.updateImmediateChild(e,o);{l?.trackChildChange(gS(e,D));const Q=g.updateImmediateChild(e,fi.EMPTY_NODE);return null!=O&&this.rangedFilter_.matches(O)?(l?.trackChildChange(P1(O.name,O.node)),Q.updateImmediateChild(O.name,O.node)):Q}}return o.isEmpty()?t:T&&u(w,_)>=0?(null!=l&&(l.trackChildChange(gS(w.name,w.node)),l.trackChildChange(P1(e,o))),g.updateImmediateChild(e,o).updateImmediateChild(w.name,fi.EMPTY_NODE)):t}}class KA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,re.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,re.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jm}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,re.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,re.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jf}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,re.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Jr}copy(){const t=new KA;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function dF(i,t,e){const o=i.copy();return o.startSet_=!0,void 0===t&&(t=null),o.indexStartValue_=t,null!=e?(o.startNameSet_=!0,o.indexStartName_=e):(o.startNameSet_=!1,o.indexStartName_=""),o}function hF(i,t,e){const o=i.copy();return o.endSet_=!0,void 0===t&&(t=null),o.indexEndValue_=t,void 0!==e?(o.endNameSet_=!0,o.indexEndName_=e):(o.endNameSet_=!1,o.indexEndName_=""),o}function YA(i,t){const e=i.copy();return e.index_=t,e}function $6(i){const t={};if(i.isDefault())return t;let e;return i.index_===Jr?e="$priority":i.index_===lF?e="$value":i.index_===zf?e="$key":((0,re.hu)(i.index_ instanceof aF,"Unrecognized index type!"),e=i.index_.toString()),t.orderBy=(0,re.Pz)(e),i.startSet_&&(t.startAt=(0,re.Pz)(i.indexStartValue_),i.startNameSet_&&(t.startAt+=","+(0,re.Pz)(i.indexStartName_))),i.endSet_&&(t.endAt=(0,re.Pz)(i.indexEndValue_),i.endNameSet_&&(t.endAt+=","+(0,re.Pz)(i.indexEndName_))),i.limitSet_&&(i.isViewFromLeft()?t.limitToFirst=i.limit_:t.limitToLast=i.limit_),t}function W6(i){const t={};if(i.startSet_&&(t.sp=i.indexStartValue_,i.startNameSet_&&(t.sn=i.indexStartName_)),i.endSet_&&(t.ep=i.indexEndValue_,i.endNameSet_&&(t.en=i.indexEndName_)),i.limitSet_){t.l=i.limit_;let e=i.viewFrom_;""===e&&(e=i.isViewFromLeft()?"l":"r"),t.vf=e}return i.index_!==Jr&&(t.i=i.index_.toString()),t}class JA extends I6{constructor(t,e,o,s){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.log_=aS("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,re.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,o,s){const l=t._path.toString();this.log_("Listen called for "+l+" "+t._queryIdentifier);const u=JA.getListenId_(t,o),g={};this.listens_[u]=g;const _=$6(t._queryParams);this.restRequest_(l+".json",_,(w,T)=>{let D=T;if(404===w&&(D=null,w=null),null===w&&this.onDataUpdate_(l,D,!1,o),(0,re.DV)(this.listens_,u)===g){let O;O=w?401===w?"permission_denied":"rest_error:"+w:"ok",s(O,null)}})}unlisten(t,e){const o=JA.getListenId_(t,e);delete this.listens_[o]}get(t){const e=$6(t._queryParams),o=t._path.toString(),s=new re.BH;return this.restRequest_(o+".json",e,(l,u)=>{let g=u;404===l&&(g=null,l=null),null===l?(this.onDataUpdate_(o,g,!1,null),s.resolve(g)):s.reject(new Error(g))}),s.promise}refreshAuthToken(t){}restRequest_(t,e={},o){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,l])=>{s&&s.accessToken&&(e.auth=s.accessToken),l&&l.token&&(e.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,re.xO)(e);this.log_("Sending REST request for "+u);const g=new XMLHttpRequest;g.onreadystatechange=()=>{if(o&&4===g.readyState){this.log_("REST Response for "+u+" received. status:",g.status,"response:",g.responseText);let _=null;if(g.status>=200&&g.status<300){try{_=(0,re.cI)(g.responseText)}catch{Qa("Failed to parse JSON response for "+u+": "+g.responseText)}o(null,_)}else 401!==g.status&&404!==g.status&&Qa("Got unsuccessful REST response for "+u+" Status: "+g.status),o(g.status);o=null}},g.open("GET",u,!0),g.send()})}}class BJ{constructor(){this.rootNode_=fi.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function QA(){return{value:null,children:new Map}}function N1(i,t,e){if(Ai(t))i.value=e,i.children.clear();else if(null!==i.value)i.value=i.value.updateChild(t,e);else{const o=Mi(t);i.children.has(o)||i.children.set(o,QA()),N1(i.children.get(o),t=Lr(t),e)}}function pF(i,t){if(Ai(t))return i.value=null,i.children.clear(),!0;if(null!==i.value){if(i.value.isLeafNode())return!1;{const e=i.value;return i.value=null,e.forEachChild(Jr,(o,s)=>{N1(i,new hr(o),s)}),pF(i,t)}}if(i.children.size>0){const e=Mi(t);return t=Lr(t),i.children.has(e)&&pF(i.children.get(e),t)&&i.children.delete(e),0===i.children.size}return!0}function fF(i,t,e){null!==i.value?e(t,i.value):function UJ(i,t){i.children.forEach((e,o)=>{t(o,e)})}(i,(o,s)=>{fF(s,new hr(t.toString()+"/"+o),e)})}class jJ{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&ca(this.last_,(o,s)=>{e[o]=e[o]-s}),this.last_=t,e}}class qJ{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new jJ(t);const o=1e4+2e4*Math.random();cS(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const t=this.statsListener_.get(),e={};let o=!1;ca(t,(s,l)=>{l>0&&(0,re.r3)(this.statsToReport_,s)&&(e[s]=l,o=!0)}),o&&this.server_.reportStats(e),cS(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var xd=(()=>(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(xd||(xd={})),xd))();function _F(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class XA{constructor(t,e,o){this.path=t,this.affectedTree=e,this.revert=o,this.type=xd.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(Ai(this.path)){if(null!=this.affectedTree.value)return(0,re.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new hr(t));return new XA(tr(),e,this.revert)}}return(0,re.hu)(Mi(this.path)===t,"operationForChild called for unrelated child."),new XA(Lr(this.path),this.affectedTree,this.revert)}}class yS{constructor(t,e){this.source=t,this.path=e,this.type=xd.LISTEN_COMPLETE}operationForChild(t){return Ai(this.path)?new yS(this.source,tr()):new yS(this.source,Lr(this.path))}}class f0{constructor(t,e,o){this.source=t,this.path=e,this.snap=o,this.type=xd.OVERWRITE}operationForChild(t){return Ai(this.path)?new f0(this.source,tr(),this.snap.getImmediateChild(t)):new f0(this.source,Lr(this.path),this.snap)}}class F1{constructor(t,e,o){this.source=t,this.path=e,this.children=o,this.type=xd.MERGE}operationForChild(t){if(Ai(this.path)){const e=this.children.subtree(new hr(t));return e.isEmpty()?null:e.value?new f0(this.source,tr(),e.value):new F1(this.source,tr(),e)}return(0,re.hu)(Mi(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new F1(this.source,Lr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class By{constructor(t,e,o){this.node_=t,this.fullyInitialized_=e,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Ai(t))return this.isFullyInitialized()&&!this.filtered_;const e=Mi(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class ZJ{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function vS(i,t,e,o,s,l){const u=o.filter(g=>g.type===e);u.sort((g,_)=>function KJ(i,t,e){if(null==t.childName||null==e.childName)throw(0,re.g5)("Should only compare child_ events.");const o=new Pi(t.childName,t.snapshotNode),s=new Pi(e.childName,e.snapshotNode);return i.index_.compare(o,s)}(i,g,_)),u.forEach(g=>{const _=function WJ(i,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,i.index_)),t}(i,g,l);s.forEach(w=>{w.respondsTo(g.type)&&t.push(w.createEvent(_,i.query_))})})}function ek(i,t){return{eventCache:i,serverCache:t}}function bS(i,t,e,o){return ek(new By(t,e,o),i.serverCache)}function Y6(i,t,e,o){return ek(i.eventCache,new By(t,e,o))}function tk(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function g0(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let yF;class Qr{constructor(t,e=(()=>(yF||(yF=new uc(P9)),yF))()){this.value=t,this.children=e}static fromObject(t){let e=new Qr(null);return ca(t,(o,s)=>{e=e.set(new hr(o),s)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:tr(),value:this.value};if(Ai(t))return null;{const o=Mi(t),s=this.children.get(o);if(null!==s){const l=s.findRootMostMatchingPathAndValue(Lr(t),e);return null!=l?{path:wo(new hr(o),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Ai(t))return this;{const e=Mi(t),o=this.children.get(e);return null!==o?o.subtree(Lr(t)):new Qr(null)}}set(t,e){if(Ai(t))return new Qr(e,this.children);{const o=Mi(t),l=(this.children.get(o)||new Qr(null)).set(Lr(t),e),u=this.children.insert(o,l);return new Qr(this.value,u)}}remove(t){if(Ai(t))return this.children.isEmpty()?new Qr(null):new Qr(null,this.children);{const e=Mi(t),o=this.children.get(e);if(o){const s=o.remove(Lr(t));let l;return l=s.isEmpty()?this.children.remove(e):this.children.insert(e,s),null===this.value&&l.isEmpty()?new Qr(null):new Qr(this.value,l)}return this}}get(t){if(Ai(t))return this.value;{const e=Mi(t),o=this.children.get(e);return o?o.get(Lr(t)):null}}setTree(t,e){if(Ai(t))return e;{const o=Mi(t),l=(this.children.get(o)||new Qr(null)).setTree(Lr(t),e);let u;return u=l.isEmpty()?this.children.remove(o):this.children.insert(o,l),new Qr(this.value,u)}}fold(t){return this.fold_(tr(),t)}fold_(t,e){const o={};return this.children.inorderTraversal((s,l)=>{o[s]=l.fold_(wo(t,s),e)}),e(t,this.value,o)}findOnPath(t,e){return this.findOnPath_(t,tr(),e)}findOnPath_(t,e,o){const s=!!this.value&&o(e,this.value);if(s)return s;if(Ai(t))return null;{const l=Mi(t),u=this.children.get(l);return u?u.findOnPath_(Lr(t),wo(e,l),o):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,tr(),e)}foreachOnPath_(t,e,o){if(Ai(t))return this;{this.value&&o(e,this.value);const s=Mi(t),l=this.children.get(s);return l?l.foreachOnPath_(Lr(t),wo(e,s),o):new Qr(null)}}foreach(t){this.foreach_(tr(),t)}foreach_(t,e){this.children.inorderTraversal((o,s)=>{s.foreach_(wo(t,o),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,o)=>{o.value&&t(e,o.value)})}}class qh{constructor(t){this.writeTree_=t}static empty(){return new qh(new Qr(null))}}function wS(i,t,e){if(Ai(t))return new qh(new Qr(e));{const o=i.writeTree_.findRootMostValueAndPath(t);if(null!=o){const s=o.path;let l=o.value;const u=Ol(s,t);return l=l.updateChild(u,e),new qh(i.writeTree_.set(s,l))}{const s=new Qr(e),l=i.writeTree_.setTree(t,s);return new qh(l)}}}function vF(i,t,e){let o=i;return ca(e,(s,l)=>{o=wS(o,wo(t,s),l)}),o}function J6(i,t){if(Ai(t))return qh.empty();{const e=i.writeTree_.setTree(t,new Qr(null));return new qh(e)}}function bF(i,t){return null!=m0(i,t)}function m0(i,t){const e=i.writeTree_.findRootMostValueAndPath(t);return null!=e?i.writeTree_.get(e.path).getChild(Ol(e.path,t)):null}function Q6(i){const t=[],e=i.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Jr,(o,s)=>{t.push(new Pi(o,s))}):i.writeTree_.children.inorderTraversal((o,s)=>{null!=s.value&&t.push(new Pi(o,s.value))}),t}function Uy(i,t){if(Ai(t))return i;{const e=m0(i,t);return new qh(null!=e?new Qr(e):i.writeTree_.subtree(t))}}function wF(i){return i.writeTree_.isEmpty()}function L1(i,t){return X6(tr(),i.writeTree_,t)}function X6(i,t,e){if(null!=t.value)return e.updateChild(i,t.value);{let o=null;return t.children.inorderTraversal((s,l)=>{".priority"===s?((0,re.hu)(null!==l.value,"Priority writes must always be leaf nodes"),o=l.value):e=X6(wo(i,s),l,e)}),!e.getChild(i).isEmpty()&&null!==o&&(e=e.updateChild(wo(i,".priority"),o)),e}}function nk(i,t){return rj(t,i)}function tQ(i,t){if(i.snap)return Ed(i.path,t);for(const e in i.children)if(i.children.hasOwnProperty(e)&&Ed(wo(i.path,e),t))return!0;return!1}function iQ(i){return i.visible}function ej(i,t,e){let o=qh.empty();for(let s=0;s<i.length;++s){const l=i[s];if(t(l)){const u=l.path;let g;if(l.snap)Ed(e,u)?(g=Ol(e,u),o=wS(o,g,l.snap)):Ed(u,e)&&(g=Ol(u,e),o=wS(o,tr(),l.snap.getChild(g)));else{if(!l.children)throw(0,re.g5)("WriteRecord should have .snap or .children");if(Ed(e,u))g=Ol(e,u),o=vF(o,g,l.children);else if(Ed(u,e))if(g=Ol(u,e),Ai(g))o=vF(o,tr(),l.children);else{const _=(0,re.DV)(l.children,Mi(g));if(_){const w=_.getChild(Lr(g));o=wS(o,tr(),w)}}}}}return o}function tj(i,t,e,o,s){if(o||s){const l=Uy(i.visibleWrites,t);return!s&&wF(l)?e:s||null!=e||bF(l,tr())?L1(ej(i.allWrites,function(w){return(w.visible||s)&&(!o||!~o.indexOf(w.writeId))&&(Ed(w.path,t)||Ed(t,w.path))},t),e||fi.EMPTY_NODE):null}{const l=m0(i.visibleWrites,t);if(null!=l)return l;{const u=Uy(i.visibleWrites,t);return wF(u)?e:null!=e||bF(u,tr())?L1(u,e||fi.EMPTY_NODE):null}}}function ik(i,t,e,o){return tj(i.writeTree,i.treePath,t,e,o)}function CF(i,t){return function rQ(i,t,e){let o=fi.EMPTY_NODE;const s=m0(i.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(Jr,(l,u)=>{o=o.updateImmediateChild(l,u)}),o;if(e){const l=Uy(i.visibleWrites,t);return e.forEachChild(Jr,(u,g)=>{const _=L1(Uy(l,new hr(u)),g);o=o.updateImmediateChild(u,_)}),Q6(l).forEach(u=>{o=o.updateImmediateChild(u.name,u.node)}),o}return Q6(Uy(i.visibleWrites,t)).forEach(u=>{o=o.updateImmediateChild(u.name,u.node)}),o}(i.writeTree,i.treePath,t)}function nj(i,t,e,o){return function oQ(i,t,e,o,s){(0,re.hu)(o||s,"Either existingEventSnap or existingServerSnap must exist");const l=wo(t,e);if(bF(i.visibleWrites,l))return null;{const u=Uy(i.visibleWrites,l);return wF(u)?s.getChild(e):L1(u,s.getChild(e))}}(i.writeTree,i.treePath,t,e,o)}function rk(i,t){return function aQ(i,t){return m0(i.visibleWrites,t)}(i.writeTree,wo(i.treePath,t))}function TF(i,t,e){return function sQ(i,t,e,o){const s=wo(t,e),l=m0(i.visibleWrites,s);return null!=l?l:o.isCompleteForChild(e)?L1(Uy(i.visibleWrites,s),o.getNode().getImmediateChild(e)):null}(i.writeTree,i.treePath,t,e)}function ij(i,t){return rj(wo(i.treePath,t),i.writeTree)}function rj(i,t){return{treePath:i,writeTree:t}}class dQ{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,o=t.childName;(0,re.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,re.hu)(".priority"!==o,"Only non-priority child changes can be tracked.");const s=this.changeMap.get(o);if(s){const l=s.type;if("child_added"===e&&"child_removed"===l)this.changeMap.set(o,mS(o,t.snapshotNode,s.snapshotNode));else if("child_removed"===e&&"child_added"===l)this.changeMap.delete(o);else if("child_removed"===e&&"child_changed"===l)this.changeMap.set(o,gS(o,s.oldSnap));else if("child_changed"===e&&"child_added"===l)this.changeMap.set(o,P1(o,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==l)throw(0,re.g5)("Illegal combination of changes: "+t+" occurred after "+s);this.changeMap.set(o,mS(o,t.snapshotNode,s.oldSnap))}}else this.changeMap.set(o,t)}getChanges(){return Array.from(this.changeMap.values())}}const oj=new class hQ{getCompleteChild(t){return null}getChildAfterChild(t,e,o){return null}};class EF{constructor(t,e,o=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=o}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const o=null!=this.optCompleteServerCache_?new By(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return TF(this.writes_,t,o)}}getChildAfterChild(t,e,o){const s=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:g0(this.viewCache_),l=function uQ(i,t,e,o,s,l){return function lQ(i,t,e,o,s,l,u){let g;const _=Uy(i.visibleWrites,t),w=m0(_,tr());if(null!=w)g=w;else{if(null==e)return[];g=L1(_,e)}if(g=g.withIndex(u),g.isEmpty()||g.isLeafNode())return[];{const T=[],D=u.getCompare(),O=l?g.getReverseIteratorFrom(o,u):g.getIteratorFrom(o,u);let F=O.getNext();for(;F&&T.length<s;)0!==D(F,o)&&T.push(F),F=O.getNext();return T}}(i.writeTree,i.treePath,t,e,o,s,l)}(this.writes_,s,e,1,o,t);return 0===l.length?null:l[0]}}function sj(i,t,e,o,s,l){const u=t.eventCache;if(null!=rk(o,e))return t;{let g,_;if(Ai(e))if((0,re.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const w=g0(t),D=CF(o,w instanceof fi?w:fi.EMPTY_NODE);g=i.filter.updateFullNode(t.eventCache.getNode(),D,l)}else{const w=ik(o,g0(t));g=i.filter.updateFullNode(t.eventCache.getNode(),w,l)}else{const w=Mi(e);if(".priority"===w){(0,re.hu)(1===Hy(e),"Can't have a priority with additional path components");const T=u.getNode();_=t.serverCache.getNode();const D=nj(o,e,T,_);g=null!=D?i.filter.updatePriority(T,D):u.getNode()}else{const T=Lr(e);let D;if(u.isCompleteForChild(w)){_=t.serverCache.getNode();const O=nj(o,e,u.getNode(),_);D=null!=O?u.getNode().getImmediateChild(w).updateChild(T,O):u.getNode().getImmediateChild(w)}else D=TF(o,w,t.serverCache);g=null!=D?i.filter.updateChild(u.getNode(),w,D,T,s,l):u.getNode()}}return bS(t,g,u.isFullyInitialized()||Ai(e),i.filter.filtersNodes())}}function ok(i,t,e,o,s,l,u,g){const _=t.serverCache;let w;const T=u?i.filter:i.filter.getIndexedFilter();if(Ai(e))w=T.updateFullNode(_.getNode(),o,null);else if(T.filtersNodes()&&!_.isFiltered()){const F=_.getNode().updateChild(e,o);w=T.updateFullNode(_.getNode(),F,null)}else{const F=Mi(e);if(!_.isCompleteForPath(e)&&Hy(e)>1)return t;const j=Lr(e),ae=_.getNode().getImmediateChild(F).updateChild(j,o);w=".priority"===F?T.updatePriority(_.getNode(),ae):T.updateChild(_.getNode(),F,ae,j,oj,null)}const D=Y6(t,w,_.isFullyInitialized()||Ai(e),T.filtersNodes());return sj(i,D,e,s,new EF(s,D,l),g)}function xF(i,t,e,o,s,l,u){const g=t.eventCache;let _,w;const T=new EF(s,t,l);if(Ai(e))w=i.filter.updateFullNode(t.eventCache.getNode(),o,u),_=bS(t,w,!0,i.filter.filtersNodes());else{const D=Mi(e);if(".priority"===D)w=i.filter.updatePriority(t.eventCache.getNode(),o),_=bS(t,w,g.isFullyInitialized(),g.isFiltered());else{const O=Lr(e),F=g.getNode().getImmediateChild(D);let j;if(Ai(O))j=o;else{const Q=T.getCompleteChild(D);j=null!=Q?".priority"===tF(O)&&Q.getChild(O6(O)).isEmpty()?Q:Q.updateChild(O,o):fi.EMPTY_NODE}_=F.equals(j)?t:bS(t,i.filter.updateChild(g.getNode(),D,j,O,T,u),g.isFullyInitialized(),i.filter.filtersNodes())}}return _}function aj(i,t){return i.eventCache.isCompleteForChild(t)}function lj(i,t,e){return e.foreach((o,s)=>{t=t.updateChild(o,s)}),t}function SF(i,t,e,o,s,l,u,g){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let w,_=t;w=Ai(e)?o:new Qr(null).setTree(e,o);const T=t.serverCache.getNode();return w.children.inorderTraversal((D,O)=>{if(T.hasChild(D)){const j=lj(0,t.serverCache.getNode().getImmediateChild(D),O);_=ok(i,_,new hr(D),j,s,l,u,g)}}),w.children.inorderTraversal((D,O)=>{const F=!t.serverCache.isCompleteForChild(D)&&void 0===O.value;if(!T.hasChild(D)&&!F){const Q=lj(0,t.serverCache.getNode().getImmediateChild(D),O);_=ok(i,_,new hr(D),Q,s,l,u,g)}}),_}class wQ{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const o=this.query_._queryParams,s=new uF(o.getIndex()),l=function NJ(i){return i.loadsAllData()?new uF(i.getIndex()):i.hasLimit()?new PJ(i):new _S(i)}(o);this.processor_=function pQ(i){return{filter:i}}(l);const u=e.serverCache,g=e.eventCache,_=s.updateFullNode(fi.EMPTY_NODE,u.getNode(),null),w=l.updateFullNode(fi.EMPTY_NODE,g.getNode(),null),T=new By(_,u.isFullyInitialized(),s.filtersNodes()),D=new By(w,g.isFullyInitialized(),l.filtersNodes());this.viewCache_=ek(D,T),this.eventGenerator_=new ZJ(this.query_)}get query(){return this.query_}}function EQ(i,t){const e=g0(i.viewCache_);return e&&(i.query._queryParams.loadsAllData()||!Ai(t)&&!e.getImmediateChild(Mi(t)).isEmpty())?e.getChild(t):null}function cj(i){return 0===i.eventRegistrations_.length}function uj(i,t,e){const o=[];if(e){(0,re.hu)(null==t,"A cancel should cancel all event registrations.");const s=i.query._path;i.eventRegistrations_.forEach(l=>{const u=l.createCancelEvent(e,s);u&&o.push(u)})}if(t){let s=[];for(let l=0;l<i.eventRegistrations_.length;++l){const u=i.eventRegistrations_[l];if(u.matches(t)){if(t.hasAnyCallback()){s=s.concat(i.eventRegistrations_.slice(l+1));break}}else s.push(u)}i.eventRegistrations_=s}else i.eventRegistrations_=[];return o}function dj(i,t,e,o){t.type===xd.MERGE&&null!==t.source.queryId&&((0,re.hu)(g0(i.viewCache_),"We should always have a full cache before handling merges"),(0,re.hu)(tk(i.viewCache_),"Missing event cache, even though we have a server cache"));const s=i.viewCache_,l=function gQ(i,t,e,o,s){const l=new dQ;let u,g;if(e.type===xd.OVERWRITE){const w=e;w.source.fromUser?u=xF(i,t,w.path,w.snap,o,s,l):((0,re.hu)(w.source.fromServer,"Unknown source."),g=w.source.tagged||t.serverCache.isFiltered()&&!Ai(w.path),u=ok(i,t,w.path,w.snap,o,s,g,l))}else if(e.type===xd.MERGE){const w=e;w.source.fromUser?u=function _Q(i,t,e,o,s,l,u){let g=t;return o.foreach((_,w)=>{const T=wo(e,_);aj(t,Mi(T))&&(g=xF(i,g,T,w,s,l,u))}),o.foreach((_,w)=>{const T=wo(e,_);aj(t,Mi(T))||(g=xF(i,g,T,w,s,l,u))}),g}(i,t,w.path,w.children,o,s,l):((0,re.hu)(w.source.fromServer,"Unknown source."),g=w.source.tagged||t.serverCache.isFiltered(),u=SF(i,t,w.path,w.children,o,s,g,l))}else if(e.type===xd.ACK_USER_WRITE){const w=e;u=w.revert?function bQ(i,t,e,o,s,l){let u;if(null!=rk(o,e))return t;{const g=new EF(o,t,s),_=t.eventCache.getNode();let w;if(Ai(e)||".priority"===Mi(e)){let T;if(t.serverCache.isFullyInitialized())T=ik(o,g0(t));else{const D=t.serverCache.getNode();(0,re.hu)(D instanceof fi,"serverChildren would be complete if leaf node"),T=CF(o,D)}w=i.filter.updateFullNode(_,T,l)}else{const T=Mi(e);let D=TF(o,T,t.serverCache);null==D&&t.serverCache.isCompleteForChild(T)&&(D=_.getImmediateChild(T)),w=null!=D?i.filter.updateChild(_,T,D,Lr(e),g,l):t.eventCache.getNode().hasChild(T)?i.filter.updateChild(_,T,fi.EMPTY_NODE,Lr(e),g,l):_,w.isEmpty()&&t.serverCache.isFullyInitialized()&&(u=ik(o,g0(t)),u.isLeafNode()&&(w=i.filter.updateFullNode(w,u,l)))}return u=t.serverCache.isFullyInitialized()||null!=rk(o,tr()),bS(t,w,u,i.filter.filtersNodes())}}(i,t,w.path,o,s,l):function yQ(i,t,e,o,s,l,u){if(null!=rk(s,e))return t;const g=t.serverCache.isFiltered(),_=t.serverCache;if(null!=o.value){if(Ai(e)&&_.isFullyInitialized()||_.isCompleteForPath(e))return ok(i,t,e,_.getNode().getChild(e),s,l,g,u);if(Ai(e)){let w=new Qr(null);return _.getNode().forEachChild(zf,(T,D)=>{w=w.set(new hr(T),D)}),SF(i,t,e,w,s,l,g,u)}return t}{let w=new Qr(null);return o.foreach((T,D)=>{const O=wo(e,T);_.isCompleteForPath(O)&&(w=w.set(T,_.getNode().getChild(O)))}),SF(i,t,e,w,s,l,g,u)}}(i,t,w.path,w.affectedTree,o,s,l)}else{if(e.type!==xd.LISTEN_COMPLETE)throw(0,re.g5)("Unknown operation type: "+e.type);u=function vQ(i,t,e,o,s){const l=t.serverCache;return sj(i,Y6(t,l.getNode(),l.isFullyInitialized()||Ai(e),l.isFiltered()),e,o,oj,s)}(i,t,e.path,o,l)}const _=l.getChanges();return function mQ(i,t,e){const o=t.eventCache;if(o.isFullyInitialized()){const s=o.getNode().isLeafNode()||o.getNode().isEmpty(),l=tk(i);(e.length>0||!i.eventCache.isFullyInitialized()||s&&!o.getNode().equals(l)||!o.getNode().getPriority().equals(l.getPriority()))&&e.push(Z6(tk(t)))}}(t,u,_),{viewCache:u,changes:_}}(i.processor_,s,t,e,o);return function fQ(i,t){(0,re.hu)(t.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,re.hu)(t.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}(i.processor_,l.viewCache),(0,re.hu)(l.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=l.viewCache,hj(i,l.changes,l.viewCache.eventCache.getNode(),null)}function hj(i,t,e,o){return function $J(i,t,e,o){const s=[],l=[];return t.forEach(u=>{"child_changed"===u.type&&i.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(function RJ(i,t){return{type:"child_moved",snapshotNode:t,childName:i}}(u.childName,u.snapshotNode))}),vS(i,s,"child_removed",t,o,e),vS(i,s,"child_added",t,o,e),vS(i,s,"child_moved",l,o,e),vS(i,s,"child_changed",t,o,e),vS(i,s,"value",t,o,e),s}(i.eventGenerator_,t,e,o?[o]:i.eventRegistrations_)}let sk,lk;class pj{constructor(){this.views=new Map}}function DF(i,t,e,o){const s=t.source.queryId;if(null!==s){const l=i.views.get(s);return(0,re.hu)(null!=l,"SyncTree gave us an op for an invalid query."),dj(l,t,e,o)}{let l=[];for(const u of i.views.values())l=l.concat(dj(u,t,e,o));return l}}function IF(i,t,e,o,s){const u=i.views.get(t._queryIdentifier);if(!u){let g=ik(e,s?o:null),_=!1;g?_=!0:o instanceof fi?(g=CF(e,o),_=!1):(g=fi.EMPTY_NODE,_=!1);const w=ek(new By(g,_,!1),new By(o,s,!1));return new wQ(t,w)}return u}function fj(i){const t=[];for(const e of i.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function jy(i,t){let e=null;for(const o of i.views.values())e=e||EQ(o,t);return e}function gj(i,t){return t._queryParams.loadsAllData()?ak(i):i.views.get(t._queryIdentifier)}function mj(i,t){return null!=gj(i,t)}function zy(i){return null!=ak(i)}function ak(i){for(const t of i.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let PQ=1;class _j{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Qr(null),this.pendingWriteTree_=function cQ(){return{visibleWrites:qh.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function MF(i,t,e,o,s){return function JJ(i,t,e,o,s){(0,re.hu)(o>i.lastWriteId,"Stacking an older write on top of newer ones"),void 0===s&&(s=!0),i.allWrites.push({path:t,snap:e,writeId:o,visible:s}),s&&(i.visibleWrites=wS(i.visibleWrites,t,e)),i.lastWriteId=o}(i.pendingWriteTree_,t,e,o,s),s?V1(i,new f0({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Gy(i,t,e=!1){const o=function XJ(i,t){for(let e=0;e<i.allWrites.length;e++){const o=i.allWrites[e];if(o.writeId===t)return o}return null}(i.pendingWriteTree_,t);if(function eQ(i,t){const e=i.allWrites.findIndex(g=>g.writeId===t);(0,re.hu)(e>=0,"removeWrite called with nonexistent writeId.");const o=i.allWrites[e];i.allWrites.splice(e,1);let s=o.visible,l=!1,u=i.allWrites.length-1;for(;s&&u>=0;){const g=i.allWrites[u];g.visible&&(u>=e&&tQ(g,o.path)?s=!1:Ed(o.path,g.path)&&(l=!0)),u--}return!!s&&(l?(function nQ(i){i.visibleWrites=ej(i.allWrites,iQ,tr()),i.lastWriteId=i.allWrites.length>0?i.allWrites[i.allWrites.length-1].writeId:-1}(i),!0):(o.snap?i.visibleWrites=J6(i.visibleWrites,o.path):ca(o.children,_=>{i.visibleWrites=J6(i.visibleWrites,wo(o.path,_))}),!0))}(i.pendingWriteTree_,t)){let l=new Qr(null);return null!=o.snap?l=l.set(tr(),!0):ca(o.children,u=>{l=l.set(new hr(u),!0)}),V1(i,new XA(o.path,l,e))}return[]}function CS(i,t,e){return V1(i,new f0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function ck(i,t,e,o){const s=t._path,l=i.syncPointTree_.get(s);let u=[];if(l&&("default"===t._queryIdentifier||mj(l,t))){const g=function kQ(i,t,e,o){const s=t._queryIdentifier,l=[];let u=[];const g=zy(i);if("default"===s)for(const[_,w]of i.views.entries())u=u.concat(uj(w,e,o)),cj(w)&&(i.views.delete(_),w.query._queryParams.loadsAllData()||l.push(w.query));else{const _=i.views.get(s);_&&(u=u.concat(uj(_,e,o)),cj(_)&&(i.views.delete(s),_.query._queryParams.loadsAllData()||l.push(_.query)))}return g&&!zy(i)&&l.push(new(function IQ(){return(0,re.hu)(sk,"Reference.ts has not been loaded"),sk}())(t._repo,t._path)),{removed:l,events:u}}(l,t,e,o);(function MQ(i){return 0===i.views.size})(l)&&(i.syncPointTree_=i.syncPointTree_.remove(s));const _=g.removed;u=g.events;const w=-1!==_.findIndex(D=>D._queryParams.loadsAllData()),T=i.syncPointTree_.findOnPath(s,(D,O)=>zy(O));if(w&&!T){const D=i.syncPointTree_.subtree(s);if(!D.isEmpty()){const O=function jQ(i){return i.fold((t,e,o)=>{if(e&&zy(e))return[ak(e)];{let s=[];return e&&(s=fj(e)),ca(o,(l,u)=>{s=s.concat(u)}),s}})}(D);for(let F=0;F<O.length;++F){const j=O[F],Q=j.query,ae=Tj(i,j);i.listenProvider_.startListening(ES(Q),TS(i,Q),ae.hashFn,ae.onComplete)}}}!T&&_.length>0&&!o&&(w?i.listenProvider_.stopListening(ES(t),null):_.forEach(D=>{const O=i.queryToTagMap.get(dk(D));i.listenProvider_.stopListening(ES(D),O)})),function zQ(i,t){for(let e=0;e<t.length;++e){const o=t[e];if(!o._queryParams.loadsAllData()){const s=dk(o),l=i.queryToTagMap.get(s);i.queryToTagMap.delete(s),i.tagToQueryMap.delete(l)}}}(i,_)}return u}function yj(i,t,e,o){const s=AF(i,o);if(null!=s){const l=kF(s),u=l.path,g=l.queryId,_=Ol(u,t);return OF(i,u,new f0(_F(g),_,e))}return[]}function vj(i,t){const e=i._path;let o=null,s=!1;t.syncPointTree_.foreachOnPath(e,(w,T)=>{const D=Ol(w,e);o=o||jy(T,D),s=s||zy(T)});let u,l=t.syncPointTree_.get(e);l?(s=s||zy(l),o=o||jy(l,tr())):(l=new pj,t.syncPointTree_=t.syncPointTree_.set(e,l)),null!=o?u=!0:(u=!1,o=fi.EMPTY_NODE,t.syncPointTree_.subtree(e).foreachChild((T,D)=>{const O=jy(D,tr());O&&(o=o.updateImmediateChild(T,O))}));const g=mj(l,i);if(!g&&!i._queryParams.loadsAllData()){const w=dk(i);(0,re.hu)(!t.queryToTagMap.has(w),"View does not exist, but we have a tag");const T=function GQ(){return PQ++}();t.queryToTagMap.set(w,T),t.tagToQueryMap.set(T,w)}return{syncPoint:l,writesCache:nk(t.pendingWriteTree_,e),serverCache:o,serverCacheComplete:u,foundAncestorDefaultView:s,viewAlreadyExists:g}}function bj(i,t,e){const{syncPoint:o,serverCache:s,writesCache:l,serverCacheComplete:u,viewAlreadyExists:g,foundAncestorDefaultView:_}=vj(t,i);let w=function AQ(i,t,e,o,s,l){const u=IF(i,t,o,s,l);return i.views.has(t._queryIdentifier)||i.views.set(t._queryIdentifier,u),function xQ(i,t){i.eventRegistrations_.push(t)}(u,e),function SQ(i,t){const e=i.viewCache_.eventCache,o=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Jr,(l,u)=>{o.push(P1(l,u))}),e.isFullyInitialized()&&o.push(Z6(e.getNode())),hj(i,o,e.getNode(),t)}(u,e)}(o,t,e,l,s,u);if(!g&&!_){const T=gj(o,t);w=w.concat(function qQ(i,t,e){const o=t._path,s=TS(i,t),l=Tj(i,e),u=i.listenProvider_.startListening(ES(t),s,l.hashFn,l.onComplete),g=i.syncPointTree_.subtree(o);if(s)(0,re.hu)(!zy(g.value),"If we're adding a query, it shouldn't be shadowed");else{const _=g.fold((w,T,D)=>{if(!Ai(w)&&T&&zy(T))return[ak(T).query];{let O=[];return T&&(O=O.concat(fj(T).map(F=>F.query))),ca(D,(F,j)=>{O=O.concat(j)}),O}});for(let w=0;w<_.length;++w){const T=_[w];i.listenProvider_.stopListening(ES(T),TS(i,T))}}return u}(i,t,T))}return w}function uk(i,t,e){const s=i.pendingWriteTree_,l=i.syncPointTree_.findOnPath(t,(u,g)=>{const w=jy(g,Ol(u,t));if(w)return w});return tj(s,t,l,e,!0)}function V1(i,t){return wj(t,i.syncPointTree_,null,nk(i.pendingWriteTree_,tr()))}function wj(i,t,e,o){if(Ai(i.path))return Cj(i,t,e,o);{const s=t.get(tr());null==e&&null!=s&&(e=jy(s,tr()));let l=[];const u=Mi(i.path),g=i.operationForChild(u),_=t.children.get(u);if(_&&g){const w=e?e.getImmediateChild(u):null,T=ij(o,u);l=l.concat(wj(g,_,w,T))}return s&&(l=l.concat(DF(s,i,o,e))),l}}function Cj(i,t,e,o){const s=t.get(tr());null==e&&null!=s&&(e=jy(s,tr()));let l=[];return t.children.inorderTraversal((u,g)=>{const _=e?e.getImmediateChild(u):null,w=ij(o,u),T=i.operationForChild(u);T&&(l=l.concat(Cj(T,g,_,w)))}),s&&(l=l.concat(DF(s,i,o,e))),l}function Tj(i,t){const e=t.query,o=TS(i,e);return{hashFn:()=>(function CQ(i){return i.viewCache_.serverCache.getNode()}(t)||fi.EMPTY_NODE).hash(),onComplete:s=>{if("ok"===s)return o?function VQ(i,t,e){const o=AF(i,e);if(o){const s=kF(o),l=s.path,u=s.queryId,g=Ol(l,t);return OF(i,l,new yS(_F(u),g))}return[]}(i,e._path,o):function LQ(i,t){return V1(i,new yS({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(i,e._path);{const l=function L9(i,t){let e="Unknown Error";"too_big"===i?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===i?e="Client doesn't have permission to access the desired data.":"unavailable"===i&&(e="The service is unavailable");const o=new Error(i+" at "+t._path.toString()+": "+e);return o.code=i.toUpperCase(),o}(s,e);return ck(i,e,null,l)}}}}function TS(i,t){const e=dk(t);return i.queryToTagMap.get(e)}function dk(i){return i._path.toString()+"$"+i._queryIdentifier}function AF(i,t){return i.tagToQueryMap.get(t)}function kF(i){const t=i.indexOf("$");return(0,re.hu)(-1!==t&&t<i.length-1,"Bad queryKey."),{queryId:i.substr(t+1),path:new hr(i.substr(0,t))}}function OF(i,t,e){const o=i.syncPointTree_.get(t);return(0,re.hu)(o,"Missing sync point for query tag that we're tracking"),DF(o,e,nk(i.pendingWriteTree_,t),null)}function ES(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(function RQ(){return(0,re.hu)(lk,"Reference.ts has not been loaded"),lk}())(i._repo,i._path):i}class RF{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new RF(e)}node(){return this.node_}}class PF{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=wo(this.path_,t);return new PF(this.syncTree_,e)}node(){return uk(this.syncTree_,this.path_)}}const Ej=function(i,t,e){return i&&"object"==typeof i?((0,re.hu)(".sv"in i,"Unexpected leaf node or priority contents"),"string"==typeof i[".sv"]?$Q(i[".sv"],t,e):"object"==typeof i[".sv"]?WQ(i[".sv"],t):void(0,re.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2))):i},$Q=function(i,t,e){if("timestamp"===i)return e.timestamp;(0,re.hu)(!1,"Unexpected server value: "+i)},WQ=function(i,t,e){i.hasOwnProperty("increment")||(0,re.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const o=i.increment;"number"!=typeof o&&(0,re.hu)(!1,"Unexpected increment value: "+o);const s=t.node();if((0,re.hu)(null!==s&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return o;const u=s.getValue();return"number"!=typeof u?o:u+o},xj=function(i,t,e,o){return FF(t,new PF(e,i),o)},NF=function(i,t,e){return FF(i,new RF(t),e)};function FF(i,t,e){const o=i.getPriority().val(),s=Ej(o,t.getImmediateChild(".priority"),e);let l;if(i.isLeafNode()){const u=i,g=Ej(u.getValue(),t,e);return g!==u.getValue()||s!==u.getPriority().val()?new k1(g,No(s)):i}{const u=i;return l=u,s!==u.getPriority().val()&&(l=l.updatePriority(new k1(s))),u.forEachChild(Jr,(g,_)=>{const w=FF(_,t.getImmediateChild(g),e);w!==_&&(l=l.updateImmediateChild(g,w))}),l}}class LF{constructor(t="",e=null,o={children:{},childCount:0}){this.name=t,this.parent=e,this.node=o}}function hk(i,t){let e=t instanceof hr?t:new hr(t),o=i,s=Mi(e);for(;null!==s;){const l=(0,re.DV)(o.node.children,s)||{children:{},childCount:0};o=new LF(s,o,l),e=Lr(e),s=Mi(e)}return o}function _0(i){return i.node.value}function VF(i,t){i.node.value=t,HF(i)}function Sj(i){return i.node.childCount>0}function pk(i,t){ca(i.node.children,(e,o)=>{t(new LF(e,i,o))})}function Dj(i,t,e,o){e&&!o&&t(i),pk(i,s=>{Dj(s,t,!0,o)}),e&&o&&t(i)}function xS(i){return new hr(null===i.parent?i.name:xS(i.parent)+"/"+i.name)}function HF(i){null!==i.parent&&function JQ(i,t,e){const o=function KQ(i){return void 0===_0(i)&&!Sj(i)}(e),s=(0,re.r3)(i.node.children,t);o&&s?(delete i.node.children[t],i.node.childCount--,HF(i)):!o&&!s&&(i.node.children[t]=e.node,i.node.childCount++,HF(i))}(i.parent,i.name,i)}const QQ=/[\[\].#$\/\u0000-\u001F\u007F]/,XQ=/[\[\].#$\u0000-\u001F\u007F]/,BF=10485760,fk=function(i){return"string"==typeof i&&0!==i.length&&!QQ.test(i)},Ij=function(i){return"string"==typeof i&&0!==i.length&&!XQ.test(i)},SS=function(i){return null===i||"string"==typeof i||"number"==typeof i&&!BA(i)||i&&"object"==typeof i&&(0,re.r3)(i,".sv")},Gf=function(i,t,e,o){o&&void 0===t||DS((0,re.gK)(i,"value"),t,e)},DS=function(i,t,e){const o=e instanceof hr?new fJ(e,i):e;if(void 0===t)throw new Error(i+"contains undefined "+h0(o));if("function"==typeof t)throw new Error(i+"contains a function "+h0(o)+" with contents = "+t.toString());if(BA(t))throw new Error(i+"contains "+t.toString()+" "+h0(o));if("string"==typeof t&&t.length>BF/3&&(0,re.ug)(t)>BF)throw new Error(i+"contains a string greater than "+BF+" utf8 bytes "+h0(o)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let s=!1,l=!1;if(ca(t,(u,g)=>{if(".value"===u)s=!0;else if(".priority"!==u&&".sv"!==u&&(l=!0,!fk(u)))throw new Error(i+" contains an invalid key ("+u+") "+h0(o)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function gJ(i,t){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=(0,re.ug)(t),R6(i)})(o,u),DS(i,g,o),function mJ(i){const t=i.parts_.pop();i.byteLength_-=(0,re.ug)(t),i.parts_.length>0&&(i.byteLength_-=1)}(o)}),s&&l)throw new Error(i+' contains ".value" child '+h0(o)+" in addition to actual children.")}},Mj=function(i,t,e,o){if(o&&void 0===t)return;const s=(0,re.gK)(i,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(s+" must be an object containing the children to replace.");const l=[];ca(t,(u,g)=>{const _=new hr(u);if(DS(s,g,wo(e,_)),".priority"===tF(_)&&!SS(g))throw new Error(s+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(_)}),function(i,t){let e,o;for(e=0;e<t.length;e++){o=t[e];const l=dS(o);for(let u=0;u<l.length;u++)if((".priority"!==l[u]||u!==l.length-1)&&!fk(l[u]))throw new Error(i+"contains an invalid key ("+l[u]+") in path "+o.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(pJ);let s=null;for(e=0;e<t.length;e++){if(o=t[e],null!==s&&Ed(s,o))throw new Error(i+"contains a path "+s.toString()+" that is ancestor of another path "+o.toString());s=o}}(s,l)},UF=function(i,t,e){if(!e||void 0!==t){if(BA(t))throw new Error((0,re.gK)(i,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!SS(t))throw new Error((0,re.gK)(i,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},IS=function(i,t,e,o){if(!(o&&void 0===e||fk(e)))throw new Error((0,re.gK)(i,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},MS=function(i,t,e,o){if(!(o&&void 0===e||Ij(e)))throw new Error((0,re.gK)(i,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Sd=function(i,t){if(".info"===Mi(t))throw new Error(i+" failed = Can't modify data under /.info/")},Aj=function(i,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!fk(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Ij(i)}(e))throw new Error((0,re.gK)(i,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class iX{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function gk(i,t){let e=null;for(let o=0;o<t.length;o++){const s=t[o],l=s.getPath();null!==e&&!nF(l,e.path)&&(i.eventLists_.push(e),e=null),null===e&&(e={events:[],path:l}),e.events.push(s)}e&&i.eventLists_.push(e)}function kj(i,t,e){gk(i,e),Oj(i,o=>nF(o,t))}function Dd(i,t,e){gk(i,e),Oj(i,o=>Ed(o,t)||Ed(t,o))}function Oj(i,t){i.recursionDepth_++;let e=!0;for(let o=0;o<i.eventLists_.length;o++){const s=i.eventLists_[o];s&&(t(s.path)?(rX(i.eventLists_[o]),i.eventLists_[o]=null):e=!1)}e&&(i.eventLists_=[]),i.recursionDepth_--}function rX(i){for(let t=0;t<i.events.length;t++){const e=i.events[t];if(null!==e){i.events[t]=null;const o=e.getEventRunner();u0&&la("event: "+e.toString()),M1(o)}}}const Rj="repo_interrupt";class sX{constructor(t,e,o,s){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=o,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new iX,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=QA(),this.transactionQueueTree_=new LF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Pj(i){const e=i.infoData_.getNode(new hr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function AS(i){return function(i){return(i=i||{}).timestamp=i.timestamp||(new Date).getTime(),i}({timestamp:Pj(i)})}function Nj(i,t,e,o,s){i.dataUpdateCount++;const l=new hr(t);e=i.interceptServerDataCallback_?i.interceptServerDataCallback_(t,e):e;let u=[];if(s)if(o){const _=(0,re.UI)(e,w=>No(w));u=function BQ(i,t,e,o){const s=AF(i,o);if(s){const l=kF(s),u=l.path,g=l.queryId,_=Ol(u,t),w=Qr.fromObject(e);return OF(i,u,new F1(_F(g),_,w))}return[]}(i.serverSyncTree_,l,_,s)}else{const _=No(e);u=yj(i.serverSyncTree_,l,_,s)}else if(o){const _=(0,re.UI)(e,w=>No(w));u=function FQ(i,t,e){const o=Qr.fromObject(e);return V1(i,new F1({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,o))}(i.serverSyncTree_,l,_)}else{const _=No(e);u=CS(i.serverSyncTree_,l,_)}let g=l;u.length>0&&(g=H1(i,l)),Dd(i.eventQueue_,g,u)}function Fj(i,t){jF(i,"connected",t),!1===t&&function dX(i){y0(i,"onDisconnectEvents");const t=AS(i),e=QA();fF(i.onDisconnect_,tr(),(s,l)=>{const u=xj(s,l,i.serverSyncTree_,t);N1(e,s,u)});let o=[];fF(e,tr(),(s,l)=>{o=o.concat(CS(i.serverSyncTree_,s,l));const u=ZF(i,s);H1(i,u)}),i.onDisconnect_=QA(),Dd(i.eventQueue_,tr(),o)}(i)}function jF(i,t,e){const o=new hr("/.info/"+t),s=No(e);i.infoData_.updateSnapshot(o,s);const l=CS(i.infoSyncTree_,o,s);Dd(i.eventQueue_,o,l)}function mk(i){return i.nextWriteId_++}function cX(i,t){const e=function UQ(i,t){const e=t._path;let o=null;i.syncPointTree_.foreachOnPath(e,(w,T)=>{const D=Ol(w,e);o=o||jy(T,D)});let s=i.syncPointTree_.get(e);s?o=o||jy(s,tr()):(s=new pj,i.syncPointTree_=i.syncPointTree_.set(e,s));const l=null!=o,u=l?new By(o,!0,!1):null;return function TQ(i){return tk(i.viewCache_)}(IF(s,t,nk(i.pendingWriteTree_,t._path),l?u.getNode():fi.EMPTY_NODE,l))}(i.serverSyncTree_,t);return null!=e?Promise.resolve(e):i.server_.get(t).then(o=>{const s=No(o).withIndex(t._queryParams.getIndex());if(t._queryParams.loadsAllData())CS(i.serverSyncTree_,t._path,s);else{const u=function HQ(i,t){const{syncPoint:e,serverCache:o,writesCache:s,serverCacheComplete:l}=vj(t,i),u=IF(e,t,s,o,l);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,u),t._queryParams.loadsAllData()?null:TS(i,t)}(i.serverSyncTree_,t);yj(i.serverSyncTree_,t._path,s,u)}return ck(i.serverSyncTree_,t,null).length>0&&y0(i,"unexpected cancel events in repoGetValue"),s},o=>(y0(i,"get for query "+(0,re.Pz)(t)+" failed: "+o),Promise.reject(new Error(o))))}function zF(i,t,e,o,s){y0(i,"set",{path:t.toString(),value:e,priority:o});const l=AS(i),u=No(e,o),g=uk(i.serverSyncTree_,t),_=NF(u,g,l),w=mk(i),T=MF(i.serverSyncTree_,t,_,w,!0);gk(i.eventQueue_,T),i.server_.put(t.toString(),u.val(!0),(O,F)=>{const j="ok"===O;j||Qa("set at "+t+" failed: "+O);const Q=Gy(i.serverSyncTree_,w,!j);Dd(i.eventQueue_,t,Q),qy(0,s,O,F)});const D=ZF(i,t);H1(i,D),Dd(i.eventQueue_,D,[])}function hX(i,t,e){i.server_.onDisconnectCancel(t.toString(),(o,s)=>{"ok"===o&&pF(i.onDisconnect_,t),qy(0,e,o,s)})}function Lj(i,t,e,o){const s=No(e);i.server_.onDisconnectPut(t.toString(),s.val(!0),(l,u)=>{"ok"===l&&N1(i.onDisconnect_,t,s),qy(0,o,l,u)})}function GF(i,t,e){let o;o=".info"===Mi(t._path)?ck(i.infoSyncTree_,t,e):ck(i.serverSyncTree_,t,e),kj(i.eventQueue_,t._path,o)}function Vj(i){i.persistentConnection_&&i.persistentConnection_.interrupt(Rj)}function y0(i,...t){let e="";i.persistentConnection_&&(e=i.persistentConnection_.id+":"),la(e,...t)}function qy(i,t,e,o){t&&M1(()=>{if("ok"===e)t(null);else{const s=(e||"error").toUpperCase();let l=s;o&&(l+=": "+o);const u=new Error(l);u.code=s,t(u)}})}function qF(i,t,e){return uk(i.serverSyncTree_,t,e)||fi.EMPTY_NODE}function _k(i,t=i.transactionQueueTree_){if(t||yk(i,t),_0(t)){const e=Bj(i,t);(0,re.hu)(e.length>0,"Sending zero length transaction queue"),e.every(s=>0===s.status)&&function yX(i,t,e){const o=e.map(w=>w.currentWriteId),s=qF(i,t,o);let l=s;const u=s.hash();for(let w=0;w<e.length;w++){const T=e[w];(0,re.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const D=Ol(t,T.path);l=l.updateChild(D,T.currentOutputSnapshotRaw)}const g=l.val(!0),_=t;i.server_.put(_.toString(),g,w=>{y0(i,"transaction put response",{path:_.toString(),status:w});let T=[];if("ok"===w){const D=[];for(let O=0;O<e.length;O++)e[O].status=2,T=T.concat(Gy(i.serverSyncTree_,e[O].currentWriteId)),e[O].onComplete&&D.push(()=>e[O].onComplete(null,!0,e[O].currentOutputSnapshotResolved)),e[O].unwatcher();yk(i,hk(i.transactionQueueTree_,t)),_k(i,i.transactionQueueTree_),Dd(i.eventQueue_,t,T);for(let O=0;O<D.length;O++)M1(D[O])}else{if("datastale"===w)for(let D=0;D<e.length;D++)e[D].status=3===e[D].status?4:0;else{Qa("transaction at "+_.toString()+" failed: "+w);for(let D=0;D<e.length;D++)e[D].status=4,e[D].abortReason=w}H1(i,t)}},u)}(i,xS(t),e)}else Sj(t)&&pk(t,e=>{_k(i,e)})}function H1(i,t){const e=Hj(i,t),o=xS(e);return function vX(i,t,e){if(0===t.length)return;const o=[];let s=[];const u=t.filter(g=>0===g.status).map(g=>g.currentWriteId);for(let g=0;g<t.length;g++){const _=t[g],w=Ol(e,_.path);let D,T=!1;if((0,re.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)T=!0,D=_.abortReason,s=s.concat(Gy(i.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)T=!0,D="maxretry",s=s.concat(Gy(i.serverSyncTree_,_.currentWriteId,!0));else{const O=qF(i,_.path,u);_.currentInputSnapshot=O;const F=t[g].update(O.val());if(void 0!==F){DS("transaction failed: Data returned ",F,_.path);let j=No(F);"object"==typeof F&&null!=F&&(0,re.r3)(F,".priority")||(j=j.updatePriority(O.getPriority()));const ae=_.currentWriteId,Oe=AS(i),We=NF(j,O,Oe);_.currentOutputSnapshotRaw=j,_.currentOutputSnapshotResolved=We,_.currentWriteId=mk(i),u.splice(u.indexOf(ae),1),s=s.concat(MF(i.serverSyncTree_,_.path,We,_.currentWriteId,_.applyLocally)),s=s.concat(Gy(i.serverSyncTree_,ae,!0))}else T=!0,D="nodata",s=s.concat(Gy(i.serverSyncTree_,_.currentWriteId,!0))}Dd(i.eventQueue_,e,s),s=[],T&&(t[g].status=2,setTimeout(t[g].unwatcher,Math.floor(0)),t[g].onComplete&&o.push("nodata"===D?()=>t[g].onComplete(null,!1,t[g].currentInputSnapshot):()=>t[g].onComplete(new Error(D),!1,null)))}yk(i,i.transactionQueueTree_);for(let g=0;g<o.length;g++)M1(o[g]);_k(i,i.transactionQueueTree_)}(i,Bj(i,e),o),o}function Hj(i,t){let e,o=i.transactionQueueTree_;for(e=Mi(t);null!==e&&void 0===_0(o);)o=hk(o,e),e=Mi(t=Lr(t));return o}function Bj(i,t){const e=[];return Uj(i,t,e),e.sort((o,s)=>o.order-s.order),e}function Uj(i,t,e){const o=_0(t);if(o)for(let s=0;s<o.length;s++)e.push(o[s]);pk(t,s=>{Uj(i,s,e)})}function yk(i,t){const e=_0(t);if(e){let o=0;for(let s=0;s<e.length;s++)2!==e[s].status&&(e[o]=e[s],o++);e.length=o,VF(t,e.length>0?e:void 0)}pk(t,o=>{yk(i,o)})}function ZF(i,t){const e=xS(Hj(i,t)),o=hk(i.transactionQueueTree_,t);return function YQ(i,t,e){let o=e?i:i.parent;for(;null!==o;){if(t(o))return!0;o=o.parent}}(o,s=>{$F(i,s)}),$F(i,o),Dj(o,s=>{$F(i,s)}),e}function $F(i,t){const e=_0(t);if(e){const o=[];let s=[],l=-1;for(let u=0;u<e.length;u++)3===e[u].status||(1===e[u].status?((0,re.hu)(l===u-1,"All SENT items should be at beginning of queue."),l=u,e[u].status=3,e[u].abortReason="set"):((0,re.hu)(0===e[u].status,"Unexpected transaction status in abort"),e[u].unwatcher(),s=s.concat(Gy(i.serverSyncTree_,e[u].currentWriteId,!0)),e[u].onComplete&&o.push(e[u].onComplete.bind(null,new Error("set"),!1,null))));-1===l?VF(t,void 0):e.length=l+1,Dd(i.eventQueue_,xS(t),s);for(let u=0;u<o.length;u++)M1(o[u])}}const WF=function(i,t){const e=CX(i),o=e.namespace;return"firebase.com"===e.domain&&Uf(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||"undefined"===o)&&"localhost"!==e.domain&&Uf("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Qa("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new KN(e.host,e.secure,o,"ws"===e.scheme||"wss"===e.scheme,t,"",o!==e.subdomain),path:new hr(e.pathString)}},CX=function(i){let t="",e="",o="",s="",l="",u=!0,g="https",_=443;if("string"==typeof i){let w=i.indexOf("//");w>=0&&(g=i.substring(0,w-1),i=i.substring(w+2));let T=i.indexOf("/");-1===T&&(T=i.length);let D=i.indexOf("?");-1===D&&(D=i.length),t=i.substring(0,Math.min(T,D)),T<D&&(s=function bX(i){let t="";const e=i.split("/");for(let o=0;o<e.length;o++)if(e[o].length>0){let s=e[o];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}(i.substring(T,D)));const O=function wX(i){const t={};"?"===i.charAt(0)&&(i=i.substring(1));for(const e of i.split("&")){if(0===e.length)continue;const o=e.split("=");2===o.length?t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):Qa(`Invalid query segment '${e}' in query '${i}'`)}return t}(i.substring(Math.min(i.length,D)));w=t.indexOf(":"),w>=0?(u="https"===g||"wss"===g,_=parseInt(t.substring(w+1),10)):w=t.length;const F=t.slice(0,w);if("localhost"===F.toLowerCase())e="localhost";else if(F.split(".").length<=2)e=F;else{const j=t.indexOf(".");o=t.substring(0,j).toLowerCase(),e=t.substring(j+1),l=o}"ns"in O&&(l=O.ns)}return{host:t,port:_,domain:e,subdomain:o,secure:u,scheme:g,pathString:s,namespace:l}};class jj{constructor(t,e,o,s){this.eventType=t,this.eventRegistration=e,this.snapshot=o,this.prevName=s}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,re.Pz)(this.snapshot.exportVal())}}class zj{constructor(t,e,o){this.eventRegistration=t,this.error=e,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Gj{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,re.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class qj{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new re.BH;return hX(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Sd("OnDisconnect.remove",this._path);const t=new re.BH;return Lj(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Sd("OnDisconnect.set",this._path),Gf("OnDisconnect.set",t,this._path,!1);const e=new re.BH;return Lj(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Sd("OnDisconnect.setWithPriority",this._path),Gf("OnDisconnect.setWithPriority",t,this._path,!1),UF("OnDisconnect.setWithPriority",e,!1);const o=new re.BH;return function pX(i,t,e,o,s){const l=No(e,o);i.server_.onDisconnectPut(t.toString(),l.val(!0),(u,g)=>{"ok"===u&&N1(i.onDisconnect_,t,l),qy(0,s,u,g)})}(this._repo,this._path,t,e,o.wrapCallback(()=>{})),o.promise}update(t){Sd("OnDisconnect.update",this._path),Mj("OnDisconnect.update",t,this._path,!1);const e=new re.BH;return function fX(i,t,e,o){if((0,re.xb)(e))return la("onDisconnect().update() called with empty data.  Don't do anything."),void qy(0,o,"ok",void 0);i.server_.onDisconnectMerge(t.toString(),e,(s,l)=>{"ok"===s&&ca(e,(u,g)=>{const _=No(g);N1(i.onDisconnect_,wo(t,u),_)}),qy(0,o,s,l)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class dc{constructor(t,e,o,s){this._repo=t,this._path=e,this._queryParams=o,this._orderByCalled=s}get key(){return Ai(this._path)?null:tF(this._path)}get ref(){return new Id(this._repo,this._path)}get _queryIdentifier(){const t=W6(this._queryParams),e=ZN(t);return"{}"===e?"default":e}get _queryObject(){return W6(this._queryParams)}isEqual(t){if(!((t=(0,re.m9)(t))instanceof dc))return!1;const e=this._repo===t._repo,o=nF(this._path,t._path);return e&&o&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function hJ(i){let t="";for(let e=i.pieceNum_;e<i.pieces_.length;e++)""!==i.pieces_[e]&&(t+="/"+encodeURIComponent(String(i.pieces_[e])));return t||"/"}(this._path)}}function vk(i,t){if(!0===i._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Zy(i){let t=null,e=null;if(i.hasStart()&&(t=i.getIndexStartValue()),i.hasEnd()&&(e=i.getIndexEndValue()),i.getIndex()===zf){const o="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(i.hasStart()){if(i.getIndexStartName()!==jm)throw new Error(o);if("string"!=typeof t)throw new Error(s)}if(i.hasEnd()){if(i.getIndexEndName()!==jf)throw new Error(o);if("string"!=typeof e)throw new Error(s)}}else if(i.getIndex()===Jr){if(null!=t&&!SS(t)||null!=e&&!SS(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,re.hu)(i.getIndex()instanceof aF||i.getIndex()===lF,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function bk(i){if(i.hasStart()&&i.hasEnd()&&i.hasLimit()&&!i.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Id extends dc{constructor(t,e){super(t,e,new KA,!1)}get parent(){const t=O6(this._path);return null===t?null:new Id(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class v0{constructor(t,e,o){this._node=t,this.ref=e,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new hr(t),o=b0(this.ref,t);return new v0(this._node.getChild(e),o,Jr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(o,s)=>t(new v0(s,b0(this.ref,o),Jr)))}hasChild(t){const e=new hr(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Zj(i,t){return(i=(0,re.m9)(i))._checkNotDeleted("ref"),void 0!==t?b0(i._root,t):i._root}function $j(i,t){(i=(0,re.m9)(i))._checkNotDeleted("refFromURL");const e=WF(t,i._repo.repoInfo_.nodeAdmin);Aj("refFromURL",e);const o=e.repoInfo;return!i._repo.repoInfo_.isCustomHost()&&o.host!==i._repo.repoInfo_.host&&Uf("refFromURL: Host name does not match the current database: (found "+o.host+" but expected "+i._repo.repoInfo_.host+")"),Zj(i,e.path.toString())}function b0(i,t){return null===Mi((i=(0,re.m9)(i))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),MS("child","path",e,!1)):MS("child","path",t,!1),new Id(i._repo,wo(i._path,t));var e}function KF(i,t){i=(0,re.m9)(i),Sd("set",i._path),Gf("set",t,i._path,!1);const e=new re.BH;return zF(i._repo,i._path,t,null,e.wrapCallback(()=>{})),e.promise}function DX(i,t){Mj("update",t,i._path,!1);const e=new re.BH;return function uX(i,t,e,o){y0(i,"update",{path:t.toString(),value:e});let s=!0;const l=AS(i),u={};if(ca(e,(g,_)=>{s=!1,u[g]=xj(wo(t,g),No(_),i.serverSyncTree_,l)}),s)la("update() called with empty data.  Don't do anything."),qy(0,o,"ok",void 0);else{const g=mk(i),_=function NQ(i,t,e,o){!function QJ(i,t,e,o){(0,re.hu)(o>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:t,children:e,writeId:o,visible:!0}),i.visibleWrites=vF(i.visibleWrites,t,e),i.lastWriteId=o}(i.pendingWriteTree_,t,e,o);const s=Qr.fromObject(e);return V1(i,new F1({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,s))}(i.serverSyncTree_,t,u,g);gk(i.eventQueue_,_),i.server_.merge(t.toString(),e,(w,T)=>{const D="ok"===w;D||Qa("update at "+t+" failed: "+w);const O=Gy(i.serverSyncTree_,g,!D),F=O.length>0?H1(i,t):t;Dd(i.eventQueue_,F,O),qy(0,o,w,T)}),ca(e,w=>{const T=ZF(i,wo(t,w));H1(i,T)}),Dd(i.eventQueue_,t,[])}}(i._repo,i._path,t,e.wrapCallback(()=>{})),e.promise}class wk{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const o=e._queryParams.getIndex();return new jj("value",this,new v0(t.snapshotNode,new Id(e._repo,e._path),o))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new zj(this,t,e):null}matches(t){return t instanceof wk&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ck{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new zj(this,t,e):null}createEvent(t,e){(0,re.hu)(null!=t.childName,"Child events should have a childName.");const o=b0(new Id(e._repo,e._path),t.childName),s=e._queryParams.getIndex();return new jj(t.type,this,new v0(t.snapshotNode,o,s),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Ck&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function kS(i,t,e,o,s){let l;if("object"==typeof o&&(l=void 0,s=o),"function"==typeof o&&(l=o),s&&s.onlyOnce){const _=e,w=(T,D)=>{GF(i._repo,i,g),_(T,D)};w.userCallback=e.userCallback,w.context=e.context,e=w}const u=new Gj(e,l||void 0),g="value"===t?new wk(u):new Ck(t,u);return function gX(i,t,e){let o;o=".info"===Mi(t._path)?bj(i.infoSyncTree_,t,e):bj(i.serverSyncTree_,t,e),kj(i.eventQueue_,t._path,o)}(i._repo,i,g),()=>GF(i._repo,i,g)}function YF(i,t,e,o){return kS(i,"value",t,e,o)}function Wj(i,t,e,o){return kS(i,"child_added",t,e,o)}function Kj(i,t,e,o){return kS(i,"child_changed",t,e,o)}function Yj(i,t,e,o){return kS(i,"child_moved",t,e,o)}function Jj(i,t,e,o){return kS(i,"child_removed",t,e,o)}function Qj(i,t,e){let o=null;const s=e?new Gj(e):null;"value"===t?o=new wk(s):t&&(o=new Ck(t,s)),GF(i._repo,i,o)}class Zh{}class Xj extends Zh{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Gf("endAt",this._value,t._path,!0);const e=hF(t._queryParams,this._value,this._key);if(bk(e),Zy(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new dc(t._repo,t._path,e,t._orderByCalled)}}class AX extends Zh{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Gf("endBefore",this._value,t._path,!1);const e=function HJ(i,t,e){let o,s;return i.index_===zf?("string"==typeof t&&(t=q6(t)),s=hF(i,t,e)):(o=null==e?jm:q6(e),s=hF(i,t,o)),s.endBeforeSet_=!0,s}(t._queryParams,this._value,this._key);if(bk(e),Zy(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new dc(t._repo,t._path,e,t._orderByCalled)}}class e4 extends Zh{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Gf("startAt",this._value,t._path,!0);const e=dF(t._queryParams,this._value,this._key);if(bk(e),Zy(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new dc(t._repo,t._path,e,t._orderByCalled)}}class RX extends Zh{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Gf("startAfter",this._value,t._path,!1);const e=function VJ(i,t,e){let o;if(i.index_===zf)"string"==typeof t&&(t=G6(t)),o=dF(i,t,e);else{let s;s=null==e?jf:G6(e),o=dF(i,t,s)}return o.startAfterSet_=!0,o}(t._queryParams,this._value,this._key);if(bk(e),Zy(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new dc(t._repo,t._path,e,t._orderByCalled)}}class NX extends Zh{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new dc(t._repo,t._path,function FJ(i,t){const e=i.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class LX extends Zh{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new dc(t._repo,t._path,function LJ(i,t){const e=i.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class HX extends Zh{constructor(t){super(),this._path=t}_apply(t){vk(t,"orderByChild");const e=new hr(this._path);if(Ai(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const o=new aF(e),s=YA(t._queryParams,o);return Zy(s),new dc(t._repo,t._path,s,!0)}}class UX extends Zh{_apply(t){vk(t,"orderByKey");const e=YA(t._queryParams,zf);return Zy(e),new dc(t._repo,t._path,e,!0)}}class zX extends Zh{_apply(t){vk(t,"orderByPriority");const e=YA(t._queryParams,Jr);return Zy(e),new dc(t._repo,t._path,e,!0)}}class qX extends Zh{_apply(t){vk(t,"orderByValue");const e=YA(t._queryParams,lF);return Zy(e),new dc(t._repo,t._path,e,!0)}}class $X extends Zh{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Gf("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Xj(this._value,this._key)._apply(new e4(this._value,this._key)._apply(t))}}function $h(i,...t){let e=(0,re.m9)(i);for(const o of t)e=o._apply(e);return e}(function DQ(i){(0,re.hu)(!sk,"__referenceConstructor has already been defined"),sk=i})(Id),function OQ(i){(0,re.hu)(!lk,"__referenceConstructor has already been defined"),lk=i}(Id);const JF={};function n4(i,t,e,o,s){let l=o||i.options.databaseURL;void 0===l&&(i.options.projectId||Uf("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),la("Using default host for project ",i.options.projectId),l=`${i.options.projectId}-default-rtdb.firebaseio.com`);let _,w,u=WF(l,s),g=u.repoInfo;typeof process<"u"&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,l=`http://${w}?ns=${g.namespace}`,u=WF(l,s),g=u.repoInfo):_=!u.repoInfo.secure;const T=s&&_?new uS(uS.OWNER):new U9(i.name,i.options,t);Aj("Invalid Firebase Database URL",u),Ai(u.path)||Uf("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function QX(i,t,e,o){let s=JF[t.name];s||(s={},JF[t.name]=s);let l=s[i.toURLString()];return l&&Uf("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new sX(i,false,e,o),s[i.toURLString()]=l,l}(g,i,T,new B9(i.name,e));return new eee(D,i)}class eee{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function aX(i,t,e){if(i.stats_=QN(i.repoInfo_),i.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)i.server_=new JA(i.repoInfo_,(o,s,l,u)=>{Nj(i,o,s,l,u)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>Fj(i,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,re.Pz)(e)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}i.persistentConnection_=new p0(i.repoInfo_,t,(o,s,l,u)=>{Nj(i,o,s,l,u)},o=>{Fj(i,o)},o=>{!function lX(i,t){ca(t,(e,o)=>{jF(i,e,o)})}(i,o)},i.authTokenProvider_,i.appCheckProvider_,e),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(o=>{i.server_.refreshAuthToken(o)}),i.appCheckProvider_.addTokenChangeListener(o=>{i.server_.refreshAppCheckToken(o.token)}),i.statsReporter_=function G9(i,t){const e=i.toString();return JN[e]||(JN[e]=t()),JN[e]}(i.repoInfo_,()=>new qJ(i.stats_,i.server_)),i.infoData_=new BJ,i.infoSyncTree_=new _j({startListening:(o,s,l,u)=>{let g=[];const _=i.infoData_.getNode(o._path);return _.isEmpty()||(g=CS(i.infoSyncTree_,o._path,_),setTimeout(()=>{u("ok")},0)),g},stopListening:()=>{}}),jF(i,"connected",!1),i.serverSyncTree_=new _j({startListening:(o,s,l,u)=>(i.server_.listen(o,l,s,(g,_)=>{const w=u(g,_);Dd(i.eventQueue_,o._path,w)}),[]),stopListening:(o,s)=>{i.server_.unlisten(o,s)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Id(this._repo,tr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function JX(i,t){const e=JF[t];(!e||e[i.key]!==i)&&Uf(`Database ${t}(${i.repoInfo_}) has already been deleted.`),Vj(i),delete e[i.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Uf("Cannot call "+t+" on a deleted database.")}}function r4(){b6.IS_TRANSPORT_INITIALIZED&&Qa("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function tee(){r4(),Vy.forceDisallow()}function nee(){r4(),A1.forceDisallow(),Vy.forceAllow()}function iee(i=(0,oi.getApp)(),t){return(0,oi._getProvider)(i,"database").getImmediate({identifier:t})}function aee(i,t){XU(i,t)}const cee={".sv":"timestamp"};class hee{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}p0.prototype.simpleListen=function(i,t){this.sendRequest("q",{p:i},t)},p0.prototype.echo=function(i,t){this.sendRequest("echo",{d:i},t)},function lee(i){WU(oi.SDK_VERSION),(0,oi._registerComponent)(new po.wA("database",(t,{instanceIdentifier:e})=>n4(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,oi.registerVersion)(ZU,"0.13.3",i),(0,oi.registerVersion)(ZU,"0.13.3","esm2017")}();const mee=new Ys.Yd("@firebase/database-compat"),o4=function(i){mee.warn("FIREBASE WARNING: "+i)};class vee{constructor(t){this._delegate=t}cancel(t){(0,re.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,re.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),o=>t(o)),e}remove(t){(0,re.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,re.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),o=>t(o)),e}set(t,e){(0,re.Dv)("OnDisconnect.set",1,2,arguments.length),(0,re.Wj)("OnDisconnect.set","onComplete",e,!0);const o=this._delegate.set(t);return e&&o.then(()=>e(null),s=>e(s)),o}setWithPriority(t,e,o){(0,re.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,re.Wj)("OnDisconnect.setWithPriority","onComplete",o,!0);const s=this._delegate.setWithPriority(t,e);return o&&s.then(()=>o(null),l=>o(l)),s}update(t,e){if((0,re.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const s={};for(let l=0;l<t.length;++l)s[""+l]=t[l];t=s,o4("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,re.Wj)("OnDisconnect.update","onComplete",e,!0);const o=this._delegate.update(t);return e&&o.then(()=>e(null),s=>e(s)),o}}class bee{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,re.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class $y{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,re.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,re.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,re.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,re.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,re.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),MS("DataSnapshot.child","path",t,!1),new $y(this._database,this._delegate.child(t))}hasChild(t){return(0,re.Dv)("DataSnapshot.hasChild",1,1,arguments.length),MS("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,re.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,re.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,re.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new $y(this._database,e)))}hasChildren(){return(0,re.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,re.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,re.Dv)("DataSnapshot.ref",0,0,arguments.length),new uu(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Da{constructor(t,e){this.database=t,this._delegate=e}on(t,e,o,s){var l;(0,re.Dv)("Query.on",2,4,arguments.length),(0,re.Wj)("Query.on","callback",e,!1);const u=Da.getCancelAndContextArgs_("Query.on",o,s),g=(w,T)=>{e.call(u.context,new $y(this.database,w),T)};g.userCallback=e,g.context=u.context;const _=null===(l=u.cancel)||void 0===l?void 0:l.bind(u.context);switch(t){case"value":return YF(this._delegate,g,_),e;case"child_added":return Wj(this._delegate,g,_),e;case"child_removed":return Jj(this._delegate,g,_),e;case"child_changed":return Kj(this._delegate,g,_),e;case"child_moved":return Yj(this._delegate,g,_),e;default:throw new Error((0,re.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,o){if((0,re.Dv)("Query.off",0,3,arguments.length),function(i,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,re.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,re.Wj)("Query.off","callback",e,!0),(0,re.lb)("Query.off","context",o,!0),e){const s=()=>{};s.userCallback=e,s.context=o,Qj(this._delegate,t,s)}else Qj(this._delegate,t)}get(){return function IX(i){return cX((i=(0,re.m9)(i))._repo,i).then(t=>new v0(t,new Id(i._repo,i._path),i._queryParams.getIndex()))}(this._delegate).then(t=>new $y(this.database,t))}once(t,e,o,s){(0,re.Dv)("Query.once",1,4,arguments.length),(0,re.Wj)("Query.once","callback",e,!0);const l=Da.getCancelAndContextArgs_("Query.once",o,s),u=new re.BH,g=(w,T)=>{const D=new $y(this.database,w);e&&e.call(l.context,D,T),u.resolve(D)};g.userCallback=e,g.context=l.context;const _=w=>{l.cancel&&l.cancel.call(l.context,w),u.reject(w)};switch(t){case"value":YF(this._delegate,g,_,{onlyOnce:!0});break;case"child_added":Wj(this._delegate,g,_,{onlyOnce:!0});break;case"child_removed":Jj(this._delegate,g,_,{onlyOnce:!0});break;case"child_changed":Kj(this._delegate,g,_,{onlyOnce:!0});break;case"child_moved":Yj(this._delegate,g,_,{onlyOnce:!0});break;default:throw new Error((0,re.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(t){return(0,re.Dv)("Query.limitToFirst",1,1,arguments.length),new Da(this.database,$h(this._delegate,function FX(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new NX(i)}(t)))}limitToLast(t){return(0,re.Dv)("Query.limitToLast",1,1,arguments.length),new Da(this.database,$h(this._delegate,function VX(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new LX(i)}(t)))}orderByChild(t){return(0,re.Dv)("Query.orderByChild",1,1,arguments.length),new Da(this.database,$h(this._delegate,function BX(i){if("$key"===i)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===i)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===i)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return MS("orderByChild","path",i,!1),new HX(i)}(t)))}orderByKey(){return(0,re.Dv)("Query.orderByKey",0,0,arguments.length),new Da(this.database,$h(this._delegate,function jX(){return new UX}()))}orderByPriority(){return(0,re.Dv)("Query.orderByPriority",0,0,arguments.length),new Da(this.database,$h(this._delegate,function GX(){return new zX}()))}orderByValue(){return(0,re.Dv)("Query.orderByValue",0,0,arguments.length),new Da(this.database,$h(this._delegate,function ZX(){return new qX}()))}startAt(t=null,e){return(0,re.Dv)("Query.startAt",0,2,arguments.length),new Da(this.database,$h(this._delegate,function OX(i=null,t){return IS("startAt","key",t,!0),new e4(i,t)}(t,e)))}startAfter(t=null,e){return(0,re.Dv)("Query.startAfter",0,2,arguments.length),new Da(this.database,$h(this._delegate,function PX(i,t){return IS("startAfter","key",t,!0),new RX(i,t)}(t,e)))}endAt(t=null,e){return(0,re.Dv)("Query.endAt",0,2,arguments.length),new Da(this.database,$h(this._delegate,function MX(i,t){return IS("endAt","key",t,!0),new Xj(i,t)}(t,e)))}endBefore(t=null,e){return(0,re.Dv)("Query.endBefore",0,2,arguments.length),new Da(this.database,$h(this._delegate,function kX(i,t){return IS("endBefore","key",t,!0),new AX(i,t)}(t,e)))}equalTo(t,e){return(0,re.Dv)("Query.equalTo",1,2,arguments.length),new Da(this.database,$h(this._delegate,function WX(i,t){return IS("equalTo","key",t,!0),new $X(i,t)}(t,e)))}toString(){return(0,re.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,re.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,re.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof Da))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,o){const s={cancel:void 0,context:void 0};if(e&&o)s.cancel=e,(0,re.Wj)(t,"cancel",s.cancel,!0),s.context=o,(0,re.lb)(t,"context",s.context,!0);else if(e)if("object"==typeof e&&null!==e)s.context=e;else{if("function"!=typeof e)throw new Error((0,re.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");s.cancel=e}return s}get ref(){return new uu(this.database,new Id(this._delegate._repo,this._delegate._path))}}class uu extends Da{constructor(t,e){super(t,new dc(e._repo,e._path,new KA,!1)),this.database=t,this._delegate=e}getKey(){return(0,re.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,re.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new uu(this.database,b0(this._delegate,t))}getParent(){(0,re.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new uu(this.database,t):null}getRoot(){return(0,re.Dv)("Reference.root",0,0,arguments.length),new uu(this.database,this._delegate.root)}set(t,e){(0,re.Dv)("Reference.set",1,2,arguments.length),(0,re.Wj)("Reference.set","onComplete",e,!0);const o=KF(this._delegate,t);return e&&o.then(()=>e(null),s=>e(s)),o}update(t,e){if((0,re.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const s={};for(let l=0;l<t.length;++l)s[""+l]=t[l];t=s,o4("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Sd("Reference.update",this._delegate._path),(0,re.Wj)("Reference.update","onComplete",e,!0);const o=DX(this._delegate,t);return e&&o.then(()=>e(null),s=>e(s)),o}setWithPriority(t,e,o){(0,re.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,re.Wj)("Reference.setWithPriority","onComplete",o,!0);const s=function SX(i,t,e){if(Sd("setWithPriority",i._path),Gf("setWithPriority",t,i._path,!1),UF("setWithPriority",e,!1),".length"===i.key||".keys"===i.key)throw"setWithPriority failed: "+i.key+" is a read-only object.";const o=new re.BH;return zF(i._repo,i._path,t,e,o.wrapCallback(()=>{})),o.promise}(this._delegate,t,e);return o&&s.then(()=>o(null),l=>o(l)),s}remove(t){(0,re.Dv)("Reference.remove",0,1,arguments.length),(0,re.Wj)("Reference.remove","onComplete",t,!0);const e=function EX(i){return Sd("remove",i._path),KF(i,null)}(this._delegate);return t&&e.then(()=>t(null),o=>t(o)),e}transaction(t,e,o){(0,re.Dv)("Reference.transaction",1,3,arguments.length),(0,re.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,re.Wj)("Reference.transaction","onComplete",e,!0),function(i,t,e,o){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,re.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,o);const s=function pee(i,t,e){var o;if(i=(0,re.m9)(i),Sd("Reference.transaction",i._path),".length"===i.key||".keys"===i.key)throw"Reference.transaction failed: "+i.key+" is a read-only object.";const s=null===(o=e?.applyLocally)||void 0===o||o,l=new re.BH,g=YF(i,()=>{});return function _X(i,t,e,o,s,l){y0(i,"transaction on "+t);const u={path:t,update:e,onComplete:o,status:null,order:YU(),applyLocally:l,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},g=qF(i,t,void 0);u.currentInputSnapshot=g;const _=u.update(g.val());if(void 0===_)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{DS("transaction failed: Data returned ",_,u.path),u.status=0;const w=hk(i.transactionQueueTree_,t),T=_0(w)||[];let D;T.push(u),VF(w,T),"object"==typeof _&&null!==_&&(0,re.r3)(_,".priority")?(D=(0,re.DV)(_,".priority"),(0,re.hu)(SS(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(uk(i.serverSyncTree_,t)||fi.EMPTY_NODE).getPriority().val();const O=AS(i),F=No(_,D),j=NF(F,g,O);u.currentOutputSnapshotRaw=F,u.currentOutputSnapshotResolved=j,u.currentWriteId=mk(i);const Q=MF(i.serverSyncTree_,t,j,u.currentWriteId,u.applyLocally);Dd(i.eventQueue_,t,Q),_k(i,i.transactionQueueTree_)}}(i._repo,i._path,t,(_,w,T)=>{let D=null;_?l.reject(_):(D=new v0(T,new Id(i._repo,i._path),Jr),l.resolve(new hee(w,D)))},g,s),l.promise}(this._delegate,t,{applyLocally:o}).then(l=>new bee(l.committed,new $y(this.database,l.snapshot)));return e&&s.then(l=>e(null,l.committed,l.snapshot),l=>e(l,!1,null)),s}setPriority(t,e){(0,re.Dv)("Reference.setPriority",1,2,arguments.length),(0,re.Wj)("Reference.setPriority","onComplete",e,!0);const o=function xX(i,t){i=(0,re.m9)(i),Sd("setPriority",i._path),UF("setPriority",t,!1);const e=new re.BH;return zF(i._repo,wo(i._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&o.then(()=>e(null),s=>e(s)),o}push(t,e){(0,re.Dv)("Reference.push",0,2,arguments.length),(0,re.Wj)("Reference.push","onComplete",e,!0);const o=function TX(i,t){i=(0,re.m9)(i),Sd("push",i._path),Gf("push",t,i._path,!0);const e=Pj(i._repo),o=OJ(e),s=b0(i,o),l=b0(i,o);let u;return u=null!=t?KF(l,t).then(()=>l):Promise.resolve(l),s.then=u.then.bind(u),s.catch=u.then.bind(u,void 0),s}(this._delegate,t),s=o.then(u=>new uu(this.database,u));e&&s.then(()=>e(null),u=>e(u));const l=new uu(this.database,o);return l.then=s.then.bind(s),l.catch=s.catch.bind(s,void 0),l}onDisconnect(){return Sd("Reference.onDisconnect",this._delegate._path),new vee(new qj(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class OS{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:tee,forceLongPolling:nee}}useEmulator(t,e,o={}){!function ree(i,t,e,o={}){(i=(0,re.m9)(i))._checkNotDeleted("useEmulator"),i._instanceStarted&&Uf("Cannot call useEmulator() after instance has already been initialized.");const s=i._repoInternal;let l;if(s.repoInfo_.nodeAdmin)o.mockUserToken&&Uf('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new uS(uS.OWNER);else if(o.mockUserToken){const u="string"==typeof o.mockUserToken?o.mockUserToken:(0,re.Sg)(o.mockUserToken,i.app.options.projectId);l=new uS(u)}!function YX(i,t,e,o){i.repoInfo_=new KN(`${t}:${e}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams),o&&(i.authTokenProvider_=o)}(s,t,e,l)}(this._delegate,t,e,o)}ref(t){if((0,re.Dv)("database.ref",0,1,arguments.length),t instanceof uu){const e=$j(this._delegate,t.toString());return new uu(this,e)}{const e=Zj(this._delegate,t);return new uu(this,e)}}refFromURL(t){(0,re.Dv)("database.refFromURL",1,1,arguments.length);const o=$j(this._delegate,t);return new uu(this,o)}goOffline(){return(0,re.Dv)("database.goOffline",0,0,arguments.length),function oee(i){(i=(0,re.m9)(i))._checkNotDeleted("goOffline"),Vj(i._repo)}(this._delegate)}goOnline(){return(0,re.Dv)("database.goOnline",0,0,arguments.length),function see(i){(i=(0,re.m9)(i))._checkNotDeleted("goOnline"),function mX(i){i.persistentConnection_&&i.persistentConnection_.resume(Rj)}(i._repo)}(this._delegate)}}OS.ServerValue={TIMESTAMP:function uee(){return cee}(),increment:i=>function dee(i){return{".sv":{increment:i}}}(i)};var Cee=Object.freeze({__proto__:null,initStandalone:function wee({app:i,url:t,version:e,customAuthImpl:o,namespace:s,nodeAdmin:l=!1}){WU(e);const u=new po.zt("auth-internal",new po.H0("database-standalone"));return u.setComponent(new po.wA("auth-internal",()=>o,"PRIVATE")),{instance:new OS(n4(i,u,void 0,t,l),i),namespace:s}}});const Tee=OS.ServerValue;function s4(i){return null==i}function a4(i){return"function"==typeof i.set}function l4(i,t){return a4(t)?t:i.ref(t)}function c4(i,t){if(function xee(i){return"string"==typeof i}(i))return t.stringCase();if(a4(i))return t.firebaseCase();if(function See(i){return"function"==typeof i.exportVal}(i))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof i)}function RS(i,t,e="on",o=T1.z){return new Ie.y(s=>{let l=null;return l=i[e](t,(u,g)=>{o.schedule(()=>{s.next({snapshot:u,prevKey:g})}),"once"===e&&o.schedule(()=>s.complete())},u=>{o.schedule(()=>s.error(u))}),"on"===e?{unsubscribe(){null!=l&&i.off(t,l)}}:{unsubscribe(){}}}).pipe((0,pt.U)(s=>{const{snapshot:l,prevKey:u}=s;let g=null;return l.exists()&&(g=l.key),{type:t,payload:l,prevKey:u,key:g}}),(0,fN.B)())}function u4(i,t){const e=i.length;for(let o=0;o<e;o++)if(i[o].payload.key===t)return o;return-1}function Mee(i,t){const{payload:e,prevKey:o,key:s}=t,l=u4(i,s),u=function Iee(i,t){if(s4(t))return 0;{const e=u4(i,t);return-1===e?i.length:e+1}}(i,o);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let g=null;t.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:g,key:_.key};return g=_.key,i=[...i,w],!1})}return i;case"child_added":if(l>-1){const g=i[l-1];(g&&g.key||null)!==o&&(i=i.filter(_=>_.payload.key!==e.key)).splice(u,0,t)}else{if(null==o)return[t,...i];(i=i.slice()).splice(u,0,t)}return i;case"child_removed":return i.filter(g=>g.payload.key!==e.key);case"child_changed":return i.map(g=>g.payload.key===s?t:g);case"child_moved":if(l>-1){const g=i.splice(l,1)[0];return(i=i.slice()).splice(u,0,g),i}return i;default:return i}}function d4(i){return(s4(i)||0===i.length)&&(i=["child_added","child_removed","child_changed","child_moved"]),i}function h4(i,t,e){return function Dee(i,t,e){return RS(i,"value","once",e).pipe(Dr(o=>{const s=[fn(o)];return t.forEach(l=>s.push(RS(i,l,"on",e))),(0,Fy.T)(...s).pipe($b(Mee,[]))}),o0())}(i,t=d4(t),e)}function p4(i,t,e){const o=(t=d4(t)).map(s=>RS(i,s,"on",e));return(0,Fy.T)(...o)}function f4(i,t){return function(o,s){return c4(o,{stringCase:()=>i.child(o)[t](s),firebaseCase:()=>o[t](s),snapshotCase:()=>o.ref[t](s)})}}function Ree(i){return function(e){return e?c4(e,{stringCase:()=>i.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):i.remove()}}function g4(i,t){return function(){return RS(i,"value","on",t)}}!function Eee(i){i.INTERNAL.registerComponent(new po.wA("database-compat",(t,{instanceIdentifier:e})=>{const o=t.getProvider("app-compat").getImmediate(),s=t.getProvider("database").getImmediate({identifier:e});return new OS(s,o)},"PUBLIC").setServiceProps({Reference:uu,Query:Da,Database:OS,DataSnapshot:$y,enableLogging:aee,INTERNAL:Cee,ServerValue:Tee}).setMultipleInstances(!0)),i.registerVersion("@firebase/database-compat","0.2.3")}(EN.Z);const Fee=new a.OlP("angularfire2.realtimeDatabaseURL"),Lee=new a.OlP("angularfire2.database.use-emulator");let m4=(()=>{class i{constructor(e,o,s,l,u,g,_,w,T,D,O,F,j,Q,ae){this.schedulers=g;const Oe=_,We=(0,Ds.on)(e,u,o);w&&CN(We,u,T,O,F,j,D,Q),this.database=(0,Ds.cc)(`${We.name}.database.${s}`,"AngularFireDatabase",We.name,()=>{const ft=u.runOutsideAngular(()=>We.database(s||void 0));return Oe&&ft.useEmulator(...Oe),ft},[Oe])}list(e,o){const s=this.schedulers.ngZone.runOutsideAngular(()=>l4(this.database,e));let l=s;return o&&(l=o(s)),function Pee(i,t){const e=t.schedulers.outsideAngular,o=t.schedulers.ngZone.run(()=>i.ref);return{query:i,update:f4(o,"update"),set:f4(o,"set"),push:s=>o.push(s),remove:Ree(o),snapshotChanges:s=>h4(i,s,e).pipe(St.iC),stateChanges:s=>p4(i,s,e).pipe(St.iC),auditTrail:s=>function Aee(i,t,e){return function Oee(i,t,e){return function kee(i,t){return RS(i,"value","on",t).pipe((0,pt.U)(e=>{let o;return e.payload.forEach(s=>(o=s.key,!1)),{data:e,lastKeyToLoad:o}}))}(i,e).pipe(HA(t),(0,pt.U)(([s,l])=>{const u=s.lastKeyToLoad,g=l.map(_=>_.key);return{actions:l,lastKeyToLoad:u,loadedKeys:g}}),function M9(i){return(0,Zo.e)((t,e)=>{let o=!1,s=0;t.subscribe((0,Sr.x)(e,l=>(o||(o=!i(l,s++)))&&e.next(l)))})}(s=>-1===s.loadedKeys.indexOf(s.lastKeyToLoad)),(0,pt.U)(s=>s.actions))}(i,p4(i,t).pipe($b((s,l)=>[...s,l],[])),e)}(i,s,e).pipe(St.iC),valueChanges:(s,l)=>h4(i,s,e).pipe((0,pt.U)(g=>g.map(_=>l&&l.idField?Object.assign(Object.assign({},_.payload.val()),{[l.idField]:_.key}):_.payload.val())),St.iC)}}(l,this)}object(e){return function Nee(i,t){return{query:i,snapshotChanges:()=>g4(i,t.schedulers.outsideAngular)().pipe(St.iC),update:e=>i.ref.update(e),set:e=>i.ref.set(e),remove:()=>i.ref.remove(),valueChanges:()=>g4(i,t.schedulers.outsideAngular)().pipe(St.iC,(0,pt.U)(o=>o.payload.exists()?o.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>l4(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Ds.Dh),a.LFG(Ds.xv,8),a.LFG(Fee,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(St.HU),a.LFG(Lee,8),a.LFG(Qx,8),a.LFG(mN,8),a.LFG(_N,8),a.LFG(yN,8),a.LFG(vN,8),a.LFG(bN,8),a.LFG(wN,8),a.LFG(_a,8))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),Vee=(()=>{class i{constructor(){DA.Z.registerVersion("angularfire",St.q4.full,"rtdb-compat")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[m4]}),i})();const Tk={firebase:{projectId:"fyp-my108-351404",appId:"1:978276168904:web:648966568a920626a3e1fd",databaseURL:"https://fyp-my108-351404-default-rtdb.asia-southeast1.firebasedatabase.app",storageBucket:"fyp-my108-351404.appspot.com",locationId:"asia-east2",apiKey:"AIzaSyA0QL42AMqAczuQPxLzLY5yyZ40hfxBiT0",authDomain:"fyp-my108-351404.firebaseapp.com",messagingSenderId:"978276168904",measurementId:"G-YLXFJ43G7Q"},production:!0};class QF{constructor(t){return t}}const _4="database",XF=new a.OlP("angularfire2.database-instances");function Uee(i){return(t,e)=>{const o=t.runOutsideAngular(()=>i(e));return new QF(o)}}const jee={provide:class Hee{constructor(){return(0,St.vb)(_4)}},deps:[[new a.FiY,XF]]},zee={provide:QF,useFactory:function Bee(i,t){const e=(0,St.JM)(_4,i,t);return e&&new QF(e)},deps:[[new a.FiY,XF],Ur]};let Gee=(()=>{class i{constructor(){(0,br.KN)("angularfire",St.q4.full,"rtdb")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[zee,jee]}),i})();function qee(i,...t){return{ngModule:Gee,providers:[{provide:XF,useFactory:Uee(i),multi:!0,deps:[a.R0b,a.zs3,St.HU,ms,[new a.FiY,jo],[new a.FiY,_a],...t]}]}}const Zee=(0,St.u3)(iee,!0);let qf=(()=>{class i{constructor(e,o,s,l,u){this.firebaseService=e,this.afs=o,this.afAuth=s,this.router=l,this.ngZone=u,this.userDetails=[{email:"",address:""}],this.address=[{address:""}],this.userEmail="",this.userPassword="",this.userCred={userEmail:"",userPassword:""},this.afAuth.authState.subscribe(g=>{if(g){console.log("saving user data in local storage when logged in"+g.email),this.userData=g,localStorage.setItem("user",JSON.stringify(this.userData)),localStorage.setItem("userCredentials",JSON.stringify(this.userCred)),console.log(JSON.parse(localStorage.getItem("userCredentials")));let _=JSON.parse(localStorage.getItem("user"));console.log(_)}else localStorage.setItem("user","null"),localStorage.setItem("userCredentials","null"),JSON.parse(localStorage.getItem("user"))})}login(e,o){return this.userCred.userEmail=e,this.userCred.userPassword=o,this.afAuth.signInWithEmailAndPassword(e,o).then(s=>{this.ngZone.run(()=>{localStorage.setItem("userCredentials",JSON.stringify(this.userCred)),console.log(JSON.parse(localStorage.getItem("userCredentials"))),this.userCred.userEmail=e,this.userCred.userPassword=o,this.router.navigate(["./home/"+s.user?.uid])}),console.log(s.user),this.SetUserData(s.user,o)}).catch(s=>{window.alert(s.message)})}register(e,o){return this.afAuth.createUserWithEmailAndPassword(e,o).then(s=>{console.log(this.isLoggedIn),this.firebaseService.addAddress(e,"0",this.address[0]),this.firebaseService.storeUserCard(e,{id:0,cardNum:"",expMonth:"",expYear:"",CVV:""}),this.firebaseService.setUserDetails(e,this.userDetails[0]),this.userCred.userEmail=e,this.userCred.userPassword=o,console.log(s.user),this.sendEmailForVerification(),this.SetUserData(s.user)}).catch(s=>{console.log("error leh"),window.alert(s.message)})}forgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, please check your inbox.")}).catch(o=>{window.alert(o)})}sendEmailForVerification(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["/verify-email"])})}get isLoggedIn(){let e=JSON.parse(localStorage.getItem("user"));console.log(e);const o=JSON.parse(localStorage.getItem("user"));return console.log("isloggedin "+o),null!==o&&1==o.emailVerified?(console.log("return true"),!0):(console.log("return false"),!1)}getCurrentUserData(){if(this.isLoggedIn)return JSON.parse(localStorage.getItem("user"))}getCurrentUserCredentials(){if(this.isLoggedIn){const e=JSON.parse(localStorage.getItem("userCredentials"));return console.log(e),e}}googleSignIn(){return this.AuthLogin(new se.Q).then(e=>{e&&(alert("Welcome back"+Lp.name),setTimeout(()=>{this.router.navigate(["./user-profile"])},2e3))})}AuthLogin(e){return localStorage.setItem("userCredentials",JSON.stringify(this.userCred)),console.log(JSON.parse(localStorage.getItem("userCredentials"))),this.afAuth.signInWithPopup(e).then(o=>{this.ngZone.run(()=>{this.router.navigate(["/home/"+o.user?.uid])}),this.SetUserData(o.user)}).catch(o=>{window.alert(o)})}SetUserData(e,o){return this.afs.doc(`users/${e.email}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}logout(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["login"])})}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Rf),a.LFG(qU),a.LFG(Qx),a.LFG(er),a.LFG(a.R0b))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),y4=(()=>{class i{constructor(e){this.router=e}ngOnInit(){}goToFAQ(){this.router.navigate(["/login"])}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(er))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-header-empty"]],decls:4,vars:0,consts:[["src","https://cdn.lordicon.com/njjuilvq.json","trigger","loop-on-hover","colors","primary:#f6f6f6",2,"width","32px","height","32px","cursor","pointer",3,"click"]],template:function(e,o){1&e&&(a.TgZ(0,"nav")(1,"h2"),a._uU(2,"MERC"),a.qZA(),a.TgZ(3,"lord-icon",0),a.NdJ("click",function(){return o.goToFAQ()}),a.qZA()())},styles:['nav[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:1rem 2rem;background:#005DE8}nav[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f5f5f5}.nav-items[_ngcontent-%COMP%]{list-style-type:none}.middle-nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:0 auto;float:center}.middle-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:10px 10px 0}.middle-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff}.material-symbols-outlined[_ngcontent-%COMP%]{overflow-y:hidden;color:#fff;font-size:30px;margin:5px 10px 0;font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 48}@media only screen and (max-width: 600px){nav[_ngcontent-%COMP%]{flex-direction:column}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{flex-direction:column;padding-top:.5rem}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 0}}']}),i})();function $ee(i,t){1&i&&(a.TgZ(0,"span",20),a._uU(1,"* Email is required!"),a.qZA(),a._UZ(2,"br"))}function Wee(i,t){1&i&&a.YNc(0,$ee,3,0,"ng-template")}function Kee(i,t){if(1&i&&(a.TgZ(0,"span",21),a._uU(1,"* Invalid email address!"),a.qZA()),2&i){const e=a.oxw();a.Q6J("hidden",e.invalid)}}function Yee(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"span",22),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.showHidePassword())}),a._UZ(1,"i",23),a.qZA()}}function Jee(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"span",22),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.showHidePassword())}),a._UZ(1,"i",24),a.qZA()}}let Qee=(()=>{class i{constructor(e,o){this.auth=e,this.router=o,this.email="",this.password="",this.requiredErr=!1,this.invalid=!0,this.showPassword=!1,this.showing=!1}ngOnInit(){}showHidePassword(){this.showPassword=!this.showPassword,this.showing=!this.showing}login(){if(""==this.email&&""==this.password&&""==this.email)return alert("Please enter email"),void(this.requiredErr=!0);this.email.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)||(this.requiredErr=!1,this.invalid=!1),""!=this.password?(this.auth.login(this.email,this.password),this.email="",this.password=""):alert("Please enter password")}navigateToForgotPasswordPage(){this.router.navigate(["/forgot-password"])}signInWithGoogle(){this.auth.googleSignIn()}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(qf),a.Y36(er))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-login"]],decls:37,vars:7,consts:[[1,"login-view"],[1,"left-panel"],["src","../../../assets/login-shopping.jpg","alt","login-shopping"],[1,"right-panel"],[1,"container"],[1,"head-form"],["href","/register"],[1,"hr-style"],[1,"field-set"],[1,"input-item"],[1,"fa","fa-user-circle","fa-xl"],["id","txt-input","name","email","type","text","placeholder","Email Address","required","",1,"form-input",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["invalidErr",""],[1,"fa","fa-key","fa-xl"],["type","password","placeholder","Password","id","pwd","name","password","required","",1,"form-input",3,"type","ngModel","ngModelChange"],[3,"click",4,"ngIf","ngIfElse"],["hidden",""],[1,"log-in",3,"click"],["href","/forgot-password",1,"forgot-pw"],[1,"err-msg"],[1,"err-msg",3,"hidden"],[3,"click"],["aria-hidden","true","type","button","id","eye",1,"fa","fa-eye","pw-eye"],["aria-hidden","true","type","button","id","eye",1,"fa-solid","fa-eye-slash","pw-eye"]],template:function(e,o){if(1&e&&(a._UZ(0,"app-header-empty"),a.TgZ(1,"div",0)(2,"div",1)(3,"h2"),a._uU(4,"Welcome back to MERC!"),a.qZA(),a._UZ(5,"img",2),a.qZA(),a.TgZ(6,"div",3)(7,"form")(8,"div",4)(9,"header",5)(10,"h2"),a._uU(11,"Log In"),a.qZA(),a.TgZ(12,"p"),a._uU(13,"New to MERC? "),a.TgZ(14,"a",6),a._uU(15,"Sign Up"),a.qZA()()(),a._UZ(16,"hr",7)(17,"br"),a.TgZ(18,"div",8)(19,"span",9),a._UZ(20,"i",10),a.qZA(),a.TgZ(21,"input",11),a.NdJ("ngModelChange",function(l){return o.email=l}),a.qZA(),a.YNc(22,Wee,1,0,null,12),a.YNc(23,Kee,2,1,"ng-template",null,13,a.W1O),a._UZ(25,"br"),a.TgZ(26,"span",9),a._UZ(27,"i",14),a.qZA(),a.TgZ(28,"input",15),a.NdJ("ngModelChange",function(l){return o.password=l}),a.qZA(),a.YNc(29,Yee,2,0,"span",16),a.YNc(30,Jee,2,0,"ng-template",null,17,a.W1O),a._UZ(32,"br"),a.TgZ(33,"button",18),a.NdJ("click",function(){return o.login()}),a._uU(34," Log In "),a.qZA()(),a.TgZ(35,"a",19),a._uU(36,"Forgot Password ?"),a.qZA()()()()()),2&e){const s=a.MAs(24),l=a.MAs(31);a.xp6(21),a.Q6J("ngModel",o.email),a.xp6(1),a.Q6J("ngIf",o.requiredErr)("ngIfElse",s),a.xp6(6),a.Q6J("type",o.showPassword?"text":"password")("ngModel",o.password),a.xp6(1),a.Q6J("ngIf",o.showing)("ngIfElse",l)}},dependencies:[Ji,qx,y1,XM,Hx,Zx,b1,Qb,y4],styles:['.login-view[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:50px}@media (max-width: 800px){.login-view[_ngcontent-%COMP%]{flex-direction:column}}.left-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-left:50px}@media (max-width: 800px){.left-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}}.left-panel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:550px;height:450px}@media (max-width: 800px){.left-panel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none}}.right-panel[_ngcontent-%COMP%]{padding-right:5rem;margin-left:80px}@media (max-width: 800px){.right-panel[_ngcontent-%COMP%]{padding:0;margin-top:15px}}form[_ngcontent-%COMP%]{width:400px;min-height:300px;border-radius:10px;border:10px solid;border-image-slice:1;border-width:5px;border-image-source:linear-gradient(to left,#005DE8,#09c6f9);margin:2% auto;box-shadow:0 9px 50px #95b2ea80;padding:2%;overflow-y:hidden;overflow-x:hidden}.container[_ngcontent-%COMP%]{margin:10px}.head-form[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-top:10px}.head-form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#939393;font-size:smaller}.head-form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#00f}.hr-style[_ngcontent-%COMP%]{margin-top:15px;background-image:linear-gradient(315deg,#045de9 0%,#09c6f9 74%);border:0;height:1.5px}.fa-user-circle[_ngcontent-%COMP%]{font-size:50px}.form-input[_ngcontent-%COMP%]{margin:15px 10px;padding:10px;width:80%;box-sizing:border-box;border:1.5px solid #ccc;border-radius:3px;outline:none}input[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:active{border-color:transparent;border:2.5px solid #045de9;animation:slideup .5s ease-in 1}@keyframes slideup{0%{opacity:0}to{opacity:.8}}.log-in[_ngcontent-%COMP%]{cursor:pointer;border:0;border-radius:4px;font-weight:600;margin-left:20%;margin-top:20px;margin-bottom:20px;width:200px;padding:10px 0;box-shadow:0 0 20px #5a79dc4d;transition:.4s;color:#fff;background-color:#005de8}.log-in[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px #5a79dc99}.field-set[_ngcontent-%COMP%]{margin:10px 0}.other-methods[_ngcontent-%COMP%]{max-width:90%;margin-left:10px;text-align:center}.other-methods[_ngcontent-%COMP%]   .other-methods-text[_ngcontent-%COMP%]{font-size:20px;position:relative;border:0;height:1.5em;background:transparent;color:#000;opacity:1}.other-methods[_ngcontent-%COMP%]   .other-methods-text[_ngcontent-%COMP%]:before{content:"";background:linear-gradient(315deg,#045de9 0%,#09c6f9 74%);position:absolute;left:0;top:50%;width:100%;height:1.5px}.other-methods[_ngcontent-%COMP%]   .other-methods-text[_ngcontent-%COMP%]:after{content:attr(data-content);position:relative;display:inline-block;color:#000;padding:0 .5em;line-height:1.5em;background-color:#fff;font-size:smaller}.card[_ngcontent-%COMP%]{border:1px solid #696969;border-radius:50px;margin-top:10px}.card-body[_ngcontent-%COMP%]{padding:10px;cursor:pointer;display:flex;justify-content:center;align-items:center}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 0 3px}.other-sign-in-methods[_ngcontent-%COMP%]{max-width:250px;margin:0 auto}.err-msg[_ngcontent-%COMP%]{color:red;font-size:small;margin-left:40px}.forgot-pw[_ngcontent-%COMP%]{float:right;margin-top:50px;font-size:smaller}']}),i})();function Xee(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"span",19),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.showHidePassword())}),a._UZ(1,"i",20),a.qZA()}}function ete(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"span",19),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.showHidePassword())}),a._UZ(1,"i",21),a.qZA()}}let tte=(()=>{class i{constructor(e){this.auth=e,this.email="",this.password="",this.showPassword=!1,this.showing=!1}ngOnInit(){}showHidePassword(){this.showPassword=!this.showPassword,this.showing=!this.showing}register(){""!=this.email?""!=this.password?(this.auth.register(this.email,this.password),this.email="",this.password=""):alert("Please enter password"):alert("Please enter email")}onStrengthChange(e){console.log(e)}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(qf))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-register"]],decls:34,vars:5,consts:[[1,"login-view"],[1,"left-panel"],["src","../../../assets/login-shopping.jpg","alt","login-shopping"],[1,"right-panel"],[1,"container"],[1,"head-form"],["href","/login",2,"float","right"],[1,"hr-style"],[1,"field-set"],[1,"input-item"],[1,"fa","fa-user-circle","fa-xl"],["id","txt-input","name","email","type","text","placeholder","Email Address","required","",1,"form-input",3,"ngModel","ngModelChange"],["emailInput",""],[1,"fa","fa-key","fa-xl"],["placeholder","Password","id","pwd","name","password","required","",1,"form-input",3,"type","ngModel","ngModelChange"],["passwordInput",""],[3,"click",4,"ngIf","ngIfElse"],["hidden",""],[1,"log-in",3,"click"],[3,"click"],["aria-hidden","true","type","button","id","eye",1,"fa","fa-eye","pw-eye"],["aria-hidden","true","type","button","id","eye",1,"fa-solid","fa-eye-slash","pw-eye"]],template:function(e,o){if(1&e&&(a._UZ(0,"app-header-empty"),a.TgZ(1,"div",0)(2,"div",1)(3,"h2"),a._uU(4,"Welcome to MERC!"),a.qZA(),a._UZ(5,"img",2),a.qZA(),a.TgZ(6,"div",3)(7,"form")(8,"div",4)(9,"header",5)(10,"h2"),a._uU(11,"Sign Up"),a.qZA(),a.TgZ(12,"p"),a._uU(13,"Have an account?\xa0 "),a.TgZ(14,"a",6),a._uU(15,"Sign In"),a.qZA()()(),a._UZ(16,"hr",7)(17,"br"),a.TgZ(18,"div",8)(19,"span",9),a._UZ(20,"i",10),a.qZA(),a.TgZ(21,"input",11,12),a.NdJ("ngModelChange",function(l){return o.email=l}),a.qZA(),a._UZ(23,"br"),a.TgZ(24,"span",9),a._UZ(25,"i",13),a.qZA(),a.TgZ(26,"input",14,15),a.NdJ("ngModelChange",function(l){return o.password=l}),a.qZA(),a.YNc(28,Xee,2,0,"span",16),a.YNc(29,ete,2,0,"ng-template",null,17,a.W1O),a._UZ(31,"br"),a.qZA(),a.TgZ(32,"button",18),a.NdJ("click",function(){return o.register()}),a._uU(33," Register "),a.qZA()()()()()),2&e){const s=a.MAs(30);a.xp6(21),a.Q6J("ngModel",o.email),a.xp6(5),a.Q6J("type",o.showPassword?"text":"password")("ngModel",o.password),a.xp6(2),a.Q6J("ngIf",o.showing)("ngIfElse",s)}},dependencies:[Ji,qx,y1,XM,Hx,Zx,b1,Qb,y4],styles:['.login-view[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:50px}@media (max-width: 800px){.login-view[_ngcontent-%COMP%]{flex-direction:column}}.left-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-left:50px}@media (max-width: 800px){.left-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}}.left-panel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:550px;height:450px}@media (max-width: 800px){.left-panel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none}}.right-panel[_ngcontent-%COMP%]{padding-right:5rem;margin-left:80px}@media (max-width: 800px){.right-panel[_ngcontent-%COMP%]{padding:0;margin-top:15px}}form[_ngcontent-%COMP%]{width:400px;min-height:300px;height:550px;border-radius:10px;border:10px solid;border-image-slice:1;border-width:5px;border-image-source:linear-gradient(to left,#005DE8,#09c6f9);margin:2% auto;box-shadow:0 9px 50px #95b2ea80;padding:2%;overflow-y:hidden;overflow-x:hidden}.container[_ngcontent-%COMP%]{margin:10px}.head-form[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-top:10px}.head-form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#939393;font-size:smaller}.head-form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#00f}.hr-style[_ngcontent-%COMP%]{margin-top:15px;background-image:linear-gradient(315deg,#045de9 0%,#09c6f9 74%);border:0;height:1.5px}.fa-user-circle[_ngcontent-%COMP%]{font-size:50px}.form-input[_ngcontent-%COMP%]{margin:15px 10px;padding:10px;width:80%;box-sizing:border-box;border:1.5px solid #ccc;border-radius:3px;outline:none}input[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:active{border-color:transparent;border:2.5px solid #045de9;animation:slideup .5s ease-in 1}@keyframes slideup{0%{opacity:0}to{opacity:.8}}.log-in[_ngcontent-%COMP%]{cursor:pointer;border:0;border-radius:4px;font-weight:600;margin-left:20%;margin-top:20px;margin-bottom:20px;width:200px;padding:10px 0;box-shadow:0 0 20px #5a79dc4d;transition:.4s;color:#fff;background-color:#005de8}.log-in[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px #5a79dc99}.field-set[_ngcontent-%COMP%]{margin:10px 0}.other-methods[_ngcontent-%COMP%]{max-width:90%;margin-left:10px;text-align:center}.other-methods[_ngcontent-%COMP%]   .other-methods-text[_ngcontent-%COMP%]{font-size:20px;position:relative;border:0;height:1.5em}.other-methods[_ngcontent-%COMP%]   .other-methods-text[_ngcontent-%COMP%]:before{content:"";background:linear-gradient(to right,transparent,#045de9,transparent);position:absolute;left:0;top:50%;width:100%;height:1px}.other-methods[_ngcontent-%COMP%]   .other-methods-text[_ngcontent-%COMP%]:after{content:attr(data-content);position:relative;display:inline-block;color:#000;padding:0 .5em;line-height:1.5em;background-color:#fff;font-size:smaller}.card[_ngcontent-%COMP%]{border:1px solid #696969;border-radius:50px;margin-top:10px}.card-body[_ngcontent-%COMP%]{padding:10px;cursor:pointer;display:flex}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:3px 0 0 5px}.other-sign-in-methods[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px}.err-msg[_ngcontent-%COMP%]{color:red;font-size:small;margin-left:40px}.forgot-pw[_ngcontent-%COMP%]{float:right;margin-top:50px;font-size:smaller}']}),i})();class v4{constructor(t){this.file=t}}let Ek=(()=>{class i{constructor(e,o,s){this.db=e,this.storage=o,this.firebase=s,this.basePath="/uploads"}pushFileToStorage(e,o){const s=`${this.basePath}/${e.file.name}`,l=this.storage.ref(s),u=this.storage.upload(s,e.file);return u.snapshotChanges().pipe(Sx(()=>{l.getDownloadURL().subscribe(g=>{e.url=g,e.name=e.file.name,this.saveProfileImageURLToUser(e.url,o),this.saveFileData(e)})})).subscribe(),u.percentageChanges()}saveProfileImageURLToUser(e,o){this.firebase.updateProfileImage(e,o)}saveFileData(e){this.db.list(this.basePath).push(e)}getFiles(e){return this.db.list(this.basePath,o=>o.limitToLast(e))}deleteFile(e){this.deleteFileDatabase(e.key).then(()=>{this.deleteFileStorage(e.name)}).catch(o=>console.log(o))}deleteFileDatabase(e){return this.db.list(this.basePath).remove(e)}deleteFileStorage(e){this.storage.ref(this.basePath).child(e).delete()}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(m4),a.LFG(MU),a.LFG(Rf))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var nte=q(1144);const ite=["addListener","removeListener"],rte=["addEventListener","removeEventListener"],ote=["on","off"];function Us(i,t,e,o){if((0,_d.m)(e)&&(o=e,e=void 0),o)return Us(i,t,e).pipe(ZR(o));const[s,l]=function lte(i){return(0,_d.m)(i.addEventListener)&&(0,_d.m)(i.removeEventListener)}(i)?rte.map(u=>g=>i[u](t,g,e)):function ste(i){return(0,_d.m)(i.addListener)&&(0,_d.m)(i.removeListener)}(i)?ite.map(b4(i,t)):function ate(i){return(0,_d.m)(i.on)&&(0,_d.m)(i.off)}(i)?ote.map(b4(i,t)):[];if(!s&&(0,nte.z)(i))return(0,aa.z)(u=>Us(u,t,e))((0,yd.Xf)(i));if(!s)throw new TypeError("Invalid event target");return new Ie.y(u=>{const g=(..._)=>u.next(1<_.length?_:_[0]);return s(g),()=>l(g)})}function b4(i,t){return e=>o=>i[e](t,o)}var cte=q(3532);function xk(i=0,t,e=T1.P){let o=-1;return null!=t&&((0,cte.K)(t)?e=t:o=t),new Ie.y(s=>{let l=function ute(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;l<0&&(l=0);let u=0;return e.schedule(function(){s.closed||(s.next(u++),0<=o?this.schedule(void 0,o):s.complete())},l)})}const{isArray:dte}=Array;function w4(i){return 1===i.length&&dte(i[0])?i[0]:i}const T4=new Ie.y(VA.Z);function Sk(...i){const t=(0,Dy.jO)(i),e=w4(i);return e.length?new Ie.y(o=>{let s=e.map(()=>[]),l=e.map(()=>!1);o.add(()=>{s=l=null});for(let u=0;!o.closed&&u<e.length;u++)(0,yd.Xf)(e[u]).subscribe((0,Sr.x)(o,g=>{if(s[u].push(g),s.every(_=>_.length)){const _=s.map(w=>w.shift());o.next(t?t(..._):_),s.some((w,T)=>!w.length&&l[T])&&o.complete()}},()=>{l[u]=!0,!s[u].length&&o.complete()}));return()=>{s=l=null}}):Rm.E}function Vr(i){return(0,Zo.e)((t,e)=>{(0,yd.Xf)(i).subscribe((0,Sr.x)(e,()=>e.complete(),VA.Z)),!e.closed&&t.subscribe(e)})}function yne(i,t){}function vne(i,t){if(1&i&&(a.TgZ(0,"button",3),a._uU(1),a.YNc(2,yne,0,0,"ng-template",4),a.qZA()),2&i){const e=t.$implicit;a.Q6J("ngbPanelToggle",e),a.xp6(1),a.hij(" ",e.title,""),a.xp6(1),a.Q6J("ngTemplateOutlet",null==e.titleTpl?null:e.titleTpl.templateRef)}}function bne(i,t){}function wne(i,t){}function Cne(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",8),a.NdJ("ngbRef",function(s){a.CHM(e);const l=a.oxw().$implicit;return a.KtG(l.panelDiv=s)}),a.TgZ(1,"div",9),a.YNc(2,wne,0,0,"ng-template",4),a.qZA()()}if(2&i){const e=a.oxw().$implicit;a.s9C("id",e.id),a.uIk("aria-labelledby",e.id+"-header"),a.xp6(2),a.Q6J("ngTemplateOutlet",(null==e.contentTpl?null:e.contentTpl.templateRef)||null)}}Math,Math,Math;const Tne=function(i,t){return{$implicit:i,opened:t}};function Ene(i,t){if(1&i&&(a.TgZ(0,"div")(1,"div",5),a.YNc(2,bne,0,0,"ng-template",6),a.qZA(),a.YNc(3,Cne,3,3,"div",7),a.qZA()),2&i){const e=t.$implicit,o=a.oxw(),s=a.MAs(1);a.Tol("accordion-item "+(e.cardClass||"")),a.xp6(1),a.Tol("accordion-header "+(e.type?"bg-"+e.type:o.type?"bg-"+o.type:"")),a.MGl("id","",e.id,"-header"),a.xp6(1),a.Q6J("ngTemplateOutlet",(null==e.headerTpl?null:e.headerTpl.templateRef)||s)("ngTemplateOutletContext",a.WLB(8,Tne,e,e.isOpen)),a.xp6(1),a.Q6J("ngIf",!o.destroyOnHide||e.isOpen||e.transitionRunning)}}const xne=["*"];function Sne(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"button",6),a.NdJ("click",function(){const l=a.CHM(e).$implicit,u=a.oxw();return u.focus(),a.KtG(u.select(l.id,u.NgbSlideEventSource.INDICATOR))}),a.qZA()}if(2&i){const e=t.$implicit,o=a.oxw();a.ekj("active",e.id===o.activeId),a.uIk("aria-labelledby","slide-"+e.id)("aria-controls","slide-"+e.id)("aria-selected",e.id===o.activeId)}}function Dne(i,t){}function Ine(i,t){if(1&i&&(a.TgZ(0,"div",7)(1,"span",8),a.SDv(2,9),a.qZA(),a.YNc(3,Dne,0,0,"ng-template",10),a.qZA()),2&i){const e=t.$implicit,o=t.index,s=t.count;a.Q6J("id","slide-"+e.id),a.xp6(2),a.pQV(o+1)(s),a.QtT(2),a.xp6(1),a.Q6J("ngTemplateOutlet",e.tplRef)}}function Mne(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.arrowLeft())}),a._UZ(1,"span",12),a.TgZ(2,"span",8),a.SDv(3,13),a.qZA()()}}function Ane(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"button",14),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.arrowRight())}),a._UZ(1,"span",15),a.TgZ(2,"span",8),a.SDv(3,16),a.qZA()()}}const zne=["dialog"];function Tie(i,t){1&i&&a._uU(0),2&i&&a.Oqu(100===t.fill?"\u2605":"\u2606")}function Eie(i,t){}function xie(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"span",2),a._uU(1),a.qZA(),a.TgZ(2,"span",3),a.NdJ("mouseenter",function(){const l=a.CHM(e).index,u=a.oxw();return a.KtG(u.enter(l+1))})("click",function(){const l=a.CHM(e).index,u=a.oxw();return a.KtG(u.handleClick(l+1))}),a.YNc(3,Eie,0,0,"ng-template",4),a.qZA()}if(2&i){const e=t.index,o=a.oxw(),s=a.MAs(1);a.xp6(1),a.hij("(",e<o.nextRate?"*":" ",")"),a.xp6(1),a.Udp("cursor",o.isInteractive()?"pointer":"default"),a.xp6(1),a.Q6J("ngTemplateOutlet",o.starTemplate||o.starTemplateFromContent||s)("ngTemplateOutletContext",o.contexts[e])}}function h2(i,t,e=0){return Math.max(Math.min(i,t),e)}function p2(i){return"string"==typeof i}function C0(i){return null!=i}function q1(i){return(i||document.body).getBoundingClientRect()}const j4={animation:!0,transitionTimerDelayMs:5},Vie=()=>{},{transitionTimerDelayMs:Hie}=j4,BS=new Map,Rl=(i,t,e,o)=>{let s=o.context||{};const l=BS.get(t);if(l)switch(o.runningTransition){case"continue":return Rm.E;case"stop":i.run(()=>l.transition$.complete()),s=Object.assign(l.context,s),BS.delete(t)}const u=e(t,o.animation,s)||Vie;if(!o.animation||"none"===window.getComputedStyle(t).transitionProperty)return i.run(()=>u()),fn(void 0).pipe(function Fie(i){return t=>new Ie.y(e=>t.subscribe({next:u=>i.run(()=>e.next(u)),error:u=>i.run(()=>e.error(u)),complete:()=>i.run(()=>e.complete())}))}(i));const g=new Ft.x,_=new Ft.x,w=g.pipe(function pte(...i){return t=>c1(t,fn(...i))}(!0));BS.set(t,{transition$:g,complete:()=>{_.next(),_.complete()},context:s});const T=function Lie(i){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(i);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return i.runOutsideAngular(()=>{const D=Us(t,"transitionend").pipe(Vr(w),Yr(({target:F})=>F===t));(function C4(...i){return 1===(i=w4(i)).length?(0,yd.Xf)(i[0]):new Ie.y(function hte(i){return t=>{let e=[];for(let o=0;e&&!t.closed&&o<i.length;o++)e.push((0,yd.Xf)(i[o]).subscribe((0,Sr.x)(t,s=>{if(e){for(let l=0;l<e.length;l++)l!==o&&e[l].unsubscribe();e=null}t.next(s)})))}}(i))})(xk(T+Hie).pipe(Vr(w)),D,_).pipe(Vr(w)).subscribe(()=>{BS.delete(t),i.run(()=>{u(),g.next(),g.complete()})})}),g.asObservable()},z4=(i,t,e)=>{let{direction:o,maxHeight:s}=e;const{classList:l}=i;function u(){l.add("collapse"),"show"===o?l.add("show"):l.remove("show")}if(t)return s||(s=function Uie(i){if(typeof navigator>"u")return"0px";const{classList:t}=i,e=t.contains("show");e||t.add("show"),i.style.height="";const o=i.getBoundingClientRect().height+"px";return e||t.remove("show"),o}(i),e.maxHeight=s,i.style.height="show"!==o?s:"0px",l.remove("collapse"),l.remove("collapsing"),l.remove("show"),q1(i),l.add("collapsing")),i.style.height="show"===o?s:"0px",()=>{u(),l.remove("collapsing"),i.style.height=""};u()};let Ok=(()=>{class i{constructor(){this.animation=j4.animation}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),jie=(()=>{class i{constructor(e){this._ngbConfig=e,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Ok))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),zie=0,g2=(()=>{class i{constructor(e){this.templateRef=e}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.Rgc))},i.\u0275dir=a.lG2({type:i,selectors:[["ng-template","ngbPanelHeader",""]]}),i})(),m2=(()=>{class i{constructor(e){this.templateRef=e}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.Rgc))},i.\u0275dir=a.lG2({type:i,selectors:[["ng-template","ngbPanelTitle",""]]}),i})(),_2=(()=>{class i{constructor(e){this.templateRef=e}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.Rgc))},i.\u0275dir=a.lG2({type:i,selectors:[["ng-template","ngbPanelContent",""]]}),i})(),Rk=(()=>{class i{constructor(){this.disabled=!1,this.id="ngb-panel-"+zie++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new a.vpe,this.hidden=new a.vpe}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=a.lG2({type:i,selectors:[["ngb-panel"]],contentQueries:function(e,o,s){if(1&e&&(a.Suo(s,m2,4),a.Suo(s,g2,4),a.Suo(s,_2,4)),2&e){let l;a.iGM(l=a.CRH())&&(o.titleTpls=l),a.iGM(l=a.CRH())&&(o.headerTpls=l),a.iGM(l=a.CRH())&&(o.contentTpls=l)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"}}),i})(),Gie=(()=>{class i{constructor(e){this._El=e,this.ngbRef=new a.vpe}ngOnInit(){this.ngbRef.emit(this._El.nativeElement)}ngOnDestroy(){this.ngbRef.emit(null)}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.SBq))},i.\u0275dir=a.lG2({type:i,selectors:[["","ngbRef",""]],outputs:{ngbRef:"ngbRef"}}),i})(),y2=(()=>{class i{constructor(e,o,s){this._ngZone=o,this._changeDetector=s,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new a.vpe,this.shown=new a.vpe,this.hidden=new a.vpe,this.animation=e.animation,this.type=e.type,this.closeOtherPanels=e.closeOthers}isExpanded(e){return this.activeIds.indexOf(e)>-1}expand(e){this._changeOpenState(this._findPanelById(e),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(e=>this._changeOpenState(e,!0))}collapse(e){this._changeOpenState(this._findPanelById(e),!1)}collapseAll(){this.panels.forEach(e=>{this._changeOpenState(e,!1)})}toggle(e){const o=this._findPanelById(e);o&&this._changeOpenState(o,!o.isOpen)}ngAfterContentChecked(){p2(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(e=>{e.isOpen=!e.disabled&&this.activeIds.indexOf(e.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe(bo(1)).subscribe(()=>{this.panels.forEach(e=>{const o=e.panelDiv;o?e.initClassDone||(e.initClassDone=!0,Rl(this._ngZone,o,z4,{animation:!1,runningTransition:"continue",context:{direction:e.isOpen?"show":"hide"}})):e.initClassDone=!1})})}_changeOpenState(e,o){if(null!=e&&!e.disabled&&e.isOpen!==o){let s=!1;this.panelChange.emit({panelId:e.id,nextState:o,preventDefault:()=>{s=!0}}),s||(e.isOpen=o,e.transitionRunning=!0,o&&this.closeOtherPanels&&this._closeOthers(e.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(e,o=!0){this.panels.forEach(s=>{s.id!==e&&s.isOpen&&(s.isOpen=!1,s.transitionRunning=o)})}_findPanelById(e){return this.panels.find(o=>o.id===e)||null}_updateActiveIds(){this.activeIds=this.panels.filter(e=>e.isOpen&&!e.disabled).map(e=>e.id)}_runTransitions(e){this._changeDetector.detectChanges(),this.panels.forEach(o=>{o.transitionRunning&&Rl(this._ngZone,o.panelDiv,z4,{animation:e,runningTransition:"stop",context:{direction:o.isOpen?"show":"hide"}}).subscribe(()=>{o.transitionRunning=!1;const{id:l}=o;o.isOpen?(o.shown.emit(),this.shown.emit(l)):(o.hidden.emit(),this.hidden.emit(l))})})}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(jie),a.Y36(a.R0b),a.Y36(a.sBO))},i.\u0275cmp=a.Xpm({type:i,selectors:[["ngb-accordion"]],contentQueries:function(e,o,s){if(1&e&&a.Suo(s,Rk,4),2&e){let l;a.iGM(l=a.CRH())&&(o.panels=l)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(e,o){2&e&&a.uIk("aria-multiselectable",!o.closeOtherPanels)},inputs:{animation:"animation",activeIds:"activeIds",closeOtherPanels:["closeOthers","closeOtherPanels"],destroyOnHide:"destroyOnHide",type:"type"},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"accordion-button",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id","ngbRef",4,"ngIf"],["role","tabpanel",3,"id","ngbRef"],[1,"accordion-body"]],template:function(e,o){1&e&&(a.YNc(0,vne,3,3,"ng-template",0,1,a.W1O),a.YNc(2,Ene,4,11,"ng-template",2)),2&e&&(a.xp6(2),a.Q6J("ngForOf",o.panels))},dependencies:function(){return[g2,G4,Hr,Ui,Ji,Gie]},encapsulation:2}),i})(),G4=(()=>{class i{constructor(e,o){this.accordion=e,this.panel=o}set ngbPanelToggle(e){e&&(this.panel=e)}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(y2),a.Y36(Rk,9))},i.\u0275dir=a.lG2({type:i,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(e,o){1&e&&a.NdJ("click",function(){return o.accordion.toggle(o.panel.id)}),2&e&&(a.Ikx("disabled",o.panel.disabled),a.uIk("aria-expanded",o.panel.isOpen)("aria-controls",o.panel.id),a.ekj("collapsed",!o.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"}}),i})(),q4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[jn]]}),i})(),Z4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[jn]]}),i})(),W4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({}),i})();var Ky=(()=>(function(i){i.START="start",i.END="end"}(Ky||(Ky={})),Ky))();const K4=({classList:i})=>i.contains("carousel-item-start")||i.contains("carousel-item-end"),US=i=>{i.remove("carousel-item-start"),i.remove("carousel-item-end")},Pk=i=>{US(i),i.remove("carousel-item-prev"),i.remove("carousel-item-next")},$ie=(i,t,{direction:e})=>{const{classList:o}=i;return t?(K4(i)?US(o):(o.add("carousel-item-"+(e===Ky.START?"next":"prev")),q1(i),o.add("carousel-item-"+e)),()=>{Pk(o),o.add("active")}):(US(o),Pk(o),void o.add("active"))},Wie=(i,t,{direction:e})=>{const{classList:o}=i;return t?(K4(i)?US(o):o.add("carousel-item-"+e),()=>{Pk(o),o.remove("active")}):(US(o),Pk(o),void o.remove("active"))};let Kie=(()=>{class i{constructor(e){this._ngbConfig=e,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Ok))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Yie=0,b2=(()=>{class i{constructor(e){this.tplRef=e,this.id="ngb-slide-"+Yie++,this.slid=new a.vpe}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.Rgc))},i.\u0275dir=a.lG2({type:i,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"}}),i})(),Y4=(()=>{class i{constructor(e,o,s,l,u){this._platformId=o,this._ngZone=s,this._cd=l,this._container=u,this.NgbSlideEventSource=Wf,this._destroy$=new Ft.x,this._interval$=new ls(0),this._mouseHover$=new ls(!1),this._focused$=new ls(!1),this._pauseOnHover$=new ls(!1),this._pauseOnFocus$=new ls(!1),this._pause$=new ls(!1),this._wrap$=new ls(!1),this.slide=new a.vpe,this.slid=new a.vpe,this._transitionIds=null,this.animation=e.animation,this.interval=e.interval,this.wrap=e.wrap,this.keyboard=e.keyboard,this.pauseOnHover=e.pauseOnHover,this.pauseOnFocus=e.pauseOnFocus,this.showNavigationArrows=e.showNavigationArrows,this.showNavigationIndicators=e.showNavigationIndicators}set interval(e){this._interval$.next(e)}get interval(){return this._interval$.value}set wrap(e){this._wrap$.next(e)}get wrap(){return this._wrap$.value}set pauseOnHover(e){this._pauseOnHover$.next(e)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(e){this._pauseOnFocus$.next(e)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(e){this._mouseHover$.next(e)}get mouseHover(){return this._mouseHover$.value}set focused(e){this._focused$.next(e)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(Wf.ARROW_LEFT)}arrowRight(){this.focus(),this.next(Wf.ARROW_RIGHT)}ngAfterContentInit(){xo(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const e=Ex([this.slide.pipe((0,pt.U)(o=>o.current),Pf(this.activeId)),this._wrap$,this.slides.changes.pipe(Pf(null))]).pipe((0,pt.U)(([o,s])=>{const l=this.slides.toArray(),u=this._getSlideIdxById(o);return s?l.length>1:u<l.length-1}),o0());Ex([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,e]).pipe((0,pt.U)(([o,s,l,u,g,_,w])=>o||s&&l||u&&g||!w?0:_),o0(),Dr(o=>o>0?xk(o,o):T4),Vr(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(Wf.TIMER)))}),this.slides.changes.pipe(Vr(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(e=>(i=>{BS.get(i)?.complete()})(this._getSlideElement(e))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe(bo(1)).subscribe(()=>{for(const{id:e}of this.slides){const o=this._getSlideElement(e);e===this.activeId?o.classList.add("active"):o.classList.remove("active")}})})}ngAfterContentChecked(){let e=this._getSlideById(this.activeId);this.activeId=e?e.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const e=this._getSlideElement(this.activeId);e&&e.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(e,o){this._cycleToSelected(e,this._getSlideEventDirection(this.activeId,e),o)}prev(e){this._cycleToSelected(this._getPrevSlide(this.activeId),Ky.END,e)}next(e){this._cycleToSelected(this._getNextSlide(this.activeId),Ky.START,e)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(e,o,s){const l=this._transitionIds;if(l&&(l[0]!==e||l[1]!==this.activeId))return;let u=this._getSlideById(e);if(u&&u.id!==this.activeId){this._transitionIds=[this.activeId,e],this.slide.emit({prev:this.activeId,current:u.id,direction:o,paused:this._pause$.value,source:s});const g={animation:this.animation,runningTransition:"stop",context:{direction:o}},_=[],w=this._getSlideById(this.activeId);if(w){const F=Rl(this._ngZone,this._getSlideElement(w.id),Wie,g);F.subscribe(()=>{w.slid.emit({isShown:!1,direction:o,source:s})}),_.push(F)}const T=this.activeId;this.activeId=u.id;const D=this._getSlideById(this.activeId),O=Rl(this._ngZone,this._getSlideElement(u.id),$ie,g);O.subscribe(()=>{D?.slid.emit({isShown:!0,direction:o,source:s})}),_.push(O),Sk(..._).pipe(bo(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:T,current:u.id,direction:o,paused:this._pause$.value,source:s})})}this._cd.markForCheck()}_getSlideEventDirection(e,o){return this._getSlideIdxById(e)>this._getSlideIdxById(o)?Ky.END:Ky.START}_getSlideById(e){return this.slides.find(o=>o.id===e)||null}_getSlideIdxById(e){const o=this._getSlideById(e);return null!=o?this.slides.toArray().indexOf(o):-1}_getNextSlide(e){const o=this.slides.toArray(),s=this._getSlideIdxById(e);return s===o.length-1?this.wrap?o[0].id:o[o.length-1].id:o[s+1].id}_getPrevSlide(e){const o=this.slides.toArray(),s=this._getSlideIdxById(e);return 0===s?this.wrap?o[o.length-1].id:o[0].id:o[s-1].id}_getSlideElement(e){return this._container.nativeElement.querySelector(`#slide-${e}`)}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(Kie),a.Y36(a.Lbi),a.Y36(a.R0b),a.Y36(a.sBO),a.Y36(a.SBq))},i.\u0275cmp=a.Xpm({type:i,selectors:[["ngb-carousel"]],contentQueries:function(e,o,s){if(1&e&&a.Suo(s,b2,4),2&e){let l;a.iGM(l=a.CRH())&&(o.slides=l)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(e,o){1&e&&a.NdJ("keydown.arrowLeft",function(){return o.keyboard&&o.arrowLeft()})("keydown.arrowRight",function(){return o.keyboard&&o.arrowRight()})("mouseenter",function(){return o.mouseHover=!0})("mouseleave",function(){return o.mouseHover=!1})("focusin",function(){return o.focused=!0})("focusout",function(){return o.focused=!1}),2&e&&(a.uIk("aria-activedescendant","slide-"+o.activeId),a.Udp("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],decls:6,vars:6,consts:function(){let t,e,o;return t=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,e=$localize`:@@ngb.carousel.previous:Previous`,o=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],t,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],e,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],o]},template:function(e,o){1&e&&(a.TgZ(0,"div",0),a.YNc(1,Sne,1,5,"button",1),a.qZA(),a.TgZ(2,"div",2),a.YNc(3,Ine,4,4,"div",3),a.qZA(),a.YNc(4,Mne,4,0,"button",4),a.YNc(5,Ane,4,0,"button",5)),2&e&&(a.ekj("visually-hidden",!o.showNavigationIndicators),a.xp6(1),a.Q6J("ngForOf",o.slides),a.xp6(2),a.Q6J("ngForOf",o.slides),a.xp6(1),a.Q6J("ngIf",o.showNavigationArrows),a.xp6(1),a.Q6J("ngIf",o.showNavigationArrows))},dependencies:[Ui,Hr,Ji],encapsulation:2,changeDetection:0}),i})();var Wf=(()=>(function(i){i.TIMER="timer",i.ARROW_LEFT="arrowLeft",i.ARROW_RIGHT="arrowRight",i.INDICATOR="indicator"}(Wf||(Wf={})),Wf))();let J4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[jn]]}),i})(),Q4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({}),i})();var so=(()=>(function(i){i[i.Tab=9]="Tab",i[i.Enter=13]="Enter",i[i.Escape=27]="Escape",i[i.Space=32]="Space",i[i.PageUp=33]="PageUp",i[i.PageDown=34]="PageDown",i[i.End=35]="End",i[i.Home=36]="Home",i[i.ArrowLeft=37]="ArrowLeft",i[i.ArrowUp=38]="ArrowUp",i[i.ArrowRight=39]="ArrowRight",i[i.ArrowDown=40]="ArrowDown"}(so||(so={})),so))();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const e5=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function t5(i){const t=Array.from(i.querySelectorAll(e5)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let u5=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[jn,w1]]}),i})(),f5=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({}),i})();class x0{constructor(t,e,o){this.nodes=t,this.viewRef=e,this.componentRef=o}}let kre=(()=>{class i{constructor(e,o){this._el=e,this._zone=o}ngOnInit(){this._zone.onStable.asObservable().pipe(bo(1)).subscribe(()=>{Rl(this._zone,this._el.nativeElement,(e,o)=>{o&&q1(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Rl(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.SBq),a.Y36(a.R0b))},i.\u0275cmp=a.Xpm({type:i,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,o){2&e&&(a.Tol("modal-backdrop"+(o.backdropClass?" "+o.backdropClass:"")),a.ekj("show",!o.animation)("fade",o.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,o){},encapsulation:2}),i})();class g5{close(t){}dismiss(t){}}class Ore{constructor(t,e,o,s){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=o,this._beforeDismiss=s,this._closed=new Ft.x,this._dismissed=new Ft.x,this._hidden=new Ft.x,t.instance.dismissEvent.subscribe(l=>{this.dismiss(l)}),this.result=new Promise((l,u)=>{this._resolve=l,this._reject=u}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Vr(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Vr(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function U4(i){return i&&i.then}(e)?!1!==e&&this._dismiss(t):e.then(o=>{!1!==o&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():fn(void 0);t.subscribe(()=>{const{nativeElement:o}=this._windowCmptRef.location;o.parentNode.removeChild(o),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:o}=this._backdropCmptRef.location;o.parentNode.removeChild(o),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Sk(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var GS=(()=>(function(i){i[i.BACKDROP_CLICK=0]="BACKDROP_CLICK",i[i.ESC=1]="ESC"}(GS||(GS={})),GS))();let Rre=(()=>{class i{constructor(e,o,s){this._document=e,this._elRef=o,this._zone=s,this._closed$=new Ft.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new a.vpe,this.shown=new Ft.x,this.hidden=new Ft.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":p2(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(bo(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,o={animation:this.animation,runningTransition:"stop"},u=Sk(Rl(this._zone,e,()=>e.classList.remove("show"),o),Rl(this._zone,this._dialogEl.nativeElement,()=>{},o));return u.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),u}_show(){const e={animation:this.animation,runningTransition:"continue"};Sk(Rl(this._zone,this._elRef.nativeElement,(l,u)=>{u&&q1(l),l.classList.add("show")},e),Rl(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Us(e,"keydown").pipe(Vr(this._closed$),Yr(s=>s.which===so.Escape)).subscribe(s=>{this.keyboard?requestAnimationFrame(()=>{s.defaultPrevented||this._zone.run(()=>this.dismiss(GS.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let o=!1;Us(this._dialogEl.nativeElement,"mousedown").pipe(Vr(this._closed$),(0,$o.b)(()=>o=!1),Dr(()=>Us(e,"mouseup").pipe(Vr(this._closed$),bo(1))),Yr(({target:s})=>e===s)).subscribe(()=>{o=!0}),Us(e,"click").pipe(Vr(this._closed$)).subscribe(({target:s})=>{e===s&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!o&&this._zone.run(()=>this.dismiss(GS.BACKDROP_CLICK))),o=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const o=e.querySelector("[ngbAutofocus]"),s=t5(e)[0];(o||s||e).focus()}}_restoreFocus(){const e=this._document.body,o=this._elWithFocus;let s;s=o&&o.focus&&e.contains(o)?o:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>s.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Rl(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(ve),a.Y36(a.SBq),a.Y36(a.R0b))},i.\u0275cmp=a.Xpm({type:i,selectors:[["ngb-modal-window"]],viewQuery:function(e,o){if(1&e&&a.Gf(zne,7),2&e){let s;a.iGM(s=a.CRH())&&(o._dialogEl=s.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,o){2&e&&(a.uIk("aria-modal",!0)("aria-labelledby",o.ariaLabelledBy)("aria-describedby",o.ariaDescribedBy),a.Tol("modal d-block"+(o.windowClass?" "+o.windowClass:"")),a.ekj("fade",o.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:xne,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,o){1&e&&(a.F$t(),a.TgZ(0,"div",0,1)(2,"div",2),a.Hsn(3),a.qZA()()),2&e&&a.Tol("modal-dialog"+(o.size?" modal-"+o.size:"")+(o.centered?" modal-dialog-centered":"")+o.fullscreenClass+(o.scrollable?" modal-dialog-scrollable":"")+(o.modalDialogClass?" "+o.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),i})(),Pre=(()=>{class i{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),o=this._document.body,s=o.style,{overflow:l,paddingRight:u}=s;if(e>0){const g=parseFloat(window.getComputedStyle(o).paddingRight);s.paddingRight=`${g+e}px`}return s.overflow="hidden",()=>{e>0&&(s.paddingRight=u),s.overflow=l}}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(ve))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Nre=(()=>{class i{constructor(e,o,s,l,u,g){this._applicationRef=e,this._injector=o,this._document=s,this._scrollBar=l,this._rendererFactory=u,this._ngZone=g,this._activeWindowCmptHasChanged=new Ft.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new a.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const _=this._windowCmpts[this._windowCmpts.length-1];((i,t,e,o=!1)=>{this._ngZone.runOutsideAngular(()=>{const s=Us(t,"focusin").pipe(Vr(e),(0,pt.U)(l=>l.target));Us(t,"keydown").pipe(Vr(e),Yr(l=>l.which===so.Tab),HA(s)).subscribe(([l,u])=>{const[g,_]=t5(t);(u===g||u===t)&&l.shiftKey&&(_.focus(),l.preventDefault()),u===_&&!l.shiftKey&&(g.focus(),l.preventDefault())}),o&&Us(t,"click").pipe(Vr(e),HA(s),(0,pt.U)(l=>l[1])).subscribe(l=>l.focus())})})(0,_.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(_.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,o,s,l){const u=l.container instanceof HTMLElement?l.container:C0(l.container)?this._document.querySelector(l.container):this._document.body,g=this._rendererFactory.createRenderer(null,null);if(!u)throw new Error(`The specified modal container "${l.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const _=new g5,w=this._getContentRef(e,l.injector||o,s,_,l);let T=!1!==l.backdrop?this._attachBackdrop(e,u):void 0,D=this._attachWindowComponent(e,u,w),O=new Ore(D,w,T,l.beforeDismiss);return this._registerModalRef(O),this._registerWindowCmpt(D),O.hidden.pipe(bo(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(g.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),_.close=F=>{O.close(F)},_.dismiss=F=>{O.dismiss(F)},this._applyWindowOptions(D.instance,l),1===this._modalRefs.length&&g.addClass(this._document.body,"modal-open"),T&&T.instance&&(this._applyBackdropOptions(T.instance,l),T.changeDetectorRef.detectChanges()),D.changeDetectorRef.detectChanges(),O}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(o=>o.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,o){let l=e.resolveComponentFactory(kre).create(this._injector);return this._applicationRef.attachView(l.hostView),o.appendChild(l.location.nativeElement),l}_attachWindowComponent(e,o,s){let u=e.resolveComponentFactory(Rre).create(this._injector,s.nodes);return this._applicationRef.attachView(u.hostView),o.appendChild(u.location.nativeElement),u}_applyWindowOptions(e,o){this._windowAttributes.forEach(s=>{C0(o[s])&&(e[s]=o[s])})}_applyBackdropOptions(e,o){this._backdropAttributes.forEach(s=>{C0(o[s])&&(e[s]=o[s])})}_getContentRef(e,o,s,l,u){return s?s instanceof a.Rgc?this._createFromTemplateRef(s,l):p2(s)?this._createFromString(s):this._createFromComponent(e,o,s,l,u):new x0([])}_createFromTemplateRef(e,o){const l=e.createEmbeddedView({$implicit:o,close(u){o.close(u)},dismiss(u){o.dismiss(u)}});return this._applicationRef.attachView(l),new x0([l.rootNodes],l)}_createFromString(e){const o=this._document.createTextNode(`${e}`);return new x0([[o]])}_createFromComponent(e,o,s,l,u){const g=e.resolveComponentFactory(s),_=a.zs3.create({providers:[{provide:g5,useValue:l}],parent:o}),w=g.create(_),T=w.location.nativeElement;return u.scrollable&&T.classList.add("component-host-scrollable"),this._applicationRef.attachView(w.hostView),new x0([[T]],w.hostView,w)}_setAriaHidden(e){const o=e.parentElement;o&&e!==this._document.body&&(Array.from(o.children).forEach(s=>{s!==e&&"SCRIPT"!==s.nodeName&&(this._ariaHiddenValues.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}),this._setAriaHidden(o))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,o)=>{e?o.setAttribute("aria-hidden",e):o.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const o=()=>{const s=this._modalRefs.indexOf(e);s>-1&&(this._modalRefs.splice(s,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(o,o)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const o=this._windowCmpts.indexOf(e);o>-1&&(this._windowCmpts.splice(o,1),this._activeWindowCmptHasChanged.next())})}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(a.z2F),a.LFG(a.zs3),a.LFG(ve),a.LFG(Pre),a.LFG(a.FYo),a.LFG(a.R0b))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Fre=(()=>{class i{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Ok))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Uk=(()=>{class i{constructor(e,o,s,l){this._moduleCFR=e,this._injector=o,this._modalStack=s,this._config=l}open(e,o={}){const s={...this._config,animation:this._config.animation,...o};return this._modalStack.open(this._moduleCFR,this._injector,e,s)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(a._Vd),a.LFG(a.zs3),a.LFG(Nre),a.LFG(Fre))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),m5=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[Uk]}),i})(),b5=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[jn]]}),i})(),I5=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[jn]]}),i})(),A5=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[jn]]}),i})(),k5=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[jn]]}),i})(),$re=(()=>{class i{constructor(){this.max=10,this.readonly=!1,this.resettable=!1}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Wre=(()=>{class i{constructor(e,o){this._changeDetectorRef=o,this.contexts=[],this.disabled=!1,this.hover=new a.vpe,this.leave=new a.vpe,this.rateChange=new a.vpe(!0),this.onChange=s=>{},this.onTouched=()=>{},this.max=e.max,this.readonly=e.readonly}ariaValueText(){return`${this.nextRate} out of ${this.max}`}isInteractive(){return!this.readonly&&!this.disabled}enter(e){this.isInteractive()&&this._updateState(e),this.hover.emit(e)}handleBlur(){this.onTouched()}handleClick(e){this.isInteractive()&&this.update(this.resettable&&this.rate===e?0:e)}handleKeyDown(e){switch(e.which){case so.ArrowDown:case so.ArrowLeft:this.update(this.rate-1);break;case so.ArrowUp:case so.ArrowRight:this.update(this.rate+1);break;case so.Home:this.update(0);break;case so.End:this.update(this.max);break;default:return}e.preventDefault()}ngOnChanges(e){e.rate&&this.update(this.rate),e.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(e){this.disabled=e}update(e,o=!0){const s=h2(e,this.max,0);this.isInteractive()&&this.rate!==s&&(this.rate=s,this.rateChange.emit(this.rate)),o&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(e){this.update(e,!1),this._changeDetectorRef.markForCheck()}_updateState(e){this.nextRate=e,this.contexts.forEach((o,s)=>o.fill=Math.round(100*h2(e-s,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(e,o)=>({fill:0,index:o}))}}return i.\u0275fac=function(e){return new(e||i)(a.Y36($re),a.Y36(a.sBO))},i.\u0275cmp=a.Xpm({type:i,selectors:[["ngb-rating"]],contentQueries:function(e,o,s){if(1&e&&a.Suo(s,a.Rgc,5),2&e){let l;a.iGM(l=a.CRH())&&(o.starTemplateFromContent=l.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(e,o){1&e&&a.NdJ("blur",function(){return o.handleBlur()})("keydown",function(l){return o.handleKeyDown(l)})("mouseleave",function(){return o.reset()}),2&e&&(a.Ikx("tabindex",o.disabled?-1:0),a.uIk("aria-valuemax",o.max)("aria-valuenow",o.nextRate)("aria-valuetext",o.ariaValueText())("aria-disabled",!!o.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},features:[a._Bn([{provide:Ss,useExisting:(0,a.Gpc)(()=>i),multi:!0}]),a.TTD],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,o){1&e&&(a.YNc(0,Tie,1,1,"ng-template",null,0,a.W1O),a.YNc(2,xie,4,5,"ng-template",1)),2&e&&(a.xp6(2),a.Q6J("ngForOf",o.contexts))},dependencies:[Ui,Hr],encapsulation:2,changeDetection:0}),i})(),O5=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[jn]]}),i})(),R5=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[jn]]}),i})(),P5=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[jn]]}),i})(),N5=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({}),i})();new a.OlP("live announcer delay",{providedIn:"root",factory:function Jre(){return 100}});let F5=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[jn]]}),i})(),L5=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({}),i})();const Qre=[q4,Z4,W4,J4,Q4,u5,f5,m5,b5,L5,I5,A5,k5,O5,R5,P5,N5,F5];let Xre=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[Qre,q4,Z4,W4,J4,Q4,u5,f5,m5,b5,L5,I5,A5,k5,O5,R5,P5,N5,F5]}),i})(),ht=(()=>{class i{static addClass(e,o){e.classList?e.classList.add(o):e.className+=" "+o}static addMultipleClasses(e,o){if(e.classList){let s=o.trim().split(" ");for(let l=0;l<s.length;l++)e.classList.add(s[l])}else{let s=o.split(" ");for(let l=0;l<s.length;l++)e.className+=" "+s[l]}}static removeClass(e,o){e.classList?e.classList.remove(o):e.className=e.className.replace(new RegExp("(^|\\b)"+o.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(e,o){return e.classList?e.classList.contains(o):new RegExp("(^| )"+o+"( |$)","gi").test(e.className)}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(o){return o!==e})}static find(e,o){return Array.from(e.querySelectorAll(o))}static findSingle(e,o){return e?e.querySelector(o):null}static index(e){let o=e.parentNode.childNodes,s=0;for(var l=0;l<o.length;l++){if(o[l]==e)return s;1==o[l].nodeType&&s++}return-1}static indexWithinGroup(e,o){let s=e.parentNode?e.parentNode.childNodes:[],l=0;for(var u=0;u<s.length;u++){if(s[u]==e)return l;s[u].attributes&&s[u].attributes[o]&&1==s[u].nodeType&&l++}return-1}static relativePosition(e,o){let s=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e);const l=o.offsetHeight,u=o.getBoundingClientRect(),g=this.getViewport();let _,w;u.top+l+s.height>g.height?(_=-1*s.height,e.style.transformOrigin="bottom",u.top+_<0&&(_=-1*u.top)):(_=l,e.style.transformOrigin="top"),w=s.width>g.width?-1*u.left:u.left+s.width>g.width?-1*(u.left+s.width-g.width):0,e.style.top=_+"px",e.style.left=w+"px"}static absolutePosition(e,o){let F,j,s=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),l=s.height,u=s.width,g=o.offsetHeight,_=o.offsetWidth,w=o.getBoundingClientRect(),T=this.getWindowScrollTop(),D=this.getWindowScrollLeft(),O=this.getViewport();w.top+g+l>O.height?(F=w.top+T-l,e.style.transformOrigin="bottom",F<0&&(F=T)):(F=g+w.top+T,e.style.transformOrigin="top"),j=w.left+u>O.width?Math.max(0,w.left+D+_-u):w.left+D,e.style.top=F+"px",e.style.left=j+"px"}static getParents(e,o=[]){return null===e.parentNode?o:this.getParents(e.parentNode,o.concat([e.parentNode]))}static getScrollableParents(e){let o=[];if(e){let s=this.getParents(e);const l=/(auto|scroll)/,u=g=>{let _=window.getComputedStyle(g,null);return l.test(_.getPropertyValue("overflow"))||l.test(_.getPropertyValue("overflowX"))||l.test(_.getPropertyValue("overflowY"))};for(let g of s){let _=1===g.nodeType&&g.dataset.scrollselectors;if(_){let w=_.split(",");for(let T of w){let D=this.findSingle(g,T);D&&u(D)&&o.push(D)}}9!==g.nodeType&&u(g)&&o.push(g)}}return o}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let o=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",o}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let o=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",o}static getHiddenElementDimensions(e){let o={};return e.style.visibility="hidden",e.style.display="block",o.width=e.offsetWidth,o.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",o}static scrollInView(e,o){let s=getComputedStyle(e).getPropertyValue("borderTopWidth"),l=s?parseFloat(s):0,u=getComputedStyle(e).getPropertyValue("paddingTop"),g=u?parseFloat(u):0,_=e.getBoundingClientRect(),T=o.getBoundingClientRect().top+document.body.scrollTop-(_.top+document.body.scrollTop)-l-g,D=e.scrollTop,O=e.clientHeight,F=this.getOuterHeight(o);T<0?e.scrollTop=D+T:T+F>O&&(e.scrollTop=D+T-O+F)}static fadeIn(e,o){e.style.opacity=0;let s=+new Date,l=0,u=function(){l=+e.style.opacity.replace(",",".")+((new Date).getTime()-s)/o,e.style.opacity=l,s=+new Date,+l<1&&(window.requestAnimationFrame&&requestAnimationFrame(u)||setTimeout(u,16))};u()}static fadeOut(e,o){var s=1,g=50/o;let _=setInterval(()=>{(s-=g)<=0&&(s=0,clearInterval(_)),e.style.opacity=s},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,o){var s=Element.prototype;return(s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.msMatchesSelector||function(u){return-1!==[].indexOf.call(document.querySelectorAll(u),this)}).call(e,o)}static getOuterWidth(e,o){let s=e.offsetWidth;if(o){let l=getComputedStyle(e);s+=parseFloat(l.marginLeft)+parseFloat(l.marginRight)}return s}static getHorizontalPadding(e){let o=getComputedStyle(e);return parseFloat(o.paddingLeft)+parseFloat(o.paddingRight)}static getHorizontalMargin(e){let o=getComputedStyle(e);return parseFloat(o.marginLeft)+parseFloat(o.marginRight)}static innerWidth(e){let o=e.offsetWidth,s=getComputedStyle(e);return o+=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight),o}static width(e){let o=e.offsetWidth,s=getComputedStyle(e);return o-=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight),o}static getInnerHeight(e){let o=e.offsetHeight,s=getComputedStyle(e);return o+=parseFloat(s.paddingTop)+parseFloat(s.paddingBottom),o}static getOuterHeight(e,o){let s=e.offsetHeight;if(o){let l=getComputedStyle(e);s+=parseFloat(l.marginTop)+parseFloat(l.marginBottom)}return s}static getHeight(e){let o=e.offsetHeight,s=getComputedStyle(e);return o-=parseFloat(s.paddingTop)+parseFloat(s.paddingBottom)+parseFloat(s.borderTopWidth)+parseFloat(s.borderBottomWidth),o}static getWidth(e){let o=e.offsetWidth,s=getComputedStyle(e);return o-=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight)+parseFloat(s.borderLeftWidth)+parseFloat(s.borderRightWidth),o}static getViewport(){let e=window,o=document,s=o.documentElement,l=o.getElementsByTagName("body")[0];return{width:e.innerWidth||s.clientWidth||l.clientWidth,height:e.innerHeight||s.clientHeight||l.clientHeight}}static getOffset(e){var o=e.getBoundingClientRect();return{top:o.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:o.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,o){let s=e.parentNode;if(!s)throw"Can't replace element";return s.replaceChild(o,e)}static getUserAgent(){return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,o){if(this.isElement(o))o.appendChild(e);else{if(!o.el||!o.el.nativeElement)throw"Cannot append "+o+" to "+e;o.el.nativeElement.appendChild(e)}}static removeChild(e,o){if(this.isElement(o))o.removeChild(e);else{if(!o.el||!o.el.nativeElement)throw"Cannot remove "+e+" from "+o;o.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let o=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let o=document.createElement("div");o.className="p-scrollbar-measure",document.body.appendChild(o);let s=o.offsetWidth-o.clientWidth;return document.body.removeChild(o),this.calculatedScrollbarWidth=s,s}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let o=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=o,o}static invokeElementMethod(e,o,s){e[o].apply(e,s)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),o=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:o[1]||"",version:o[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return null===e.offsetParent}static getFocusableElements(e){let o=i.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),s=[];for(let l of o)"none"!=getComputedStyle(l).display&&"hidden"!=getComputedStyle(l).visibility&&s.push(l);return s}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}}return i.zindex=1e3,i.calculatedScrollbarWidth=null,i.calculatedScrollbarHeight=null,i})();class D2{constructor(t,e=(()=>{})){this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=ht.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let S0=(()=>{class i{constructor(e,o,s){this.el=e,this.zone=o,this.config=s}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(e){let o=this.getInk();if(!o||"none"===getComputedStyle(o,null).display)return;if(ht.removeClass(o,"p-ink-active"),!ht.getHeight(o)&&!ht.getWidth(o)){let g=Math.max(ht.getOuterWidth(this.el.nativeElement),ht.getOuterHeight(this.el.nativeElement));o.style.height=g+"px",o.style.width=g+"px"}let s=ht.getOffset(this.el.nativeElement),l=e.pageX-s.left+document.body.scrollTop-ht.getWidth(o)/2,u=e.pageY-s.top+document.body.scrollLeft-ht.getHeight(o)/2;o.style.top=u+"px",o.style.left=l+"px",ht.addClass(o,"p-ink-active")}getInk(){for(let e=0;e<this.el.nativeElement.children.length;e++)if(-1!==this.el.nativeElement.children[e].className.indexOf("p-ink"))return this.el.nativeElement.children[e];return null}resetInk(){let e=this.getInk();e&&ht.removeClass(e,"p-ink-active")}onAnimationEnd(e){ht.removeClass(e.currentTarget,"p-ink-active")}create(){let e=document.createElement("span");e.className="p-ink",this.el.nativeElement.appendChild(e),this.animationListener=this.onAnimationEnd.bind(this),e.addEventListener("animationend",this.animationListener)}remove(){let e=this.getInk();e&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("animationend",this.animationListener),ht.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.SBq),a.Y36(a.R0b),a.Y36(zn,8))},i.\u0275dir=a.lG2({type:i,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),i})(),Yf=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn]}),i})(),I2=(()=>{class i{constructor(e){this.el=e,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,ht.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),(this.icon||this.loading)&&this.createIconEl();let e=document.createElement("span");this.icon&&!this.label&&e.setAttribute("aria-hidden","true"),e.className="p-button-label",this.label?e.appendChild(document.createTextNode(this.label)):e.innerHTML="&nbsp;",this.el.nativeElement.appendChild(e),this.initialized=!0}getStyleClass(){let e="p-button p-component";return this.icon&&!this.label&&(e+=" p-button-icon-only"),this.loading&&(e+=" p-disabled p-button-loading",!this.icon&&this.label&&(e+=" p-button-loading-label-only")),e}setStyleClass(){let e=this.getStyleClass();this.el.nativeElement.className=e+" "+this._initialStyleClass}createIconEl(){let e=document.createElement("span");e.className="p-button-icon",e.setAttribute("aria-hidden","true");let o=this.label?"p-button-icon-"+this.iconPos:null;o&&ht.addClass(e,o);let s=this.getIconClass();s&&ht.addMultipleClasses(e,s);let l=ht.findSingle(this.el.nativeElement,".p-button-label");l?this.el.nativeElement.insertBefore(e,l):this.el.nativeElement.appendChild(e)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let e=ht.findSingle(this.el.nativeElement,".p-button-icon");e?e.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let e=ht.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(e)}get label(){return this._label}set label(e){this._label=e,this.initialized&&(ht.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label||"&nbsp;",(this.loading||this.icon)&&this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.SBq))},i.\u0275dir=a.lG2({type:i,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),i})(),qS=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn,Yf]}),i})();const V5=["container"],toe=function(i,t,e,o){return{"pi-info-circle":i,"pi-exclamation-triangle":t,"pi-times-circle":e,"pi-check":o}};function noe(i,t){if(1&i&&(a.ynx(0),a._UZ(1,"span",6),a.TgZ(2,"div",7)(3,"div",8),a._uU(4),a.qZA(),a.TgZ(5,"div",9),a._uU(6),a.qZA()(),a.BQk()),2&i){const e=a.oxw();a.xp6(1),a.Tol("p-toast-message-icon pi"+(e.message.icon?" "+e.message.icon:"")),a.Q6J("ngClass",a.l5B(5,toe,"info"==e.message.severity,"warn"==e.message.severity,"error"==e.message.severity,"success"==e.message.severity)),a.xp6(3),a.Oqu(e.message.summary),a.xp6(2),a.Oqu(e.message.detail)}}function ioe(i,t){1&i&&a.GkF(0)}function roe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"button",10),a.NdJ("click",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onCloseIconClick(s))})("keydown.enter",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onCloseIconClick(s))}),a._UZ(1,"span",11),a.qZA()}}const ooe=function(i){return[i,"p-toast-message"]},soe=function(i,t,e,o){return{showTransformParams:i,hideTransformParams:t,showTransitionParams:e,hideTransitionParams:o}},aoe=function(i){return{value:"visible",params:i}},loe=function(i){return{$implicit:i}};function coe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"p-toastItem",3),a.NdJ("onClose",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onMessageClose(s))})("@toastAnimation.start",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onAnimationStart(s))})("@toastAnimation.done",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onAnimationEnd(s))}),a.qZA()}if(2&i){const e=t.$implicit,o=t.index,s=a.oxw();a.Q6J("message",e)("index",o)("template",s.template)("@toastAnimation",void 0)("showTransformOptions",s.showTransformOptions)("hideTransformOptions",s.hideTransformOptions)("showTransitionOptions",s.showTransitionOptions)("hideTransitionOptions",s.hideTransitionOptions)}}let uoe=(()=>{class i{constructor(e){this.zone=e,this.onClose=new a.vpe}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick(e){this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),e.preventDefault()}ngOnDestroy(){this.clearTimeout()}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.R0b))},i.\u0275cmp=a.Xpm({type:i,selectors:[["p-toastItem"]],viewQuery:function(e,o){if(1&e&&a.Gf(V5,5),2&e){let s;a.iGM(s=a.CRH())&&(o.containerViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{message:"message",index:"index",template:"template",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},decls:6,vars:21,consts:[[3,"ngClass","mouseenter","mouseleave"],["container",""],["role","alert","aria-live","assertive","aria-atomic","true",1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"ngClass"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[1,"p-toast-icon-close-icon","pi","pi-times"]],template:function(e,o){1&e&&(a.TgZ(0,"div",0,1),a.NdJ("mouseenter",function(){return o.onMouseEnter()})("mouseleave",function(){return o.onMouseLeave()}),a.TgZ(2,"div",2),a.YNc(3,noe,7,10,"ng-container",3),a.YNc(4,ioe,1,0,"ng-container",4),a.YNc(5,roe,2,0,"button",5),a.qZA()()),2&e&&(a.Tol(o.message.styleClass),a.Q6J("ngClass",a.VKq(10,ooe,"p-toast-message-"+o.message.severity))("@messageState",a.VKq(17,aoe,a.l5B(12,soe,o.showTransformOptions,o.hideTransformOptions,o.showTransitionOptions,o.hideTransitionOptions))),a.uIk("id",o.message.id),a.xp6(2),a.Q6J("ngClass",o.message.contentStyleClass),a.xp6(1),a.Q6J("ngIf",!o.template),a.xp6(1),a.Q6J("ngTemplateOutlet",o.template)("ngTemplateOutletContext",a.VKq(19,loe,o.message)),a.xp6(1),a.Q6J("ngIf",!1!==o.message.closable))},dependencies:[lo,Ji,Hr,S0],encapsulation:2,data:{animation:[Sa("messageState",[Wo("visible",ti({transform:"translateY(0)",opacity:1})),dr("void => *",[ti({transform:"{{showTransformParams}}",opacity:0}),Fr("{{showTransitionParams}}")]),dr("* => void",[Fr("{{hideTransitionParams}}",ti({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0}),i})(),H5=(()=>{class i{constructor(e,o,s){this.messageService=e,this.cd=o,this.config=s,this.autoZIndex=!0,this.baseZIndex=0,this.position="top-right",this.preventOpenDuplicates=!1,this.preventDuplicates=!1,this.showTransformOptions="translateY(100%)",this.hideTransformOptions="translateY(-100%)",this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="250ms ease-in",this.onClose=new a.vpe,this.id=Jo()}ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e)if(e instanceof Array){const o=e.filter(s=>this.canAdd(s));this.add(o)}else this.canAdd(e)&&this.add([e])}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.breakpoints&&this.createStyle()}add(e){this.messages=this.messages?[...this.messages,...e]:[...e],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,...e]:[...e]),this.cd.markForCheck()}canAdd(e){let o=this.key===e.key;return o&&this.preventOpenDuplicates&&(o=!this.containsMessage(this.messages,e)),o&&this.preventDuplicates&&(o=!this.containsMessage(this.messagesArchieve,e)),o}containsMessage(e,o){return!!e&&null!=e.find(s=>s.summary===o.summary&&s.detail==o.detail&&s.severity===o.severity)}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.template=e.template})}onMessageClose(e){this.messages.splice(e.index,1),this.onClose.emit({message:e.message}),this.cd.detectChanges()}onAnimationStart(e){"void"===e.fromState&&(this.containerViewChild.nativeElement.setAttribute(this.id,""),this.autoZIndex&&""===this.containerViewChild.nativeElement.style.zIndex&&sr.set("modal",this.containerViewChild.nativeElement,this.baseZIndex||this.config.zIndex.modal))}onAnimationEnd(e){"void"===e.toState&&this.autoZIndex&&It.isEmpty(this.messages)&&sr.clear(this.containerViewChild.nativeElement)}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let o in this.breakpoints){let s="";for(let l in this.breakpoints[o])s+=l+":"+this.breakpoints[o][l]+" !important;";e+=`\n                    @media screen and (max-width: ${o}) {\n                        .p-toast[${this.id}] {\n                           ${s}\n                        }\n                    }\n                `}this.styleElement.innerHTML=e}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&sr.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(Ws),a.Y36(a.sBO),a.Y36(zn))},i.\u0275cmp=a.Xpm({type:i,selectors:[["p-toast"]],contentQueries:function(e,o,s){if(1&e&&a.Suo(s,Ci,4),2&e){let l;a.iGM(l=a.CRH())&&(o.templates=l)}},viewQuery:function(e,o){if(1&e&&a.Gf(V5,5),2&e){let s;a.iGM(s=a.CRH())&&(o.containerViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:"preventOpenDuplicates",preventDuplicates:"preventDuplicates",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose"]],template:function(e,o){1&e&&(a.TgZ(0,"div",0,1),a.YNc(2,coe,1,8,"p-toastItem",2),a.qZA()),2&e&&(a.Tol(o.styleClass),a.Q6J("ngClass","p-toast p-component p-toast-"+o.position)("ngStyle",o.style),a.xp6(2),a.Q6J("ngForOf",o.messages))},dependencies:[lo,Ui,uo,uoe],styles:[".p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translate(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translate(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-toast-icon-close.p-link{cursor:pointer}\n"],encapsulation:2,data:{animation:[Sa("toastAnimation",[dr(":enter, :leave",[BP("@*",HP())])])]},changeDetection:0}),i})(),doe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn,Yf,ar]}),i})();function hoe(i,t){if(1&i&&(a.TgZ(0,"div",22)(1,"div"),a._UZ(2,"img",23),a.qZA(),a.TgZ(3,"div",24),a._uU(4),a.qZA(),a.TgZ(5,"div"),a._uU(6),a.qZA(),a.TgZ(7,"div"),a._uU(8),a.qZA()()),2&i){const e=t.$implicit;a.xp6(2),a.s9C("src",e.placeholderImg,a.LSH),a.xp6(2),a.Oqu(e.title),a.xp6(2),a.Oqu(e.quantity),a.xp6(2),a.Oqu(e.totalPrice)}}function poe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",15)(1,"h4",16),a._uU(2,"Cart"),a.qZA(),a.TgZ(3,"button",17),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.KtG(l.dismiss("Cross click"))}),a.qZA()(),a.TgZ(4,"div",18),a.YNc(5,hoe,9,4,"div",19),a.qZA(),a.TgZ(6,"div",20)(7,"a",21),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.KtG(l.close("Close click"))}),a._uU(8,"View My Shopping Cart"),a.qZA()()}if(2&i){const e=a.oxw();a.xp6(5),a.Q6J("ngForOf",e.items)}}let D0=(()=>{class i{constructor(e,o,s,l,u,g,_){this.auth=e,this.http=o,this.router=s,this.productService=l,this.messageService=u,this.modalService=g,this.firebaseService=_,this.checkLoggedIn=!1,this.displayedColumns=["position","name","weight","symbol"],this.dataSource=this.items,this.styling={width:"470px",top:"10px !important"},this.checkLoggedIn=!!this.auth.isLoggedIn}ngOnInit(){this.firebaseService.getCart().subscribe(e=>{this.items=e})}goToFAQ(){this.router.navigate(["/register"])}goToHome(){this.router.navigate(["/home"])}onRowSelect(e){this.messageService.add({severity:"info",summary:"Product Selected",detail:e.data.name})}openModal(e){this.modalService.open(e,{backdropClass:"light-blue-backdrop"})}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(qf),a.Y36(Po),a.Y36(er),a.Y36(Zb),a.Y36(Ws),a.Y36(Uk),a.Y36(Rf))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-header-normal"]],decls:29,vars:0,consts:[[3,"click"],["target",""],[1,"nav-items",2,"display","flex"],[1,"middle-nav"],["routerLink","categories","routerLinkActive","active"],["routerLink","FAQ","routerLinkActive","active"],["src","https://cdn.lordicon.com/ndydpcaq.json","trigger","loop-on-hover","colors","primary:#f6f6f6",2,"width","32px","height","32px","cursor","pointer"],["href",""],["src","https://cdn.lordicon.com/uvextprq.json","trigger","loop-on-hover","colors","primary:#f6f6f6",2,"width","32px","height","32px","cursor","pointer"],["src","https://cdn.lordicon.com/aoggitwj.json","trigger","loop-on-hover","colors","primary:#f6f6f6",1,"cart-icon",2,"width","32px","height","32px","cursor","pointer",3,"click"],["content",""],["routerLink","/user-profile"],["src","https://cdn.lordicon.com/dklbhvrt.json","trigger","loop-on-hover","colors","primary:#f6f6f6",2,"width","32px","height","32px","cursor","pointer"],["href","",3,"click"],[1,"material-symbols-outlined"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["class","cart-items",4,"ngFor","ngForOf"],[1,"modal-footer"],["routerLink","/cart",3,"click"],[1,"cart-items"],["alt","itemImg",3,"src"],[1,"item-title"]],template:function(e,o){if(1&e){const s=a.EpF();a.TgZ(0,"nav")(1,"h2",0,1),a.NdJ("click",function(){return o.goToHome()}),a._uU(3,"MERC"),a.qZA(),a.TgZ(4,"ul",2)(5,"div",3)(6,"li")(7,"a",4),a._uU(8,"Categories"),a.qZA()(),a.TgZ(9,"li")(10,"a",5),a._uU(11,"FAQ"),a.qZA()()(),a.TgZ(12,"li"),a._UZ(13,"lord-icon",6),a.qZA(),a.TgZ(14,"li")(15,"a",7),a._UZ(16,"lord-icon",8),a.qZA()(),a.TgZ(17,"li")(18,"lord-icon",9),a.NdJ("click",function(){a.CHM(s);const u=a.MAs(21);return a.KtG(o.openModal(u))}),a.qZA()(),a._UZ(19,"p-toast"),a.YNc(20,poe,9,1,"ng-template",null,10,a.W1O),a.TgZ(22,"li")(23,"a",11),a._UZ(24,"lord-icon",12),a.qZA()(),a.TgZ(25,"li")(26,"a",13),a.NdJ("click",function(){return o.auth.logout()}),a.TgZ(27,"span",14),a._uU(28," logout "),a.qZA()()()()()}},dependencies:[Ui,Vx,L3,H5],styles:['nav{display:flex;justify-content:space-between;padding:1rem 2rem;background:#005DE8}nav h2{color:#f5f5f5;text-align:center;cursor:pointer;margin:0}.nav-items{list-style-type:none;margin:0}.nav-items li{margin:0 8px}.middle-nav{display:flex;flex-direction:row;margin:0 auto;float:center}.middle-nav li{margin:10px 10px 0}.middle-nav li a{text-decoration:none;color:#fff}.material-symbols-outlined{overflow-y:hidden;color:#fff;font-size:30px;margin:5px 10px 0;font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 48}@media only screen and (max-width: 600px){nav{flex-direction:column}nav ul{flex-direction:column;padding-top:.5rem}nav li{padding:.5rem 0}}.cart-img{width:100px}.cart-dets-container{display:flex;margin:15px}.cart-dets{display:flex;flex-direction:column;justify-content:space-around;margin-left:15px}.shoppingCart{margin-bottom:10px}.shoppingCart a{text-decoration:none;color:#1f1f1f}.shoppingCart a:hover{color:#005de8;cursor:pointer;font-weight:600;text-decoration:underline}.oldPrice{text-decoration:line-through;color:#ccc}.discountedPrice{color:#005de8;font-size:larger;font-weight:600}.cart-items{display:flex;justify-content:space-between;text-align:center}.cart-items img{width:100px}.cart-items div{margin:auto}.item-title{width:150px}\n',".light-blue-backdrop{background-color:#5cb3fd}\n","\n      .p-overlaypanel .p-overlaypanel-close {\n        margin: 20px 20px 0 0;\n      }\n\n    "],encapsulation:2}),i})();function foe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",11)(1,"div",12),a._UZ(2,"i",13),a.TgZ(3,"h4"),a._uU(4),a.qZA(),a.TgZ(5,"p"),a._uU(6),a.qZA()(),a.TgZ(7,"div",14)(8,"div",15)(9,"button",16),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onConfirm())}),a.qZA()(),a.TgZ(10,"div",15)(11,"button",17),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onReject())}),a.qZA()()()()}if(2&i){const e=t.$implicit;a.xp6(4),a.Oqu(e.summary),a.xp6(2),a.Oqu(e.detail)}}function goe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",11)(1,"div",12),a._UZ(2,"i",13),a.TgZ(3,"h4"),a._uU(4),a.qZA(),a.TgZ(5,"p"),a._uU(6),a.qZA()(),a.TgZ(7,"div",14)(8,"div",15)(9,"button",16),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onConfirm())}),a.qZA()(),a.TgZ(10,"div",15)(11,"button",17),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onReject())}),a.qZA()()()()}if(2&i){const e=t.$implicit;a.xp6(4),a.Oqu(e.summary),a.xp6(2),a.Oqu(e.detail)}}function moe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"ul",18)(1,"li",19)(2,"div")(3,"div",20)(4,"div",21),a._UZ(5,"img",22),a.qZA(),a.TgZ(6,"p"),a._uU(7),a.qZA()()()(),a.TgZ(8,"li",23),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.slide("profile"))}),a.TgZ(9,"a",24),a._UZ(10,"img",25),a._uU(11," Profile "),a.qZA()(),a.TgZ(12,"li")(13,"a",26),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.slide("cards"))}),a._UZ(14,"img",27),a._uU(15," Credit/Debit Cards "),a.qZA()(),a.TgZ(16,"li")(17,"a",26),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.slide("address"))}),a._UZ(18,"img",28),a._uU(19," Addresses "),a.qZA()(),a.TgZ(20,"li")(21,"a",26),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.slide("password"))}),a._UZ(22,"img",29),a._uU(23," Change Password "),a.qZA()(),a.TgZ(24,"li")(25,"a",26),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.slide("purchases"))}),a._UZ(26,"img",30),a._uU(27," My Purchases "),a.qZA()(),a.TgZ(28,"li")(29,"a",26),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.slide("vouchers"))}),a._UZ(30,"img",31),a._uU(31," My vouchers "),a.qZA()(),a.TgZ(32,"li",19)(33,"a",26),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.authService.logout())}),a._UZ(34,"img",32),a._uU(35," Log out "),a.qZA()()()}if(2&i){const e=a.oxw();a.xp6(5),a.s9C("src",e.userImage?e.userImage:"/assets/img/account/dummy.png",a.LSH),a.s9C("alt",e.userName),a.xp6(2),a.Oqu(e.userName)}}const _oe=function(i){return{width:i}};function yoe(i,t){if(1&i&&(a.TgZ(0,"div",51)(1,"div",52),a._uU(2),a.qZA()()),2&i){const e=a.oxw(3);a.xp6(1),a.Q6J("ngStyle",a.VKq(3,_oe,e.percentage+"%")),a.uIk("aria-valuenow",e.percentage),a.xp6(1),a.hij(" ",e.percentage,"% ")}}function voe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",4)(1,"div",37)(2,"div")(3,"div",38),a._UZ(4,"img",22),a.TgZ(5,"div",39)(6,"label")(7,"input",40),a.NdJ("change",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.selectFile(s))}),a.qZA()(),a.TgZ(8,"button",41),a.NdJ("click",function(){a.CHM(e);const s=a.oxw(2);return a.KtG(s.upload())}),a._uU(9," Upload "),a.qZA(),a.YNc(10,yoe,3,5,"div",42),a.qZA()(),a.TgZ(11,"div",43)(12,"div",44)(13,"p",45),a._uU(14,"Name"),a.qZA(),a.TgZ(15,"p"),a._uU(16," : "),a.qZA(),a.TgZ(17,"input",46,47),a.NdJ("ngModelChange",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.userName=s)}),a.qZA()(),a.TgZ(19,"span",44)(20,"p",45),a._uU(21,"Email"),a.qZA(),a.TgZ(22,"p"),a._uU(23," : "),a.qZA(),a.TgZ(24,"strong"),a._uU(25),a.qZA()(),a.TgZ(26,"span",44)(27,"p",45),a._uU(28,"Address"),a.qZA(),a.TgZ(29,"p"),a._uU(30," : "),a.qZA(),a.TgZ(31,"textarea",48,49),a._uU(33),a.qZA()()()(),a.TgZ(34,"div")(35,"button",50),a.NdJ("click",function(){a.CHM(e);const s=a.MAs(32),l=a.MAs(18),u=a.oxw(2);return a.KtG(u.showConfirm(s.value,l.value))}),a.qZA()()()()}if(2&i){const e=a.oxw(2);a.xp6(4),a.s9C("src",e.userImage?e.userImage:"/assets/img/account/dummy.png",a.LSH),a.s9C("alt",e.userName),a.xp6(4),a.Q6J("disabled",!e.selectedFiles),a.xp6(2),a.Q6J("ngIf",e.currentFileUpload),a.xp6(7),a.Q6J("ngModel",e.userName),a.xp6(8),a.Oqu(e.userEmail),a.xp6(8),a.Oqu(e.userAddress)}}function boe(i,t){if(1&i&&(a.TgZ(0,"div",33)(1,"div",34)(2,"h1",35),a._uU(3,"User Profile"),a.qZA()(),a.YNc(4,voe,36,7,"div",36),a.qZA()),2&i){const e=a.oxw();a.xp6(4),a.Q6J("ngIf",e.authService.userData)}}function woe(i,t){1&i&&(a.TgZ(0,"div"),a._uU(1," -----Visa----- All Visa card numbers start with a 4. New cards have 16 digits. Old cards have 13. For example, 4444444444444444. -----Mastercard----- MasterCard numbers either start with the numbers 51 through 55 or with the numbers 2221 through 2720. All have 16 digits. For example, 5124123412341244. credit card regex -> https://www.regular-expressions.info/creditcard.html "),a.qZA())}function Coe(i,t){1&i&&a._UZ(0,"img",103)}function Toe(i,t){1&i&&(a.TgZ(0,"div"),a._UZ(1,"img",104),a.qZA())}function Eoe(i,t){if(1&i&&(a.TgZ(0,"div"),a.YNc(1,woe,2,0,"div",101),a.YNc(2,Coe,1,0,"ng-template",null,102,a.W1O),a.YNc(4,Toe,2,0,"div",66),a.qZA()),2&i){const e=a.MAs(3),o=a.oxw(3);a.xp6(1),a.Q6J("ngIf","visa"===o.card)("ngIfThen",e),a.xp6(3),a.Q6J("ngIf","mastercard"===o.card)}}function xoe(i,t){1&i&&(a.TgZ(0,"div"),a._uU(1," -----Visa----- All Visa card numbers start with a 4. New cards have 16 digits. Old cards have 13. For example, 4444444444444444. -----Mastercard----- MasterCard numbers either start with the numbers 51 through 55 or with the numbers 2221 through 2720. All have 16 digits. For example, 5124123412341244. credit card regex -> https://www.regular-expressions.info/creditcard.html "),a.qZA())}function Soe(i,t){1&i&&a._UZ(0,"img",103)}function Doe(i,t){1&i&&(a.TgZ(0,"div"),a._UZ(1,"img",104),a.qZA())}function Ioe(i,t){if(1&i&&(a.TgZ(0,"div"),a.YNc(1,xoe,2,0,"div",101),a.YNc(2,Soe,1,0,"ng-template",null,102,a.W1O),a.YNc(4,Doe,2,0,"div",66),a.qZA()),2&i){const e=a.MAs(3),o=a.oxw(3);a.xp6(1),a.Q6J("ngIf","visa"===o.card1)("ngIfThen",e),a.xp6(3),a.Q6J("ngIf","mastercard"===o.card1)}}function Moe(i,t){1&i&&(a.TgZ(0,"div"),a._uU(1," -----Visa----- All Visa card numbers start with a 4. New cards have 16 digits. Old cards have 13. For example, 4444444444444444. -----Mastercard----- MasterCard numbers either start with the numbers 51 through 55 or with the numbers 2221 through 2720. All have 16 digits. For example, 5124123412341244. credit card regex -> https://www.regular-expressions.info/creditcard.html "),a.qZA())}function Aoe(i,t){1&i&&a._UZ(0,"img",103)}function koe(i,t){1&i&&(a.TgZ(0,"div"),a._UZ(1,"img",104),a.qZA())}function Ooe(i,t){if(1&i&&(a.TgZ(0,"div"),a.YNc(1,Moe,2,0,"div",101),a.YNc(2,Aoe,1,0,"ng-template",null,102,a.W1O),a.YNc(4,koe,2,0,"div",66),a.qZA()),2&i){const e=a.MAs(3),o=a.oxw(3);a.xp6(1),a.Q6J("ngIf","visa"===o.card2)("ngIfThen",e),a.xp6(3),a.Q6J("ngIf","mastercard"===o.card2)}}function Roe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",59)(1,"h4",60),a._uU(2,"Add card"),a.qZA(),a.TgZ(3,"button",61),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.KtG(l.dismiss("Cross click"))}),a.qZA()(),a.TgZ(4,"div",62)(5,"div",63)(6,"input",64,65),a.NdJ("keyup",function(){a.CHM(e);const s=a.MAs(7),l=a.oxw(2);return a.KtG(l.keyup(s.value))}),a.qZA(),a.YNc(8,Eoe,5,3,"div",66),a.YNc(9,Ioe,5,3,"div",66),a.YNc(10,Ooe,5,3,"div",66),a.TgZ(11,"div",67)(12,"div",68)(13,"select",69,70)(15,"option",71),a._uU(16,"January"),a.qZA(),a.TgZ(17,"option",72),a._uU(18,"February"),a.qZA(),a.TgZ(19,"option",73),a._uU(20,"March"),a.qZA(),a.TgZ(21,"option",74),a._uU(22,"April"),a.qZA(),a.TgZ(23,"option",75),a._uU(24,"May"),a.qZA(),a.TgZ(25,"option",76),a._uU(26,"June"),a.qZA(),a.TgZ(27,"option",77),a._uU(28,"July"),a.qZA(),a.TgZ(29,"option",78),a._uU(30,"August"),a.qZA(),a.TgZ(31,"option",79),a._uU(32,"September"),a.qZA(),a.TgZ(33,"option",80),a._uU(34,"October"),a.qZA(),a.TgZ(35,"option",81),a._uU(36,"November"),a.qZA(),a.TgZ(37,"option",82),a._uU(38,"December"),a.qZA()()(),a.TgZ(39,"div",83)(40,"select",84,85)(42,"option",86),a._uU(43,"2023"),a.qZA(),a.TgZ(44,"option",87),a._uU(45,"2024"),a.qZA(),a.TgZ(46,"option",88),a._uU(47,"2025"),a.qZA(),a.TgZ(48,"option",89),a._uU(49,"2026"),a.qZA(),a.TgZ(50,"option",90),a._uU(51,"2027"),a.qZA(),a.TgZ(52,"option",91),a._uU(53,"2028"),a.qZA(),a.TgZ(54,"option",92),a._uU(55,"2029"),a.qZA()()()(),a.TgZ(56,"div",93)(57,"div",94),a._UZ(58,"input",95,96),a.TgZ(60,"div",97)(61,"p"),a._uU(62,"3 or 4 digits usually found "),a._UZ(63,"br"),a._uU(64," on the signature strip"),a.qZA()()()()(),a.TgZ(65,"div",98)(66,"button",99),a.NdJ("click",function(){a.CHM(e);const s=a.MAs(7),l=a.MAs(14),u=a.MAs(41),g=a.MAs(59),_=a.oxw(2);return a.KtG(_.saveCardDetails(s.value,l.value,u.value,g.value))}),a._uU(67),a.qZA(),a.TgZ(68,"button",100),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.KtG(l.close("Close click"))}),a._uU(69,"Close"),a.qZA()()()}if(2&i){const e=a.oxw(2);a.xp6(8),a.Q6J("ngIf",1==e.unusedID),a.xp6(1),a.Q6J("ngIf",2==e.unusedID),a.xp6(1),a.Q6J("ngIf",3==e.unusedID),a.xp6(57),a.Oqu(e.savedStatus)}}function Poe(i,t){if(1&i&&(a.TgZ(0,"div")(1,"p",117),a._uU(2),a.qZA()()),2&i){const e=t.$implicit;a.xp6(2),a.hij("",e,"\xa0 \xa0 \xa0")}}function Noe(i,t){1&i&&(a.TgZ(0,"div"),a._uU(1," -----Visa----- All Visa card numbers start with a 4. New cards have 16 digits. Old cards have 13. For example, 4444444444444444. -----Mastercard----- MasterCard numbers either start with the numbers 51 through 55 or with the numbers 2221 through 2720. All have 16 digits. For example, 5124123412341244. credit card regex -> https://www.regular-expressions.info/creditcard.html "),a.qZA())}function Foe(i,t){1&i&&a._UZ(0,"img",118)}function Loe(i,t){1&i&&(a.TgZ(0,"div"),a._UZ(1,"img",119),a.qZA())}function Voe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",105)(1,"div",106)(2,"div"),a._UZ(3,"img",107),a.TgZ(4,"button",108),a.NdJ("click",function(){a.CHM(e);const s=a.oxw(2);return a.KtG(s.deleteCard("1"))}),a.TgZ(5,"span",109),a._uU(6,"delete"),a.qZA()()(),a.TgZ(7,"div",110)(8,"label"),a._uU(9,"Card Number"),a.qZA(),a.TgZ(10,"div",111),a.YNc(11,Poe,3,1,"div",112),a.qZA(),a.TgZ(12,"div",113)(13,"div",114)(14,"label"),a._uU(15,"Exp. Mth"),a.qZA(),a.TgZ(16,"p"),a._uU(17),a.qZA()(),a.TgZ(18,"div",115)(19,"label"),a._uU(20,"Exp. Year"),a.qZA(),a.TgZ(21,"p"),a._uU(22),a.qZA()(),a.TgZ(23,"div",116)(24,"label"),a._uU(25,"CVV"),a.qZA(),a.TgZ(26,"p"),a._uU(27),a.qZA()()(),a.TgZ(28,"div"),a.YNc(29,Noe,2,0,"div",101),a.YNc(30,Foe,1,0,"ng-template",null,102,a.W1O),a.YNc(32,Loe,2,0,"div",66),a.qZA()()()()}if(2&i){const e=a.MAs(31),o=a.oxw(2);a.xp6(11),a.Q6J("ngForOf",o.cardNum),a.xp6(6),a.Oqu(o.cardExpMonth),a.xp6(5),a.Oqu(o.cardExpYear),a.xp6(5),a.Oqu(o.cardCVV),a.xp6(2),a.Q6J("ngIf","visa"===o.card)("ngIfThen",e),a.xp6(3),a.Q6J("ngIf","mastercard"===o.card)}}function Hoe(i,t){if(1&i&&(a.TgZ(0,"div")(1,"p",117),a._uU(2),a.qZA()()),2&i){const e=t.$implicit;a.xp6(2),a.hij("",e,"\xa0 \xa0 \xa0")}}function Boe(i,t){1&i&&(a.TgZ(0,"div"),a._uU(1," -----Visa----- All Visa card numbers start with a 4. New cards have 16 digits. Old cards have 13. For example, 4444444444444444. -----Mastercard----- MasterCard numbers either start with the numbers 51 through 55 or with the numbers 2221 through 2720. All have 16 digits. For example, 5124123412341244. credit card regex -> https://www.regular-expressions.info/creditcard.html "),a.qZA())}function Uoe(i,t){1&i&&a._UZ(0,"img",118)}function joe(i,t){1&i&&(a.TgZ(0,"div"),a._UZ(1,"img",119),a.qZA())}function zoe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",120)(1,"div",106)(2,"div"),a._UZ(3,"img",107),a.TgZ(4,"button",108),a.NdJ("click",function(){a.CHM(e);const s=a.oxw(2);return a.KtG(s.deleteCard("2"))}),a.TgZ(5,"span",109),a._uU(6,"delete"),a.qZA()()(),a.TgZ(7,"div",110)(8,"label"),a._uU(9,"Card Number"),a.qZA(),a.TgZ(10,"div",111),a.YNc(11,Hoe,3,1,"div",112),a.qZA(),a.TgZ(12,"div",113)(13,"div",114)(14,"label"),a._uU(15,"Exp. Mth"),a.qZA(),a.TgZ(16,"p"),a._uU(17),a.qZA()(),a.TgZ(18,"div",115)(19,"label"),a._uU(20,"Exp. Year"),a.qZA(),a.TgZ(21,"p"),a._uU(22),a.qZA()(),a.TgZ(23,"div",116)(24,"label"),a._uU(25,"CVV"),a.qZA(),a.TgZ(26,"p"),a._uU(27),a.qZA()()(),a.TgZ(28,"div"),a.YNc(29,Boe,2,0,"div",101),a.YNc(30,Uoe,1,0,"ng-template",null,102,a.W1O),a.YNc(32,joe,2,0,"div",66),a.qZA()()()()}if(2&i){const e=a.MAs(31),o=a.oxw(2);a.xp6(11),a.Q6J("ngForOf",o.cardNum1),a.xp6(6),a.Oqu(o.cardExpMonth1),a.xp6(5),a.Oqu(o.cardExpYear1),a.xp6(5),a.Oqu(o.cardCVV1),a.xp6(2),a.Q6J("ngIf","visa"===o.card1)("ngIfThen",e),a.xp6(3),a.Q6J("ngIf","mastercard"===o.card1)}}function Goe(i,t){if(1&i&&(a.TgZ(0,"div")(1,"p",117),a._uU(2),a.qZA()()),2&i){const e=t.$implicit;a.xp6(2),a.hij("",e,"\xa0 \xa0 \xa0")}}function qoe(i,t){1&i&&(a.TgZ(0,"div"),a._uU(1," -----Visa----- All Visa card numbers start with a 4. New cards have 16 digits. Old cards have 13. For example, 4444444444444444. -----Mastercard----- MasterCard numbers either start with the numbers 51 through 55 or with the numbers 2221 through 2720. All have 16 digits. For example, 5124123412341244. credit card regex -> https://www.regular-expressions.info/creditcard.html "),a.qZA())}function Zoe(i,t){1&i&&a._UZ(0,"img",118)}function $oe(i,t){1&i&&(a.TgZ(0,"div"),a._UZ(1,"img",119),a.qZA())}function Woe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",121)(1,"div",106)(2,"div"),a._UZ(3,"img",107),a.TgZ(4,"button",108),a.NdJ("click",function(){a.CHM(e);const s=a.oxw(2);return a.KtG(s.deleteCard("3"))}),a.TgZ(5,"span",109),a._uU(6,"delete"),a.qZA()()(),a.TgZ(7,"div",110)(8,"label"),a._uU(9,"Card Number"),a.qZA(),a.TgZ(10,"div",111),a.YNc(11,Goe,3,1,"div",112),a.qZA(),a.TgZ(12,"div",113)(13,"div",114)(14,"label"),a._uU(15,"Exp. Mth"),a.qZA(),a.TgZ(16,"p"),a._uU(17),a.qZA()(),a.TgZ(18,"div",115)(19,"label"),a._uU(20,"Exp. Year"),a.qZA(),a.TgZ(21,"p"),a._uU(22),a.qZA()(),a.TgZ(23,"div",116)(24,"label"),a._uU(25,"CVV"),a.qZA(),a.TgZ(26,"p"),a._uU(27),a.qZA()()(),a.TgZ(28,"div"),a.YNc(29,qoe,2,0,"div",101),a.YNc(30,Zoe,1,0,"ng-template",null,102,a.W1O),a.YNc(32,$oe,2,0,"div",66),a.qZA()()()()}if(2&i){const e=a.MAs(31),o=a.oxw(2);a.xp6(11),a.Q6J("ngForOf",o.cardNum2),a.xp6(6),a.Oqu(o.cardExpMonth2),a.xp6(5),a.Oqu(o.cardExpYear2),a.xp6(5),a.Oqu(o.cardCVV2),a.xp6(2),a.Q6J("ngIf","visa"===o.card2)("ngIfThen",e),a.xp6(3),a.Q6J("ngIf","mastercard"===o.card2)}}function Koe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",33)(1,"div",34)(2,"h1",35),a._uU(3,"Credit Debit Cards"),a.qZA()(),a.TgZ(4,"div")(5,"button",53),a.NdJ("click",function(){a.CHM(e);const s=a.MAs(10),l=a.oxw();return a.KtG(l.openModal(s))}),a._uU(6,"Add Card"),a.qZA(),a.TgZ(7,"p",54),a._uU(8,"(* Maximum number of cards allowed = 3)"),a.qZA(),a.YNc(9,Roe,70,4,"ng-template",null,55,a.W1O),a.TgZ(11,"section"),a.YNc(12,Voe,33,7,"div",56),a.YNc(13,zoe,33,7,"div",57),a.YNc(14,Woe,33,7,"div",58),a.qZA()()()}if(2&i){const e=a.oxw();a.xp6(5),a.Q6J("disabled",3===e.numOfCards),a.xp6(7),a.Q6J("ngIf",e.ID1),a.xp6(1),a.Q6J("ngIf",e.ID2),a.xp6(1),a.Q6J("ngIf",e.ID3)}}function Yoe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",133)(1,"p"),a._uU(2),a.qZA(),a.TgZ(3,"div",134)(4,"button",135),a.NdJ("click",function(){const l=a.CHM(e).index,u=a.oxw(2);return a.KtG(u.editAddress(l))}),a._uU(5,"Edit"),a.qZA(),a.TgZ(6,"button",136),a.NdJ("click",function(){const l=a.CHM(e).index,u=a.oxw(2);return a.KtG(u.deleteAddress(l))}),a._uU(7,"Delete"),a.qZA()()()}if(2&i){const e=t.$implicit,o=t.index,s=a.oxw(2);a.Q6J("hidden",s.addressList),a.xp6(2),a.AsE("Address ",o+1," : ",e.address,"")}}function Joe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",33)(1,"div",34)(2,"h1",35),a._uU(3),a.qZA()(),a.TgZ(4,"div")(5,"button",122),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.addAddress())}),a._uU(6,"Add address"),a.qZA(),a.TgZ(7,"div",123)(8,"div",124)(9,"p",125),a._uU(10,"Address: "),a.qZA(),a.TgZ(11,"textarea",126,127),a._uU(13),a.qZA()(),a.TgZ(14,"div",128)(15,"button",129),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.backFromAddAddress())}),a._uU(16,"back"),a.qZA(),a.TgZ(17,"button",130),a.NdJ("click",function(){a.CHM(e);const s=a.MAs(12),l=a.oxw();return a.KtG(l.saveAddress(s.value))}),a._uU(18,"save"),a.qZA()()(),a.TgZ(19,"div",123)(20,"div",124)(21,"p",125),a._uU(22,"Address: "),a.qZA(),a.TgZ(23,"textarea",126,131),a._uU(25),a.qZA()(),a.TgZ(26,"div",128)(27,"button",129),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.backFromAddAddress())}),a._uU(28,"back"),a.qZA(),a.TgZ(29,"button",130),a.NdJ("click",function(){a.CHM(e);const s=a.MAs(24),l=a.oxw();return a.KtG(l.updateAddress(s.value))}),a._uU(30,"save"),a.qZA()()(),a.YNc(31,Yoe,8,3,"div",132),a.qZA()()}if(2&i){const e=a.oxw();a.xp6(3),a.Oqu(e.addressHeaderStatus),a.xp6(4),a.Q6J("hidden",e.addAddressStatus),a.xp6(6),a.Oqu(e.addressTextArea),a.xp6(6),a.Q6J("hidden",e.editAddressStatus),a.xp6(6),a.Oqu(e.selectedAddress),a.xp6(6),a.Q6J("ngForOf",e.allAddresses)}}function Qoe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",33)(1,"div",34)(2,"h1",35),a._uU(3,"Password"),a.qZA()(),a.TgZ(4,"div",123)(5,"div")(6,"p"),a._uU(7,"Enter old password :"),a.qZA(),a._UZ(8,"input",137,138),a.qZA(),a.TgZ(10,"p",123),a._uU(11),a.qZA(),a.TgZ(12,"div",123),a._uU(13,"Time left = "),a._UZ(14,"span",139),a.qZA(),a.TgZ(15,"button",140),a.NdJ("click",function(){a.CHM(e);const s=a.MAs(9),l=a.oxw();return a.KtG(l.checkOldPwd(s.value))}),a._uU(16,"OK"),a.qZA()(),a.TgZ(17,"div",123),a._UZ(18,"div",141),a.TgZ(19,"button",140),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.authService.forgotPassword(s.currentUser.userEmail))}),a._uU(20,"Click to change password"),a.qZA()()()}if(2&i){const e=a.oxw();a.xp6(4),a.Q6J("hidden",!e.hideVerifiedOldPW),a.xp6(6),a.Q6J("hidden",e.hidePWError),a.xp6(1),a.hij("Incorrect attempts (max 3) : ",e.errorCount,""),a.xp6(1),a.Q6J("hidden",e.hideTimer),a.xp6(5),a.Q6J("hidden",e.hideVerifiedOldPW)}}function Xoe(i,t){1&i&&(a.TgZ(0,"div",33)(1,"div",34)(2,"h1",35),a._uU(3,"My Purchases"),a.qZA()()())}function ese(i,t){if(1&i&&(a.TgZ(0,"p"),a._uU(1),a.qZA()),2&i){const e=a.oxw().$implicit;a.xp6(1),a.Oqu(e.cashback)}}function tse(i,t){if(1&i&&(a.TgZ(0,"p"),a._uU(1),a.qZA()),2&i){const e=a.oxw().$implicit;a.xp6(1),a.Oqu(e.discount)}}function nse(i,t){if(1&i&&(a.TgZ(0,"p"),a._uU(1),a.qZA()),2&i){const e=a.oxw().$implicit;a.xp6(1),a.Oqu(e.freeShipping)}}function ise(i,t){if(1&i&&(a.TgZ(0,"div",143),a.YNc(1,ese,2,1,"p",66),a.YNc(2,tse,2,1,"p",66),a.YNc(3,nse,2,1,"p",66),a.TgZ(4,"p"),a._uU(5),a.qZA()()),2&i){const e=t.$implicit;a.xp6(1),a.Q6J("ngIf",0!=e.cashback),a.xp6(1),a.Q6J("ngIf",0!=e.discount),a.xp6(1),a.Q6J("ngIf",e.freeShipping),a.xp6(2),a.Oqu(e.title)}}function rse(i,t){if(1&i&&(a.TgZ(0,"div",33)(1,"div",34)(2,"h1",35),a._uU(3,"My Vouchers"),a.qZA()(),a.YNc(4,ise,6,4,"div",142),a.qZA()),2&i){const e=a.oxw();a.xp6(4),a.Q6J("ngForOf",e.vouchers)}}let B5=(()=>{class i{constructor(e,o,s,l,u,g,_){this.authService=e,this.uploadService=o,this.firebaseService=s,this.messageService=l,this.primengConfig=u,this.modalService=g,this.fb=_,this.userName="",this.userAccPage="profile",this.userImg="",this.userEmail="",this.userAddress="",this.userImage="",this.name=!1,this.percentage=0,this.newName="",this.newAddress="",this.savedStatus="save",this.visa=/^4[0-9]{12}(?:[0-9]{3})?$/g,this.mastercard=/^(?:5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$/g,this.invalid=!1,this.text="",this.unusedID=0,this.numOfCards=0,this.ID1=!1,this.cardID=0,this.cardExpMonth="",this.cardExpYear="",this.cardCVV="",this.card="",this.ID2=!1,this.cardID1=0,this.cardExpMonth1="",this.cardExpYear1="",this.cardCVV1="",this.card1="",this.ID3=!1,this.cardID2=0,this.cardExpMonth2="",this.cardExpYear2="",this.cardCVV2="",this.card2="",this.confirmState="",this.idDelete="",this.firstID=0,this.secondID=0,this.thirdID=0,this.addAddressStatus=!0,this.addressTextArea=" ",this.addressHeaderStatus="Addresses",this.editAddressStatus=!0,this.selectedAddress="",this.addressList=!1,this.selectedAddressIndex=0,this.deleteAddressIndex=0,this.hidePWError=!0,this.hideVerifiedOldPW=!0,this.errorCount=0,this.hideTimer=!0,this.vouchers=[],this.checked=!1,this.voucher0Title="",this.voucher1Title="",this.voucher2Title="",this.voucher0Min=0,this.voucher1Min=0,this.voucher2Min=0,this.address=[{address:""}],this.currentUser=this.authService.getCurrentUserCredentials(),console.log(this.currentUser.userEmail),console.log(this.currentUser.userPassword),this.currentUserDetails=this.authService.getCurrentUserData()}ngOnInit(){this.firebaseService.getVouchers().subscribe(e=>{this.vouchers=e,this.voucher0Title=e[0].title,this.voucher1Title=e[1].title,this.voucher2Title=e[2].title,this.voucher0Min=e[0].min,this.voucher1Min=e[1].min,this.voucher2Min=e[2].min}),this.firebaseService.getUserDetails(this.currentUser.userEmail).subscribe(e=>{console.log(e),this.userUser=e,this.userAddress=this.userUser.address,console.log(e)}),this.firebaseService.getIndividualUser(this.currentUser.userEmail).subscribe(e=>{this.person=e,this.userImage=this.person.photoURL,this.userName=this.person.displayName,this.userEmail=this.person.email}),this.firebaseService.getUserCard(this.currentUser.userEmail).subscribe(e=>{if(console.log(e),this.numOfCards=e.length,1==this.numOfCards?this.firstID=e[0].id:2==this.numOfCards?(this.firstID=e[0].id,this.secondID=e[1].id,console.log(this.firstID,this.secondID,this.unusedID)):3==this.numOfCards&&(this.firstID=e[0].id,this.secondID=e[1].id,this.thirdID=e[2].id,console.log(this.firstID,this.secondID,this.thirdID)),console.log(this.numOfCards),2==e.length)console.log("length less than 3"),1!=this.firstID&&1!=this.secondID?this.unusedID=1:2!=this.firstID&&2!=this.secondID?this.unusedID=2:3!=this.firstID&&3!=this.secondID&&(this.unusedID=3),console.log(this.unusedID,this.numOfCards),(1==this.firstID||1==this.secondID)&&(this.ID1=!0),(2==this.firstID||2==this.secondID)&&(this.ID2=!0),(3==this.firstID||3==this.secondID)&&(this.ID3=!0),console.log(this.ID1,this.ID2,this.ID3);else if(1==e.length){let o=e[0].id;1==o?(this.ID1=!0,this.unusedID=2):(this.unusedID=1,(2==o||3==o)&&(this.ID2=!0))}else this.ID1=!0,this.ID2=!0,this.ID3=!0;1==this.firstID?(console.log("total 1"),this.cardID=e[0].id,this.cardNum=e[0].cardNum,this.cardExpMonth=e[0].expMonth,this.cardExpYear=e[0].expYear,this.cardCVV=e[0].CVV,this.validateCardType(e[0].cardNum,this.cardID)):2==this.firstID?(this.cardID1=e[0].id,this.cardNum1=e[0].cardNum,this.cardExpMonth1=e[0].expMonth,this.cardExpYear1=e[0].expYear,this.cardCVV1=e[0].CVV,this.validateCardType(e[0].cardNum,this.cardID1)):3==this.firstID&&(this.cardID2=e[0].id,this.cardNum2=e[0].cardNum,this.cardExpMonth2=e[0].expMonth,this.cardExpYear2=e[0].expYear,this.cardCVV2=e[0].CVV,this.validateCardType(e[0].cardNum,this.cardID2)),1==this.secondID?(this.cardID=e[1].id,this.cardNum=e[1].cardNum,this.cardExpMonth=e[1].expMonth,this.cardExpYear=e[1].expYear,this.cardCVV=e[1].CVV,this.validateCardType(e[1].cardNum,this.cardID)):2==this.secondID?(this.cardID1=e[1].id,this.cardNum1=e[1].cardNum,this.cardExpMonth1=e[1].expMonth,this.cardExpYear1=e[1].expYear,this.cardCVV1=e[1].CVV,this.validateCardType(e[1].cardNum,this.cardID1)):3==this.secondID&&(this.cardID2=e[1].id,this.cardNum2=e[1].cardNum,this.cardExpMonth2=e[1].expMonth,this.cardExpYear2=e[1].expYear,this.cardCVV2=e[1].CVV,this.validateCardType(e[1].cardNum,this.cardID2)),1==this.thirdID?(this.cardID=e[2].id,this.cardNum=e[2].cardNum,this.cardExpMonth=e[2].expMonth,this.cardExpYear=e[2].expYear,this.cardCVV=e[2].CVV,this.validateCardType(e[2].cardNum,this.cardID)):2==this.thirdID?(this.cardID1=e[2].id,this.cardNum1=e[2].cardNum,this.cardExpMonth1=e[2].expMonth,this.cardExpYear1=e[2].expYear,this.cardCVV1=e[2].CVV,this.validateCardType(e[2].cardNum,this.cardID1)):3==this.thirdID&&(this.cardID2=e[2].id,this.cardNum2=e[2].cardNum,this.cardExpMonth2=e[2].expMonth,this.cardExpYear2=e[2].expYear,this.cardCVV2=e[2].CVV,this.validateCardType(e[2].cardNum,this.cardID2))}),this.firebaseService.getUserAddress(this.currentUser.userEmail).subscribe(e=>{this.allAddresses=e,this.address=e,console.log(this.allAddresses.length)})}slide(e){$(".pages").addClass("move-right"),setTimeout(()=>{this.userAccPage=e,$(".pages").removeClass("move-right")},800)}selectFile(e){this.selectedFiles=e.target.files}upload(){if(this.selectedFiles){const e=this.selectedFiles.item(0);this.selectedFiles=void 0,e&&(this.currentFileUpload=new v4(e),this.uploadService.pushFileToStorage(this.currentFileUpload,this.currentUser.userEmail).subscribe(o=>{this.percentage=Math.round(o||0)},o=>{console.log(o)}))}}processName(e){console.log(e.value)}processLocation(e){}saveUserData(e,o){console.log(e+" and "+o)}showConfirm(e,o){console.log(e+" and "+o),this.confirmState="saveProfile",this.newName=o,this.newAddress=e,this.messageService.clear(),this.messageService.add({key:"c",sticky:!0,severity:"warn",summary:"Are you sure?",detail:"Confirm to proceed"})}onConfirm(){"saveProfile"==this.confirmState?this.firebaseService.updateUserDetails(this.currentUser.userEmail,this.newAddress):"deleteCard"==this.confirmState?this.firebaseService.deleteCard(this.currentUser.userEmail,this.idDelete):"deleteAddress"==this.confirmState&&(this.firebaseService.deleteAddress(this.currentUser.userEmail,this.deleteAddressIndex.toString()),this.messageService.add({severity:"success",summary:"Success",detail:"Address deleted successfully"})),this.messageService.clear("c")}onReject(){this.messageService.clear("c")}clear(){this.messageService.clear()}openModal(e){this.modalService.open(e,{modalDialogClass:"dark-modal"})}saveCardDetails(e,o,s,l){this.cardNum=e.match(/.{1,4}/g),this.cardExpMonth=o,this.cardExpYear=s,this.cardCVV=l,this.disableBtn();let u=document.getElementById("closeBtn");this.savedStatus="saved",1===this.numOfCards?(this.firstCard={id:this.unusedID,cardNum:this.cardNum,expMonth:this.cardExpMonth,expYear:this.cardExpYear,CVV:this.cardCVV},this.firebaseService.storeUserCard(this.currentUser.userEmail,this.firstCard)):2===this.numOfCards?(console.log(this.cardNum1),this.secondCard={id:this.unusedID,cardNum:this.cardNum,expMonth:this.cardExpMonth,expYear:this.cardExpYear,CVV:this.cardCVV},this.firebaseService.storeUserCard(this.currentUser.userEmail,this.secondCard)):3===this.numOfCards&&(this.thirdCard={id:this.unusedID,cardNum:this.cardNum,expMonth:this.cardExpMonth,expYear:this.cardExpYear,CVV:this.cardCVV},this.firebaseService.storeUserCard(this.currentUser.userEmail,this.thirdCard)),this.showSuccess(),setTimeout(()=>{u?.click()},2e3)}keyup(e){this.validateCardType(e,this.unusedID)}showSuccess(){this.messageService.add({severity:"success",summary:"Success",detail:"Card saved successfully"})}disableBtn(){3===this.numOfCards&&(document.getElementById("addCardBtn").disabled=!0)}validateCardType(e,o){let s=this.combineNumbersFromCard(e);console.log(s,o),console.log(this.testVisaCard(s)),console.log(s),1==o?(console.log("processedFirst"),console.log(this.testVisaCard("4111111111111111")),console.log(s),this.card=this.testVisaCard(s)?"visa":this.mastercard.test(s)?"mastercard":"no matching card",console.log(this.card)):2==o?(console.log("processedSecond"),this.card1=this.testVisaCard(s)?"visa":this.mastercard.test(s)?"mastercard":"",console.log(this.card1)):3==o?(console.log("processedThird"),this.testVisaCard(s)?this.card2="visa":this.mastercard.test(s)?(console.log("mastercard true"),this.card2="mastercard"):this.card2="",console.log(this.card2)):console.log("validation error!")}combineNumbersFromCard(e){let o="";for(let s=0;s<e.length;s++)o+=e[s];return o}testVisaCard(e){let o=this.visa.test(e);return console.log(o,e),o}deleteCard(e){this.idDelete=e,this.confirmState="deleteCard",this.messageService.add({key:"c",sticky:!0,severity:"warn",summary:"Are you sure?",detail:"Confirm to proceed"})}initializeAddress(e){this.address[0].address=e,this.address.forEach(o=>{this.firebaseService.addAddress(this.currentUser.userEmail,"0",o)})}addAddress(){this.addressHeaderStatus="Add Address",this.addAddressStatus=!1,this.addressList=!0}saveAddress(e){this.address.push({address:e});let o=this.address.length-1;this.firebaseService.addAddress(this.currentUser.userEmail,o.toString(),this.address[o]),document.getElementById("textAreaAddress").value="",this.messageService.add({severity:"success",summary:"Success",detail:"Address saved successfully"}),this.backFromAddAddress()}backFromAddAddress(){this.addressHeaderStatus="Addresses",this.addAddressStatus=!0,this.addressList=!1,this.editAddressStatus=!0}editAddress(e){this.addressHeaderStatus="Edit Address "+e,this.selectedAddress=this.address[e].address,this.selectedAddressIndex=e,this.editAddressStatus=!1,this.addressList=!0}updateAddress(e){console.log(e),this.firebaseService.updateAddress(this.currentUser.userEmail,this.selectedAddressIndex.toString(),e),this.messageService.add({severity:"success",summary:"Success",detail:"Address updated successfully"}),this.backFromAddAddress()}deleteAddress(e){this.deleteAddressIndex=e,this.confirmState="deleteAddress",this.messageService.clear(),this.messageService.add({key:"c",sticky:!0,severity:"warn",summary:"Are you sure?",detail:"Confirm to proceed"})}checkOldPwd(e){this.currentUser.userPassword==e?this.hideVerifiedOldPW=!1:(this.hidePWError=!1,this.errorCount>=3?(this.showMaximumNumberOfAttempts(),setTimeout(()=>{alert("done"),this.errorCount=0,this.hidePWError=!0,this.hideTimer=!0,document.getElementById("oldPwd").value=" "},5e3)):(this.errorCount++,this.showIncorrectPasswordMessage()))}showIncorrectPasswordMessage(){this.messageService.add({severity:"error",summary:"Error",detail:"Incorrect password"})}showMaximumNumberOfAttempts(){this.messageService.add({severity:"error",summary:"Error",detail:"Maximum attempts reached! Please try again later."})}startTimer(){let o=document.getElementById("timer").innerHTML.split(/[:]+/);var s=parseInt(o[0]);let l,u;l=parseInt(o[1])-1,console.log(l),l<10&&l>=0&&(u="0"+l),l<0&&(u="59"),console.log("seconds = "+l),59==l&&(s-=1),!(s<0)&&(0==l&&0==s&&(this.hideTimer=!1),document.getElementById("timer").innerHTML=s+":"+l,console.log(s,l),setTimeout(this.startTimer,1e3))}testing(){let e=5;e-=1,document.getElementById("timer").innerHTML=e.toString(),setTimeout(this.testing,1e3)}updatePassword(e){}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(qf),a.Y36(Ek),a.Y36(Rf),a.Y36(Ws),a.Y36(zn),a.Y36(Uk),a.Y36(tB))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-main"]],features:[a._Bn([Ws])],decls:18,vars:10,consts:[["position","bottom-center","key","a",3,"baseZIndex","onClose"],["pTemplate","message"],["position","bottom-center","key","c",3,"baseZIndex","onClose"],[1,"container-fluid","dashboardContainer"],[1,"row"],[1,"col-md-3","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],["class","nav flex-column",4,"ngIf"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4","main",3,"ngSwitch"],[1,"pages"],["class","inner-adjust",4,"ngSwitchCase"],[1,"p-flex","p-flex-column",2,"flex","1"],[1,"p-text-center"],[1,"pi","pi-exclamation-triangle",2,"font-size","3rem"],[1,"p-grid","p-fluid"],[1,"p-col-6"],["type","button","pButton","","label","Yes",1,"p-button-success",3,"click"],["type","button","pButton","","label","No",1,"p-button-secondary",3,"click"],[1,"nav","flex-column"],[1,"nav-item"],[1,"media"],[2,"justify-content","center","justify-items","center"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle","center",3,"src","alt"],[1,"nav-item",3,"click"],[1,"nav-link","active"],["src","../../../../assets/img/account/user.png","alt","profile"],[1,"nav-link",3,"click"],["src","../../../../assets/img/account/credit-card.png","alt","cards"],["src","../../../../assets/img/account/address.png","alt","address"],["src","../../../../assets/img/account/password.png","alt","password"],["src","../../../../assets/img/account/checklist.png","alt","purchases"],["src","../../../../assets/img/account/price-tag.png","alt","vouchers"],["src","../../../../assets/img/account/exit.png","alt","logout"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"profile-pic"],[1,"upload-profile-pic"],["type","file",1,"text-nowrap","text-truncate",3,"change"],[1,"btn","btn-success","btn-sm",3,"disabled","click"],["class","progress mt-2",4,"ngIf"],[1,"media-body"],[1,"userAttr"],[1,"userAttr-title"],["type","text","id","name","name","name",1,"nameInputBox",3,"ngModel","ngModelChange"],["nameInput",""],["name","location","rows","5","cols","25","wrap","soft","maxlength","100",1,"locationTextArea",2,"overflow","hidden","resize","none"],["locationInput",""],["type","button","pButton","","pRipple","","label","Confirm",1,"ui-button-warning",3,"click"],[1,"progress","mt-2"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info",3,"ngStyle"],["id","addCardBtn",1,"btn","btn-outline-primary","mb-2","me-2",3,"disabled","click"],[1,"max-card-warning"],["content",""],["class","card","id","1",4,"ngIf"],["class","card","id","2",4,"ngIf"],["class","card","id","3",4,"ngIf"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"form-body"],["type","text","placeholder","Card Number","maxlength","16","minlength","13",1,"card-number",3,"keyup"],["cardNum",""],[4,"ngIf"],[1,"date-field"],[1,"month"],["name","Month"],["month",""],["value","january"],["value","february"],["value","march"],["value","april"],["value","may"],["value","june"],["value","july"],["value","august"],["value","september"],["value","october"],["value","november"],["value","december"],[1,"year"],["name","Year"],["year",""],["value","2023"],["value","2024"],["value","2025"],["value","2026"],["value","2027"],["value","2028"],["value","2029"],[1,"card-verification"],[1,"cvv-input"],["type","text","placeholder","CVV","maxlength","3","minlength","3"],["CVV",""],[1,"cvv-details"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","id","closeBtn",1,"btn","btn-light",3,"click"],[4,"ngIf","ngIfThen"],["visa",""],["src","../../../../assets/img/visa.png","alt","visa",1,"card-logo"],["src","../../../../assets/img/mastercard.png","alt","mastercard",1,"card-logo"],["id","1",1,"card"],[1,"card-content"],["src","../../../../assets/img/chip.png","alt","chip",1,"chip"],[1,"deleteBtn",3,"click"],[1,"material-icons"],[1,"lower-card"],[2,"display","flex"],[4,"ngFor","ngForOf"],[1,"third-row-card"],[1,"exp","exp-month"],[1,"exp","exp-year"],[1,"exp","cvv"],[1,"card-number-4"],["src","../../../../assets/img/visa.png","alt","visa",1,"card-type"],["src","../../../../assets/img/mastercard.png","alt","mastercard",1,"card-type"],["id","2",1,"card"],["id","3",1,"card"],[1,"btn","btn-outline-primary","mb-2","me-2",3,"click"],[3,"hidden"],[2,"display","flex","justify-content","center","align-items","center","margin","10px 0 15px 10px"],[2,"margin-right","10px"],["name","address","rows","5","cols","25","wrap","soft","maxlength","100","id","textAreaAddress",1,"addressTextArea",2,"overflow","hidden","resize","none"],["address",""],[2,"float","left"],[1,"btn","btn-outline-secondary","mb-2","me-2",3,"click"],[1,"btn","btn-success","mb-2","me-2",3,"click"],["addressUpdate",""],["class","addressContainer",3,"hidden",4,"ngFor","ngForOf"],[1,"addressContainer",3,"hidden"],[1,"addressBtn"],[1,"btn","btn-secondary","mb-2","me-2",3,"click"],[1,"btn","btn-danger","mb-2","me-2",3,"click"],["type","text","id","oldPwd","name","oldPwd",1,"oldPwd"],["oldPassword",""],["id","timer"],[3,"click"],[1,"chgPwdContainer"],["class","voucherMain",4,"ngFor","ngForOf"],[1,"voucherMain"]],template:function(e,o){1&e&&(a._UZ(0,"app-header-normal"),a.TgZ(1,"p-toast",0),a.NdJ("onClose",function(){return o.onReject()}),a.YNc(2,foe,12,2,"ng-template",1),a.qZA(),a.TgZ(3,"p-toast",2),a.NdJ("onClose",function(){return o.onReject()}),a.YNc(4,goe,12,2,"ng-template",1),a.qZA(),a.TgZ(5,"div",3)(6,"div",4)(7,"nav",5)(8,"div",6),a.YNc(9,moe,36,3,"ul",7),a.qZA()(),a.TgZ(10,"main",8)(11,"div",9),a.YNc(12,boe,5,1,"div",10),a.YNc(13,Koe,15,4,"div",10),a.YNc(14,Joe,32,6,"div",10),a.YNc(15,Qoe,21,5,"div",10),a.YNc(16,Xoe,4,0,"div",10),a.YNc(17,rse,5,1,"div",10),a.qZA()()()()),2&e&&(a.xp6(1),a.Q6J("baseZIndex",5e3),a.xp6(2),a.Q6J("baseZIndex",5e3),a.xp6(6),a.Q6J("ngIf",o.authService.userData),a.xp6(1),a.Q6J("ngSwitch",o.userAccPage),a.xp6(2),a.Q6J("ngSwitchCase","profile"),a.xp6(1),a.Q6J("ngSwitchCase","cards"),a.xp6(1),a.Q6J("ngSwitchCase","address"),a.xp6(1),a.Q6J("ngSwitchCase","password"),a.xp6(1),a.Q6J("ngSwitchCase","purchases"),a.xp6(1),a.Q6J("ngSwitchCase","vouchers"))},dependencies:[Ui,Ji,uo,Eo,zs,UH,zH,y1,XM,b1,Ci,I2,S0,H5,D0],styles:[".row[_ngcontent-%COMP%]{flex-wrap:nowrap}.row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:auto}.main[_ngcontent-%COMP%]{overflow:hidden}.pages[_ngcontent-%COMP%]{margin:10px 20px;transition:1s ease-in-out;-webkit-transition:1s ease-in-out}.move-right[_ngcontent-%COMP%]{transform:translate(-200%);-webkit-transform:translateX(-200%)}li[_ngcontent-%COMP%]{margin:5px 0}li[_ngcontent-%COMP%] ~ li[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#87cefa80;color:#005de8}.media[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-self:center;justify-items:center}.media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:120px}.media[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-style:italic;margin-top:8px}.center[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;width:50%;width:120px;height:120px}.nav.flex-column[_ngcontent-%COMP%] > .nav-item[_ngcontent-%COMP%]:first-of-type{margin-bottom:20px}.nav-link[_ngcontent-%COMP%]{color:#63666a}.nav-link[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:5px}.userAttr[_ngcontent-%COMP%]{display:flex}.userAttr-title[_ngcontent-%COMP%]{width:100px}.userAttr-title-empty[_ngcontent-%COMP%]{width:100px;color:red}.userAttr[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{margin-left:15px}.profile-pic[_ngcontent-%COMP%]{display:flex;margin-bottom:20px}.upload-profile-pic[_ngcontent-%COMP%]{margin:25px 0 0 10px}.nameInputBox[_ngcontent-%COMP%]{height:25px;margin-left:15px}.locationTextArea[_ngcontent-%COMP%]{margin-left:15px}.saveBtn[_ngcontent-%COMP%]{border:1px solid #005DE8;background-color:#f5f5f5;color:#005de8;padding:5px 8px;margin-top:25px;border-radius:5px}.saveBtn[_ngcontent-%COMP%]:hover{background-color:#005de8;color:#f5f5f5}.credit-card[_ngcontent-%COMP%]{width:360px;height:400px;margin:60px auto 0;border:1px solid #ddd;border-radius:6px;background-color:#fff;box-shadow:1px 2px 3px #0000001a}.form-header[_ngcontent-%COMP%]{height:60px;padding:20px 30px 0;border-bottom:1px solid #E1E8EE}.form-body[_ngcontent-%COMP%]{height:340px;padding:30px 30px 20px}.title[_ngcontent-%COMP%]{margin:0;color:#5e6977;font-size:18px}.card-number[_ngcontent-%COMP%], .cvv-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .month[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .paypal-btn[_ngcontent-%COMP%], .proceed-btn[_ngcontent-%COMP%], .year[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:42px}.card-number[_ngcontent-%COMP%], .month[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .year[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:14px;font-weight:100;line-height:14px}.card-number[_ngcontent-%COMP%], .cvv-details[_ngcontent-%COMP%], .cvv-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .month[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .year[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:#86939e;opacity:.7}.card-number[_ngcontent-%COMP%]{width:100%;margin-bottom:20px;padding-left:20px;border:2px solid #e1e8ee;border-radius:6px}.month[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .year[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{-moz-appearance:none;-webkit-appearance:none;width:145px;margin-bottom:20px;padding-left:20px;border:2px solid #e1e8ee;border-radius:6px;background:url(https://designmodo.com/demo/creditcardform/caret.png) no-repeat;background-position:85% 50%}.month[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{float:left}.year[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{float:right}.cvv-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:145px;float:left;padding-left:20px;border:2px solid #e1e8ee;border-radius:6px;background:#fff}.cvv-details[_ngcontent-%COMP%]{float:left;margin:0 0 20px 10px;font-size:12px;font-weight:300;line-height:16px}.cvv-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:6px}.card-logo[_ngcontent-%COMP%]{width:40px;position:absolute;top:53px;right:60px}.max-card-warning[_ngcontent-%COMP%]{color:#63666a;font-size:smaller}.card[_ngcontent-%COMP%]{margin:10px 0 20px 25px;width:350px;border-radius:25px}.card[_ngcontent-%COMP%]:hover{box-shadow:0 0 15px 1px #005de8bf;-webkit-box-shadow:0px 0px 15px 1px rgba(0,93,232,.75);-moz-box-shadow:0px 0px 15px 1px rgba(0,93,232,.75)}.card[_ngcontent-%COMP%]:hover   .deleteBtn[_ngcontent-%COMP%]{visibility:visible}.card-content[_ngcontent-%COMP%]{padding:30px}.card-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:smaller;font-style:italic}.lower-card[_ngcontent-%COMP%]{margin:10px 0}.card-number-4[_ngcontent-%COMP%]{font-size:25px;font-weight:700;height:25px}.chip[_ngcontent-%COMP%]{width:40px;height:auto}.third-row-card[_ngcontent-%COMP%]{display:flex}.exp[_ngcontent-%COMP%]{width:100px;margin-right:10px}.exp-month[_ngcontent-%COMP%], .exp-year[_ngcontent-%COMP%], .exp[_ngcontent-%COMP%]   .cvv[_ngcontent-%COMP%]{width:100px}.card-type[_ngcontent-%COMP%]{width:50px;float:right}.deleteBtn[_ngcontent-%COMP%]{background-color:#fff;border:none;float:right;visibility:hidden}.deleteBtn[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.addressContainer[_ngcontent-%COMP%]{border:1px solid #ccc;padding:10px 15px;border-radius:15px;margin:15px 15px 0;max-width:500px}.chgPwdContainer[_ngcontent-%COMP%]{display:flex}.chgPwdContainer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:10px}.chgPwd[_ngcontent-%COMP%]{padding:10px 15px}.voucherMain[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:10px;display:flex;margin:0 30px 8px;height:80px;cursor:pointer;align-items:center}.voucherMain[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px 5px #ccccccbf;-webkit-box-shadow:0px 0px 5px 5px rgba(204,204,204,.75);-moz-box-shadow:0px 0px 5px 5px rgba(204,204,204,.75)}"]}),i})(),ose=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-faq"]],decls:2,vars:0,template:function(e,o){1&e&&(a.TgZ(0,"p"),a._uU(1,"faq works!"),a.qZA())}}),i})();var U5=q(7123);const sse=["ngcarousel"];function ase(i,t){1&i&&(a.TgZ(0,"div",3),a._UZ(1,"img",4),a.qZA())}function lse(i,t){1&i&&(a.TgZ(0,"div",3),a._UZ(1,"img",5),a.qZA())}let cse=(()=>{class i{constructor(){}ngOnInit(){}slideActivate(e){console.log(e.source),console.log(e.paused),console.log(Wf.INDICATOR),console.log(Wf.ARROW_LEFT),console.log(Wf.ARROW_RIGHT)}navigateToSlide(e){this.ngCarousel.select(e),console.log(e)}getToPrev(){this.ngCarousel.prev()}goToNext(){this.ngCarousel.next()}stopCarousel(){this.ngCarousel.pause()}restartCarousel(){this.ngCarousel.cycle()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-banner"]],viewQuery:function(e,o){if(1&e&&a.Gf(sse,7),2&e){let s;a.iGM(s=a.CRH())&&(o.ngCarousel=s.first)}},decls:3,vars:6,consts:[["id","slider",3,"showNavigationArrows","showNavigationIndicators","keyboard","pauseOnHover","wrap","activeId"],["ngbSlide","","id","firstSlide"],["ngbSlide","","id","secondSlide"],[1,"picsum-img-wrapper"],["src","../../../../assets/img/banner/1.jpg","alt","Angular Carousel 1"],["src","../../../../assets/img/banner/2.jpg","alt","Angular Carousel 2"]],template:function(e,o){1&e&&(a.TgZ(0,"ngb-carousel",0),a.YNc(1,ase,2,0,"ng-template",1),a.YNc(2,lse,2,0,"ng-template",2),a.qZA()),2&e&&a.Q6J("showNavigationArrows",!0)("showNavigationIndicators",!0)("keyboard",!0)("pauseOnHover",!0)("wrap",!0)("activeId","secondSlide")},dependencies:[Y4,b2],styles:["ngb-carousel[_ngcontent-%COMP%]{max-width:700px;margin:50px auto}ngb-carousel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;outline:none}ngb-carousel[_ngcontent-%COMP%]{width:inherit;height:inherit}.carousel-inner[_ngcontent-%COMP%]{overflow:visible}.carousel-item[_ngcontent-%COMP%]{display:flex!important;opacity:0;visibility:hidden;transition:opacity 1.2s ease-in-out,visibility 1.2s;z-index:-1}.carousel-item.active[_ngcontent-%COMP%]{opacity:1;visibility:visible;z-index:10}.carousel-control-prev[_ngcontent-%COMP%], .carousel-control-next[_ngcontent-%COMP%], .carousel-indicators[_ngcontent-%COMP%]{z-index:20}","ngb-carousel[_ngcontent-%COMP%] {\n    max-width: 700px;\n    margin: 50px auto;\n  }\n\n  ngb-carousel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n    width: 100%;\n    outline: none;\n  }\n\n  ngb-carousel[_ngcontent-%COMP%] {\n    width: inherit;\n    height: inherit;\n  }\n\n  .carousel-inner[_ngcontent-%COMP%] {\n    overflow: visible;\n  }\n\n  .carousel-item[_ngcontent-%COMP%] {\n    display: flex !important;\n    opacity: 0;\n    visibility: hidden;\n    transition: opacity 1.2s ease-in-out, visibility 1.2s;\n    z-index: -1;\n  }\n\n  .carousel-item.active[_ngcontent-%COMP%] {\n    opacity: 1;\n    visibility: visible;\n    z-index: 10;\n  }\n\n  .carousel-control-prev[_ngcontent-%COMP%] {\n    z-index: 20;\n  }\n\n  .carousel-control-next[_ngcontent-%COMP%] {\n    z-index: 20;\n  }\n\n  .carousel-indicators[_ngcontent-%COMP%] {\n    z-index: 20;\n  }"]}),i})(),use=(()=>{class i{constructor(){}ngOnInit(){}goToMore(){alert("works")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-categories"]],decls:36,vars:0,consts:[[1,"category"],[1,"category-header"],[1,"category-list"],[1,"category-item"],["src","../../../../assets/img/categories/phone.png","alt","phone"],["src","../../../../assets/img/categories/watch.png","alt","watch"],["src","../../../../assets/img/categories/shoe.png","alt","shoe"],["src","../../../../assets/img/categories/fashion.png","alt","fashion"],["src","../../../../assets/img/categories/computer.png","alt","computer"],[1,"category-more",3,"click"],["src","https://cdn.lordicon.com/iifryyua.json","trigger","loop-on-hover",2,"width","32px","height","32px"]],template:function(e,o){1&e&&(a.TgZ(0,"div",0)(1,"div",1)(2,"h1"),a._uU(3,"Categories"),a.qZA(),a._UZ(4,"p"),a.qZA(),a.TgZ(5,"ul",2)(6,"li")(7,"div",3),a._UZ(8,"img",4),a.TgZ(9,"p"),a._uU(10,"Mobile & Accessories"),a.qZA()()(),a.TgZ(11,"li")(12,"div",3),a._UZ(13,"img",5),a.TgZ(14,"p"),a._uU(15,"Watches"),a.qZA()()(),a.TgZ(16,"li")(17,"div",3),a._UZ(18,"img",6),a.TgZ(19,"p"),a._uU(20,"Shoes"),a.qZA()()(),a.TgZ(21,"li")(22,"div",3),a._UZ(23,"img",7),a.TgZ(24,"p"),a._uU(25,"Fashion"),a.qZA()()(),a.TgZ(26,"li")(27,"div",3),a._UZ(28,"img",8),a.TgZ(29,"p"),a._uU(30,"Computer & Accessories"),a.qZA()()(),a.TgZ(31,"li")(32,"div",9),a.NdJ("click",function(){return o.goToMore()}),a._UZ(33,"lord-icon",10),a.TgZ(34,"p"),a._uU(35,"More"),a.qZA()()()()())},styles:[".category[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]{text-transform:uppercase;margin:0 auto;background-image:linear-gradient(315deg,#2a2a72 20%,#009ffd 94%);background-clip:text;-moz-background-clip:text;-webkit-background-clip:text;color:transparent;text-align:center}.category[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]{list-style:none;display:flex;justify-content:center;align-items:center}.category[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]{margin:5px;width:160px;height:220px;border:1px solid #ccc;border-radius:15px}.category[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px 2px #69696940;-webkit-box-shadow:0px 0px 5px 2px rgba(105,105,105,.25);-moz-box-shadow:0px 0px 5px 2px rgba(105,105,105,.25)}.category[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;padding:5px;margin-left:5px}.category[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;word-wrap:break-word;padding:0 5px}.category[_ngcontent-%COMP%]   .category-more[_ngcontent-%COMP%]{margin-left:35px;cursor:pointer}"]}),i})();function dse(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",23),a.NdJ("click",function(){a.CHM(e);const s=a.oxw().$implicit,l=a.oxw();return a.KtG(l.navigateToProductDetails(s.id,s.type))}),a._UZ(1,"img",24)(2,"img",25)(3,"img",26),a.qZA()}if(2&i){const e=a.oxw().$implicit,o=a.oxw();a.s9C("id",e.id),a.xp6(1),a.MGl("src","../../../../assets/img/",e.image1,"",a.LSH),a.Q6J("ngClass",o.product1mainImg),a.xp6(1),a.MGl("src","../../../../assets/img/",e.image2,"",a.LSH),a.Q6J("ngClass",o.product1subImg0),a.xp6(1),a.MGl("src","../../../../assets/img/",e.image3,"",a.LSH),a.Q6J("ngClass",o.product1subImg1)}}function hse(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",23),a.NdJ("click",function(){a.CHM(e);const s=a.oxw().$implicit,l=a.oxw();return a.KtG(l.navigateToProductDetails(s.id,s.type))}),a._UZ(1,"img",24)(2,"img",25)(3,"img",26),a.qZA()}if(2&i){const e=a.oxw().$implicit,o=a.oxw();a.s9C("id",e.id),a.xp6(1),a.MGl("src","../../../../assets/img/",e.image1,"",a.LSH),a.Q6J("ngClass",o.product2mainImg),a.xp6(1),a.MGl("src","../../../../assets/img/",e.image2,"",a.LSH),a.Q6J("ngClass",o.product2subImg0),a.xp6(1),a.MGl("src","../../../../assets/img/",e.image3,"",a.LSH),a.Q6J("ngClass",o.product2subImg1)}}function pse(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",27),a.NdJ("click",function(){a.CHM(e);const s=a.oxw().$implicit,l=a.oxw();return a.KtG(l.navigateToProductDetails(s.id,s.type))}),a._UZ(1,"img",24)(2,"img",25)(3,"img",26),a.qZA()}if(2&i){const e=a.oxw().$implicit,o=a.oxw();a.s9C("id",e.id),a.xp6(1),a.MGl("src","../../../../assets/img/",e.image1,"",a.LSH),a.Q6J("ngClass",o.product3mainImg),a.xp6(1),a.MGl("src","../../../../assets/img/",e.image2,"",a.LSH),a.Q6J("ngClass",o.product3subImg0),a.xp6(1),a.MGl("src","../../../../assets/img/",e.image3,"",a.LSH),a.Q6J("ngClass",o.product3subImg1)}}function fse(i,t){1&i&&(a.TgZ(0,"p"),a._uU(1,"\u2b50"),a.qZA())}function gse(i,t){1&i&&(a.TgZ(0,"p"),a._uU(1,"\u2b50\u2b50"),a.qZA())}function mse(i,t){1&i&&(a.TgZ(0,"p"),a._uU(1,"\u2b50\u2b50\u2b50"),a.qZA())}function _se(i,t){1&i&&(a.TgZ(0,"p"),a._uU(1,"\u2b50\u2b50\u2b50\u2b50"),a.qZA())}function yse(i,t){1&i&&(a.TgZ(0,"p"),a._uU(1,"\u2b50\u2b50\u2b50\u2b50\u2b50"),a.qZA())}function vse(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div")(1,"span",28),a._uU(2,"Colour:"),a.qZA(),a.TgZ(3,"div",29)(4,"span",30),a.NdJ("click",function(){a.CHM(e);const s=a.oxw().$implicit,l=a.oxw();return a.KtG(l.changeColor(s.color0,s.id))}),a.qZA(),a.TgZ(5,"span",31),a.NdJ("click",function(){a.CHM(e);const s=a.oxw().$implicit,l=a.oxw();return a.KtG(l.changeColor(s.color1,s.id))}),a.qZA(),a.TgZ(6,"span",32),a.NdJ("click",function(){a.CHM(e);const s=a.oxw().$implicit,l=a.oxw();return a.KtG(l.changeColor(s.color2,s.id))}),a.qZA()()()}if(2&i){const e=a.oxw(2);a.xp6(4),a.Q6J("ngClass",e.product1MainColor),a.xp6(1),a.Q6J("ngClass",e.product1SubColor0),a.xp6(1),a.Q6J("ngClass",e.product1SubColor1)}}function bse(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div")(1,"span",28),a._uU(2,"Colour:"),a.qZA(),a.TgZ(3,"div",29)(4,"span",30),a.NdJ("click",function(){a.CHM(e);const s=a.oxw().$implicit,l=a.oxw();return a.KtG(l.changeColor(s.color0,s.id))}),a.qZA(),a.TgZ(5,"span",31),a.NdJ("click",function(){a.CHM(e);const s=a.oxw().$implicit,l=a.oxw();return a.KtG(l.changeColor(s.color1,s.id))}),a.qZA(),a.TgZ(6,"span",32),a.NdJ("click",function(){a.CHM(e);const s=a.oxw().$implicit,l=a.oxw();return a.KtG(l.changeColor(s.color2,s.id))}),a.qZA()()()}if(2&i){const e=a.oxw(2);a.xp6(4),a.Q6J("ngClass",e.product2MainColor),a.xp6(1),a.Q6J("ngClass",e.product2SubColor0),a.xp6(1),a.Q6J("ngClass",e.product2SubColor1)}}function wse(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div")(1,"span",28),a._uU(2,"Colour:"),a.qZA(),a.TgZ(3,"div",29)(4,"span",30),a.NdJ("click",function(){a.CHM(e);const s=a.oxw().$implicit,l=a.oxw();return a.KtG(l.changeColor(s.color0,s.id))}),a.qZA(),a.TgZ(5,"span",31),a.NdJ("click",function(){a.CHM(e);const s=a.oxw().$implicit,l=a.oxw();return a.KtG(l.changeColor(s.color1,s.id))}),a.qZA(),a.TgZ(6,"span",32),a.NdJ("click",function(){a.CHM(e);const s=a.oxw().$implicit,l=a.oxw();return a.KtG(l.changeColor(s.color2,s.id))}),a.qZA()()()}if(2&i){const e=a.oxw(2);a.xp6(4),a.Q6J("ngClass",e.product3MainColor),a.xp6(1),a.Q6J("ngClass",e.product3SubColor0),a.xp6(1),a.Q6J("ngClass",e.product3SubColor1)}}function Cse(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",3)(1,"div",4),a._UZ(2,"img",5)(3,"i",6),a.qZA(),a.TgZ(4,"div",7)(5,"div",8)(6,"lord-icon",9),a.NdJ("click",function(){const l=a.CHM(e).$implicit,u=a.oxw();return a.KtG(u.addToCart(l.id))}),a.qZA()(),a._UZ(7,"div")(8,"div"),a.qZA(),a.TgZ(9,"div",10),a.YNc(10,dse,4,7,"div",11),a.YNc(11,hse,4,7,"div",11),a.YNc(12,pse,4,7,"div",12),a.qZA(),a.TgZ(13,"div",13)(14,"p",14),a._uU(15),a.qZA(),a.TgZ(16,"p"),a._uU(17),a.qZA(),a.TgZ(18,"div",15)(19,"div",16),a.YNc(20,fse,2,0,"p",17),a.YNc(21,gse,2,0,"p",17),a.YNc(22,mse,2,0,"p",17),a.YNc(23,_se,2,0,"p",17),a.YNc(24,yse,2,0,"p",17),a.qZA(),a.TgZ(25,"p"),a._uU(26),a.qZA()()(),a.TgZ(27,"div",18)(28,"div",19),a.YNc(29,vse,7,3,"div",17),a.YNc(30,bse,7,3,"div",17),a.YNc(31,wse,7,3,"div",17),a.qZA(),a.TgZ(32,"div",20)(33,"span",21),a._uU(34),a.qZA(),a.TgZ(35,"span",22),a._uU(36),a.qZA()()()()}if(2&i){const e=t.$implicit;a.xp6(2),a.MGl("src","../../../../assets/img/",e.logo,"",a.LSH),a.xp6(7),a.Q6J("ngSwitch",e.id),a.xp6(1),a.Q6J("ngSwitchCase",1e3),a.xp6(1),a.Q6J("ngSwitchCase",1001),a.xp6(1),a.Q6J("ngSwitchCase",1002),a.xp6(3),a.Oqu(e.name),a.xp6(2),a.Oqu(e.description),a.xp6(2),a.Q6J("ngSwitch",e.rating),a.xp6(1),a.Q6J("ngSwitchCase",1),a.xp6(1),a.Q6J("ngSwitchCase",2),a.xp6(1),a.Q6J("ngSwitchCase",3),a.xp6(1),a.Q6J("ngSwitchCase",4),a.xp6(1),a.Q6J("ngSwitchCase",5),a.xp6(2),a.hij("(",e.sold," sold)"),a.xp6(2),a.Q6J("ngSwitch",e.id),a.xp6(1),a.Q6J("ngSwitchCase",1e3),a.xp6(1),a.Q6J("ngSwitchCase",1001),a.xp6(1),a.Q6J("ngSwitchCase",1002),a.xp6(3),a.hij("RM ",e.discountedPrice,""),a.xp6(2),a.hij("RM ",e.oldPrice,"")}}let Tse=(()=>{class i{constructor(e,o){this.productService=e,this.router=o,this.discountedProducts=[],this.product1mainImg="active",this.product1subImg0="",this.product1subImg1="",this.product1MainColor=["circle","blue","active"],this.product1SubColor0=["circle","pink"],this.product1SubColor1=["circle","yellow"],this.product2mainImg="active",this.product2subImg0="",this.product2subImg1="",this.product2MainColor=["circle","black","active"],this.product2SubColor0=["circle","blue"],this.product2SubColor1=["circle","white"],this.product3mainImg="active",this.product3subImg0="",this.product3subImg1="",this.product3MainColor=["circle","burgundy","active"],this.product3SubColor0=["circle","green"],this.product3SubColor1=["circle","white"],this.responsiveOptions=[{breakpoint:"1024px",numVisible:3,numScroll:3},{breakpoint:"768px",numVisible:2,numScroll:2},{breakpoint:"560px",numVisible:1,numScroll:1}]}ngOnInit(){this.productService.getDiscountedProducts().then(e=>{this.discountedProducts=e})}changeColor(e,o){"1000"==o?(this.productColor0=this.discountedProducts.find(s=>s.id===o).color0,this.productColor1=this.discountedProducts.find(s=>s.id===o).color1,this.productColor2=this.discountedProducts.find(s=>s.id===o).color2,e==this.productColor0?(this.product1MainColor=["circle","blue","active"],this.product1SubColor0=["circle","pink"],this.product1SubColor1=["circle","yellow"],this.product1mainImg="active",this.product1subImg0="",this.product1subImg1=""):e==this.productColor1?(this.product1MainColor=["circle","blue"],this.product1SubColor0=["circle","pink","active"],this.product1SubColor1=["circle","yellow"],this.product1mainImg="",this.product1subImg0="active",this.product1subImg1=""):e==this.productColor2&&(this.product1MainColor=["circle","blue"],this.product1SubColor0=["circle","pink"],this.product1SubColor1=["circle","yellow","active"],this.product1mainImg="",this.product1subImg0="",this.product1subImg1="active")):"1001"==o?(this.productColor0=this.discountedProducts.find(s=>s.id===o).color0,this.productColor1=this.discountedProducts.find(s=>s.id===o).color1,this.productColor2=this.discountedProducts.find(s=>s.id===o).color2,e==this.productColor0?(this.product2MainColor=["circle","black","active"],this.product2SubColor0=["circle","blue"],this.product2SubColor1=["circle","white"],this.product2mainImg="active",this.product2subImg0="",this.product2subImg1=""):e==this.productColor1?(this.product2MainColor=["circle","black"],this.product2SubColor0=["circle","blue","active"],this.product2SubColor1=["circle","yellow"],this.product2mainImg="",this.product2subImg0="active",this.product2subImg1=""):e==this.productColor2&&(this.product2MainColor=["circle","black"],this.product2SubColor0=["circle","blue"],this.product2SubColor1=["circle","white","active"],this.product2mainImg="",this.product2subImg0="",this.product2subImg1="active")):"1002"==o&&(this.productColor0=this.discountedProducts.find(s=>s.id===o).color0,this.productColor1=this.discountedProducts.find(s=>s.id===o).color1,this.productColor2=this.discountedProducts.find(s=>s.id===o).color2,e==this.productColor0?(this.product3MainColor=["circle","burgundy","active"],this.product3SubColor0=["circle","green"],this.product3SubColor1=["circle","white"],this.product3mainImg="active",this.product3subImg0="",this.product3subImg1=""):e==this.productColor1?(this.product3MainColor=["circle","burgundy"],this.product3SubColor0=["circle","green","active"],this.product3SubColor1=["circle","white"],this.product3mainImg="",this.product3subImg0="active",this.product3subImg1=""):e==this.productColor2&&(this.product3MainColor=["circle","burgundy"],this.product3SubColor0=["circle","green"],this.product3SubColor1=["circle","white","active"],this.product3mainImg="",this.product3subImg0="",this.product3subImg1="active"))}navigateToProductDetails(e,o){this.router.navigate(["/product_details/",e,o])}addToCart(e){this.router.navigate(["/cart/",e])}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(Zb),a.Y36(er))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-discounted-products"]],decls:7,vars:1,consts:[[1,"header"],[1,"product-container"],["class","product-card",4,"ngFor","ngForOf"],[1,"product-card"],[1,"logo-cart"],["alt","logo",3,"src"],[1,"bx","bx-shopping-bag"],[1,"product-right-panel"],[1,"add-to-cart"],["src","https://cdn.lordicon.com/aoggitwj.json","trigger","loop-on-hover","colors","primary:#005de8",2,"width","40px","height","40px","cursor","pointer",3,"click"],[3,"ngSwitch"],["class","main-images",3,"id","click",4,"ngSwitchCase"],["class","main-images last",3,"id","click",4,"ngSwitchCase"],[1,"shoe-details"],[1,"shoe_name"],[1,"rating-sold"],[1,"stars",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"color-price"],[1,"color-option",3,"ngSwitch"],[1,"price"],[1,"price_num"],[1,"price_letter"],[1,"main-images",3,"id","click"],["id","blue","alt","mainImg",3,"ngClass","src"],["id","pink","alt","subImg0",3,"ngClass","src"],["id","yellow","alt","subImg1",3,"ngClass","src"],[1,"main-images","last",3,"id","click"],[1,"color"],[1,"circles"],["id","mainColor",3,"ngClass","click"],["id","subColor0",3,"ngClass","click"],["id","subColor1",3,"ngClass","click"]],template:function(e,o){1&e&&(a.TgZ(0,"div",0)(1,"h1"),a._uU(2,"Products on"),a.qZA(),a.TgZ(3,"p"),a._uU(4,"SALE"),a.qZA()(),a.TgZ(5,"div",1),a.YNc(6,Cse,37,20,"div",2),a.qZA()),2&e&&(a.xp6(6),a.Q6J("ngForOf",o.discountedProducts))},dependencies:[lo,Ui,Eo,zs],styles:[".product-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.product-card[_ngcontent-%COMP%]{position:relative;max-width:355px;width:100%;border-radius:25px;padding:20px 30px 30px;background:#fff;box-shadow:0 5px 10px #0003;z-index:3;overflow:hidden;margin:10px}.product-card[_ngcontent-%COMP%]:hover{box-shadow:0 0 15px 1px #005de8bf;-webkit-box-shadow:0px 0px 15px 1px rgba(0,93,232,.75);-moz-box-shadow:0px 0px 15px 1px rgba(0,93,232,.75)}.header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-transform:uppercase;background-image:linear-gradient(315deg,#2a2a72 20%,#009ffd 94%);background-clip:text;-moz-background-clip:text;-webkit-background-clip:text;color:transparent;text-align:center;padding-top:15px}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:100px;font-weight:800;color:transparent;background-image:url(https://media.giphy.com/media/LnEeDF1IzKdZlHruw9/giphy-downsized-large.gif);background-position:center;-webkit-background-clip:text;margin:0 0 0 15px}.product-right-panel[_ngcontent-%COMP%]{float:right;margin-top:-35px}.product-right-panel[_ngcontent-%COMP%]:hover{transform:scale(1.15)}.product-card[_ngcontent-%COMP%]   .logo-cart[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.product-card[_ngcontent-%COMP%]   .logo-cart[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px;object-fit:cover}.product-card[_ngcontent-%COMP%]   .logo-cart[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:27px;color:#707070;cursor:pointer;transition:color .3s ease}.product-card[_ngcontent-%COMP%]   .logo-cart[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#333}.product-card[_ngcontent-%COMP%]   .main-images[_ngcontent-%COMP%]{position:relative;height:250px;margin-top:10px;transition:.5s ease;cursor:pointer}.product-card[_ngcontent-%COMP%]   .main-images[_ngcontent-%COMP%]:hover{transform:rotate(8deg)}.product-card[_ngcontent-%COMP%]   .main-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;height:300px;width:300px;object-fit:cover;transform:rotate(18deg);left:12px;top:-40px;z-index:-1;opacity:0;transition:opacity .5s ease}.last[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding-top:15px;height:250px!important;width:250px!important}.product-card[_ngcontent-%COMP%]   .main-images[_ngcontent-%COMP%]   img.active[_ngcontent-%COMP%]{opacity:1}.product-card[_ngcontent-%COMP%]   .shoe-details[_ngcontent-%COMP%]   .shoe_name[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#161616;text-align:center}.product-card[_ngcontent-%COMP%]   .shoe-details[_ngcontent-%COMP%]{margin-top:-25px}.product-card[_ngcontent-%COMP%]   .shoe-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;font-weight:400;color:#333;text-align:justify}.rating-sold[_ngcontent-%COMP%]{display:flex}.rating-sold[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:5px}.product-card[_ngcontent-%COMP%]   .shoe-details[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0 -1px;color:#333}.product-card[_ngcontent-%COMP%]   .color-price[_ngcontent-%COMP%]   .color-option[_ngcontent-%COMP%]{display:flex;align-items:center}.color-price[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:10px}.color-price[_ngcontent-%COMP%]   .color-option[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#333;margin-right:8px}.color-option[_ngcontent-%COMP%]   .circles[_ngcontent-%COMP%]{display:flex}.color-option[_ngcontent-%COMP%]   .circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:18px;width:18px;background:#0071C7;border-radius:50%;margin:0 4px;cursor:pointer;transition:all .4s ease}.color-option[_ngcontent-%COMP%]   .circles[_ngcontent-%COMP%]   .circle.blue.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #fff,0 0 0 4px #0071c7}.color-option[_ngcontent-%COMP%]   .circles[_ngcontent-%COMP%]   .circle.pink[_ngcontent-%COMP%]{background:#FA1795}.color-option[_ngcontent-%COMP%]   .circles[_ngcontent-%COMP%]   .circle.pink.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #fff,0 0 0 4px #fa1795}.color-option[_ngcontent-%COMP%]   .circles[_ngcontent-%COMP%]   .circle.yellow[_ngcontent-%COMP%]{background:#F5DA00}.color-option[_ngcontent-%COMP%]   .circles[_ngcontent-%COMP%]   .circle.yellow.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #fff,0 0 0 4px #f5da00}.color-option[_ngcontent-%COMP%]   .circles[_ngcontent-%COMP%]   .circle.black[_ngcontent-%COMP%]{background:#414a4c}.color-option[_ngcontent-%COMP%]   .circles[_ngcontent-%COMP%]   .circle.black.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #fff,0 0 0 4px #414a4c}.color-option[_ngcontent-%COMP%]   .circles[_ngcontent-%COMP%]   .circle.white[_ngcontent-%COMP%]{background:#FBFAF5;border:1px solid #ccc}.color-option[_ngcontent-%COMP%]   .circles[_ngcontent-%COMP%]   .circle.white.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #fff,0 0 0 4px #414a4c}.color-option[_ngcontent-%COMP%]   .circles[_ngcontent-%COMP%]   .circle.burgundy[_ngcontent-%COMP%]{background:#65081F}.color-option[_ngcontent-%COMP%]   .circles[_ngcontent-%COMP%]   .circle.burgundy.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #fff,0 0 0 4px #65081f}.color-option[_ngcontent-%COMP%]   .circles[_ngcontent-%COMP%]   .circle.green[_ngcontent-%COMP%]{background:#013220}.color-option[_ngcontent-%COMP%]   .circles[_ngcontent-%COMP%]   .circle.green.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #fff,0 0 0 4px #013220}.color-price[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.color-price[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .price_num[_ngcontent-%COMP%]{font-size:25px;font-weight:600;color:#ff160c}.color-price[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .price_letter[_ngcontent-%COMP%]{font-size:10px;font-weight:600;margin-top:-4px;color:#707070;text-decoration:line-through}.product-card[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{position:relative;height:50px;width:100%;border-radius:25px;margin-top:30px;overflow:hidden}.product-card[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .button-layer[_ngcontent-%COMP%]{position:absolute;height:100%;width:300%;left:-100%;background-image:linear-gradient(135deg,#9708CC,#43CBFF,#9708CC,#43CBFF);transition:all .4s ease;border-radius:25PX}.product-card[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover   .button-layer[_ngcontent-%COMP%]{left:0}.product-card[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;background:none;outline:none;border:none;font-size:18px;font-weight:600;letter-spacing:1px;color:#fff}"]}),i})();const Ese=["itemsContainer"];function xse(i,t){1&i&&a.GkF(0)}function Sse(i,t){if(1&i&&(a.TgZ(0,"div",11),a.Hsn(1),a.YNc(2,xse,1,0,"ng-container",12),a.qZA()),2&i){const e=a.oxw();a.xp6(2),a.Q6J("ngTemplateOutlet",e.headerTemplate)}}const Dse=function(i){return{"p-carousel-prev p-link":!0,"p-disabled":i}},Ise=function(i,t){return{"p-carousel-prev-icon pi":!0,"pi-chevron-left":i,"pi-chevron-up":t}};function Mse(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"button",13),a.NdJ("click",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.navBackward(s))}),a._UZ(1,"span",2),a.qZA()}if(2&i){const e=a.oxw();a.Q6J("ngClass",a.VKq(3,Dse,e.isBackwardNavDisabled()))("disabled",e.isBackwardNavDisabled()),a.xp6(1),a.Q6J("ngClass",a.WLB(5,Ise,!e.isVertical(),e.isVertical()))}}function Ase(i,t){1&i&&a.GkF(0)}const j5=function(i,t,e){return{"p-carousel-item p-carousel-item-cloned":!0,"p-carousel-item-active":i,"p-carousel-item-start":t,"p-carousel-item-end":e}},M2=function(i){return{$implicit:i}};function kse(i,t){if(1&i&&(a.TgZ(0,"div",2),a.YNc(1,Ase,1,0,"ng-container",14),a.qZA()),2&i){const e=t.$implicit,o=t.index,s=a.oxw();a.Q6J("ngClass",a.kEZ(3,j5,-1*s.totalShiftedItems===s.value.length,0===o,s.clonedItemsForStarting.length-1===o)),a.xp6(1),a.Q6J("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",a.VKq(7,M2,e))}}function Ose(i,t){1&i&&a.GkF(0)}const Rse=function(i,t,e){return{"p-carousel-item":!0,"p-carousel-item-active":i,"p-carousel-item-start":t,"p-carousel-item-end":e}};function Pse(i,t){if(1&i&&(a.TgZ(0,"div",2),a.YNc(1,Ose,1,0,"ng-container",14),a.qZA()),2&i){const e=t.$implicit,o=t.index,s=a.oxw();a.Q6J("ngClass",a.kEZ(3,Rse,s.firstIndex()<=o&&s.lastIndex()>=o,s.firstIndex()===o,s.lastIndex()===o)),a.xp6(1),a.Q6J("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",a.VKq(7,M2,e))}}function Nse(i,t){1&i&&a.GkF(0)}function Fse(i,t){if(1&i&&(a.TgZ(0,"div",2),a.YNc(1,Nse,1,0,"ng-container",14),a.qZA()),2&i){const e=t.$implicit,o=t.index,s=a.oxw();a.Q6J("ngClass",a.kEZ(3,j5,-1*s.totalShiftedItems===s.numVisible,0===o,s.clonedItemsForFinishing.length-1===o)),a.xp6(1),a.Q6J("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",a.VKq(7,M2,e))}}const Lse=function(i){return{"p-carousel-next p-link":!0,"p-disabled":i}},Vse=function(i,t){return{"p-carousel-prev-icon pi":!0,"pi-chevron-right":i,"pi-chevron-down":t}};function Hse(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"button",13),a.NdJ("click",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.navForward(s))}),a._UZ(1,"span",2),a.qZA()}if(2&i){const e=a.oxw();a.Q6J("ngClass",a.VKq(3,Lse,e.isForwardNavDisabled()))("disabled",e.isForwardNavDisabled()),a.xp6(1),a.Q6J("ngClass",a.WLB(5,Vse,!e.isVertical(),e.isVertical()))}}const Bse=function(i){return{"p-carousel-indicator":!0,"p-highlight":i}};function Use(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"li",2)(1,"button",15),a.NdJ("click",function(s){const u=a.CHM(e).index,g=a.oxw(2);return a.KtG(g.onDotClick(s,u))}),a.qZA()()}if(2&i){const e=t.index,o=a.oxw(2);a.Q6J("ngClass",a.VKq(5,Bse,o._page===e)),a.xp6(1),a.Tol(o.indicatorStyleClass),a.Q6J("ngClass","p-link")("ngStyle",o.indicatorStyle)}}function jse(i,t){if(1&i&&(a.TgZ(0,"ul",0),a.YNc(1,Use,2,7,"li",8),a.qZA()),2&i){const e=a.oxw();a.Tol(e.indicatorsContentClass),a.Q6J("ngClass","p-carousel-indicators p-reset")("ngStyle",e.indicatorsContentStyle),a.xp6(1),a.Q6J("ngForOf",e.totalDotsArray())}}function zse(i,t){1&i&&a.GkF(0)}function Gse(i,t){if(1&i&&(a.TgZ(0,"div",16),a.Hsn(1,1),a.YNc(2,zse,1,0,"ng-container",12),a.qZA()),2&i){const e=a.oxw();a.xp6(2),a.Q6J("ngTemplateOutlet",e.footerTemplate)}}const qse=[[["p-header"]],[["p-footer"]]],Zse=function(i,t){return{"p-carousel p-component":!0,"p-carousel-vertical":i,"p-carousel-horizontal":t}},$se=function(i){return{height:i}},Wse=["p-header","p-footer"];let A2=(()=>{class i{constructor(e,o,s){this.el=e,this.zone=o,this.cd=s,this.orientation="horizontal",this.verticalViewPortHeight="300px",this.contentClass="",this.indicatorsContentClass="",this.indicatorStyleClass="",this.circular=!1,this.showIndicators=!0,this.showNavigators=!0,this.autoplayInterval=0,this.onPage=new a.vpe,this._numVisible=1,this._numScroll=1,this._oldNumScroll=0,this.prevState={numScroll:0,numVisible:0,value:[]},this.defaultNumScroll=1,this.defaultNumVisible=1,this._page=0,this.isRemainingItemsAdded=!1,this.remainingItems=0,this.swipeThreshold=20,this.totalShiftedItems=this.page*this.numScroll*-1}get page(){return this._page}set page(e){this.isCreated&&e!==this._page&&(this.autoplayInterval&&(this.stopAutoplay(),this.allowAutoplay=!1),e>this._page&&e<=this.totalDots()-1?this.step(-1,e):e<this._page&&this.step(1,e)),this._page=e}get numVisible(){return this._numVisible}set numVisible(e){this._numVisible=e}get numScroll(){return this._numVisible}set numScroll(e){this._numScroll=e}get value(){return this._value}set value(e){this._value=e}ngOnChanges(e){e.value&&this.circular&&this._value&&this.setCloneItems(),this.isCreated&&(e.numVisible&&(this.responsiveOptions&&(this.defaultNumVisible=this.numVisible),this.isCircular()&&this.setCloneItems(),this.createStyle(),this.calculatePosition()),e.numScroll&&this.responsiveOptions&&(this.defaultNumScroll=this.numScroll))}ngAfterContentInit(){this.id=Jo(),this.allowAutoplay=!!this.autoplayInterval,this.circular&&this.setCloneItems(),this.responsiveOptions&&(this.defaultNumScroll=this._numScroll,this.defaultNumVisible=this._numVisible),this.createStyle(),this.calculatePosition(),this.responsiveOptions&&this.bindDocumentListeners(),this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngAfterContentChecked(){const e=this.isCircular();let o=this.totalShiftedItems;if(this.value&&this.itemsContainer&&(this.prevState.numScroll!==this._numScroll||this.prevState.numVisible!==this._numVisible||this.prevState.value.length!==this.value.length)){this.autoplayInterval&&this.stopAutoplay(),this.remainingItems=(this.value.length-this._numVisible)%this._numScroll;let s=this._page;0!==this.totalDots()&&s>=this.totalDots()&&(s=this.totalDots()-1,this._page=s,this.onPage.emit({page:this.page})),o=s*this._numScroll*-1,e&&(o-=this._numVisible),s===this.totalDots()-1&&this.remainingItems>0?(o+=-1*this.remainingItems+this._numScroll,this.isRemainingItemsAdded=!0):this.isRemainingItemsAdded=!1,o!==this.totalShiftedItems&&(this.totalShiftedItems=o),this._oldNumScroll=this._numScroll,this.prevState.numScroll=this._numScroll,this.prevState.numVisible=this._numVisible,this.prevState.value=[...this._value],this.totalDots()>0&&this.itemsContainer.nativeElement&&(this.itemsContainer.nativeElement.style.transform=this.isVertical()?`translate3d(0, ${o*(100/this._numVisible)}%, 0)`:`translate3d(${o*(100/this._numVisible)}%, 0, 0)`),this.isCreated=!0,this.autoplayInterval&&this.isAutoplay()&&this.startAutoplay()}e&&(0===this.page?o=-1*this._numVisible:0===o&&(o=-1*this.value.length,this.remainingItems>0&&(this.isRemainingItemsAdded=!0)),o!==this.totalShiftedItems&&(this.totalShiftedItems=o))}createStyle(){this.carouselStyle||(this.carouselStyle=document.createElement("style"),this.carouselStyle.type="text/css",document.body.appendChild(this.carouselStyle));let e=`\n            #${this.id} .p-carousel-item {\n\t\t\t\tflex: 1 0 ${100/this.numVisible}%\n\t\t\t}\n        `;if(this.responsiveOptions){this.responsiveOptions.sort((o,s)=>{const l=o.breakpoint,u=s.breakpoint;let g=null;return g=null==l&&null!=u?-1:null!=l&&null==u?1:null==l&&null==u?0:"string"==typeof l&&"string"==typeof u?l.localeCompare(u,void 0,{numeric:!0}):l<u?-1:l>u?1:0,-1*g});for(let o=0;o<this.responsiveOptions.length;o++){let s=this.responsiveOptions[o];e+=`\n                    @media screen and (max-width: ${s.breakpoint}) {\n                        #${this.id} .p-carousel-item {\n                            flex: 1 0 ${100/s.numVisible}%\n                        }\n                    }\n                `}}this.carouselStyle.innerHTML=e}calculatePosition(){if(this.responsiveOptions){let e=window.innerWidth,o={numVisible:this.defaultNumVisible,numScroll:this.defaultNumScroll};for(let s=0;s<this.responsiveOptions.length;s++){let l=this.responsiveOptions[s];parseInt(l.breakpoint,10)>=e&&(o=l)}if(this._numScroll!==o.numScroll){let s=this._page;s=Math.floor(s*this._numScroll/o.numScroll);let l=o.numScroll*this.page*-1;this.isCircular()&&(l-=o.numVisible),this.totalShiftedItems=l,this._numScroll=o.numScroll,this._page=s,this.onPage.emit({page:this.page})}this._numVisible!==o.numVisible&&(this._numVisible=o.numVisible,this.setCloneItems()),this.cd.markForCheck()}}setCloneItems(){this.clonedItemsForStarting=[],this.clonedItemsForFinishing=[],this.isCircular()&&(this.clonedItemsForStarting.push(...this.value.slice(-1*this._numVisible)),this.clonedItemsForFinishing.push(...this.value.slice(0,this._numVisible)))}firstIndex(){return this.isCircular()?-1*(this.totalShiftedItems+this.numVisible):-1*this.totalShiftedItems}lastIndex(){return this.firstIndex()+this.numVisible-1}totalDots(){return this.value?Math.ceil((this.value.length-this._numVisible)/this._numScroll)+1:0}totalDotsArray(){const e=this.totalDots();return e<=0?[]:Array(e).fill(0)}isVertical(){return"vertical"===this.orientation}isCircular(){return this.circular&&this.value&&this.value.length>=this.numVisible}isAutoplay(){return this.autoplayInterval&&this.allowAutoplay}isForwardNavDisabled(){return this.isEmpty()||this._page>=this.totalDots()-1&&!this.isCircular()}isBackwardNavDisabled(){return this.isEmpty()||this._page<=0&&!this.isCircular()}isEmpty(){return!this.value||0===this.value.length}navForward(e,o){(this.isCircular()||this._page<this.totalDots()-1)&&this.step(-1,o),this.autoplayInterval&&(this.stopAutoplay(),this.allowAutoplay=!1),e&&e.cancelable&&e.preventDefault()}navBackward(e,o){(this.isCircular()||0!==this._page)&&this.step(1,o),this.autoplayInterval&&(this.stopAutoplay(),this.allowAutoplay=!1),e&&e.cancelable&&e.preventDefault()}onDotClick(e,o){let s=this._page;this.autoplayInterval&&(this.stopAutoplay(),this.allowAutoplay=!1),o>s?this.navForward(e,o):o<s&&this.navBackward(e,o)}step(e,o){let s=this.totalShiftedItems;const l=this.isCircular();null!=o?(s=this._numScroll*o*-1,l&&(s-=this._numVisible),this.isRemainingItemsAdded=!1):(s+=this._numScroll*e,this.isRemainingItemsAdded&&(s+=this.remainingItems-this._numScroll*e,this.isRemainingItemsAdded=!1),o=Math.abs(Math.floor((l?s+this._numVisible:s)/this._numScroll))),l&&this.page===this.totalDots()-1&&-1===e?(s=-1*(this.value.length+this._numVisible),o=0):l&&0===this.page&&1===e?(s=0,o=this.totalDots()-1):o===this.totalDots()-1&&this.remainingItems>0&&(s+=-1*this.remainingItems-this._numScroll*e,this.isRemainingItemsAdded=!0),this.itemsContainer&&(this.itemsContainer.nativeElement.style.transform=this.isVertical()?`translate3d(0, ${s*(100/this._numVisible)}%, 0)`:`translate3d(${s*(100/this._numVisible)}%, 0, 0)`,this.itemsContainer.nativeElement.style.transition="transform 500ms ease 0s"),this.totalShiftedItems=s,this._page=o,this.onPage.emit({page:this.page})}startAutoplay(){this.interval=setInterval(()=>{this.totalDots()>0&&(this.page===this.totalDots()-1?this.step(-1,0):this.step(-1,this.page+1))},this.autoplayInterval)}stopAutoplay(){this.interval&&clearInterval(this.interval)}onTransitionEnd(){this.itemsContainer&&(this.itemsContainer.nativeElement.style.transition="",(0===this.page||this.page===this.totalDots()-1)&&this.isCircular()&&(this.itemsContainer.nativeElement.style.transform=this.isVertical()?`translate3d(0, ${this.totalShiftedItems*(100/this._numVisible)}%, 0)`:`translate3d(${this.totalShiftedItems*(100/this._numVisible)}%, 0, 0)`))}onTouchStart(e){let o=e.changedTouches[0];this.startPos={x:o.pageX,y:o.pageY}}onTouchMove(e){e.cancelable&&e.preventDefault()}onTouchEnd(e){let o=e.changedTouches[0];this.isVertical()?this.changePageOnTouch(e,o.pageY-this.startPos.y):this.changePageOnTouch(e,o.pageX-this.startPos.x)}changePageOnTouch(e,o){Math.abs(o)>this.swipeThreshold&&(o<0?this.navForward(e):this.navBackward(e))}bindDocumentListeners(){this.documentResizeListener||(this.documentResizeListener=e=>{this.calculatePosition()},window.addEventListener("resize",this.documentResizeListener))}unbindDocumentListeners(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}ngOnDestroy(){this.responsiveOptions&&this.unbindDocumentListeners(),this.autoplayInterval&&this.stopAutoplay()}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.SBq),a.Y36(a.R0b),a.Y36(a.sBO))},i.\u0275cmp=a.Xpm({type:i,selectors:[["p-carousel"]],contentQueries:function(e,o,s){if(1&e&&(a.Suo(s,Cp,5),a.Suo(s,Pa,5),a.Suo(s,Ci,4)),2&e){let l;a.iGM(l=a.CRH())&&(o.headerFacet=l.first),a.iGM(l=a.CRH())&&(o.footerFacet=l.first),a.iGM(l=a.CRH())&&(o.templates=l)}},viewQuery:function(e,o){if(1&e&&a.Gf(Ese,5),2&e){let s;a.iGM(s=a.CRH())&&(o.itemsContainer=s.first)}},hostAttrs:[1,"p-element"],inputs:{page:"page",numVisible:"numVisible",numScroll:"numScroll",responsiveOptions:"responsiveOptions",orientation:"orientation",verticalViewPortHeight:"verticalViewPortHeight",contentClass:"contentClass",indicatorsContentClass:"indicatorsContentClass",indicatorsContentStyle:"indicatorsContentStyle",indicatorStyleClass:"indicatorStyleClass",indicatorStyle:"indicatorStyle",value:"value",circular:"circular",showIndicators:"showIndicators",showNavigators:"showNavigators",autoplayInterval:"autoplayInterval",style:"style",styleClass:"styleClass"},outputs:{onPage:"onPage"},features:[a.TTD],ngContentSelectors:Wse,decls:14,vars:22,consts:[[3,"ngClass","ngStyle"],["class","p-carousel-header",4,"ngIf"],[3,"ngClass"],[1,"p-carousel-container"],["type","button","pRipple","",3,"ngClass","disabled","click",4,"ngIf"],[1,"p-carousel-items-content",3,"ngStyle"],[1,"p-carousel-items-container",3,"transitionend","touchend","touchstart","touchmove"],["itemsContainer",""],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass","class","ngStyle",4,"ngIf"],["class","p-carousel-footer",4,"ngIf"],[1,"p-carousel-header"],[4,"ngTemplateOutlet"],["type","button","pRipple","",3,"ngClass","disabled","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",3,"ngClass","ngStyle","click"],[1,"p-carousel-footer"]],template:function(e,o){1&e&&(a.F$t(qse),a.TgZ(0,"div",0),a.YNc(1,Sse,3,1,"div",1),a.TgZ(2,"div",2)(3,"div",3),a.YNc(4,Mse,2,8,"button",4),a.TgZ(5,"div",5)(6,"div",6,7),a.NdJ("transitionend",function(){return o.onTransitionEnd()})("touchend",function(l){return o.onTouchEnd(l)})("touchstart",function(l){return o.onTouchStart(l)})("touchmove",function(l){return o.onTouchMove(l)}),a.YNc(8,kse,2,9,"div",8),a.YNc(9,Pse,2,9,"div",8),a.YNc(10,Fse,2,9,"div",8),a.qZA()(),a.YNc(11,Hse,2,8,"button",4),a.qZA(),a.YNc(12,jse,2,5,"ul",9),a.qZA(),a.YNc(13,Gse,3,1,"div",10),a.qZA()),2&e&&(a.Tol(o.styleClass),a.Q6J("ngClass",a.WLB(17,Zse,o.isVertical(),!o.isVertical()))("ngStyle",o.style),a.uIk("id",o.id),a.xp6(1),a.Q6J("ngIf",o.headerFacet||o.headerTemplate),a.xp6(1),a.Tol(o.contentClass),a.Q6J("ngClass","p-carousel-content"),a.xp6(2),a.Q6J("ngIf",o.showNavigators),a.xp6(1),a.Q6J("ngStyle",a.VKq(20,$se,o.isVertical()?o.verticalViewPortHeight:"auto")),a.xp6(3),a.Q6J("ngForOf",o.clonedItemsForStarting),a.xp6(1),a.Q6J("ngForOf",o.value),a.xp6(1),a.Q6J("ngForOf",o.clonedItemsForFinishing),a.xp6(1),a.Q6J("ngIf",o.showNavigators),a.xp6(1),a.Q6J("ngIf",o.showIndicators),a.xp6(1),a.Q6J("ngIf",o.footerFacet||o.footerTemplate))},dependencies:[lo,Ui,Ji,Hr,uo,S0],styles:[".p-carousel{display:flex;flex-direction:column}.p-carousel-content{display:flex;flex-direction:column;overflow:auto}.p-carousel-prev,.p-carousel-next{align-self:center;flex-grow:0;flex-shrink:0;display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-carousel-container{display:flex;flex-direction:row}.p-carousel-items-content{overflow:hidden;width:100%}.p-carousel-items-container{display:flex;flex-direction:row}.p-carousel-indicators{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap}.p-carousel-indicator>button{display:flex;align-items:center;justify-content:center}.p-carousel-vertical .p-carousel-container{flex-direction:column}.p-carousel-vertical .p-carousel-items-container{flex-direction:column;height:100%}.p-items-hidden .p-carousel-item{visibility:hidden}.p-items-hidden .p-carousel-item.p-carousel-item-active{visibility:visible}\n"],encapsulation:2,changeDetection:0}),i})(),Kse=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn,ar,Yf,jn,ar]}),i})();function Yse(i,t){1&i&&(a.TgZ(0,"div",3)(1,"h1"),a._uU(2,"AR Virtual Fitting"),a.qZA()())}function Jse(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",4)(1,"div",5),a._UZ(2,"div",6),a.TgZ(3,"div",7),a.NdJ("click",function(){const l=a.CHM(e).$implicit,u=a.oxw();return a.KtG(u.initiateAR(l.id))}),a._UZ(4,"img",8),a.TgZ(5,"h4",9),a._uU(6),a.qZA(),a.TgZ(7,"div",10)(8,"h6",11),a._uU(9),a.qZA()()()()()}if(2&i){const e=t.$implicit;a.xp6(4),a.s9C("src",e.image,a.LSH),a.xp6(2),a.Oqu(e.name),a.xp6(3),a.hij("RM ",e.oldPrice,"")}}let z5=(()=>{class i{constructor(){this.test="24",this.products=[{id:0,image:"../../../assets/img/models/white-bucket-hat.png",name:"White Bucket Hat",oldPrice:30,newPrice:20,rating:5,numReviews:"1K"},{id:1,image:"../../../assets/img/models/clown-hat/clown_hat.png",name:"Clown Hat",oldPrice:39,newPrice:50,rating:4,numReviews:"200"},{id:2,image:"../../../assets/img/models/earing/earing.png",name:"Earring",oldPrice:85,newPrice:75,rating:4,numReviews:"150"},{id:3,image:"../../../assets/img/models/glasses/glasses.png",name:"Swagg Glasses",oldPrice:20,newPrice:13,rating:4,numReviews:"538"},{id:4,image:"../../../assets/img/models/headphone/headphone.png",name:"Headphones",oldPrice:160,newPrice:125,rating:5,numReviews:"1.7k"},{id:5,image:"../../../assets/img/models/necklace/necklace.png",name:"Necklace",oldPrice:90,newPrice:80,rating:5,numReviews:"727"}],this.responsiveOptions=[{breakpoint:"1024px",numVisible:3,numScroll:3},{breakpoint:"768px",numVisible:2,numScroll:2},{breakpoint:"560px",numVisible:1,numScroll:1}]}ngOnInit(){}initiateAR(e){let o;0==e?o="hat":1==e?o="hat1":2==e?o="earring":3==e?o="glasses1":4==e?o="headphone":5==e&&(o="necklace"),window.open("../../../ar.html?item="+o,"_blank")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-ar"]],decls:3,vars:6,consts:[["styleClass","custom-carousel",3,"value","numVisible","numScroll","circular","autoplayInterval","responsiveOptions"],["pTemplate","header"],["pTemplate","item"],[1,"category-header"],[1,"product-item"],[1,"product-item-content"],[1,"p-mb-3"],[1,"item-container",3,"click"],["alt","productImage",1,"productImage",3,"src"],[1,"p-mb-1"],[1,"price-ar"],[1,"p-mt-0","p-mb-3"]],template:function(e,o){1&e&&(a.TgZ(0,"p-carousel",0),a.YNc(1,Yse,3,0,"ng-template",1),a.YNc(2,Jse,10,3,"ng-template",2),a.qZA()),2&e&&a.Q6J("value",o.products)("numVisible",3)("numScroll",1)("circular",!0)("autoplayInterval",3e3)("responsiveOptions",o.responsiveOptions)},dependencies:[A2,Ci],styles:[".ar-container[_ngcontent-%COMP%]{display:flex;height:100%}.category-header[_ngcontent-%COMP%]{text-transform:uppercase;background-image:linear-gradient(315deg,#2a2a72 20%,#009ffd 94%);background-clip:text;-moz-background-clip:text;-webkit-background-clip:text;color:transparent;text-align:center;margin:15px 0}.product-slider[_ngcontent-%COMP%]{display:flex}.item-img-wrapper-link[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px;height:250px}.item-title[_ngcontent-%COMP%]{font-style:normal;text-decoration:none}.item-stars[_ngcontent-%COMP%]{display:flex}.price-template[_ngcontent-%COMP%]{float:right}.item-new-price[_ngcontent-%COMP%]{font-weight:600;font-size:larger}.item-old-price[_ngcontent-%COMP%]{font-weight:400;font-size:smaller;color:#a9a9a9}.item[_ngcontent-%COMP%]{width:250px;height:200px}.productImage[_ngcontent-%COMP%]{width:200px;height:200px}.item-container[_ngcontent-%COMP%]{border:1px solid #ccc}.item-container[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ccc}.item-container[_ngcontent-%COMP%]{padding:10px 15px}.price-ar[_ngcontent-%COMP%]{width:100%;display:flex;justify-items:end;justify-content:end}"]}),i})(),Qse=(()=>{class i{constructor(e,o){this.router=e,this.route=o,this.body=document.body,this.html=document.documentElement,this.id="#banner",this.height=Math.max(this.body.scrollHeight,this.body.offsetHeight,this.html.clientHeight,this.html.scrollHeight,this.html.offsetHeight),this.test=this.height-74,this.style={height:"800",margin:"0","background-color":"#5ca0f2","background-image":"linear-gradient(315deg, #5ca0f2 0%, #f5f7f6 74%)"}}ngOnInit(){U5.init()}scrollDown(){this.router.navigateByUrl("/home#banner")}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(er),a.Y36(vd))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-head"]],decls:18,vars:1,consts:[[3,"ngStyle"],["src","https://thumbs.dreamstime.com/b/imitation-transparent-background-seamless-vector-illustration-69028332.jpg","alt","img",2,"opacity","0"],["data-aos","fade-up","data-aos-duration","2000",1,"left-panel"],["src","../../../../assets/img/banner/left.png","alt","left-panel"],[1,"right-panel"],[1,"container"],[1,"heading"],["data-aos","fade-up","data-aos-duration","2000",1,"ar-text"],["data-text","The Future of AR",1,"hero","glitch","layers"],["id","section10",1,"demo"],[2,"cursor","pointer",3,"click"]],template:function(e,o){1&e&&(a.TgZ(0,"div",0),a._UZ(1,"img",1),a.TgZ(2,"div",2),a._UZ(3,"img",3),a.qZA(),a.TgZ(4,"div",4)(5,"div",5)(6,"h1",6),a._uU(7,"Welcome"),a.qZA()(),a.TgZ(8,"h1"),a._uU(9," to Malaysia's first Augmented Reality based Ecommerce Platform"),a.qZA()(),a.TgZ(10,"div",7)(11,"h2",8)(12,"span"),a._uU(13,"The Future of AR"),a.qZA()()(),a.TgZ(14,"section",9)(15,"a",10),a.NdJ("click",function(){return o.scrollDown()}),a._UZ(16,"span"),a._uU(17,"Scroll"),a.qZA()()()),2&e&&a.Q6J("ngStyle",o.style)},dependencies:[uo],styles:['body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%!important;margin:0}.bg[_ngcontent-%COMP%]{background-color:#5ca0f2;background-image:linear-gradient(315deg,#5ca0f2 0%,#f5f7f6 74%);background-position:center;background-repeat:no-repeat;background-size:cover}.left-panel[_ngcontent-%COMP%]{position:absolute;top:15%;margin-left:15px}.left-panel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:600px}.right-panel[_ngcontent-%COMP%]{position:absolute;top:10%;right:0;width:50%;font-family:Playfair Display,serif;font-weight:700;color:#414a4c;font-size:x-large;letter-spacing:1px;line-height:55px;margin:.5em .5em 0;font-style:italic}.right-panel[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;height:100%;width:100%;padding:3rem 0 1rem}.right-panel[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{color:#2a2ad1;font-size:10vw;text-shadow:2px 2px 15px #4d8eef;animation:fadeIn 2.5s linear forwards;font-style:italic}.right-panel[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-style:normal}.ar-text[_ngcontent-%COMP%]{position:absolute;bottom:25%;left:30%;transform:translate(-50%,-50%);display:flex;justify-content:center;align-items:center}.ar-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.hero[_ngcontent-%COMP%]{font-size:clamp(40px,10vw,50px);line-height:1;display:inline-block;color:#fff;z-index:2;letter-spacing:10px;filter:drop-shadow(0 1px 3px)}.layers[_ngcontent-%COMP%]{position:relative}.layers[_ngcontent-%COMP%]:before, .layers[_ngcontent-%COMP%]:after{content:attr(data-text);position:absolute;width:110%;z-index:-1}.layers[_ngcontent-%COMP%]:before{top:10px;left:15px;color:#e0287d}.layers[_ngcontent-%COMP%]:after{top:5px;left:-10px;color:#1bc7fb}.glitch[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{animation:paths 5s step-end infinite}.glitch[_ngcontent-%COMP%]:before{animation:paths 5s step-end infinite,opacity 5s step-end infinite,font 8s step-end infinite,movement 10s step-end infinite}.glitch[_ngcontent-%COMP%]:after{animation:paths 5s step-end infinite,opacity 5s step-end infinite,font 7s step-end infinite,movement 8s step-end infinite}.hero-container[_ngcontent-%COMP%]{position:relative;padding:200px 0;text-align:center}.single-path[_ngcontent-%COMP%]{clip-path:polygon(0% 12%,53% 12%,53% 26%,25% 26%,25% 86%,31% 86%,31% 0%,53% 0%,53% 84%,92% 84%,92% 82%,70% 82%,70% 29%,78% 29%,78% 65%,69% 65%,69% 66%,77% 66%,77% 45%,85% 45%,85% 26%,97% 26%,97% 28%,84% 28%,84% 34%,54% 34%,54% 89%,30% 89%,30% 58%,83% 58%,83% 5%,68% 5%,68% 36%,62% 36%,62% 1%,12% 1%,12% 34%,60% 34%,60% 57%,98% 57%,98% 83%,1% 83%,1% 53%,91% 53%,91% 84%,8% 84%,8% 83%,4% 83%)}.paths[_ngcontent-%COMP%]{animation:paths 5s step-end infinite}@keyframes paths{0%{clip-path:polygon(0% 43%,83% 43%,83% 22%,23% 22%,23% 24%,91% 24%,91% 26%,18% 26%,18% 83%,29% 83%,29% 17%,41% 17%,41% 39%,18% 39%,18% 82%,54% 82%,54% 88%,19% 88%,19% 4%,39% 4%,39% 14%,76% 14%,76% 52%,23% 52%,23% 35%,19% 35%,19% 8%,36% 8%,36% 31%,73% 31%,73% 16%,1% 16%,1% 56%,50% 56%,50% 8%)}5%{clip-path:polygon(0% 29%,44% 29%,44% 83%,94% 83%,94% 56%,11% 56%,11% 64%,94% 64%,94% 70%,88% 70%,88% 32%,18% 32%,18% 96%,10% 96%,10% 62%,9% 62%,9% 84%,68% 84%,68% 50%,52% 50%,52% 55%,35% 55%,35% 87%,25% 87%,25% 39%,15% 39%,15% 88%,52% 88%)}30%{clip-path:polygon(0% 53%,93% 53%,93% 62%,68% 62%,68% 37%,97% 37%,97% 89%,13% 89%,13% 45%,51% 45%,51% 88%,17% 88%,17% 54%,81% 54%,81% 75%,79% 75%,79% 76%,38% 76%,38% 28%,61% 28%,61% 12%,55% 12%,55% 62%,68% 62%,68% 51%,0% 51%,0% 92%,63% 92%,63% 4%,65% 4%)}45%{clip-path:polygon(0% 33%,2% 33%,2% 69%,58% 69%,58% 94%,55% 94%,55% 25%,33% 25%,33% 85%,16% 85%,16% 19%,5% 19%,5% 20%,79% 20%,79% 96%,93% 96%,93% 50%,5% 50%,5% 74%,55% 74%,55% 57%,96% 57%,96% 59%,87% 59%,87% 65%,82% 65%,82% 39%,63% 39%,63% 92%,4% 92%,4% 36%,24% 36%,24% 70%,1% 70%,1% 43%,15% 43%,15% 28%,23% 28%,23% 71%,90% 71%,90% 86%,97% 86%,97% 1%,60% 1%,60% 67%,71% 67%,71% 91%,17% 91%,17% 14%,39% 14%,39% 30%,58% 30%,58% 11%,52% 11%,52% 83%,68% 83%)}76%{clip-path:polygon(0% 26%,15% 26%,15% 73%,72% 73%,72% 70%,77% 70%,77% 75%,8% 75%,8% 42%,4% 42%,4% 61%,17% 61%,17% 12%,26% 12%,26% 63%,73% 63%,73% 43%,90% 43%,90% 67%,50% 67%,50% 41%,42% 41%,42% 46%,50% 46%,50% 84%,96% 84%,96% 78%,49% 78%,49% 25%,63% 25%,63% 14%)}90%{clip-path:polygon(0% 41%,13% 41%,13% 6%,87% 6%,87% 93%,10% 93%,10% 13%,89% 13%,89% 6%,3% 6%,3% 8%,16% 8%,16% 79%,0% 79%,0% 99%,92% 99%,92% 90%,5% 90%,5% 60%,0% 60%,0% 48%,89% 48%,89% 13%,80% 13%,80% 43%,95% 43%,95% 19%,80% 19%,80% 85%,38% 85%,38% 62%)}1%,7%,33%,47%,78%,93%{clip-path:none}}.movement[_ngcontent-%COMP%]{position:relative;animation:movement 8s step-end infinite}@keyframes movement{0%{top:0px;left:-20px}15%{top:10px;left:10px}60%{top:5px;left:-10px}75%{top:-5px;left:20px}to{top:10px;left:5px}}.opacity[_ngcontent-%COMP%]{animation:opacity 5s step-end infinite}@keyframes opacity{0%{opacity:.1}5%{opacity:.7}30%{opacity:.4}45%{opacity:.6}76%{opacity:.4}90%{opacity:.8}1%,7%,33%,47%,78%,93%{opacity:0}}.font[_ngcontent-%COMP%]{animation:font 7s step-end infinite}@keyframes font{0%{font-weight:100;color:#e0287d;filter:blur(3px)}20%{font-weight:500;color:#fff;filter:blur(0)}50%{font-weight:300;color:#1bc7fb;filter:blur(2px)}60%{font-weight:700;color:#fff;filter:blur(0)}90%{font-weight:500;color:#e0287d;filter:blur(6px)}}.demo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:50%;z-index:2;display:inline-block;transform:translateY(-50%);color:#fff;font: 400 20px/1 Josefin Sans,sans-serif;letter-spacing:.1em;text-decoration:none;transition:opacity .3s}.demo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.5}#section10[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-top:60px}#section10[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;width:30px;height:50px;margin-left:-15px;border:2px solid #fff;border-radius:50px;box-sizing:border-box}#section10[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{position:absolute;top:10px;left:50%;content:"";width:6px;height:6px;margin-left:-3px;background-color:#fff;border-radius:100%;animation:sdb10 2s infinite;box-sizing:border-box}@keyframes sdb10{0%{transform:translate(0);opacity:0}40%{opacity:1}80%{transform:translateY(20px);opacity:0}to{opacity:0}}']}),i})(),k2=(()=>{class i{constructor(e){this.router=e}ngOnInit(){this.router.events.subscribe(e=>{e instanceof Ff&&window.scrollTo(0,0)})}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(er))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-footer"]],decls:73,vars:0,consts:[[1,"footer"],[1,"container","p-4"],[1,"mb-4","text-center"],["href","#!","role","button",1,"btn","btn-outline-light","btn-floating","m-1"],[1,"fab","fa-facebook-f"],[1,"fab","fa-twitter"],[1,"fab","fa-google"],[1,"fab","fa-instagram"],[1,"fab","fa-linkedin-in"],[1,"fab","fa-github"],[1,""],["action",""],[1,"row","d-flex","justify-content-center"],[1,"col-auto"],[1,"pt-2"],[1,"col-md-5","col-12"],[1,"form-outline","form-white","mb-4"],["type","email","id","form5Example21",1,"form-control"],["for","form5Example21",1,"form-label"],["type","submit",1,"btn","btn-outline-light","mb-4"],[1,"row"],[1,"col-lg-3","col-md-6","mb-4","mb-md-0","links"],[1,"text-uppercase"],[1,"list-unstyled","mb-0"],["href","#!",1,"text-white"],[1,"col-lg-3","col-md-6","mb-4","mb-md-0","qr"],["src","../../../assets/img/qr.png","alt","qr-code"],[1,"col-lg-2","col-md-6","mb-4","mb-md-0","store"],["src","../../../assets/img/googleplay.png","alt","play-store"],["src","../../../assets/img/appstore.png","alt","app-store"],[1,"text-center","p-3",2,"background-color","rgba(0, 0, 0, 0.2)"]],template:function(e,o){1&e&&(a.TgZ(0,"footer",0)(1,"div",1)(2,"section",2)(3,"a",3),a._UZ(4,"i",4),a.qZA(),a.TgZ(5,"a",3),a._UZ(6,"i",5),a.qZA(),a.TgZ(7,"a",3),a._UZ(8,"i",6),a.qZA(),a.TgZ(9,"a",3),a._UZ(10,"i",7),a.qZA(),a.TgZ(11,"a",3),a._UZ(12,"i",8),a.qZA(),a.TgZ(13,"a",3),a._UZ(14,"i",9),a.qZA()(),a.TgZ(15,"section",10)(16,"form",11)(17,"div",12)(18,"div",13)(19,"p",14)(20,"strong"),a._uU(21,"Sign up for our newsletter"),a.qZA()()(),a.TgZ(22,"div",15)(23,"div",16),a._UZ(24,"input",17),a.TgZ(25,"label",18),a._uU(26,"Email address"),a.qZA()()(),a.TgZ(27,"div",13)(28,"button",19),a._uU(29," Subscribe "),a.qZA()()()()(),a.TgZ(30,"section",10)(31,"div",20)(32,"div",21)(33,"h5",22),a._uU(34,"Useful Links"),a.qZA(),a.TgZ(35,"ul",23)(36,"li")(37,"a",24),a._uU(38,"Home"),a.qZA()(),a.TgZ(39,"li")(40,"a",24),a._uU(41,"Categories"),a.qZA()(),a.TgZ(42,"li")(43,"a",24),a._uU(44,"Shopping Cart"),a.qZA()(),a.TgZ(45,"li")(46,"a",24),a._uU(47,"FAQ"),a.qZA()()()(),a.TgZ(48,"div",21)(49,"h5",22),a._uU(50,"MERC"),a.qZA(),a.TgZ(51,"ul",23)(52,"li")(53,"a",24),a._uU(54,"About Us"),a.qZA()(),a.TgZ(55,"li")(56,"a",24),a._uU(57,"Contact Us"),a.qZA()(),a.TgZ(58,"li")(59,"a",24),a._uU(60,"Seller Center"),a.qZA()(),a.TgZ(61,"li")(62,"a",24),a._uU(63,"Privacy Policy"),a.qZA()()()(),a.TgZ(64,"div",25)(65,"h5",22),a._uU(66,"MERC APP DOWNLOAD"),a.qZA(),a._UZ(67,"img",26),a.qZA(),a.TgZ(68,"div",27),a._UZ(69,"img",28)(70,"img",29),a.qZA()()()(),a.TgZ(71,"div",30),a._uU(72," Copyright \xa9 2022 Ryan Wong Yi Syen. All Rights Reserved "),a.qZA()())},dependencies:[qx,Hx,Qb],styles:[".footer[_ngcontent-%COMP%]{background-color:#005de8;color:#f6f6f6}.links[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{text-decoration:underline}.links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:10px 0}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.qr[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px}.store[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px}.store[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(2){margin-top:-100px}"]}),i})(),G5=(()=>{class i{constructor(e,o){this._Activatedroute=e,this.firebaseService=o,this.body=document.body,this.html=document.documentElement,this.height=Math.max(this.body.scrollHeight,this.body.offsetHeight,this.html.clientHeight,this.html.scrollHeight,this.html.offsetHeight),this.test=this.height-74,this.style={height:"800",margin:"0","background-color":"#5ca0f2","background-image":"linear-gradient(315deg, #5ca0f2 0%, #f5f7f6 74%)"}}ngOnInit(){U5.init(),this._Activatedroute.paramMap.subscribe(e=>{this.userid=e.get("userid"),console.log("user id = "+this.userid)}),this.user=this.firebaseService.getUserData(),console.log("email: "+this.firebaseService.getUserData())}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(vd),a.Y36(Rf))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-home-main"]],decls:9,vars:0,consts:[["id","banner"]],template:function(e,o){1&e&&(a.TgZ(0,"body"),a._UZ(1,"app-header-normal")(2,"app-head")(3,"div",0)(4,"app-banner")(5,"app-categories")(6,"app-discounted-products")(7,"app-ar")(8,"app-footer"),a.qZA())},dependencies:[D0,cse,use,Tse,z5,Qse,k2]}),i})(),Xse=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-categories-main"]],decls:1,vars:0,template:function(e,o){1&e&&a._UZ(0,"app-header-normal")},dependencies:[D0]}),i})(),O2=(()=>{class i{constructor(e){this.http=e}makePayment(e,o){return this.http.post("http://localhost:5000/checkout/",{token:e,amount:o})}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Po))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),eae=(()=>{class i{constructor(e){this.uploadService=e}ngOnInit(){}deleteFileUpload(e){this.uploadService.deleteFile(e)}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(Ek))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-seat"]],inputs:{fileUpload:"fileUpload"},decls:4,vars:2,consts:[[3,"href"],[1,"btn","btn-danger","btn-sm",2,"float","right",3,"click"]],template:function(e,o){1&e&&(a.TgZ(0,"a",0),a._uU(1),a.qZA(),a.TgZ(2,"button",1),a.NdJ("click",function(){return o.deleteFileUpload(o.fileUpload)}),a._uU(3," Delete\n"),a.qZA()),2&e&&(a.s9C("href",o.fileUpload.url,a.LSH),a.xp6(1),a.Oqu(o.fileUpload.name))}}),i})();function tae(i,t){if(1&i&&(a.TgZ(0,"ul",3)(1,"li",4),a._UZ(2,"app-seat",5),a.qZA()()),2&i){const e=t.$implicit;a.xp6(2),a.Q6J("fileUpload",e)}}let nae=(()=>{class i{constructor(e){this.uploadService=e}ngOnInit(){this.uploadService.getFiles(6).snapshotChanges().pipe((0,pt.U)(e=>e.map(o=>({key:o.payload.key,...o.payload.val()})))).subscribe(e=>{this.fileUploads=e})}deleteFileUpload(e){this.uploadService.deleteFile(e)}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(Ek))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-personal"]],decls:4,vars:1,consts:[[1,"card"],[1,"card-header"],["class","list-group list-group-flush",4,"ngFor","ngForOf"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[3,"fileUpload"]],template:function(e,o){1&e&&(a.TgZ(0,"div",0)(1,"div",1),a._uU(2,"List of Files"),a.qZA(),a.YNc(3,tae,3,1,"ul",2),a.qZA()),2&e&&(a.xp6(3),a.Q6J("ngForOf",o.fileUploads))},dependencies:[Ui,eae]}),i})();const iae=function(i){return{width:i}};function rae(i,t){if(1&i&&(a.TgZ(0,"div",3)(1,"div",4),a._uU(2),a.qZA()()),2&i){const e=a.oxw();a.xp6(1),a.Q6J("ngStyle",a.VKq(3,iae,e.percentage+"%")),a.uIk("aria-valuenow",e.percentage),a.xp6(1),a.hij(" ",e.percentage,"% ")}}let oae=(()=>{class i{constructor(e){this.uploadService=e,this.percentage=0}ngOnInit(){}selectFile(e){this.selectedFiles=e.target.files}upload(){if(this.selectedFiles){const e=this.selectedFiles.item(0);this.selectedFiles=void 0,e&&(this.currentFileUpload=new v4(e))}}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(Ek))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-confirmation"]],decls:5,vars:2,consts:[["type","file",1,"text-nowrap","text-truncate",3,"change"],[1,"btn","btn-success","btn-sm",3,"disabled","click"],["class","progress mt-2",4,"ngIf"],[1,"progress","mt-2"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info",3,"ngStyle"]],template:function(e,o){1&e&&(a.TgZ(0,"label")(1,"input",0),a.NdJ("change",function(l){return o.selectFile(l)}),a.qZA()(),a.TgZ(2,"button",1),a.NdJ("click",function(){return o.upload()}),a._uU(3," Upload\n"),a.qZA(),a.YNc(4,rae,3,5,"div",2)),2&e&&(a.xp6(2),a.Q6J("disabled",!o.selectedFiles),a.xp6(2),a.Q6J("ngIf",o.currentFileUpload))},dependencies:[Ji,uo]}),i})(),sae=(()=>{class i{constructor(e){this.checkout=e,this.items=[],this.paymentHandler=null,this.success=!1,this.failure=!1}ngOnInit(){this.invokeStripe()}makePayment(e){const o=window.StripeCheckout.configure({key:"pk_test_51KiEXBFN13hoDLby9WPZJAKOf7i92hVpeKw9EnnyStV7ZEgQqytzf8k6r7rAb0rIYuDkHyWFgO1zrN3nhQLVhi9i00rhHxNUR4",locale:"auto",token:function(l){console.log(l),s(l,e)}}),s=(l,u)=>{this.checkout.makePayment(l,u).subscribe(g=>{console.log(g),"success"===g.data?this.success=!0:this.failure=!0})};o.open({name:"Coding Shiksha",description:"This is a sample pdf file",amount:100*e})}invokeStripe(){if(!window.document.getElementById("stripe-script")){const e=window.document.createElement("script");e.id="stripe-script",e.type="text/javascript",e.src="https://checkout.stripe.com/checkout.js",e.onload=()=>{this.paymentHandler=window.StripeCheckout.configure({key:"pk_test_51KiEXBFN13hoDLby9WPZJAKOf7i92hVpeKw9EnnyStV7ZEgQqytzf8k6r7rAb0rIYuDkHyWFgO1zrN3nhQLVhi9i00rhHxNUR4",locale:"auto",token:function(o){console.log(o)}})},window.document.body.appendChild(e)}}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(O2))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"container",2,"width","600px"],[1,"my-3"],[1,"my-2"]],template:function(e,o){1&e&&(a.TgZ(0,"div",0)(1,"div")(2,"h3"),a._uU(3,"bezkoder.com"),a.qZA()(),a.TgZ(4,"div",1),a._UZ(5,"app-confirmation"),a.qZA(),a.TgZ(6,"div",2),a._UZ(7,"app-personal"),a.qZA()())},dependencies:[nae,oae]}),i})();const q5="primary";class ZS{constructor(t){Object.assign(this,t)}static create(t){return(null==t?.type||0===t.type.length)&&console.warn('[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component\n        and ensure css is added to angular.json file'),new ZS(t)}}let uae=(()=>{class i{constructor(){this.spinnerObservable=new ls(null)}getSpinner(e){return this.spinnerObservable.asObservable().pipe(Yr(o=>o&&o.name===e))}show(e=q5,o){return new Promise((s,l)=>{setTimeout(()=>{o&&Object.keys(o).length?(o.name=e,this.spinnerObservable.next(new ZS({...o,show:!0})),s(!0)):(this.spinnerObservable.next(new ZS({name:e,show:!0})),s(!0))},10)})}hide(e=q5,o=10){return new Promise((s,l)=>{setTimeout(()=>{this.spinnerObservable.next(new ZS({name:e,show:!1})),s(!0)},o)})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const dae=new a.OlP("NGX_SPINNER_CONFIG");let hae=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[{provide:dae,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn]}),i})(),pae=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-similar-products"]],decls:0,vars:0,template:function(e,o){}}),i})();function fae(i,t){1&i&&(a.TgZ(0,"p",6),a._uU(1,"Highlights"),a.qZA())}function gae(i,t){if(1&i&&(a.TgZ(0,"div",8)(1,"div",9),a._UZ(2,"img",10),a.TgZ(3,"h4"),a._uU(4),a.qZA(),a.TgZ(5,"p"),a._uU(6),a.qZA()(),a.TgZ(7,"div",9),a._UZ(8,"img",11),a.TgZ(9,"h4"),a._uU(10),a.qZA(),a.TgZ(11,"p"),a._uU(12),a.qZA(),a._UZ(13,"br"),a.qZA(),a.TgZ(14,"div",9),a._UZ(15,"img",12),a.TgZ(16,"h4"),a._uU(17),a.qZA(),a.TgZ(18,"p"),a._uU(19),a.qZA(),a._UZ(20,"br"),a.qZA()()),2&i){const e=a.oxw(3);a.xp6(4),a.Oqu(e.productDetails.highlight1header),a.xp6(2),a.Oqu(e.productDetails.highlight1description),a.xp6(4),a.Oqu(e.productDetails.highlight2header),a.xp6(2),a.Oqu(e.productDetails.highlight2description),a.xp6(5),a.Oqu(e.productDetails.highlight3header),a.xp6(2),a.Oqu(e.productDetails.highlight3description)}}function mae(i,t){if(1&i&&(a.TgZ(0,"div",8)(1,"div",9),a._UZ(2,"img",13),a.TgZ(3,"h4"),a._uU(4),a.qZA(),a.TgZ(5,"p"),a._uU(6),a.qZA()(),a.TgZ(7,"div",9),a._UZ(8,"img",14),a.TgZ(9,"h4"),a._uU(10),a.qZA(),a.TgZ(11,"p"),a._uU(12),a.qZA(),a._UZ(13,"br"),a.qZA(),a.TgZ(14,"div",9),a._UZ(15,"img",14),a.TgZ(16,"h4"),a._uU(17),a.qZA(),a.TgZ(18,"p"),a._uU(19),a.qZA(),a._UZ(20,"br"),a.qZA()()),2&i){const e=a.oxw(3);a.xp6(2),a.s9C("src",e.productDetails.highlight1img,a.LSH),a.xp6(2),a.Oqu(e.productDetails.highlight1header),a.xp6(2),a.Oqu(e.productDetails.highlight1description),a.xp6(2),a.s9C("src",e.productDetails.highlight2img,a.LSH),a.xp6(2),a.Oqu(e.productDetails.highlight2header),a.xp6(2),a.Oqu(e.productDetails.highlight2description),a.xp6(3),a.s9C("src",e.productDetails.highlight3img,a.LSH),a.xp6(2),a.Oqu(e.productDetails.highlight3header),a.xp6(2),a.Oqu(e.productDetails.highlight3description)}}function _ae(i,t){if(1&i&&(a.TgZ(0,"div",8)(1,"div",9)(2,"h4"),a._uU(3),a.qZA(),a.TgZ(4,"p"),a._uU(5),a.qZA()(),a.TgZ(6,"div",9)(7,"h4"),a._uU(8),a.qZA(),a.TgZ(9,"p"),a._uU(10),a.qZA(),a._UZ(11,"br"),a.qZA(),a.TgZ(12,"div",9)(13,"h4"),a._uU(14),a.qZA(),a.TgZ(15,"p"),a._uU(16),a.qZA(),a._UZ(17,"br"),a.qZA(),a.TgZ(18,"div",9)(19,"h4"),a._uU(20),a.qZA(),a.TgZ(21,"p"),a._uU(22),a.qZA()(),a.TgZ(23,"div",9)(24,"h4"),a._uU(25),a.qZA(),a.TgZ(26,"p"),a._uU(27),a.qZA(),a._UZ(28,"br"),a.qZA(),a.TgZ(29,"div",9)(30,"h4"),a._uU(31),a.qZA(),a.TgZ(32,"p"),a._uU(33),a.qZA(),a._UZ(34,"br"),a.qZA()()),2&i){const e=a.oxw(3);a.xp6(3),a.Oqu(e.productDetails.highlight1header),a.xp6(2),a.Oqu(e.productDetails.highlight1description),a.xp6(3),a.Oqu(e.productDetails.highlight2header),a.xp6(2),a.Oqu(e.productDetails.highlight2description),a.xp6(4),a.Oqu(e.productDetails.highlight3header),a.xp6(2),a.Oqu(e.productDetails.highlight3description),a.xp6(4),a.Oqu(e.productDetails.highlight4header),a.xp6(2),a.Oqu(e.productDetails.highlight4description),a.xp6(3),a.Oqu(e.productDetails.highlight5header),a.xp6(2),a.Oqu(e.productDetails.highlight5description),a.xp6(4),a.Oqu(e.productDetails.highlight6header),a.xp6(2),a.Oqu(e.productDetails.highlight6description)}}function yae(i,t){1&i&&(a.YNc(0,gae,21,6,"div",7),a.YNc(1,mae,21,9,"div",7),a.YNc(2,_ae,35,12,"div",7)),2&i&&(a.Q6J("ngSwitchCase",1e3),a.xp6(1),a.Q6J("ngSwitchCase",1001),a.xp6(1),a.Q6J("ngSwitchCase",1002))}function vae(i,t){if(1&i&&(a.TgZ(0,"ngb-panel"),a.YNc(1,fae,2,0,"ng-template",4),a.YNc(2,yae,3,3,"ng-template",5),a.qZA()),2&i){const e=a.oxw();a.xp6(2),a.Q6J("ngSwitch",e.productId)}}function bae(i,t){1&i&&(a.TgZ(0,"p",6),a._uU(1,"Description & Specs"),a.qZA())}function wae(i,t){if(1&i&&(a.TgZ(0,"div",17)(1,"div",18)(2,"h4"),a._uU(3),a.qZA(),a.TgZ(4,"p"),a._uU(5),a.qZA()(),a._UZ(6,"img",19),a.qZA()),2&i){const e=a.oxw(3);a.xp6(3),a.Oqu(e.productDetails.descriptionHeader),a.xp6(2),a.Oqu(e.productDetails.descriptionText)}}function Cae(i,t){if(1&i&&(a.TgZ(0,"div",20)(1,"h4"),a._uU(2),a.qZA(),a.TgZ(3,"p"),a._uU(4),a.qZA(),a.TgZ(5,"div")(6,"h5"),a._uU(7),a.qZA(),a.TgZ(8,"ul")(9,"li"),a._uU(10),a.qZA(),a.TgZ(11,"li"),a._uU(12),a.qZA()(),a.TgZ(13,"h5"),a._uU(14),a.qZA(),a.TgZ(15,"ul")(16,"li"),a._uU(17),a.qZA(),a.TgZ(18,"li"),a._uU(19),a.qZA(),a.TgZ(20,"li"),a._uU(21),a.qZA()(),a.TgZ(22,"h5"),a._uU(23),a.qZA(),a.TgZ(24,"ul")(25,"li"),a._uU(26),a.qZA(),a.TgZ(27,"li"),a._uU(28),a.qZA()(),a.TgZ(29,"h5"),a._uU(30),a.qZA(),a.TgZ(31,"ul")(32,"li"),a._uU(33),a.qZA(),a.TgZ(34,"li"),a._uU(35),a.qZA(),a.TgZ(36,"li"),a._uU(37),a.qZA(),a.TgZ(38,"li"),a._uU(39),a.qZA()(),a.TgZ(40,"h5"),a._uU(41),a.qZA(),a.TgZ(42,"ul")(43,"li"),a._uU(44),a.qZA(),a.TgZ(45,"li"),a._uU(46),a.qZA(),a.TgZ(47,"li"),a._uU(48),a.qZA()(),a.TgZ(49,"h5"),a._uU(50),a.qZA(),a.TgZ(51,"ul")(52,"li"),a._uU(53),a.qZA(),a.TgZ(54,"li"),a._uU(55),a.qZA(),a.TgZ(56,"li"),a._uU(57),a.qZA(),a.TgZ(58,"li"),a._uU(59),a.qZA(),a.TgZ(60,"li"),a._uU(61),a.qZA(),a.TgZ(62,"li"),a._uU(63),a.qZA(),a.TgZ(64,"li"),a._uU(65),a.qZA(),a.TgZ(66,"li"),a._uU(67),a.qZA(),a.TgZ(68,"li"),a._uU(69),a.qZA(),a.TgZ(70,"li"),a._uU(71),a.qZA(),a.TgZ(72,"li"),a._uU(73),a.qZA(),a.TgZ(74,"li"),a._uU(75),a.qZA(),a.TgZ(76,"li"),a._uU(77),a.qZA(),a.TgZ(78,"li"),a._uU(79),a.qZA(),a.TgZ(80,"li"),a._uU(81),a.qZA()(),a.TgZ(82,"div",21)(83,"div",22)(84,"h5"),a._uU(85),a.qZA(),a.TgZ(86,"ul")(87,"li"),a._uU(88),a.qZA(),a.TgZ(89,"li"),a._uU(90),a.qZA(),a.TgZ(91,"li"),a._uU(92),a.qZA(),a.TgZ(93,"li"),a._uU(94),a.qZA(),a.TgZ(95,"li"),a._uU(96),a.qZA(),a.TgZ(97,"li"),a._uU(98),a.qZA(),a.TgZ(99,"li"),a._uU(100),a.qZA()()(),a.TgZ(101,"div",23),a._UZ(102,"img",24),a.qZA()()()()),2&i){const e=a.oxw(3);a.xp6(2),a.Oqu(e.productDetails.descriptionHeader),a.xp6(2),a.Oqu(e.productDetails.description),a.xp6(3),a.Oqu(e.productDetails.generalSpecificationsHeader),a.xp6(3),a.AsE("",e.productDetails.generalSpecificationsBluetoothVersionHeader," - ",e.productDetails.generalSpecificationsBluetoothVersion,""),a.xp6(2),a.AsE("",e.productDetails.generalSpecificationsDriverSizeHeader," - ",e.productDetails.generalSpecificationsDriverSize,""),a.xp6(2),a.Oqu(e.productDetails.audioSpecificationsHeader),a.xp6(3),a.AsE("",e.productDetails.audioSpecificationsDriverSensitivityHeader," - ",e.productDetails.audioSpecificationsDriverSensitivity,""),a.xp6(2),a.AsE("",e.productDetails.audioSpecificationsDynamicFrequencyRangeHeader," - ",e.productDetails.audioSpecificationsDynamicFrequencyRange,""),a.xp6(2),a.AsE("",e.productDetails.audioSpecificationsImpedanceHeader," - ",e.productDetails.audioSpecificationsImpedance,""),a.xp6(2),a.Oqu(e.productDetails.dimensionsHeader),a.xp6(3),a.AsE("",e.productDetails.dimensionsWeightHeader," - ",e.productDetails.dimensionsWeight,""),a.xp6(2),a.AsE("",e.productDetails.dimensionsWeight1Header," - ",e.productDetails.dimensionsWeight1,""),a.xp6(2),a.Oqu(e.productDetails.cncspecHeader),a.xp6(3),a.AsE("",e.productDetails.bluetoothProfileHeader," - ",e.productDetails.bluetoothProfile,""),a.xp6(2),a.AsE("",e.productDetails.bluetoothFrequencyHeader," - ",e.productDetails.bluetoothFrequency,""),a.xp6(2),a.AsE("",e.productDetails.bluetoothTransmittedModulationHeader," - ",e.productDetails.bluetoothTransmittedModulation,""),a.xp6(2),a.AsE("",e.productDetails.bluetoothTransmitterWowerHeader," - ",e.productDetails.bluetoothTransmitterWower,""),a.xp6(2),a.Oqu(e.productDetails.batterHeader),a.xp6(3),a.AsE("",e.productDetails.batteryChargingTimeHeader," - ",e.productDetails.batteryChargingTime,""),a.xp6(2),a.AsE("",e.productDetails.maxMusicPlayOffHeader," - ",e.productDetails.maxMusicPlayOff,""),a.xp6(2),a.AsE("",e.productDetails.maxMusicPlayOnHeader," - ",e.productDetails.maxMusicPlayOn,""),a.xp6(2),a.Oqu(e.productDetails.featuresHeader),a.xp6(3),a.AsE("",e.productDetails.features1Header," - ",e.productDetails.features1,""),a.xp6(2),a.AsE("",e.productDetails.features2Header," - ",e.productDetails.features2,""),a.xp6(2),a.AsE("",e.productDetails.features3Header," - ",e.productDetails.features3,""),a.xp6(2),a.AsE("",e.productDetails.features4Header," - ",e.productDetails.features4,""),a.xp6(2),a.AsE("",e.productDetails.features5Header," - ",e.productDetails.features5,""),a.xp6(2),a.AsE("",e.productDetails.features6Header," - ",e.productDetails.features6,""),a.xp6(2),a.AsE("",e.productDetails.features7Header," - ",e.productDetails.features7,""),a.xp6(2),a.AsE("",e.productDetails.features8Header," - ",e.productDetails.features8,""),a.xp6(2),a.AsE("",e.productDetails.features9Header," - ",e.productDetails.features9,""),a.xp6(2),a.AsE("",e.productDetails.features10Header," - ",e.productDetails.features10,""),a.xp6(2),a.AsE("",e.productDetails.features11Header," - ",e.productDetails.features11,""),a.xp6(2),a.AsE("",e.productDetails.features12Header," - ",e.productDetails.features12,""),a.xp6(2),a.AsE("",e.productDetails.features13Header," - ",e.productDetails.features13,""),a.xp6(2),a.AsE("",e.productDetails.features14Header," - ",e.productDetails.features14,""),a.xp6(2),a.AsE("",e.productDetails.features15Header," - ",e.productDetails.features15,""),a.xp6(4),a.Oqu(e.productDetails.boxHeader),a.xp6(3),a.Oqu(e.productDetails.boxHeaderDetails1),a.xp6(2),a.Oqu(e.productDetails.boxHeaderDetails2),a.xp6(2),a.Oqu(e.productDetails.boxHeaderDetails3),a.xp6(2),a.Oqu(e.productDetails.boxHeaderDetails4),a.xp6(2),a.Oqu(e.productDetails.boxHeaderDetails5),a.xp6(2),a.Oqu(e.productDetails.boxHeaderDetails6),a.xp6(2),a.Oqu(e.productDetails.boxHeaderDetails7),a.xp6(2),a.s9C("src",e.productDetails.boxImg,a.LSH)}}function Tae(i,t){1&i&&(a.TgZ(0,"div",20)(1,"p"),a._uU(2,"Detailed specifications can be found in "),a.TgZ(3,"a",25),a._uU(4,"samsung official page"),a.qZA(),a._uU(5," or "),a.TgZ(6,"a",26),a._uU(7,"gsmarena"),a.qZA(),a._uU(8,"."),a.qZA()())}function Eae(i,t){1&i&&(a.YNc(0,wae,7,2,"div",15),a.YNc(1,Cae,103,75,"div",16),a.YNc(2,Tae,9,0,"div",16)),2&i&&(a.Q6J("ngSwitchCase",1e3),a.xp6(1),a.Q6J("ngSwitchCase",1001),a.xp6(1),a.Q6J("ngSwitchCase",1002))}function xae(i,t){if(1&i&&(a.TgZ(0,"ngb-panel"),a.YNc(1,bae,2,0,"ng-template",4),a.YNc(2,Eae,3,3,"ng-template",5),a.qZA()),2&i){const e=a.oxw();a.xp6(2),a.Q6J("ngSwitch",e.productId)}}function Sae(i,t){1&i&&(a.TgZ(0,"p",6),a._uU(1,"Details"),a.qZA())}function Dae(i,t){if(1&i&&(a.TgZ(0,"div",28)(1,"div",29)(2,"ul")(3,"li"),a._uU(4),a.qZA(),a.TgZ(5,"li"),a._uU(6),a.qZA(),a.TgZ(7,"li"),a._uU(8),a.qZA(),a.TgZ(9,"li"),a._uU(10),a.qZA()()(),a.TgZ(11,"div",30)(12,"ul")(13,"li"),a._uU(14),a.qZA(),a.TgZ(15,"li"),a._uU(16),a.qZA(),a.TgZ(17,"li"),a._uU(18),a.qZA()()()()),2&i){const e=a.oxw(3);a.xp6(4),a.Oqu(e.productDetails.details1),a.xp6(2),a.Oqu(e.productDetails.details2),a.xp6(2),a.Oqu(e.productDetails.details3),a.xp6(2),a.Oqu(e.productDetails.details4),a.xp6(4),a.Oqu(e.productDetails.details5),a.xp6(2),a.Oqu(e.productDetails.details6),a.xp6(2),a.Oqu(e.productDetails.details7)}}function Iae(i,t){1&i&&a.YNc(0,Dae,19,7,"div",27),2&i&&a.Q6J("ngSwitchCase",1e3)}function Mae(i,t){if(1&i&&(a.TgZ(0,"ngb-panel"),a.YNc(1,Sae,2,0,"ng-template",4),a.YNc(2,Iae,1,1,"ng-template",5),a.qZA()),2&i){const e=a.oxw();a.xp6(2),a.Q6J("ngSwitch",e.productId)}}function Aae(i,t){if(1&i&&(a.TgZ(0,"p",6),a._uU(1),a.qZA()),2&i){const e=a.oxw(2);a.xp6(1),a.Oqu(e.productDetails.docndownloadsHeader)}}function kae(i,t){if(1&i&&(a.TgZ(0,"div",28)(1,"ul")(2,"li")(3,"a",31),a._uU(4),a.qZA()(),a.TgZ(5,"li")(6,"a",31),a._uU(7),a.qZA()(),a.TgZ(8,"li")(9,"a",31),a._uU(10),a.qZA()(),a.TgZ(11,"li")(12,"a",31),a._uU(13),a.qZA()()()()),2&i){const e=a.oxw(3);a.xp6(3),a.s9C("href",e.productDetails.docndownloadsDoc1Link,a.LSH),a.xp6(1),a.Oqu(e.productDetails.docndownloadsDoc1Header),a.xp6(2),a.s9C("href",e.productDetails.docndownloadsDoc2Link,a.LSH),a.xp6(1),a.Oqu(e.productDetails.docndownloadsDoc2Header),a.xp6(2),a.s9C("href",e.productDetails.docndownloadsDoc3Link,a.LSH),a.xp6(1),a.Oqu(e.productDetails.docndownloadsDoc3Header),a.xp6(2),a.s9C("href",e.productDetails.docndownloadsDoc4Link,a.LSH),a.xp6(1),a.Oqu(e.productDetails.docndownloadsDoc4Header)}}function Oae(i,t){1&i&&a.YNc(0,kae,14,8,"div",27),2&i&&a.Q6J("ngSwitchCase",1001)}function Rae(i,t){if(1&i&&(a.TgZ(0,"ngb-panel"),a.YNc(1,Aae,2,1,"ng-template",4),a.YNc(2,Oae,1,1,"ng-template",5),a.qZA()),2&i){const e=a.oxw();a.xp6(2),a.Q6J("ngSwitch",e.productId)}}function Pae(i,t){1&i&&(a.TgZ(0,"p",6),a._uU(1,"What's in the box"),a.qZA())}function Nae(i,t){if(1&i&&(a.TgZ(0,"div",33),a._UZ(1,"img",34),a.TgZ(2,"p"),a._uU(3),a.qZA(),a.TgZ(4,"p"),a._uU(5),a.qZA(),a.TgZ(6,"p"),a._uU(7),a.qZA(),a._UZ(8,"br"),a.TgZ(9,"p"),a._uU(10),a.qZA()()),2&i){const e=a.oxw(3);a.xp6(1),a.s9C("src",e.productDetails.boxImg,a.LSH),a.xp6(2),a.Oqu(e.productDetails.boxDetails1),a.xp6(2),a.Oqu(e.productDetails.boxDetails2),a.xp6(2),a.Oqu(e.productDetails.boxDetails3),a.xp6(3),a.Oqu(e.productDetails.boxWarning)}}function Fae(i,t){1&i&&a.YNc(0,Nae,11,5,"div",32),2&i&&a.Q6J("ngSwitchCase",1002)}function Lae(i,t){if(1&i&&(a.TgZ(0,"ngb-panel"),a.YNc(1,Pae,2,0,"ng-template",4),a.YNc(2,Fae,1,1,"ng-template",5),a.qZA()),2&i){const e=a.oxw();a.xp6(2),a.Q6J("ngSwitch",e.productId)}}let Vae=(()=>{class i{constructor(e,o,s,l){this._Activatedroute=e,this.router=o,this.firebasecrudservice=s,this.productService=l}ngOnInit(){this._Activatedroute.paramMap.subscribe(e=>{this.productId=e.get("id")}),this.router.events.subscribe(e=>{e instanceof Ff&&window.scrollTo(0,0)}),this.productService.getAllProductsDetails().then(e=>{this.productDetails=e.find(o=>o.id===this.productId)}),this.firebasecrudservice.getProductByIDFromAllProducts(this.productId).subscribe(e=>{this.highlights=e.highlights,this.productDescriptionSpecs=e.productDescriptionSpecs,this.documentsDownloads=e.documentsDownloads,this.box=e.box,this.details=e.details})}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(vd),a.Y36(er),a.Y36(Rf),a.Y36(Zb))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-product-details-accordion"]],decls:8,vars:5,consts:[[1,"container"],["activeIds","ngb-panel-0"],["acc","ngbAccordion"],[4,"ngIf"],["ngbPanelTitle",""],["ngbPanelContent","",3,"ngSwitch"],[1,"title"],["class","highlights-container",4,"ngSwitchCase"],[1,"highlights-container"],[1,"highlight-section"],["src","../../../../assets/img/discountedProducts/addidas-shoes/product-details/3.png","alt","img3"],["src","../../../../assets/img/discountedProducts/addidas-shoes/product-details/2.png","alt","img2"],["src","../../../../assets/img/discountedProducts/addidas-shoes/product-details/1.png","alt","img1"],["alt","img3",3,"src"],["alt","img2",3,"src"],["class","description-container",4,"ngSwitchCase"],["class","description-container-column",4,"ngSwitchCase"],[1,"description-container"],[1,"description"],["src","../../../../assets/img/discountedProducts/addidas-shoes/product-details/4.png","alt","img4"],[1,"description-container-column"],[1,"box-container"],[1,"left-panel"],[1,"right-panel"],["alt","box-img",3,"src"],["href","https://www.samsung.com/my/smartphones/galaxy-s22-ultra/specs/"],["href","https://www.gsmarena.com/samsung_galaxy_s22_ultra_5g-11251.php"],["class","details-container",4,"ngSwitchCase"],[1,"details-container"],[1,"left-section"],[1,"right-section"],[3,"href"],["class","details-container-column",4,"ngSwitchCase"],[1,"details-container-column"],["alt","box-img",2,"width","800px",3,"src"]],template:function(e,o){1&e&&(a.TgZ(0,"div",0)(1,"ngb-accordion",1,2),a.YNc(3,vae,3,1,"ngb-panel",3),a.YNc(4,xae,3,1,"ngb-panel",3),a.YNc(5,Mae,3,1,"ngb-panel",3),a.YNc(6,Rae,3,1,"ngb-panel",3),a.YNc(7,Lae,3,1,"ngb-panel",3),a.qZA()()),2&e&&(a.xp6(3),a.Q6J("ngIf",o.highlights),a.xp6(1),a.Q6J("ngIf",o.productDescriptionSpecs),a.xp6(1),a.Q6J("ngIf",o.details),a.xp6(1),a.Q6J("ngIf",o.documentsDownloads),a.xp6(1),a.Q6J("ngIf",o.box))},dependencies:[Ji,Eo,zs,y2,Rk,m2,_2],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}.title[_ngcontent-%COMP%]{font-weight:600;color:#005de8}.highlights-container[_ngcontent-%COMP%], .box-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 20px;flex-wrap:wrap}.highlight-section[_ngcontent-%COMP%]{max-width:250px;padding-top:10px;display:flex;flex-direction:column;justify-content:center}.highlight-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px;object-fit:scale-down}.highlight-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700}.highlight-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:justify;font-size:smaller}.description-container[_ngcontent-%COMP%]{margin:20px;display:flex}.description-container[_ngcontent-%COMP%]   .description-container-column[_ngcontent-%COMP%]{flex-direction:column}.description-container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{padding-right:30px;display:flex;flex-direction:column;justify-content:center}.description-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:360px}.description-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-style:italic;font-family:AdihausDIN Cn,Helvetica,Arial,sans-serif;font-weight:600}.description-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:justify}.details-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:20px}.left-panel[_ngcontent-%COMP%]{margin-top:50px}"]}),i})(),Z5=(()=>{class i{constructor(e){this.http=e}getFirstProductImages(){return this.http.get("assets/data/gallery.json").toPromise().then(e=>e.data).then(e=>e)}getSecondProductImages(){return this.http.get("assets/data/gallery.json").toPromise().then(e=>e.data1).then(e=>e)}getThirdProductImages(){return this.http.get("assets/data/gallery.json").toPromise().then(e=>e.data2).then(e=>e)}getJBLBlack(){return this.http.get("assets/data/gallery.json").toPromise().then(e=>e.data4).then(e=>e)}getJBLBlue(){return this.http.get("assets/data/gallery.json").toPromise().then(e=>e.data5).then(e=>e)}getJBLWhite(){return this.http.get("assets/data/gallery.json").toPromise().then(e=>e.data6).then(e=>e)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Po))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();function Hae(i,t){1&i&&a._UZ(0,"div")}function Bae(i,t){if(1&i&&(a.TgZ(0,"div",7)(1,"div",8)(2,"div",9),a._UZ(3,"img",10),a.qZA()()()),2&i){const e=t.$implicit;a.xp6(3),a.s9C("src",e.previewImageSrc,a.LSH)}}function Uae(i,t){if(1&i&&(a.TgZ(0,"p-carousel",5),a.YNc(1,Bae,4,1,"ng-template",6),a.qZA()),2&i){const e=a.oxw(2);a.Q6J("value",e.firstProductImages)("numVisible",3)("numScroll",1)("circular",!0)("autoplayInterval",3e3)("responsiveOptions",e.responsiveOptions)}}function jae(i,t){if(1&i&&(a.TgZ(0,"div",7)(1,"div",8)(2,"div",9),a._UZ(3,"img",10),a.qZA()()()),2&i){const e=t.$implicit;a.xp6(3),a.s9C("src",e.previewImageSrc,a.LSH)}}function zae(i,t){if(1&i&&(a.TgZ(0,"p-carousel",5),a.YNc(1,jae,4,1,"ng-template",6),a.qZA()),2&i){const e=a.oxw(2);a.Q6J("value",e.secondProductImages)("numVisible",3)("numScroll",1)("circular",!0)("autoplayInterval",3e3)("responsiveOptions",e.responsiveOptions)}}function Gae(i,t){if(1&i&&(a.TgZ(0,"div",7)(1,"div",8)(2,"div",9),a._UZ(3,"img",10),a.qZA()()()),2&i){const e=t.$implicit;a.xp6(3),a.s9C("src",e.previewImageSrc,a.LSH)}}function qae(i,t){if(1&i&&(a.TgZ(0,"p-carousel",5),a.YNc(1,Gae,4,1,"ng-template",6),a.qZA()),2&i){const e=a.oxw(2);a.Q6J("value",e.thirdProductImages)("numVisible",3)("numScroll",1)("circular",!0)("autoplayInterval",3e3)("responsiveOptions",e.responsiveOptions)}}function Zae(i,t){if(1&i&&(a.TgZ(0,"div",0)(1,"div",3)(2,"h1"),a._uU(3,"Gallery"),a.qZA()(),a.YNc(4,Uae,2,6,"p-carousel",4),a.YNc(5,zae,2,6,"p-carousel",4),a.YNc(6,qae,2,6,"p-carousel",4),a.qZA()),2&i){const e=a.oxw();a.Q6J("ngSwitch",e.activeImage),a.xp6(4),a.Q6J("ngSwitchCase",1),a.xp6(1),a.Q6J("ngSwitchCase",2),a.xp6(1),a.Q6J("ngSwitchCase",3)}}let $ae=(()=>{class i{constructor(e,o){this.imageService=e,this._Activatedroute=o,this.imgChanged=new a.vpe,this.responsiveOptions=[{breakpoint:"1024px",numVisible:3,numScroll:3},{breakpoint:"768px",numVisible:2,numScroll:2},{breakpoint:"560px",numVisible:1,numScroll:1}]}ngOnInit(){this._Activatedroute.paramMap.subscribe(e=>{this.productId=e.get("id")}),"1000"==this.productId?(this.imageService.getFirstProductImages().then(e=>{this.firstProductImages=e}),this.imageService.getSecondProductImages().then(e=>{this.secondProductImages=e}),this.imageService.getThirdProductImages().then(e=>{this.thirdProductImages=e})):"1001"==this.productId&&(this.imageService.getJBLBlack().then(e=>{this.firstProductImages=e}),this.imageService.getJBLBlue().then(e=>{this.secondProductImages=e}),this.imageService.getJBLWhite().then(e=>{this.thirdProductImages=e}))}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(Z5),a.Y36(vd))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-product-details-gallery"]],inputs:{activeImage:"activeImage"},outputs:{imgChanged:"imgChanged"},decls:3,vars:2,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"ngSwitch",4,"ngSwitchDefault"],[1,"gallery-container","container"],["styleClass","custom-carousel",3,"value","numVisible","numScroll","circular","autoplayInterval","responsiveOptions",4,"ngSwitchCase"],["styleClass","custom-carousel",3,"value","numVisible","numScroll","circular","autoplayInterval","responsiveOptions"],["pTemplate","item"],[1,"product-item"],[1,"product-item-content"],[1,"slide-img"],["alt","img",3,"src"]],template:function(e,o){1&e&&(a.TgZ(0,"section",0),a.YNc(1,Hae,1,0,"div",1),a.YNc(2,Zae,7,4,"div",2),a.qZA()),2&e&&(a.Q6J("ngSwitch",o.productId),a.xp6(1),a.Q6J("ngSwitchCase",1002))},dependencies:[Eo,zs,Yo,A2,Ci],styles:[".product-item[_ngcontent-%COMP%]   .product-item-content[_ngcontent-%COMP%]{border:1px solid var(--surface-d);border-radius:3px;margin:.3rem;text-align:center;padding:2rem 0}.product-item[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{width:50%;box-shadow:0 3px 6px #00000029,0 3px 6px #0000003b}.slide-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px}.gallery-container[_ngcontent-%COMP%]{margin:40px auto}.gallery-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-transform:uppercase;margin:0 auto;background-image:linear-gradient(315deg,#2a2a72 20%,#009ffd 94%);background-clip:text;-moz-background-clip:text;-webkit-background-clip:text;color:transparent;text-align:center}"]}),i})(),$5=(()=>{class i{constructor(e){this.http=e}getProduct1Comments(){return this.http.get("assets/data/productRating.json").toPromise().then(e=>e.data).then(e=>e)}getProduct2Comments(){return this.http.get("assets/data/productRating.json").toPromise().then(e=>e.data1).then(e=>e)}getProduct3Comments(){return this.http.get("assets/data/productRating.json").toPromise().then(e=>e.data2).then(e=>e)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Po))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();function Wae(i,t){if(1&i&&(a.TgZ(0,"span",9)(1,"span",10),a._uU(2,"\u2605"),a.qZA(),a._uU(3,"\u2605 "),a.qZA()),2&i){const e=t.fill;a.ekj("full",100===e),a.xp6(1),a.Udp("width",e,"%")}}function Kae(i,t){1&i&&(a.TgZ(0,"p"),a._uU(1,"\u2b50"),a.qZA())}function Yae(i,t){1&i&&(a.TgZ(0,"p"),a._uU(1,"\u2b50\u2b50"),a.qZA())}function Jae(i,t){1&i&&(a.TgZ(0,"p"),a._uU(1,"\u2b50\u2b50\u2b50"),a.qZA())}function Qae(i,t){1&i&&(a.TgZ(0,"p"),a._uU(1,"\u2b50\u2b50\u2b50\u2b50"),a.qZA())}function Xae(i,t){1&i&&(a.TgZ(0,"p"),a._uU(1,"\u2b50\u2b50\u2b50\u2b50\u2b50"),a.qZA())}function ele(i,t){if(1&i&&(a.TgZ(0,"div",11)(1,"div",12)(2,"div",13),a._UZ(3,"img",14),a.qZA(),a.TgZ(4,"div",15)(5,"div",16)(6,"div")(7,"p",17),a._uU(8),a.qZA(),a.TgZ(9,"div",18)(10,"div",19),a.YNc(11,Kae,2,0,"p",20),a.YNc(12,Yae,2,0,"p",20),a.YNc(13,Jae,2,0,"p",20),a.YNc(14,Qae,2,0,"p",20),a.YNc(15,Xae,2,0,"p",20),a.qZA()()(),a._UZ(16,"div",21),a.TgZ(17,"div",22)(18,"span"),a._uU(19),a.qZA(),a.TgZ(20,"span"),a._uU(21),a.qZA()()(),a.TgZ(22,"p"),a._uU(23),a.qZA()()(),a.TgZ(24,"div",23),a._UZ(25,"lord-icon",24),a.qZA(),a._UZ(26,"hr",25),a.qZA()),2&i){const e=t.$implicit;a.xp6(3),a.s9C("src",e.profilePic,a.LSH),a.xp6(5),a.Oqu(e.username),a.xp6(2),a.Q6J("ngSwitch",e.rating),a.xp6(1),a.Q6J("ngSwitchCase",1),a.xp6(1),a.Q6J("ngSwitchCase",2),a.xp6(1),a.Q6J("ngSwitchCase",3),a.xp6(1),a.Q6J("ngSwitchCase",4),a.xp6(1),a.Q6J("ngSwitchCase",5),a.xp6(4),a.Oqu(e.dateTime),a.xp6(2),a.hij("Variation: ",e.variation,""),a.xp6(2),a.Oqu(e.comment)}}let tle=(()=>{class i{constructor(e){this.commentService=e,this.currentRate=4.5,this.rating=5,this.ratingArr=[],this.count=0,this.s5=0,this.s4=0,this.s3=0,this.s2=0,this.s1=0}ngOnInit(){"1000"==this.productId?this.commentService.getProduct1Comments().then(e=>{this.comment=e,this.comment.forEach(o=>{this.ratingArr.push(o.rating),this.count++}),this.ratingArr.forEach(o=>{5==o?this.s5++:4==o?this.s4++:3==o?this.s3++:2==o?this.s2++:1==o&&this.s1++}),this.s5==this.count?(this.rating=1*this.rating,this.currentRate=this.rating):(this.rating=this.rating*(this.s5/this.count),this.currentRate=this.rating)}):"1001"==this.productId?this.commentService.getProduct2Comments().then(e=>{this.comment=e,this.comment.forEach(o=>{this.ratingArr.push(o.rating),this.count++}),this.ratingArr.forEach(o=>{5==o?this.s5++:4==o?this.s4++:3==o?this.s3++:2==o?this.s2++:1==o&&this.s1++}),this.s5==this.count?(this.rating=1*this.rating,this.currentRate=this.rating):(this.rating=this.rating*(this.s5/this.count),this.currentRate=this.rating)}):"1002"==this.productId&&this.commentService.getProduct3Comments().then(e=>{this.comment=e,this.comment.forEach(o=>{this.ratingArr.push(o.rating),this.count++}),this.ratingArr.forEach(o=>{5==o?this.s5++:4==o?this.s4++:3==o?this.s3++:2==o?this.s2++:1==o&&this.s1++}),this.s5==this.count?(this.rating=1*this.rating,this.currentRate=this.rating):(this.rating=this.rating*(this.s5/this.count),this.currentRate=this.rating)})}}return i.\u0275fac=function(e){return new(e||i)(a.Y36($5))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-rating"]],inputs:{productId:"productId"},decls:26,vars:11,consts:[[1,"container"],[1,"top"],[1,"stars"],[1,"stars-value"],["t",""],[3,"rate","starTemplate","readonly","max","rateChange"],[1,"options"],[1,"active"],["class","comments-container",4,"ngFor","ngForOf"],[1,"star"],[1,"half"],[1,"comments-container"],[1,"comment"],[1,"profile-pic"],["alt","",3,"src"],[1,"comment-details"],[1,"comment-details-top"],[1,"username"],[1,"user-rating"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"vl"],[1,"date-and-time"],[1,"report"],["src","https://cdn.lordicon.com/rslnizbt.json","trigger","loop-on-hover",1,"report-btn",2,"width","32px","height","32px"],[2,"margin-top","25px"]],template:function(e,o){if(1&e&&(a.TgZ(0,"div",0)(1,"h4"),a._uU(2,"Product Rating"),a.qZA(),a.TgZ(3,"div",1)(4,"div",2)(5,"p")(6,"span",3),a._uU(7),a.qZA(),a._uU(8," out of 5"),a.qZA(),a.YNc(9,Wae,4,4,"ng-template",null,4,a.W1O),a.TgZ(11,"ngb-rating",5),a.NdJ("rateChange",function(l){return o.currentRate=l}),a.qZA()(),a.TgZ(12,"div",6)(13,"button",7),a._uU(14,"All"),a.qZA(),a.TgZ(15,"button"),a._uU(16),a.qZA(),a.TgZ(17,"button"),a._uU(18),a.qZA(),a.TgZ(19,"button"),a._uU(20),a.qZA(),a.TgZ(21,"button"),a._uU(22),a.qZA(),a.TgZ(23,"button"),a._uU(24),a.qZA()()(),a.YNc(25,ele,27,11,"div",8),a.qZA()),2&e){const s=a.MAs(10);a.xp6(7),a.Oqu(o.currentRate),a.xp6(4),a.Q6J("rate",o.currentRate)("starTemplate",s)("readonly",!0)("max",5),a.xp6(5),a.hij("5 \u2b50 (",o.s5,")"),a.xp6(2),a.hij("4 \u2b50 (",o.s4,")"),a.xp6(2),a.hij("3 \u2b50 (",o.s3,")"),a.xp6(2),a.hij("2 \u2b50 (",o.s2,")"),a.xp6(2),a.hij("1 \u2b50 (",o.s1,")"),a.xp6(1),a.Q6J("ngForOf",o.comment)}},dependencies:[Ui,Eo,zs,Wre],styles:[".star[_ngcontent-%COMP%]{position:relative;display:inline-block;font-size:2rem;color:#d3d3d3}.full[_ngcontent-%COMP%]{color:gold}.half[_ngcontent-%COMP%]{position:absolute;display:inline-block;overflow:hidden;color:gold}.top[_ngcontent-%COMP%]{display:flex;padding:20px;margin:5px;border:1px solid rgba(0,93,232,.125);background-color:#005de80d}.stars[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:1.1rem;font-weight:500;color:#005de8;margin-right:20px}.stars[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.stars[_ngcontent-%COMP%]   .stars-value[_ngcontent-%COMP%]{font-size:2rem}.options[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;line-height:2rem;min-width:6.25rem;text-align:center;padding:.2rem .625rem;color:#000c;background-color:#fff;border:1px solid rgba(0,93,232,.5);box-sizing:border-box;display:inline-block;margin-right:.5rem;text-decoration:none;color:#000000de;text-transform:capitalize;border-radius:2px;margin-bottom:.3125rem;margin-top:.3125rem}.options[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .options[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#005de8;color:#f6f6f6}.comments-container[_ngcontent-%COMP%]{padding:20px;margin:5px}.comment[_ngcontent-%COMP%]{display:flex}.comment[_ngcontent-%COMP%]   .comment-details[_ngcontent-%COMP%]{margin-left:20px;position:relative}.comment[_ngcontent-%COMP%]   .comment-details[_ngcontent-%COMP%]   .comment-details-top[_ngcontent-%COMP%]{display:flex}.profile-pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border:1px solid #ccc;border-radius:50%;padding:5px;object-fit:cover}.username[_ngcontent-%COMP%]{margin:0}.vl[_ngcontent-%COMP%]{border-left:2px solid rgba(0,93,232,.5);height:45px;margin:0 8px}.date-and-time[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:small;color:#696969}.media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;border:1px solid #ccc}.report[_ngcontent-%COMP%]{margin:10px 0}.report[_ngcontent-%COMP%]   .report-btn[_ngcontent-%COMP%]{float:right;cursor:pointer}"]}),i})();function nle(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",12)(1,"h4",13),a._uU(2,"Shoe Size Chart"),a.qZA(),a.TgZ(3,"button",14),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.KtG(l.dismiss("Cross click"))}),a.qZA()(),a.TgZ(4,"div",15),a._UZ(5,"img",16),a.qZA(),a.TgZ(6,"div",17)(7,"button",18),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.KtG(l.close("Close click"))}),a._uU(8,"Close"),a.qZA()()}}function ile(i,t){1&i&&(a.TgZ(0,"div",19)(1,"div",20)(2,"span",21),a._uU(3,"Loading..."),a.qZA()()())}function rle(i,t){1&i&&a._UZ(0,"img",60)}function ole(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",61)(1,"div",62)(2,"h5",63),a._uU(3,"Sizes: "),a.qZA(),a.TgZ(4,"span",64),a.NdJ("click",function(){a.CHM(e);const s=a.oxw(2);return a.KtG(s.size=7)}),a._uU(5,"UK 7"),a.qZA(),a.TgZ(6,"span",64),a.NdJ("click",function(){a.CHM(e);const s=a.oxw(2);return a.KtG(s.size=7.5)}),a._uU(7,"UK 7.5"),a.qZA(),a.TgZ(8,"span",64),a.NdJ("click",function(){a.CHM(e);const s=a.oxw(2);return a.KtG(s.size=8)}),a._uU(9,"UK 8"),a.qZA(),a.TgZ(10,"span",64),a.NdJ("click",function(){a.CHM(e);const s=a.oxw(2);return a.KtG(s.size=8.5)}),a._uU(11,"UK 8.5"),a.qZA(),a.TgZ(12,"span",64),a.NdJ("click",function(){a.CHM(e);const s=a.oxw(2);return a.KtG(s.size=9)}),a._uU(13,"UK 9"),a.qZA(),a.TgZ(14,"span",64),a.NdJ("click",function(){a.CHM(e);const s=a.oxw(2);return a.KtG(s.size=9.5)}),a._uU(15,"UK 9.5"),a.qZA()(),a.TgZ(16,"a",65),a.NdJ("click",function(){a.CHM(e);const s=a.oxw(2),l=a.MAs(2);return a.KtG(s.openBackDropCustomClass(l))}),a._uU(17,"Size chart"),a.qZA()()}}function sle(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",61)(1,"div",62)(2,"h5",63),a._uU(3,"Sizes: "),a.qZA(),a.TgZ(4,"span",64),a.NdJ("click",function(){a.CHM(e);const s=a.oxw(2);return a.KtG(s.changeSpecs())}),a._uU(5,"128 GB | 8 GB"),a.qZA(),a.TgZ(6,"span"),a._uU(7,"256 GB | 12 GB"),a.qZA(),a.TgZ(8,"span"),a._uU(9,"512 GB | 12 GB"),a.qZA()()()}}function ale(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",22)(1,"div",23)(2,"div",24),a._UZ(3,"img",25)(4,"img",25)(5,"img",25)(6,"br"),a.TgZ(7,"div",26)(8,"div",27)(9,"img",28),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.changeColor(s.product.color0))}),a.qZA()(),a.TgZ(10,"div",27)(11,"img",29),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.changeColor(s.product.color1))}),a.qZA()(),a.TgZ(12,"div",27)(13,"img",30),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.changeColor(s.product.color2))}),a.qZA()()()(),a.TgZ(14,"div",31)(15,"div",32)(16,"h2"),a._uU(17),a.qZA(),a.YNc(18,rle,1,0,"img",33),a.TgZ(19,"p"),a._uU(20),a.qZA()(),a._UZ(21,"br"),a.TgZ(22,"p",34),a._uU(23),a.qZA(),a._UZ(24,"br"),a.TgZ(25,"div",35)(26,"div",36)(27,"h2"),a._uU(28),a.qZA(),a.TgZ(29,"p"),a._uU(30),a.qZA()(),a.TgZ(31,"div",37)(32,"h5",38),a._uU(33,"Quantity"),a.qZA(),a.TgZ(34,"div",39)(35,"button",40),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.minus())}),a._uU(36,"-"),a.qZA(),a.TgZ(37,"p",41),a._uU(38),a.qZA(),a.TgZ(39,"button",42),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.add())}),a._uU(40,"+"),a.qZA()()(),a.TgZ(41,"div",43)(42,"div",44),a.O4$(),a.TgZ(43,"svg",45)(44,"defs")(45,"style"),a._uU(46," .cls-1 { fill: #005DE8; } .cls-2 { fill: #fff; } "),a.qZA()(),a._UZ(47,"path",46)(48,"path",47)(49,"path",47),a.qZA(),a.kcU(),a.TgZ(50,"p"),a._uU(51,"100% Authentic Guarantee"),a.qZA()(),a.TgZ(52,"div",48),a._uU(53,"Guarantee Authentic or Money Back"),a.qZA()()(),a._UZ(54,"br"),a.TgZ(55,"div",49),a.YNc(56,ole,18,0,"div",50),a.YNc(57,sle,10,0,"div",50),a.qZA(),a.TgZ(58,"div",51)(59,"h5",52),a._uU(60,"Colors:"),a.qZA(),a.TgZ(61,"div",53)(62,"span",54),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.changeColor(s.color0))}),a.qZA(),a.TgZ(63,"span",55),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.changeColor(s.color1))}),a.qZA(),a.TgZ(64,"span",56),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.changeColor(s.color2))}),a.qZA()()(),a._UZ(65,"br"),a.TgZ(66,"button",57),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.addItemToCart())}),a._UZ(67,"i",58),a._uU(68," Add To Cart"),a.qZA(),a.TgZ(69,"button",59),a._uU(70,"Buy Now"),a.qZA()()()()}if(2&i){const e=a.oxw();a.xp6(3),a.MGl("src","../../../../assets/img/",e.productImg1,"",a.LSH),a.Q6J("ngClass",e.mainImg),a.xp6(1),a.MGl("src","../../../../assets/img/",e.productImg2,"",a.LSH),a.Q6J("ngClass",e.subImg0),a.xp6(1),a.MGl("src","../../../../assets/img/",e.productImg3,"",a.LSH),a.Q6J("ngClass",e.subImg1),a.xp6(4),a.MGl("src","../../../../assets/img/",e.productImg1,"",a.LSH),a.Q6J("ngClass",e.mainImg),a.xp6(2),a.MGl("src","../../../../assets/img/",e.productImg2,"",a.LSH),a.Q6J("ngClass",e.subImg0),a.xp6(2),a.MGl("src","../../../../assets/img/",e.productImg3,"",a.LSH),a.Q6J("ngClass",e.subImg1),a.xp6(4),a.Oqu(e.productName),a.xp6(1),a.Q6J("ngIf","discounted"==e.productType),a.xp6(2),a.hij("(",e.sold," sold)"),a.xp6(3),a.Oqu(e.productDescription),a.xp6(5),a.hij(" RM ",e.discountedPrice,""),a.xp6(2),a.hij(" RM ",e.oldPrice,""),a.xp6(8),a.Oqu(e.quantity),a.xp6(17),a.Q6J("ngSwitch",e.productId),a.xp6(1),a.Q6J("ngSwitchCase","1000"),a.xp6(1),a.Q6J("ngSwitchCase","1002"),a.xp6(5),a.Q6J("ngClass",e.MainColor),a.xp6(1),a.Q6J("ngClass",e.SubColor0),a.xp6(1),a.Q6J("ngClass",e.SubColor1)}}let lle=(()=>{class i{constructor(e,o,s,l,u,g,_,w,T){this._Activatedroute=e,this.productService=o,this.router=s,this.modalService=l,this.firebasecrudservice=u,this.renderer=g,this.spinner=_,this.e=w,this.messageService=T,this.loaderr=!0,this.activeImg=1,this.variations="",this.quantity=1,this.subtotal=0,this.colorOption="",this.size=0,this.cartItemId=0,this.image="",this.visible=!1,this.position="top-end",this.percentage=0,this.name="",this.tempObject=[],this.mainImg="active",this.subImg0="",this.subImg1="",this.productLogo="",this.productDescription="",this.productName="",this.productImg1="",this.productImg2="",this.productImg3="",this.oldPrice=0,this.discountedPrice=0,this.category="",this.stock0=0,this.stock1=0,this.stock2=0,this.rating=0,this.sold=0,this.color0="",this.color1="",this.color2="",this.gallery=!0,window.onbeforeunload=function(){window.scrollTo(0,0)}}ngOnInit(){this.router.events.subscribe(e=>{e instanceof Ff&&window.scrollTo(0,0)}),setTimeout(()=>{this.loaderr=!1;let e=this.renderer.selectRootElement("#loader");this.renderer.setStyle(e,"display","none")},2500),this._Activatedroute.paramMap.subscribe(e=>{this.productId=e.get("id"),this.productType=e.get("type")}),this.firebasecrudservice.getProductByIDFromAllProducts(this.productId).subscribe(e=>{this.product=e,this.productLogo=e.logo,this.productName=e.name,this.productDescription=e.description,this.productImg1=e.image1,this.productImg2=e.image2,this.productImg3=e.image3,this.color0=e.color0,this.color1=e.color1,this.color2=e.color2,this.oldPrice=e.oldPrice,this.discountedPrice=e.discountedPrice,this.category=e.category,this.sold=e.sold,this.gallery=e.gallery,this.MainColor=["circle",e.color0,"active"],this.SubColor0=["circle",e.color1],this.SubColor1=["circle",e.color2]})}ngAfterViewInit(){let e=this.renderer.selectRootElement("#loader");this.renderer.setStyle(e,"display","none")}openBackDropCustomClass(e){this.modalService.open(e,{backdropClass:"light-blue-backdrop"})}changeColor(e){e==this.color0?(this.MainColor=["circle",this.color0,"active"],this.SubColor0=["circle",this.color1],this.SubColor1=["circle",this.color2],this.mainImg="active",this.subImg0="",this.subImg1="",this.activeImg=1,this.image=this.productImg1,this.colorOption=this.color0):e==this.color1?(this.MainColor=["circle",this.color0],this.SubColor0=["circle",this.color1,"active"],this.SubColor1=["circle",this.color2],this.mainImg="",this.subImg0="active",this.subImg1="",this.activeImg=2,this.image=this.productImg2,this.colorOption=this.color1):e==this.color2?(console.log(this.color2),this.MainColor=["circle",this.color0],this.SubColor0=["circle",this.color1],this.SubColor1=["circle",this.color2,"active"],this.mainImg="",this.subImg0="",this.subImg1="active",this.activeImg=3,this.image=this.productImg3,this.colorOption=this.color2):alert("no products found")}changeSpecs(){alert("test")}addItemToCart(){this.cartItemId++;let e="../../../../assets/img/"+this.image;""==this.colorOption&&(this.colorOption=this.color0),this.variations="size: "+this.size+" color: "+this.colorOption,this.subtotal=this.quantity*this.discountedPrice;let o={id:this.cartItemId.toString(),placeholderImg:e,title:this.productName,variations:this.variations,oldPrice:this.oldPrice,discountedPrice:this.discountedPrice,quantity:this.quantity,totalPrice:this.subtotal};this.firebasecrudservice.setCart(o),this.toggleToast()}minus(){this.quantity>1&&this.quantity--}add(){this.quantity<10&&this.quantity++}toggleToast(){this.visible=!this.visible,this.name=this.productName}goToCart(){this.router.navigate(["/cart"])}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(vd),a.Y36(Zb),a.Y36(er),a.Y36(Uk),a.Y36(Rf),a.Y36(a.Qsj),a.Y36(uae),a.Y36(a.SBq),a.Y36(Ws))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-main-product-details"]],features:[a._Bn([Ws])],decls:23,vars:7,consts:[["style","background-color: #5cb3fd;"],["content",""],["id","loader"],[1,"application-loading-container"],[1,"application-loading-box"],["id","loader","style","display: flex;\nflex-direction: column;\njustify-content: center;\nalign-items: center;\nheight: 100vh;",4,"ngIf"],["position","fixed",3,"placement","click"],[1,"toastStyle",3,"visible"],[1,"toastHeader"],["class","container product-details-container",4,"ngIf"],[3,"activeImage","imgChanged"],[3,"productId"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["src","../../../../assets/img/productDetails/sizeChart.png","alt","size-chart",1,"size-chart-img"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["id","loader",2,"display","flex","flex-direction","column","justify-content","center","align-items","center","height","100vh"],["role","status",1,"spinner-grow","text-primary",2,"width","3rem","height","3rem"],[1,"visually-hidden"],[1,"container","product-details-container"],[1,"row-container"],[1,"imgContainer"],["alt","activeImg",1,"activeImg",3,"ngClass","src"],[1,"subImages"],[1,"subImages-container"],["alt","firstImg",1,"subImages-img",3,"ngClass","src","click"],["alt","secondImg",1,"subImages-img",3,"ngClass","src","click"],["alt","thirdImg",1,"subImages-img",3,"ngClass","src","click"],[1,"col-md-6"],[1,"title"],["src","../../../../assets/img/productDetails/discount.png","alt","discount-logo",4,"ngIf"],[1,"description"],[1,"price-guarantee"],[1,"price"],[2,"width","50%","margin-bottom","15px","display","flex"],[1,"quantity"],[1,"qty-input"],["data-action","minus","type","button",1,"qty-count","qty-count--minus",3,"click"],[1,"product-qty"],["data-action","add","type","button",1,"qty-count","qty-count--add",3,"click"],[1,"authentic-guarantee"],[1,"guarantee"],["id","Layer_1","data-name","Layer 1","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 32 32","width","24","height","24",1,"NM0h58"],["d","M28.65,16.92V4.73S19,4.46,15.94,0C12.45,4.41,3.23,4.73,3.23,4.73V16.92S3,27.22,15.94,32C28.9,27.22,28.65,16.92,28.65,16.92Z",1,"cls-1","orignal-guarantee-icon__path--fill"],["d","M25.56,13.67,15.26,24a.68.68,0,0,1-1,0L8.33,18a.68.68,0,0,1,0-1l1.55-1.55a.68.68,0,0,1,1,0l3.44,3.43a.68.68,0,0,0,1,0L23,11.15a.68.68,0,0,1,1,0l1.55,1.54A.69.69,0,0,1,25.56,13.67Z",1,"cls-2"],[1,"guarantee-last"],[3,"ngSwitch"],["class","container-size-container",4,"ngSwitchCase"],[1,"color-container"],[1,"colors"],[1,"circles"],["id","mainColor",3,"ngClass","click"],["id","subColor0",3,"ngClass","click"],["id","subColor1",3,"ngClass","click"],["type","button",1,"add-to-cart-btn","button",3,"click"],[1,"fa-solid","fa-cart-shopping"],["type","button",1,"btn","btn-primary-color","button"],["src","../../../../assets/img/productDetails/discount.png","alt","discount-logo"],[1,"container-size-container"],[1,"size-container"],[1,"sizes"],[3,"click"],[1,"size-chart-link",3,"click"]],template:function(e,o){1&e&&(a._UZ(0,"app-header-normal"),a.YNc(1,nle,9,0,"ng-template",0,1,a.W1O),a.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2"),a._uU(7,"Loading..."),a.qZA()()()(),a.YNc(8,ile,4,0,"div",5),a.TgZ(9,"c-toaster",6),a.NdJ("click",function(){return o.goToCart()}),a.TgZ(10,"c-toast",7)(11,"c-toast-header",8),a._UZ(12,"toast-sample-icon"),a._uU(13," Success "),a.qZA(),a.TgZ(14,"c-toast-body")(15,"p"),a._uU(16),a.qZA()()()(),a.YNc(17,ale,71,25,"div",9),a.TgZ(18,"app-product-details-gallery",10),a.NdJ("imgChanged",function(l){return o.activeImg=l}),a.qZA(),a._UZ(19,"app-product-details-accordion")(20,"app-rating",11)(21,"app-similar-products")(22,"app-footer")),2&e&&(a.xp6(8),a.Q6J("ngIf",o.loaderr),a.xp6(1),a.Q6J("placement",o.position),a.xp6(1),a.Q6J("visible",o.visible),a.xp6(6),a.hij("Added ",o.name," to cart"),a.xp6(1),a.Q6J("ngIf",!o.loaderr),a.xp6(1),a.Q6J("activeImage",o.activeImg),a.xp6(2),a.Q6J("productId",o.productId))},dependencies:[lo,Ji,Eo,zs,D0,pae,Vae,$ae,k2,tle],styles:['.product-details-container[_ngcontent-%COMP%]{margin-top:20px}.activeImg[_ngcontent-%COMP%]{position:absolute;max-width:350px;opacity:0;transition:opacity .5s ease}.activeImg.active[_ngcontent-%COMP%]{opacity:1}.row-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border:solid 1px #808080;padding:15px}.imgContainer[_ngcontent-%COMP%]{position:relative}.subImages[_ngcontent-%COMP%]{display:flex;margin-top:100%}.subImages[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;cursor:pointer;border:1px solid #ccc}.subImages[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{box-shadow:0 0 15px 1px #005de8bf;-webkit-box-shadow:0px 0px 15px 1px rgba(0,93,232,.75);-moz-box-shadow:0px 0px 15px 1px rgba(0,93,232,.75);border:solid 1px #ADD8E6}.subImages[_ngcontent-%COMP%]   .subImages-container[_ngcontent-%COMP%]{border-radius:5px;margin:0 8px}.subImages[_ngcontent-%COMP%]   .subImages-container[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{border:solid 1px #005DE8}.title[_ngcontent-%COMP%]{display:flex}.title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px;margin-left:10px}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0 5px}.description[_ngcontent-%COMP%]{text-align:justify;margin:0;padding:0}.price[_ngcontent-%COMP%]{display:flex}.price[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#ff160c}.price[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:10px 0 0 5px;text-decoration:line-through}.authentic-guarantee[_ngcontent-%COMP%]{background-color:#005de81a;max-width:52%;padding:10px 5px 5px 8px}.guarantee[_ngcontent-%COMP%]{display:flex}.guarantee[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#005de8;margin-left:5px}.guarantee-last[_ngcontent-%COMP%]{font-size:12px}.container-size-container[_ngcontent-%COMP%]{margin-bottom:20px}.size-container[_ngcontent-%COMP%]{display:flex}.size-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:40px;padding:5px;border:1px solid #ccc;text-align:center;margin:0 5px;cursor:pointer}.size-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px 2px #69696940;-webkit-box-shadow:0px 0px 5px 2px rgba(105,105,105,.25);-moz-box-shadow:0px 0px 5px 2px rgba(105,105,105,.25)}.sizes[_ngcontent-%COMP%], .colors[_ngcontent-%COMP%]{color:#636363;padding:5px 5px 0 0}.size-chart-link[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer;font-size:smaller}.size-chart-img[_ngcontent-%COMP%]{width:450px}.light-blue-backdrop[_ngcontent-%COMP%]{background-color:#5cb3fd}.color-container[_ngcontent-%COMP%]{display:flex}.circles[_ngcontent-%COMP%]{display:flex;padding-top:10px}.circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:18px;width:18px;border-radius:50%;margin:0 4px;cursor:pointer;transition:all .4s ease}.circle.blue[_ngcontent-%COMP%]{background:#0071C7}.circle.blue.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #fff,0 0 0 4px #0071c7}.circle.pink[_ngcontent-%COMP%]{background:#FA1795}.circle.pink.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #fff,0 0 0 4px #fa1795}.circle.yellow[_ngcontent-%COMP%]{background:#F5DA00}.circle.yellow.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #fff,0 0 0 4px #f5da00}.circle.black[_ngcontent-%COMP%]{background:#414a4c}.circle.black.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #fff,0 0 0 4px #414a4c}.circle.white[_ngcontent-%COMP%]{border:1px solid #ccc}.circle.white.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #fff,0 0 0 4px #ccc}.circle.burgundy[_ngcontent-%COMP%]{background:#65081F}.circle.burgundy.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #fff,0 0 0 4px #65081f}.circle.green[_ngcontent-%COMP%]{background:#013220}.circle.green.active[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #fff,0 0 0 4px #013220}.add-to-cart-btn[_ngcontent-%COMP%]{border-color:#0d6efd;color:#0d6efd;background-color:#f6f6f6;line-height:1.5;text-align:center;text-decoration:none;vertical-align:middle;padding:5px;font-size:1rem;border-radius:.25rem;margin-right:15px}.add-to-cart-btn[_ngcontent-%COMP%]:hover{background-color:#0d6efd33}.button[_ngcontent-%COMP%]{height:48px;padding:0 20px;font-weight:600}.qty-input[_ngcontent-%COMP%]{color:#000;background:#fff;display:flex;align-items:center;overflow:hidden}.qty-input[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding-top:10px}.qty-input[_ngcontent-%COMP%]   .product-qty[_ngcontent-%COMP%], .qty-input[_ngcontent-%COMP%]   .qty-count[_ngcontent-%COMP%]{background:transparent;color:inherit;font-weight:700;font-size:inherit;border:0px solid #ccc;display:inline-block;min-width:0;height:2.5rem;line-height:1}.qty-input[_ngcontent-%COMP%]:focus{outline:none}.product-qty[_ngcontent-%COMP%]{width:50px;min-width:0;display:inline-block;text-align:center;-webkit-appearance:textfield;appearance:textfield;border-top:1px solid #005DE8!important;border-bottom:1px solid #005DE8!important}.product-qty[_ngcontent-%COMP%]::-webkit-outer-spin-button, .product-qty[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;appearance:none;margin:0}.qty-count[_ngcontent-%COMP%]{padding:0;cursor:pointer;width:2.5rem;font-size:1.25em;text-indent:-100px;overflow:hidden;position:relative;border:1px solid #005DE8!important}.qty-count[_ngcontent-%COMP%]:hover{color:#f5f5f5;background-color:#005de8}.qty-count[_ngcontent-%COMP%]:before, .qty-count[_ngcontent-%COMP%]:after{content:"";height:2px;width:10px;position:absolute;display:block;background:#000;top:0;bottom:0;left:0;right:0;margin:auto}.qty-count--add[_ngcontent-%COMP%]:after{transform:rotate(90deg)}.qty-count[_ngcontent-%COMP%]:disabled{color:#ccc;background:#f2f2f2;cursor:not-allowed;border-color:transparent}.qty-count[_ngcontent-%COMP%]:disabled:before, .qty-count[_ngcontent-%COMP%]:disabled:after{background:#ccc}.quantity[_ngcontent-%COMP%]{color:#636363;margin-right:10px;padding-top:10px}.toast[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{cursor:pointer}.toastStyle[_ngcontent-%COMP%]{background-color:#cff;color:#006400}.toastHeader[_ngcontent-%COMP%]{background-color:green;color:#f5f5f5}',".light-blue-backdrop[_ngcontent-%COMP%]{background-color:#5cb3fd!important}",".application-loading-container[_ngcontent-%COMP%] {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      height: 100vh;\n    }\n\n    .application-loading-box[_ngcontent-%COMP%] {\n      width: 300px;\n      margin: 5px;\n      text-align: center;\n    }"]}),i})(),cle=(()=>{class i{constructor(e){this.el=e}onkeydown(e){if(!0!==this.pFocusTrapDisabled){e.preventDefault();let o=ht.getFocusableElements(this.el.nativeElement);if(o&&o.length>0)if(o[0].ownerDocument.activeElement){let s=o.indexOf(o[0].ownerDocument.activeElement);e.shiftKey?-1==s||0===s?o[o.length-1].focus():o[s-1].focus():-1==s||s===o.length-1?o[0].focus():o[s+1].focus()}else o[0].focus()}}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.SBq))},i.\u0275dir=a.lG2({type:i,selectors:[["","pFocusTrap",""]],hostAttrs:[1,"p-element"],hostBindings:function(e,o){1&e&&a.NdJ("keydown.tab",function(l){return o.onkeydown(l)})("keydown.shift.tab",function(l){return o.onkeydown(l)})},inputs:{pFocusTrapDisabled:"pFocusTrapDisabled"}}),i})(),ule=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn]}),i})();const dle=["titlebar"],hle=["content"],ple=["footer"];function fle(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",11),a.NdJ("mousedown",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.initResize(s))}),a.qZA()}}function gle(i,t){if(1&i&&(a.TgZ(0,"span",18),a._uU(1),a.qZA()),2&i){const e=a.oxw(4);a.uIk("id",e.id+"-label"),a.xp6(1),a.Oqu(e.header)}}function mle(i,t){if(1&i&&(a.TgZ(0,"span",18),a.Hsn(1,1),a.qZA()),2&i){const e=a.oxw(4);a.uIk("id",e.id+"-label")}}function _le(i,t){1&i&&a.GkF(0)}const yle=function(){return{"p-dialog-header-icon p-dialog-header-maximize p-link":!0}};function vle(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"button",19),a.NdJ("click",function(){a.CHM(e);const s=a.oxw(4);return a.KtG(s.maximize())})("keydown.enter",function(){a.CHM(e);const s=a.oxw(4);return a.KtG(s.maximize())}),a._UZ(1,"span",20),a.qZA()}if(2&i){const e=a.oxw(4);a.Q6J("ngClass",a.DdM(2,yle)),a.xp6(1),a.Q6J("ngClass",e.maximized?e.minimizeIcon:e.maximizeIcon)}}const ble=function(){return{"p-dialog-header-icon p-dialog-header-close p-link":!0}};function wle(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"button",21),a.NdJ("click",function(s){a.CHM(e);const l=a.oxw(4);return a.KtG(l.close(s))})("keydown.enter",function(s){a.CHM(e);const l=a.oxw(4);return a.KtG(l.close(s))}),a._UZ(1,"span",22),a.qZA()}if(2&i){const e=a.oxw(4);a.Q6J("ngClass",a.DdM(4,ble)),a.uIk("aria-label",e.closeAriaLabel)("tabindex",e.closeTabindex),a.xp6(1),a.Q6J("ngClass",e.closeIcon)}}function Cle(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",12,13),a.NdJ("mousedown",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.initDrag(s))}),a.YNc(2,gle,2,2,"span",14),a.YNc(3,mle,2,1,"span",14),a.YNc(4,_le,1,0,"ng-container",9),a.TgZ(5,"div",15),a.YNc(6,vle,2,3,"button",16),a.YNc(7,wle,2,5,"button",17),a.qZA()()}if(2&i){const e=a.oxw(3);a.xp6(2),a.Q6J("ngIf",!e.headerFacet&&!e.headerTemplate),a.xp6(1),a.Q6J("ngIf",e.headerFacet),a.xp6(1),a.Q6J("ngTemplateOutlet",e.headerTemplate),a.xp6(2),a.Q6J("ngIf",e.maximizable),a.xp6(1),a.Q6J("ngIf",e.closable)}}function Tle(i,t){1&i&&a.GkF(0)}function Ele(i,t){1&i&&a.GkF(0)}function xle(i,t){if(1&i&&(a.TgZ(0,"div",23,24),a.Hsn(2,2),a.YNc(3,Ele,1,0,"ng-container",9),a.qZA()),2&i){const e=a.oxw(3);a.xp6(3),a.Q6J("ngTemplateOutlet",e.footerTemplate)}}const Sle=function(i,t,e,o){return{"p-dialog p-component":!0,"p-dialog-rtl":i,"p-dialog-draggable":t,"p-dialog-resizable":e,"p-dialog-maximized":o}},Dle=function(i,t){return{transform:i,transition:t}},Ile=function(i){return{value:"visible",params:i}};function Mle(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",3,4),a.NdJ("@animation.start",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onAnimationStart(s))})("@animation.done",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onAnimationEnd(s))}),a.YNc(2,fle,1,0,"div",5),a.YNc(3,Cle,8,5,"div",6),a.TgZ(4,"div",7,8),a.Hsn(6),a.YNc(7,Tle,1,0,"ng-container",9),a.qZA(),a.YNc(8,xle,4,1,"div",10),a.qZA()}if(2&i){const e=a.oxw(2);a.Tol(e.styleClass),a.Q6J("ngClass",a.l5B(15,Sle,e.rtl,e.draggable,e.resizable,e.maximized))("ngStyle",e.style)("pFocusTrapDisabled",!1===e.focusTrap)("@animation",a.VKq(23,Ile,a.WLB(20,Dle,e.transformOptions,e.transitionOptions))),a.uIk("aria-labelledby",e.id+"-label"),a.xp6(2),a.Q6J("ngIf",e.resizable),a.xp6(1),a.Q6J("ngIf",e.showHeader),a.xp6(1),a.Tol(e.contentStyleClass),a.Q6J("ngClass","p-dialog-content")("ngStyle",e.contentStyle),a.xp6(3),a.Q6J("ngTemplateOutlet",e.contentTemplate),a.xp6(1),a.Q6J("ngIf",e.footerFacet||e.footerTemplate)}}const Ale=function(i,t,e,o,s,l,u,g,_,w){return{"p-dialog-mask":!0,"p-component-overlay p-component-overlay-enter":i,"p-dialog-mask-scrollblocker":t,"p-dialog-left":e,"p-dialog-right":o,"p-dialog-top":s,"p-dialog-top-left":l,"p-dialog-top-right":u,"p-dialog-bottom":g,"p-dialog-bottom-left":_,"p-dialog-bottom-right":w}};function kle(i,t){if(1&i&&(a.TgZ(0,"div",1),a.YNc(1,Mle,9,25,"div",2),a.qZA()),2&i){const e=a.oxw();a.Tol(e.maskStyleClass),a.Q6J("ngClass",a.rFY(4,Ale,[e.modal,e.modal||e.blockScroll,"left"===e.position,"right"===e.position,"top"===e.position,"topleft"===e.position||"top-left"===e.position,"topright"===e.position||"top-right"===e.position,"bottom"===e.position,"bottomleft"===e.position||"bottom-left"===e.position,"bottomright"===e.position||"bottom-right"===e.position])),a.xp6(1),a.Q6J("ngIf",e.visible)}}const Ole=["*",[["p-header"]],[["p-footer"]]],Rle=["*","p-header","p-footer"],Ple=rB([ti({transform:"{{transform}}",opacity:0}),Fr("{{transition}}")]),Nle=rB([Fr("{{transition}}",ti({transform:"{{transform}}",opacity:0}))]);let Fle=(()=>{class i{constructor(e,o,s,l,u){this.el=e,this.renderer=o,this.zone=s,this.cd=l,this.config=u,this.draggable=!0,this.resizable=!0,this.closeOnEscape=!0,this.closable=!0,this.showHeader=!0,this.blockScroll=!1,this.autoZIndex=!0,this.baseZIndex=0,this.minX=0,this.minY=0,this.focusOnShow=!0,this.keepInViewport=!0,this.focusTrap=!0,this.transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.closeIcon="pi pi-times",this.closeTabindex="-1",this.minimizeIcon="pi pi-window-minimize",this.maximizeIcon="pi pi-window-maximize",this.onShow=new a.vpe,this.onHide=new a.vpe,this.visibleChange=new a.vpe,this.onResizeInit=new a.vpe,this.onResizeEnd=new a.vpe,this.onDragEnd=new a.vpe,this.onMaximize=new a.vpe,this.id=Jo(),this._style={},this._position="center",this.transformOptions="scale(0.7)"}get positionLeft(){return 0}set positionLeft(e){console.log("positionLeft property is deprecated.")}get positionTop(){return 0}set positionTop(e){console.log("positionTop property is deprecated.")}get responsive(){return!1}set responsive(e){console.log("Responsive property is deprecated.")}get breakpoint(){return 649}set breakpoint(e){console.log("Breakpoint property is not utilized and deprecated, use breakpoints or CSS media queries instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":default:this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngOnInit(){this.breakpoints&&this.createStyle()}get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0)}get style(){return this._style}set style(e){e&&(this._style={...e},this.originalStyle=e)}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)"}}focus(){let e=ht.findSingle(this.container,"[autofocus]");e&&this.zone.runOutsideAngular(()=>{setTimeout(()=>e.focus(),5)})}close(e){this.visibleChange.emit(!1),e.preventDefault()}enableModality(){this.closable&&this.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.close(e)})),this.modal&&ht.addClass(document.body,"p-overflow-hidden")}disableModality(){this.wrapper&&(this.dismissableMask&&this.unbindMaskClickListener(),this.modal&&ht.removeClass(document.body,"p-overflow-hidden"),this.cd.destroyed||this.cd.detectChanges())}maximize(){this.maximized=!this.maximized,!this.modal&&!this.blockScroll&&(this.maximized?ht.addClass(document.body,"p-overflow-hidden"):ht.removeClass(document.body,"p-overflow-hidden")),this.onMaximize.emit({maximized:this.maximized})}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}moveOnTop(){this.autoZIndex&&(sr.set("modal",this.container,this.baseZIndex+this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let o in this.breakpoints)e+=`\n                    @media screen and (max-width: ${o}) {\n                        .p-dialog[${this.id}] {\n                            width: ${this.breakpoints[o]} !important;\n                        }\n                    }\n                `;this.styleElement.innerHTML=e}}initDrag(e){ht.hasClass(e.target,"p-dialog-header-icon")||ht.hasClass(e.target.parentElement,"p-dialog-header-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,this.container.style.margin="0",ht.addClass(document.body,"p-unselectable-text"))}onKeydown(e){if(this.focusTrap&&9===e.which){e.preventDefault();let o=ht.getFocusableElements(this.container);if(o&&o.length>0)if(o[0].ownerDocument.activeElement){let s=o.indexOf(o[0].ownerDocument.activeElement);e.shiftKey?-1==s||0===s?o[o.length-1].focus():o[s-1].focus():-1==s||s===o.length-1?o[0].focus():o[s+1].focus()}else o[0].focus()}}onDrag(e){if(this.dragging){let o=ht.getOuterWidth(this.container),s=ht.getOuterHeight(this.container),l=e.pageX-this.lastPageX,u=e.pageY-this.lastPageY,g=this.container.getBoundingClientRect(),_=g.left+l,w=g.top+u,T=ht.getViewport();this.container.style.position="fixed",this.keepInViewport?(_>=this.minX&&_+o<T.width&&(this._style.left=_+"px",this.lastPageX=e.pageX,this.container.style.left=_+"px"),w>=this.minY&&w+s<T.height&&(this._style.top=w+"px",this.lastPageY=e.pageY,this.container.style.top=w+"px")):(this.lastPageX=e.pageX,this.container.style.left=_+"px",this.lastPageY=e.pageY,this.container.style.top=w+"px")}}endDrag(e){this.dragging&&(this.dragging=!1,ht.removeClass(document.body,"p-unselectable-text"),this.cd.detectChanges(),this.onDragEnd.emit(e))}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}center(){this.resetPosition()}initResize(e){this.resizable&&(this.resizing=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,ht.addClass(document.body,"p-unselectable-text"),this.onResizeInit.emit(e))}onResize(e){if(this.resizing){let o=e.pageX-this.lastPageX,s=e.pageY-this.lastPageY,l=ht.getOuterWidth(this.container),u=ht.getOuterHeight(this.container),g=ht.getOuterHeight(this.contentViewChild.nativeElement),_=l+o,w=u+s,T=this.container.style.minWidth,D=this.container.style.minHeight,O=this.container.getBoundingClientRect(),F=ht.getViewport();(!parseInt(this.container.style.top)||!parseInt(this.container.style.left))&&(_+=o,w+=s),(!T||_>parseInt(T))&&O.left+_<F.width&&(this._style.width=_+"px",this.container.style.width=this._style.width),(!D||w>parseInt(D))&&O.top+w<F.height&&(this.contentViewChild.nativeElement.style.height=g+w-u+"px",this._style.height&&(this._style.height=w+"px",this.container.style.height=this._style.height)),this.lastPageX=e.pageX,this.lastPageY=e.pageY}}resizeEnd(e){this.resizing&&(this.resizing=!1,ht.removeClass(document.body,"p-unselectable-text"),this.onResizeEnd.emit(e))}bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.resizable&&this.bindDocumentResizeListeners(),this.closeOnEscape&&this.closable&&this.bindDocumentEscapeListener()}unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentEscapeListener()}bindDocumentDragListener(){this.zone.runOutsideAngular(()=>{this.documentDragListener=this.onDrag.bind(this),window.document.addEventListener("mousemove",this.documentDragListener)})}unbindDocumentDragListener(){this.documentDragListener&&(window.document.removeEventListener("mousemove",this.documentDragListener),this.documentDragListener=null)}bindDocumentDragEndListener(){this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.endDrag.bind(this),window.document.addEventListener("mouseup",this.documentDragEndListener)})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(window.document.removeEventListener("mouseup",this.documentDragEndListener),this.documentDragEndListener=null)}bindDocumentResizeListeners(){this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.onResize.bind(this),this.documentResizeEndListener=this.resizeEnd.bind(this),window.document.addEventListener("mousemove",this.documentResizeListener),window.document.addEventListener("mouseup",this.documentResizeEndListener)})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(window.document.removeEventListener("mousemove",this.documentResizeListener),window.document.removeEventListener("mouseup",this.documentResizeEndListener),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindDocumentEscapeListener(){this.documentEscapeListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",o=>{27==o.which&&this.close(o)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.wrapper):ht.appendChild(this.wrapper,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.el.nativeElement.appendChild(this.wrapper)}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container.parentElement,this.appendContainer(),this.moveOnTop(),this.bindGlobalListeners(),this.container.setAttribute(this.id,""),this.modal&&this.enableModality(),!this.modal&&this.blockScroll&&ht.addClass(document.body,"p-overflow-hidden"),this.focusOnShow&&this.focus();break;case"void":this.wrapper&&this.modal&&ht.addClass(this.wrapper,"p-component-overlay-leave")}}onAnimationEnd(e){switch(e.toState){case"void":this.onContainerDestroy(),this.onHide.emit({});break;case"visible":this.onShow.emit({})}}onContainerDestroy(){this.unbindGlobalListeners(),this.dragging=!1,this.maskVisible=!1,this.maximized&&(ht.removeClass(document.body,"p-overflow-hidden"),this.maximized=!1),this.modal&&this.disableModality(),this.blockScroll&&ht.removeClass(document.body,"p-overflow-hidden"),this.container&&this.autoZIndex&&sr.clear(this.container),this.container=null,this.wrapper=null,this._style=this.originalStyle?{...this.originalStyle}:{}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.destroyStyle()}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(a.R0b),a.Y36(a.sBO),a.Y36(zn))},i.\u0275cmp=a.Xpm({type:i,selectors:[["p-dialog"]],contentQueries:function(e,o,s){if(1&e&&(a.Suo(s,Cp,5),a.Suo(s,Pa,5),a.Suo(s,Ci,4)),2&e){let l;a.iGM(l=a.CRH())&&(o.headerFacet=l.first),a.iGM(l=a.CRH())&&(o.footerFacet=l.first),a.iGM(l=a.CRH())&&(o.templates=l)}},viewQuery:function(e,o){if(1&e&&(a.Gf(dle,5),a.Gf(hle,5),a.Gf(ple,5)),2&e){let s;a.iGM(s=a.CRH())&&(o.headerViewChild=s.first),a.iGM(s=a.CRH())&&(o.contentViewChild=s.first),a.iGM(s=a.CRH())&&(o.footerViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{header:"header",draggable:"draggable",resizable:"resizable",positionLeft:"positionLeft",positionTop:"positionTop",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",modal:"modal",closeOnEscape:"closeOnEscape",dismissableMask:"dismissableMask",rtl:"rtl",closable:"closable",responsive:"responsive",appendTo:"appendTo",breakpoints:"breakpoints",styleClass:"styleClass",maskStyleClass:"maskStyleClass",showHeader:"showHeader",breakpoint:"breakpoint",blockScroll:"blockScroll",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",minX:"minX",minY:"minY",focusOnShow:"focusOnShow",maximizable:"maximizable",keepInViewport:"keepInViewport",focusTrap:"focusTrap",transitionOptions:"transitionOptions",closeIcon:"closeIcon",closeAriaLabel:"closeAriaLabel",closeTabindex:"closeTabindex",minimizeIcon:"minimizeIcon",maximizeIcon:"maximizeIcon",visible:"visible",style:"style",position:"position"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange",onResizeInit:"onResizeInit",onResizeEnd:"onResizeEnd",onDragEnd:"onDragEnd",onMaximize:"onMaximize"},ngContentSelectors:Rle,decls:1,vars:1,consts:[[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","class","pFocusTrapDisabled",4,"ngIf"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","pFocusTrapDisabled"],["container",""],["class","p-resizable-handle","style","z-index: 90;",3,"mousedown",4,"ngIf"],["class","p-dialog-header",3,"mousedown",4,"ngIf"],[3,"ngClass","ngStyle"],["content",""],[4,"ngTemplateOutlet"],["class","p-dialog-footer",4,"ngIf"],[1,"p-resizable-handle",2,"z-index","90",3,"mousedown"],[1,"p-dialog-header",3,"mousedown"],["titlebar",""],["class","p-dialog-title",4,"ngIf"],[1,"p-dialog-header-icons"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],["type","button","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],[1,"p-dialog-title"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-maximize-icon",3,"ngClass"],["type","button","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-close-icon",3,"ngClass"],[1,"p-dialog-footer"],["footer",""]],template:function(e,o){1&e&&(a.F$t(Ole),a.YNc(0,kle,2,15,"div",0)),2&e&&a.Q6J("ngIf",o.maskVisible)},dependencies:[lo,Ji,Hr,uo,cle,S0],styles:[".p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-draggable .p-dialog-header{cursor:move}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-top .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog{margin:.75rem;transform:translate(0)}.p-dialog-maximized{transition:none;transform:none;width:100vw!important;height:100vh!important;top:0px!important;left:0px!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start;align-items:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}\n"],encapsulation:2,data:{animation:[Sa("animation",[dr("void => visible",[oB(Ple)]),dr("visible => void",[oB(Nle)])])]},changeDetection:0}),i})(),Lle=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn,ule,Yf,ar]}),i})();function Vle(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"tbody")(1,"tr",32),a._UZ(2,"th"),a.TgZ(3,"td",33)(4,"div"),a._UZ(5,"img",34),a._uU(6),a.qZA()(),a.TgZ(7,"td"),a._uU(8),a.TgZ(9,"span",35),a._uU(10),a.qZA()(),a.TgZ(11,"td")(12,"div",36)(13,"button",14),a.NdJ("click",function(){const s=a.CHM(e),l=s.$implicit,u=s.index,g=a.oxw();return a.KtG(g.addQuantity(l.id,u,l.discountedPrice))}),a.TgZ(14,"p"),a._uU(15,"+"),a.qZA()(),a.TgZ(16,"span"),a._uU(17),a.qZA(),a.TgZ(18,"button",14),a.NdJ("click",function(){const s=a.CHM(e),l=s.$implicit,u=s.index,g=a.oxw();return a.KtG(g.minusQuantity(l.id,u,l.discountedPrice))}),a.TgZ(19,"p"),a._uU(20,"\u2212"),a.qZA()()()(),a.TgZ(21,"td",37),a._uU(22),a.qZA(),a.TgZ(23,"td")(24,"p",38),a.NdJ("click",function(){const l=a.CHM(e).$implicit,u=a.oxw();return a.KtG(u.removeItem(l.id))}),a._uU(25,"Delete"),a.qZA()()()()}if(2&i){const e=t.$implicit;a.xp6(5),a.s9C("src",e.placeholderImg,a.LSH),a.xp6(1),a.AsE(" ",e.title," - ",e.variations," "),a.xp6(2),a.hij("RM ",e.discountedPrice," "),a.xp6(2),a.Oqu(e.oldPrice),a.xp6(7),a.Oqu(e.quantity),a.xp6(5),a.hij("RM ",e.totalPrice," ")}}function Hle(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"button",39),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.displayModal=!1)}),a._uU(1,"CANCEL"),a.qZA(),a.TgZ(2,"button",40),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.selectingVoucher())}),a._uU(3,"OK"),a.qZA()}}const Ble=function(){return{width:"50vw"}};let Ule=(()=>{class i{constructor(e,o,s,l,u,g){this.productService=e,this.primengConfig=o,this.firebaseService=s,this.messageService=l,this.router=u,this.authService=g,this.cartItems=[],this.items=[],this.totalPriceArr=[],this.itemCount=0,this.checkingAll=!1,this.checkingInidividual=!1,this.discountsApplied=0,this.checkbox="",this.checkboxIndividual="",this.total=0,this.check="nonactive",this.sum=0,this.quantity=1,this.count=0,this.newCheck=!1,this.vouchers=[],this.checked=!1,this.voucher0Title="",this.voucher1Title="",this.voucher2Title="",this.voucher0Min=0,this.voucher1Min=0,this.voucher2Min=0,this.feedback="",this.feedback1="",this.feedback2="",this.visible=!1,this.position="top-end",this.percentage=0,this.loaded=!1,this.displayVouchersModal=!0,this.browserRefresh=!1,this.checkIndividualStyle={visibility:"hidden"},this.firestore=new _V}onLoad(){this.loaded=!0,console.log("is window:load")}ngOnInit(){this.primengConfig.ripple=!0,this.browserRefresh=R2,console.log("refreshed?:",R2),this.firebaseService.getCart().subscribe(e=>{this.items=e,this.total=0,this.itemCount=0;for(let o=0;o<Object.keys(this.items).length;o++)this.total=this.total+this.items[o].totalPrice,this.itemCount++}),this.firebaseService.getVouchers().subscribe(e=>{this.vouchers=e,this.voucher0Title=e[0].title,this.voucher1Title=e[1].title,this.voucher2Title=e[2].title,this.voucher0Min=e[0].min,this.voucher1Min=e[1].min,this.voucher2Min=e[2].min,console.log(e)})}ngAfterViewInit(){}addQuantity(e,o,s){console.log(" addQuantity is running now!");let u,l=this.items[o].quantity;l<100&&(l++,this.quantity=l,this.items[o].quantity=this.quantity,this.items[o].totalPrice=s*l,u=this.items[o].totalPrice,this.firebaseService.updateCartPriceQuantity(e,l,u).then(()=>{console.log("Data updated successfully!"),this.function()}))}minusQuantity(e,o,s){let u,l=this.items[o].quantity;1!=l&&(l--,this.items[o].quantity=l,this.items[o].totalPrice=s*l,u=this.items[o].totalPrice,this.firebaseService.updateCartPriceQuantity(e,l,u).then(()=>{console.log("Data updated successfully!"),this.function()}))}removeItem(e){this.firebaseService.deleteCartItem(e)}clearCart(){this.showConfirm();for(let e=0;e<Object.keys(this.items).length;e++)this.firebaseService.deleteCartItem(this.items[e].id)}showConfirm(){this.messageService.clear(),this.messageService.add({key:"c",sticky:!0,severity:"warn",summary:"Are you sure?",detail:"Confirm to clear cart"})}populateCart(){this.productService.getCartItems().then(e=>{this.items=e,this.count=e.length;for(let o=0;o<this.count;o++)this.firebaseService.setCart(this.items[o])})}showModalDialog(){setTimeout(()=>{this.function()},100),this.displayModal=!0,console.log(this.displayModal)}selectVoucher(e){let o=document.getElementById(e);1==o?.classList.contains("voucherNotSelected")?(o?.classList.remove("voucherNotSelected"),o?.classList.add("voucherSelected")):(o?.classList.remove("voucherSelected"),o?.classList.add("voucherNotSelected"))}selectingVoucher(){console.log("then run this"),this.discountsApplied=0;let e=document.getElementById("cashback"),o=document.getElementById("discount"),s=document.getElementById("freeShipping"),l=e?.classList.contains("voucherSelected"),u=o?.classList.contains("voucherSelected"),g=s?.classList.contains("voucherSelected");if(1==l){this.feedback="Cashback voucher applied successfully.";let _=(this.total*(this.vouchers[0].cashback/100)).toFixed(2);this.discountsApplied+=parseFloat(_)}else this.feedback="";1==u?(this.feedback1="Discount voucher applied successfully.",console.log(this.vouchers[1].discount),this.discountsApplied+=this.vouchers[1].discount):this.feedback1="",1==g?(this.feedback2="Free Shipping voucher applied successfully.",this.discountsApplied+=5):this.feedback2="",this.displayModal=!1,(1==l||1==u||1==g)&&this.toggleToast(),this.displayVouchersModal=!1}toggleToast(){console.log("toggle toast"+this.visible),this.visible=!0}function(){console.log("run this first");var e=document.getElementById("firstVoucher"),o=document.getElementById("secondVoucher"),s=document.getElementById("thirdVoucher");let l=document.getElementById("cashback"),u=document.getElementById("discount"),g=document.getElementById("freeShipping");this.total<100?(l?.classList.remove("voucherSelected"),l?.classList.add("voucherNotSelected"),this.feedback="",e?.classList.add("disabled")):this.total<500?(u?.classList.remove("voucherSelected"),u?.classList.add("voucherNotSelected"),this.feedback1="",g?.classList.remove("voucherSelected"),g?.classList.add("voucherNotSelected"),this.feedback2="",o?.classList.add("disabled"),s?.classList.add("disabled"),console.log("blocked successfully")):(e?.classList.remove("disabled"),o?.classList.remove("disabled"),s?.classList.remove("disabled"),console.log("removed block successfully"))}goToCheckout(){1==this.authService.isLoggedIn?this.router.navigate(["/payment"]):(window.alert("Access Denied!"),this.router.navigate(["/login"]))}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(Zb),a.Y36(zn),a.Y36(Rf),a.Y36(Ws),a.Y36(er),a.Y36(qf))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-cart"]],hostBindings:function(e,o){1&e&&a.NdJ("load",function(){return o.onLoad()},!1,a.Jf7)},decls:101,vars:27,consts:[[1,"table-responsive"],[1,"table"],[1,"table-header"],[1,"product-header"],[4,"ngFor","ngForOf"],[1,"stickBottom"],[2,"float","right"],[1,"voucher-cart-container"],[1,"select-voucher"],[1,"voucherModalBtn",3,"click"],[1,"selectedVouchers",3,"hidden"],[1,"discount-container"],[1,"left-bottom-panel"],[1,"clearCart",3,"click"],[3,"click"],[2,"display","flex"],[1,"totalText"],[1,"checkoutBtn",3,"click"],["header","Voucher",3,"visible","modal","baseZIndex","draggable","resizable","visibleChange"],[1,"voucherContainer"],["id","firstVoucher",1,"voucherMain",3,"click"],[1,"voucherLeft"],[1,"voucherRight"],["id","cashback",1,"voucherNotSelected"],["id","secondVoucher",1,"voucherMain",3,"click"],["id","discount",1,"voucherNotSelected"],["id","thirdVoucher",1,"voucherMain",3,"click"],["id","freeShipping",1,"voucherNotSelected"],["pTemplate","footer"],["position","fixed",3,"placement"],[1,"toastStyle",3,"visible"],[1,"toastHeader"],[1,"product-row"],[1,"item-product"],["alt","",1,"cart-img",3,"src"],[1,"old-price"],[1,"quantity"],[1,"total-price"],[1,"del",3,"click"],[1,"cancelBtn",3,"click"],[1,"okBtn",3,"click"]],template:function(e,o){1&e&&(a._UZ(0,"app-header-normal"),a.TgZ(1,"section",0)(2,"div")(3,"h4"),a._uU(4,"Shopping Cart"),a.qZA()(),a.TgZ(5,"table",1)(6,"thead",2)(7,"tr"),a._UZ(8,"th"),a.TgZ(9,"th",3),a._uU(10,"Product"),a.qZA(),a.TgZ(11,"th"),a._uU(12,"Price"),a.qZA(),a.TgZ(13,"th"),a._uU(14,"Quantity"),a.qZA(),a.TgZ(15,"th"),a._uU(16,"Total Price"),a.qZA(),a.TgZ(17,"th"),a._uU(18,"Actions"),a.qZA()()(),a.YNc(19,Vle,26,7,"tbody",4),a.qZA(),a.TgZ(20,"div",5)(21,"div")(22,"div",6)(23,"div",7)(24,"div",8)(25,"h6"),a._uU(26,"Vouchers"),a.qZA(),a.TgZ(27,"span",9),a.NdJ("click",function(){return o.showModalDialog()}),a._uU(28,"Select voucher >"),a.qZA()(),a.TgZ(29,"div",10)(30,"p"),a._uU(31),a.qZA(),a.TgZ(32,"p"),a._uU(33),a.qZA(),a.TgZ(34,"p"),a._uU(35),a.qZA()()(),a.TgZ(36,"div",11)(37,"h6"),a._uU(38,"Discount Applied"),a.qZA(),a.TgZ(39,"p"),a._uU(40),a.qZA()()()(),a.TgZ(41,"div")(42,"div",12)(43,"button",13),a.NdJ("click",function(){return o.clearCart()}),a._uU(44,"Clear Cart"),a.qZA(),a.TgZ(45,"button",14),a.NdJ("click",function(){return o.populateCart()}),a._uU(46,"populate"),a.qZA()(),a.TgZ(47,"div",6)(48,"div",15)(49,"p"),a._uU(50),a.qZA(),a.TgZ(51,"p",16),a._uU(52),a.qZA()(),a.TgZ(53,"div",6)(54,"button",17),a.NdJ("click",function(){return o.goToCheckout()}),a._uU(55,"Checkout"),a.qZA()()()()(),a.TgZ(56,"p-dialog",18),a.NdJ("visibleChange",function(l){return o.displayModal=l}),a.TgZ(57,"div",19)(58,"div",20),a.NdJ("click",function(){return o.selectVoucher("cashback")}),a.TgZ(59,"div",21)(60,"h6"),a._uU(61),a.qZA()(),a.TgZ(62,"div",22)(63,"p"),a._uU(64),a.qZA()(),a.TgZ(65,"div")(66,"p",23),a._uU(67,"\u2714\ufe0f"),a.qZA()()(),a.TgZ(68,"div",24),a.NdJ("click",function(){return o.selectVoucher("discount")}),a.TgZ(69,"div",21)(70,"h6"),a._uU(71),a.qZA()(),a.TgZ(72,"div",22)(73,"p"),a._uU(74),a.qZA()(),a.TgZ(75,"div")(76,"p",25),a._uU(77,"\u2714\ufe0f"),a.qZA()()(),a.TgZ(78,"div",26),a.NdJ("click",function(){return o.selectVoucher("freeShipping")}),a.TgZ(79,"div",21)(80,"h6"),a._uU(81),a.qZA()(),a.TgZ(82,"div",22)(83,"p"),a._uU(84),a.qZA()(),a.TgZ(85,"div")(86,"p",27),a._uU(87,"\u2714\ufe0f"),a.qZA()()()(),a.YNc(88,Hle,4,0,"ng-template",28),a.qZA(),a.TgZ(89,"c-toaster",29)(90,"c-toast",30)(91,"c-toast-header",31),a._UZ(92,"toast-sample-icon"),a._uU(93," Success "),a.qZA(),a.TgZ(94,"c-toast-body")(95,"p"),a._uU(96),a.qZA(),a.TgZ(97,"p"),a._uU(98),a.qZA(),a.TgZ(99,"p"),a._uU(100),a.qZA()()()()()),2&e&&(a.xp6(19),a.Q6J("ngForOf",o.items),a.xp6(10),a.Q6J("hidden",o.displayVouchersModal),a.xp6(2),a.Oqu(o.feedback),a.xp6(2),a.Oqu(o.feedback1),a.xp6(2),a.Oqu(o.feedback2),a.xp6(5),a.hij("RM ",o.discountsApplied,""),a.xp6(10),a.hij("Total (",o.itemCount," items) : "),a.xp6(2),a.hij(" \xa0 RM ",o.total,""),a.xp6(4),a.Akn(a.DdM(26,Ble)),a.Q6J("visible",o.displayModal)("modal",!0)("baseZIndex",1e4)("draggable",!1)("resizable",!1),a.xp6(5),a.Oqu(o.voucher0Title),a.xp6(3),a.hij(" Mininum total of RM ",o.voucher0Min," "),a.xp6(7),a.Oqu(o.voucher1Title),a.xp6(3),a.hij(" Mininum total of RM ",o.voucher1Min," "),a.xp6(7),a.Oqu(o.voucher2Title),a.xp6(3),a.hij(" Mininum total of RM ",o.voucher2Min," "),a.xp6(5),a.Q6J("placement",o.position),a.xp6(1),a.Q6J("visible",o.visible),a.xp6(6),a.Oqu(o.feedback),a.xp6(2),a.Oqu(o.feedback1),a.xp6(2),a.Oqu(o.feedback2))},dependencies:[Ui,Ci,Fle,D0],styles:[".table-responsive[_ngcontent-%COMP%]{margin:25px 30px 0}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;padding:10px 10px 0;border-spacing:30px;text-align:center}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:1px solid #3184f9}.table-header[_ngcontent-%COMP%]{padding-bottom:15px}.cart-img[_ngcontent-%COMP%]{width:100px}.product-header[_ngcontent-%COMP%], .item-product[_ngcontent-%COMP%]{text-align:left}.product-row[_ngcontent-%COMP%]{vertical-align:middle}.product-row[_ngcontent-%COMP%]:hover{background-color:#d8f9ff}.old-price[_ngcontent-%COMP%]{text-decoration:line-through;color:#ccc;font-size:smaller}.total-price[_ngcontent-%COMP%]{color:#005de8}.del[_ngcontent-%COMP%], .clearCart[_ngcontent-%COMP%]{color:red;margin:0;cursor:pointer}.del[_ngcontent-%COMP%]:hover, .clearCart[_ngcontent-%COMP%]:hover{font-weight:500}.voucherModalBtn[_ngcontent-%COMP%]{color:#005de8;font-size:small;cursor:pointer;float:right}.select-voucher[_ngcontent-%COMP%]{display:flex;margin:15px 0}.select-voucher[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.selectedVouchers[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small}.voucher-container[_ngcontent-%COMP%]{display:flex;margin:15px 0}.voucher-container[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.discount-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.discount-container[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.discount-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500}.left-bottom-panel[_ngcontent-%COMP%]{float:left;display:flex}.left-bottom-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 10px}.checkbox-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.checkbox-border[_ngcontent-%COMP%]{border:1px solid #005DE8;height:16px;width:16px;margin-bottom:5px;border-radius:5px}.tick[_ngcontent-%COMP%]{font-size:xx-small;margin:0;visibility:hidden;cursor:default}.active[_ngcontent-%COMP%]{visibility:visible!important;background-color:#005de8;color:#fff;height:100%}.nonactive[_ngcontent-%COMP%]{visibility:hidden}.totalText[_ngcontent-%COMP%]{font-weight:700;color:red}.quantity[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.quantity[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:8px 8px 0}.quantity[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid #3184f9;border-radius:5px}.quantity[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#005de8}.quantity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0 10px;font-size:x-large;font-weight:700;color:#005de8}.quantity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#fff}.clearCart[_ngcontent-%COMP%]{border:none;background-color:#fff}.voucherContainer[_ngcontent-%COMP%], .voucher-cart-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.voucherMain[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:10px;display:flex;margin:0 30px 8px;height:80px;cursor:pointer;align-items:center}.voucherMain[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px 5px #ccccccbf;-webkit-box-shadow:0px 0px 5px 5px rgba(204,204,204,.75);-moz-box-shadow:0px 0px 5px 5px rgba(204,204,204,.75)}.voucherMain.disabled[_ngcontent-%COMP%]{background-color:#63666a;color:#63666a;pointer-events:none;cursor:none}.voucherLeft[_ngcontent-%COMP%]{background-color:#005de8;color:#f5f5f5;width:120px;height:100%!important}.voucherLeft[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{padding-top:25px;text-align:center;text-transform:uppercase;word-wrap:break-word}.voucherRight[_ngcontent-%COMP%]{padding:8px 0 0 5px;font-weight:bolder;display:flex;align-items:center}.voucherSelected[_ngcontent-%COMP%]{padding-top:5px;width:32px;height:32px}.voucherNotSelected[_ngcontent-%COMP%]{visibility:hidden}.okBtn[_ngcontent-%COMP%]{color:#f5f5f5;background-color:#005de8;margin:8px 5px;width:100px!important;height:50px;border:none;border-radius:5px}.okBtn[_ngcontent-%COMP%]:hover{font-weight:600}.cancelBtn[_ngcontent-%COMP%]{color:#63666a;border:1px solid #ccc;margin:8px 5px;width:100px!important;height:50px;border-radius:5px}.cancelBtn[_ngcontent-%COMP%]:hover{font-weight:600}.toastStyle[_ngcontent-%COMP%]{background-color:#cff;color:#006400}.toastHeader[_ngcontent-%COMP%]{background-color:green;color:#f5f5f5}.stickBottom[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:fixed;bottom:0;width:95%;border:1px solid #ccc;border-radius:5px;padding:5px 15px 1px;box-shadow:0 -1px 5px 2px #ccccccbf;-webkit-box-shadow:0px -1px 5px 2px rgba(204,204,204,.75);-moz-box-shadow:0px -1px 5px 2px rgba(204,204,204,.75)}.checkoutBtn[_ngcontent-%COMP%]{padding:5px 8px;border:1px solid #005DE8;color:#005de8;background-color:#f5f5f5;border-radius:5px;margin-bottom:10px}.checkoutBtn[_ngcontent-%COMP%]:hover{color:#f5f5f5;background-color:#005de8}"]}),i})();function jle(i,t){if(1&i&&(a.TgZ(0,"tbody")(1,"tr",39),a._UZ(2,"th"),a.TgZ(3,"td",40)(4,"div"),a._UZ(5,"img",41),a._uU(6),a.qZA()(),a.TgZ(7,"td"),a._uU(8),a.TgZ(9,"span",42),a._uU(10),a.qZA()(),a.TgZ(11,"td")(12,"div",43)(13,"span"),a._uU(14),a.qZA()()(),a.TgZ(15,"td",44),a._uU(16),a.qZA()()()),2&i){const e=t.$implicit;a.xp6(5),a.s9C("src",e.placeholderImg,a.LSH),a.xp6(1),a.AsE(" ",e.title," - ",e.variations," "),a.xp6(2),a.hij("RM ",e.discountedPrice," "),a.xp6(2),a.Oqu(e.oldPrice),a.xp6(4),a.Oqu(e.quantity),a.xp6(2),a.hij("RM ",e.totalPrice," ")}}function zle(i,t){if(1&i&&(a.TgZ(0,"div",25)(1,"div",26)(2,"h4"),a._uU(3,"Products Ordered"),a.qZA()(),a.TgZ(4,"div",27)(5,"table",28)(6,"thead",29)(7,"tr"),a._UZ(8,"th"),a.TgZ(9,"th",30),a._uU(10,"Product"),a.qZA(),a.TgZ(11,"th"),a._uU(12,"Price"),a.qZA(),a.TgZ(13,"th"),a._uU(14,"Quantity"),a.qZA(),a.TgZ(15,"th"),a._uU(16,"Total Price"),a.qZA()()(),a.YNc(17,jle,17,7,"tbody",31),a.qZA()(),a.TgZ(18,"div",32)(19,"div",33)(20,"div",34)(21,"h6"),a._uU(22,"Vouchers Selected"),a.qZA(),a.TgZ(23,"p"),a._uU(24,"No Vouchers Selected"),a.qZA()(),a._UZ(25,"div",35),a.qZA(),a.TgZ(26,"div",36)(27,"p"),a._uU(28,"Delivery fee: "),a.TgZ(29,"strong"),a._uU(30,"RM 5"),a.qZA()()(),a.TgZ(31,"div",37)(32,"p"),a._uU(33),a.qZA(),a.TgZ(34,"p",38),a._uU(35),a.qZA()()()()),2&i){const e=a.oxw();a.xp6(17),a.Q6J("ngForOf",e.items),a.xp6(16),a.hij("Total (",e.itemCount," items) : "),a.xp6(2),a.hij(" \xa0 RM ",e.total,"")}}function Gle(i,t){1&i&&(a.TgZ(0,"div",25)(1,"div",45)(2,"h4"),a._uU(3,"Receiver's Information"),a.qZA()(),a.TgZ(4,"div")(5,"div"),a._uU(6,"user profile pic"),a.qZA(),a.TgZ(7,"div")(8,"div")(9,"p"),a._uU(10,"Receiver's name: "),a.qZA()(),a.TgZ(11,"div")(12,"p"),a._uU(13,"Receiver's phone number: "),a.qZA()(),a.TgZ(14,"div")(15,"p"),a._uU(16,"Receiver's address: "),a.qZA()(),a.TgZ(17,"div")(18,"p"),a._uU(19,"Emergency contact (optional):"),a.qZA()()()()())}function qle(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",25)(1,"div",46)(2,"h4"),a._uU(3,"Payment Method"),a.qZA()(),a.TgZ(4,"div")(5,"div",47)(6,"div",48),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.credit())}),a.TgZ(7,"h4"),a._uU(8,"MERC Credit"),a.qZA(),a.TgZ(9,"p"),a._uU(10,"Bal: RM 31.54"),a.qZA(),a._UZ(11,"img",49),a.qZA(),a.TgZ(12,"div")(13,"div",50),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.creditDebit())}),a.TgZ(14,"h4"),a._uU(15,"Credit/Debit card"),a.qZA(),a._UZ(16,"img",49),a.qZA()()()()()}if(2&i){const e=a.oxw();a.xp6(11),a.Q6J("hidden",e.visibleCredit),a.xp6(5),a.Q6J("hidden",e.visibleCD)}}function Zle(i,t){if(1&i&&(a.TgZ(0,"tbody")(1,"tr",39),a._UZ(2,"th"),a.TgZ(3,"td",40)(4,"div"),a._UZ(5,"img",41),a._uU(6),a.qZA()(),a.TgZ(7,"td"),a._uU(8),a.TgZ(9,"span",42),a._uU(10),a.qZA()(),a.TgZ(11,"td")(12,"div",43)(13,"span"),a._uU(14),a.qZA()()(),a.TgZ(15,"td",44),a._uU(16),a.qZA()()()),2&i){const e=t.$implicit;a.xp6(5),a.s9C("src",e.placeholderImg,a.LSH),a.xp6(1),a.AsE(" ",e.title," - ",e.variations," "),a.xp6(2),a.hij("RM ",e.discountedPrice," "),a.xp6(2),a.Oqu(e.oldPrice),a.xp6(4),a.Oqu(e.quantity),a.xp6(2),a.hij("RM ",e.totalPrice," ")}}function $le(i,t){if(1&i&&(a.TgZ(0,"div")(1,"div",51)(2,"h4"),a._uU(3,"Confirmation"),a.qZA()(),a.TgZ(4,"div",27)(5,"table",28)(6,"thead",29)(7,"tr"),a._UZ(8,"th"),a.TgZ(9,"th",30),a._uU(10,"Product"),a.qZA(),a.TgZ(11,"th"),a._uU(12,"Price"),a.qZA(),a.TgZ(13,"th"),a._uU(14,"Quantity"),a.qZA(),a.TgZ(15,"th"),a._uU(16,"Total Price"),a.qZA()()(),a.YNc(17,Zle,17,7,"tbody",31),a.qZA()(),a._UZ(18,"hr"),a.TgZ(19,"div")(20,"div"),a._uU(21,"user profile pic"),a.qZA(),a.TgZ(22,"div")(23,"div")(24,"p"),a._uU(25,"Receiver's name: "),a.qZA()(),a.TgZ(26,"div")(27,"p"),a._uU(28,"Receiver's phone number: "),a.qZA()(),a.TgZ(29,"div")(30,"p"),a._uU(31,"Receiver's address: "),a.qZA()(),a.TgZ(32,"div")(33,"p"),a._uU(34,"Emergency contact (optional):"),a.qZA()()()(),a._UZ(35,"hr"),a.TgZ(36,"div")(37,"div")(38,"p"),a._uU(39),a.qZA()(),a.TgZ(40,"div",33)(41,"div",34)(42,"h6"),a._uU(43,"Vouchers Selected"),a.qZA(),a.TgZ(44,"p"),a._uU(45,"No Vouchers Selected"),a.qZA()(),a._UZ(46,"div",35),a.qZA(),a.TgZ(47,"div",36)(48,"p"),a._uU(49,"Delivery fee: "),a.TgZ(50,"strong"),a._uU(51,"RM 5"),a.qZA()()(),a.TgZ(52,"div",37)(53,"p"),a._uU(54),a.qZA(),a.TgZ(55,"p",38),a._uU(56),a.qZA()()()()),2&i){const e=a.oxw();a.xp6(17),a.Q6J("ngForOf",e.items),a.xp6(22),a.hij("Payment method: ",e.paymentMethod,""),a.xp6(15),a.hij("Total (",e.itemCount," items) : "),a.xp6(2),a.hij(" \xa0 RM ",e.total,"")}}function Wle(i,t){if(1&i&&(a.TgZ(0,"div")(1,"div",51),a._UZ(2,"img",52),a.TgZ(3,"h4",53),a._uU(4,"Success! Your order has been placed."),a.qZA(),a.TgZ(5,"h4",53),a._uU(6,"An error has occured. Please try again."),a.qZA()()()),2&i){const e=a.oxw();a.xp6(2),a.Q6J("hidden",e.loaderVisibility),a.xp6(1),a.Q6J("hidden",e.successMsg),a.xp6(2),a.Q6J("hidden",e.failMsg)}}let Kle=(()=>{class i{constructor(e,o,s){this.checkout=e,this.firebasecrudservice=o,this.router=s,this.paymentHandler=null,this.success=!1,this.failure=!1,this.total=0,this.itemCount=0,this.voucher1="",this.voucher2="",this.voucher3="",this.step=1,this.visibleCredit=!0,this.visibleCD=!0,this.paymentMethod="",this.toastError=!1,this.position="top-end",this.loaderVisibility=!1,this.successMsg=!0,this.failMsg=!0}ngOnInit(){this.invokeStripe(),this.firebasecrudservice.getCart().subscribe(e=>{this.items=e,this.total=5,this.itemCount=0;for(let o=0;o<Object.keys(this.items).length;o++)this.total=this.total+this.items[o].totalPrice,this.itemCount++}),this.firebasecrudservice.getSelectedVouchers().subscribe(e=>{this.selectedVoucher=e})}initializePayment(e){const o=window.StripeCheckout.configure({key:"pk_test_51KiEXBFN13hoDLby9WPZJAKOf7i92hVpeKw9EnnyStV7ZEgQqytzf8k6r7rAb0rIYuDkHyWFgO1zrN3nhQLVhi9i00rhHxNUR4",locale:"auto",token:function(l){console.log({stripeToken:l}),s(l,e)}}),s=(l,u)=>{this.checkout.makePayment(l,u).subscribe(g=>{console.log(g),"success"===g.data?(this.success=!0,this.loaderVisibility=!0,this.successMsg=!1):(this.failure=!0,this.loaderVisibility=!0,this.failMsg=!1)})};o.open({name:"FreakyJolly",description:"Buying a Hot Coffee",amount:100*e})}invokeStripe(){if(!window.document.getElementById("stripe-script")){const e=window.document.createElement("script");e.id="stripe-script",e.type="text/javascript",e.src="https://checkout.stripe.com/checkout.js",e.onload=()=>{this.paymentHandler=window.StripeCheckout.configure({key:"pk_test_51KiEXBFN13hoDLby9WPZJAKOf7i92hVpeKw9EnnyStV7ZEgQqytzf8k6r7rAb0rIYuDkHyWFgO1zrN3nhQLVhi9i00rhHxNUR4",locale:"auto",token:function(o){console.log(o),alert("Payment has been successfull!")}})},window.document.body.appendChild(e)}}cancelCheckout(){let e=document.getElementById("productsOrdered"),o=document.getElementById("receiversInfo"),s=document.getElementById("paymentMtd"),l=document.getElementById("confirmation"),g=(document.getElementById("productsOrderedCaption"),document.getElementById("receiversInfoCaption")),_=document.getElementById("paymentMtdCaption"),w=document.getElementById("confirmationCaption");document.getElementById("cancel"),document.getElementById("next"),1==this.step?this.router.navigate(["/home"]):2==this.step?(o?.classList.remove("active"),g?.classList.remove("active"),e?.classList.remove("done"),e?.classList.add("active"),this.step--):3==this.step?(s?.classList.remove("active"),_?.classList.remove("active"),o?.classList.remove("done"),o?.classList.add("active"),this.step--):4==this.step&&(l?.classList.remove("active"),w?.classList.remove("active"),s?.classList.remove("done"),s?.classList.add("active"),this.step--)}nextStep(){let e=document.getElementById("productsOrdered"),o=document.getElementById("receiversInfo"),s=document.getElementById("paymentMtd"),l=document.getElementById("confirmation"),g=(document.getElementById("productsOrderedCaption"),document.getElementById("receiversInfoCaption")),_=document.getElementById("paymentMtdCaption"),w=document.getElementById("confirmationCaption"),T=document.getElementById("cancel");document.getElementById("next"),1==this.step?(e?.classList.add("done"),o?.classList.add("active"),g?.classList.add("active"),document.querySelector("#cancel").innerHTML="Back",this.step++):2==this.step?(o?.classList.add("done"),s?.classList.add("active"),_?.classList.add("active"),this.step++):3==this.step?0==this.visibleCredit||0==this.visibleCD?(s?.classList.add("done"),l?.classList.add("active"),w?.classList.add("active"),0==this.visibleCredit?this.paymentMethod="MERC Credits":0==this.visibleCD&&(this.paymentMethod="Credit/Debit card"),this.step++):(this.toastError=!this.toastError,setTimeout(()=>{this.toastError=!this.toastError},5e3)):4==this.step?(l?.classList.add("done"),T.style.visibility="hidden",document.querySelector("#next").innerHTML="Home",this.initializePayment(this.total),this.step++):5==this.step&&this.router.navigate(["/home"])}credit(){this.visibleCredit=!this.visibleCredit,this.visibleCD=!0}creditDebit(){this.visibleCD=!this.visibleCD,this.visibleCredit=!0}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(O2),a.Y36(Rf),a.Y36(er))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-payment"]],decls:64,vars:10,consts:[[2,"display","flex","justify-content","center","margin-top","25px"],[1,"step"],[1,"step-element"],[1,"step-circle-circles"],["id","productsOrdered",1,"step-circle","active"],["id","productsOrderedCaption",1,"caption","active"],[1,"hori-container"],[1,"horizontal-line"],["id","receiversInfo",1,"step-circle"],["id","receiversInfoCaption",1,"caption"],["id","paymentMtd",1,"step-circle"],["id","paymentMtdCaption",1,"caption"],["id","confirmation",1,"step-circle"],["id","confirmationCaption",1,"caption"],[3,"ngSwitch"],[1,"step-container"],["class","step-case",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"footer-btn"],["id","cancel",1,"cancel-btn",3,"click"],["id","next",1,"next-btn",3,"click"],[3,"click"],["position","fixed",3,"placement"],[1,"toastStyle",3,"autohide","fade","visible"],[1,"toastHeader"],[1,"step-case"],[1,"products-ordered-header"],[1,"products-ordered-table"],[1,"table"],[1,"table-header"],[1,"product-header"],[4,"ngFor","ngForOf"],[1,"right-panel"],[1,"voucher-cart-container"],[1,"select-voucher"],[1,"selectedVouchers"],[1,"delivery"],[1,"total"],[1,"totalText"],[1,"product-row"],[1,"item-product"],["alt","",1,"cart-img",3,"src"],[1,"old-price"],[1,"quantity"],[1,"total-price"],[1,"receivers-information-header"],[1,"payment-method-header"],[1,"select-payment-method"],[1,"merc-credit",3,"click"],["src","../../../assets/img/tick.png","alt","tick",1,"selectedPaymentMethod",3,"hidden"],[1,"credit-debit",3,"click"],[1,"confirmation-header"],["src","../../../assets/gif/loader.gif","alt","loader",3,"hidden"],[3,"hidden"]],template:function(e,o){1&e&&(a._UZ(0,"app-header-normal"),a.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"p"),a._uU(7,"1"),a.qZA()()(),a.TgZ(8,"p",5),a._uU(9,"Products Ordered"),a.qZA()(),a.TgZ(10,"div",6),a._UZ(11,"div",7),a.qZA(),a.TgZ(12,"div",2)(13,"div",3)(14,"div",8)(15,"p"),a._uU(16,"2"),a.qZA()()(),a.TgZ(17,"div",9),a._uU(18,"Receiver's Information"),a.qZA()(),a.TgZ(19,"div",6),a._UZ(20,"div",7),a.qZA(),a.TgZ(21,"div",2)(22,"div",3)(23,"div",10)(24,"p"),a._uU(25,"3"),a.qZA()()(),a.TgZ(26,"p",11),a._uU(27,"Payment Method"),a.qZA()(),a.TgZ(28,"div",6),a._UZ(29,"div",7),a.qZA(),a.TgZ(30,"div",2)(31,"div",3)(32,"div",12)(33,"p"),a._uU(34,"4"),a.qZA()()(),a.TgZ(35,"p",13),a._uU(36,"Confirmation"),a.qZA()()()(),a.TgZ(37,"div",14)(38,"main",15),a.YNc(39,zle,36,3,"div",16),a.qZA(),a.TgZ(40,"main",15),a.YNc(41,Gle,20,0,"div",16),a.qZA(),a.TgZ(42,"main",15),a.YNc(43,qle,17,2,"div",16),a.qZA(),a.TgZ(44,"main",15),a.YNc(45,$le,57,4,"div",17),a.qZA(),a.TgZ(46,"main",15),a.YNc(47,Wle,7,3,"div",17),a.qZA()(),a.TgZ(48,"div",18)(49,"div")(50,"button",19),a.NdJ("click",function(){return o.cancelCheckout()}),a._uU(51,"Cancel"),a.qZA(),a.TgZ(52,"button",20),a.NdJ("click",function(){return o.nextStep()}),a._uU(53,"Next"),a.qZA(),a.TgZ(54,"button",21),a.NdJ("click",function(){return o.initializePayment(10)}),a._uU(55,"$10"),a.qZA()()(),a.TgZ(56,"c-toaster",22)(57,"c-toast",23)(58,"c-toast-header",24),a._UZ(59,"toast-sample-icon"),a._uU(60," Error "),a.qZA(),a.TgZ(61,"c-toast-body")(62,"p"),a._uU(63,"Payment method not selected. Please select one of the payment methods to proceed."),a.qZA()()()()),2&e&&(a.xp6(37),a.Q6J("ngSwitch",o.step),a.xp6(2),a.Q6J("ngSwitchCase","1"),a.xp6(2),a.Q6J("ngSwitchCase","2"),a.xp6(2),a.Q6J("ngSwitchCase","3"),a.xp6(2),a.Q6J("ngSwitchCase","4"),a.xp6(2),a.Q6J("ngSwitchCase","5"),a.xp6(9),a.Q6J("placement",o.position),a.xp6(1),a.Q6J("autohide",!1)("fade",!1)("visible",o.toastError))},dependencies:[Ui,Eo,zs,D0],styles:['@import"https://fonts.googleapis.com/css?family=Open+Sans:300,400,700,600";@import"https://fonts.googleapis.com/css2?family=Dosis:wght@400;500&display=swap";.step[_ngcontent-%COMP%]{display:flex;justify-content:space-between;justify-items:center}.step-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.step-case[_ngcontent-%COMP%]{width:800px;margin-bottom:20px}.step-circle-circles[_ngcontent-%COMP%]{display:flex;justify-content:center}.caption[_ngcontent-%COMP%]{color:#ccc}.caption.active[_ngcontent-%COMP%]{color:#000}.step-circle[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:50%;width:50px;height:50px}.step-circle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin:15px 0 0;color:#ccc}.step-circle.active[_ngcontent-%COMP%]{border:1px solid rgba(0,93,232,.5)}.step-circle.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000}.step-circle.active.done[_ngcontent-%COMP%]{background-color:#005de8}.step-circle.active.done[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#f5f5f5}.hori-container[_ngcontent-%COMP%]{width:100px;display:flex;justify-items:center;justify-content:center}.horizontal-line[_ngcontent-%COMP%]{transform:rotate(90deg);border:1px solid #ccc;margin-bottom:10px}.horizontal-line.active[_ngcontent-%COMP%]{border:1px solid #005DE8}.products-ordered-header[_ngcontent-%COMP%], .receivers-information[_ngcontent-%COMP%]{margin:10px 0 15px}.products-ordered-table[_ngcontent-%COMP%]{margin:10px 0 5px}.table[_ngcontent-%COMP%]{width:100%;padding:10px 10px 0;border-spacing:30px;text-align:center}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:1px solid #3184f9}.table-header[_ngcontent-%COMP%]{padding-bottom:15px}.cart-img[_ngcontent-%COMP%]{width:100px}.product-header[_ngcontent-%COMP%], .item-product[_ngcontent-%COMP%]{text-align:left}.product-row[_ngcontent-%COMP%]{vertical-align:middle}.product-row[_ngcontent-%COMP%]:hover{background-color:#d8f9ff}.old-price[_ngcontent-%COMP%]{text-decoration:line-through;color:#ccc;font-size:smaller}.total-price[_ngcontent-%COMP%]{color:#005de8}.right-panel[_ngcontent-%COMP%]{float:right}.voucher-cart-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.select-voucher[_ngcontent-%COMP%]{display:flex;margin:15px 0}.select-voucher[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:700;margin-right:15px}.selectedVouchers[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small}.total[_ngcontent-%COMP%]{display:flex}.footer-btn[_ngcontent-%COMP%]{display:flex;justify-content:center}.cancel-btn[_ngcontent-%COMP%]{border:1px solid #005DE8;border-radius:5px;background-color:#005de833;color:#005de8;margin-right:20px;padding:5px 8px}.cancel-btn[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px 3px #ccccccbf;-webkit-box-shadow:0px 0px 5px 3px rgba(204,204,204,.75);-moz-box-shadow:0px 0px 5px 3px rgba(204,204,204,.75)}.next-btn[_ngcontent-%COMP%]{border:1px solid #005DE8;border-radius:5px;background-color:#005de8;color:#f5f5f5;padding:5px 12px}.next-btn[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px 3px #ccccccbf;-webkit-box-shadow:0px 0px 5px 3px rgba(204,204,204,.75);-moz-box-shadow:0px 0px 5px 3px rgba(204,204,204,.75)}.select-payment-method[_ngcontent-%COMP%]{display:flex;justify-content:center;justify-items:center;margin-top:20px}.merc-credit[_ngcontent-%COMP%], .credit-debit[_ngcontent-%COMP%]{max-height:100px;padding:10px 20px;border:1px solid #005DE8;border-radius:5px;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-right:20px;position:relative}.merc-credit[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .credit-debit[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#005de8;margin:0}.merc-credit[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .credit-debit[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.merc-credit[_ngcontent-%COMP%]:hover, .credit-debit[_ngcontent-%COMP%]:hover{background-color:#005de8;cursor:pointer;box-shadow:0 0 5px 3px #ccccccbf;-webkit-box-shadow:0px 0px 5px 3px rgba(204,204,204,.75);-moz-box-shadow:0px 0px 5px 3px rgba(204,204,204,.75)}.merc-credit[_ngcontent-%COMP%]:hover   h4[_ngcontent-%COMP%], .credit-debit[_ngcontent-%COMP%]:hover   h4[_ngcontent-%COMP%], .merc-credit[_ngcontent-%COMP%]:hover   p[_ngcontent-%COMP%], .credit-debit[_ngcontent-%COMP%]:hover   p[_ngcontent-%COMP%]{color:#f5f5f5;margin:0}.credit-debit[_ngcontent-%COMP%]{margin:0;height:90px;position:relative}.merc-credit[_ngcontent-%COMP%]:first, .credit-debit[_ngcontent-%COMP%]:first{margin-right:20px}.credit-card[_ngcontent-%COMP%]{position:relative;max-width:260px;min-width:260px;margin:50px auto;max-height:150px;min-height:150px;border-radius:20px;display:flex;flex-direction:column;padding:24px;box-sizing:border-box;background:linear-gradient(-240deg,#fffc00,#fc00ff,#00fffc);justify-content:space-between;font-family:Dosis,sans-serif;overflow:hidden}.credit-card[_ngcontent-%COMP%]:after{content:"";position:absolute;height:100%;width:100%;left:0;top:0;z-index:0;color:#f9f9f91a;background:linear-gradient(135deg,currentColor 25%,transparent 25%) -100px 0,linear-gradient(225deg,currentColor 25%,transparent 25%) -100px 0,linear-gradient(315deg,currentColor 25%,transparent 25%),linear-gradient(45deg,currentColor 25%,transparent 25%);background-size:200px 200px}.logo[_ngcontent-%COMP%]{width:72px;display:flex;align-self:flex-end;filter:drop-shadow(1px 1px 0 #555);z-index:1}.name-and-expiry[_ngcontent-%COMP%]{display:flex;justify-content:space-between;z-index:1;color:#fff;font-size:10px;letter-spacing:3px;filter:drop-shadow(1px 0px 1px #555);text-transform:uppercase}.numbers[_ngcontent-%COMP%]{font-size:12px;letter-spacing:9px;text-align:center;color:#fff;filter:drop-shadow(1px 0px 1px #555);z-index:1}.selectedPaymentMethod[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:24px;height:24px}.toastStyle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ee4b2b}.toastHeader[_ngcontent-%COMP%]{background-color:#ee4b2b;color:#f5f5f5}']}),i})();function Yle(i,t){1&i&&(a.TgZ(0,"div")(1,"h1"),a._uU(2,"Your Payment is complete successfully"),a.qZA()())}function Jle(i,t){1&i&&(a.TgZ(0,"div")(1,"h1"),a._uU(2,"Some Error is taken place inside the payment"),a.qZA()())}let Qle=(()=>{class i{constructor(e){this.checkout=e,this.paymentHandler=null,this.success=!1,this.failure=!1}ngOnInit(){this.invokeStripe()}makePayment(e){const o=window.StripeCheckout.configure({key:"pk_test_51KiEXBFN13hoDLby9WPZJAKOf7i92hVpeKw9EnnyStV7ZEgQqytzf8k6r7rAb0rIYuDkHyWFgO1zrN3nhQLVhi9i00rhHxNUR4",locale:"auto",token:function(l){console.log(l),s(l,e)}}),s=(l,u)=>{this.checkout.makePayment(l,u).subscribe(g=>{console.log(g),"success"===g.data?this.success=!0:this.failure=!0})};o.open({name:"Coding Shiksha",description:"This is a sample pdf file",amount:100*e})}invokeStripe(){if(!window.document.getElementById("stripe-script")){const e=window.document.createElement("script");e.id="stripe-script",e.type="text/javascript",e.src="https://checkout.stripe.com/checkout.js",e.onload=()=>{this.paymentHandler=window.StripeCheckout.configure({key:"pk_test_51KiEXBFN13hoDLby9WPZJAKOf7i92hVpeKw9EnnyStV7ZEgQqytzf8k6r7rAb0rIYuDkHyWFgO1zrN3nhQLVhi9i00rhHxNUR4",locale:"auto",token:function(o){console.log(o)}})},window.document.body.appendChild(e)}}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(O2))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-test1"]],decls:6,vars:2,consts:[[3,"click"],[4,"ngIf"]],template:function(e,o){1&e&&(a.TgZ(0,"h2"),a._uU(1,"Angular Stripe Checkout Example"),a.qZA(),a.TgZ(2,"button",0),a.NdJ("click",function(){return o.makePayment(15)}),a._uU(3,"Pay With Stripe"),a.qZA(),a.YNc(4,Yle,3,0,"div",1),a.YNc(5,Jle,3,0,"div",1)),2&e&&(a.xp6(4),a.Q6J("ngIf",o.success),a.xp6(1),a.Q6J("ngIf",o.failure))},dependencies:[Ji]}),i})(),Xle=(()=>{class i{constructor(e){this.authService=e}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(qf))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(e,o){if(1&e){const s=a.EpF();a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),a._uU(4,"Reset Password"),a.qZA(),a.TgZ(5,"p",3),a._uU(6,"Please enter your email address to request a password reset."),a.qZA(),a.TgZ(7,"div",4),a._UZ(8,"input",5,6),a.qZA(),a.TgZ(10,"div",4)(11,"input",7),a.NdJ("click",function(){a.CHM(s);const u=a.MAs(9);return a.KtG(o.authService.forgotPassword(u.value))}),a.qZA()()(),a.TgZ(12,"div",8)(13,"span"),a._uU(14,"Go back to ? "),a.TgZ(15,"span",9),a._uU(16,"Log In"),a.qZA()()()()()}},dependencies:[YM]}),i})();function ece(i,t){if(1&i&&(a.TgZ(0,"div",4)(1,"p",10),a._uU(2,"We have sent a confirmation email to "),a.TgZ(3,"strong"),a._uU(4),a.qZA(),a._uU(5,"."),a.qZA(),a.TgZ(6,"p",10),a._uU(7,"Please check your email and click on the link to verfiy your email address."),a.qZA()()),2&i){const e=t.ngIf;a.xp6(4),a.Oqu(e.email)}}let tce=(()=>{class i{constructor(e,o){this.authService=e,this.route=o}ngOnInit(){}goToSignIn(){this.route.navigate(["/login"])}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(qf),a.Y36(er))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-verify-email"]],decls:16,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],[3,"click"],[1,"redirect"],[1,"text-center"]],template:function(e,o){1&e&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),a._uU(4,"Thank You for Registering"),a.qZA(),a.YNc(5,ece,8,1,"div",3),a.TgZ(6,"div",4)(7,"button",5),a.NdJ("click",function(){return o.authService.sendEmailForVerification()}),a._UZ(8,"i",6),a._uU(9," Resend Verification Email "),a.qZA()()(),a.TgZ(10,"div",7)(11,"span"),a._uU(12,"Go back to? "),a.TgZ(13,"button",8),a.NdJ("click",function(){return o.goToSignIn()}),a.TgZ(14,"span",9),a._uU(15,"Sign in"),a.qZA()()()()()()),2&e&&(a.xp6(5),a.Q6J("ngIf",o.authService.userData))},dependencies:[Ji]}),i})(),nce=(()=>{class i{constructor(){this.url="",this.lat=0,this.lng=0}ngOnInit(){}getLocation(){navigator}showError(e){let o=document.getElementById("demo");switch(e.code){case e.PERMISSION_DENIED:o.innerHTML="User denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:o.innerHTML="Location information is unavailable.";break;case e.TIMEOUT:o.innerHTML="The request to get user location timed out.";break;case e.UNKNOWN_ERROR:o.innerHTML="An unknown error occurred."}}getWeatherData(){var e=this;return(0,rt.Z)(function*(){document.getElementById("weather");try{let l=yield(yield fetch(e.url,{method:"GET"})).json();e.weatherData=l,e.temperatureDefault=l.main.temp,e.temperatureFeels=l.main.feels_like,e.temperature=(parseFloat(l.main.temp)-273.15).toFixed(2),e.temperatureFeels=(parseFloat(e.temperatureFeels)-273.15).toFixed(2)}catch{console.error("error")}})()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-test2"]],decls:10,vars:3,consts:[[3,"click"],["id","demo"],["id","weather"]],template:function(e,o){1&e&&(a.TgZ(0,"button",0),a.NdJ("click",function(){return o.getLocation()}),a._uU(1,"Get current location and weather data"),a.qZA(),a.TgZ(2,"div"),a._UZ(3,"p",1),a.TgZ(4,"p",2),a._uU(5),a.qZA(),a.TgZ(6,"p",2),a._uU(7),a.qZA(),a.TgZ(8,"p",2),a._uU(9),a.qZA()()),2&e&&(a.xp6(5),a.hij(" Temperature in Kelvin = ",o.temperatureDefault,""),a.xp6(2),a.hij(" Temperature in Degrees Celcius = ",o.temperature,""),a.xp6(2),a.hij(" Feels like = ",o.temperatureFeels,""))}}),i})();q(5945);const $S={_origin:"https://api.emailjs.com"};class K5{constructor(t){this.status=t.status,this.text=t.responseText}}const sce_sendForm=(i,t,e,o)=>{const s=o||$S._userID,l=(i=>{let t;if(t="string"==typeof i?document.querySelector(i):i,!t||"FORM"!==t.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t})(e);((i,t,e)=>{if(!i)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!e)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"})(s,i,t);const u=new FormData(l);return u.append("lib_version","3.6.2"),u.append("service_id",i),u.append("template_id",t),u.append("user_id",s),((i,t,e={})=>new Promise((o,s)=>{const l=new XMLHttpRequest;l.addEventListener("load",({target:u})=>{const g=new K5(u);200===g.status||"OK"===g.text?o(g):s(g)}),l.addEventListener("error",({target:u})=>{s(new K5(u))}),l.open("POST",$S._origin+i,!0),Object.keys(e).forEach(u=>{l.setRequestHeader(u,e[u])}),l.send(t)}))("/api/v1.0/email/send-form",u)};let ace=(()=>{class i{constructor(e){this.builder=e}ngOnInit(){}sendEmail(e){e.preventDefault(),sce_sendForm("service_gy7oluz","template_lzghp49",e.target,"G6SN62v0YaDbxTNIQ").then(o=>{document.getElementsByName("contact-form")[0].reset(),console.log(o.text)},o=>{console.log(o.text)})}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(tB))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-contact-form"]],decls:30,vars:0,consts:[[1,"container"],[1,"row"],[1,"col","align-self-center"],[1,"text-center"],["id","myForm","name","contact-form",3,"submit"],[1,"form-group"],["for","name"],["type","name","name","name","id","name","placeholder","enter your name",1,"form-control"],["name",""],["for","email"],["type","email","name","email","id","email","placeholder","enter your email",1,"form-control"],["email",""],["for","subject"],["type","text","name","subject","id","subject","placeholder","enter email subject",1,"form-control"],["subject",""],["for","message"],["id","message","name","message","rows","5",1,"form-control"],["message",""],["type","submit",1,"btn","btn-primary"]],template:function(e,o){1&e&&(a._UZ(0,"app-header-normal"),a.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),a._uU(5,"Contact Us"),a.qZA(),a.TgZ(6,"form",4),a.NdJ("submit",function(l){return o.sendEmail(l)}),a.TgZ(7,"div",5)(8,"label",6),a._uU(9,"Name"),a.qZA(),a._UZ(10,"input",7,8),a.qZA(),a.TgZ(12,"div",5)(13,"label",9),a._uU(14,"Email address"),a.qZA(),a._UZ(15,"input",10,11),a.qZA(),a.TgZ(17,"div",5)(18,"label",12),a._uU(19,"Subject"),a.qZA(),a._UZ(20,"input",13,14),a.qZA(),a.TgZ(22,"div",5)(23,"label",15),a._uU(24,"Message"),a.qZA(),a._UZ(25,"textarea",16,17),a.qZA(),a.TgZ(27,"button",18),a._uU(28,"Submit"),a.qZA()()()()(),a._UZ(29,"app-footer"))},dependencies:[qx,Hx,Qb,D0,k2],styles:[".contact-form-wrapper[_ngcontent-%COMP%]{padding:100px 0}.contact-form[_ngcontent-%COMP%]{padding:30px 40px;background-color:#fff;border-radius:12px;max-width:400px}.contact-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}.contact-form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%], .form-text-area[_ngcontent-%COMP%]{background-color:#f0f4f5;height:50px;padding-left:16px}.contact-form[_ngcontent-%COMP%]   .form-text-area[_ngcontent-%COMP%]{background-color:#f0f4f5;height:auto;padding-left:16px}.contact-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#aeb4b9;font-weight:500;opacity:1}.contact-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:-ms-input-placeholder{color:#aeb4b9;font-weight:500}.contact-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::-ms-input-placeholder{color:#aeb4b9;font-weight:500}.contact-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#f33fb0;box-shadow:inset 0 1px 1px #00000012,0 0 8px #f33fb0}.contact-form[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:500}.contact-form[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#aeb4b9;font-size:14px;text-align:center}.contact-form[_ngcontent-%COMP%]   .submit-button-wrapper[_ngcontent-%COMP%]{text-align:center}.contact-form[_ngcontent-%COMP%]   .submit-button-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;border-radius:4px;background-color:#f23292;color:#fff;text-transform:uppercase;padding:10px 60px;font-weight:500;letter-spacing:2px}.contact-form[_ngcontent-%COMP%]   .submit-button-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{background-color:#d30069}"]}),i})();const lce=function(){return["/home"]};let cce=(()=>{class i{constructor(e){this._Activatedroute=e}ngOnInit(){this._Activatedroute.paramMap.subscribe(u=>{this.item=u.get("item"),console.log("user id = "+this.item)}),document.getElementById(this.item).style.display="inline",[].push(!0),this.visibles=!0;const o=(u,g,_)=>{_?(console.log("run set visible is true"),u.classList.add("selected")):(console.log("run set visible is false"),u.classList.remove("selected")),g.setAttribute("visible",_)},s=document.querySelector("#"+this.item),l=document.querySelector("."+this.item+"-entity");o(s,l,this.visibles),s?.addEventListener("click",()=>{this.visibles=!this.visibles,o(s,l,this.visibles)})}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(vd))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-test-ar"]],decls:47,vars:2,consts:[[1,"example-container"],[1,"back"],[3,"routerLink"],["id","backBtn",1,"back-btn"],[1,"options-panel"],["id","hat1","src","https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/examples/face-tracking/assets/hat/thumbnail.png",2,"display","none"],["id","hat2","src","https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/examples/face-tracking/assets/hat2/thumbnail.png",2,"display","none"],["id","glasses1","src","https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/examples/face-tracking/assets/glasses/thumbnail.png",2,"display","none"],["id","glasses2","src","https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/examples/face-tracking/assets/glasses2/thumbnail.png",2,"display","none"],["id","earring","src","https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/examples/face-tracking/assets/earring/thumbnail.png",2,"display","none"],["id","hat","src","../../../assets/img/images/product/bucket_hat.jpeg",2,"display","none"],["id","headphone","src","../../../assets/img/models/headphone/headphone.png",2,"display","none","background-color","#fff"],["id","necklace","src","../../../assets/img/models/necklace/necklace.png",2,"display","none","background-color","#fff"],["mindar-face","","embedded","","color-space","sRGB","renderer","colorManagement: true, physicallyCorrectLights","vr-mode-ui","enabled: false","device-orientation-permission-ui","enabled: false"],["id","headModel","src","https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/examples/face-tracking/assets/sparkar/headOccluder.glb"],["id","glassesModel","src","https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/examples/face-tracking/assets/glasses/scene.gltf"],["id","glassesModel2","src","https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/examples/face-tracking/assets/glasses2/scene.gltf"],["id","hatModel","src","https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/examples/face-tracking/assets/hat/scene.gltf"],["id","hatModel2","src","https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/examples/face-tracking/assets/hat2/scene.gltf"],["id","earringModel","src","https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/examples/face-tracking/assets/earring/scene.gltf"],["id","hatModel3","src","../../../assets/img/models/bucket hat/hat.gltf"],["id","headphoneModel","src","../../../assets/img/models/headphone/scene.gltf"],["id","necklaceModel","src","../../../assets/img/models/neck/scene.gltf"],["active","false","position","0 0 0"],["mindar-face-target","anchorIndex: 168"],["mindar-face-occluder","","position","0 -0.3 0.15","rotation","0 0 0","scale","0.065 0.065 0.065","src","#headModel"],["mindar-face-target","anchorIndex: 10"],["rotation","0 -0 0","position","0 1.0 -0.5","scale","0.35 0.35 0.35","src","#hatModel","visible","false",1,"hat1-entity"],["rotation","0 -0 0","position","0 -0.2 -0.5","scale","0.008 0.008 0.008","src","#hatModel2","visible","false",1,"hat2-entity"],["rotation","0 -0 0","position","0 0 0","scale","0.01 0.01 0.01","src","#glassesModel","visible","false",1,"glasses1-entity"],["rotation","0 -90 0","position","0 -0.3 0","scale","0.6 0.6 0.6","src","#glassesModel2","visible","false",1,"glasses2-entity"],["mindar-face-target","anchorIndex: 127"],["rotation","-0.1 -0 0","position","0 -0.3 -0.3","scale","0.05 0.05 0.05","src","#earringModel","visible","false",1,"earring-entity"],["mindar-face-target","anchorIndex: 356"],["rotation","0.1 -0 0","position","0 -0.3 -0.3","scale","0.05 0.05 0.05","src","#earringModel","visible","false",1,"earring-entity"],["rotation","0 -0 0","position","0.035 -1 -0.7","scale","0.007 0.0075 0.008","src","#hatModel3","visible","false",1,"hat-entity"],["rotation","0 -90 0","position","0 -0.01 -0.4","scale","0.25 0.25 0.25","src","#headphoneModel","visible","false",1,"headphone-entity"],["rotation","0 0 0","position","0.1 -1.9 -1","scale","0.003 0.003 0.003","src","#necklaceModel","visible","false",1,"necklace-entity"]],template:function(e,o){1&e&&(a.TgZ(0,"body")(1,"div",0)(2,"div",1)(3,"a",2)(4,"button",3),a._uU(5,"\u2b05\ufe0f Back"),a.qZA()()(),a.TgZ(6,"div",4),a._UZ(7,"img",5)(8,"img",6)(9,"img",7)(10,"img",8)(11,"img",9)(12,"img",10)(13,"img",11)(14,"img",12),a.qZA(),a.TgZ(15,"a-scene",13)(16,"a-assets"),a._UZ(17,"a-asset-item",14)(18,"a-asset-item",15)(19,"a-asset-item",16)(20,"a-asset-item",17)(21,"a-asset-item",18)(22,"a-asset-item",19)(23,"a-asset-item",20)(24,"a-asset-item",21)(25,"a-asset-item",22),a.qZA(),a._UZ(26,"a-camera",23),a.TgZ(27,"a-entity",24),a._UZ(28,"a-gltf-model",25),a.qZA(),a.TgZ(29,"a-entity",26),a._UZ(30,"a-gltf-model",27),a.qZA(),a.TgZ(31,"a-entity",26),a._UZ(32,"a-gltf-model",28),a.qZA(),a.TgZ(33,"a-entity",24),a._UZ(34,"a-gltf-model",29),a.qZA(),a.TgZ(35,"a-entity",24),a._UZ(36,"a-gltf-model",30),a.qZA(),a.TgZ(37,"a-entity",31),a._UZ(38,"a-gltf-model",32),a.qZA(),a.TgZ(39,"a-entity",33),a._UZ(40,"a-gltf-model",34),a.qZA(),a.TgZ(41,"a-entity",26),a._UZ(42,"a-gltf-model",35),a.qZA(),a.TgZ(43,"a-entity",26),a._UZ(44,"a-gltf-model",36),a.qZA(),a.TgZ(45,"a-entity",26),a._UZ(46,"a-gltf-model",37),a.qZA()()()()),2&e&&(a.xp6(3),a.Q6J("routerLink",a.DdM(1,lce)))},dependencies:[Vx],styles:[".example-container[_ngcontent-%COMP%]{overflow:hidden;position:absolute;width:100%;height:100%}.options-panel[_ngcontent-%COMP%]{position:fixed;right:0;top:0;z-index:2;padding-right:10px;padding-top:10px}.options-panel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:solid 2px;width:50px;height:50px;object-fit:cover;cursor:pointer}.options-panel[_ngcontent-%COMP%]   img.selected[_ngcontent-%COMP%]{border-color:green}.back[_ngcontent-%COMP%]{position:absolute;left:0;top:0;z-index:2;margin:10px 0 0 10px;cursor:pointer}.back-btn[_ngcontent-%COMP%]{font-size:large;cursor:pointer}"]}),i})();function uce(i,t){1&i&&(a.TgZ(0,"h5"),a._uU(1,"Basic"),a.qZA())}function dce(i,t){if(1&i&&(a.TgZ(0,"div",5)(1,"div",6)(2,"div",7),a._UZ(3,"img",8),a.TgZ(4,"h4",9),a._uU(5),a.qZA(),a.TgZ(6,"div",10)(7,"h6",11),a._uU(8),a.qZA()()()()()),2&i){const e=t.$implicit;a.xp6(3),a.s9C("src",e.image,a.LSH),a.xp6(2),a.Oqu(e.name),a.xp6(3),a.hij("RM ",e.oldPrice,"")}}function hce(i,t){1&i&&(a.TgZ(0,"h5"),a._uU(1,"Circular, AutoPlay, 3 Items per Page and Scroll by 1"),a.qZA())}function pce(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",5)(1,"div",6),a._UZ(2,"div",12),a.TgZ(3,"div",13),a.NdJ("click",function(){const l=a.CHM(e).$implicit,u=a.oxw();return a.KtG(u.initiateAR(l.id))}),a._UZ(4,"img",8),a.TgZ(5,"h4",9),a._uU(6),a.qZA(),a.TgZ(7,"div",10)(8,"h6",11),a._uU(9),a.qZA()()()()()}if(2&i){const e=t.$implicit;a.xp6(4),a.s9C("src",e.image,a.LSH),a.xp6(2),a.Oqu(e.name),a.xp6(3),a.hij("RM ",e.oldPrice,"")}}function fce(i,t){1&i&&(a.TgZ(0,"h5"),a._uU(1,"Vertical"),a.qZA())}function gce(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",5)(1,"div",6),a._UZ(2,"div",12),a.TgZ(3,"div",13),a.NdJ("click",function(){const l=a.CHM(e).$implicit,u=a.oxw();return a.KtG(u.initiateAR(l.id))}),a._UZ(4,"img",8),a.TgZ(5,"h4",9),a._uU(6),a.qZA(),a.TgZ(7,"h6",11),a._uU(8),a.qZA()()()()}if(2&i){const e=t.$implicit,o=a.oxw();a.xp6(4),a.s9C("src",e.image,a.LSH),a.xp6(2),a.Oqu(e.name),a.xp6(2),a.hij("$",o.test,"")}}const mce=function(){return{"max-width":"400px","margin-top":"2em"}};let _ce=(()=>{class i{constructor(e){this.router=e,this.test="24",this.products=[{id:0,image:"https://i5.walmartimages.com/asr/d9c259ca-bcda-48ab-aab1-b334ce0c6021_1.59243493546490ec8e379b64a36566ef.jpeg?odnHeight=612&odnWidth=612&odnBg=FFFFFF",name:"White Bucket Hat",oldPrice:30,newPrice:20,rating:5,numReviews:"1K"},{id:1,image:"../../../assets/img/models/clown-hat/clown_hat.png",name:"Clown Hat",oldPrice:39,newPrice:50,rating:4,numReviews:"200"},{id:2,image:"../../../assets/img/models/earing/earing.png",name:"Earring",oldPrice:85,newPrice:75,rating:4,numReviews:"150"},{id:3,image:"../../../assets/img/models/glasses/glasses.png",name:"Swagg Glasses",oldPrice:20,newPrice:13,rating:4,numReviews:"538"},{id:4,image:"../../../assets/img/models/headphone/headphone.png",name:"Headphones",oldPrice:160,newPrice:125,rating:5,numReviews:"1.7k"},{id:5,image:"../../../assets/img/models/necklace/necklace.png",name:"Necklace",oldPrice:90,newPrice:80,rating:5,numReviews:"727"}],this.responsiveOptions=[{breakpoint:"1024px",numVisible:3,numScroll:3},{breakpoint:"768px",numVisible:2,numScroll:2},{breakpoint:"560px",numVisible:1,numScroll:1}]}ngOnInit(){}initiateAR(e){let o;0==e?o="hat":1==e?o="hat1":2==e?o="earring":3==e?o="glasses1":4==e?o="headphone":5==e&&(o="necklace"),window.open("../../../ar.html?item="+o,"_blank")}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(er))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-test-carousel"]],decls:9,vars:17,consts:[[3,"value","numVisible","numScroll","circular","responsiveOptions"],["pTemplate","header"],["pTemplate","item"],["styleClass","custom-carousel",3,"value","numVisible","numScroll","circular","autoplayInterval","responsiveOptions"],["orientation","vertical","verticalViewPortHeight","250px",3,"value","numVisible","numScroll"],[1,"product-item"],[1,"product-item-content"],[1,"item-container"],["alt","productImage",1,"productImage",3,"src"],[1,"p-mb-1"],[1,"price-ar"],[1,"p-mt-0","p-mb-3"],[1,"p-mb-3"],[1,"item-container",3,"click"]],template:function(e,o){1&e&&(a.TgZ(0,"p-carousel",0),a.YNc(1,uce,2,0,"ng-template",1),a.YNc(2,dce,9,3,"ng-template",2),a.qZA(),a.TgZ(3,"p-carousel",3),a.YNc(4,hce,2,0,"ng-template",1),a.YNc(5,pce,10,3,"ng-template",2),a.qZA(),a.TgZ(6,"p-carousel",4),a.YNc(7,fce,2,0,"ng-template",1),a.YNc(8,gce,9,3,"ng-template",2),a.qZA()),2&e&&(a.Q6J("value",o.products)("numVisible",3)("numScroll",3)("circular",!1)("responsiveOptions",o.responsiveOptions),a.xp6(3),a.Q6J("value",o.products)("numVisible",3)("numScroll",1)("circular",!0)("autoplayInterval",3e3)("responsiveOptions",o.responsiveOptions),a.xp6(3),a.Akn(a.DdM(16,mce)),a.Q6J("value",o.products)("numVisible",1)("numScroll",1))},dependencies:[A2,Ci],styles:[".productImage[_ngcontent-%COMP%]{width:200px;height:200px}.item-container[_ngcontent-%COMP%]{border:1px solid #ccc}.item-container[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ccc}.item-container[_ngcontent-%COMP%]{padding:10px 15px}.price-ar[_ngcontent-%COMP%]{width:100%;display:flex;justify-items:end;justify-content:end}"]}),i})(),J5=(()=>{class i{constructor(e,o){this.authService=e,this.router=o}canActivate(e,o){return 1==this.authService.isLoggedIn||(window.alert("Access Denied!"),this.router.navigate(["login"]),!1)}canActivateChild(e,o){return!0}canDeactivate(e,o,s,l){return!0}canLoad(e,o){return!0}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(qf),a.LFG(er))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const yce=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"login",component:Qee},{path:"user-profile",component:B5,canActivate:[J5]},{path:"register",component:tte},{path:"faq",component:ose},{path:"home",component:G5},{path:"home/:userid",component:G5},{path:"categories",component:Xse},{path:"test",component:sae},{path:"product_details/:id/:type",component:lle},{path:"cart",component:Ule},{path:"payment",component:Kle},{path:"test1",component:Qle},{path:"user",component:B5},{path:"forgot-password",component:Xle},{path:"verify-email",component:tce},{path:"test2",component:nce},{path:"contact",component:ace},{path:"testAR/:item",component:cce},{path:"testCarousel",component:_ce},{path:"ar",component:z5}];let R2=!1,Q5=(()=>{class i{constructor(e){this.router=e,this.subscription=e.events.subscribe(o=>{o instanceof LM&&(R2=!e.navigated)})}ngOnDestroy(){this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(er))},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn,z3.forRoot(yce),z3]}),i})(),vce=(()=>{class i{constructor(){this.ticketInformation={personalInformation:{firstname:"",lastname:"",age:null},seatInformation:{class:null,wagon:null,seat:null},paymentInformation:{cardholderName:"",cardholderNumber:"",date:"",cvv:"",remember:!1}},this.paymentComplete=new Ft.x,this.paymentComplete$=this.paymentComplete.asObservable()}getTicketInformation(){return this.ticketInformation}setTicketInformation(e){this.ticketInformation=e}complete(){this.paymentComplete.next(this.ticketInformation.personalInformation)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})(),bce=(()=>{class i{constructor(e,o){this.authService=e,this.router=o}canActivate(e,o){return this.authService.isLoggedIn&&(window.alert("Access denied!"),this.router.navigate(["user-profile"])),!0}canActivateChild(e,o){return!0}canDeactivate(e,o,s,l){return!0}canLoad(e,o){return!0}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(qf),a.LFG(er))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const wce=new a.OlP("cdk-dir-doc",{providedIn:"root",factory:function Cce(){return(0,a.f3M)(ve)}}),Tce=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let F2,P2=(()=>{class i{constructor(e){if(this.value="ltr",this.change=new a.vpe,e){const s=e.documentElement?e.documentElement.dir:null;this.value=function Ece(i){const t=i?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?Tce.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||s||"ltr")}}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(wce,8))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),WS=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({}),i})();function jk(i){return Array.isArray(i)?i:[i]}function Is(i){return null==i?"":"string"==typeof i?i:`${i}px`}try{F2=typeof Intl<"u"&&Intl.v8BreakIterator}catch{F2=!1}let M0,Qh=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?xo(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!F2)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(a.Lbi))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Dce(){if(null==M0){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return M0=!1,M0;if("scrollBehavior"in document.documentElement.style)M0=!0;else{const i=Element.prototype.scrollTo;M0=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return M0}function Yy(i){return i.composedPath?i.composedPath()[0]:i.target}function V2(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var iz=q(4408);const JS={schedule(i){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:o}=JS;o&&(t=o.requestAnimationFrame,e=o.cancelAnimationFrame);const s=t(l=>{e=void 0,i(l)});return new h1.w0(()=>e?.(s))},requestAnimationFrame(...i){const{delegate:t}=JS;return(t?.requestAnimationFrame||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:t}=JS;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...i)},delegate:void 0};var rz=q(7565);new class kce extends rz.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:o}=this;let s;t=t||o.shift();do{if(s=t.execute(t.state,t.delay))break}while((t=o[0])&&t.id===e&&o.shift());if(this._active=!1,s){for(;(t=o[0])&&t.id===e&&o.shift();)t.unsubscribe();throw s}}}(class Ace extends iz.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,o=0){return null!==o&&o>0?super.requestAsyncId(t,e,o):(t.actions.push(this),t._scheduled||(t._scheduled=JS.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,o=0){if(null!=o&&o>0||null==o&&this.delay>0)return super.recycleAsyncId(t,e,o);t.actions.some(s=>s.id===e)||(JS.cancelAnimationFrame(e),t._scheduled=void 0)}});let H2,Rce=1;const Gk={};function oz(i){return i in Gk&&(delete Gk[i],!0)}const Pce={setImmediate(i){const t=Rce++;return Gk[t]=!0,H2||(H2=Promise.resolve()),H2.then(()=>oz(t)&&i()),t},clearImmediate(i){oz(i)}},{setImmediate:Nce,clearImmediate:Fce}=Pce,qk={setImmediate(...i){const{delegate:t}=qk;return(t?.setImmediate||Nce)(...i)},clearImmediate(i){const{delegate:t}=qk;return(t?.clearImmediate||Fce)(i)},delegate:void 0};new class Vce extends rz.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:o}=this;let s;t=t||o.shift();do{if(s=t.execute(t.state,t.delay))break}while((t=o[0])&&t.id===e&&o.shift());if(this._active=!1,s){for(;(t=o[0])&&t.id===e&&o.shift();)t.unsubscribe();throw s}}}(class Lce extends iz.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,o=0){return null!==o&&o>0?super.requestAsyncId(t,e,o):(t.actions.push(this),t._scheduled||(t._scheduled=qk.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,o=0){if(null!=o&&o>0||null==o&&this.delay>0)return super.recycleAsyncId(t,e,o);t.actions.some(s=>s.id===e)||(qk.clearImmediate(e),t._scheduled=void 0)}});function sz(i,t=T1.z){return function Bce(i){return(0,Zo.e)((t,e)=>{let o=!1,s=null,l=null,u=!1;const g=()=>{if(l?.unsubscribe(),l=null,o){o=!1;const w=s;s=null,e.next(w)}u&&e.complete()},_=()=>{l=null,u&&e.complete()};t.subscribe((0,Sr.x)(e,w=>{o=!0,s=w,l||(0,yd.Xf)(i(w)).subscribe(l=(0,Sr.x)(e,g,_))},()=>{u=!0,(!o||!l||l.closed)&&e.complete()}))})}(()=>xk(i,t))}let jce=(()=>{class i{constructor(e,o,s){this._ngZone=e,this._platform=o,this._scrolled=new Ft.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const o=this.scrollContainers.get(e);o&&(o.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Ie.y(o=>{this._globalSubscription||this._addGlobalListener();const s=e>0?this._scrolled.pipe(sz(e)).subscribe(o):this._scrolled.subscribe(o);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):fn()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,o)=>this.deregister(o)),this._scrolled.complete()}ancestorScrolled(e,o){const s=this.getAncestorScrollContainers(e);return this.scrolled(o).pipe(Yr(l=>!l||s.indexOf(l)>-1))}getAncestorScrollContainers(e){const o=[];return this.scrollContainers.forEach((s,l)=>{this._scrollableContainsElement(l,e)&&o.push(l)}),o}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,o){let s=function I0(i){return i instanceof a.SBq?i.nativeElement:i}(o),l=e.getElementRef().nativeElement;do{if(s==l)return!0}while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Us(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(a.R0b),a.LFG(Qh),a.LFG(ve,8))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Zk=(()=>{class i{constructor(e,o,s){this._platform=e,this._change=new Ft.x,this._changeListener=l=>{this._change.next(l)},this._document=s,o.runOutsideAngular(()=>{if(e.isBrowser){const l=this._getWindow();l.addEventListener("resize",this._changeListener),l.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:o,height:s}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+s,right:e.left+o,height:s,width:o}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,o=this._getWindow(),s=e.documentElement,l=s.getBoundingClientRect();return{top:-l.top||e.body.scrollTop||o.scrollY||s.scrollTop||0,left:-l.left||e.body.scrollLeft||o.scrollX||s.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(sz(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Qh),a.LFG(a.R0b),a.LFG(ve,8))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),K1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({}),i})(),B2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[WS,K1,WS,K1]}),i})(),rue=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[B2]}),i})(),fz=(()=>{class i{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Q2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[fz]}),i})();const gz=new Set;let X1,gue=(()=>{class i{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):_ue}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function mue(i){if(!gz.has(i))try{X1||(X1=document.createElement("style"),X1.setAttribute("type","text/css"),document.head.appendChild(X1)),X1.sheet&&(X1.sheet.insertRule(`@media ${i} {body{ }}`,0),gz.add(i))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Qh))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function _ue(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let yue=(()=>{class i{constructor(e,o){this._mediaMatcher=e,this._zone=o,this._queries=new Map,this._destroySubject=new Ft.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return mz(jk(e)).some(s=>this._registerQuery(s).mql.matches)}observe(e){let l=Ex(mz(jk(e)).map(u=>this._registerQuery(u).observable));return l=c1(l.pipe(bo(1)),l.pipe(function e2(i){return Yr((t,e)=>i<=e)}(1),TN(0))),l.pipe((0,pt.U)(u=>{const g={matches:!1,breakpoints:{}};return u.forEach(({matches:_,query:w})=>{g.matches=g.matches||_,g.breakpoints[w]=_}),g}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const o=this._mediaMatcher.matchMedia(e),l={observable:new Ie.y(u=>{const g=_=>this._zone.run(()=>u.next(_));return o.addListener(g),()=>{o.removeListener(g)}}).pipe(Pf(o),(0,pt.U)(({matches:u})=>({query:e,matches:u})),Vr(this._destroySubject)),mql:o};return this._queries.set(e,l),l}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(gue),a.LFG(a.R0b))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function mz(i){return i.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}const Tz="cdk-high-contrast-black-on-white",Ez="cdk-high-contrast-white-on-black",X2="cdk-high-contrast-active";let xz=(()=>{class i{constructor(e,o){this._platform=e,this._document=o,this._breakpointSubscription=(0,a.f3M)(yue).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const o=this._document.defaultView||window,s=o&&o.getComputedStyle?o.getComputedStyle(e):null,l=(s&&s.backgroundColor||"").replace(/ /g,"");switch(e.remove(),l){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(X2,Tz,Ez),this._hasCheckedHighContrastMode=!0;const o=this.getHighContrastMode();1===o?e.add(X2,Tz):2===o&&e.add(X2,Ez)}}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Qh),a.LFG(ve))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Oue=(()=>{class i{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(xz))},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[Q2]}),i})();const Fue=new a.OlP("mat-sanity-checks",{providedIn:"root",factory:function Nue(){return!0}});let _r=(()=>{class i{constructor(e,o,s){this._sanityChecks=o,this._document=s,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!V2()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(xz),a.LFG(Fue,8),a.LFG(ve))},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[WS,WS]}),i})(),jue=(()=>{class i{isErrorState(e,o){return!!(e&&e.invalid&&(e.touched||o&&o.submitted))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),iO=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[_r,_r]}),i})(),Wue=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[_r]}),i})(),rO=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[iO,jn,_r,Wue]}),i})(),fde=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[rue,_r,_r]}),i})(),tL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[iO,_r,_r]}),i})();class nL{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class mde extends nL{constructor(t,e,o,s){super(),this.component=t,this.viewContainerRef=e,this.injector=o,this.componentFactoryResolver=s}}class Lz extends nL{constructor(t,e,o,s){super(),this.templateRef=t,this.viewContainerRef=e,this.context=o,this.injector=s}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class _de extends nL{constructor(t){super(),this.element=t instanceof a.SBq?t.nativeElement:t}}class vde extends class yde{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof mde?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Lz?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof _de?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(t,e,o,s,l){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=o,this._defaultInjector=s,this.attachDomPortal=u=>{const g=u.element,_=this._document.createComment("dom-portal");g.parentNode.insertBefore(_,g),this.outletElement.appendChild(g),this._attachedPortal=u,super.setDisposeFn(()=>{_.parentNode&&_.parentNode.replaceChild(g,_)})},this._document=l}attachComponentPortal(t){const o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let s;return t.viewContainerRef?(s=t.viewContainerRef.createComponent(o,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>s.destroy())):(s=o.create(t.injector||this._defaultInjector||a.zs3.NULL),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(s.hostView),s.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(s)),this._attachedPortal=t,s}attachTemplatePortal(t){let e=t.viewContainerRef,o=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return o.rootNodes.forEach(s=>this.outletElement.appendChild(s)),o.detectChanges(),this.setDisposeFn(()=>{let s=e.indexOf(o);-1!==s&&e.remove(s)}),this._attachedPortal=t,o}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let bde=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({}),i})();const Vz=Dce();class wde{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Is(-this._previousScrollPosition.left),t.style.top=Is(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,o=t.style,s=this._document.body.style,l=o.scrollBehavior||"",u=s.scrollBehavior||"";this._isEnabled=!1,o.left=this._previousHTMLStyles.left,o.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Vz&&(o.scrollBehavior=s.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Vz&&(o.scrollBehavior=l,s.scrollBehavior=u)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,o=this._viewportRuler.getViewportSize();return e.scrollHeight>o.height||e.scrollWidth>o.width}}class Cde{constructor(t,e,o,s){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=o,this._config=s,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Hz{enable(){}disable(){}attach(){}}function iL(i,t){return t.some(e=>i.bottom<e.top||i.top>e.bottom||i.right<e.left||i.left>e.right)}function Bz(i,t){return t.some(e=>i.top<e.top||i.bottom>e.bottom||i.left<e.left||i.right>e.right)}class Tde{constructor(t,e,o,s){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=o,this._config=s,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:o,height:s}=this._viewportRuler.getViewportSize();iL(e,[{width:o,height:s,bottom:s,right:o,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Ede=(()=>{class i{constructor(e,o,s,l){this._scrollDispatcher=e,this._viewportRuler=o,this._ngZone=s,this.noop=()=>new Hz,this.close=u=>new Cde(this._scrollDispatcher,this._ngZone,this._viewportRuler,u),this.block=()=>new wde(this._viewportRuler,this._document),this.reposition=u=>new Tde(this._scrollDispatcher,this._viewportRuler,this._ngZone,u),this._document=l}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(jce),a.LFG(Zk),a.LFG(a.R0b),a.LFG(ve))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Uz{constructor(t){if(this.scrollStrategy=new Hz,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const o of e)void 0!==t[o]&&(this[o]=t[o])}}}class xde{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let jz=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const o=this._attachedOverlays.indexOf(e);o>-1&&this._attachedOverlays.splice(o,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(ve))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Sde=(()=>{class i extends jz{constructor(e,o){super(e),this._ngZone=o,this._keydownListener=s=>{const l=this._attachedOverlays;for(let u=l.length-1;u>-1;u--)if(l[u]._keydownEvents.observers.length>0){const g=l[u]._keydownEvents;this._ngZone?this._ngZone.run(()=>g.next(s)):g.next(s);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(ve),a.LFG(a.R0b,8))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Dde=(()=>{class i extends jz{constructor(e,o,s){super(e),this._platform=o,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=l=>{this._pointerDownEventTarget=Yy(l)},this._clickListener=l=>{const u=Yy(l),g="click"===l.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:u;this._pointerDownEventTarget=null;const _=this._attachedOverlays.slice();for(let w=_.length-1;w>-1;w--){const T=_[w];if(T._outsidePointerEvents.observers.length<1||!T.hasAttached())continue;if(T.overlayElement.contains(u)||T.overlayElement.contains(g))break;const D=T._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>D.next(l)):D.next(l)}}}add(e){if(super.add(e),!this._isAttached){const o=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(o)):this._addEventListeners(o),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=o.style.cursor,o.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(ve),a.LFG(Qh),a.LFG(a.R0b,8))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),zz=(()=>{class i{constructor(e,o){this._platform=o,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||V2()){const s=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let l=0;l<s.length;l++)s[l].remove()}const o=this._document.createElement("div");o.classList.add(e),V2()?o.setAttribute("platform","test"):this._platform.isBrowser||o.setAttribute("platform","server"),this._document.body.appendChild(o),this._containerElement=o}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(ve),a.LFG(Qh))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Ide{constructor(t,e,o,s,l,u,g,_,w,T=!1){this._portalOutlet=t,this._host=e,this._pane=o,this._config=s,this._ngZone=l,this._keyboardDispatcher=u,this._document=g,this._location=_,this._outsideClickDispatcher=w,this._animationsDisabled=T,this._backdropElement=null,this._backdropClick=new Ft.x,this._attachments=new Ft.x,this._detachments=new Ft.x,this._locationChanges=h1.w0.EMPTY,this._backdropClickHandler=D=>this._backdropClick.next(D),this._backdropTransitionendHandler=D=>{this._disposeBackdrop(D.target)},this._keydownEvents=new Ft.x,this._outsidePointerEvents=new Ft.x,s.scrollStrategy&&(this._scrollStrategy=s.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=s.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(bo(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Is(this._config.width),t.height=Is(this._config.height),t.minWidth=Is(this._config.minWidth),t.minHeight=Is(this._config.minHeight),t.maxWidth=Is(this._config.maxWidth),t.maxHeight=Is(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,o){const s=jk(e||[]).filter(l=>!!l);s.length&&(o?t.classList.add(...s):t.classList.remove(...s))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Vr((0,Fy.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Gz="cdk-overlay-connected-position-bounding-box",Mde=/([A-Za-z%]+)$/;class Ade{constructor(t,e,o,s,l){this._viewportRuler=e,this._document=o,this._platform=s,this._overlayContainer=l,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ft.x,this._resizeSubscription=h1.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(Gz),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,o=this._viewportRect,s=this._containerRect,l=[];let u;for(let g of this._preferredPositions){let _=this._getOriginPoint(t,s,g),w=this._getOverlayPoint(_,e,g),T=this._getOverlayFit(w,e,o,g);if(T.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(g,_);this._canFitWithFlexibleDimensions(T,w,o)?l.push({position:g,origin:_,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(_,g)}):(!u||u.overlayFit.visibleArea<T.visibleArea)&&(u={overlayFit:T,overlayPoint:w,originPoint:_,position:g,overlayRect:e})}if(l.length){let g=null,_=-1;for(const w of l){const T=w.boundingBoxRect.width*w.boundingBoxRect.height*(w.position.weight||1);T>_&&(_=T,g=w)}return this._isPushed=!1,void this._applyPosition(g.position,g.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(u.position,u.originPoint);this._applyPosition(u.position,u.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&A0(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Gz),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,o){let s,l;if("center"==o.originX)s=t.left+t.width/2;else{const u=this._isRtl()?t.right:t.left,g=this._isRtl()?t.left:t.right;s="start"==o.originX?u:g}return e.left<0&&(s-=e.left),l="center"==o.originY?t.top+t.height/2:"top"==o.originY?t.top:t.bottom,e.top<0&&(l-=e.top),{x:s,y:l}}_getOverlayPoint(t,e,o){let s,l;return s="center"==o.overlayX?-e.width/2:"start"===o.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,l="center"==o.overlayY?-e.height/2:"top"==o.overlayY?0:-e.height,{x:t.x+s,y:t.y+l}}_getOverlayFit(t,e,o,s){const l=Zz(e);let{x:u,y:g}=t,_=this._getOffset(s,"x"),w=this._getOffset(s,"y");_&&(u+=_),w&&(g+=w);let O=0-g,F=g+l.height-o.height,j=this._subtractOverflows(l.width,0-u,u+l.width-o.width),Q=this._subtractOverflows(l.height,O,F),ae=j*Q;return{visibleArea:ae,isCompletelyWithinViewport:l.width*l.height===ae,fitsInViewportVertically:Q===l.height,fitsInViewportHorizontally:j==l.width}}_canFitWithFlexibleDimensions(t,e,o){if(this._hasFlexibleDimensions){const s=o.bottom-e.y,l=o.right-e.x,u=qz(this._overlayRef.getConfig().minHeight),g=qz(this._overlayRef.getConfig().minWidth),w=t.fitsInViewportHorizontally||null!=g&&g<=l;return(t.fitsInViewportVertically||null!=u&&u<=s)&&w}return!1}_pushOverlayOnScreen(t,e,o){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const s=Zz(e),l=this._viewportRect,u=Math.max(t.x+s.width-l.width,0),g=Math.max(t.y+s.height-l.height,0),_=Math.max(l.top-o.top-t.y,0),w=Math.max(l.left-o.left-t.x,0);let T=0,D=0;return T=s.width<=l.width?w||-u:t.x<this._viewportMargin?l.left-o.left-t.x:0,D=s.height<=l.height?_||-g:t.y<this._viewportMargin?l.top-o.top-t.y:0,this._previousPushAmount={x:T,y:D},{x:t.x+T,y:t.y+D}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const o=this._getScrollVisibility(),s=new xde(t,o);this._positionChanges.next(s)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let o,s=t.overlayY;o="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let l=0;l<e.length;l++)e[l].style.transformOrigin=`${o} ${s}`}_calculateBoundingBoxRect(t,e){const o=this._viewportRect,s=this._isRtl();let l,u,g,T,D,O;if("top"===e.overlayY)u=t.y,l=o.height-u+this._viewportMargin;else if("bottom"===e.overlayY)g=o.height-t.y+2*this._viewportMargin,l=o.height-g+this._viewportMargin;else{const F=Math.min(o.bottom-t.y+o.top,t.y),j=this._lastBoundingBoxSize.height;l=2*F,u=t.y-F,l>j&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.y-j/2)}if("end"===e.overlayX&&!s||"start"===e.overlayX&&s)O=o.width-t.x+this._viewportMargin,T=t.x-this._viewportMargin;else if("start"===e.overlayX&&!s||"end"===e.overlayX&&s)D=t.x,T=o.right-t.x;else{const F=Math.min(o.right-t.x+o.left,t.x),j=this._lastBoundingBoxSize.width;T=2*F,D=t.x-F,T>j&&!this._isInitialRender&&!this._growAfterOpen&&(D=t.x-j/2)}return{top:u,left:D,bottom:g,right:O,width:T,height:l}}_setBoundingBoxStyles(t,e){const o=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(o.height=Math.min(o.height,this._lastBoundingBoxSize.height),o.width=Math.min(o.width,this._lastBoundingBoxSize.width));const s={};if(this._hasExactPosition())s.top=s.left="0",s.bottom=s.right=s.maxHeight=s.maxWidth="",s.width=s.height="100%";else{const l=this._overlayRef.getConfig().maxHeight,u=this._overlayRef.getConfig().maxWidth;s.height=Is(o.height),s.top=Is(o.top),s.bottom=Is(o.bottom),s.width=Is(o.width),s.left=Is(o.left),s.right=Is(o.right),s.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",s.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",l&&(s.maxHeight=Is(l)),u&&(s.maxWidth=Is(u))}this._lastBoundingBoxSize=o,A0(this._boundingBox.style,s)}_resetBoundingBoxStyles(){A0(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){A0(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const o={},s=this._hasExactPosition(),l=this._hasFlexibleDimensions,u=this._overlayRef.getConfig();if(s){const T=this._viewportRuler.getViewportScrollPosition();A0(o,this._getExactOverlayY(e,t,T)),A0(o,this._getExactOverlayX(e,t,T))}else o.position="static";let g="",_=this._getOffset(e,"x"),w=this._getOffset(e,"y");_&&(g+=`translateX(${_}px) `),w&&(g+=`translateY(${w}px)`),o.transform=g.trim(),u.maxHeight&&(s?o.maxHeight=Is(u.maxHeight):l&&(o.maxHeight="")),u.maxWidth&&(s?o.maxWidth=Is(u.maxWidth):l&&(o.maxWidth="")),A0(this._pane.style,o)}_getExactOverlayY(t,e,o){let s={top:"",bottom:""},l=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(l=this._pushOverlayOnScreen(l,this._overlayRect,o)),"bottom"===t.overlayY?s.bottom=this._document.documentElement.clientHeight-(l.y+this._overlayRect.height)+"px":s.top=Is(l.y),s}_getExactOverlayX(t,e,o){let u,s={left:"",right:""},l=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(l=this._pushOverlayOnScreen(l,this._overlayRect,o)),u=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===u?s.right=this._document.documentElement.clientWidth-(l.x+this._overlayRect.width)+"px":s.left=Is(l.x),s}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),o=this._scrollables.map(s=>s.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Bz(t,o),isOriginOutsideView:iL(t,o),isOverlayClipped:Bz(e,o),isOverlayOutsideView:iL(e,o)}}_subtractOverflows(t,...e){return e.reduce((o,s)=>o-Math.max(s,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,o=this._viewportRuler.getViewportScrollPosition();return{top:o.top+this._viewportMargin,left:o.left+this._viewportMargin,right:o.left+t-this._viewportMargin,bottom:o.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?t.offsetX??this._offsetX:t.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&jk(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof a.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,o=t.height||0;return{top:t.y,bottom:t.y+o,left:t.x,right:t.x+e,height:o,width:e}}}function A0(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function qz(i){if("number"!=typeof i&&null!=i){const[t,e]=i.split(Mde);return e&&"px"!==e?null:parseFloat(t)}return i||null}function Zz(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const $z="cdk-global-overlay-wrapper";class kde{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add($z),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,o=this._overlayRef.getConfig(),{width:s,height:l,maxWidth:u,maxHeight:g}=o,_=!("100%"!==s&&"100vw"!==s||u&&"100%"!==u&&"100vw"!==u),w=!("100%"!==l&&"100vh"!==l||g&&"100%"!==g&&"100vh"!==g),T=this._xPosition,D=this._xOffset,O="rtl"===this._overlayRef.getConfig().direction;let F="",j="",Q="";_?Q="flex-start":"center"===T?(Q="center",O?j=D:F=D):O?"left"===T||"end"===T?(Q="flex-end",F=D):("right"===T||"start"===T)&&(Q="flex-start",j=D):"left"===T||"start"===T?(Q="flex-start",F=D):("right"===T||"end"===T)&&(Q="flex-end",j=D),t.position=this._cssPosition,t.marginLeft=_?"0":F,t.marginTop=w?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=_?"0":j,e.justifyContent=Q,e.alignItems=w?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,o=e.style;e.classList.remove($z),o.justifyContent=o.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Ode=(()=>{class i{constructor(e,o,s,l){this._viewportRuler=e,this._document=o,this._platform=s,this._overlayContainer=l}global(){return new kde}flexibleConnectedTo(e){return new Ade(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Zk),a.LFG(ve),a.LFG(Qh),a.LFG(zz))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Rde=0,k0=(()=>{class i{constructor(e,o,s,l,u,g,_,w,T,D,O,F){this.scrollStrategies=e,this._overlayContainer=o,this._componentFactoryResolver=s,this._positionBuilder=l,this._keyboardDispatcher=u,this._injector=g,this._ngZone=_,this._document=w,this._directionality=T,this._location=D,this._outsideClickDispatcher=O,this._animationsModuleType=F}create(e){const o=this._createHostElement(),s=this._createPaneElement(o),l=this._createPortalOutlet(s),u=new Uz(e);return u.direction=u.direction||this._directionality.value,new Ide(l,o,s,u,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const o=this._document.createElement("div");return o.id="cdk-overlay-"+Rde++,o.classList.add("cdk-overlay-pane"),e.appendChild(o),o}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(a.z2F)),new vde(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(Ede),a.LFG(zz),a.LFG(a._Vd),a.LFG(Ode),a.LFG(Sde),a.LFG(a.zs3),a.LFG(a.R0b),a.LFG(ve),a.LFG(P2),a.LFG(Ke),a.LFG(Dde),a.LFG(a.QbO,8))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();const Fde={provide:new a.OlP("cdk-connected-overlay-scroll-strategy"),deps:[k0],useFactory:function Nde(i){return()=>i.scrollStrategies.reposition()}};let oO=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[k0,Fde],imports:[WS,bde,B2,B2]}),i})(),rL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn,_r,Q2,_r]}),i})();const Zde={provide:new a.OlP("mat-select-scroll-strategy"),deps:[k0],useFactory:function qde(i){return()=>i.scrollStrategies.reposition()}};let $de=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[Zde],imports:[jn,oO,rO,_r,K1,rL,rO,_r]}),i})();const Jde={provide:new a.OlP("mat-tooltip-scroll-strategy"),deps:[k0],useFactory:function Yde(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}};let Xde=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[Jde],imports:[Oue,jn,oO,_r,_r,K1]}),i})(),oL=(()=>{class i{constructor(){this.changes=new Ft.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,o,s)=>{if(0==s||0==o)return`0 of ${s}`;const l=e*o;return`${l+1} \u2013 ${l<(s=Math.max(s,0))?Math.min(l+o,s):l+o} of ${s}`}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const rhe={provide:oL,deps:[[new a.FiY,new a.tp0,oL]],useFactory:function ihe(i){return i||new oL}};let ohe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[rhe],imports:[jn,tL,$de,Xde,_r]}),i})(),sL=(()=>{class i{constructor(){this.changes=new Ft.x}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ahe={provide:sL,deps:[[new a.FiY,new a.tp0,sL]],useFactory:function she(i){return i||new sL}};let lhe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[ahe],imports:[jn,_r]}),i})(),che=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[jn]]}),i})(),fhe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn,Yf,ar,ar]}),i})(),ghe=(()=>{class i{constructor(e,o,s){this.el=e,this.zone=o,this.config=s,this.escape=!0,this.fitContent=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...e.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onClick(e){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?ht.appendChild(this.container,this.el.nativeElement):ht.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content")}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),ht.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?sr.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&sr.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+ht.getWindowScrollLeft(),top:e.top+ht.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),o=e.left+ht.getOuterWidth(this.el.nativeElement),s=e.top+(ht.getOuterHeight(this.el.nativeElement)-ht.getOuterHeight(this.container))/2;this.container.style.left=o+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),o=e.left-ht.getOuterWidth(this.container),s=e.top+(ht.getOuterHeight(this.el.nativeElement)-ht.getOuterHeight(this.container))/2;this.container.style.left=o+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),o=e.left+(ht.getOuterWidth(this.el.nativeElement)-ht.getOuterWidth(this.container))/2,s=e.top-ht.getOuterHeight(this.container);this.container.style.left=o+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),o=e.left+(ht.getOuterWidth(this.el.nativeElement)-ht.getOuterWidth(this.container))/2,s=e.top+ht.getOuterHeight(this.el.nativeElement);this.container.style.left=o+this.getOption("positionLeft")+"px",this.container.style.top=s+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions={...this._tooltipOptions,...e}}getOption(e){return this._tooltipOptions[e]}getTarget(e){return ht.hasClass(e,"p-inputwrapper")?ht.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let o="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?o+" "+this.getOption("tooltipStyleClass"):o}isOutOfBounds(){let e=this.container.getBoundingClientRect(),o=e.top,s=e.left,l=ht.getOuterWidth(this.container),u=ht.getOuterHeight(this.container),g=ht.getViewport();return s+l>g.width||s<0||o<0||o+u>g.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new D2(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):ht.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&sr.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.SBq),a.Y36(a.R0b),a.Y36(zn))},i.\u0275dir=a.lG2({type:i,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",fitContent:"fitContent",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[a.TTD]}),i})(),mhe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn]}),i})();const _he=["element"],yhe=["content"];function vhe(i,t){1&i&&a.GkF(0)}const aL=function(i,t){return{$implicit:i,options:t}};function bhe(i,t){if(1&i&&(a.ynx(0),a.YNc(1,vhe,1,0,"ng-container",7),a.BQk()),2&i){const e=a.oxw(2);a.xp6(1),a.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",a.WLB(2,aL,e.loadedItems,e.getContentOptions()))}}function whe(i,t){1&i&&a.GkF(0)}function Che(i,t){if(1&i&&(a.ynx(0),a.YNc(1,whe,1,0,"ng-container",7),a.BQk()),2&i){const e=t.$implicit,o=t.index,s=a.oxw(3);a.xp6(1),a.Q6J("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",a.WLB(2,aL,e,s.getOptions(o)))}}const The=function(i){return{"p-scroller-loading":i}};function Ehe(i,t){if(1&i&&(a.TgZ(0,"div",8,9),a.YNc(2,Che,2,5,"ng-container",10),a.qZA()),2&i){const e=a.oxw(2);a.Q6J("ngClass",a.VKq(4,The,e.d_loading))("ngStyle",e.contentStyle),a.xp6(2),a.Q6J("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy||e.index)}}function xhe(i,t){if(1&i&&a._UZ(0,"div",11),2&i){const e=a.oxw(2);a.Q6J("ngStyle",e.spacerStyle)}}function She(i,t){1&i&&a.GkF(0)}const Dhe=function(i){return{numCols:i}},Kz=function(i){return{options:i}};function Ihe(i,t){if(1&i&&(a.ynx(0),a.YNc(1,She,1,0,"ng-container",7),a.BQk()),2&i){const e=t.index,o=a.oxw(4);a.xp6(1),a.Q6J("ngTemplateOutlet",o.loaderTemplate)("ngTemplateOutletContext",a.VKq(4,Kz,o.getLoaderOptions(e,o.both&&a.VKq(2,Dhe,o._numItemsInViewport.cols))))}}function Mhe(i,t){if(1&i&&(a.ynx(0),a.YNc(1,Ihe,2,6,"ng-container",14),a.BQk()),2&i){const e=a.oxw(3);a.xp6(1),a.Q6J("ngForOf",e.loaderArr)}}function Ahe(i,t){1&i&&a.GkF(0)}const khe=function(){return{styleClass:"p-scroller-loading-icon"}};function Ohe(i,t){if(1&i&&(a.ynx(0),a.YNc(1,Ahe,1,0,"ng-container",7),a.BQk()),2&i){const e=a.oxw(4);a.xp6(1),a.Q6J("ngTemplateOutlet",e.loaderIconTemplate)("ngTemplateOutletContext",a.VKq(3,Kz,a.DdM(2,khe)))}}function Rhe(i,t){1&i&&a._UZ(0,"i",16)}function Phe(i,t){if(1&i&&(a.YNc(0,Ohe,2,5,"ng-container",0),a.YNc(1,Rhe,1,0,"ng-template",null,15,a.W1O)),2&i){const e=a.MAs(2),o=a.oxw(3);a.Q6J("ngIf",o.loaderIconTemplate)("ngIfElse",e)}}const Nhe=function(i){return{"p-component-overlay":i}};function Fhe(i,t){if(1&i&&(a.TgZ(0,"div",12),a.YNc(1,Mhe,2,1,"ng-container",0),a.YNc(2,Phe,3,2,"ng-template",null,13,a.W1O),a.qZA()),2&i){const e=a.MAs(3),o=a.oxw(2);a.Q6J("ngClass",a.VKq(3,Nhe,!o.loaderTemplate)),a.xp6(1),a.Q6J("ngIf",o.loaderTemplate)("ngIfElse",e)}}const Lhe=function(i,t){return{"p-scroller":!0,"p-both-scroll":i,"p-horizontal-scroll":t}};function Vhe(i,t){if(1&i){const e=a.EpF();a.ynx(0),a.TgZ(1,"div",2,3),a.NdJ("scroll",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onContainerScroll(s))}),a.YNc(3,bhe,2,5,"ng-container",0),a.YNc(4,Ehe,3,6,"ng-template",null,4,a.W1O),a.YNc(6,xhe,1,1,"div",5),a.YNc(7,Fhe,4,5,"div",6),a.qZA(),a.BQk()}if(2&i){const e=a.MAs(5),o=a.oxw();a.xp6(1),a.Tol(o._styleClass),a.Q6J("ngStyle",o._style)("ngClass",a.WLB(10,Lhe,o.both,o.horizontal)),a.uIk("id",o._id)("tabindex",o.tabindex),a.xp6(2),a.Q6J("ngIf",o.contentTemplate)("ngIfElse",e),a.xp6(3),a.Q6J("ngIf",o._showSpacer),a.xp6(1),a.Q6J("ngIf",!o.loaderDisabled&&o._showLoader&&o.d_loading)}}function Hhe(i,t){1&i&&a.GkF(0)}const Bhe=function(i,t){return{rows:i,columns:t}};function Uhe(i,t){if(1&i&&(a.ynx(0),a.YNc(1,Hhe,1,0,"ng-container",7),a.BQk()),2&i){const e=a.oxw(2);a.xp6(1),a.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",a.WLB(5,aL,e.items,a.WLB(2,Bhe,e._items,e.loadedColumns)))}}function jhe(i,t){if(1&i&&(a.Hsn(0),a.YNc(1,Uhe,2,8,"ng-container",17)),2&i){const e=a.oxw();a.xp6(1),a.Q6J("ngIf",e.contentTemplate)}}const zhe=["*"];let Ghe=(()=>{class i{constructor(e,o){this.cd=e,this.zone=o,this.onLazyLoad=new a.vpe,this.onScroll=new a.vpe,this.onScrollIndexChange=new a.vpe,this._tabindex=0,this._itemSize=0,this._orientation="vertical",this._delay=0,this._resizeDelay=10,this._lazy=!1,this._disabled=!1,this._loaderDisabled=!1,this._showSpacer=!0,this._showLoader=!1,this._autoSize=!1,this.d_loading=!1,this.first=0,this.last=0,this.numItemsInViewport=0,this.lastScrollPos=0,this.loaderArr=[],this.spacerStyle={},this.contentStyle={},this.initialized=!1,this._disabled||this.zone.runOutsideAngular(()=>{this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener),window.addEventListener("orientationchange",this.windowResizeListener)})}get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&"object"==typeof e&&Object.entries(e).forEach(([o,s])=>this[`_${o}`]!==s&&(this[`_${o}`]=s))}get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}ngOnInit(){this.setInitialState()}ngOnChanges(e){if(this.initialized){let o=!1;if(e.items){const{previousValue:l,currentValue:u}=e.items;o=!l||l.length!==(u||[]).length}(o||e.itemSize||e.scrollHeight||e.scrollWidth)&&this.init()}if(e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.loading){const{previousValue:o,currentValue:s}=e.loading;this.lazy&&o!==s&&s!==this.d_loading&&(this.d_loading=s)}if(e.numToleratedItems){const{previousValue:o,currentValue:s}=e.numToleratedItems;o!==s&&s!==this.d_numToleratedItems&&(this.d_numToleratedItems=s)}if(e.options){const{previousValue:o,currentValue:s}=e.options;this.lazy&&o?.loading!==s?.loading&&s?.loading!==this.d_loading&&(this.d_loading=s.loading),o?.numToleratedItems!==s?.numToleratedItems&&s?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=s.numToleratedItems)}}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"item":default:this.itemTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"loadericon":this.loaderIconTemplate=e.template}})}ngAfterViewInit(){this.setContentEl(this.contentEl),this.init(),this.defaultWidth=ht.getWidth(this.elementViewChild.nativeElement),this.defaultHeight=ht.getHeight(this.elementViewChild.nativeElement),this.initialized=!0}ngAfterViewChecked(){this.calculateAutoSize()}ngOnDestroy(){this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),window.removeEventListener("orientationchange",this.windowResizeListener),this.windowResizeListener=null)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||ht.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems}getElementRef(){return this.elementViewChild}scrollTo(e){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,o="auto"){const{numToleratedItems:s}=this.calculateNumItems(),l=this.getContentPosition(),u=(w=0,T)=>w<=T?0:w,g=(w,T,D)=>w*T+D,_=(w=0,T=0)=>this.scrollTo({left:w,top:T,behavior:o});if(this.both){const w={rows:u(e[0],s[0]),cols:u(e[1],s[1])};(w.rows!==this.first.rows||w.cols!==this.first.cols)&&_(g(w.cols,this._itemSize[1],l.left),g(w.rows,this._itemSize[0],l.top))}else{const w=u(e,s);w!==this.first&&(this.horizontal?_(g(w,this._itemSize,l.left),0):_(0,g(w,this._itemSize,l.top)))}}scrollInView(e,o,s="auto"){if(o){const{first:l,viewport:u}=this.getRenderedRange(),g=(T=0,D=0)=>this.scrollTo({left:T,top:D,behavior:s}),w="to-end"===o;if("to-start"===o){if(this.both)u.first.rows-l.rows>e[0]?g(u.first.cols*this._itemSize[1],(u.first.rows-1)*this._itemSize[0]):u.first.cols-l.cols>e[1]&&g((u.first.cols-1)*this._itemSize[1],u.first.rows*this._itemSize[0]);else if(u.first-l>e){const T=(u.first-1)*this._itemSize;this.horizontal?g(T,0):g(0,T)}}else if(w)if(this.both)u.last.rows-l.rows<=e[0]+1?g(u.first.cols*this._itemSize[1],(u.first.rows+1)*this._itemSize[0]):u.last.cols-l.cols<=e[1]+1&&g((u.first.cols+1)*this._itemSize[1],u.first.rows*this._itemSize[0]);else if(u.last-l<=e+1){const T=(u.first+1)*this._itemSize;this.horizontal?g(T,0):g(0,T)}}else this.scrollToIndex(e,s)}getRenderedRange(){const e=(l,u)=>Math.floor(l/(u||l));let o=this.first,s=0;if(this.elementViewChild?.nativeElement){const{scrollTop:l,scrollLeft:u}=this.elementViewChild.nativeElement;this.both?(o={rows:e(l,this._itemSize[0]),cols:e(u,this._itemSize[1])},s={rows:o.rows+this.numItemsInViewport.rows,cols:o.cols+this.numItemsInViewport.cols}):(o=e(this.horizontal?u:l,this._itemSize),s=o+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:o,last:s}}}calculateNumItems(){const e=this.getContentPosition(),o=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0,s=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0,l=(w,T)=>Math.ceil(w/(T||w)),u=w=>Math.ceil(w/2),g=this.both?{rows:l(s,this._itemSize[0]),cols:l(o,this._itemSize[1])}:l(this.horizontal?o:s,this._itemSize);return{numItemsInViewport:g,numToleratedItems:this.d_numToleratedItems||(this.both?[u(g.rows),u(g.cols)]:u(g))}}calculateOptions(){const{numItemsInViewport:e,numToleratedItems:o}=this.calculateNumItems(),s=(g,_,w,T=!1)=>this.getLast(g+_+(g<w?2:3)*w,T),l=this.first,u=this.both?{rows:s(this.first.rows,e.rows,o[0]),cols:s(this.first.cols,e.cols,o[1],!0)}:s(this.first,e,o);this.last=u,this.numItemsInViewport=e,this.d_numToleratedItems=o,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&this.handleEvents("onLazyLoad",{first:l,last:u})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto";const{offsetWidth:e,offsetHeight:o}=this.contentEl;(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=(e<this.defaultWidth?e:this.defaultWidth)+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=(o<this.defaultHeight?o:this.defaultHeight)+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth=""}})}getLast(e=0,o=!1){return this._items?Math.min(o?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){const e=getComputedStyle(this.contentEl),o=parseInt(e.paddingLeft,10)+Math.max(parseInt(e.left,10),0),s=parseInt(e.paddingRight,10)+Math.max(parseInt(e.right,10),0),l=parseInt(e.paddingTop,10)+Math.max(parseInt(e.top,10),0),u=parseInt(e.paddingBottom,10)+Math.max(parseInt(e.bottom,10),0);return{left:o,right:s,top:l,bottom:u,x:o+s,y:l+u}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const e=this.elementViewChild.nativeElement.parentElement.parentElement,o=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,s=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,l=(u,g)=>this.elementViewChild.nativeElement.style[u]=g;this.both||this.horizontal?(l("height",s),l("width",o)):l("height",s)}}setSpacerSize(){if(this._items){const e=this.getContentPosition(),o=(s,l,u,g=0)=>this.spacerStyle={...this.spacerStyle,[`${s}`]:(l||[]).length*u+g+"px"};this.both?(o("height",this._items,this._itemSize[0],e.y),o("width",this._columns||this._items[1],this._itemSize[1],e.x)):this.horizontal?o("width",this._columns||this._items,this._itemSize,e.x):o("height",this._items,this._itemSize,e.y)}}setContentPosition(e){if(this.contentEl){const o=e?e.first:this.first,s=(u,g)=>u*g,l=(u=0,g=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${u}px, ${g}px, 0)`};if(this.both)l(s(o.cols,this._itemSize[1]),s(o.rows,this._itemSize[0]));else{const u=s(o,this._itemSize);this.horizontal?l(u,0):l(0,u)}}}onScrollPositionChange(e){const o=e.target,s=this.getContentPosition(),l=(ae,Oe)=>ae?ae>Oe?ae-Oe:ae:0,u=(ae,Oe)=>Math.floor(ae/(Oe||ae)),g=(ae,Oe,We,ft,dt,zt)=>ae<=dt?dt:zt?We-ft-dt:Oe+dt-1,_=(ae,Oe,We,ft,dt,zt,Wt)=>ae<=zt?0:Math.max(0,Wt?ae<Oe?We:ae-zt:ae>Oe?We:ae-2*zt),w=(ae,Oe,We,ft,dt,zt=!1)=>{let Wt=Oe+ft+2*dt;return ae>=dt&&(Wt+=dt+1),this.getLast(Wt,zt)},T=l(o.scrollTop,s.top),D=l(o.scrollLeft,s.left);let O=this.both?{rows:0,cols:0}:0,F=this.last,j=!1,Q=this.lastScrollPos;if(this.both){const ae=this.lastScrollPos.top<=T,Oe=this.lastScrollPos.left<=D,We={rows:u(T,this._itemSize[0]),cols:u(D,this._itemSize[1])},ft={rows:g(We.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],ae),cols:g(We.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],Oe)};O={rows:_(We.rows,ft.rows,this.first.rows,0,0,this.d_numToleratedItems[0],ae),cols:_(We.cols,ft.cols,this.first.cols,0,0,this.d_numToleratedItems[1],Oe)},F={rows:w(We.rows,O.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:w(We.cols,O.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},j=O.rows!==this.first.rows||F.rows!==this.last.rows||O.cols!==this.first.cols||F.cols!==this.last.cols,Q={top:T,left:D}}else{const ae=this.horizontal?D:T,Oe=this.lastScrollPos<=ae,We=u(ae,this._itemSize);O=_(We,g(We,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,Oe),this.first,0,0,this.d_numToleratedItems,Oe),F=w(We,O,0,this.numItemsInViewport,this.d_numToleratedItems),j=O!==this.first||F!==this.last,Q=ae}return{first:O,last:F,isRangeChanged:j,scrollPos:Q}}onScrollChange(e){const{first:o,last:s,isRangeChanged:l,scrollPos:u}=this.onScrollPositionChange(e);if(l){const g={first:o,last:s};this.setContentPosition(g),this.first=o,this.last=s,this.lastScrollPos=u,this.handleEvents("onScrollIndexChange",g),this._lazy&&this.handleEvents("onLazyLoad",g)}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:o}=this.onScrollPositionChange(e);o&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.cd.detectChanges())},this._delay)}else this.onScrollChange(e)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(this.elementViewChild){const[e,o]=[ht.getWidth(this.elementViewChild.nativeElement),ht.getHeight(this.elementViewChild.nativeElement)],[s,l]=[e!==this.defaultWidth,o!==this.defaultHeight];(this.both?s||l:this.horizontal?s:this.vertical&&l)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=e,this.defaultHeight=o,this.init()})}},this._resizeDelay)}handleEvents(e,o){return this.options&&this.options[e]?this.options[e](o):this[e].emit(o)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,o)=>this.getLoaderOptions(e,o),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){const o=(this._items||[]).length,s=this.both?this.first.rows+e:this.first+e;return{index:s,count:o,first:0===s,last:s===o-1,even:s%2==0,odd:s%2!=0}}getLoaderOptions(e,o){const s=this.loaderArr.length;return{index:e,count:s,first:0===e,last:e===s-1,even:e%2==0,odd:e%2!=0,...o}}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.sBO),a.Y36(a.R0b))},i.\u0275cmp=a.Xpm({type:i,selectors:[["p-scroller"]],contentQueries:function(e,o,s){if(1&e&&a.Suo(s,Ci,4),2&e){let l;a.iGM(l=a.CRH())&&(o.templates=l)}},viewQuery:function(e,o){if(1&e&&(a.Gf(_he,5),a.Gf(yhe,5)),2&e){let s;a.iGM(s=a.CRH())&&(o.elementViewChild=s.first),a.iGM(s=a.CRH())&&(o.contentViewChild=s.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",delay:"delay",resizeDelay:"resizeDelay",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[a.TTD],ngContentSelectors:zhe,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[1,"p-scroller-loading-icon","pi","pi-spinner","pi-spin"],[4,"ngIf"]],template:function(e,o){if(1&e&&(a.F$t(),a.YNc(0,Vhe,8,13,"ng-container",0),a.YNc(1,jhe,2,1,"ng-template",null,1,a.W1O)),2&e){const s=a.MAs(2);a.Q6J("ngIf",!o._disabled)("ngIfElse",s)}},dependencies:[lo,Ui,Ji,Hr,uo],styles:["p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{font-size:2rem}\n"],encapsulation:2}),i})(),sO=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn]}),i})();function qhe(i,t){if(1&i&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&i){const e=a.oxw();a.xp6(1),a.Oqu(e.label||"empty")}}function Zhe(i,t){1&i&&a.GkF(0)}const tD=function(i){return{height:i}},$he=function(i,t){return{"p-dropdown-item":!0,"p-highlight":i,"p-disabled":t}},lL=function(i){return{$implicit:i}},Whe=["container"],Khe=["filter"],Yhe=["in"],Jhe=["editableInput"],Qhe=["items"],Xhe=["scroller"];function epe(i,t){if(1&i&&(a.ynx(0),a._uU(1),a.BQk()),2&i){const e=a.oxw(2);a.xp6(1),a.Oqu(e.label||"empty")}}function tpe(i,t){1&i&&a.GkF(0)}const npe=function(i){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":i}};function ipe(i,t){if(1&i&&(a.TgZ(0,"span",12),a.YNc(1,epe,2,1,"ng-container",13),a.YNc(2,tpe,1,0,"ng-container",14),a.qZA()),2&i){const e=a.oxw();a.Q6J("ngClass",a.VKq(9,npe,null==e.label||0===e.label.length))("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),a.uIk("id",e.labelId),a.xp6(1),a.Q6J("ngIf",!e.selectedItemTemplate),a.xp6(1),a.Q6J("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",a.VKq(11,lL,e.selectedOption))}}const rpe=function(i){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":i}};function ope(i,t){if(1&i&&(a.TgZ(0,"span",15),a._uU(1),a.qZA()),2&i){const e=a.oxw();a.Q6J("ngClass",a.VKq(2,rpe,null==e.placeholder||0===e.placeholder.length)),a.xp6(1),a.Oqu(e.placeholder||"empty")}}function spe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"input",16,17),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onEditableInputClick())})("input",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onEditableInputChange(s))})("focus",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onEditableInputFocus(s))})("blur",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onInputBlur(s))}),a.qZA()}if(2&i){const e=a.oxw();a.Q6J("disabled",e.disabled),a.uIk("maxlength",e.maxlength)("placeholder",e.placeholder)("aria-expanded",e.overlayVisible)}}function ape(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"i",18),a.NdJ("click",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.clear(s))}),a.qZA()}}function lpe(i,t){1&i&&a.GkF(0)}function cpe(i,t){1&i&&a.GkF(0)}const Yz=function(i){return{options:i}};function upe(i,t){if(1&i&&(a.ynx(0),a.YNc(1,cpe,1,0,"ng-container",14),a.BQk()),2&i){const e=a.oxw(3);a.xp6(1),a.Q6J("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",a.VKq(2,Yz,e.filterOptions))}}function dpe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",27)(1,"input",28,29),a.NdJ("keydown.enter",function(s){return s.preventDefault()})("keydown",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.onKeydown(s,!1))})("input",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.onFilterInputChange(s))}),a.qZA(),a._UZ(3,"span",30),a.qZA()}if(2&i){const e=a.oxw(3);a.xp6(1),a.Q6J("value",e.filterValue||""),a.uIk("placeholder",e.filterPlaceholder)("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.overlayVisible?"p-highlighted-option":e.labelId)}}function hpe(i,t){if(1&i&&(a.TgZ(0,"div",24),a.NdJ("click",function(o){return o.stopPropagation()}),a.YNc(1,upe,2,4,"ng-container",25),a.YNc(2,dpe,4,4,"ng-template",null,26,a.W1O),a.qZA()),2&i){const e=a.MAs(3),o=a.oxw(2);a.xp6(1),a.Q6J("ngIf",o.filterTemplate)("ngIfElse",e)}}function ppe(i,t){1&i&&a.GkF(0)}const Jz=function(i,t){return{$implicit:i,options:t}};function fpe(i,t){if(1&i&&a.YNc(0,ppe,1,0,"ng-container",14),2&i){const e=t.$implicit,o=t.options;a.oxw(2);const s=a.MAs(7);a.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",a.WLB(2,Jz,e,o))}}function gpe(i,t){1&i&&a.GkF(0)}function mpe(i,t){if(1&i&&a.YNc(0,gpe,1,0,"ng-container",14),2&i){const e=t.options,o=a.oxw(4);a.Q6J("ngTemplateOutlet",o.loaderTemplate)("ngTemplateOutletContext",a.VKq(2,Yz,e))}}function _pe(i,t){1&i&&(a.ynx(0),a.YNc(1,mpe,1,4,"ng-template",34),a.BQk())}function ype(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"p-scroller",31,32),a.NdJ("onLazyLoad",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onLazyLoad.emit(s))}),a.YNc(2,fpe,1,5,"ng-template",33),a.YNc(3,_pe,2,0,"ng-container",13),a.qZA()}if(2&i){const e=a.oxw(2);a.Akn(a.VKq(8,tD,e.scrollHeight)),a.Q6J("items",e.optionsToDisplay)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),a.xp6(3),a.Q6J("ngIf",e.loaderTemplate)}}function vpe(i,t){1&i&&a.GkF(0)}const bpe=function(){return{}};function wpe(i,t){if(1&i&&(a.ynx(0),a.YNc(1,vpe,1,0,"ng-container",14),a.BQk()),2&i){a.oxw();const e=a.MAs(7),o=a.oxw();a.xp6(1),a.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",a.WLB(3,Jz,o.optionsToDisplay,a.DdM(2,bpe)))}}function Cpe(i,t){if(1&i&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&i){const e=a.oxw().$implicit,o=a.oxw(4);a.xp6(1),a.Oqu(o.getOptionGroupLabel(e)||"empty")}}function Tpe(i,t){1&i&&a.GkF(0)}function Epe(i,t){1&i&&a.GkF(0)}const Qz=function(i,t){return{$implicit:i,selectedOption:t}};function xpe(i,t){if(1&i&&(a.TgZ(0,"li",40),a.YNc(1,Cpe,2,1,"span",13),a.YNc(2,Tpe,1,0,"ng-container",14),a.qZA(),a.YNc(3,Epe,1,0,"ng-container",14)),2&i){const e=t.$implicit,o=a.oxw(2).options,s=a.MAs(5),l=a.oxw(2);a.Q6J("ngStyle",a.VKq(6,tD,o.itemSize+"px")),a.xp6(1),a.Q6J("ngIf",!l.groupTemplate),a.xp6(1),a.Q6J("ngTemplateOutlet",l.groupTemplate)("ngTemplateOutletContext",a.VKq(8,lL,e)),a.xp6(1),a.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",a.WLB(10,Qz,l.getOptionGroupChildren(e),l.selectedOption))}}function Spe(i,t){if(1&i&&(a.ynx(0),a.YNc(1,xpe,4,13,"ng-template",39),a.BQk()),2&i){const e=a.oxw().$implicit;a.xp6(1),a.Q6J("ngForOf",e)}}function Dpe(i,t){1&i&&a.GkF(0)}function Ipe(i,t){if(1&i&&(a.ynx(0),a.YNc(1,Dpe,1,0,"ng-container",14),a.BQk()),2&i){const e=a.oxw().$implicit,o=a.MAs(5),s=a.oxw(2);a.xp6(1),a.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",a.WLB(2,Qz,e,s.selectedOption))}}function Mpe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"p-dropdownItem",41),a.NdJ("onClick",function(s){a.CHM(e);const l=a.oxw(4);return a.KtG(l.onItemClick(s))}),a.qZA()}if(2&i){const e=t.$implicit,o=a.oxw().selectedOption,s=a.oxw(3);a.Q6J("option",e)("selected",o==e)("label",s.getOptionLabel(e))("disabled",s.isOptionDisabled(e))("template",s.itemTemplate)}}function Ape(i,t){1&i&&a.YNc(0,Mpe,1,5,"ng-template",39),2&i&&a.Q6J("ngForOf",t.$implicit)}function kpe(i,t){if(1&i&&(a.ynx(0),a._uU(1),a.BQk()),2&i){const e=a.oxw(4);a.xp6(1),a.hij(" ",e.emptyFilterMessageLabel," ")}}function Ope(i,t){1&i&&a.GkF(0,null,43)}function Rpe(i,t){if(1&i&&(a.TgZ(0,"li",42),a.YNc(1,kpe,2,1,"ng-container",25),a.YNc(2,Ope,2,0,"ng-container",19),a.qZA()),2&i){const e=a.oxw().options,o=a.oxw(2);a.Q6J("ngStyle",a.VKq(4,tD,e.itemSize+"px")),a.xp6(1),a.Q6J("ngIf",!o.emptyFilterTemplate&&!o.emptyTemplate)("ngIfElse",o.emptyFilter),a.xp6(1),a.Q6J("ngTemplateOutlet",o.emptyFilterTemplate||o.emptyTemplate)}}function Ppe(i,t){if(1&i&&(a.ynx(0),a._uU(1),a.BQk()),2&i){const e=a.oxw(4);a.xp6(1),a.hij(" ",e.emptyMessageLabel," ")}}function Npe(i,t){1&i&&a.GkF(0,null,44)}function Fpe(i,t){if(1&i&&(a.TgZ(0,"li",42),a.YNc(1,Ppe,2,1,"ng-container",25),a.YNc(2,Npe,2,0,"ng-container",19),a.qZA()),2&i){const e=a.oxw().options,o=a.oxw(2);a.Q6J("ngStyle",a.VKq(4,tD,e.itemSize+"px")),a.xp6(1),a.Q6J("ngIf",!o.emptyTemplate)("ngIfElse",o.empty),a.xp6(1),a.Q6J("ngTemplateOutlet",o.emptyTemplate)}}function Lpe(i,t){if(1&i&&(a.TgZ(0,"ul",35,36),a.YNc(2,Spe,2,1,"ng-container",13),a.YNc(3,Ipe,2,5,"ng-container",13),a.YNc(4,Ape,1,1,"ng-template",null,37,a.W1O),a.YNc(6,Rpe,3,6,"li",38),a.YNc(7,Fpe,3,6,"li",38),a.qZA()),2&i){const e=t.options,o=a.oxw(2);a.Akn(e.contentStyle),a.Q6J("ngClass",e.contentStyleClass),a.uIk("id",o.listId),a.xp6(2),a.Q6J("ngIf",o.group),a.xp6(1),a.Q6J("ngIf",!o.group),a.xp6(3),a.Q6J("ngIf",o.filterValue&&o.isEmpty()),a.xp6(1),a.Q6J("ngIf",!o.filterValue&&o.isEmpty())}}function Vpe(i,t){1&i&&a.GkF(0)}const Hpe=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},Bpe=function(i){return{value:"visible",params:i}};function Upe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",0),a.NdJ("click",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onOverlayClick(s))})("@overlayAnimation.start",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onOverlayAnimationStart(s))})("@overlayAnimation.done",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onOverlayAnimationEnd(s))}),a.YNc(1,lpe,1,0,"ng-container",19),a.YNc(2,hpe,4,2,"div",20),a.TgZ(3,"div",21),a.YNc(4,ype,4,10,"p-scroller",22),a.YNc(5,wpe,2,6,"ng-container",13),a.YNc(6,Lpe,8,8,"ng-template",null,23,a.W1O),a.qZA(),a.YNc(8,Vpe,1,0,"ng-container",19),a.qZA()}if(2&i){const e=a.oxw();a.Tol(e.panelStyleClass),a.Q6J("ngClass","p-dropdown-panel p-component")("@overlayAnimation",a.VKq(15,Bpe,a.WLB(12,Hpe,e.showTransitionOptions,e.hideTransitionOptions)))("ngStyle",e.panelStyle),a.xp6(1),a.Q6J("ngTemplateOutlet",e.headerTemplate),a.xp6(1),a.Q6J("ngIf",e.filter),a.xp6(1),a.Udp("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),a.xp6(1),a.Q6J("ngIf",e.virtualScroll),a.xp6(1),a.Q6J("ngIf",!e.virtualScroll),a.xp6(3),a.Q6J("ngTemplateOutlet",e.footerTemplate)}}const jpe=function(i,t,e,o){return{"p-dropdown p-component":!0,"p-disabled":i,"p-dropdown-open":t,"p-focus":e,"p-dropdown-clearable":o}},zpe={provide:Ss,useExisting:(0,a.Gpc)(()=>qpe),multi:!0};let Gpe=(()=>{class i{constructor(){this.onClick=new a.vpe}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=a.Xpm({type:i,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,o){1&e&&(a.TgZ(0,"li",0),a.NdJ("click",function(l){return o.onOptionClick(l)}),a.YNc(1,qhe,2,1,"span",1),a.YNc(2,Zhe,1,0,"ng-container",2),a.qZA()),2&e&&(a.Q6J("ngStyle",a.VKq(8,tD,o.itemSize+"px"))("id",o.selected?"p-highlighted-option":"")("ngClass",a.WLB(10,$he,o.selected,o.disabled)),a.uIk("aria-label",o.label)("aria-selected",o.selected),a.xp6(1),a.Q6J("ngIf",!o.template),a.xp6(1),a.Q6J("ngTemplateOutlet",o.template)("ngTemplateOutletContext",a.VKq(13,lL,o.option)))},dependencies:[lo,Ji,Hr,uo,S0],encapsulation:2}),i})(),qpe=(()=>{class i{constructor(e,o,s,l,u,g,_){this.el=e,this.renderer=o,this.cd=s,this.zone=l,this.filterService=u,this.config=g,this.overlayService=_,this.scrollHeight="200px",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.lazy=!1,this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.onChange=new a.vpe,this.onFilter=new a.vpe,this.onFocus=new a.vpe,this.onBlur=new a.vpe,this.onClick=new a.vpe,this.onShow=new a.vpe,this.onHide=new a.vpe,this.onClear=new a.vpe,this.onLazyLoad=new a.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.id=Jo()}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list",this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}get options(){return this._options}set options(e){this._options=e,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),!this.selectedOption&&It.isNotEmpty(this.value)&&(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Mo.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Mo.EMPTY_FILTER_MESSAGE)}get filled(){return this.value||null!=this.value||null!=this.value}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(e){return this.optionLabel?It.resolveFieldData(e,this.optionLabel):e&&void 0!==e.label?e.label:e}getOptionValue(e){return this.optionValue?It.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}isOptionDisabled(e){return this.optionDisabled?It.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled}getOptionGroupLabel(e){return this.optionGroupLabel?It.resolveFieldData(e,this.optionGroupLabel):e&&void 0!==e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?It.resolveFieldData(e,this.optionGroupChildren):e.items}onItemClick(e){const o=e.option;this.isOptionDisabled(o)||(this.selectItem(e.originalEvent,o),this.accessibleViewChild.nativeElement.focus({preventScroll:!0})),setTimeout(()=>{this.hide()},150)}selectItem(e,o){this.selectedOption!=o&&(this.selectedOption=o,this.value=this.getOptionValue(o),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:e,value:this.value}))}ngAfterViewChecked(){this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper&&(ht.findSingle(this.overlay,"li.p-highlight")&&ht.scrollInView(this.itemsWrapper,ht.findSingle(this.overlay,"li.p-highlight")),this.selectedOptionUpdated=!1)}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.updateSelectedOption(e),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(e){this.selectedOption=this.findOption(e,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.optionsToDisplay[0].items[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onMouseclick(e){this.disabled||this.readonly||this.isInputClick(e)||(this.onClick.emit(e),this.accessibleViewChild.nativeElement.focus({preventScroll:!0}),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}isInputClick(e){return ht.hasClass(e.target,"p-dropdown-clear-icon")||e.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&e.target.isSameNode(this.editableInputViewChild.nativeElement)}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputClick(){this.bindDocumentClickListener()}onEditableInputFocus(e){this.focused=!0,this.hide(),this.onFocus.emit(e)}onEditableInputChange(e){this.value=e.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}show(){this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){switch(e.toState){case"visible":if(this.overlay=e.element,this.itemsWrapper=ht.findSingle(this.overlay,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller.setContentEl(this.itemsViewChild.nativeElement),this.appendOverlay(),this.autoZIndex&&sr.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.options&&this.options.length)if(this.virtualScroll){const o=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;-1!==o&&this.scroller.scrollToIndex(o)}else{let o=ht.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");o&&o.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e);break;case"void":this.onOverlayHide(),this.onHide.emit(e)}}onOverlayAnimationEnd(e){"void"===e.toState&&sr.clear(e.element)}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):ht.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=ht.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.cd.markForCheck()}alignOverlay(){this.overlay&&(this.appendTo?ht.absolutePosition(this.overlay,this.containerViewChild.nativeElement):ht.relativePosition(this.overlay,this.containerViewChild.nativeElement))}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(e){let o;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let s=e-1;0<=s;s--){let l=this.optionsToDisplay[s];if(!this.isOptionDisabled(l)){o=l;break}}if(!o)for(let s=this.optionsToDisplay.length-1;s>=e;s--){let l=this.optionsToDisplay[s];if(!this.isOptionDisabled(l)){o=l;break}}}return o}findNextEnabledOption(e){let o;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let s=e+1;s<this.optionsToDisplay.length;s++){let l=this.optionsToDisplay[s];if(!this.isOptionDisabled(l)){o=l;break}}if(!o)for(let s=0;s<e;s++){let l=this.optionsToDisplay[s];if(!this.isOptionDisabled(l)){o=l;break}}}return o}onKeydown(e,o){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(e.which){case 40:if(!this.overlayVisible&&e.altKey)this.show();else if(this.group){let s=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==s){let l=s.itemIndex+1;l<this.getOptionGroupChildren(this.optionsToDisplay[s.groupIndex]).length?(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[s.groupIndex])[l]),this.selectedOptionUpdated=!0):this.optionsToDisplay[s.groupIndex+1]&&(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[s.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let s=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,l=this.findNextEnabledOption(s);l&&(this.selectItem(e,l),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 38:if(this.group){let s=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==s){let l=s.itemIndex-1;if(l>=0)this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[s.groupIndex])[l]),this.selectedOptionUpdated=!0;else if(l<0){let u=this.optionsToDisplay[s.groupIndex-1];u&&(this.selectItem(e,this.getOptionGroupChildren(u)[this.getOptionGroupChildren(u).length-1]),this.selectedOptionUpdated=!0)}}}else{let s=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,l=this.findPrevEnabledOption(s);l&&(this.selectItem(e,l),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 32:o&&(this.overlayVisible?this.hide():this.show(),e.preventDefault());break;case 13:this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),e.preventDefault();break;case 27:case 9:this.hide();break;default:o&&!e.metaKey&&this.search(e)}}search(e){this.searchTimeout&&clearTimeout(this.searchTimeout);const o=e.key;let s;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=o,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+o:o,this.group){let l=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};s=this.searchOptionWithinGroup(l)}else{let l=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;s=this.searchOption(++l)}s&&!this.isOptionDisabled(s)&&(this.selectItem(e,s),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(e){let o;return this.searchValue&&(o=this.searchOptionInRange(e,this.optionsToDisplay.length),o||(o=this.searchOptionInRange(0,e))),o}searchOptionInRange(e,o){for(let s=e;s<o;s++){let l=this.optionsToDisplay[s];if(this.getOptionLabel(l).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(l))return l}return null}searchOptionWithinGroup(e){if(this.searchValue){for(let s=e.groupIndex;s<this.optionsToDisplay.length;s++)for(let l=e.groupIndex===s?e.itemIndex+1:0;l<this.getOptionGroupChildren(this.optionsToDisplay[s]).length;l++){let u=this.getOptionGroupChildren(this.optionsToDisplay[s])[l];if(this.getOptionLabel(u).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(u))return u}for(let s=0;s<=e.groupIndex;s++)for(let l=0;l<(e.groupIndex===s?e.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[s]).length);l++){let u=this.getOptionGroupChildren(this.optionsToDisplay[s])[l];if(this.getOptionLabel(u).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(u))return u}}return null}findOptionIndex(e,o){let s=-1;if(o)for(let l=0;l<o.length;l++)if(null==e&&null==this.getOptionValue(o[l])||It.equals(e,this.getOptionValue(o[l]),this.dataKey)){s=l;break}return s}findOptionGroupIndex(e,o){let s,l;if(o)for(let u=0;u<o.length&&(s=u,l=this.findOptionIndex(e,this.getOptionGroupChildren(o[u])),-1===l);u++);return-1!==l?{groupIndex:s,itemIndex:l}:-1}findOption(e,o,s){if(this.group&&!s){let l;if(o&&o.length)for(let u of o)if(l=this.findOption(e,this.getOptionGroupChildren(u),!0),l)break;return l}{let l=this.findOptionIndex(e,o);return-1!=l?o[l]:null}}onFilterInputChange(e){let o=e.target.value;o&&o.length?(this._filterValue=o,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.virtualScroll&&this.scroller.scrollToIndex(0),this.optionsChanged=!0,this.onFilter.emit({originalEvent:e,filter:this._filterValue})}activateFilter(){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let o=[];for(let s of this.options){let l=this.filterService.filter(this.getOptionGroupChildren(s),e,this.filterValue,this.filterMatchMode,this.filterLocale);l&&l.length&&o.push({...s,[this.optionGroupChildren]:l})}this.optionsToDisplay=o}else this.optionsToDisplay=this.filterService.filter(this.options,e,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?ht.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():ht.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",o=>{!this.preventDocumentDefault&&this.isOutsideClicked(o)&&(this.hide(),this.unbindDocumentClickListener()),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!ht.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new D2(this.containerViewChild.nativeElement,e=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}clear(e){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(e)}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.itemsWrapper=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&sr.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(a.sBO),a.Y36(a.R0b),a.Y36(wp),a.Y36(zn),a.Y36(Ks))},i.\u0275cmp=a.Xpm({type:i,selectors:[["p-dropdown"]],contentQueries:function(e,o,s){if(1&e&&a.Suo(s,Ci,4),2&e){let l;a.iGM(l=a.CRH())&&(o.templates=l)}},viewQuery:function(e,o){if(1&e&&(a.Gf(Whe,5),a.Gf(Khe,5),a.Gf(Yhe,5),a.Gf(Jhe,5),a.Gf(Qhe,5),a.Gf(Xhe,5)),2&e){let s;a.iGM(s=a.CRH())&&(o.containerViewChild=s.first),a.iGM(s=a.CRH())&&(o.filterViewChild=s.first),a.iGM(s=a.CRH())&&(o.accessibleViewChild=s.first),a.iGM(s=a.CRH())&&(o.editableInputViewChild=s.first),a.iGM(s=a.CRH())&&(o.itemsViewChild=s.first),a.iGM(s=a.CRH())&&(o.scroller=s.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(e,o){2&e&&a.ekj("p-inputwrapper-filled",o.filled)("p-inputwrapper-focus",o.focused||o.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",disabled:"disabled",itemSize:"itemSize",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[a._Bn([zpe])],decls:12,vars:25,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","role","combobox",3,"disabled","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","click","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","click","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",3,"click",4,"ngIf"],[1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],[1,"p-dropdown-header",3,"click"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-dropdown-filter-container"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-dropdown-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","onClick"],[1,"p-dropdown-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""]],template:function(e,o){1&e&&(a.TgZ(0,"div",0,1),a.NdJ("click",function(l){return o.onMouseclick(l)}),a.TgZ(2,"div",2)(3,"input",3,4),a.NdJ("focus",function(l){return o.onInputFocus(l)})("blur",function(l){return o.onInputBlur(l)})("keydown",function(l){return o.onKeydown(l,!0)}),a.qZA()(),a.YNc(5,ipe,3,13,"span",5),a.YNc(6,ope,2,4,"span",6),a.YNc(7,spe,2,4,"input",7),a.YNc(8,ape,1,0,"i",8),a.TgZ(9,"div",9),a._UZ(10,"span",10),a.qZA(),a.YNc(11,Upe,9,17,"div",11),a.qZA()),2&e&&(a.Tol(o.styleClass),a.Q6J("ngClass",a.l5B(20,jpe,o.disabled,o.overlayVisible,o.focused,o.showClear&&!o.disabled))("ngStyle",o.style),a.xp6(3),a.Q6J("disabled",o.disabled),a.uIk("id",o.inputId)("placeholder",o.placeholder)("aria-label",o.ariaLabel)("aria-expanded",!1)("aria-labelledby",o.ariaLabelledBy)("tabindex",o.tabindex)("autofocus",o.autofocus)("aria-activedescendant",o.overlayVisible?o.labelId:null),a.xp6(2),a.Q6J("ngIf",!o.editable&&null!=o.label),a.xp6(1),a.Q6J("ngIf",!o.editable&&null==o.label),a.xp6(1),a.Q6J("ngIf",o.editable),a.xp6(1),a.Q6J("ngIf",null!=o.value&&o.showClear&&!o.disabled),a.xp6(1),a.uIk("aria-expanded",o.overlayVisible),a.xp6(1),a.Q6J("ngClass",o.dropdownIcon),a.xp6(1),a.Q6J("ngIf",o.overlayVisible))},dependencies:[lo,Ui,Ji,Hr,uo,Ci,ghe,Ghe,Gpe],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown .p-dropdown-panel{min-width:100%}.p-dropdown-panel{position:absolute;top:0;left:0}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}\n"],encapsulation:2,data:{animation:[Sa("overlayAnimation",[dr(":enter",[ti({opacity:0,transform:"scaleY(0.8)"}),Fr("{{showTransitionParams}}")]),dr(":leave",[Fr("{{hideTransitionParams}}",ti({opacity:0}))])])]},changeDetection:0}),i})(),cL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn,ar,mhe,Yf,sO,ar,sO]}),i})(),Zpe=(()=>{class i{constructor(e,o,s){this.el=e,this.ngModel=o,this.cd=s}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.SBq),a.Y36(b1,8),a.Y36(a.sBO))},i.\u0275dir=a.lG2({type:i,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(e,o){1&e&&a.NdJ("input",function(l){return o.onInput(l)}),2&e&&a.ekj("p-filled",o.filled)}}),i})(),Xz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn]}),i})();const $pe=["input"];function Wpe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"i",6),a.NdJ("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.clear())}),a.qZA()}}const eG=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},tG=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function Kpe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"span",7)(1,"button",8),a.NdJ("mousedown",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onUpButtonMouseDown(s))})("mouseup",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onUpButtonMouseUp())})("mouseleave",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onUpButtonMouseLeave())})("keydown",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onUpButtonKeyDown(s))})("keyup",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onUpButtonKeyUp())}),a.qZA(),a.TgZ(2,"button",8),a.NdJ("mousedown",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onDownButtonMouseDown(s))})("mouseup",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onDownButtonMouseUp())})("mouseleave",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onDownButtonMouseLeave())})("keydown",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onDownButtonKeyDown(s))})("keyup",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onDownButtonKeyUp())}),a.qZA()()}if(2&i){const e=a.oxw();a.xp6(1),a.Tol(e.incrementButtonClass),a.Q6J("ngClass",a.DdM(10,eG))("icon",e.incrementButtonIcon)("disabled",e.disabled),a.xp6(1),a.Tol(e.decrementButtonClass),a.Q6J("ngClass",a.DdM(11,tG))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}function Ype(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"button",8),a.NdJ("mousedown",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onUpButtonMouseDown(s))})("mouseup",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onUpButtonMouseUp())})("mouseleave",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onUpButtonMouseLeave())})("keydown",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onUpButtonKeyDown(s))})("keyup",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onUpButtonKeyUp())}),a.qZA()}if(2&i){const e=a.oxw();a.Tol(e.incrementButtonClass),a.Q6J("ngClass",a.DdM(5,eG))("icon",e.incrementButtonIcon)("disabled",e.disabled)}}function Jpe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"button",8),a.NdJ("mousedown",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onDownButtonMouseDown(s))})("mouseup",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onDownButtonMouseUp())})("mouseleave",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onDownButtonMouseLeave())})("keydown",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onDownButtonKeyDown(s))})("keyup",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onDownButtonKeyUp())}),a.qZA()}if(2&i){const e=a.oxw();a.Tol(e.decrementButtonClass),a.Q6J("ngClass",a.DdM(5,tG))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}const Qpe=function(i,t,e){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":i,"p-inputnumber-buttons-horizontal":t,"p-inputnumber-buttons-vertical":e}},Xpe={provide:Ss,useExisting:(0,a.Gpc)(()=>efe),multi:!0};let efe=(()=>{class i{constructor(e,o){this.el=e,this.cd=o,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.readonly=!1,this.step=1,this.allowEmpty=!0,this.mode="decimal",this.useGrouping=!0,this.showClear=!1,this.onInput=new a.vpe,this.onFocus=new a.vpe,this.onBlur=new a.vpe,this.onKeyDown=new a.vpe,this.onClear=new a.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar=""}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1),this._disabled=e,this.timer&&this.clearTimer()}ngOnChanges(e){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(s=>!!e[s])&&this.updateConstructParser()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const e=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),o=new Map(e.map((s,l)=>[s,l]));this._numeral=new RegExp(`[${e.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=s=>o.get(s)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const e=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${e.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(e){if(null!=e){if("-"===e)return e;if(this.format){let s=new Intl.NumberFormat(this.locale,this.getOptions()).format(e);return this.prefix&&(s=this.prefix+s),this.suffix&&(s+=this.suffix),s}return e.toString()}return""}parseValue(e){let o=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(o){if("-"===o)return o;let s=+o;return isNaN(s)?null:s}return null}repeat(e,o,s){if(this.readonly)return;let l=o||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,s)},l),this.spin(e,s)}spin(e,o){let s=this.step*o,l=this.parseValue(this.input.nativeElement.value)||0,u=this.validateValue(l+s);this.maxlength&&this.maxlength<this.formatValue(u).length||(this.updateInput(u,null,"spin",null),this.updateModel(e,u),this.handleOnInput(e,l,u))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,1),e.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,-1),e.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,-1)}onUserInput(e){this.readonly||(this.isSpecialChar&&(e.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(e){if(this.readonly)return;if(this.lastValue=e.target.value,e.shiftKey||e.altKey)return void(this.isSpecialChar=!0);let o=e.target.selectionStart,s=e.target.selectionEnd,l=e.target.value,u=null;switch(e.altKey&&e.preventDefault(),e.which){case 38:this.spin(e,1),e.preventDefault();break;case 40:this.spin(e,-1),e.preventDefault();break;case 37:this.isNumeralChar(l.charAt(o-1))||e.preventDefault();break;case 39:this.isNumeralChar(l.charAt(o))||e.preventDefault();break;case 13:u=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(u),this.input.nativeElement.setAttribute("aria-valuenow",u),this.updateModel(e,u);break;case 8:if(e.preventDefault(),o===s){const g=l.charAt(o-1),{decimalCharIndex:_,decimalCharIndexWithoutPrefix:w}=this.getDecimalCharIndexes(l);if(this.isNumeralChar(g)){const T=this.getDecimalLength(l);if(this._group.test(g))this._group.lastIndex=0,u=l.slice(0,o-2)+l.slice(o-1);else if(this._decimal.test(g))this._decimal.lastIndex=0,T?this.input.nativeElement.setSelectionRange(o-1,o-1):u=l.slice(0,o-1)+l.slice(o);else if(_>0&&o>_){const D=this.isDecimalMode()&&(this.minFractionDigits||0)<T?"":"0";u=l.slice(0,o-1)+D+l.slice(o)}else 1===w?(u=l.slice(0,o-1)+"0"+l.slice(o),u=this.parseValue(u)>0?u:""):u=l.slice(0,o-1)+l.slice(o)}this.updateValue(e,u,null,"delete-single")}else u=this.deleteRange(l,o,s),this.updateValue(e,u,null,"delete-range");break;case 46:if(e.preventDefault(),o===s){const g=l.charAt(o),{decimalCharIndex:_,decimalCharIndexWithoutPrefix:w}=this.getDecimalCharIndexes(l);if(this.isNumeralChar(g)){const T=this.getDecimalLength(l);if(this._group.test(g))this._group.lastIndex=0,u=l.slice(0,o)+l.slice(o+2);else if(this._decimal.test(g))this._decimal.lastIndex=0,T?this.input.nativeElement.setSelectionRange(o+1,o+1):u=l.slice(0,o)+l.slice(o+1);else if(_>0&&o>_){const D=this.isDecimalMode()&&(this.minFractionDigits||0)<T?"":"0";u=l.slice(0,o)+D+l.slice(o+1)}else 1===w?(u=l.slice(0,o)+"0"+l.slice(o+1),u=this.parseValue(u)>0?u:""):u=l.slice(0,o)+l.slice(o+1)}this.updateValue(e,u,null,"delete-back-single")}else u=this.deleteRange(l,o,s),this.updateValue(e,u,null,"delete-range")}this.onKeyDown.emit(e)}onInputKeyPress(e){if(this.readonly)return;e.preventDefault();let o=e.which||e.keyCode,s=String.fromCharCode(o);const l=this.isDecimalSign(s),u=this.isMinusSign(s);(48<=o&&o<=57||u||l)&&this.insert(e,s,{isDecimalSign:l,isMinusSign:u})}onPaste(e){if(!this.disabled&&!this.readonly){e.preventDefault();let o=(e.clipboardData||window.clipboardData).getData("Text");if(o){let s=this.parseValue(o);null!=s&&this.insert(e,s.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(e){return!(!this._minusSign.test(e)&&"-"!==e||(this._minusSign.lastIndex=0,0))}isDecimalSign(e){return!!this._decimal.test(e)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(e){let o=e.search(this._decimal);this._decimal.lastIndex=0;const l=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:o,decimalCharIndexWithoutPrefix:l}}getCharIndexes(e){const o=e.search(this._decimal);this._decimal.lastIndex=0;const s=e.search(this._minusSign);this._minusSign.lastIndex=0;const l=e.search(this._suffix);this._suffix.lastIndex=0;const u=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:o,minusCharIndex:s,suffixCharIndex:l,currencyCharIndex:u}}insert(e,o,s={isDecimalSign:!1,isMinusSign:!1}){const l=o.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==l)return;let u=this.input.nativeElement.selectionStart,g=this.input.nativeElement.selectionEnd,_=this.input.nativeElement.value.trim();const{decimalCharIndex:w,minusCharIndex:T,suffixCharIndex:D,currencyCharIndex:O}=this.getCharIndexes(_);let F;if(s.isMinusSign)0===u&&(F=_,(-1===T||0!==g)&&(F=this.insertText(_,o,0,g)),this.updateValue(e,F,o,"insert"));else if(s.isDecimalSign)w>0&&u===w?this.updateValue(e,_,o,"insert"):(w>u&&w<g||-1===w&&this.maxFractionDigits)&&(F=this.insertText(_,o,u,g),this.updateValue(e,F,o,"insert"));else{const j=this.numberFormat.resolvedOptions().maximumFractionDigits,Q=u!==g?"range-insert":"insert";if(w>0&&u>w){if(u+o.length-(w+1)<=j){const ae=O>=u?O-1:D>=u?D:_.length;F=_.slice(0,u)+o+_.slice(u+o.length,ae)+_.slice(ae),this.updateValue(e,F,o,Q)}}else F=this.insertText(_,o,u,g),this.updateValue(e,F,o,Q)}}insertText(e,o,s,l){if(2===("."===o?o:o.split(".")).length){const g=e.slice(s,l).search(this._decimal);return this._decimal.lastIndex=0,g>0?e.slice(0,s)+this.formatValue(o)+e.slice(l):e||this.formatValue(o)}return l-s===e.length?this.formatValue(o):0===s?o+e.slice(l):l===e.length?e.slice(0,s)+o:e.slice(0,s)+o+e.slice(l)}deleteRange(e,o,s){let l;return l=s-o===e.length?"":0===o?e.slice(s):s===e.length?e.slice(0,o):e.slice(0,o)+e.slice(s),l}initCursor(){let e=this.input.nativeElement.selectionStart,o=this.input.nativeElement.value,s=o.length,l=null,u=(this.prefixChar||"").length;o=o.replace(this._prefix,""),e-=u;let g=o.charAt(e);if(this.isNumeralChar(g))return e+u;let _=e-1;for(;_>=0;){if(g=o.charAt(_),this.isNumeralChar(g)){l=_+u;break}_--}if(null!==l)this.input.nativeElement.setSelectionRange(l+1,l+1);else{for(_=e;_<s;){if(g=o.charAt(_),this.isNumeralChar(g)){l=_+u;break}_++}null!==l&&this.input.nativeElement.setSelectionRange(l,l)}return l||0}onInputClick(){this.readonly||this.initCursor()}isNumeralChar(e){return!(1!==e.length||!(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(e,o,s,l){let u=this.input.nativeElement.value,g=null;null!=o&&(g=this.parseValue(o),g=g||this.allowEmpty?g:0,this.updateInput(g,s,l,o),this.handleOnInput(e,u,g))}handleOnInput(e,o,s){this.isValueChanged(o,s)&&this.onInput.emit({originalEvent:e,value:s})}isValueChanged(e,o){return null===o&&null!==e||null!=o&&o!==("string"==typeof e?this.parseValue(e):e)}validateValue(e){return"-"===e||null==e?null:null!=this.min&&e<this.min?this.min:null!=this.max&&e>this.max?this.max:e}updateInput(e,o,s,l){o=o||"";let u=this.input.nativeElement.value,g=this.formatValue(e),_=u.length;if(g!==l&&(g=this.concatValues(g,l)),0===_){this.input.nativeElement.value=g,this.input.nativeElement.setSelectionRange(0,0);const T=this.initCursor()+o.length;this.input.nativeElement.setSelectionRange(T,T)}else{let w=this.input.nativeElement.selectionStart,T=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<g.length)return;this.input.nativeElement.value=g;let D=g.length;if("range-insert"===s){const O=this.parseValue((u||"").slice(0,w)),j=(null!==O?O.toString():"").split("").join(`(${this.groupChar})?`),Q=new RegExp(j,"g");Q.test(g);const ae=o.split("").join(`(${this.groupChar})?`),Oe=new RegExp(ae,"g");Oe.test(g.slice(Q.lastIndex)),T=Q.lastIndex+Oe.lastIndex,this.input.nativeElement.setSelectionRange(T,T)}else if(D===_)"insert"===s||"delete-back-single"===s?this.input.nativeElement.setSelectionRange(T+1,T+1):"delete-single"===s?this.input.nativeElement.setSelectionRange(T-1,T-1):("delete-range"===s||"spin"===s)&&this.input.nativeElement.setSelectionRange(T,T);else if("delete-back-single"===s){let O=u.charAt(T-1),F=u.charAt(T),j=_-D,Q=this._group.test(F);Q&&1===j?T+=1:!Q&&this.isNumeralChar(O)&&(T+=-1*j+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(T,T)}else if("-"===u&&"insert"===s){this.input.nativeElement.setSelectionRange(0,0);const F=this.initCursor()+o.length+1;this.input.nativeElement.setSelectionRange(F,F)}else T+=D-_,this.input.nativeElement.setSelectionRange(T,T)}this.input.nativeElement.setAttribute("aria-valuenow",e)}concatValues(e,o){if(e&&o){let s=o.search(this._decimal);return this._decimal.lastIndex=0,-1!==s?e.split(this._decimal)[0]+o.slice(s):e}return e}getDecimalLength(e){if(e){const o=e.split(this._decimal);if(2===o.length)return o[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1;let o=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(o),this.input.nativeElement.setAttribute("aria-valuenow",o),this.updateModel(e,o),this.onBlur.emit(e)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(e,o){this.value!==o&&(this.value=o,this.onModelChange(o)),this.onModelTouched()}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.SBq),a.Y36(a.sBO))},i.\u0275cmp=a.Xpm({type:i,selectors:[["p-inputNumber"]],viewQuery:function(e,o){if(1&e&&a.Gf($pe,5),2&e){let s;a.iGM(s=a.CRH())&&(o.input=s.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,o){2&e&&a.ekj("p-inputwrapper-filled",o.filled)("p-inputwrapper-focus",o.focused)("p-inputnumber-clearable",o.showClear&&"vertical"!=o.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[a._Bn([Xpe]),a.TTD],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-clear-icon","pi","pi-times",3,"click"],[1,"p-inputnumber-button-group"],["type","button","pButton","",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(e,o){1&e&&(a.TgZ(0,"span",0)(1,"input",1,2),a.NdJ("input",function(l){return o.onUserInput(l)})("keydown",function(l){return o.onInputKeyDown(l)})("keypress",function(l){return o.onInputKeyPress(l)})("paste",function(l){return o.onPaste(l)})("click",function(){return o.onInputClick()})("focus",function(l){return o.onInputFocus(l)})("blur",function(l){return o.onInputBlur(l)}),a.qZA(),a.YNc(3,Wpe,1,0,"i",3),a.YNc(4,Kpe,3,12,"span",4),a.YNc(5,Ype,1,6,"button",5),a.YNc(6,Jpe,1,6,"button",5),a.qZA()),2&e&&(a.Tol(o.styleClass),a.Q6J("ngClass",a.kEZ(28,Qpe,o.showButtons&&"stacked"===o.buttonLayout,o.showButtons&&"horizontal"===o.buttonLayout,o.showButtons&&"vertical"===o.buttonLayout))("ngStyle",o.style),a.xp6(1),a.Tol(o.inputStyleClass),a.Q6J("ngClass","p-inputnumber-input")("ngStyle",o.inputStyle)("value",o.formattedValue())("disabled",o.disabled)("readonly",o.readonly),a.uIk("placeholder",o.placeholder)("title",o.title)("id",o.inputId)("size",o.size)("name",o.name)("autocomplete",o.autocomplete)("maxlength",o.maxlength)("tabindex",o.tabindex)("aria-label",o.ariaLabel)("aria-required",o.ariaRequired)("required",o.required)("min",o.min)("max",o.max),a.xp6(2),a.Q6J("ngIf","vertical"!=o.buttonLayout&&o.showClear&&o.value),a.xp6(1),a.Q6J("ngIf",o.showButtons&&"stacked"===o.buttonLayout),a.xp6(1),a.Q6J("ngIf",o.showButtons&&"stacked"!==o.buttonLayout),a.xp6(1),a.Q6J("ngIf",o.showButtons&&"stacked"!==o.buttonLayout))},dependencies:[lo,Ji,uo,Zpe,I2],styles:["p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),i})(),uL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn,Xz,qS]}),i})(),yfe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn,cL,uL,w1,ar,Yf,cL,uL,w1,ar]}),i})();function vfe(i,t){if(1&i&&a._UZ(0,"span",8),2&i){const e=a.oxw(2).$implicit;a.Tol(e.icon),a.Q6J("ngClass","p-button-icon p-button-icon-left")}}function bfe(i,t){if(1&i&&(a.ynx(0),a.YNc(1,vfe,1,3,"span",6),a.TgZ(2,"span",7),a._uU(3),a.qZA(),a.BQk()),2&i){const e=a.oxw().$implicit,o=a.oxw();a.xp6(1),a.Q6J("ngIf",e.icon),a.xp6(2),a.Oqu(o.getOptionLabel(e))}}function wfe(i,t){1&i&&a.GkF(0)}const Cfe=function(i,t){return{$implicit:i,index:t}};function Tfe(i,t){if(1&i&&a.YNc(0,wfe,1,0,"ng-container",9),2&i){const e=a.oxw(),o=e.$implicit,s=e.index,l=a.oxw();a.Q6J("ngTemplateOutlet",l.itemTemplate)("ngTemplateOutletContext",a.WLB(2,Cfe,o,s))}}const Efe=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-button-icon-only":e}};function xfe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",2,3),a.NdJ("click",function(s){const l=a.CHM(e),u=l.$implicit,g=l.index,_=a.oxw();return a.KtG(_.onItemClick(s,u,g))})("keydown.enter",function(s){const l=a.CHM(e),u=l.$implicit,g=l.index,_=a.oxw();return a.KtG(_.onItemClick(s,u,g))})("blur",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onBlur())}),a.YNc(2,bfe,4,2,"ng-container",4),a.YNc(3,Tfe,1,5,"ng-template",null,5,a.W1O),a.qZA()}if(2&i){const e=t.$implicit,o=a.MAs(4),s=a.oxw();a.Tol(e.styleClass),a.Q6J("ngClass",a.kEZ(10,Efe,s.isSelected(e),s.disabled||s.isOptionDisabled(e),e.icon&&!s.getOptionLabel(e))),a.uIk("aria-pressed",s.isSelected(e))("title",e.title)("aria-label",e.label)("tabindex",s.disabled?null:s.tabindex)("aria-labelledby",s.getOptionLabel(e)),a.xp6(2),a.Q6J("ngIf",!s.itemTemplate)("ngIfElse",o)}}const Sfe={provide:Ss,useExisting:(0,a.Gpc)(()=>Dfe),multi:!0};let Dfe=(()=>{class i{constructor(e){this.cd=e,this.tabindex=0,this.onOptionClick=new a.vpe,this.onChange=new a.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}getOptionLabel(e){return this.optionLabel?It.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?It.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?It.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onItemClick(e,o,s){if(!this.disabled&&!this.isOptionDisabled(o)){if(this.multiple)this.isSelected(o)?this.removeOption(o):this.value=[...this.value||[],this.getOptionValue(o)],this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value});else{let l=this.getOptionValue(o);this.value!==l&&(this.value=this.getOptionValue(o),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}this.onOptionClick.emit({originalEvent:e,option:o,index:s})}}onBlur(){this.onModelTouched()}removeOption(e){this.value=this.value.filter(o=>!It.equals(o,this.getOptionValue(e),this.dataKey))}isSelected(e){let o=!1,s=this.getOptionValue(e);if(this.multiple){if(this.value)for(let l of this.value)if(It.equals(l,s,this.dataKey)){o=!0;break}}else o=It.equals(this.getOptionValue(e),this.value,this.dataKey);return o}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.sBO))},i.\u0275cmp=a.Xpm({type:i,selectors:[["p-selectButton"]],contentQueries:function(e,o,s){if(1&e&&a.Suo(s,a.Rgc,5),2&e){let l;a.iGM(l=a.CRH())&&(o.itemTemplate=l.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",tabindex:"tabindex",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[a._Bn([Sfe])],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["class","p-button p-component","role","button","pRipple","",3,"class","ngClass","click","keydown.enter","blur",4,"ngFor","ngForOf"],["role","button","pRipple","",1,"p-button","p-component",3,"ngClass","click","keydown.enter","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,o){1&e&&(a.TgZ(0,"div",0),a.YNc(1,xfe,5,14,"div",1),a.qZA()),2&e&&(a.Tol(o.styleClass),a.Q6J("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",o.style),a.xp6(1),a.Q6J("ngForOf",o.options))},dependencies:[lo,Ui,Ji,Hr,uo,S0],styles:[".p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default}.p-button-icon-only{justify-content:center}.p-button-icon-only .p-button-label{visibility:hidden;width:0;flex:0 0 auto}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}\n"],encapsulation:2,changeDetection:0}),i})(),Ife=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn,Yf]}),i})();const Mfe=function(i,t,e){return{"p-checkbox-label-active":i,"p-disabled":t,"p-checkbox-label-focus":e}};function Afe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"label",7),a.NdJ("click",function(s){a.CHM(e);const l=a.oxw(),u=a.MAs(3);return a.KtG(l.onClick(s,u))}),a._uU(1),a.qZA()}if(2&i){const e=a.oxw();a.Q6J("ngClass",a.kEZ(3,Mfe,null!=e.value,e.disabled,e.focused)),a.uIk("for",e.inputId),a.xp6(1),a.Oqu(e.label)}}const kfe=function(i,t){return{"p-checkbox p-component":!0,"p-checkbox-disabled":i,"p-checkbox-focused":t}},Ofe=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-focus":e}},Rfe={provide:Ss,useExisting:(0,a.Gpc)(()=>Pfe),multi:!0};let Pfe=(()=>{class i{constructor(e){this.cd=e,this.checkboxTrueIcon="pi pi-check",this.checkboxFalseIcon="pi pi-times",this.onChange=new a.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,o){!this.disabled&&!this.readonly&&(this.toggle(e),this.focused=!0,o.focus())}onKeydown(e){32==e.keyCode&&e.preventDefault()}onKeyup(e){32==e.keyCode&&!this.readonly&&(this.toggle(e),e.preventDefault())}toggle(e){null==this.value||null==this.value?this.value=!0:1==this.value?this.value=!1:0==this.value&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}writeValue(e){this.value=e,this.cd.markForCheck()}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.sBO))},i.\u0275cmp=a.Xpm({type:i,selectors:[["p-triStateCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",name:"name",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:"readonly",checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon"},outputs:{onChange:"onChange"},features:[a._Bn([Rfe])],decls:7,vars:21,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","text","inputmode","none",3,"name","readonly","disabled","keyup","keydown","focus","blur"],["input",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],[1,"p-checkbox-label",3,"ngClass","click"]],template:function(e,o){if(1&e){const s=a.EpF();a.TgZ(0,"div",0)(1,"div",1)(2,"input",2,3),a.NdJ("keyup",function(u){return o.onKeyup(u)})("keydown",function(u){return o.onKeydown(u)})("focus",function(){return o.onFocus()})("blur",function(){return o.onBlur()}),a.qZA()(),a.TgZ(4,"div",4),a.NdJ("click",function(u){a.CHM(s);const g=a.MAs(3);return a.KtG(o.onClick(u,g))}),a._UZ(5,"span",5),a.qZA()(),a.YNc(6,Afe,2,7,"label",6)}2&e&&(a.Tol(o.styleClass),a.Q6J("ngStyle",o.style)("ngClass",a.WLB(14,kfe,o.disabled,o.focused)),a.xp6(2),a.Q6J("name",o.name)("readonly",o.readonly)("disabled",o.disabled),a.uIk("id",o.inputId)("tabindex",o.tabindex)("aria-labelledby",o.ariaLabelledBy),a.xp6(2),a.Q6J("ngClass",a.kEZ(17,Ofe,null!=o.value,o.disabled,o.focused)),a.uIk("aria-checked",!0===o.value),a.xp6(1),a.Q6J("ngClass",!0===o.value?o.checkboxTrueIcon:!1===o.value?o.checkboxFalseIcon:""),a.xp6(1),a.Q6J("ngIf",o.label))},dependencies:[lo,Ji,uo],encapsulation:2,changeDetection:0}),i})(),Nfe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn]}),i})();const Ffe=["container"],Lfe=["inputfield"],Vfe=["contentWrapper"];function Hfe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"i",8),a.NdJ("click",function(){a.CHM(e);const s=a.oxw(2);return a.KtG(s.clear())}),a.qZA()}}function Bfe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"button",9),a.NdJ("click",function(s){a.CHM(e),a.oxw();const l=a.MAs(1),u=a.oxw();return a.KtG(u.onButtonClick(s,l))}),a.qZA()}if(2&i){const e=a.oxw(2);a.Q6J("icon",e.icon)("disabled",e.disabled),a.uIk("aria-label",e.iconAriaLabel)}}function Ufe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"input",4,5),a.NdJ("focus",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onInputFocus(s))})("keydown",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onInputKeydown(s))})("click",function(){a.CHM(e);const s=a.oxw();return a.KtG(s.onInputClick())})("blur",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onInputBlur(s))})("input",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onUserInput(s))}),a.qZA(),a.YNc(2,Hfe,1,0,"i",6),a.YNc(3,Bfe,1,3,"button",7)}if(2&i){const e=a.oxw();a.Tol(e.inputStyleClass),a.Q6J("value",e.inputFieldValue)("readonly",e.readonlyInput)("ngStyle",e.inputStyle)("placeholder",e.placeholder||"")("disabled",e.disabled)("ngClass","p-inputtext p-component"),a.uIk("id",e.inputId)("name",e.name)("required",e.required)("aria-required",e.required)("tabindex",e.tabindex)("inputmode",e.touchUI?"off":null)("aria-labelledby",e.ariaLabelledBy),a.xp6(2),a.Q6J("ngIf",e.showClear&&!e.disabled&&null!=e.value),a.xp6(1),a.Q6J("ngIf",e.showIcon)}}function jfe(i,t){1&i&&a.GkF(0)}function zfe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"button",30),a.NdJ("keydown",function(s){a.CHM(e);const l=a.oxw(4);return a.KtG(l.onContainerButtonKeydown(s))})("click",function(s){a.CHM(e);const l=a.oxw(4);return a.KtG(l.onPrevButtonClick(s))}),a._UZ(1,"span",31),a.qZA()}}function Gfe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"button",32),a.NdJ("click",function(s){a.CHM(e);const l=a.oxw(4);return a.KtG(l.switchToMonthView(s))})("keydown",function(s){a.CHM(e);const l=a.oxw(4);return a.KtG(l.onContainerButtonKeydown(s))}),a._uU(1),a.qZA()}if(2&i){const e=a.oxw().$implicit,o=a.oxw(3);a.Q6J("disabled",o.switchViewButtonDisabled()),a.xp6(1),a.hij(" ",o.getMonthName(e.month)," ")}}function qfe(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"button",33),a.NdJ("click",function(s){a.CHM(e);const l=a.oxw(4);return a.KtG(l.switchToYearView(s))})("keydown",function(s){a.CHM(e);const l=a.oxw(4);return a.KtG(l.onContainerButtonKeydown(s))}),a._uU(1),a.qZA()}if(2&i){const e=a.oxw().$implicit,o=a.oxw(3);a.Q6J("disabled",o.switchViewButtonDisabled()),a.xp6(1),a.hij(" ",o.getYear(e)," ")}}function Zfe(i,t){if(1&i&&(a.ynx(0),a._uU(1),a.BQk()),2&i){const e=a.oxw(5);a.xp6(1),a.AsE("",e.yearPickerValues()[0]," - ",e.yearPickerValues()[e.yearPickerValues().length-1],"")}}function $fe(i,t){1&i&&a.GkF(0)}const nG=function(i){return{$implicit:i}};function Wfe(i,t){if(1&i&&(a.TgZ(0,"span",34),a.YNc(1,Zfe,2,2,"ng-container",13),a.YNc(2,$fe,1,0,"ng-container",35),a.qZA()),2&i){const e=a.oxw(4);a.xp6(1),a.Q6J("ngIf",!e.decadeTemplate),a.xp6(1),a.Q6J("ngTemplateOutlet",e.decadeTemplate)("ngTemplateOutletContext",a.VKq(3,nG,e.yearPickerValues))}}function Kfe(i,t){if(1&i&&(a.TgZ(0,"th",41)(1,"span"),a._uU(2),a.qZA()()),2&i){const e=a.oxw(5);a.xp6(2),a.Oqu(e.getTranslation("weekHeader"))}}function Yfe(i,t){if(1&i&&(a.TgZ(0,"th",42)(1,"span"),a._uU(2),a.qZA()()),2&i){const e=t.$implicit;a.xp6(2),a.Oqu(e)}}function Jfe(i,t){if(1&i&&(a.TgZ(0,"td",45)(1,"span",46),a._uU(2),a.qZA()()),2&i){const e=a.oxw().index,o=a.oxw(2).$implicit;a.xp6(2),a.hij(" ",o.weekNumbers[e]," ")}}function Qfe(i,t){if(1&i&&(a.ynx(0),a._uU(1),a.BQk()),2&i){const e=a.oxw(2).$implicit;a.xp6(1),a.Oqu(e.day)}}function Xfe(i,t){1&i&&a.GkF(0)}const ege=function(i,t){return{"p-highlight":i,"p-disabled":t}};function tge(i,t){if(1&i){const e=a.EpF();a.ynx(0),a.TgZ(1,"span",48),a.NdJ("click",function(s){a.CHM(e);const l=a.oxw().$implicit,u=a.oxw(6);return a.KtG(u.onDateSelect(s,l))})("keydown",function(s){a.CHM(e);const l=a.oxw().$implicit,u=a.oxw(3).index,g=a.oxw(3);return a.KtG(g.onDateCellKeydown(s,l,u))}),a.YNc(2,Qfe,2,1,"ng-container",13),a.YNc(3,Xfe,1,0,"ng-container",35),a.qZA(),a.BQk()}if(2&i){const e=a.oxw().$implicit,o=a.oxw(6);a.xp6(1),a.Q6J("ngClass",a.WLB(4,ege,o.isSelected(e),!e.selectable)),a.xp6(1),a.Q6J("ngIf",!o.dateTemplate),a.xp6(1),a.Q6J("ngTemplateOutlet",o.dateTemplate)("ngTemplateOutletContext",a.VKq(7,nG,e))}}const nge=function(i,t){return{"p-datepicker-other-month":i,"p-datepicker-today":t}};function ige(i,t){if(1&i&&(a.TgZ(0,"td",47),a.YNc(1,tge,4,9,"ng-container",13),a.qZA()),2&i){const e=t.$implicit,o=a.oxw(6);a.Q6J("ngClass",a.WLB(2,nge,e.otherMonth,e.today)),a.xp6(1),a.Q6J("ngIf",!e.otherMonth||o.showOtherMonths)}}function rge(i,t){if(1&i&&(a.TgZ(0,"tr"),a.YNc(1,Jfe,3,1,"td",43),a.YNc(2,ige,2,5,"td",44),a.qZA()),2&i){const e=t.$implicit,o=a.oxw(5);a.xp6(1),a.Q6J("ngIf",o.showWeek),a.xp6(1),a.Q6J("ngForOf",e)}}function oge(i,t){if(1&i&&(a.TgZ(0,"div",36)(1,"table",37)(2,"thead")(3,"tr"),a.YNc(4,Kfe,3,1,"th",38),a.YNc(5,Yfe,3,1,"th",39),a.qZA()(),a.TgZ(6,"tbody"),a.YNc(7,rge,3,2,"tr",40),a.qZA()()()),2&i){const e=a.oxw().$implicit,o=a.oxw(3);a.xp6(4),a.Q6J("ngIf",o.showWeek),a.xp6(1),a.Q6J("ngForOf",o.weekDays),a.xp6(2),a.Q6J("ngForOf",e.dates)}}function sge(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",20)(1,"div",21),a.YNc(2,zfe,2,0,"button",22),a.TgZ(3,"div",23),a.YNc(4,Gfe,2,2,"button",24),a.YNc(5,qfe,2,2,"button",25),a.YNc(6,Wfe,3,5,"span",26),a.qZA(),a.TgZ(7,"button",27),a.NdJ("keydown",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.onContainerButtonKeydown(s))})("click",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.onNextButtonClick(s))}),a._UZ(8,"span",28),a.qZA()(),a.YNc(9,oge,8,3,"div",29),a.qZA()}if(2&i){const e=t.index,o=a.oxw(3);a.xp6(2),a.Q6J("ngIf",0===e),a.xp6(2),a.Q6J("ngIf","date"===o.currentView),a.xp6(1),a.Q6J("ngIf","year"!==o.currentView),a.xp6(1),a.Q6J("ngIf","year"===o.currentView),a.xp6(1),a.Udp("display",1===o.numberOfMonths||e===o.numberOfMonths-1?"inline-flex":"none"),a.xp6(2),a.Q6J("ngIf","date"===o.currentView)}}const iG=function(i){return{"p-highlight":i}};function age(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"span",51),a.NdJ("click",function(s){const u=a.CHM(e).index,g=a.oxw(4);return a.KtG(g.onMonthSelect(s,u))})("keydown",function(s){const u=a.CHM(e).index,g=a.oxw(4);return a.KtG(g.onMonthCellKeydown(s,u))}),a._uU(1),a.qZA()}if(2&i){const e=t.$implicit,o=t.index,s=a.oxw(4);a.Q6J("ngClass",a.VKq(2,iG,s.isMonthSelected(o))),a.xp6(1),a.hij(" ",e," ")}}function lge(i,t){if(1&i&&(a.TgZ(0,"div",49),a.YNc(1,age,2,4,"span",50),a.qZA()),2&i){const e=a.oxw(3);a.xp6(1),a.Q6J("ngForOf",e.monthPickerValues())}}function cge(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"span",54),a.NdJ("click",function(s){const u=a.CHM(e).$implicit,g=a.oxw(4);return a.KtG(g.onYearSelect(s,u))})("keydown",function(s){const u=a.CHM(e).$implicit,g=a.oxw(4);return a.KtG(g.onYearCellKeydown(s,u))}),a._uU(1),a.qZA()}if(2&i){const e=t.$implicit,o=a.oxw(4);a.Q6J("ngClass",a.VKq(2,iG,o.isYearSelected(e))),a.xp6(1),a.hij(" ",e," ")}}function uge(i,t){if(1&i&&(a.TgZ(0,"div",52),a.YNc(1,cge,2,4,"span",53),a.qZA()),2&i){const e=a.oxw(3);a.xp6(1),a.Q6J("ngForOf",e.yearPickerValues())}}function dge(i,t){if(1&i&&(a.ynx(0),a.TgZ(1,"div",16),a.YNc(2,sge,10,7,"div",17),a.qZA(),a.YNc(3,lge,2,1,"div",18),a.YNc(4,uge,2,1,"div",19),a.BQk()),2&i){const e=a.oxw(2);a.xp6(2),a.Q6J("ngForOf",e.months),a.xp6(1),a.Q6J("ngIf","month"===e.currentView),a.xp6(1),a.Q6J("ngIf","year"===e.currentView)}}function hge(i,t){1&i&&(a.ynx(0),a._uU(1,"0"),a.BQk())}function pge(i,t){1&i&&(a.ynx(0),a._uU(1,"0"),a.BQk())}function fge(i,t){if(1&i&&(a.TgZ(0,"div",60)(1,"span"),a._uU(2),a.qZA()()),2&i){const e=a.oxw(3);a.xp6(2),a.Oqu(e.timeSeparator)}}function gge(i,t){1&i&&(a.ynx(0),a._uU(1,"0"),a.BQk())}function mge(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",65)(1,"button",57),a.NdJ("keydown",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.onContainerButtonKeydown(s))})("keydown.enter",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.incrementSecond(s))})("keydown.space",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.incrementSecond(s))})("mousedown",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.onTimePickerElementMouseDown(s,2,1))})("mouseup",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.onTimePickerElementMouseUp(s))})("keyup.enter",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.onTimePickerElementMouseUp(s))})("keyup.space",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.onTimePickerElementMouseUp(s))})("mouseleave",function(){a.CHM(e);const s=a.oxw(3);return a.KtG(s.onTimePickerElementMouseLeave())}),a._UZ(2,"span",58),a.qZA(),a.TgZ(3,"span"),a.YNc(4,gge,2,0,"ng-container",13),a._uU(5),a.qZA(),a.TgZ(6,"button",57),a.NdJ("keydown",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.onContainerButtonKeydown(s))})("keydown.enter",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.decrementSecond(s))})("keydown.space",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.decrementSecond(s))})("mousedown",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.onTimePickerElementMouseDown(s,2,-1))})("mouseup",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.onTimePickerElementMouseUp(s))})("keyup.enter",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.onTimePickerElementMouseUp(s))})("keyup.space",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.onTimePickerElementMouseUp(s))})("mouseleave",function(){a.CHM(e);const s=a.oxw(3);return a.KtG(s.onTimePickerElementMouseLeave())}),a._UZ(7,"span",59),a.qZA()()}if(2&i){const e=a.oxw(3);a.xp6(4),a.Q6J("ngIf",e.currentSecond<10),a.xp6(1),a.Oqu(e.currentSecond)}}function _ge(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",66)(1,"button",67),a.NdJ("keydown",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.onContainerButtonKeydown(s))})("click",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.toggleAMPM(s))})("keydown.enter",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.toggleAMPM(s))}),a._UZ(2,"span",58),a.qZA(),a.TgZ(3,"span"),a._uU(4),a.qZA(),a.TgZ(5,"button",67),a.NdJ("keydown",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.onContainerButtonKeydown(s))})("click",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.toggleAMPM(s))})("keydown.enter",function(s){a.CHM(e);const l=a.oxw(3);return a.KtG(l.toggleAMPM(s))}),a._UZ(6,"span",59),a.qZA()()}if(2&i){const e=a.oxw(3);a.xp6(4),a.Oqu(e.pm?"PM":"AM")}}function yge(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",55)(1,"div",56)(2,"button",57),a.NdJ("keydown",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onContainerButtonKeydown(s))})("keydown.enter",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.incrementHour(s))})("keydown.space",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.incrementHour(s))})("mousedown",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onTimePickerElementMouseDown(s,0,1))})("mouseup",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onTimePickerElementMouseUp(s))})("keyup.enter",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onTimePickerElementMouseUp(s))})("keyup.space",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onTimePickerElementMouseUp(s))})("mouseleave",function(){a.CHM(e);const s=a.oxw(2);return a.KtG(s.onTimePickerElementMouseLeave())}),a._UZ(3,"span",58),a.qZA(),a.TgZ(4,"span"),a.YNc(5,hge,2,0,"ng-container",13),a._uU(6),a.qZA(),a.TgZ(7,"button",57),a.NdJ("keydown",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onContainerButtonKeydown(s))})("keydown.enter",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.decrementHour(s))})("keydown.space",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.decrementHour(s))})("mousedown",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onTimePickerElementMouseDown(s,0,-1))})("mouseup",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onTimePickerElementMouseUp(s))})("keyup.enter",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onTimePickerElementMouseUp(s))})("keyup.space",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onTimePickerElementMouseUp(s))})("mouseleave",function(){a.CHM(e);const s=a.oxw(2);return a.KtG(s.onTimePickerElementMouseLeave())}),a._UZ(8,"span",59),a.qZA()(),a.TgZ(9,"div",60)(10,"span"),a._uU(11),a.qZA()(),a.TgZ(12,"div",61)(13,"button",57),a.NdJ("keydown",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onContainerButtonKeydown(s))})("keydown.enter",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.incrementMinute(s))})("keydown.space",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.incrementMinute(s))})("mousedown",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onTimePickerElementMouseDown(s,1,1))})("mouseup",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onTimePickerElementMouseUp(s))})("keyup.enter",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onTimePickerElementMouseUp(s))})("keyup.space",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onTimePickerElementMouseUp(s))})("mouseleave",function(){a.CHM(e);const s=a.oxw(2);return a.KtG(s.onTimePickerElementMouseLeave())}),a._UZ(14,"span",58),a.qZA(),a.TgZ(15,"span"),a.YNc(16,pge,2,0,"ng-container",13),a._uU(17),a.qZA(),a.TgZ(18,"button",57),a.NdJ("keydown",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onContainerButtonKeydown(s))})("keydown.enter",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.decrementMinute(s))})("keydown.space",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.decrementMinute(s))})("mousedown",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onTimePickerElementMouseDown(s,1,-1))})("mouseup",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onTimePickerElementMouseUp(s))})("keyup.enter",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onTimePickerElementMouseUp(s))})("keyup.space",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onTimePickerElementMouseUp(s))})("mouseleave",function(){a.CHM(e);const s=a.oxw(2);return a.KtG(s.onTimePickerElementMouseLeave())}),a._UZ(19,"span",59),a.qZA()(),a.YNc(20,fge,3,1,"div",62),a.YNc(21,mge,8,2,"div",63),a.YNc(22,_ge,7,1,"div",64),a.qZA()}if(2&i){const e=a.oxw(2);a.xp6(5),a.Q6J("ngIf",e.currentHour<10),a.xp6(1),a.Oqu(e.currentHour),a.xp6(5),a.Oqu(e.timeSeparator),a.xp6(5),a.Q6J("ngIf",e.currentMinute<10),a.xp6(1),a.Oqu(e.currentMinute),a.xp6(3),a.Q6J("ngIf",e.showSeconds),a.xp6(1),a.Q6J("ngIf",e.showSeconds),a.xp6(1),a.Q6J("ngIf","12"==e.hourFormat)}}const rG=function(i){return[i]};function vge(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",68)(1,"button",69),a.NdJ("keydown",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onContainerButtonKeydown(s))})("click",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onTodayButtonClick(s))}),a.qZA(),a.TgZ(2,"button",69),a.NdJ("keydown",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onContainerButtonKeydown(s))})("click",function(s){a.CHM(e);const l=a.oxw(2);return a.KtG(l.onClearButtonClick(s))}),a.qZA()()}if(2&i){const e=a.oxw(2);a.xp6(1),a.Q6J("label",e.getTranslation("today"))("ngClass",a.VKq(4,rG,e.todayButtonStyleClass)),a.xp6(1),a.Q6J("label",e.getTranslation("clear"))("ngClass",a.VKq(6,rG,e.clearButtonStyleClass))}}function bge(i,t){1&i&&a.GkF(0)}const wge=function(i,t,e,o,s,l){return{"p-datepicker p-component":!0,"p-datepicker-inline":i,"p-disabled":t,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":o,"p-datepicker-monthpicker":s,"p-datepicker-touch-ui":l}},oG=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},Cge=function(i){return{value:"visibleTouchUI",params:i}},Tge=function(i){return{value:"visible",params:i}};function Ege(i,t){if(1&i){const e=a.EpF();a.TgZ(0,"div",10,11),a.NdJ("@overlayAnimation.start",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onOverlayAnimationStart(s))})("@overlayAnimation.done",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onOverlayAnimationDone(s))})("click",function(s){a.CHM(e);const l=a.oxw();return a.KtG(l.onOverlayClick(s))}),a.Hsn(2),a.YNc(3,jfe,1,0,"ng-container",12),a.YNc(4,dge,5,3,"ng-container",13),a.YNc(5,yge,23,8,"div",14),a.YNc(6,vge,3,8,"div",15),a.Hsn(7,1),a.YNc(8,bge,1,0,"ng-container",12),a.qZA()}if(2&i){const e=a.oxw();a.Tol(e.panelStyleClass),a.Q6J("ngStyle",e.panelStyle)("ngClass",a.HTZ(11,wge,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,"month"===e.view,e.touchUI))("@overlayAnimation",e.touchUI?a.VKq(21,Cge,a.WLB(18,oG,e.showTransitionOptions,e.hideTransitionOptions)):a.VKq(26,Tge,a.WLB(23,oG,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",!0===e.inline),a.xp6(3),a.Q6J("ngTemplateOutlet",e.headerTemplate),a.xp6(1),a.Q6J("ngIf",!e.timeOnly),a.xp6(1),a.Q6J("ngIf",(e.showTime||e.timeOnly)&&"date"===e.currentView),a.xp6(1),a.Q6J("ngIf",e.showButtonBar),a.xp6(2),a.Q6J("ngTemplateOutlet",e.footerTemplate)}}const xge=[[["p-header"]],[["p-footer"]]],Sge=function(i,t,e,o){return{"p-calendar":!0,"p-calendar-w-btn":i,"p-calendar-timeonly":t,"p-calendar-disabled":e,"p-focus":o}},Dge=["p-header","p-footer"],Ige={provide:Ss,useExisting:(0,a.Gpc)(()=>Mge),multi:!0};let Mge=(()=>{class i{constructor(e,o,s,l,u,g){this.el=e,this.renderer=o,this.cd=s,this.zone=l,this.config=u,this.overlayService=g,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.showClear=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.timeSeparator=":",this.focusTrap=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new a.vpe,this.onBlur=new a.vpe,this.onClose=new a.vpe,this.onSelect=new a.vpe,this.onClear=new a.vpe,this.onInput=new a.vpe,this.onTodayClick=new a.vpe,this.onClearClick=new a.vpe,this.onMonthChange=new a.vpe,this.onYearChange=new a.vpe,this.onClickOutside=new a.vpe,this.onShow=new a.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this._numberOfMonths=1,this._view="date",this.convertTo24Hour=function(_,w){return"12"==this.hourFormat?12===_?w?12:0:w?_+12:_:_}}set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.focus||this.initFocusableCell())}get view(){return this._view}set view(e){this._view=e,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){const o=e||new Date;this.currentMonth=o.getMonth(),this.currentYear=o.getFullYear(),this.initTime(o),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(e){this._minDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){const o=e.split(":"),s=parseInt(o[0]),l=parseInt(o[1]);this.populateYearOptions(s,l)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(e){this._responsiveOptions=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(e){this._numberOfMonths=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(e){this._firstDayOfWeek=e,this.createWeekDays()}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){this.attributeSelector=Jo();const e=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":default:this.dateTemplate=e.template;break;case"decade":this.decadeTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),this.disabled||(this.initFocusableCell(),1===this.numberOfMonths&&(this.contentViewChild.nativeElement.style.width=ht.getOuterWidth(this.containerViewChild.nativeElement)+"px")))}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,o){this.yearOptions=[];for(let s=e;s<=o;s++)this.yearOptions.push(s)}createWeekDays(){this.weekDays=[];let e=this.getFirstDateOfWeek(),o=this.getTranslation(Mo.DAY_NAMES_MIN);for(let s=0;s<7;s++)this.weekDays.push(o[e]),e=6==e?0:++e}monthPickerValues(){let e=[];for(let o=0;o<=11;o++)e.push(this.config.getTranslation("monthNamesShort")[o]);return e}yearPickerValues(){let e=[],o=this.currentYear-this.currentYear%10;for(let s=0;s<10;s++)e.push(o+s);return e}createMonths(e,o){this.months=this.months=[];for(let s=0;s<this.numberOfMonths;s++){let l=e+s,u=o;l>11&&(l=l%11-1,u=o+1),this.months.push(this.createMonth(l,u))}}getWeekNumber(e){let o=new Date(e.getTime());o.setDate(o.getDate()+4-(o.getDay()||7));let s=o.getTime();return o.setMonth(0),o.setDate(1),Math.floor(Math.round((s-o.getTime())/864e5)/7)+1}createMonth(e,o){let s=[],l=this.getFirstDayOfMonthIndex(e,o),u=this.getDaysCountInMonth(e,o),g=this.getDaysCountInPrevMonth(e,o),_=1,w=new Date,T=[],D=Math.ceil((u+l)/7);for(let O=0;O<D;O++){let F=[];if(0==O){for(let Q=g-l+1;Q<=g;Q++){let ae=this.getPreviousMonthAndYear(e,o);F.push({day:Q,month:ae.month,year:ae.year,otherMonth:!0,today:this.isToday(w,Q,ae.month,ae.year),selectable:this.isSelectable(Q,ae.month,ae.year,!0)})}let j=7-F.length;for(let Q=0;Q<j;Q++)F.push({day:_,month:e,year:o,today:this.isToday(w,_,e,o),selectable:this.isSelectable(_,e,o,!1)}),_++}else for(let j=0;j<7;j++){if(_>u){let Q=this.getNextMonthAndYear(e,o);F.push({day:_-u,month:Q.month,year:Q.year,otherMonth:!0,today:this.isToday(w,_-u,Q.month,Q.year),selectable:this.isSelectable(_-u,Q.month,Q.year,!0)})}else F.push({day:_,month:e,year:o,today:this.isToday(w,_,e,o),selectable:this.isSelectable(_,e,o,!1)});_++}this.showWeek&&T.push(this.getWeekNumber(new Date(F[0].year,F[0].month,F[0].day))),s.push(F)}return{month:e,year:o,dates:s,weekNumbers:T}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-e,this.yearOptions[this.yearOptions.length-1]-e)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+e,this.yearOptions[this.yearOptions.length-1]+e)}}switchToMonthView(e){this.setCurrentView("month"),e.preventDefault()}switchToYearView(e){this.setCurrentView("year"),e.preventDefault()}onDateSelect(e,o){!this.disabled&&o.selectable?(this.isMultipleSelection()&&this.isSelected(o)?(this.value=this.value.filter((s,l)=>!this.isDateEquals(s,o)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(o)&&this.selectDate(o),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()):e.preventDefault()}shouldSelectDate(e){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(e,o){"month"===this.view?this.onDateSelect(e,{year:this.currentYear,month:o,day:1,selectable:!0}):(this.currentMonth=o,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(e,o){"year"===this.view?this.onDateSelect(e,{year:o,month:0,day:1,selectable:!0}):(this.currentYear=o,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let e="";if(this.value)if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let o=0;o<this.value.length;o++)e+=this.formatDateTime(this.value[o]),o!==this.value.length-1&&(e+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let s=this.value[1];e=this.formatDateTime(this.value[0]),s&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(s))}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let o=this.keepInvalid?e:null;return this.isValidDate(e)&&(this.timeOnly?o=this.formatTime(e):(o=this.formatDate(e,this.getDateFormat()),this.showTime&&(o+=" "+this.formatTime(e)))),o}setCurrentHourPM(e){"12"==this.hourFormat?(this.pm=e>11,this.currentHour=e>=12?12==e?12:e-12:0==e?12:e):this.currentHour=e}setCurrentView(e){this.currentView=e,this.cd.detectChanges(),this.alignOverlay()}selectDate(e){let o=new Date(e.year,e.month,e.day);if(this.showTime&&(o.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),o.setMinutes(this.currentMinute),o.setSeconds(this.currentSecond)),this.minDate&&this.minDate>o&&(o=this.minDate,this.setCurrentHourPM(o.getHours()),this.currentMinute=o.getMinutes(),this.currentSecond=o.getSeconds()),this.maxDate&&this.maxDate<o&&(o=this.maxDate,this.setCurrentHourPM(o.getHours()),this.currentMinute=o.getMinutes(),this.currentSecond=o.getSeconds()),this.isSingleSelection())this.updateModel(o);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,o]:[o]);else if(this.isRangeSelection())if(this.value&&this.value.length){let s=this.value[0],l=this.value[1];!l&&o.getTime()>=s.getTime()?l=o:(s=o,l=null),this.updateModel([s,l])}else this.updateModel([o,null]);this.onSelect.emit(o)}updateModel(e){if(this.value=e,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let o=null;this.value&&(o=this.value.map(s=>this.formatDateTime(s))),this.onModelChange(o)}}getFirstDayOfMonthIndex(e,o){let s=new Date;s.setDate(1),s.setMonth(e),s.setFullYear(o);let l=s.getDay()+this.getSundayIndex();return l>=7?l-7:l}getDaysCountInMonth(e,o){return 32-this.daylightSavingAdjust(new Date(o,e,32)).getDate()}getDaysCountInPrevMonth(e,o){let s=this.getPreviousMonthAndYear(e,o);return this.getDaysCountInMonth(s.month,s.year)}getPreviousMonthAndYear(e,o){let s,l;return 0===e?(s=11,l=o-1):(s=e-1,l=o),{month:s,year:l}}getNextMonthAndYear(e,o){let s,l;return 11===e?(s=0,l=o+1):(s=e+1,l=o),{month:s,year:l}}getSundayIndex(){let e=this.getFirstDateOfWeek();return e>0?7-e:0}isSelected(e){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let o=!1;for(let s of this.value)if(o=this.isDateEquals(s,e),o)break;return o}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(e){if(this.isComparable()){let o=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&o.getMonth()===e&&o.getFullYear()===this.currentYear}return!1}isYearSelected(e){if(this.isComparable()){let o=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&o.getFullYear()===e}return!1}isDateEquals(e,o){return!!(e&&e instanceof Date)&&e.getDate()===o.day&&e.getMonth()===o.month&&e.getFullYear()===o.year}isDateBetween(e,o,s){if(e&&o){let u=new Date(s.year,s.month,s.day);return e.getTime()<=u.getTime()&&o.getTime()>=u.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(e,o,s,l){return e.getDate()===o&&e.getMonth()===s&&e.getFullYear()===l}isSelectable(e,o,s,l){let u=!0,g=!0,_=!0,w=!0;return!(l&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>s||this.minDate.getFullYear()===s&&(this.minDate.getMonth()>o||this.minDate.getMonth()===o&&this.minDate.getDate()>e))&&(u=!1),this.maxDate&&(this.maxDate.getFullYear()<s||this.maxDate.getFullYear()===s&&(this.maxDate.getMonth()<o||this.maxDate.getMonth()===o&&this.maxDate.getDate()<e))&&(g=!1),this.disabledDates&&(_=!this.isDateDisabled(e,o,s)),this.disabledDays&&(w=!this.isDayDisabled(e,o,s)),u&&g&&_&&w)}isDateDisabled(e,o,s){if(this.disabledDates)for(let l of this.disabledDates)if(l.getFullYear()===s&&l.getMonth()===o&&l.getDate()===e)return!0;return!1}isDayDisabled(e,o,s){if(this.disabledDays){let u=new Date(s,o,e).getDay();return-1!==this.disabledDays.indexOf(u)}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,o){this.overlayVisible?this.hideOverlay():(o.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}getMonthName(e){return this.config.getTranslation("monthNames")[e]}getYear(e){return"month"===this.currentView?this.currentYear:e.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:this.inline||this.trapFocus(e);break;case 27:this.overlayVisible=!1,e.preventDefault()}}onInputKeydown(e){this.isKeydown=!0,40===e.keyCode&&this.contentViewChild?this.trapFocus(e):27===e.keyCode||13===e.keyCode?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):9===e.keyCode&&this.contentViewChild&&(ht.getFocusableElements(this.contentViewChild.nativeElement).forEach(o=>o.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,o,s){const l=e.currentTarget,u=l.parentElement;switch(e.which){case 40:{l.tabIndex="-1";let g=ht.index(u),_=u.parentElement.nextElementSibling;_?ht.hasClass(_.children[g].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(_.children[g].children[0].tabIndex="0",_.children[g].children[0].focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 38:{l.tabIndex="-1";let g=ht.index(u),_=u.parentElement.previousElementSibling;if(_){let w=_.children[g].children[0];ht.hasClass(w,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):(w.tabIndex="0",w.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{l.tabIndex="-1";let g=u.previousElementSibling;if(g){let _=g.children[0];ht.hasClass(_,"p-disabled")||ht.hasClass(_.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,s):(_.tabIndex="0",_.focus())}else this.navigateToMonth(!0,s);e.preventDefault();break}case 39:{l.tabIndex="-1";let g=u.nextElementSibling;if(g){let _=g.children[0];ht.hasClass(_,"p-disabled")?this.navigateToMonth(!1,s):(_.tabIndex="0",_.focus())}else this.navigateToMonth(!1,s);e.preventDefault();break}case 13:case 32:this.onDateSelect(e,o),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onMonthCellKeydown(e,o){const s=e.currentTarget;switch(e.which){case 38:case 40:{s.tabIndex="-1";var l=s.parentElement.children,u=ht.index(s);let g=l[40===e.which?u+3:u-3];g&&(g.tabIndex="0",g.focus()),e.preventDefault();break}case 37:{s.tabIndex="-1";let g=s.previousElementSibling;g?(g.tabIndex="0",g.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{s.tabIndex="-1";let g=s.nextElementSibling;g?(g.tabIndex="0",g.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:this.onMonthSelect(e,o),e.preventDefault();break;case 13:case 32:case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onYearCellKeydown(e,o){const s=e.currentTarget;switch(e.which){case 38:case 40:{s.tabIndex="-1";var l=s.parentElement.children,u=ht.index(s);let g=l[40===e.which?u+2:u-2];g&&(g.tabIndex="0",g.focus()),e.preventDefault();break}case 37:{s.tabIndex="-1";let g=s.previousElementSibling;g?(g.tabIndex="0",g.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{s.tabIndex="-1";let g=s.nextElementSibling;g?(g.tabIndex="0",g.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:this.onYearSelect(e,o),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.trapFocus(e)}}navigateToMonth(e,o){if(e)if(1===this.numberOfMonths||0===o)this.navigationState={backward:!0},this.navBackward(event);else{let l=ht.find(this.contentViewChild.nativeElement.children[o-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),u=l[l.length-1];u.tabIndex="0",u.focus()}else if(1===this.numberOfMonths||o===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let l=ht.findSingle(this.contentViewChild.nativeElement.children[o+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");l.tabIndex="0",l.focus()}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?ht.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():ht.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let o;o=ht.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),o&&o.length>0&&(e=o[o.length-1])}else e=ht.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){let e;if("month"===this.currentView){let o=ht.find(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),s=ht.findSingle(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month.p-highlight");o.forEach(l=>l.tabIndex=-1),e=s||o[0],0===o.length&&ht.find(this.contentViewChild.nativeElement,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(u=>u.tabIndex=-1)}else if("year"===this.currentView){let o=ht.find(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),s=ht.findSingle(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year.p-highlight");o.forEach(l=>l.tabIndex=-1),e=s||o[0],0===o.length&&ht.find(this.contentViewChild.nativeElement,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(u=>u.tabIndex=-1)}else if(e=ht.findSingle(this.contentViewChild.nativeElement,"span.p-highlight"),!e){let o=ht.findSingle(this.contentViewChild.nativeElement,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");e=o||ht.findSingle(this.contentViewChild.nativeElement,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}e&&(e.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{e.focus()},1),this.preventFocus=!1)}trapFocus(e){let o=ht.getFocusableElements(this.contentViewChild.nativeElement);if(o&&o.length>0)if(o[0].ownerDocument.activeElement){let s=o.indexOf(o[0].ownerDocument.activeElement);if(e.shiftKey)if(-1==s||0===s)if(this.focusTrap)o[o.length-1].focus();else{if(-1===s)return this.hideOverlay();if(0===s)return}else o[s-1].focus();else if(-1==s||s===o.length-1){if(!this.focusTrap&&-1!=s)return this.hideOverlay();o[0].focus()}else o[s+1].focus()}else o[0].focus();e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(e,o,s,l){let u=this.value;const g=this.convertTo24Hour(e,l);this.isRangeSelection()&&(u=this.value[1]||this.value[0]),this.isMultipleSelection()&&(u=this.value[this.value.length-1]);const _=u?u.toDateString():null;return!(this.minDate&&_&&this.minDate.toDateString()===_&&(this.minDate.getHours()>g||this.minDate.getHours()===g&&(this.minDate.getMinutes()>o||this.minDate.getMinutes()===o&&this.minDate.getSeconds()>s))||this.maxDate&&_&&this.maxDate.toDateString()===_&&(this.maxDate.getHours()<g||this.maxDate.getHours()===g&&(this.maxDate.getMinutes()<o||this.maxDate.getMinutes()===o&&this.maxDate.getSeconds()<s)))}incrementHour(e){let s=this.currentHour+this.stepHour,l=this.pm;"24"==this.hourFormat?s=s>=24?s-24:s:"12"==this.hourFormat&&(this.currentHour<12&&s>11&&(l=!this.pm),s=s>=13?s-12:s),this.validateTime(s,this.currentMinute,this.currentSecond,l)&&(this.currentHour=s,this.pm=l),e.preventDefault()}onTimePickerElementMouseDown(e,o,s){this.disabled||(this.repeat(e,null,o,s),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,o,s,l){let u=o||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,s,l),this.cd.markForCheck()},u),s){case 0:1===l?this.incrementHour(e):this.decrementHour(e);break;case 1:1===l?this.incrementMinute(e):this.decrementMinute(e);break;case 2:1===l?this.incrementSecond(e):this.decrementSecond(e)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let o=this.currentHour-this.stepHour,s=this.pm;"24"==this.hourFormat?o=o<0?24+o:o:"12"==this.hourFormat&&(12===this.currentHour&&(s=!this.pm),o=o<=0?12+o:o),this.validateTime(o,this.currentMinute,this.currentSecond,s)&&(this.currentHour=o,this.pm=s),e.preventDefault()}incrementMinute(e){let o=this.currentMinute+this.stepMinute;o=o>59?o-60:o,this.validateTime(this.currentHour,o,this.currentSecond,this.pm)&&(this.currentMinute=o),e.preventDefault()}decrementMinute(e){let o=this.currentMinute-this.stepMinute;o=o<0?60+o:o,this.validateTime(this.currentHour,o,this.currentSecond,this.pm)&&(this.currentMinute=o),e.preventDefault()}incrementSecond(e){let o=this.currentSecond+this.stepSecond;o=o>59?o-60:o,this.validateTime(this.currentHour,this.currentMinute,o,this.pm)&&(this.currentSecond=o),e.preventDefault()}decrementSecond(e){let o=this.currentSecond-this.stepSecond;o=o<0?60+o:o,this.validateTime(this.currentHour,this.currentMinute,o,this.pm)&&(this.currentSecond=o),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,e.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(e=this.value[1]?[this.value[0],e]:[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){const o=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,o)&&(this.pm=o,this.updateTime()),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let o=e.target.value;try{let s=this.parseValueFromString(o);this.isValidSelection(s)&&(this.updateModel(s),this.updateUI())}catch{this.updateModel(this.keepInvalid?o:null)}this.filled=null!=o&&o.length,this.onInput.emit(e)}isValidSelection(e){let o=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(o=!1):e.every(s=>this.isSelectable(s.getDate(),s.getMonth(),s.getFullYear(),!1))&&this.isRangeSelection()&&(o=e.length>1&&e[1]>e[0]),o}parseValueFromString(e){if(!e||0===e.trim().length)return null;let o;if(this.isSingleSelection())o=this.parseDateTime(e);else if(this.isMultipleSelection()){let s=e.split(this.multipleSeparator);o=[];for(let l of s)o.push(this.parseDateTime(l.trim()))}else if(this.isRangeSelection()){let s=e.split(" "+this.rangeSeparator+" ");o=[];for(let l=0;l<s.length;l++)o[l]=this.parseDateTime(s[l].trim())}return o}parseDateTime(e){let o,s=e.split(" ");if(this.timeOnly)o=new Date,this.populateTime(o,s[0],s[1]);else{const l=this.getDateFormat();if(this.showTime){let u="12"==this.hourFormat?s.pop():null,g=s.pop();o=this.parseDate(s.join(" "),l),this.populateTime(o,g,u)}else o=this.parseDate(e,l)}return o}populateTime(e,o,s){if("12"==this.hourFormat&&!s)throw"Invalid Time";this.pm="PM"===s||"pm"===s;let l=this.parseTime(o);e.setHours(l.hour),e.setMinutes(l.minute),e.setSeconds(l.second)}isValidDate(e){return e instanceof Date&&It.isNotEmpty(e)}updateUI(){let e=this.value;Array.isArray(e)&&(e=e[0]);let o=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:e&&this.isValidDate(e)?e:new Date;this.currentMonth=o.getMonth(),this.currentYear=o.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(o.getHours()),this.currentMinute=o.getMinutes(),this.currentSecond=o.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.overlay.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?sr.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):sr.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e)}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&sr.clear(e.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):ht.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=ht.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=ht.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px"):this.overlay.style.width=ht.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px",ht.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement)):ht.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement))}enableModality(e){this.mask||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(e.style.zIndex)-1),ht.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",s=>{this.disableModality()}),document.body.appendChild(this.mask),ht.addClass(document.body,"p-overflow-hidden"))}disableModality(){this.mask&&(ht.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.destroyMask.bind(this),this.mask.addEventListener("animationend",this.animationEndListener))}destroyMask(){document.body.removeChild(this.mask);let o,e=document.body.children;for(let s=0;s<e.length;s++)if(ht.hasClass(e[s],"p-datepicker-mask-scrollblocker")){o=!0;break}o||ht.removeClass(document.body,"p-overflow-hidden"),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.mask.removeEventListener("animationend",this.animationEndListener),this.animationEndListener=null)}writeValue(e){if(this.value=e,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=e)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(Mo.FIRST_DAY_OF_WEEK)}formatDate(e,o){if(!e)return"";let s;const l=T=>{const D=s+1<o.length&&o.charAt(s+1)===T;return D&&s++,D},u=(T,D,O)=>{let F=""+D;if(l(T))for(;F.length<O;)F="0"+F;return F},g=(T,D,O,F)=>l(T)?F[D]:O[D];let _="",w=!1;if(e)for(s=0;s<o.length;s++)if(w)"'"!==o.charAt(s)||l("'")?_+=o.charAt(s):w=!1;else switch(o.charAt(s)){case"d":_+=u("d",e.getDate(),2);break;case"D":_+=g("D",e.getDay(),this.getTranslation(Mo.DAY_NAMES_SHORT),this.getTranslation(Mo.DAY_NAMES));break;case"o":_+=u("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":_+=u("m",e.getMonth()+1,2);break;case"M":_+=g("M",e.getMonth(),this.getTranslation(Mo.MONTH_NAMES_SHORT),this.getTranslation(Mo.MONTH_NAMES));break;case"y":_+=l("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":_+=e.getTime();break;case"!":_+=1e4*e.getTime()+this.ticksTo1970;break;case"'":l("'")?_+="'":w=!0;break;default:_+=o.charAt(s)}return _}formatTime(e){if(!e)return"";let o="",s=e.getHours(),l=e.getMinutes(),u=e.getSeconds();return"12"==this.hourFormat&&s>11&&12!=s&&(s-=12),o+="12"==this.hourFormat&&0===s?12:s<10?"0"+s:s,o+=":",o+=l<10?"0"+l:l,this.showSeconds&&(o+=":",o+=u<10?"0"+u:u),"12"==this.hourFormat&&(o+=e.getHours()>11?" PM":" AM"),o}parseTime(e){let o=e.split(":");if(o.length!==(this.showSeconds?3:2))throw"Invalid time";let l=parseInt(o[0]),u=parseInt(o[1]),g=this.showSeconds?parseInt(o[2]):null;if(isNaN(l)||isNaN(u)||l>23||u>59||"12"==this.hourFormat&&l>12||this.showSeconds&&(isNaN(g)||g>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==l&&this.pm?l+=12:!this.pm&&12===l&&(l-=12)),{hour:l,minute:u,second:g}}parseDate(e,o){if(null==o||null==e)throw"Invalid arguments";if(""===(e="object"==typeof e?e.toString():e+""))return null;let s,l,u,j,g=0,_="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),w=-1,T=-1,D=-1,O=-1,F=!1,Q=ft=>{let dt=s+1<o.length&&o.charAt(s+1)===ft;return dt&&s++,dt},ae=ft=>{let dt=Q(ft),zt="@"===ft?14:"!"===ft?20:"y"===ft&&dt?4:"o"===ft?3:2,Cn=new RegExp("^\\d{"+("y"===ft?zt:1)+","+zt+"}"),Ln=e.substring(g).match(Cn);if(!Ln)throw"Missing number at position "+g;return g+=Ln[0].length,parseInt(Ln[0],10)},Oe=(ft,dt,zt)=>{let Wt=-1,Cn=Q(ft)?zt:dt,Ln=[];for(let gi=0;gi<Cn.length;gi++)Ln.push([gi,Cn[gi]]);Ln.sort((gi,Ki)=>-(gi[1].length-Ki[1].length));for(let gi=0;gi<Ln.length;gi++){let Ki=Ln[gi][1];if(e.substr(g,Ki.length).toLowerCase()===Ki.toLowerCase()){Wt=Ln[gi][0],g+=Ki.length;break}}if(-1!==Wt)return Wt+1;throw"Unknown name at position "+g},We=()=>{if(e.charAt(g)!==o.charAt(s))throw"Unexpected literal at position "+g;g++};for("month"===this.view&&(D=1),s=0;s<o.length;s++)if(F)"'"!==o.charAt(s)||Q("'")?We():F=!1;else switch(o.charAt(s)){case"d":D=ae("d");break;case"D":Oe("D",this.getTranslation(Mo.DAY_NAMES_SHORT),this.getTranslation(Mo.DAY_NAMES));break;case"o":O=ae("o");break;case"m":T=ae("m");break;case"M":T=Oe("M",this.getTranslation(Mo.MONTH_NAMES_SHORT),this.getTranslation(Mo.MONTH_NAMES));break;case"y":w=ae("y");break;case"@":j=new Date(ae("@")),w=j.getFullYear(),T=j.getMonth()+1,D=j.getDate();break;case"!":j=new Date((ae("!")-this.ticksTo1970)/1e4),w=j.getFullYear(),T=j.getMonth()+1,D=j.getDate();break;case"'":Q("'")?We():F=!0;break;default:We()}if(g<e.length&&(u=e.substr(g),!/^\s+/.test(u)))throw"Extra/unparsed characters found in date: "+u;if(-1===w?w=(new Date).getFullYear():w<100&&(w+=(new Date).getFullYear()-(new Date).getFullYear()%100+(w<=_?0:-100)),O>-1)for(T=1,D=O;l=this.getDaysCountInMonth(w,T-1),!(D<=l);)T++,D-=l;if("year"===this.view&&(T=-1===T?1:T,D=-1===D?1:D),j=this.daylightSavingAdjust(new Date(w,T-1,D)),j.getFullYear()!==w||j.getMonth()+1!==T||j.getDate()!==D)throw"Invalid date";return j}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(e){let o=new Date,s={day:o.getDate(),month:o.getMonth(),year:o.getFullYear(),otherMonth:o.getMonth()!==this.currentMonth||o.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(e,s),this.onTodayClick.emit(e)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.body.appendChild(this.responsiveStyleElement));let e="";if(this.responsiveOptions){let o=[...this.responsiveOptions].filter(s=>!(!s.breakpoint||!s.numMonths)).sort((s,l)=>-1*s.breakpoint.localeCompare(l.breakpoint,void 0,{numeric:!0}));for(let s=0;s<o.length;s++){let{breakpoint:l,numMonths:u}=o[s],g=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${u}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let _=u;_<this.numberOfMonths;_++)g+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${_+1}) {\n                                display: none !important;\n                            }\n                        `;e+=`\n                        @media screen and (max-width: ${l}) {\n                            ${g}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=e}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mousedown",o=>{this.isOutsideClicked(o)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(o),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new D2(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return ht.hasClass(e.target,"p-datepicker-prev")||ht.hasClass(e.target,"p-datepicker-prev-icon")||ht.hasClass(e.target,"p-datepicker-next")||ht.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!ht.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&sr.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(a.sBO),a.Y36(a.R0b),a.Y36(zn),a.Y36(Ks))},i.\u0275cmp=a.Xpm({type:i,selectors:[["p-calendar"]],contentQueries:function(e,o,s){if(1&e&&a.Suo(s,Ci,4),2&e){let l;a.iGM(l=a.CRH())&&(o.templates=l)}},viewQuery:function(e,o){if(1&e&&(a.Gf(Ffe,5),a.Gf(Lfe,5),a.Gf(Vfe,5)),2&e){let s;a.iGM(s=a.CRH())&&(o.containerViewChild=s.first),a.iGM(s=a.CRH())&&(o.inputfieldViewChild=s.first),a.iGM(s=a.CRH())&&(o.content=s.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,o){2&e&&a.ekj("p-inputwrapper-filled",o.filled)("p-inputwrapper-focus",o.focus)("p-calendar-clearable",o.showClear&&!o.disabled)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",view:"view",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[a._Bn([Ige])],ngContentSelectors:Dge,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["class","p-calendar-clear-icon pi pi-times",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],[1,"p-calendar-clear-icon","pi","pi-times",3,"click"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(e,o){1&e&&(a.F$t(xge),a.TgZ(0,"span",0,1),a.YNc(2,Ufe,4,17,"ng-template",2),a.YNc(3,Ege,9,28,"div",3),a.qZA()),2&e&&(a.Tol(o.styleClass),a.Q6J("ngClass",a.l5B(6,Sge,o.showIcon,o.timeOnly,o.disabled,o.focus))("ngStyle",o.style),a.xp6(2),a.Q6J("ngIf",!o.inline),a.xp6(1),a.Q6J("ngIf",o.inline||o.overlayVisible))},dependencies:[lo,Ui,Ji,Hr,uo,I2,S0],styles:[".p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}\n"],encapsulation:2,data:{animation:[Sa("overlayAnimation",[Wo("visibleTouchUI",ti({transform:"translate(-50%,-50%)",opacity:1})),dr("void => visible",[ti({opacity:0,transform:"scaleY(0.8)"}),Fr("{{showTransitionParams}}",ti({opacity:1,transform:"*"}))]),dr("visible => void",[Fr("{{hideTransitionParams}}",ti({opacity:0}))]),dr("void => visibleTouchUI",[ti({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),Fr("{{showTransitionParams}}")]),dr("visibleTouchUI => void",[Fr("{{hideTransitionParams}}",ti({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),i})(),Age=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn,qS,ar,Yf,qS,ar]}),i})(),Bme=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[jn,yfe,Xz,cL,w1,qS,Ife,Age,uL,Nfe,sO,ar,sO]}),i})(),cG=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[_r,_r]}),i})();const Gme={provide:new a.OlP("mat-menu-scroll-strategy"),deps:[k0],useFactory:function zme(i){return()=>i.scrollStrategies.reposition()}};let dG=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[Gme],imports:[jn,_r,iO,oO,K1,_r]}),i})(),hG=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[_r,_r]}),i})(),_G=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[_r,_r]}),i})(),Yme=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[tL,dG,hG,_G,cG,tL,dG,hG,_G,cG]}),i})(),bG=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({}),i})(),c_e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[iO,_r,Q2,bG,_r,bG]}),i})();const p_e={provide:new a.OlP("mat-autocomplete-scroll-strategy"),deps:[k0],useFactory:function h_e(i){return()=>i.scrollStrategies.reposition()}};let __e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[p_e],imports:[oO,rO,_r,jn,K1,rO,_r]}),i})(),CG=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({}),i})(),y_e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[jue],imports:[CG,rL,_r,CG,rL]}),i})();new a.OlP("basePath");class yr{constructor(t={}){this.apiKeys=t.apiKeys,this.username=t.username,this.password=t.password,this.accessToken=t.accessToken,this.basePath=t.basePath,this.withCredentials=t.withCredentials,this.encoder=t.encoder,this.credentials=t.credentials?t.credentials:{},this.credentials.apikey||(this.credentials.apikey=()=>{if(null!=this.apiKeys)return this.apiKeys.apikey||this.apiKeys["X-ElasticEmail-ApiKey"]})}selectHeaderContentType(t){if(0===t.length)return;const e=t.find(o=>this.isJsonMime(o));return void 0===e?t[0]:e}selectHeaderAccept(t){if(0===t.length)return;const e=t.find(o=>this.isJsonMime(o));return void 0===e?t[0]:e}isJsonMime(t){const e=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==t&&(e.test(t)||"application/json-patch+json"===t.toLowerCase())}lookupCredential(t){const e=this.credentials[t];return"function"==typeof e?e():e}}let v_e=(()=>{class i{constructor(e,o){if(e)throw new Error("ApiModule is already loaded. Import in your base AppModule only.");if(!o)throw new Error("You need to import the HttpClientModule in your AppModule! \nSee also https://github.com/angular/angular/issues/20575")}static forRoot(e){return{ngModule:i,providers:[{provide:yr,useFactory:e}]}}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(i,12),a.LFG(Po,8))},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[],imports:[[]]}),i})();var w_e=q(655),pL=q(6148);class rD{constructor(t){return t}}const TG="analytics",EG=St.nk.async,T_e=(0,St.u3)(pL.IH,!0),E_e=(0,St.u3)(pL.Kz,!0),x_e=(0,St.u3)(pL.Iv,!0);let fL=(()=>{class i{constructor(e,o,s){let l;this.disposables=[],(0,br.KN)("angularfire",St.q4.full,"user-tracking"),this.initialized=o.runOutsideAngular(()=>new Promise(u=>{l=u})),EG().then(()=>{const u=s.get(rD);u?this.disposables=[Hu(e).subscribe(g=>{x_e(u,g?.uid),l()})]:l()})}ngOnDestroy(){this.disposables.forEach(e=>e.unsubscribe())}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(zi),a.LFG(a.R0b),a.LFG(a.zs3))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();const xG="firebase_screen_id",gL="outlet",oD="screen_class",SG="screen_name";let L_e=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const mL={},V_e=i=>{const t=[i[oD],i[gL]].join("#");if(mL.hasOwnProperty(t))return mL[t];{const e=L_e++;return mL[t]=e,e}};let DG=(()=>{class i{constructor(e,o,s,l,u,g){(0,br.KN)("angularfire",St.q4.full,"screen-tracking"),EG().then(()=>{const _=g.get(rD);!e||!_||l.runOutsideAngular(()=>{this.disposable=((i,t,e)=>i.events.pipe(Yr(s=>s instanceof n3)).pipe(Dr(s=>{var l;const g=(null===(l=i.parseUrl(i.url.replace(/(?:\().+(?:\))/g,F=>F.replace("://",":///"))).root.children[s.snapshot.outlet])||void 0===l?void 0:l.toString())||"",_=i.routerState.root.children.map(F=>F).find(F=>F.outlet===s.snapshot.outlet);if(!_)return fn(null);let w=_;for(;w.firstChild;)w=w.firstChild;const T=w.pathFromRoot.map(F=>{var j;return null===(j=F.routeConfig)||void 0===j?void 0:j.path}).filter(F=>F).join("/")||"/",D={[SG]:T,page_path:`/${g}`,firebase_event_origin:"auto",firebase_screen:T,[gL]:s.snapshot.outlet};t&&(D.page_title=t.getTitle());let O=_.component;if(O){if(O===cP){let F=s.snapshot;for(;F.firstChild;)F=F.firstChild;O=F.component}}else O=s.snapshot.component;if("string"==typeof O)return fn(Object.assign(Object.assign({},D),{[oD]:O}));if(O){const F=e.resolveComponentFactory(O);return fn(Object.assign(Object.assign({},D),{[oD]:F.selector}))}return fn(null)}),Yr(s=>!!s),(0,pt.U)(s=>Object.assign({firebase_screen_class:s[oD],[xG]:V_e(s)},s)),function b_e(i,t,e,o){return(0,Zo.e)((s,l)=>{let u;t&&"function"!=typeof t?({duration:e,element:u,connector:o}=t):u=t;const g=new Map,_=j=>{g.forEach(j),j(l)},w=j=>_(Q=>Q.error(j));let T=0,D=!1;const O=new Sr.Q(l,j=>{try{const Q=i(j);let ae=g.get(Q);if(!ae){g.set(Q,ae=o?o():new Ft.x);const Oe=function F(j,Q){const ae=new Ie.y(Oe=>{T++;const We=Q.subscribe(Oe);return()=>{We.unsubscribe(),0==--T&&D&&O.unsubscribe()}});return ae.key=j,ae}(Q,ae);if(l.next(Oe),e){const We=(0,Sr.x)(ae,()=>{ae.complete(),We?.unsubscribe()},void 0,void 0,()=>g.delete(Q));O.add((0,yd.Xf)(e(Oe)).subscribe(We))}}ae.next(u?u(j):j)}catch(Q){w(Q)}},()=>_(j=>j.complete()),w,()=>g.clear(),()=>(D=!0,0===T));s.subscribe(O)})}(s=>s[gL]),(0,aa.z)(s=>s.pipe(o0((l,u)=>JSON.stringify(l)===JSON.stringify(u)),Pf(void 0),NA(),(0,pt.U)(([l,u])=>l?Object.assign({firebase_previous_class:l[oD],firebase_previous_screen:l[SG],firebase_previous_id:l[xG]},u):u)))))(e,o,s).pipe(Dr(w=>(0,w_e.mG)(this,void 0,void 0,function*(){return u&&(yield u.initialized),E_e(_,"screen_view",w)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(er,8),a.LFG(sl,8),a.LFG(a._Vd),a.LFG(a.R0b),a.LFG(fL,8),a.LFG(a.zs3))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i})();const _L=new a.OlP("angularfire2.analytics-instances");function U_e(i){return(t,e)=>{if(!St.nk.sync())return null;const o=t.runOutsideAngular(()=>i(e));return new rD(o)}}const j_e={provide:class C_e{constructor(){return(0,St.vb)(TG)}},deps:[[new a.FiY,_L]]},z_e={provide:rD,useFactory:function B_e(i,t){if(!St.nk.sync())return null;const e=(0,St.JM)(TG,i,t);return e&&new rD(e)},deps:[[new a.FiY,_L],Ur]};let G_e=(()=>{class i{constructor(e,o){(0,br.KN)("angularfire",St.q4.full,"analytics")}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(DG,8),a.LFG(fL,8))},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[z_e,j_e,{provide:a.ip1,useValue:St.nk.async,multi:!0}]}),i})();function q_e(i,...t){return{ngModule:G_e,providers:[{provide:_L,useFactory:U_e(i),multi:!0,deps:[a.R0b,a.zs3,St.HU,ms,...t]}]}}const vL="functions";class Y_e{constructor(t,e,o){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(s=>this.auth=s,()=>{}),this.messaging||e.get().then(s=>this.messaging=s,()=>{}),this.appCheck||o.get().then(s=>this.appCheck=s,()=>{})}getAuthToken(){var t=this;return(0,rt.Z)(function*(){if(t.auth)try{return(yield t.auth.getToken())?.accessToken}catch{return}})()}getMessagingToken(){var t=this;return(0,rt.Z)(function*(){if(t.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield t.messaging.getToken()}catch{return}})()}getAppCheckToken(){var t=this;return(0,rt.Z)(function*(){if(t.appCheck){const e=yield t.appCheck.getToken();return e.error?null:e.token}return null})()}getContext(){var t=this;return(0,rt.Z)(function*(){return{authToken:yield t.getAuthToken(),messagingToken:yield t.getMessagingToken(),appCheckToken:yield t.getAppCheckToken()}})()}}const bL="us-central1";class Q_e{constructor(t,e,o,s,l=bL,u){this.app=t,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new Y_e(e,o,s),this.cancelAllRequests=new Promise(g=>{this.deleteService=()=>Promise.resolve(g())});try{const g=new URL(l);this.customDomain=g.origin,this.region=bL}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(t){const e=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${e}/${this.region}/${t}`:null!==this.customDomain?`${this.customDomain}/${t}`:`https://${this.region}-${e}.cloudfunctions.net/${t}`}}const kG="@firebase/functions";function lye(i=(0,oi.getApp)(),t=bL){return(0,oi._getProvider)((0,re.m9)(i),vL).getImmediate({identifier:t})}!function aye(i,t){(0,oi._registerComponent)(new po.wA(vL,(o,{instanceIdentifier:s})=>{const l=o.getProvider("app").getImmediate(),u=o.getProvider("auth-internal"),g=o.getProvider("messaging-internal"),_=o.getProvider("app-check-internal");return new Q_e(l,u,g,_,s,i)},"PUBLIC").setMultipleInstances(!0)),(0,oi.registerVersion)(kG,"0.8.4",t),(0,oi.registerVersion)(kG,"0.8.4","esm2017")}(fetch.bind(self));class TL{constructor(t){return t}}const RG="functions",EL=new a.OlP("angularfire2.functions-instances");function dye(i){return(t,e)=>{const o=t.runOutsideAngular(()=>i(e));return new TL(o)}}const hye={provide:class cye{constructor(){return(0,St.vb)(RG)}},deps:[[new a.FiY,EL]]},pye={provide:TL,useFactory:function uye(i,t){const e=(0,St.JM)(RG,i,t);return e&&new TL(e)},deps:[[new a.FiY,EL],Ur]};let fye=(()=>{class i{constructor(){(0,br.KN)("angularfire",St.q4.full,"fn")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[pye,hye]}),i})();function gye(i,...t){return{ngModule:fye,providers:[{provide:EL,useFactory:dye(i),multi:!0,deps:[a.R0b,a.zs3,St.HU,ms,[new a.FiY,jo],[new a.FiY,_a],...t]}]}}const mye=(0,St.u3)(lye,!0);var _ye=q(2375);class xL{constructor(t){return t}}const PG="messaging",SL=new a.OlP("angularfire2.messaging-instances");function bye(i){return(t,e)=>{if(!St.n1.sync())return null;const o=t.runOutsideAngular(()=>i(e));return new xL(o)}}const wye={provide:class yye{constructor(){return(0,St.vb)(PG)}},deps:[[new a.FiY,SL]]},Cye={provide:xL,useFactory:function vye(i,t){if(!St.n1.sync())return null;const e=(0,St.JM)(PG,i,t);return e&&new xL(e)},deps:[[new a.FiY,SL],Ur]};let Tye=(()=>{class i{constructor(){(0,br.KN)("angularfire",St.q4.full,"fcm")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[Cye,wye,{provide:a.ip1,useValue:St.n1.async,multi:!0}]}),i})();function Eye(i,...t){return{ngModule:Tye,providers:[{provide:SL,useFactory:bye(i),multi:!0,deps:[a.R0b,a.zs3,St.HU,ms,...t]}]}}const xye=(0,St.u3)(_ye.KL,!0);q(2833);const NG="@firebase/performance",DL="0.5.12",IL="FB-PERF-TRACE-MEASURE",UG="@firebase/performance/config",jG="@firebase/performance/configexpire",zG="Performance",Ia=new re.LL("performance",zG,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),Jf=new Ys.Yd(zG);let ML,GG,qG,kL;Jf.logLevel=Ys.in.INFO;class ua{constructor(t){if(this.window=t,!t)throw Ia.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(t){!this.performance||!this.performance.mark||this.performance.mark(t)}measure(t,e,o){!this.performance||!this.performance.measure||this.performance.measure(t,e,o)}getEntriesByType(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]}getEntriesByName(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&(0,re.zI)()?!!(0,re.hl)()||(Jf.info("IndexedDB is not supported by current browswer"),!1):(Jf.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(t,e){this.PerformanceObserver&&new this.PerformanceObserver(s=>{for(const l of s.getEntries())e(l)}).observe({entryTypes:[t]})}static getInstance(){return void 0===ML&&(ML=new ua(GG)),ML}}function AL(){return qG}function ZG(i,t){const e=i.length-t.length;if(e<0||e>1)throw Ia.create("invalid String merger input");const o=[];for(let s=0;s<i.length;s++)o.push(i.charAt(s)),t.length>s&&o.push(t.charAt(s));return o.join("")}class pu{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=ZG("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=ZG("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===kL&&(kL=new pu),kL}}var R0=(()=>(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.VISIBLE=1]="VISIBLE",i[i.HIDDEN=2]="HIDDEN"}(R0||(R0={})),R0))();const Rye=["firebase_","google_","ga_"],Pye=new RegExp("^[a-zA-Z]\\w*$");function Lye(){const i=ua.getInstance().navigator;return"serviceWorker"in i?i.serviceWorker.controller?2:3:1}function $G(){switch(ua.getInstance().document.visibilityState){case"visible":return R0.VISIBLE;case"hidden":return R0.HIDDEN;default:return R0.UNKNOWN}}function Vye(){const t=ua.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function WG(i){var t;const e=null===(t=i.options)||void 0===t?void 0:t.appId;if(!e)throw Ia.create("no app id");return e}const Xh={loggingEnabled:!0};const Wye="Could not fetch config, will use default configs";function KG(i){if(!i)return i;const t=pu.getInstance(),e=i.entries||{};return t.loggingEnabled=void 0!==e.fpr_enabled?"true"===String(e.fpr_enabled):Xh.loggingEnabled,e.fpr_log_source?t.logSource=Number(e.fpr_log_source):Xh.logSource&&(t.logSource=Xh.logSource),e.fpr_log_endpoint_url?t.logEndPointUrl=e.fpr_log_endpoint_url:Xh.logEndPointUrl&&(t.logEndPointUrl=Xh.logEndPointUrl),e.fpr_log_transport_key?t.transportKey=e.fpr_log_transport_key:Xh.transportKey&&(t.transportKey=Xh.transportKey),void 0!==e.fpr_vc_network_request_sampling_rate?t.networkRequestsSamplingRate=Number(e.fpr_vc_network_request_sampling_rate):void 0!==Xh.networkRequestsSamplingRate&&(t.networkRequestsSamplingRate=Xh.networkRequestsSamplingRate),void 0!==e.fpr_vc_trace_sampling_rate?t.tracesSamplingRate=Number(e.fpr_vc_trace_sampling_rate):void 0!==Xh.tracesSamplingRate&&(t.tracesSamplingRate=Xh.tracesSamplingRate),t.logTraceAfterSampling=YG(t.tracesSamplingRate),t.logNetworkAfterSampling=YG(t.networkRequestsSamplingRate),i}function YG(i){return Math.random()<=i}let RL,OL=1;function JG(i){return OL=2,RL=RL||function Qye(i){return function Xye(){const i=ua.getInstance().document;return new Promise(t=>{if(i&&"complete"!==i.readyState){const e=()=>{"complete"===i.readyState&&(i.removeEventListener("readystatechange",e),t())};i.addEventListener("readystatechange",e)}else t()})}().then(()=>function kye(i){const t=i.getId();return t.then(e=>{qG=e}),t}(i.installations)).then(t=>function qye(i,t){const e=function Zye(){const i=ua.getInstance().localStorage;if(!i)return;const t=i.getItem(jG);if(!t||!function Yye(i){return Number(i)>Date.now()}(t))return;const e=i.getItem(UG);if(e)try{return JSON.parse(e)}catch{return}}();return e?(KG(e),Promise.resolve()):function Kye(i,t){return function Oye(i){const t=i.getToken();return t.then(e=>{}),t}(i.installations).then(e=>{const o=function Uye(i){var t;const e=null===(t=i.options)||void 0===t?void 0:t.projectId;if(!e)throw Ia.create("no project id");return e}(i.app),s=function jye(i){var t;const e=null===(t=i.options)||void 0===t?void 0:t.apiKey;if(!e)throw Ia.create("no api key");return e}(i.app),u=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${o}/namespaces/fireperf:fetch?key=${s}`,{method:"POST",headers:{Authorization:`FIREBASE_INSTALLATIONS_AUTH ${e}`},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:WG(i.app),app_version:"0.5.12",sdk_version:"0.0.1"})});return fetch(u).then(g=>{if(g.ok)return g.json();throw Ia.create("RC response not ok")})}).catch(()=>{Jf.info(Wye)})}(i,t).then(KG).then(o=>function $ye(i){const t=ua.getInstance().localStorage;!i||!t||(t.setItem(UG,JSON.stringify(i)),t.setItem(jG,String(Date.now()+60*pu.getInstance().configTimeToLive*60*1e3)))}(o),()=>{})}(i,t)).then(()=>QG(),()=>QG())}(i),RL}function QG(){OL=3}let NL,pO=3,Qy=[],eq=!1;function fO(i){setTimeout(()=>{if(0!==pO){if(!Qy.length)return fO(1e4);!function ive(){const i=Qy.splice(0,1e3),t=i.map(o=>({source_extension_json_proto3:o.message,event_time_ms:String(o.eventTime)}));(function rve(i,t){return function ove(i){const t=pu.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(i)})}(i).then(e=>(e.ok||Jf.info("Call to Firebase backend failed."),e.json())).then(e=>{const o=Number(e.nextRequestWaitMillis);let s=1e4;isNaN(o)||(s=Math.max(o,s));const l=e.logResponseDetails;Array.isArray(l)&&l.length>0&&"RETRY_REQUEST_LATER"===l[0].responseAction&&(Qy=[...t,...Qy],Jf.info("Retry transport request later.")),pO=3,fO(s)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:pu.getInstance().logSource,log_event:t},i).catch(()=>{Qy=[...i,...Qy],pO--,Jf.info(`Tries left: ${pO}.`),fO(1e4)})}()}},i)}function tq(i,t){NL||(NL=function ave(i){return(...t)=>{!function sve(i){if(!i.eventTime||!i.message)throw Ia.create("invalid cc log");Qy=[...Qy,i]}({message:i(...t),eventTime:Date.now()})}}(cve)),NL(i,t)}function gO(i){const t=pu.getInstance();!t.instrumentationEnabled&&i.isAuto||!t.dataCollectionEnabled&&!i.isAuto||!ua.getInstance().requiredApisAvailable()||i.isAuto&&$G()!==R0.VISIBLE||(function Jye(){return 3===OL}()?FL(i):JG(i.performanceController).then(()=>FL(i),()=>FL(i)))}function FL(i){if(!AL())return;const t=pu.getInstance();!t.loggingEnabled||!t.logTraceAfterSampling||setTimeout(()=>tq(i,1),0)}function cve(i,t){return 0===t?function uve(i){const t={url:i.url,http_method:i.httpMethod||0,http_response_code:200,response_payload_bytes:i.responsePayloadBytes,client_start_time_us:i.startTimeUs,time_to_response_initiated_us:i.timeToResponseInitiatedUs,time_to_response_completed_us:i.timeToResponseCompletedUs},e={application_info:nq(i.performanceController.app),network_request_metric:t};return JSON.stringify(e)}(i):function dve(i){const t={name:i.name,is_auto:i.isAuto,client_start_time_us:i.startTimeUs,duration_us:i.durationUs};0!==Object.keys(i.counters).length&&(t.counters=i.counters);const e=i.getAttributes();0!==Object.keys(e).length&&(t.custom_attributes=e);const o={application_info:nq(i.performanceController.app),trace_metric:t};return JSON.stringify(o)}(i)}function nq(i){return{google_app_id:WG(i),app_instance_id:AL(),web_app_info:{sdk_version:"0.5.12",page_url:ua.getInstance().getUrl(),service_worker_status:Lye(),visibility_state:$G(),effective_connection_type:Vye()},application_process_state:0}}const fve=["_fp","_fcp","_fid"];class Xy{constructor(t,e,o=!1,s){this.performanceController=t,this.name=e,this.isAuto=o,this.state=1,this.customAttributes={},this.counters={},this.api=ua.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=s||`${IL}-${this.randomId}-${this.name}`,s&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw Ia.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw Ia.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),gO(this)}record(t,e,o){if(t<=0)throw Ia.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw Ia.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),o&&o.attributes&&(this.customAttributes=Object.assign({},o.attributes)),o&&o.metrics)for(const s of Object.keys(o.metrics))isNaN(Number(o.metrics[s]))||(this.counters[s]=Math.floor(Number(o.metrics[s])));gO(this)}incrementMetric(t,e=1){this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)}putMetric(t,e){if(!function gve(i,t){return!(0===i.length||i.length>100)&&(t&&t.startsWith("_wt_")&&fve.indexOf(i)>-1||!i.startsWith("_"))}(t,this.name))throw Ia.create("invalid custom metric name",{customMetricName:t});this.counters[t]=function mve(i){const t=Math.floor(i);return t<i&&Jf.info(`Metric value should be an Integer, setting the value as : ${t}.`),t}(e??0)}getMetric(t){return this.counters[t]||0}putAttribute(t,e){const o=function Hye(i){return!(0===i.length||i.length>40||Rye.some(e=>i.startsWith(e))||!i.match(Pye))}(t),s=function Bye(i){return 0!==i.length&&i.length<=100}(e);if(o&&s)this.customAttributes[t]=e;else{if(!o)throw Ia.create("invalid attribute name",{attributeName:t});if(!s)throw Ia.create("invalid attribute value",{attributeValue:e})}}getAttribute(t){return this.customAttributes[t]}removeAttribute(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(t){this.startTimeUs=t}setDuration(t){this.durationUs=t}calculateTraceMetrics(){const t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))}static createOobTrace(t,e,o,s){const l=ua.getInstance().getUrl();if(!l)return;const u=new Xy(t,"_wt_"+l,!0),g=Math.floor(1e3*ua.getInstance().getTimeOrigin());if(u.setStartTime(g),e&&e[0]&&(u.setDuration(Math.floor(1e3*e[0].duration)),u.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),u.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),u.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),o){const T=o.find(O=>"first-paint"===O.name);T&&T.startTime&&u.putMetric("_fp",Math.floor(1e3*T.startTime));const D=o.find(O=>"first-contentful-paint"===O.name);D&&D.startTime&&u.putMetric("_fcp",Math.floor(1e3*D.startTime)),s&&u.putMetric("_fid",Math.floor(1e3*s))}gO(u)}static createUserTimingTrace(t,e){gO(new Xy(t,e,!1,e))}}function iq(i,t){const e=t;if(!e||void 0===e.responseStart)return;const o=ua.getInstance().getTimeOrigin(),s=Math.floor(1e3*(e.startTime+o)),l=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,u=Math.floor(1e3*(e.responseEnd-e.startTime));!function lve(i){const t=pu.getInstance();if(!t.instrumentationEnabled)return;const e=i.url,o=t.logEndPointUrl.split("?")[0],s=t.flTransportEndpointUrl.split("?")[0];e===o||e===s||!t.loggingEnabled||!t.logNetworkAfterSampling||setTimeout(()=>tq(i,0),0)}({performanceController:i,url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:s,timeToResponseInitiatedUs:l,timeToResponseCompletedUs:u})}function rq(i){!AL()||(setTimeout(()=>function vve(i){const t=ua.getInstance(),e=t.getEntriesByType("navigation"),o=t.getEntriesByType("paint");if(t.onFirstInputDelay){let s=setTimeout(()=>{Xy.createOobTrace(i,e,o),s=void 0},5e3);t.onFirstInputDelay(l=>{s&&(clearTimeout(s),Xy.createOobTrace(i,e,o,l))})}else Xy.createOobTrace(i,e,o)}(i),0),setTimeout(()=>function yve(i){const t=ua.getInstance(),e=t.getEntriesByType("resource");for(const o of e)iq(i,o);t.setupObserver("resource",o=>iq(i,o))}(i),0),setTimeout(()=>function bve(i){const t=ua.getInstance(),e=t.getEntriesByType("measure");for(const o of e)oq(i,o);t.setupObserver("measure",o=>oq(i,o))}(i),0))}function oq(i,t){const e=t.name;e.substring(0,IL.length)!==IL&&Xy.createUserTimingTrace(i,e)}class wve{constructor(t,e){this.app=t,this.installations=e,this.initialized=!1}_init(t){this.initialized||(void 0!==t?.dataCollectionEnabled&&(this.dataCollectionEnabled=t.dataCollectionEnabled),void 0!==t?.instrumentationEnabled&&(this.instrumentationEnabled=t.instrumentationEnabled),ua.getInstance().requiredApisAvailable()?(0,re.eu)().then(e=>{e&&(function nve(){eq||(fO(5500),eq=!0)}(),JG(this).then(()=>rq(this),()=>rq(this)),this.initialized=!0)}).catch(e=>{Jf.info(`Environment doesn't support IndexedDB: ${e}`)}):Jf.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(t){pu.getInstance().instrumentationEnabled=t}get instrumentationEnabled(){return pu.getInstance().instrumentationEnabled}set dataCollectionEnabled(t){pu.getInstance().dataCollectionEnabled=t}get dataCollectionEnabled(){return pu.getInstance().dataCollectionEnabled}}function Tve(i=(0,oi.getApp)()){return i=(0,re.m9)(i),(0,oi._getProvider)(i,"performance").getImmediate()}const Eve=(i,{options:t})=>{const e=i.getProvider("app").getImmediate(),o=i.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==e.name)throw Ia.create("FB not default");if(typeof window>"u")throw Ia.create("no window");!function Aye(i){GG=i}(window);const s=new wve(e,o);return s._init(t),s};!function xve(){(0,oi._registerComponent)(new po.wA("performance",Eve,"PUBLIC")),(0,oi.registerVersion)(NG,DL),(0,oi.registerVersion)(NG,DL,"esm2017")}();class LL{constructor(t){return t}}const sq="performance",VL=new a.OlP("angularfire2.performance-instances");function Ive(i){return(t,e,o)=>{if(!xo(e))return null;const s=t.runOutsideAngular(()=>i(o));return new LL(s)}}const Mve={provide:class Sve{constructor(){return(0,St.vb)(sq)}},deps:[[new a.FiY,VL]]},Ave={provide:LL,useFactory:function Dve(i,t,e){if(!xo(e))return null;const o=(0,St.JM)(sq,i,t);return o&&new LL(o)},deps:[[new a.FiY,VL],Ur,a.Lbi]};let kve=(()=>{class i{constructor(){(0,br.KN)("angularfire",St.q4.full,"perf")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[Ave,Mve]}),i})();function Ove(i,...t){return{ngModule:kve,providers:[{provide:VL,useFactory:Ive(i),multi:!0,deps:[a.R0b,a.Lbi,a.zs3,St.HU,ms,...t]}]}}const Rve=(0,St.u3)(Tve,!0);var Pve=q(3226);class HL{constructor(t){return t}}const aq="remote-config",BL=new a.OlP("angularfire2.remote-config-instances");function Lve(i){return(t,e)=>{if(!St._J.sync())return null;const o=t.runOutsideAngular(()=>i(e));return new HL(o)}}const Vve={provide:class Nve{constructor(){return(0,St.vb)(aq)}},deps:[[new a.FiY,BL]]},Hve={provide:HL,useFactory:function Fve(i,t){if(!St._J.sync())return null;const e=(0,St.JM)(aq,i,t);return e&&new HL(e)},deps:[[new a.FiY,BL],Ur]};let Bve=(()=>{class i{constructor(){(0,br.KN)("angularfire",St.q4.full,"rc")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[Hve,Vve,{provide:a.ip1,useValue:St._J.async,multi:!0}]}),i})();function Uve(i,...t){return{ngModule:Bve,providers:[{provide:BL,useFactory:Lve(i),multi:!0,deps:[a.R0b,a.zs3,St.HU,ms,...t]}]}}const jve=(0,St.u3)(Pve.sN,!0);class UL{constructor(t){return t}}const lq="storage",jL=new a.OlP("angularfire2.storage-instances");function qve(i){return(t,e)=>{const o=t.runOutsideAngular(()=>i(e));return new UL(o)}}const Zve={provide:class zve{constructor(){return(0,St.vb)(lq)}},deps:[[new a.FiY,jL]]},$ve={provide:UL,useFactory:function Gve(i,t){const e=(0,St.JM)(lq,i,t);return e&&new UL(e)},deps:[[new a.FiY,jL],Ur]};let Wve=(()=>{class i{constructor(){(0,br.KN)("angularfire",St.q4.full,"gcs")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[$ve,Zve]}),i})();function Kve(i,...t){return{ngModule:Wve,providers:[{provide:jL,useFactory:qve(i),multi:!0,deps:[a.R0b,a.zs3,St.HU,ms,[new a.FiY,jo],[new a.FiY,_a],...t]}]}}const Yve=(0,St.u3)(W7,!0),Jve=[fde,ohe,lhe];let Qve=(()=>{class i{constructor(){qb.init(Tk.firebase)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i,bootstrap:[w8]}),i.\u0275inj=a.cJS({providers:[qf,J5,Zb,Ws,Z5,$5,bce,vce,{provide:Ds.Dh,useValue:Tk.firebase},DG,fL],imports:[Io,fY,Ds.hO,n_(()=>i_(Tk.firebase)),vY,I9,u9,Vee,Q5,Vu(()=>mr()),qee(()=>Zee()),Dq(()=>Mq()),Q5,w1,VP,gY,y_e,jq,Xre,che,Kse,qS,Yf,doe,hae,fhe,Bme,Lle,Yme,Jve,c_e,__e,jn,v_e,q_e(()=>T_e()),gye(()=>mye()),Eye(()=>xye()),Ove(()=>Rve()),Uve(()=>jve()),Kve(()=>Yve()),jn,w1,VP]}),i})();Tk.production&&(0,a.G48)(),xc().bootstrapModule(Qve).catch(i=>console.error(i))},7123:function(cn){cn.exports=function(Ye){function q(V){if(a[V])return a[V].exports;var W=a[V]={exports:{},id:V,loaded:!1};return Ye[V].call(W.exports,W,W.exports,q),W.loaded=!0,W.exports}var a={};return q.m=Ye,q.c=a,q.p="dist/",q(0)}([function(Ye,q,a){"use strict";function V(ke){return ke&&ke.__esModule?ke:{default:ke}}var W=Object.assign||function(ke){for(var be=1;be<arguments.length;be++){var Ce=arguments[be];for(var Ue in Ce)Object.prototype.hasOwnProperty.call(Ce,Ue)&&(ke[Ue]=Ce[Ue])}return ke},Ve=(V(a(1)),a(6)),Ae=V(Ve),Se=V(a(7)),ie=V(a(8)),ce=V(a(9)),Re=V(a(10)),ct=V(a(11)),Fe=V(a(14)),xt=[],gt=!1,Ke={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},Be=function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(gt=!0),gt)return xt=(0,ct.default)(xt,Ke),(0,Re.default)(xt,Ke.once),xt},$e=function(){xt=(0,Fe.default)(),Be()};Ye.exports={init:function(ke){Ke=W(Ke,ke),xt=(0,Fe.default)();var be=document.all&&!window.atob;return function(ke){return!0===ke||"mobile"===ke&&ce.default.mobile()||"phone"===ke&&ce.default.phone()||"tablet"===ke&&ce.default.tablet()||"function"==typeof ke&&!0===ke()}(Ke.disable)||be?void xt.forEach(function(ke,be){ke.node.removeAttribute("data-aos"),ke.node.removeAttribute("data-aos-easing"),ke.node.removeAttribute("data-aos-duration"),ke.node.removeAttribute("data-aos-delay")}):(Ke.disableMutationObserver||ie.default.isSupported()||(console.info('\n      aos: MutationObserver is not supported on this browser,\n      code mutations observing has been disabled.\n      You may have to call "refreshHard()" by yourself.\n    '),Ke.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",Ke.easing),document.querySelector("body").setAttribute("data-aos-duration",Ke.duration),document.querySelector("body").setAttribute("data-aos-delay",Ke.delay),"DOMContentLoaded"===Ke.startEvent&&["complete","interactive"].indexOf(document.readyState)>-1?Be(!0):"load"===Ke.startEvent?window.addEventListener(Ke.startEvent,function(){Be(!0)}):document.addEventListener(Ke.startEvent,function(){Be(!0)}),window.addEventListener("resize",(0,Se.default)(Be,Ke.debounceDelay,!0)),window.addEventListener("orientationchange",(0,Se.default)(Be,Ke.debounceDelay,!0)),window.addEventListener("scroll",(0,Ae.default)(function(){(0,Re.default)(xt,Ke.once)},Ke.throttleDelay)),Ke.disableMutationObserver||ie.default.ready("[data-aos]",$e),xt)},refresh:Be,refreshHard:$e}},function(Ye,q){},,,,,function(Ye,q){(function(a){"use strict";function V(ge,Me,ke){function be(en){var Tn=Ct,ri=At;return Ct=At=void 0,ut=en,Bt=ge.apply(ri,Tn)}function Ce(en){return ut=en,Yt=setTimeout(mt,Me),sn?be(en):Bt}function Ne(en){var Tn=en-Jt;return void 0===Jt||Tn>=Me||Tn<0||nn&&en-ut>=Kt}function mt(){var en=Je();return Ne(en)?lt(en):void(Yt=setTimeout(mt,function Ue(en){var vn=Me-(en-Jt);return nn?$e(vn,Kt-(en-ut)):vn}(en)))}function lt(en){return Yt=void 0,un&&Ct?be(en):(Ct=At=void 0,Bt)}function rn(){var en=Je(),Tn=Ne(en);if(Ct=arguments,At=this,Jt=en,Tn){if(void 0===Yt)return Ce(Jt);if(nn)return Yt=setTimeout(mt,Me),be(Jt)}return void 0===Yt&&(Yt=setTimeout(mt,Me)),Bt}var Ct,At,Kt,Bt,Yt,Jt,ut=0,sn=!1,nn=!1,un=!0;if("function"!=typeof ge)throw new TypeError(pe);return Me=ve(Me)||0,_e(ke)&&(sn=!!ke.leading,Kt=(nn="maxWait"in ke)?Be(ve(ke.maxWait)||0,Me):Kt,un="trailing"in ke?!!ke.trailing:un),rn.cancel=function Xt(){void 0!==Yt&&clearTimeout(Yt),ut=0,Ct=Jt=At=Yt=void 0},rn.flush=function gn(){return void 0===Yt?Bt:lt(Je())},rn}function _e(ge){var Me=typeof ge>"u"?"undefined":Se(ge);return!!ge&&("object"==Me||"function"==Me)}function Ae(ge){return"symbol"==(typeof ge>"u"?"undefined":Se(ge))||function Ve(ge){return!!ge&&"object"==(typeof ge>"u"?"undefined":Se(ge))}(ge)&&Ke.call(ge)==ne}function ve(ge){if("number"==typeof ge)return ge;if(Ae(ge))return ie;if(_e(ge)){var Me="function"==typeof ge.valueOf?ge.valueOf():ge;ge=_e(Me)?Me+"":Me}if("string"!=typeof ge)return 0===ge?ge:+ge;ge=ge.replace(ce,"");var ke=Re.test(ge);return ke||je.test(ge)?ct(ge.slice(2),ke?2:8):we.test(ge)?ie:+ge}var Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ge){return typeof ge}:function(ge){return ge&&"function"==typeof Symbol&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge},pe="Expected a function",ie=NaN,ne="[object Symbol]",ce=/^\s+|\s+$/g,we=/^[-+]0x[0-9a-f]+$/i,Re=/^0b[01]+$/i,je=/^0o[0-7]+$/i,ct=parseInt,He="object"==(typeof a>"u"?"undefined":Se(a))&&a&&a.Object===Object&&a,Fe="object"==(typeof self>"u"?"undefined":Se(self))&&self&&self.Object===Object&&self,xt=He||Fe||Function("return this")(),Ke=Object.prototype.toString,Be=Math.max,$e=Math.min,Je=function(){return xt.Date.now()};Ye.exports=function W(ge,Me,ke){var be=!0,Ce=!0;if("function"!=typeof ge)throw new TypeError(pe);return _e(ke)&&(be="leading"in ke?!!ke.leading:be,Ce="trailing"in ke?!!ke.trailing:Ce),V(ge,Me,{leading:be,maxWait:Me,trailing:Ce})}}).call(q,function(){return this}())},function(Ye,q){(function(a){"use strict";function W(Je){var ge=typeof Je>"u"?"undefined":ve(Je);return!!Je&&("object"==ge||"function"==ge)}function Ve(Je){return"symbol"==(typeof Je>"u"?"undefined":ve(Je))||function _e(Je){return!!Je&&"object"==(typeof Je>"u"?"undefined":ve(Je))}(Je)&&gt.call(Je)==ie}function Ae(Je){if("number"==typeof Je)return Je;if(Ve(Je))return pe;if(W(Je)){var ge="function"==typeof Je.valueOf?Je.valueOf():Je;Je=W(ge)?ge+"":ge}if("string"!=typeof Je)return 0===Je?Je:+Je;Je=Je.replace(ne,"");var Me=we.test(Je);return Me||Re.test(Je)?je(Je.slice(2),Me?2:8):ce.test(Je)?pe:+Je}var ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Je){return typeof Je}:function(Je){return Je&&"function"==typeof Symbol&&Je.constructor===Symbol&&Je!==Symbol.prototype?"symbol":typeof Je},Se="Expected a function",pe=NaN,ie="[object Symbol]",ne=/^\s+|\s+$/g,ce=/^[-+]0x[0-9a-f]+$/i,we=/^0b[01]+$/i,Re=/^0o[0-7]+$/i,je=parseInt,ct="object"==(typeof a>"u"?"undefined":ve(a))&&a&&a.Object===Object&&a,He="object"==(typeof self>"u"?"undefined":ve(self))&&self&&self.Object===Object&&self,Fe=ct||He||Function("return this")(),gt=Object.prototype.toString,Ke=Math.max,Be=Math.min,$e=function(){return Fe.Date.now()};Ye.exports=function V(Je,ge,Me){function ke(un){var en=rn,Tn=Ct;return rn=Ct=void 0,Jt=un,Kt=Je.apply(Tn,en)}function be(un){return Jt=un,Bt=setTimeout(Ne,ge),ut?ke(un):Kt}function Ue(un){var en=un-Yt;return void 0===Yt||en>=ge||en<0||sn&&un-Jt>=At}function Ne(){var un=$e();return Ue(un)?mt(un):void(Bt=setTimeout(Ne,function Ce(un){var ri=ge-(un-Yt);return sn?Be(ri,At-(un-Jt)):ri}(un)))}function mt(un){return Bt=void 0,nn&&rn?ke(un):(rn=Ct=void 0,Kt)}function gn(){var un=$e(),en=Ue(un);if(rn=arguments,Ct=this,Yt=un,en){if(void 0===Bt)return be(Yt);if(sn)return Bt=setTimeout(Ne,ge),ke(Yt)}return void 0===Bt&&(Bt=setTimeout(Ne,ge)),Kt}var rn,Ct,At,Kt,Bt,Yt,Jt=0,ut=!1,sn=!1,nn=!0;if("function"!=typeof Je)throw new TypeError(Se);return ge=Ae(ge)||0,W(Me)&&(ut=!!Me.leading,At=(sn="maxWait"in Me)?Ke(Ae(Me.maxWait)||0,ge):At,nn="trailing"in Me?!!Me.trailing:nn),gn.cancel=function lt(){void 0!==Bt&&clearTimeout(Bt),Jt=0,rn=Yt=Ct=Bt=void 0},gn.flush=function Xt(){return void 0===Bt?Kt:mt($e())},gn}}).call(q,function(){return this}())},function(Ye,q){"use strict";function a(ve){var Se=void 0,pe=void 0;for(Se=0;Se<ve.length;Se+=1)if((pe=ve[Se]).dataset&&pe.dataset.aos||pe.children&&a(pe.children))return!0;return!1}function V(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function Ve(ve){ve&&ve.forEach(function(Se){var pe=Array.prototype.slice.call(Se.addedNodes),ie=Array.prototype.slice.call(Se.removedNodes);if(a(pe.concat(ie)))return Ae()})}Object.defineProperty(q,"__esModule",{value:!0});var Ae=function(){};q.default={isSupported:function W(){return!!V()},ready:function _e(ve,Se){var pe=window.document,ne=new(V())(Ve);Ae=Se,ne.observe(pe.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}}},function(Ye,q){"use strict";function V(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(q,"__esModule",{value:!0});var W=function(){function pe(ie,ne){for(var ce=0;ce<ne.length;ce++){var we=ne[ce];we.enumerable=we.enumerable||!1,we.configurable=!0,"value"in we&&(we.writable=!0),Object.defineProperty(ie,we.key,we)}}return function(ie,ne,ce){return ne&&pe(ie.prototype,ne),ce&&pe(ie,ce),ie}}(),_e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,Ve=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,Ae=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,ve=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,Se=function(){function pe(){!function a(pe,ie){if(!(pe instanceof ie))throw new TypeError("Cannot call a class as a function")}(this,pe)}return W(pe,[{key:"phone",value:function(){var ie=V();return!(!_e.test(ie)&&!Ve.test(ie.substr(0,4)))}},{key:"mobile",value:function(){var ie=V();return!(!Ae.test(ie)&&!ve.test(ie.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),pe}();q.default=new Se},function(Ye,q){"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.default=function(W,_e){var Ve=window.pageYOffset,Ae=window.innerHeight;W.forEach(function(ve,Se){!function(W,_e,Ve){var Ae=W.node.getAttribute("data-aos-once");_e>W.position?W.node.classList.add("aos-animate"):typeof Ae<"u"&&("false"===Ae||!Ve&&"true"!==Ae)&&W.node.classList.remove("aos-animate")}(ve,Ae+Ve,_e)})}},function(Ye,q,a){"use strict";Object.defineProperty(q,"__esModule",{value:!0});var _e=function V(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}(a(12));q.default=function(Ae,ve){return Ae.forEach(function(Se,pe){Se.node.classList.add("aos-init"),Se.position=(0,_e.default)(Se.node,ve.offset)}),Ae}},function(Ye,q,a){"use strict";Object.defineProperty(q,"__esModule",{value:!0});var _e=function V(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}(a(13));q.default=function(Ae,ve){var Se=0,pe=0,ie=window.innerHeight,ne={offset:Ae.getAttribute("data-aos-offset"),anchor:Ae.getAttribute("data-aos-anchor"),anchorPlacement:Ae.getAttribute("data-aos-anchor-placement")};switch(ne.offset&&!isNaN(ne.offset)&&(pe=parseInt(ne.offset)),ne.anchor&&document.querySelectorAll(ne.anchor)&&(Ae=document.querySelectorAll(ne.anchor)[0]),Se=(0,_e.default)(Ae).top,ne.anchorPlacement){case"top-bottom":break;case"center-bottom":Se+=Ae.offsetHeight/2;break;case"bottom-bottom":Se+=Ae.offsetHeight;break;case"top-center":Se+=ie/2;break;case"bottom-center":Se+=ie/2+Ae.offsetHeight;break;case"center-center":Se+=ie/2+Ae.offsetHeight/2;break;case"top-top":Se+=ie;break;case"bottom-top":Se+=Ae.offsetHeight+ie;break;case"center-top":Se+=Ae.offsetHeight/2+ie}return ne.anchorPlacement||ne.offset||isNaN(ve)||(pe=ve),Se+pe}},function(Ye,q){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.default=function(V){for(var W=0,_e=0;V&&!isNaN(V.offsetLeft)&&!isNaN(V.offsetTop);)W+=V.offsetLeft-("BODY"!=V.tagName?V.scrollLeft:0),_e+=V.offsetTop-("BODY"!=V.tagName?V.scrollTop:0),V=V.offsetParent;return{top:_e,left:W}}},function(Ye,q){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.default=function(V){return V=V||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(V,function(W){return{node:W}})}}])},6148:(cn,Ye,q)=>{"use strict";q.d(Ye,{IH:()=>Yi,Gb:()=>qi,Kz:()=>Ge,Iv:()=>K});var a=q(5861),V=q(9681),W=q(1877),_e=q(2090),Ve=q(4859);q(2833);const ve="analytics",Se="firebase_id",ne="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ce="https://www.googletagmanager.com/gtag/js",we=new W.Yd("@firebase/analytics");function Re(Pe){return Promise.all(Pe.map(le=>le.catch(oe=>oe)))}function je(Pe,le){const oe=document.createElement("script");oe.src=`${ce}?l=${Pe}&id=${le}`,oe.async=!0,document.head.appendChild(oe)}function He(Pe,le,oe,ue,De,at){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,a.Z)(function*(Pe,le,oe,ue,De,at){const Lt=ue[De];try{if(Lt)yield le[Lt];else{const Ot=(yield Re(oe)).find(dn=>dn.measurementId===De);Ot&&(yield le[Ot.appId])}}catch(it){we.error(it)}Pe("config",De,at)})).apply(this,arguments)}function xt(Pe,le,oe,ue,De){return gt.apply(this,arguments)}function gt(){return(gt=(0,a.Z)(function*(Pe,le,oe,ue,De){try{let at=[];if(De&&De.send_to){let Lt=De.send_to;Array.isArray(Lt)||(Lt=[Lt]);const it=yield Re(oe);for(const Ot of Lt){const dn=it.find(Fi=>Fi.measurementId===Ot),ni=dn&&le[dn.appId];if(!ni){at=[];break}at.push(ni)}}0===at.length&&(at=Object.values(le)),yield Promise.all(at),Pe("event",ue,De||{})}catch(at){we.error(at)}})).apply(this,arguments)}function $e(){const Pe=window.document.getElementsByTagName("script");for(const le of Object.values(Pe))if(le.src&&le.src.includes(ce))return le;return null}const ge=new _e.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ce=new class be{constructor(le={},oe=1e3){this.throttleMetadata=le,this.intervalMillis=oe}getThrottleMetadata(le){return this.throttleMetadata[le]}setThrottleMetadata(le,oe){this.throttleMetadata[le]=oe}deleteThrottleMetadata(le){delete this.throttleMetadata[le]}};function Ue(Pe){return new Headers({Accept:"application/json","x-goog-api-key":Pe})}function Ne(Pe){return mt.apply(this,arguments)}function mt(){return(mt=(0,a.Z)(function*(Pe){var le;const{appId:oe,apiKey:ue}=Pe,De={method:"GET",headers:Ue(ue)},at=ne.replace("{app-id}",oe),Lt=yield fetch(at,De);if(200!==Lt.status&&304!==Lt.status){let it="";try{const Ot=yield Lt.json();null!==(le=Ot.error)&&void 0!==le&&le.message&&(it=Ot.error.message)}catch{}throw ge.create("config-fetch-failed",{httpStatus:Lt.status,responseMessage:it})}return Lt.json()})).apply(this,arguments)}function lt(Pe){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,a.Z)(function*(Pe,le=Ce,oe){const{appId:ue,apiKey:De,measurementId:at}=Pe.options;if(!ue)throw ge.create("no-app-id");if(!De){if(at)return{measurementId:at,appId:ue};throw ge.create("no-api-key")}const Lt=le.getThrottleMetadata(ue)||{backoffCount:0,throttleEndTimeMillis:Date.now()},it=new Kt;return setTimeout((0,a.Z)(function*(){it.abort()}),void 0!==oe?oe:6e4),gn({appId:ue,apiKey:De,measurementId:at},Lt,it,le)})).apply(this,arguments)}function gn(Pe,le,oe){return rn.apply(this,arguments)}function rn(){return(rn=(0,a.Z)(function*(Pe,{throttleEndTimeMillis:le,backoffCount:oe},ue,De=Ce){var at,Lt;const{appId:it,measurementId:Ot}=Pe;try{yield Ct(ue,le)}catch(dn){if(Ot)return we.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ot} provided in the "measurementId" field in the local Firebase config. [${null===(at=dn)||void 0===at?void 0:at.message}]`),{appId:it,measurementId:Ot};throw dn}try{const dn=yield Ne(Pe);return De.deleteThrottleMetadata(it),dn}catch(dn){const ni=dn;if(!At(ni)){if(De.deleteThrottleMetadata(it),Ot)return we.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ot} provided in the "measurementId" field in the local Firebase config. [${ni?.message}]`),{appId:it,measurementId:Ot};throw dn}const Fi=503===Number(null===(Lt=ni?.customData)||void 0===Lt?void 0:Lt.httpStatus)?(0,_e.$s)(oe,De.intervalMillis,30):(0,_e.$s)(oe,De.intervalMillis),En={throttleEndTimeMillis:Date.now()+Fi,backoffCount:oe+1};return De.setThrottleMetadata(it,En),we.debug(`Calling attemptFetch again in ${Fi} millis`),gn(Pe,En,ue,De)}})).apply(this,arguments)}function Ct(Pe,le){return new Promise((oe,ue)=>{const De=Math.max(le-Date.now(),0),at=setTimeout(oe,De);Pe.addEventListener(()=>{clearTimeout(at),ue(ge.create("fetch-throttle",{throttleEndTimeMillis:le}))})})}function At(Pe){if(!(Pe instanceof _e.ZR&&Pe.customData))return!1;const le=Number(Pe.customData.httpStatus);return 429===le||500===le||503===le||504===le}class Kt{constructor(){this.listeners=[]}addEventListener(le){this.listeners.push(le)}abort(){this.listeners.forEach(le=>le())}}let Bt,Sn;function Jt(){return(Jt=(0,a.Z)(function*(Pe,le,oe,ue,De){if(De&&De.global)Pe("event",oe,ue);else{const at=yield le;Pe("event",oe,Object.assign(Object.assign({},ue),{send_to:at}))}})).apply(this,arguments)}function un(){return(un=(0,a.Z)(function*(Pe,le,oe,ue){if(ue&&ue.global)return Pe("set",{user_id:oe}),Promise.resolve();Pe("config",yield le,{update:!0,user_id:oe})})).apply(this,arguments)}function yi(Pe){Sn=Pe}function tt(Pe){Bt=Pe}function Le(){return _t.apply(this,arguments)}function _t(){return(_t=(0,a.Z)(function*(){var Pe;if(!(0,_e.hl)())return we.warn(ge.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,_e.eu)()}catch(le){return we.warn(ge.create("indexeddb-unavailable",{errorInfo:null===(Pe=le)||void 0===Pe?void 0:Pe.toString()}).message),!1}return!0})).apply(this,arguments)}function Gt(){return(Gt=(0,a.Z)(function*(Pe,le,oe,ue,De,at,Lt){var it;const Ot=lt(Pe);Ot.then(Si=>{oe[Si.measurementId]=Si.appId,Pe.options.measurementId&&Si.measurementId!==Pe.options.measurementId&&we.warn(`The measurement ID in the local Firebase config (${Pe.options.measurementId}) does not match the measurement ID fetched from the server (${Si.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Si=>we.error(Si)),le.push(Ot);const dn=Le().then(Si=>{if(Si)return ue.getId()}),[ni,Fi]=yield Promise.all([Ot,dn]);$e()||je(at,ni.measurementId),Sn&&(De("consent","default",Sn),yi(void 0)),De("js",new Date);const En=null!==(it=Lt?.config)&&void 0!==it?it:{};return En.origin="firebase",En.update=!0,null!=Fi&&(En[Se]=Fi),De("config",ni.measurementId,En),Bt&&(De("set",Bt),tt(void 0)),ni.measurementId})).apply(this,arguments)}class Nn{constructor(le){this.app=le}_delete(){return delete Dn[this.app.options.appId],Promise.resolve()}}let Dn={},Gn=[];const Kn={};let Pt,Yn,Vn="dataLayer",Ni=!1;function ci(Pe,le,oe){!function kn(){const Pe=[];if((0,_e.ru)()&&Pe.push("This is a browser extension environment."),(0,_e.zI)()||Pe.push("Cookies are not available."),Pe.length>0){const le=Pe.map((ue,De)=>`(${De+1}) ${ue}`).join(" "),oe=ge.create("invalid-analytics-context",{errorInfo:le});we.warn(oe.message)}}();const ue=Pe.options.appId;if(!ue)throw ge.create("no-app-id");if(!Pe.options.apiKey){if(!Pe.options.measurementId)throw ge.create("no-api-key");we.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${Pe.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Dn[ue])throw ge.create("already-exists",{id:ue});if(!Ni){!function ct(Pe){let le=[];Array.isArray(window[Pe])?le=window[Pe]:window[Pe]=le}(Vn);const{wrappedGtag:at,gtagCore:Lt}=function Be(Pe,le,oe,ue,De){let at=function(...Lt){window[ue].push(arguments)};return window[De]&&"function"==typeof window[De]&&(at=window[De]),window[De]=function Ke(Pe,le,oe,ue){function at(){return(at=(0,a.Z)(function*(Lt,it,Ot){try{"event"===Lt?yield xt(Pe,le,oe,it,Ot):"config"===Lt?yield He(Pe,le,oe,ue,it,Ot):"consent"===Lt?Pe("consent","update",Ot):Pe("set",it)}catch(dn){we.error(dn)}})).apply(this,arguments)}return function De(Lt,it,Ot){return at.apply(this,arguments)}}(at,Pe,le,oe),{gtagCore:at,wrappedGtag:window[De]}}(Dn,Gn,Kn,Vn,"gtag");Yn=at,Pt=Lt,Ni=!0}return Dn[ue]=function Tt(Pe,le,oe,ue,De,at,Lt){return Gt.apply(this,arguments)}(Pe,Gn,Kn,le,Pt,Vn,oe),new Nn(Pe)}function Yi(Pe=(0,V.getApp)()){Pe=(0,_e.m9)(Pe);const le=(0,V._getProvider)(Pe,ve);return le.isInitialized()?le.getImmediate():function In(Pe,le={}){const oe=(0,V._getProvider)(Pe,ve);if(oe.isInitialized()){const De=oe.getImmediate();if((0,_e.vZ)(le,oe.getOptions()))return De;throw ge.create("already-initialized")}return oe.initialize({options:le})}(Pe)}function qi(){return me.apply(this,arguments)}function me(){return(me=(0,a.Z)(function*(){if((0,_e.ru)()||!(0,_e.zI)()||!(0,_e.hl)())return!1;try{return yield(0,_e.eu)()}catch{return!1}})).apply(this,arguments)}function K(Pe,le,oe){Pe=(0,_e.m9)(Pe),function nn(Pe,le,oe,ue){return un.apply(this,arguments)}(Yn,Dn[Pe.app.options.appId],le,oe).catch(ue=>we.error(ue))}function Ge(Pe,le,oe,ue){Pe=(0,_e.m9)(Pe),function Yt(Pe,le,oe,ue,De){return Jt.apply(this,arguments)}(Yn,Dn[Pe.app.options.appId],le,oe,ue).catch(De=>we.error(De))}const $t="@firebase/analytics";!function Hn(){(0,V._registerComponent)(new Ve.wA(ve,(le,{options:oe})=>ci(le.getProvider("app").getImmediate(),le.getProvider("installations-internal").getImmediate(),oe),"PUBLIC")),(0,V._registerComponent)(new Ve.wA("analytics-internal",function Pe(le){try{const oe=le.getProvider(ve).getImmediate();return{logEvent:(ue,De,at)=>Ge(oe,ue,De,at)}}catch(oe){throw ge.create("interop-component-reg-failed",{reason:oe})}},"PRIVATE")),(0,V.registerVersion)($t,"0.8.0"),(0,V.registerVersion)($t,"0.8.0","esm2017")}()},5867:(cn,Ye,q)=>{"use strict";q.d(Ye,{C6:()=>a.getApps,KN:()=>a.registerVersion,Mq:()=>a.getApp,ZF:()=>a.initializeApp});var a=q(9681);(0,a.registerVersion)("firebase","9.9.1","app")},127:(cn,Ye,q)=>{"use strict";q.d(Ye,{Z:()=>a.Z});var a=q(3942);a.Z.registerVersion("firebase","9.9.1","app-compat")},5881:(cn,Ye,q)=>{"use strict";q.r(Ye);var a=q(5861),V=q(3942),W=q(6457),_e=q(2090),ve=(q(9681),q(1877),q(4859));function Se(){return window}function ne(){return(ne=(0,a.Z)(function*(le,oe,ue){var De;const{BuildInfo:at}=Se();(0,W.aq)(oe.sessionId,"AuthEvent did not contain a session ID");const Lt=yield Fe(oe.sessionId),it={};return(0,W.ar)()?it.ibi=at.packageName:(0,W.as)()?it.apn=at.packageName:(0,W.at)(le,"operation-not-supported-in-this-environment"),at.displayName&&(it.appDisplayName=at.displayName),it.sessionId=Lt,(0,W.au)(le,ue,oe.type,void 0,null!==(De=oe.eventId)&&void 0!==De?De:void 0,it)})).apply(this,arguments)}function we(){return(we=(0,a.Z)(function*(le){const{BuildInfo:oe}=Se(),ue={};(0,W.ar)()?ue.iosBundleId=oe.packageName:(0,W.as)()?ue.androidPackageName=oe.packageName:(0,W.at)(le,"operation-not-supported-in-this-environment"),yield(0,W.av)(le,ue)})).apply(this,arguments)}function ct(){return(ct=(0,a.Z)(function*(le,oe,ue){const{cordova:De}=Se();let at=()=>{};try{yield new Promise((Lt,it)=>{let Ot=null;function dn(){var En;Lt();const Si=null===(En=De.plugins.browsertab)||void 0===En?void 0:En.close;"function"==typeof Si&&Si(),"function"==typeof ue?.close&&ue.close()}function ni(){Ot||(Ot=window.setTimeout(()=>{it((0,W.aw)(le,"redirect-cancelled-by-user"))},2e3))}function Fi(){"visible"===document?.visibilityState&&ni()}oe.addPassiveListener(dn),document.addEventListener("resume",ni,!1),(0,W.as)()&&document.addEventListener("visibilitychange",Fi,!1),at=()=>{oe.removePassiveListener(dn),document.removeEventListener("resume",ni,!1),document.removeEventListener("visibilitychange",Fi,!1),Ot&&window.clearTimeout(Ot)}})}finally{at()}})).apply(this,arguments)}function Fe(le){return xt.apply(this,arguments)}function xt(){return(xt=(0,a.Z)(function*(le){const oe=gt(le),ue=yield crypto.subtle.digest("SHA-256",oe);return Array.from(new Uint8Array(ue)).map(at=>at.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function gt(le){if((0,W.aq)(/[0-9a-zA-Z]+/.test(le),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(le);const oe=new ArrayBuffer(le.length),ue=new Uint8Array(oe);for(let De=0;De<le.length;De++)ue[De]=le.charCodeAt(De);return ue}class Be extends W.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(oe=>{this.resolveInialized=oe})}addPassiveListener(oe){this.passiveListeners.add(oe)}removePassiveListener(oe){this.passiveListeners.delete(oe)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(oe){return this.resolveInialized(),this.passiveListeners.forEach(ue=>ue(oe)),super.onEvent(oe)}initialized(){var oe=this;return(0,a.Z)(function*(){yield oe.initPromise})()}}function ge(le){return Me.apply(this,arguments)}function Me(){return(Me=(0,a.Z)(function*(le){const oe=yield Ce()._get(Ue(le));return oe&&(yield Ce()._remove(Ue(le))),oe})).apply(this,arguments)}function be(){const le=[],oe="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let ue=0;ue<20;ue++){const De=Math.floor(Math.random()*oe.length);le.push(oe.charAt(De))}return le.join("")}function Ce(){return(0,W.ay)(W.b)}function Ue(le){return(0,W.az)("authEvent",le.config.apiKey,le.name)}function lt(le){if(!le?.includes("?"))return{};const[oe,...ue]=le.split("?");return(0,_e.zd)(ue.join("?"))}function Ct(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,W.aw)("no-auth-event")}}function Jt(){var le;return(null===(le=self?.location)||void 0===le?void 0:le.protocol)||null}function sn(le=(0,_e.z$)()){return!("file:"!==Jt()&&"ionic:"!==Jt()&&"capacitor:"!==Jt()||!le.toLowerCase().match(/iphone|ipad|ipod|android/))}function ri(){try{const le=self.localStorage,oe=W.aI();if(le)return le.setItem(oe,"1"),le.removeItem(oe),!function Tn(le=(0,_e.z$)()){return function un(){return(0,_e.w1)()&&11===document?.documentMode}()||function en(le=(0,_e.z$)()){return/Edge\/\d+/.test(le)}(le)}()||(0,_e.hl)()}catch{return vn()&&(0,_e.hl)()}return!1}function vn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Sn(){return(function ut(){return"http:"===Jt()||"https:"===Jt()}()||(0,_e.ru)()||sn())&&!function nn(){return(0,_e.b$)()||(0,_e.UG)()}()&&ri()&&!vn()}function yi(){return sn()&&typeof document<"u"}function Le(){return(Le=(0,a.Z)(function*(){return!!yi()&&new Promise(le=>{const oe=setTimeout(()=>{le(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(oe),le(!0)})})})).apply(this,arguments)}const Tt={LOCAL:"local",NONE:"none",SESSION:"session"},Gt=W.ax,Nn="persistence";function Gn(le){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,a.Z)(function*(le){yield le._initializationPromise;const oe=Ht(),ue=W.az(Nn,le.config.apiKey,le.name);oe&&oe.setItem(ue,le._getPersistence())})).apply(this,arguments)}function Ht(){var le;try{return(null===(le=function _t(){return typeof window<"u"?window:null}())||void 0===le?void 0:le.sessionStorage)||null}catch{return null}}const Pt=W.ax;class Yn{constructor(){this.browserResolver=W.ay(W.k),this.cordovaResolver=W.ay(class gn{constructor(){this._redirectPersistence=W.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=W.aB,this._overrideRedirectResult=W.aC}_initialize(oe){var ue=this;return(0,a.Z)(function*(){const De=oe._key();let at=ue.eventManagers.get(De);return at||(at=new Be(oe),ue.eventManagers.set(De,at),ue.attachCallbackListeners(oe,at)),at})()}_openPopup(oe){(0,W.at)(oe,"operation-not-supported-in-this-environment")}_openRedirect(oe,ue,De,at){var Lt=this;return(0,a.Z)(function*(){!function He(le){var oe,ue,De,at,Lt,it,Ot,dn,ni,Fi;const En=Se();(0,W.ax)("function"==typeof(null===(oe=En?.universalLinks)||void 0===oe?void 0:oe.subscribe),le,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,W.ax)(typeof(null===(ue=En?.BuildInfo)||void 0===ue?void 0:ue.packageName)<"u",le,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,W.ax)("function"==typeof(null===(Lt=null===(at=null===(De=En?.cordova)||void 0===De?void 0:De.plugins)||void 0===at?void 0:at.browsertab)||void 0===Lt?void 0:Lt.openUrl),le,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,W.ax)("function"==typeof(null===(dn=null===(Ot=null===(it=En?.cordova)||void 0===it?void 0:it.plugins)||void 0===Ot?void 0:Ot.browsertab)||void 0===dn?void 0:dn.isAvailable),le,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,W.ax)("function"==typeof(null===(Fi=null===(ni=En?.cordova)||void 0===ni?void 0:ni.InAppBrowser)||void 0===Fi?void 0:Fi.open),le,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(oe);const it=yield Lt._initialize(oe);yield it.initialized(),it.resetRedirect(),(0,W.aD)(),yield Lt._originValidation(oe);const Ot=function $e(le,oe,ue=null){return{type:oe,eventId:ue,urlResponse:null,sessionId:be(),postBody:null,tenantId:le.tenantId,error:(0,W.aw)(le,"no-auth-event")}}(oe,De,at);yield function Je(le,oe){return Ce()._set(Ue(le),oe)}(oe,Ot);const dn=yield function ie(le,oe,ue){return ne.apply(this,arguments)}(oe,Ot,ue),ni=yield function Re(le){const{cordova:oe}=Se();return new Promise(ue=>{oe.plugins.browsertab.isAvailable(De=>{let at=null;De?oe.plugins.browsertab.openUrl(le):at=oe.InAppBrowser.open(le,(0,W.ap)()?"_blank":"_system","location=yes"),ue(at)})})}(dn);return function je(le,oe,ue){return ct.apply(this,arguments)}(oe,it,ni)})()}_isIframeWebStorageSupported(oe,ue){throw new Error("Method not implemented.")}_originValidation(oe){const ue=oe._key();return this.originValidationPromises[ue]||(this.originValidationPromises[ue]=function ce(le){return we.apply(this,arguments)}(oe)),this.originValidationPromises[ue]}attachCallbackListeners(oe,ue){const{universalLinks:De,handleOpenURL:at,BuildInfo:Lt}=Se(),it=setTimeout((0,a.Z)(function*(){yield ge(oe),ue.onEvent(Ct())}),500),Ot=function(){var Fi=(0,a.Z)(function*(En){clearTimeout(it);const Si=yield ge(oe);let Te=null;Si&&En?.url&&(Te=function ke(le,oe){var ue,De;const at=function mt(le){const oe=lt(le),ue=oe.link?decodeURIComponent(oe.link):void 0,De=lt(ue).link,at=oe.deep_link_id?decodeURIComponent(oe.deep_link_id):void 0;return lt(at).link||at||De||ue||le}(oe);if(at.includes("/__/auth/callback")){const Lt=lt(at),it=Lt.firebaseError?function Ne(le){try{return JSON.parse(le)}catch{return null}}(decodeURIComponent(Lt.firebaseError)):null,Ot=null===(De=null===(ue=it?.code)||void 0===ue?void 0:ue.split("auth/"))||void 0===De?void 0:De[1],dn=Ot?(0,W.aw)(Ot):null;return dn?{type:le.type,eventId:le.eventId,tenantId:le.tenantId,error:dn,urlResponse:null,sessionId:null,postBody:null}:{type:le.type,eventId:le.eventId,tenantId:le.tenantId,sessionId:le.sessionId,urlResponse:at,postBody:null}}return null}(Si,En.url)),ue.onEvent(Te||Ct())});return function(Si){return Fi.apply(this,arguments)}}();typeof De<"u"&&"function"==typeof De.subscribe&&De.subscribe(null,Ot);const dn=at,ni=`${Lt.packageName.toLowerCase()}://`;Se().handleOpenURL=function(){var Fi=(0,a.Z)(function*(En){if(En.toLowerCase().startsWith(ni)&&Ot({url:En}),"function"==typeof dn)try{dn(En)}catch(Si){console.error(Si)}});return function(En){return Fi.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=W.a,this._completeRedirectFn=W.aB,this._overrideRedirectResult=W.aC}_initialize(oe){var ue=this;return(0,a.Z)(function*(){return yield ue.selectUnderlyingResolver(),ue.assertedUnderlyingResolver._initialize(oe)})()}_openPopup(oe,ue,De,at){var Lt=this;return(0,a.Z)(function*(){return yield Lt.selectUnderlyingResolver(),Lt.assertedUnderlyingResolver._openPopup(oe,ue,De,at)})()}_openRedirect(oe,ue,De,at){var Lt=this;return(0,a.Z)(function*(){return yield Lt.selectUnderlyingResolver(),Lt.assertedUnderlyingResolver._openRedirect(oe,ue,De,at)})()}_isIframeWebStorageSupported(oe,ue){this.assertedUnderlyingResolver._isIframeWebStorageSupported(oe,ue)}_originValidation(oe){return this.assertedUnderlyingResolver._originValidation(oe)}get _shouldInitProactively(){return yi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Pt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var oe=this;return(0,a.Z)(function*(){if(oe.underlyingResolver)return;const ue=yield function tt(){return Le.apply(this,arguments)}();oe.underlyingResolver=ue?oe.cordovaResolver:oe.browserResolver})()}}function Ni(le){return le.unwrap()}function kn(le){return Yi(le)}function Yi(le){const{_tokenResponse:oe}=le instanceof _e.ZR?le.customData:le;if(!oe)return null;if(!(le instanceof _e.ZR)&&"temporaryProof"in oe&&"phoneNumber"in oe)return W.P.credentialFromResult(le);const ue=oe.providerId;if(!ue||ue===W.o.PASSWORD)return null;let De;switch(ue){case W.o.GOOGLE:De=W.Q;break;case W.o.FACEBOOK:De=W.N;break;case W.o.GITHUB:De=W.T;break;case W.o.TWITTER:De=W.W;break;default:const{oauthIdToken:at,oauthAccessToken:Lt,oauthTokenSecret:it,pendingToken:Ot,nonce:dn}=oe;return Lt||it||at||Ot?Ot?ue.startsWith("saml.")?W.aL._create(ue,Ot):W.J._fromParams({providerId:ue,signInMethod:ue,pendingToken:Ot,idToken:at,accessToken:Lt}):new W.U(ue).credential({idToken:at,accessToken:Lt,rawNonce:dn}):null}return le instanceof _e.ZR?De.credentialFromError(le):De.credentialFromResult(le)}function In(le,oe){return oe.catch(ue=>{throw ue instanceof _e.ZR&&function ci(le,oe){var ue,De;const at=null===(ue=oe.customData)||void 0===ue?void 0:ue._tokenResponse;if("auth/multi-factor-auth-required"===(null===(De=oe)||void 0===De?void 0:De.code))oe.resolver=new z(le,W.an(le,oe));else if(at){const Lt=Yi(oe),it=oe;Lt&&(it.credential=Lt,it.tenantId=at.tenantId||void 0,it.email=at.email||void 0,it.phoneNumber=at.phoneNumber||void 0)}}(le,ue),ue}).then(ue=>{const at=ue.user;return{operationType:ue.operationType,credential:kn(ue),additionalUserInfo:W.al(ue),user:K.getOrCreate(at)}})}function qi(le,oe){return me.apply(this,arguments)}function me(){return(me=(0,a.Z)(function*(le,oe){const ue=yield oe;return{verificationId:ue.verificationId,confirm:De=>In(le,ue.confirm(De))}})).apply(this,arguments)}class z{constructor(oe,ue){this.resolver=ue,this.auth=function mi(le){return le.wrapped()}(oe)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(oe){return In(Ni(this.auth),this.resolver.resolveSignIn(oe))}}class K{constructor(oe){this._delegate=oe,this.multiFactor=W.ao(oe)}static getOrCreate(oe){return K.USER_MAP.has(oe)||K.USER_MAP.set(oe,new K(oe)),K.USER_MAP.get(oe)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(oe){return this._delegate.getIdTokenResult(oe)}getIdToken(oe){return this._delegate.getIdToken(oe)}linkAndRetrieveDataWithCredential(oe){return this.linkWithCredential(oe)}linkWithCredential(oe){var ue=this;return(0,a.Z)(function*(){return In(ue.auth,W.Z(ue._delegate,oe))})()}linkWithPhoneNumber(oe,ue){var De=this;return(0,a.Z)(function*(){return qi(De.auth,W.l(De._delegate,oe,ue))})()}linkWithPopup(oe){var ue=this;return(0,a.Z)(function*(){return In(ue.auth,W.d(ue._delegate,oe,Yn))})()}linkWithRedirect(oe){var ue=this;return(0,a.Z)(function*(){return yield Gn(W.aE(ue.auth)),W.g(ue._delegate,oe,Yn)})()}reauthenticateAndRetrieveDataWithCredential(oe){return this.reauthenticateWithCredential(oe)}reauthenticateWithCredential(oe){var ue=this;return(0,a.Z)(function*(){return In(ue.auth,W._(ue._delegate,oe))})()}reauthenticateWithPhoneNumber(oe,ue){return qi(this.auth,W.r(this._delegate,oe,ue))}reauthenticateWithPopup(oe){return In(this.auth,W.e(this._delegate,oe,Yn))}reauthenticateWithRedirect(oe){var ue=this;return(0,a.Z)(function*(){return yield Gn(W.aE(ue.auth)),W.h(ue._delegate,oe,Yn)})()}sendEmailVerification(oe){return W.ab(this._delegate,oe)}unlink(oe){var ue=this;return(0,a.Z)(function*(){return yield W.ak(ue._delegate,oe),ue})()}updateEmail(oe){return W.ag(this._delegate,oe)}updatePassword(oe){return W.ah(this._delegate,oe)}updatePhoneNumber(oe){return W.u(this._delegate,oe)}updateProfile(oe){return W.af(this._delegate,oe)}verifyBeforeUpdateEmail(oe,ue){return W.ac(this._delegate,oe,ue)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}K.USER_MAP=new WeakMap;const X=W.ax;let J=(()=>{class le{constructor(ue,De){if(this.app=ue,De.isInitialized())return this._delegate=De.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:at}=ue.options;X(at,"invalid-api-key",{appName:ue.name}),X(at,"invalid-api-key",{appName:ue.name});const Lt=typeof window<"u"?Yn:void 0;this._delegate=De.initialize({options:{persistence:Ge(at,ue.name),popupRedirectResolver:Lt}}),this._delegate._updateErrorMap(W.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?K.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(ue){this._delegate.languageCode=ue}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(ue){this._delegate.tenantId=ue}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(ue,De){W.G(this._delegate,ue,De)}applyActionCode(ue){return W.a2(this._delegate,ue)}checkActionCode(ue){return W.a3(this._delegate,ue)}confirmPasswordReset(ue,De){return W.a1(this._delegate,ue,De)}createUserWithEmailAndPassword(ue,De){var at=this;return(0,a.Z)(function*(){return In(at._delegate,W.a5(at._delegate,ue,De))})()}fetchProvidersForEmail(ue){return this.fetchSignInMethodsForEmail(ue)}fetchSignInMethodsForEmail(ue){return W.aa(this._delegate,ue)}isSignInWithEmailLink(ue){return W.a8(this._delegate,ue)}getRedirectResult(){var ue=this;return(0,a.Z)(function*(){X(Sn(),ue._delegate,"operation-not-supported-in-this-environment");const De=yield W.j(ue._delegate,Yn);return De?In(ue._delegate,Promise.resolve(De)):{credential:null,user:null}})()}addFrameworkForLogging(ue){!function At(le,oe){(0,W.aE)(le)._logFramework(oe)}(this._delegate,ue)}onAuthStateChanged(ue,De,at){const{next:Lt,error:it,complete:Ot}=de(ue,De,at);return this._delegate.onAuthStateChanged(Lt,it,Ot)}onIdTokenChanged(ue,De,at){const{next:Lt,error:it,complete:Ot}=de(ue,De,at);return this._delegate.onIdTokenChanged(Lt,it,Ot)}sendSignInLinkToEmail(ue,De){return W.a7(this._delegate,ue,De)}sendPasswordResetEmail(ue,De){return W.a0(this._delegate,ue,De||void 0)}setPersistence(ue){var De=this;return(0,a.Z)(function*(){let at;switch(function Dn(le,oe){Gt(Object.values(Tt).includes(oe),le,"invalid-persistence-type"),(0,_e.b$)()?Gt(oe!==Tt.SESSION,le,"unsupported-persistence-type"):(0,_e.UG)()?Gt(oe===Tt.NONE,le,"unsupported-persistence-type"):vn()?Gt(oe===Tt.NONE||oe===Tt.LOCAL&&(0,_e.hl)(),le,"unsupported-persistence-type"):Gt(oe===Tt.NONE||ri(),le,"unsupported-persistence-type")}(De._delegate,ue),ue){case Tt.SESSION:at=W.a;break;case Tt.LOCAL:at=(yield W.ay(W.i)._isAvailable())?W.i:W.b;break;case Tt.NONE:at=W.L;break;default:return W.at("argument-error",{appName:De._delegate.name})}return De._delegate.setPersistence(at)})()}signInAndRetrieveDataWithCredential(ue){return this.signInWithCredential(ue)}signInAnonymously(){return In(this._delegate,W.X(this._delegate))}signInWithCredential(ue){return In(this._delegate,W.Y(this._delegate,ue))}signInWithCustomToken(ue){return In(this._delegate,W.$(this._delegate,ue))}signInWithEmailAndPassword(ue,De){return In(this._delegate,W.a6(this._delegate,ue,De))}signInWithEmailLink(ue,De){return In(this._delegate,W.a9(this._delegate,ue,De))}signInWithPhoneNumber(ue,De){return qi(this._delegate,W.s(this._delegate,ue,De))}signInWithPopup(ue){var De=this;return(0,a.Z)(function*(){return X(Sn(),De._delegate,"operation-not-supported-in-this-environment"),In(De._delegate,W.c(De._delegate,ue,Yn))})()}signInWithRedirect(ue){var De=this;return(0,a.Z)(function*(){return X(Sn(),De._delegate,"operation-not-supported-in-this-environment"),yield Gn(De._delegate),W.f(De._delegate,ue,Yn)})()}updateCurrentUser(ue){return this._delegate.updateCurrentUser(ue)}verifyPasswordResetCode(ue){return W.a4(this._delegate,ue)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return le.Persistence=Tt,le})();function de(le,oe,ue){let De=le;"function"!=typeof le&&({next:De,error:oe,complete:ue}=le);const at=De;return{next:it=>at(it&&K.getOrCreate(it)),error:oe,complete:ue}}function Ge(le,oe){const ue=function Vn(le,oe){const ue=Ht();if(!ue)return[];const De=W.az(Nn,le,oe);switch(ue.getItem(De)){case Tt.NONE:return[W.L];case Tt.LOCAL:return[W.i,W.a];case Tt.SESSION:return[W.a];default:return[]}}(le,oe);if(typeof self<"u"&&!ue.includes(W.i)&&ue.push(W.i),typeof window<"u")for(const De of[W.b,W.a])ue.includes(De)||ue.push(De);return ue.includes(W.L)||ue.push(W.L),ue}class wt{constructor(){this.providerId="phone",this._delegate=new W.P(Ni(V.Z.auth()))}static credential(oe,ue){return W.P.credential(oe,ue)}verifyPhoneNumber(oe,ue){return this._delegate.verifyPhoneNumber(oe,ue)}unwrap(){return this._delegate}}wt.PHONE_SIGN_IN_METHOD=W.P.PHONE_SIGN_IN_METHOD,wt.PROVIDER_ID=W.P.PROVIDER_ID;const $t=W.ax;class yn{constructor(oe,ue,De=V.Z.app()){var at;$t(null===(at=De.options)||void 0===at?void 0:at.apiKey,"invalid-api-key",{appName:De.name}),this._delegate=new W.R(oe,ue,De.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Pe(le){le.INTERNAL.registerComponent(new ve.wA("auth-compat",oe=>{const ue=oe.getProvider("app-compat").getImmediate(),De=oe.getProvider("auth");return new J(ue,De)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:W.A.EMAIL_SIGNIN,PASSWORD_RESET:W.A.PASSWORD_RESET,RECOVER_EMAIL:W.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:W.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:W.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:W.A.VERIFY_EMAIL}},EmailAuthProvider:W.M,FacebookAuthProvider:W.N,GithubAuthProvider:W.T,GoogleAuthProvider:W.Q,OAuthProvider:W.U,SAMLAuthProvider:W.V,PhoneAuthProvider:wt,PhoneMultiFactorGenerator:W.m,RecaptchaVerifier:yn,TwitterAuthProvider:W.W,Auth:J,AuthCredential:W.H,Error:_e.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),le.registerVersion("@firebase/auth-compat","0.2.18")}(V.Z)},2375:(cn,Ye,q)=>{"use strict";q.d(Ye,{KL:()=>dn,Gb:()=>De});var a=q(5861),W=(q(2833),q(4859)),_e=q(8766),Ve=q(2090),Ae=q(9681);const ve="/firebase-messaging-sw.js",Se="/firebase-cloud-messaging-push-scope",pe="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ne="google.c.a.c_id",ce="google.c.a.c_l",we="google.c.a.ts",Re="google.c.a.e";var ct=(()=>{return(Te=ct||(ct={})).PUSH_RECEIVED="push-received",Te.NOTIFICATION_CLICKED="notification-clicked",ct;var Te})();function He(Te){const Qe=new Uint8Array(Te);return btoa(String.fromCharCode(...Qe)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fe(Te){const Zt=(Te+"=".repeat((4-Te.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Dt=atob(Zt),On=new Uint8Array(Dt.length);for(let Ee=0;Ee<Dt.length;++Ee)On[Ee]=Dt.charCodeAt(Ee);return On}const xt="fcm_token_details_db",Ke="fcm_token_object_Store";function Be(Te){return $e.apply(this,arguments)}function $e(){return $e=(0,a.Z)(function*(Te){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ee=>Ee.name).includes(xt))return null;let Qe=null;return(yield(0,_e.X3)(xt,5,{upgrade:(Dt=(0,a.Z)(function*(On,Ee,Xe,yt){var an;if(Ee<2||!On.objectStoreNames.contains(Ke))return;const wi=yt.objectStore(Ke),si=yield wi.index("fcmSenderId").get(Te);if(yield wi.clear(),si)if(2===Ee){const An=si;if(!An.auth||!An.p256dh||!An.endpoint)return;Qe={token:An.fcmToken,createTime:null!==(an=An.createTime)&&void 0!==an?an:Date.now(),subscriptionOptions:{auth:An.auth,p256dh:An.p256dh,endpoint:An.endpoint,swScope:An.swScope,vapidKey:"string"==typeof An.vapidKey?An.vapidKey:He(An.vapidKey)}}}else if(3===Ee){const An=si;Qe={token:An.fcmToken,createTime:An.createTime,subscriptionOptions:{auth:He(An.auth),p256dh:He(An.p256dh),endpoint:An.endpoint,swScope:An.swScope,vapidKey:He(An.vapidKey)}}}else if(4===Ee){const An=si;Qe={token:An.fcmToken,createTime:An.createTime,subscriptionOptions:{auth:He(An.auth),p256dh:He(An.p256dh),endpoint:An.endpoint,swScope:An.swScope,vapidKey:He(An.vapidKey)}}}}),function(Ee,Xe,yt,an){return Dt.apply(this,arguments)})})).close(),yield(0,_e.Lj)(xt),yield(0,_e.Lj)("fcm_vapid_details_db"),yield(0,_e.Lj)("undefined"),Je(Qe)?Qe:null;var Dt}),$e.apply(this,arguments)}function Je(Te){if(!Te||!Te.subscriptionOptions)return!1;const{subscriptionOptions:Qe}=Te;return"number"==typeof Te.createTime&&Te.createTime>0&&"string"==typeof Te.token&&Te.token.length>0&&"string"==typeof Qe.auth&&Qe.auth.length>0&&"string"==typeof Qe.p256dh&&Qe.p256dh.length>0&&"string"==typeof Qe.endpoint&&Qe.endpoint.length>0&&"string"==typeof Qe.swScope&&Qe.swScope.length>0&&"string"==typeof Qe.vapidKey&&Qe.vapidKey.length>0}const ke="firebase-messaging-store";let be=null;function Ce(){return be||(be=(0,_e.X3)("firebase-messaging-database",1,{upgrade:(Te,Qe)=>{0===Qe&&Te.createObjectStore(ke)}})),be}function Ue(Te){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,a.Z)(function*(Te){const Qe=rn(Te),Dt=yield(yield Ce()).transaction(ke).objectStore(ke).get(Qe);if(Dt)return Dt;{const On=yield Be(Te.appConfig.senderId);if(On)return yield mt(Te,On),On}})).apply(this,arguments)}function mt(Te,Qe){return lt.apply(this,arguments)}function lt(){return(lt=(0,a.Z)(function*(Te,Qe){const Zt=rn(Te),On=(yield Ce()).transaction(ke,"readwrite");return yield On.objectStore(ke).put(Qe,Zt),yield On.done,Qe})).apply(this,arguments)}function Xt(Te){return gn.apply(this,arguments)}function gn(){return(gn=(0,a.Z)(function*(Te){const Qe=rn(Te),Dt=(yield Ce()).transaction(ke,"readwrite");yield Dt.objectStore(ke).delete(Qe),yield Dt.done})).apply(this,arguments)}function rn({appConfig:Te}){return Te.appId}const At=new Ve.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Kt(Te,Qe){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,a.Z)(function*(Te,Qe){var Zt;const Dt=yield un(Te),On=Tn(Qe),Ee={method:"POST",headers:Dt,body:JSON.stringify(On)};let Xe;try{Xe=yield(yield fetch(nn(Te.appConfig),Ee)).json()}catch(yt){throw At.create("token-subscribe-failed",{errorInfo:null===(Zt=yt)||void 0===Zt?void 0:Zt.toString()})}if(Xe.error)throw At.create("token-subscribe-failed",{errorInfo:Xe.error.message});if(!Xe.token)throw At.create("token-subscribe-no-token");return Xe.token})).apply(this,arguments)}function Yt(Te,Qe){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,a.Z)(function*(Te,Qe){var Zt;const Dt=yield un(Te),On=Tn(Qe.subscriptionOptions),Ee={method:"PATCH",headers:Dt,body:JSON.stringify(On)};let Xe;try{Xe=yield(yield fetch(`${nn(Te.appConfig)}/${Qe.token}`,Ee)).json()}catch(yt){throw At.create("token-update-failed",{errorInfo:null===(Zt=yt)||void 0===Zt?void 0:Zt.toString()})}if(Xe.error)throw At.create("token-update-failed",{errorInfo:Xe.error.message});if(!Xe.token)throw At.create("token-update-no-token");return Xe.token})).apply(this,arguments)}function ut(Te,Qe){return sn.apply(this,arguments)}function sn(){return(sn=(0,a.Z)(function*(Te,Qe){var Zt;const On={method:"DELETE",headers:yield un(Te)};try{const Xe=yield(yield fetch(`${nn(Te.appConfig)}/${Qe}`,On)).json();if(Xe.error)throw At.create("token-unsubscribe-failed",{errorInfo:Xe.error.message})}catch(Ee){throw At.create("token-unsubscribe-failed",{errorInfo:null===(Zt=Ee)||void 0===Zt?void 0:Zt.toString()})}})).apply(this,arguments)}function nn({projectId:Te}){return`https://fcmregistrations.googleapis.com/v1/projects/${Te}/registrations`}function un(Te){return en.apply(this,arguments)}function en(){return(en=(0,a.Z)(function*({appConfig:Te,installations:Qe}){const Zt=yield Qe.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Te.apiKey,"x-goog-firebase-installations-auth":`FIS ${Zt}`})})).apply(this,arguments)}function Tn({p256dh:Te,auth:Qe,endpoint:Zt,vapidKey:Dt}){const On={web:{endpoint:Zt,auth:Qe,p256dh:Te}};return Dt!==pe&&(On.web.applicationPubKey=Dt),On}const ri=6048e5;function vn(Te){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,a.Z)(function*(Te){const Qe=yield Nn(Te.swRegistration,Te.vapidKey),Zt={vapidKey:Te.vapidKey,swScope:Te.swRegistration.scope,endpoint:Qe.endpoint,auth:He(Qe.getKey("auth")),p256dh:He(Qe.getKey("p256dh"))},Dt=yield Ue(Te.firebaseDependencies);if(Dt){if(Gn(Dt.subscriptionOptions,Zt))return Date.now()>=Dt.createTime+ri?Le(Te,{token:Dt.token,createTime:Date.now(),subscriptionOptions:Zt}):Dt.token;try{yield ut(Te.firebaseDependencies,Dt.token)}catch(On){console.warn(On)}return Tt(Te.firebaseDependencies,Zt)}return Tt(Te.firebaseDependencies,Zt)})).apply(this,arguments)}function yi(Te){return tt.apply(this,arguments)}function tt(){return(tt=(0,a.Z)(function*(Te){const Qe=yield Ue(Te.firebaseDependencies);Qe&&(yield ut(Te.firebaseDependencies,Qe.token),yield Xt(Te.firebaseDependencies));const Zt=yield Te.swRegistration.pushManager.getSubscription();return!Zt||Zt.unsubscribe()})).apply(this,arguments)}function Le(Te,Qe){return _t.apply(this,arguments)}function _t(){return(_t=(0,a.Z)(function*(Te,Qe){try{const Zt=yield Yt(Te.firebaseDependencies,Qe),Dt=Object.assign(Object.assign({},Qe),{token:Zt,createTime:Date.now()});return yield mt(Te.firebaseDependencies,Dt),Zt}catch(Zt){throw yield yi(Te),Zt}})).apply(this,arguments)}function Tt(Te,Qe){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,a.Z)(function*(Te,Qe){const Dt={token:yield Kt(Te,Qe),createTime:Date.now(),subscriptionOptions:Qe};return yield mt(Te,Dt),Dt.token})).apply(this,arguments)}function Nn(Te,Qe){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,a.Z)(function*(Te,Qe){return(yield Te.pushManager.getSubscription())||Te.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Fe(Qe)})})).apply(this,arguments)}function Gn(Te,Qe){return Qe.vapidKey===Te.vapidKey&&Qe.endpoint===Te.endpoint&&Qe.auth===Te.auth&&Qe.p256dh===Te.p256dh}function Kn(Te){const Qe={from:Te.from,collapseKey:Te.collapse_key,messageId:Te.fcmMessageId};return function Vn(Te,Qe){if(!Qe.notification)return;Te.notification={};const Zt=Qe.notification.title;Zt&&(Te.notification.title=Zt);const Dt=Qe.notification.body;Dt&&(Te.notification.body=Dt);const On=Qe.notification.image;On&&(Te.notification.image=On)}(Qe,Te),function Ht(Te,Qe){!Qe.data||(Te.data=Qe.data)}(Qe,Te),function Pt(Te,Qe){var Zt,Dt,On,Ee,Xe;if(!(Qe.fcmOptions||null!==(Zt=Qe.notification)&&void 0!==Zt&&Zt.click_action))return;Te.fcmOptions={};const yt=null!==(On=null===(Dt=Qe.fcmOptions)||void 0===Dt?void 0:Dt.link)&&void 0!==On?On:null===(Ee=Qe.notification)||void 0===Ee?void 0:Ee.click_action;yt&&(Te.fcmOptions.link=yt);const an=null===(Xe=Qe.fcmOptions)||void 0===Xe?void 0:Xe.analytics_label;an&&(Te.fcmOptions.analyticsLabel=an)}(Qe,Te),Qe}function Yn(Te){return"object"==typeof Te&&!!Te&&ne in Te}function Ni(Te,Qe){const Zt=[];for(let Dt=0;Dt<Te.length;Dt++)Zt.push(Te.charAt(Dt)),Dt<Qe.length&&Zt.push(Qe.charAt(Dt));return Zt.join("")}function kn(Te){return At.create("missing-app-config-values",{valueName:Te})}Ni("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ni("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ci{constructor(Qe,Zt,Dt){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const On=function mi(Te){if(!Te||!Te.options)throw kn("App Configuration Object");if(!Te.name)throw kn("App Name");const Qe=["projectId","apiKey","appId","messagingSenderId"],{options:Zt}=Te;for(const Dt of Qe)if(!Zt[Dt])throw kn(Dt);return{appName:Te.name,projectId:Zt.projectId,apiKey:Zt.apiKey,appId:Zt.appId,senderId:Zt.messagingSenderId}}(Qe);this.firebaseDependencies={app:Qe,appConfig:On,installations:Zt,analyticsProvider:Dt}}_delete(){return Promise.resolve()}}function Yi(Te){return In.apply(this,arguments)}function In(){return(In=(0,a.Z)(function*(Te){var Qe;try{Te.swRegistration=yield navigator.serviceWorker.register(ve,{scope:Se}),Te.swRegistration.update().catch(()=>{})}catch(Zt){throw At.create("failed-service-worker-registration",{browserErrorMessage:null===(Qe=Zt)||void 0===Qe?void 0:Qe.message})}})).apply(this,arguments)}function qi(Te,Qe){return me.apply(this,arguments)}function me(){return(me=(0,a.Z)(function*(Te,Qe){if(!Qe&&!Te.swRegistration&&(yield Yi(Te)),Qe||!Te.swRegistration){if(!(Qe instanceof ServiceWorkerRegistration))throw At.create("invalid-sw-registration");Te.swRegistration=Qe}})).apply(this,arguments)}function z(Te,Qe){return K.apply(this,arguments)}function K(){return(K=(0,a.Z)(function*(Te,Qe){Qe?Te.vapidKey=Qe:Te.vapidKey||(Te.vapidKey=pe)})).apply(this,arguments)}function J(){return(J=(0,a.Z)(function*(Te,Qe){if(!navigator)throw At.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw At.create("permission-blocked");return yield z(Te,Qe?.vapidKey),yield qi(Te,Qe?.serviceWorkerRegistration),vn(Te)})).apply(this,arguments)}function de(Te,Qe,Zt){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,a.Z)(function*(Te,Qe,Zt){const Dt=wt(Qe);(yield Te.firebaseDependencies.analyticsProvider.get()).logEvent(Dt,{message_id:Zt[ne],message_name:Zt[ce],message_time:Zt[we],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function wt(Te){switch(Te){case ct.NOTIFICATION_CLICKED:return"notification_open";case ct.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function yn(){return(yn=(0,a.Z)(function*(Te,Qe){const Zt=Qe.data;if(!Zt.isFirebaseMessaging)return;Te.onMessageHandler&&Zt.messageType===ct.PUSH_RECEIVED&&("function"==typeof Te.onMessageHandler?Te.onMessageHandler(Kn(Zt)):Te.onMessageHandler.next(Kn(Zt)));const Dt=Zt.data;Yn(Dt)&&"1"===Dt[Re]&&(yield de(Te,Zt.messageType,Dt))})).apply(this,arguments)}const Hn="@firebase/messaging",le=Te=>{const Qe=new ci(Te.getProvider("app").getImmediate(),Te.getProvider("installations-internal").getImmediate(),Te.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Zt=>function $t(Te,Qe){return yn.apply(this,arguments)}(Qe,Zt)),Qe},oe=Te=>{const Qe=Te.getProvider("messaging").getImmediate();return{getToken:Dt=>function X(Te,Qe){return J.apply(this,arguments)}(Qe,Dt)}};function De(){return at.apply(this,arguments)}function at(){return(at=(0,a.Z)(function*(){try{yield(0,Ve.eu)()}catch{return!1}return typeof window<"u"&&(0,Ve.hl)()&&(0,Ve.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function dn(Te=(0,Ae.getApp)()){return De().then(Qe=>{if(!Qe)throw At.create("unsupported-browser")},Qe=>{throw At.create("indexed-db-unsupported")}),(0,Ae._getProvider)((0,Ve.m9)(Te),"messaging").getImmediate()}!function ue(){(0,Ae._registerComponent)(new W.wA("messaging",le,"PUBLIC")),(0,Ae._registerComponent)(new W.wA("messaging-internal",oe,"PRIVATE")),(0,Ae.registerVersion)(Hn,"0.9.16"),(0,Ae.registerVersion)(Hn,"0.9.16","esm2017")}()},3226:(cn,Ye,q)=>{"use strict";q.d(Ye,{sN:()=>xt,Gb:()=>Sn});var a=q(5861),V=q(9681),W=q(2090),_e=q(4859),Ve=q(1877);q(2833);const ve="@firebase/remote-config",ie="remote-config",ce=new W.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});function xt(tt=(0,V.getApp)()){return tt=(0,W.m9)(tt),(0,V._getProvider)(tt,ie).getImmediate()}class mt{constructor(Le,_t,Tt,Gt){this.client=Le,this.storage=_t,this.storageCache=Tt,this.logger=Gt}isCachedDataFresh(Le,_t){if(!_t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Tt=Date.now()-_t,Gt=Tt<=Le;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Tt}. Cache max age millis (minimumFetchIntervalMillis setting): ${Le}. Is cache hit: ${Gt}.`),Gt}fetch(Le){var _t=this;return(0,a.Z)(function*(){const[Tt,Gt]=yield Promise.all([_t.storage.getLastSuccessfulFetchTimestampMillis(),_t.storage.getLastSuccessfulFetchResponse()]);if(Gt&&_t.isCachedDataFresh(Le.cacheMaxAgeMillis,Tt))return Gt;Le.eTag=Gt&&Gt.eTag;const Nn=yield _t.client.fetch(Le),Dn=[_t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Nn.status&&Dn.push(_t.storage.setLastSuccessfulFetchResponse(Nn)),yield Promise.all(Dn),Nn})()}}function lt(tt=navigator){return tt.languages&&tt.languages[0]||tt.language}class Xt{constructor(Le,_t,Tt,Gt,Nn,Dn){this.firebaseInstallations=Le,this.sdkVersion=_t,this.namespace=Tt,this.projectId=Gt,this.apiKey=Nn,this.appId=Dn}fetch(Le){var _t=this;return(0,a.Z)(function*(){var Tt,Gt,Nn;const[Dn,Gn]=yield Promise.all([_t.firebaseInstallations.getId(),_t.firebaseInstallations.getToken()]),Vn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${_t.projectId}/namespaces/${_t.namespace}:fetch?key=${_t.apiKey}`,Ht={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Le.eTag||"*"},Pt={sdk_version:_t.sdkVersion,app_instance_id:Dn,app_instance_id_token:Gn,app_id:_t.appId,language_code:lt()},Yn={method:"POST",headers:Ht,body:JSON.stringify(Pt)},Ni=fetch(Vn,Yn),mi=new Promise((me,z)=>{Le.signal.addEventListener(()=>{const K=new Error("The operation was aborted.");K.name="AbortError",z(K)})});let kn;try{yield Promise.race([Ni,mi]),kn=yield Ni}catch(me){let z="fetch-client-network";throw"AbortError"===(null===(Tt=me)||void 0===Tt?void 0:Tt.name)&&(z="fetch-timeout"),ce.create(z,{originalErrorMessage:null===(Gt=me)||void 0===Gt?void 0:Gt.message})}let ci=kn.status;const Yi=kn.headers.get("ETag")||void 0;let In,qi;if(200===kn.status){let me;try{me=yield kn.json()}catch(z){throw ce.create("fetch-client-parse",{originalErrorMessage:null===(Nn=z)||void 0===Nn?void 0:Nn.message})}In=me.entries,qi=me.state}if("INSTANCE_STATE_UNSPECIFIED"===qi?ci=500:"NO_CHANGE"===qi?ci=304:("NO_TEMPLATE"===qi||"EMPTY_CONFIG"===qi)&&(In={}),304!==ci&&200!==ci)throw ce.create("fetch-status",{httpStatus:ci});return{status:ci,eTag:Yi,config:In}})()}}class Ct{constructor(Le,_t){this.client=Le,this.storage=_t}fetch(Le){var _t=this;return(0,a.Z)(function*(){const Tt=(yield _t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return _t.attemptFetch(Le,Tt)})()}attemptFetch(Le,{throttleEndTimeMillis:_t,backoffCount:Tt}){var Gt=this;return(0,a.Z)(function*(){yield function gn(tt,Le){return new Promise((_t,Tt)=>{const Gt=Math.max(Le-Date.now(),0),Nn=setTimeout(_t,Gt);tt.addEventListener(()=>{clearTimeout(Nn),Tt(ce.create("fetch-throttle",{throttleEndTimeMillis:Le}))})})}(Le.signal,_t);try{const Nn=yield Gt.client.fetch(Le);return yield Gt.storage.deleteThrottleMetadata(),Nn}catch(Nn){if(!function rn(tt){if(!(tt instanceof W.ZR&&tt.customData))return!1;const Le=Number(tt.customData.httpStatus);return 429===Le||500===Le||503===Le||504===Le}(Nn))throw Nn;const Dn={throttleEndTimeMillis:Date.now()+(0,W.$s)(Tt),backoffCount:Tt+1};return yield Gt.storage.setThrottleMetadata(Dn),Gt.attemptFetch(Le,Dn)}})()}}class Bt{constructor(Le,_t,Tt,Gt,Nn){this.app=Le,this._client=_t,this._storageCache=Tt,this._storage=Gt,this._logger=Nn,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Yt(tt,Le){var _t;const Tt=tt.target.error||void 0;return ce.create(Le,{originalErrorMessage:Tt&&(null===(_t=Tt)||void 0===_t?void 0:_t.message)})}const Jt="app_namespace_store";class un{constructor(Le,_t,Tt,Gt=function nn(){return new Promise((tt,Le)=>{var _t;try{const Tt=indexedDB.open("firebase_remote_config",1);Tt.onerror=Gt=>{Le(Yt(Gt,"storage-open"))},Tt.onsuccess=Gt=>{tt(Gt.target.result)},Tt.onupgradeneeded=Gt=>{0===Gt.oldVersion&&Gt.target.result.createObjectStore(Jt,{keyPath:"compositeKey"})}}catch(Tt){Le(ce.create("storage-open",{originalErrorMessage:null===(_t=Tt)||void 0===_t?void 0:_t.message}))}})}()){this.appId=Le,this.appName=_t,this.namespace=Tt,this.openDbPromise=Gt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Le){return this.set("last_fetch_status",Le)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Le){return this.set("last_successful_fetch_timestamp_millis",Le)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Le){return this.set("last_successful_fetch_response",Le)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Le){return this.set("active_config",Le)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Le){return this.set("active_config_etag",Le)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Le){return this.set("throttle_metadata",Le)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Le){var _t=this;return(0,a.Z)(function*(){const Tt=yield _t.openDbPromise;return new Promise((Gt,Nn)=>{var Dn;const Kn=Tt.transaction([Jt],"readonly").objectStore(Jt),Vn=_t.createCompositeKey(Le);try{const Ht=Kn.get(Vn);Ht.onerror=Pt=>{Nn(Yt(Pt,"storage-get"))},Ht.onsuccess=Pt=>{const Yn=Pt.target.result;Gt(Yn?Yn.value:void 0)}}catch(Ht){Nn(ce.create("storage-get",{originalErrorMessage:null===(Dn=Ht)||void 0===Dn?void 0:Dn.message}))}})})()}set(Le,_t){var Tt=this;return(0,a.Z)(function*(){const Gt=yield Tt.openDbPromise;return new Promise((Nn,Dn)=>{var Gn;const Vn=Gt.transaction([Jt],"readwrite").objectStore(Jt),Ht=Tt.createCompositeKey(Le);try{const Pt=Vn.put({compositeKey:Ht,value:_t});Pt.onerror=Yn=>{Dn(Yt(Yn,"storage-set"))},Pt.onsuccess=()=>{Nn()}}catch(Pt){Dn(ce.create("storage-set",{originalErrorMessage:null===(Gn=Pt)||void 0===Gn?void 0:Gn.message}))}})})()}delete(Le){var _t=this;return(0,a.Z)(function*(){const Tt=yield _t.openDbPromise;return new Promise((Gt,Nn)=>{var Dn;const Kn=Tt.transaction([Jt],"readwrite").objectStore(Jt),Vn=_t.createCompositeKey(Le);try{const Ht=Kn.delete(Vn);Ht.onerror=Pt=>{Nn(Yt(Pt,"storage-delete"))},Ht.onsuccess=()=>{Gt()}}catch(Ht){Nn(ce.create("storage-delete",{originalErrorMessage:null===(Dn=Ht)||void 0===Dn?void 0:Dn.message}))}})})()}createCompositeKey(Le){return[this.appId,this.appName,this.namespace,Le].join()}}class en{constructor(Le){this.storage=Le}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Le=this;return(0,a.Z)(function*(){const _t=Le.storage.getLastFetchStatus(),Tt=Le.storage.getLastSuccessfulFetchTimestampMillis(),Gt=Le.storage.getActiveConfig(),Nn=yield _t;Nn&&(Le.lastFetchStatus=Nn);const Dn=yield Tt;Dn&&(Le.lastSuccessfulFetchTimestampMillis=Dn);const Gn=yield Gt;Gn&&(Le.activeConfig=Gn)})()}setLastFetchStatus(Le){return this.lastFetchStatus=Le,this.storage.setLastFetchStatus(Le)}setLastSuccessfulFetchTimestampMillis(Le){return this.lastSuccessfulFetchTimestampMillis=Le,this.storage.setLastSuccessfulFetchTimestampMillis(Le)}setActiveConfig(Le){return this.activeConfig=Le,this.storage.setActiveConfig(Le)}}function Sn(){return yi.apply(this,arguments)}function yi(){return(yi=(0,a.Z)(function*(){if(!(0,W.hl)())return!1;try{return yield(0,W.eu)()}catch{return!1}})).apply(this,arguments)}!function Tn(){(0,V._registerComponent)(new _e.wA(ie,function tt(Le,{instanceIdentifier:_t}){const Tt=Le.getProvider("app").getImmediate(),Gt=Le.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ce.create("registration-window");if(!(0,W.hl)())throw ce.create("indexed-db-unavailable");const{projectId:Nn,apiKey:Dn,appId:Gn}=Tt.options;if(!Nn)throw ce.create("registration-project-id");if(!Dn)throw ce.create("registration-api-key");if(!Gn)throw ce.create("registration-app-id");const Kn=new un(Gn,Tt.name,_t=_t||"firebase"),Vn=new en(Kn),Ht=new Ve.Yd(ve);Ht.logLevel=Ve.in.ERROR;const Pt=new Xt(Gt,V.SDK_VERSION,_t,Nn,Dn,Gn),Yn=new Ct(Pt,Kn),Ni=new mt(Yn,Kn,Vn,Ht),mi=new Bt(Tt,Ni,Vn,Kn,Ht);return function Be(tt){const Le=(0,W.m9)(tt);Le._initializePromise||(Le._initializePromise=Le._storageCache.loadFromStorage().then(()=>{Le._isInitializationComplete=!0}))}(mi),mi},"PUBLIC").setMultipleInstances(!0)),(0,V.registerVersion)(ve,"0.3.11"),(0,V.registerVersion)(ve,"0.3.11","esm2017")}()},8036:(cn,Ye,q)=>{"use strict";q.d(Ye,{Z:()=>Ct});var Ve,Be,a=q(655),V=q(3237),W=q(1716),_e=q(9474),Ae=((Ve={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ve["bad-app-name"]="Illegal App name: '{$appName}",Ve["duplicate-app"]="Firebase App named '{$appName}' already exists",Ve["app-deleted"]="Firebase App named '{$appName}' already deleted",Ve["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ve["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ve),ve=new V.LL("app","Firebase",Ae),Se="@firebase/app",$e="[DEFAULT]",Je=((Be={})[Se]="fire-core",Be["@firebase/analytics"]="fire-analytics",Be["@firebase/app-check"]="fire-app-check",Be["@firebase/auth"]="fire-auth",Be["@firebase/database"]="fire-rtdb",Be["@firebase/functions"]="fire-fn",Be["@firebase/installations"]="fire-iid",Be["@firebase/messaging"]="fire-fcm",Be["@firebase/performance"]="fire-perf",Be["@firebase/remote-config"]="fire-rc",Be["@firebase/storage"]="fire-gcs",Be["@firebase/firestore"]="fire-fst",Be["fire-js"]="fire-js",Be["firebase-wrapper"]="fire-js-all",Be),ge=new _e.Yd("@firebase/app"),Me=function(){function At(Kt,Bt,Yt){var Jt=this;this.firebase_=Yt,this.isDeleted_=!1,this.name_=Bt.name,this.automaticDataCollectionEnabled_=Bt.automaticDataCollectionEnabled||!1,this.options_=(0,V.p$)(Kt),this.container=new W.H0(Bt.name),this._addComponent(new W.wA("app",function(){return Jt},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(ut){return Jt._addComponent(ut)})}return Object.defineProperty(At.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(Kt){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=Kt},enumerable:!1,configurable:!0}),Object.defineProperty(At.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(At.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),At.prototype.delete=function(){var Kt=this;return new Promise(function(Bt){Kt.checkDestroyed_(),Bt()}).then(function(){return Kt.firebase_.INTERNAL.removeApp(Kt.name_),Promise.all(Kt.container.getProviders().map(function(Bt){return Bt.delete()}))}).then(function(){Kt.isDeleted_=!0})},At.prototype._getService=function(Kt,Bt){var Yt;void 0===Bt&&(Bt=$e),this.checkDestroyed_();var Jt=this.container.getProvider(Kt);return!Jt.isInitialized()&&"EXPLICIT"===(null===(Yt=Jt.getComponent())||void 0===Yt?void 0:Yt.instantiationMode)&&Jt.initialize(),Jt.getImmediate({identifier:Bt})},At.prototype._removeServiceInstance=function(Kt,Bt){void 0===Bt&&(Bt=$e),this.container.getProvider(Kt).clearInstance(Bt)},At.prototype._addComponent=function(Kt){try{this.container.addComponent(Kt)}catch(Bt){ge.debug("Component "+Kt.name+" failed to register with FirebaseApp "+this.name,Bt)}},At.prototype._addOrOverwriteComponent=function(Kt){this.container.addOrOverwriteComponent(Kt)},At.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},At.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ve.create("app-deleted",{appName:this.name_})},At}();Me.prototype.name&&Me.prototype.options||Me.prototype.delete||console.log("dc");var Ue=function Ce(){var At=function be(At){var Kt={},Bt=new Map,Yt={__esModule:!0,initializeApp:function sn(vn,Sn){void 0===Sn&&(Sn={}),("object"!=typeof Sn||null===Sn)&&(Sn={name:Sn});var tt=Sn;void 0===tt.name&&(tt.name=$e);var Le=tt.name;if("string"!=typeof Le||!Le)throw ve.create("bad-app-name",{appName:String(Le)});if((0,V.r3)(Kt,Le))throw ve.create("duplicate-app",{appName:Le});var _t=new At(vn,tt,Yt);return Kt[Le]=_t,_t},app:ut,registerVersion:function en(vn,Sn,yi){var tt,Le=null!==(tt=Je[vn])&&void 0!==tt?tt:vn;yi&&(Le+="-"+yi);var _t=Le.match(/\s|\//),Tt=Sn.match(/\s|\//);if(_t||Tt){var Gt=['Unable to register library "'+Le+'" with version "'+Sn+'":'];return _t&&Gt.push('library name "'+Le+'" contains illegal characters (whitespace or "/")'),_t&&Tt&&Gt.push("and"),Tt&&Gt.push('version name "'+Sn+'" contains illegal characters (whitespace or "/")'),void ge.warn(Gt.join(" "))}un(new W.wA(Le+"-version",function(){return{library:Le,version:Sn}},"VERSION"))},setLogLevel:_e.Ub,onLog:function Tn(vn,Sn){if(null!==vn&&"function"!=typeof vn)throw ve.create("invalid-log-argument");(0,_e.Am)(vn,Sn)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:un,removeApp:function Jt(vn){delete Kt[vn]},components:Bt,useAsService:function ri(vn,Sn){return"serverAuth"===Sn?null:Sn}}};function ut(vn){if(!(0,V.r3)(Kt,vn=vn||$e))throw ve.create("no-app",{appName:vn});return Kt[vn]}function un(vn){var Sn=vn.name;if(Bt.has(Sn))return ge.debug("There were multiple attempts to register component "+Sn+"."),"PUBLIC"===vn.type?Yt[Sn]:null;if(Bt.set(Sn,vn),"PUBLIC"===vn.type){var yi=function(Tt){if(void 0===Tt&&(Tt=ut()),"function"!=typeof Tt[Sn])throw ve.create("invalid-app-argument",{appName:Sn});return Tt[Sn]()};void 0!==vn.serviceProps&&(0,V.ZB)(yi,vn.serviceProps),Yt[Sn]=yi,At.prototype[Sn]=function(){for(var Tt=[],Gt=0;Gt<arguments.length;Gt++)Tt[Gt]=arguments[Gt];return this._getService.bind(this,Sn).apply(this,vn.multipleInstances?Tt:[])}}for(var tt=0,Le=Object.keys(Kt);tt<Le.length;tt++)Kt[Le[tt]]._addComponent(vn);return"PUBLIC"===vn.type?Yt[Sn]:null}return Yt.default=Yt,Object.defineProperty(Yt,"apps",{get:function nn(){return Object.keys(Kt).map(function(vn){return Kt[vn]})}}),ut.App=At,Yt}(Me);return At.INTERNAL=(0,a.pi)((0,a.pi)({},At.INTERNAL),{createFirebaseNamespace:Ce,extendNamespace:function Kt(Bt){(0,V.ZB)(At,Bt)},createSubscribe:V.ne,ErrorFactory:V.LL,deepExtend:V.ZB}),At}(),Ne=function(){function At(Kt){this.container=Kt}return At.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(Bt){if(function mt(At){return"VERSION"===At.getComponent()?.type}(Bt)){var Yt=Bt.getImmediate();return Yt.library+"/"+Yt.version}return null}).filter(function(Bt){return Bt}).join(" ")},At}();if((0,V.jU)()&&void 0!==self.firebase){ge.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Xt=self.firebase.SDK_VERSION;Xt&&Xt.indexOf("LITE")>=0&&ge.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var gn=Ue.initializeApp;Ue.initializeApp=function(){for(var At=[],Kt=0;Kt<arguments.length;Kt++)At[Kt]=arguments[Kt];return(0,V.UG)()&&ge.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),gn.apply(void 0,At)};var rn=Ue;!function lt(At,Kt){At.INTERNAL.registerComponent(new W.wA("platform-logger",function(Bt){return new Ne(Bt)},"PRIVATE")),At.registerVersion(Se,"0.6.30",Kt),At.registerVersion("fire-js","")}(rn);const Ct=rn},1716:(cn,Ye,q)=>{"use strict";q.d(Ye,{H0:()=>Se,wA:()=>W});var a=q(655),V=q(3237),W=function(){function pe(ie,ne,ce){this.name=ie,this.instanceFactory=ne,this.type=ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return pe.prototype.setInstantiationMode=function(ie){return this.instantiationMode=ie,this},pe.prototype.setMultipleInstances=function(ie){return this.multipleInstances=ie,this},pe.prototype.setServiceProps=function(ie){return this.serviceProps=ie,this},pe.prototype.setInstanceCreatedCallback=function(ie){return this.onInstanceCreated=ie,this},pe}(),_e="[DEFAULT]",Ve=function(){function pe(ie,ne){this.name=ie,this.container=ne,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return pe.prototype.get=function(ie){var ne=this.normalizeInstanceIdentifier(ie);if(!this.instancesDeferred.has(ne)){var ce=new V.BH;if(this.instancesDeferred.set(ne,ce),this.isInitialized(ne)||this.shouldAutoInitialize())try{var we=this.getOrInitializeService({instanceIdentifier:ne});we&&ce.resolve(we)}catch{}}return this.instancesDeferred.get(ne).promise},pe.prototype.getImmediate=function(ie){var ne,ce=this.normalizeInstanceIdentifier(ie?.identifier),we=null!==(ne=ie?.optional)&&void 0!==ne&&ne;if(!this.isInitialized(ce)&&!this.shouldAutoInitialize()){if(we)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:ce})}catch(Re){if(we)return null;throw Re}},pe.prototype.getComponent=function(){return this.component},pe.prototype.setComponent=function(ie){var ne,ce;if(ie.name!==this.name)throw Error("Mismatching Component "+ie.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=ie,this.shouldAutoInitialize()){if(function ve(pe){return"EAGER"===pe.instantiationMode}(ie))try{this.getOrInitializeService({instanceIdentifier:_e})}catch{}try{for(var we=(0,a.XA)(this.instancesDeferred.entries()),Re=we.next();!Re.done;Re=we.next()){var je=(0,a.CR)(Re.value,2),He=je[1],Fe=this.normalizeInstanceIdentifier(je[0]);try{var xt=this.getOrInitializeService({instanceIdentifier:Fe});He.resolve(xt)}catch{}}}catch(gt){ne={error:gt}}finally{try{Re&&!Re.done&&(ce=we.return)&&ce.call(we)}finally{if(ne)throw ne.error}}}},pe.prototype.clearInstance=function(ie){void 0===ie&&(ie=_e),this.instancesDeferred.delete(ie),this.instancesOptions.delete(ie),this.instances.delete(ie)},pe.prototype.delete=function(){return(0,a.mG)(this,void 0,void 0,function(){var ie;return(0,a.Jh)(this,function(ne){switch(ne.label){case 0:return ie=Array.from(this.instances.values()),[4,Promise.all((0,a.ev)((0,a.ev)([],(0,a.CR)(ie.filter(function(ce){return"INTERNAL"in ce}).map(function(ce){return ce.INTERNAL.delete()}))),(0,a.CR)(ie.filter(function(ce){return"_delete"in ce}).map(function(ce){return ce._delete()}))))];case 1:return ne.sent(),[2]}})})},pe.prototype.isComponentSet=function(){return null!=this.component},pe.prototype.isInitialized=function(ie){return void 0===ie&&(ie=_e),this.instances.has(ie)},pe.prototype.getOptions=function(ie){return void 0===ie&&(ie=_e),this.instancesOptions.get(ie)||{}},pe.prototype.initialize=function(ie){var ne,ce;void 0===ie&&(ie={});var we=ie.options,Re=void 0===we?{}:we,je=this.normalizeInstanceIdentifier(ie.instanceIdentifier);if(this.isInitialized(je))throw Error(this.name+"("+je+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var ct=this.getOrInitializeService({instanceIdentifier:je,options:Re});try{for(var He=(0,a.XA)(this.instancesDeferred.entries()),Fe=He.next();!Fe.done;Fe=He.next()){var xt=(0,a.CR)(Fe.value,2),Ke=xt[1];je===this.normalizeInstanceIdentifier(xt[0])&&Ke.resolve(ct)}}catch($e){ne={error:$e}}finally{try{Fe&&!Fe.done&&(ce=He.return)&&ce.call(He)}finally{if(ne)throw ne.error}}return ct},pe.prototype.onInit=function(ie,ne){var ce,we=this.normalizeInstanceIdentifier(ne),Re=null!==(ce=this.onInitCallbacks.get(we))&&void 0!==ce?ce:new Set;Re.add(ie),this.onInitCallbacks.set(we,Re);var je=this.instances.get(we);return je&&ie(je,we),function(){Re.delete(ie)}},pe.prototype.invokeOnInitCallbacks=function(ie,ne){var ce,we,Re=this.onInitCallbacks.get(ne);if(Re)try{for(var je=(0,a.XA)(Re),ct=je.next();!ct.done;ct=je.next()){var He=ct.value;try{He(ie,ne)}catch{}}}catch(Fe){ce={error:Fe}}finally{try{ct&&!ct.done&&(we=je.return)&&we.call(je)}finally{if(ce)throw ce.error}}},pe.prototype.getOrInitializeService=function(ie){var ne=ie.instanceIdentifier,ce=ie.options,we=void 0===ce?{}:ce,Re=this.instances.get(ne);if(!Re&&this.component&&(Re=this.component.instanceFactory(this.container,{instanceIdentifier:Ae(ne),options:we}),this.instances.set(ne,Re),this.instancesOptions.set(ne,we),this.invokeOnInitCallbacks(Re,ne),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ne,Re)}catch{}return Re||null},pe.prototype.normalizeInstanceIdentifier=function(ie){return void 0===ie&&(ie=_e),this.component?this.component.multipleInstances?ie:_e:ie},pe.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},pe}();function Ae(pe){return pe===_e?void 0:pe}var Se=function(){function pe(ie){this.name=ie,this.providers=new Map}return pe.prototype.addComponent=function(ie){var ne=this.getProvider(ie.name);if(ne.isComponentSet())throw new Error("Component "+ie.name+" has already been registered with "+this.name);ne.setComponent(ie)},pe.prototype.addOrOverwriteComponent=function(ie){this.getProvider(ie.name).isComponentSet()&&this.providers.delete(ie.name),this.addComponent(ie)},pe.prototype.getProvider=function(ie){if(this.providers.has(ie))return this.providers.get(ie);var ne=new Ve(ie,this);return this.providers.set(ie,ne),ne},pe.prototype.getProviders=function(){return Array.from(this.providers.values())},pe}()},9474:(cn,Ye,q)=>{"use strict";function a(){for(var ce=0,we=0,Re=arguments.length;we<Re;we++)ce+=arguments[we].length;var je=Array(ce),ct=0;for(we=0;we<Re;we++)for(var He=arguments[we],Fe=0,xt=He.length;Fe<xt;Fe++,ct++)je[ct]=He[Fe];return je}q.d(Ye,{Am:()=>ne,Ub:()=>ie,Yd:()=>pe,in:()=>_e});var V,W=[],_e=(()=>{return(ce=_e||(_e={}))[ce.DEBUG=0]="DEBUG",ce[ce.VERBOSE=1]="VERBOSE",ce[ce.INFO=2]="INFO",ce[ce.WARN=3]="WARN",ce[ce.ERROR=4]="ERROR",ce[ce.SILENT=5]="SILENT",_e;var ce})(),Ve={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},Ae=_e.INFO,ve=((V={})[_e.DEBUG]="log",V[_e.VERBOSE]="log",V[_e.INFO]="info",V[_e.WARN]="warn",V[_e.ERROR]="error",V),Se=function(ce,we){for(var Re=[],je=2;je<arguments.length;je++)Re[je-2]=arguments[je];if(!(we<ce.logLevel)){var ct=(new Date).toISOString(),He=ve[we];if(!He)throw new Error("Attempted to log a message with an invalid logType (value: "+we+")");console[He].apply(console,a(["["+ct+"]  "+ce.name+":"],Re))}},pe=function(){function ce(we){this.name=we,this._logLevel=Ae,this._logHandler=Se,this._userLogHandler=null,W.push(this)}return Object.defineProperty(ce.prototype,"logLevel",{get:function(){return this._logLevel},set:function(we){if(!(we in _e))throw new TypeError('Invalid value "'+we+'" assigned to `logLevel`');this._logLevel=we},enumerable:!1,configurable:!0}),ce.prototype.setLogLevel=function(we){this._logLevel="string"==typeof we?Ve[we]:we},Object.defineProperty(ce.prototype,"logHandler",{get:function(){return this._logHandler},set:function(we){if("function"!=typeof we)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=we},enumerable:!1,configurable:!0}),Object.defineProperty(ce.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(we){this._userLogHandler=we},enumerable:!1,configurable:!0}),ce.prototype.debug=function(){for(var we=[],Re=0;Re<arguments.length;Re++)we[Re]=arguments[Re];this._userLogHandler&&this._userLogHandler.apply(this,a([this,_e.DEBUG],we)),this._logHandler.apply(this,a([this,_e.DEBUG],we))},ce.prototype.log=function(){for(var we=[],Re=0;Re<arguments.length;Re++)we[Re]=arguments[Re];this._userLogHandler&&this._userLogHandler.apply(this,a([this,_e.VERBOSE],we)),this._logHandler.apply(this,a([this,_e.VERBOSE],we))},ce.prototype.info=function(){for(var we=[],Re=0;Re<arguments.length;Re++)we[Re]=arguments[Re];this._userLogHandler&&this._userLogHandler.apply(this,a([this,_e.INFO],we)),this._logHandler.apply(this,a([this,_e.INFO],we))},ce.prototype.warn=function(){for(var we=[],Re=0;Re<arguments.length;Re++)we[Re]=arguments[Re];this._userLogHandler&&this._userLogHandler.apply(this,a([this,_e.WARN],we)),this._logHandler.apply(this,a([this,_e.WARN],we))},ce.prototype.error=function(){for(var we=[],Re=0;Re<arguments.length;Re++)we[Re]=arguments[Re];this._userLogHandler&&this._userLogHandler.apply(this,a([this,_e.ERROR],we)),this._logHandler.apply(this,a([this,_e.ERROR],we))},ce}();function ie(ce){W.forEach(function(we){we.setLogLevel(ce)})}function ne(ce,we){for(var Re=function(Fe){var xt=null;we&&we.level&&(xt=Ve[we.level]),Fe.userLogHandler=null===ce?null:function(gt,Ke){for(var Be=[],$e=2;$e<arguments.length;$e++)Be[$e-2]=arguments[$e];var Je=Be.map(function(ge){if(null==ge)return null;if("string"==typeof ge)return ge;if("number"==typeof ge||"boolean"==typeof ge)return ge.toString();if(ge instanceof Error)return ge.message;try{return JSON.stringify(ge)}catch{return null}}).filter(function(ge){return ge}).join(" ");Ke>=(xt??gt.logLevel)&&ce({level:_e[Ke].toLowerCase(),message:Je,args:Be,type:gt.name})}},je=0,ct=W;je<ct.length;je++)Re(ct[je])}},3237:(cn,Ye,q)=>{"use strict";q.d(Ye,{BH:()=>Re,G6:()=>Me,LL:()=>lt,Mn:()=>Je,Sg:()=>je,UG:()=>Fe,ZB:()=>ce,b$:()=>Ke,d:()=>Be,jU:()=>xt,m9:()=>qi,ne:()=>tt,p$:()=>ne,r3:()=>ut,ru:()=>gt,uI:()=>He,w1:()=>$e,z$:()=>ct});var a=q(655),Ve=function(me){for(var z=[],K=0,X=0;X<me.length;X++){var J=me.charCodeAt(X);J<128?z[K++]=J:J<2048?(z[K++]=J>>6|192,z[K++]=63&J|128):55296==(64512&J)&&X+1<me.length&&56320==(64512&me.charCodeAt(X+1))?(J=65536+((1023&J)<<10)+(1023&me.charCodeAt(++X)),z[K++]=J>>18|240,z[K++]=J>>12&63|128,z[K++]=J>>6&63|128,z[K++]=63&J|128):(z[K++]=J>>12|224,z[K++]=J>>6&63|128,z[K++]=63&J|128)}return z},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(me,z){if(!Array.isArray(me))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var K=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,X=[],J=0;J<me.length;J+=3){var de=me[J],Ge=J+1<me.length,wt=Ge?me[J+1]:0,$t=J+2<me.length,yn=$t?me[J+2]:0,le=(15&wt)<<2|yn>>6,oe=63&yn;$t||(oe=64,Ge||(le=64)),X.push(K[de>>2],K[(3&de)<<4|wt>>4],K[le],K[oe])}return X.join("")},encodeString:function(me,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(me):this.encodeByteArray(Ve(me),z)},decodeString:function(me,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(me):function(me){for(var z=[],K=0,X=0;K<me.length;){var J=me[K++];if(J<128)z[X++]=String.fromCharCode(J);else if(J>191&&J<224){var de=me[K++];z[X++]=String.fromCharCode((31&J)<<6|63&de)}else if(J>239&&J<365){var $t=((7&J)<<18|(63&(de=me[K++]))<<12|(63&(Ge=me[K++]))<<6|63&me[K++])-65536;z[X++]=String.fromCharCode(55296+($t>>10)),z[X++]=String.fromCharCode(56320+(1023&$t))}else{de=me[K++];var Ge=me[K++];z[X++]=String.fromCharCode((15&J)<<12|(63&de)<<6|63&Ge)}}return z.join("")}(this.decodeStringToByteArray(me,z))},decodeStringToByteArray:function(me,z){this.init_();for(var K=z?this.charToByteMapWebSafe_:this.charToByteMap_,X=[],J=0;J<me.length;){var de=K[me.charAt(J++)],wt=J<me.length?K[me.charAt(J)]:0,yn=++J<me.length?K[me.charAt(J)]:64,Pe=++J<me.length?K[me.charAt(J)]:64;if(++J,null==de||null==wt||null==yn||null==Pe)throw Error();X.push(de<<2|wt>>4),64!==yn&&(X.push(wt<<4&240|yn>>2),64!==Pe&&X.push(yn<<6&192|Pe))}return X},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var me=0;me<this.ENCODED_VALS.length;me++)this.byteToCharMap_[me]=this.ENCODED_VALS.charAt(me),this.charToByteMap_[this.byteToCharMap_[me]]=me,this.byteToCharMapWebSafe_[me]=this.ENCODED_VALS_WEBSAFE.charAt(me),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[me]]=me,me>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(me)]=me,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(me)]=me)}}},pe=function(me){return function(me){var z=Ve(me);return ve.encodeByteArray(z,!0)}(me).replace(/\./g,"")};function ne(me){return ce(void 0,me)}function ce(me,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===me&&(me={});break;case Array:me=[];break;default:return z}for(var X in z)!z.hasOwnProperty(X)||!we(X)||(me[X]=ce(me[X],z[X]));return me}function we(me){return"__proto__"!==me}var Re=function(){function me(){var z=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(K,X){z.resolve=K,z.reject=X})}return me.prototype.wrapCallback=function(z){var K=this;return function(X,J){X?K.reject(X):K.resolve(J),"function"==typeof z&&(K.promise.catch(function(){}),1===z.length?z(X):z(X,J))}},me}();function je(me,z){if(me.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var X=z||"demo-project",J=me.iat||0,de=me.sub||me.user_id;if(!de)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var Ge=(0,a.pi)({iss:"https://securetoken.google.com/"+X,aud:X,iat:J,exp:J+3600,auth_time:J,sub:de,user_id:de,firebase:{sign_in_provider:"custom",identities:{}}},me);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(Ge)),""].join(".")}function ct(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function He(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())}function Fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function xt(){return"object"==typeof self&&self.self===self}function gt(){var me="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof me&&void 0!==me.id}function Ke(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Be(){return ct().indexOf("Electron/")>=0}function $e(){var me=ct();return me.indexOf("MSIE ")>=0||me.indexOf("Trident/")>=0}function Je(){return ct().indexOf("MSAppHost/")>=0}function Me(){return!Fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var mt=function(me){function z(K,X,J){var de=me.call(this,X)||this;return de.code=K,de.customData=J,de.name="FirebaseError",Object.setPrototypeOf(de,z.prototype),Error.captureStackTrace&&Error.captureStackTrace(de,lt.prototype.create),de}return(0,a.ZT)(z,me),z}(Error),lt=function(){function me(z,K,X){this.service=z,this.serviceName=K,this.errors=X}return me.prototype.create=function(z){for(var K=[],X=1;X<arguments.length;X++)K[X-1]=arguments[X];var J=K[0]||{},de=this.service+"/"+z,Ge=this.errors[z],wt=Ge?Xt(Ge,J):"Error",$t=this.serviceName+": "+wt+" ("+de+").",yn=new mt(de,$t,J);return yn},me}();function Xt(me,z){return me.replace(gn,function(K,X){var J=z[X];return null!=J?String(J):"<"+X+"?>"})}var gn=/\{\$([^}]+)}/g;function ut(me,z){return Object.prototype.hasOwnProperty.call(me,z)}function tt(me,z){var K=new Le(me,z);return K.subscribe.bind(K)}!function(){function me(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}me.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},me.prototype.compress_=function(z,K){K||(K=0);var X=this.W_;if("string"==typeof z)for(var J=0;J<16;J++)X[J]=z.charCodeAt(K)<<24|z.charCodeAt(K+1)<<16|z.charCodeAt(K+2)<<8|z.charCodeAt(K+3),K+=4;else for(J=0;J<16;J++)X[J]=z[K]<<24|z[K+1]<<16|z[K+2]<<8|z[K+3],K+=4;for(J=16;J<80;J++)X[J]=4294967295&((de=X[J-3]^X[J-8]^X[J-14]^X[J-16])<<1|de>>>31);var Pe,le,Ge=this.chain_[0],wt=this.chain_[1],$t=this.chain_[2],yn=this.chain_[3],Hn=this.chain_[4];for(J=0;J<80;J++){J<40?J<20?(Pe=yn^wt&($t^yn),le=1518500249):(Pe=wt^$t^yn,le=1859775393):J<60?(Pe=wt&$t|yn&(wt|$t),le=2400959708):(Pe=wt^$t^yn,le=3395469782);var de=(Ge<<5|Ge>>>27)+Pe+Hn+le+X[J]&4294967295;Hn=yn,yn=$t,$t=4294967295&(wt<<30|wt>>>2),wt=Ge,Ge=de}this.chain_[0]=this.chain_[0]+Ge&4294967295,this.chain_[1]=this.chain_[1]+wt&4294967295,this.chain_[2]=this.chain_[2]+$t&4294967295,this.chain_[3]=this.chain_[3]+yn&4294967295,this.chain_[4]=this.chain_[4]+Hn&4294967295},me.prototype.update=function(z,K){if(null!=z){void 0===K&&(K=z.length);for(var X=K-this.blockSize,J=0,de=this.buf_,Ge=this.inbuf_;J<K;){if(0===Ge)for(;J<=X;)this.compress_(z,J),J+=this.blockSize;if("string"==typeof z){for(;J<K;)if(de[Ge]=z.charCodeAt(J),++J,++Ge===this.blockSize){this.compress_(de),Ge=0;break}}else for(;J<K;)if(de[Ge]=z[J],++J,++Ge===this.blockSize){this.compress_(de),Ge=0;break}}this.inbuf_=Ge,this.total_+=K}},me.prototype.digest=function(){var z=[],K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var X=this.blockSize-1;X>=56;X--)this.buf_[X]=255&K,K/=256;this.compress_(this.buf_);var J=0;for(X=0;X<5;X++)for(var de=24;de>=0;de-=8)z[J]=this.chain_[X]>>de&255,++J;return z}}();var Le=function(){function me(z,K){var X=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(function(){z(X)}).catch(function(J){X.error(J)})}return me.prototype.next=function(z){this.forEachObserver(function(K){K.next(z)})},me.prototype.error=function(z){this.forEachObserver(function(K){K.error(z)}),this.close(z)},me.prototype.complete=function(){this.forEachObserver(function(z){z.complete()}),this.close()},me.prototype.subscribe=function(z,K,X){var de,J=this;if(void 0===z&&void 0===K&&void 0===X)throw new Error("Missing Observer.");de=function Tt(me,z){if("object"!=typeof me||null===me)return!1;for(var K=0,X=z;K<X.length;K++){var J=X[K];if(J in me&&"function"==typeof me[J])return!0}return!1}(z,["next","error","complete"])?z:{next:z,error:K,complete:X},void 0===de.next&&(de.next=Gt),void 0===de.error&&(de.error=Gt),void 0===de.complete&&(de.complete=Gt);var Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{J.finalError?de.error(J.finalError):de.complete()}catch{}}),this.observers.push(de),Ge},me.prototype.unsubscribeOne=function(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},me.prototype.forEachObserver=function(z){if(!this.finalized)for(var K=0;K<this.observers.length;K++)this.sendOne(K,z)},me.prototype.sendOne=function(z,K){var X=this;this.task.then(function(){if(void 0!==X.observers&&void 0!==X.observers[z])try{K(X.observers[z])}catch(J){typeof console<"u"&&console.error&&console.error(J)}})},me.prototype.close=function(z){var K=this;this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(function(){K.observers=void 0,K.onNoObservers=void 0}))},me}();function Gt(){}function qi(me){return me&&me._delegate?me._delegate:me}},2707:(cn,Ye,q)=>{"use strict";q.r(Ye),q.d(Ye,{default:()=>a.Z});var a=q(8036),W="8.10.1";a.Z.registerVersion("firebase",W,"app"),a.Z.SDK_VERSION=W},8739:(cn,Ye,q)=>{"use strict";q.r(Ye);var a=q(8036),V=q(655),W=q(3237),_e=q(9474),Ve=function(d,c){return(Ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(p[b]=y[b])})(d,c)};function ve(d){var c="function"==typeof Symbol&&Symbol.iterator,p=c&&d[c],y=0;if(p)return p.call(d);if(d&&"number"==typeof d.length)return{next:function(){return d&&y>=d.length&&(d=void 0),{value:d&&d[y++],done:!d}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")}var pe,Se=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ie=ie||{},ne=Se||self;function ce(){}function we(d){var c=typeof d;return"array"==(c="object"!=c?c:d?Array.isArray(d)?"array":c:"null")||"object"==c&&"number"==typeof d.length}function Re(d){var c=typeof d;return"object"==c&&null!=d||"function"==c}var ct="closure_uid_"+(1e9*Math.random()>>>0),He=0;function Fe(d,c,p){return d.call.apply(d.bind,arguments)}function xt(d,c,p){if(!d)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,y),d.apply(c,b)}}return function(){return d.apply(c,arguments)}}function gt(d,c,p){return(gt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fe:xt).apply(null,arguments)}function Ke(d,c){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),d.apply(this,y)}}function Be(d,c){function p(){}p.prototype=c.prototype,d.Z=c.prototype,d.prototype=new p,d.prototype.constructor=d,d.Vb=function(y,b,E){for(var M=Array(arguments.length-2),P=2;P<arguments.length;P++)M[P-2]=arguments[P];return c.prototype[b].apply(y,M)}}function $e(){this.s=this.s,this.o=this.o}var ge={};$e.prototype.s=!1,$e.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var d=function je(d){return Object.prototype.hasOwnProperty.call(d,ct)&&d[ct]||(d[ct]=++He)}(this);delete ge[d]}},$e.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Me=Array.prototype.indexOf?function(d,c){return Array.prototype.indexOf.call(d,c,void 0)}:function(d,c){if("string"==typeof d)return"string"!=typeof c||1!=c.length?-1:d.indexOf(c,0);for(var p=0;p<d.length;p++)if(p in d&&d[p]===c)return p;return-1},ke=Array.prototype.forEach?function(d,c,p){Array.prototype.forEach.call(d,c,p)}:function(d,c,p){for(var y=d.length,b="string"==typeof d?d.split(""):d,E=0;E<y;E++)E in b&&c.call(p,b[E],E,d)};function Ce(d){return Array.prototype.concat.apply([],arguments)}function Ue(d){var c=d.length;if(0<c){for(var p=Array(c),y=0;y<c;y++)p[y]=d[y];return p}return[]}function Ne(d){return/^[\s\xa0]*$/.test(d)}var gn,mt=String.prototype.trim?function(d){return d.trim()}:function(d){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(d)[1]};function lt(d,c){return-1!=d.indexOf(c)}function Xt(d,c){return d<c?-1:d>c?1:0}e:{var rn=ne.navigator;if(rn){var Ct=rn.userAgent;if(Ct){gn=Ct;break e}}gn=""}function At(d,c,p){for(var y in d)c.call(p,d[y],y,d)}function Kt(d){var c={};for(var p in d)c[p]=d[p];return c}var Bt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yt(d,c){for(var p,y,b=1;b<arguments.length;b++){for(p in y=arguments[b])d[p]=y[p];for(var E=0;E<Bt.length;E++)p=Bt[E],Object.prototype.hasOwnProperty.call(y,p)&&(d[p]=y[p])}}function Jt(d){return Jt[" "](d),d}Jt[" "]=ce;var Sn,d,sn=lt(gn,"Opera"),nn=lt(gn,"Trident")||lt(gn,"MSIE"),un=lt(gn,"Edge"),en=un||nn,Tn=lt(gn,"Gecko")&&!(lt(gn.toLowerCase(),"webkit")&&!lt(gn,"Edge"))&&!(lt(gn,"Trident")||lt(gn,"MSIE"))&&!lt(gn,"Edge"),ri=lt(gn.toLowerCase(),"webkit")&&!lt(gn,"Edge");function vn(){var d=ne.document;return d?d.documentMode:void 0}e:{var yi="",tt=(d=gn,Tn?/rv:([^\);]+)(\)|;)/.exec(d):un?/Edge\/([\d\.]+)/.exec(d):nn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(d):ri?/WebKit\/(\S+)/.exec(d):sn?/(?:Version)[ \/]?(\S+)/.exec(d):void 0);if(tt&&(yi=tt?tt[1]:""),nn){var Le=vn();if(null!=Le&&Le>parseFloat(yi)){Sn=String(Le);break e}}Sn=yi}var _t={};var Dn=ne.document&&nn&&(vn()||parseInt(Sn,10))||void 0,Gn=function(){if(!ne.addEventListener||!Object.defineProperty)return!1;var d=!1,c=Object.defineProperty({},"passive",{get:function(){d=!0}});try{ne.addEventListener("test",ce,c),ne.removeEventListener("test",ce,c)}catch{}return d}();function Kn(d,c){this.type=d,this.g=this.target=c,this.defaultPrevented=!1}function Vn(d,c){if(Kn.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var p=this.type=d.type,y=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=c,c=d.relatedTarget){if(Tn){e:{try{Jt(c.nodeName);var b=!0;break e}catch{}b=!1}b||(c=null)}}else"mouseover"==p?c=d.fromElement:"mouseout"==p&&(c=d.toElement);this.relatedTarget=c,y?(this.clientX=void 0!==y.clientX?y.clientX:y.pageX,this.clientY=void 0!==y.clientY?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType="string"==typeof d.pointerType?d.pointerType:Ht[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Vn.Z.h.call(this)}}Kn.prototype.h=function(){this.defaultPrevented=!0},Be(Vn,Kn);var Ht={2:"touch",3:"pen",4:"mouse"};Vn.prototype.h=function(){Vn.Z.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Pt="closure_listenable_"+(1e6*Math.random()|0),Yn=0;function Ni(d,c,p,y,b){this.listener=d,this.proxy=null,this.src=c,this.type=p,this.capture=!!y,this.ia=b,this.key=++Yn,this.ca=this.fa=!1}function mi(d){d.ca=!0,d.listener=null,d.proxy=null,d.src=null,d.ia=null}function kn(d){this.src=d,this.g={},this.h=0}function ci(d,c){var p=c.type;if(p in d.g){var E,y=d.g[p],b=Me(y,c);(E=0<=b)&&Array.prototype.splice.call(y,b,1),E&&(mi(c),0==d.g[p].length&&(delete d.g[p],d.h--))}}function Yi(d,c,p,y){for(var b=0;b<d.length;++b){var E=d[b];if(!E.ca&&E.listener==c&&E.capture==!!p&&E.ia==y)return b}return-1}kn.prototype.add=function(d,c,p,y,b){var E=d.toString();(d=this.g[E])||(d=this.g[E]=[],this.h++);var M=Yi(d,c,y,b);return-1<M?(c=d[M],p||(c.fa=!1)):((c=new Ni(c,this.src,E,!!y,b)).fa=p,d.push(c)),c};var In="closure_lm_"+(1e6*Math.random()|0),qi={};function me(d,c,p,y,b){if(y&&y.once)return X(d,c,p,y,b);if(Array.isArray(c)){for(var E=0;E<c.length;E++)me(d,c[E],p,y,b);return null}return p=Hn(p),d&&d[Pt]?d.N(c,p,Re(y)?!!y.capture:!!y,b):z(d,c,p,!1,y,b)}function z(d,c,p,y,b,E){if(!c)throw Error("Invalid event type");var M=Re(b)?!!b.capture:!!b,P=$t(d);if(P||(d[In]=P=new kn(d)),(p=P.add(c,p,y,M,E)).proxy)return p;if(y=function K(){var c=wt;return function d(p){return c.call(d.src,d.listener,p)}}(),p.proxy=y,y.src=d,y.listener=p,d.addEventListener)Gn||(b=M),void 0===b&&(b=!1),d.addEventListener(c.toString(),y,b);else if(d.attachEvent)d.attachEvent(Ge(c.toString()),y);else{if(!d.addListener||!d.removeListener)throw Error("addEventListener and attachEvent are unavailable.");d.addListener(y)}return p}function X(d,c,p,y,b){if(Array.isArray(c)){for(var E=0;E<c.length;E++)X(d,c[E],p,y,b);return null}return p=Hn(p),d&&d[Pt]?d.O(c,p,Re(y)?!!y.capture:!!y,b):z(d,c,p,!0,y,b)}function J(d,c,p,y,b){if(Array.isArray(c))for(var E=0;E<c.length;E++)J(d,c[E],p,y,b);else y=Re(y)?!!y.capture:!!y,p=Hn(p),d&&d[Pt]?(d=d.i,(c=String(c).toString())in d.g&&-1<(p=Yi(E=d.g[c],p,y,b))&&(mi(E[p]),Array.prototype.splice.call(E,p,1),0==E.length&&(delete d.g[c],d.h--))):d&&(d=$t(d))&&(c=d.g[c.toString()],d=-1,c&&(d=Yi(c,p,y,b)),(p=-1<d?c[d]:null)&&de(p))}function de(d){if("number"!=typeof d&&d&&!d.ca){var c=d.src;if(c&&c[Pt])ci(c.i,d);else{var p=d.type,y=d.proxy;c.removeEventListener?c.removeEventListener(p,y,d.capture):c.detachEvent?c.detachEvent(Ge(p),y):c.addListener&&c.removeListener&&c.removeListener(y),(p=$t(c))?(ci(p,d),0==p.h&&(p.src=null,c[In]=null)):mi(d)}}}function Ge(d){return d in qi?qi[d]:qi[d]="on"+d}function wt(d,c){if(d.ca)d=!0;else{c=new Vn(c,this);var p=d.listener,y=d.ia||d.src;d.fa&&de(d),d=p.call(y,c)}return d}function $t(d){return(d=d[In])instanceof kn?d:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hn(d){return"function"==typeof d?d:(d[yn]||(d[yn]=function(c){return d.handleEvent(c)}),d[yn])}function Pe(){$e.call(this),this.i=new kn(this),this.P=this,this.I=null}function le(d,c){var p,y=d.I;if(y)for(p=[];y;y=y.I)p.push(y);if(d=d.P,y=c.type||c,"string"==typeof c)c=new Kn(c,d);else if(c instanceof Kn)c.target=c.target||d;else{var b=c;Yt(c=new Kn(y,d),b)}if(b=!0,p)for(var E=p.length-1;0<=E;E--){var M=c.g=p[E];b=oe(M,y,!0,c)&&b}if(b=oe(M=c.g=d,y,!0,c)&&b,b=oe(M,y,!1,c)&&b,p)for(E=0;E<p.length;E++)b=oe(M=c.g=p[E],y,!1,c)&&b}function oe(d,c,p,y){if(!(c=d.i.g[String(c)]))return!0;c=c.concat();for(var b=!0,E=0;E<c.length;++E){var M=c[E];if(M&&!M.ca&&M.capture==p){var P=M.listener,B=M.ia||M.src;M.fa&&ci(d.i,M),b=!1!==P.call(B,y)&&b}}return b&&!y.defaultPrevented}Be(Pe,$e),Pe.prototype[Pt]=!0,Pe.prototype.removeEventListener=function(d,c,p,y){J(this,d,c,p,y)},Pe.prototype.M=function(){if(Pe.Z.M.call(this),this.i){var c,d=this.i;for(c in d.g){for(var p=d.g[c],y=0;y<p.length;y++)mi(p[y]);delete d.g[c],d.h--}}this.I=null},Pe.prototype.N=function(d,c,p,y){return this.i.add(String(d),c,!1,p,y)},Pe.prototype.O=function(d,c,p,y){return this.i.add(String(d),c,!0,p,y)};var ue=ne.JSON.stringify;function De(){var d=Si,c=null;return d.g&&(c=d.g,d.g=d.g.next,d.g||(d.h=null),c.next=null),c}var ni,at=function(){function d(){this.h=this.g=null}return d.prototype.add=function(c,p){var y=Lt.get();y.set(c,p),this.h?this.h.next=y:this.g=y,this.h=y},d}(),Lt=new(function(){function d(c,p){this.i=c,this.j=p,this.h=0,this.g=null}return d.prototype.get=function(){var c;return 0<this.h?(this.h--,this.g=(c=this.g).next,c.next=null):c=this.i(),c},d}())(function(){return new it},function(d){return d.reset()}),it=function(){function d(){this.next=this.g=this.h=null}return d.prototype.set=function(c,p){this.h=c,this.g=p,this.next=null},d.prototype.reset=function(){this.next=this.g=this.h=null},d}();function Ot(d){ne.setTimeout(function(){throw d},0)}function dn(d,c){ni||function Fi(){var d=ne.Promise.resolve(void 0);ni=function(){d.then(Te)}}(),En||(ni(),En=!0),Si.add(d,c)}var En=!1,Si=new at;function Te(){for(var d;d=De();){try{d.h.call(d.g)}catch(p){Ot(p)}var c=Lt;c.j(d),100>c.h&&(c.h++,d.next=c.g,c.g=d)}En=!1}function Qe(d,c){Pe.call(this),this.h=d||1,this.g=c||ne,this.j=gt(this.kb,this),this.l=Date.now()}function Zt(d){d.da=!1,d.S&&(d.g.clearTimeout(d.S),d.S=null)}function Dt(d,c,p){if("function"==typeof d)p&&(d=gt(d,p));else{if(!d||"function"!=typeof d.handleEvent)throw Error("Invalid listener argument");d=gt(d.handleEvent,d)}return 2147483647<Number(c)?-1:ne.setTimeout(d,c||0)}function On(d){d.g=Dt(function(){d.g=null,d.i&&(d.i=!1,On(d))},d.j);var c=d.h;d.h=null,d.m.apply(null,c)}Be(Qe,Pe),(pe=Qe.prototype).da=!1,pe.S=null,pe.kb=function(){if(this.da){var d=Date.now()-this.l;0<d&&d<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-d):(this.S&&(this.g.clearTimeout(this.S),this.S=null),le(this,"tick"),this.da&&(Zt(this),this.start()))}},pe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pe.M=function(){Qe.Z.M.call(this),Zt(this),delete this.g};var Ee=function(d){function c(p,y){var b=d.call(this)||this;return b.m=p,b.j=y,b.h=null,b.i=!1,b.g=null,b}return function Ae(d,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function p(){this.constructor=d}Ve(d,c),d.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}(c,d),c.prototype.l=function(p){this.h=arguments,this.g?this.i=!0:On(this)},c.prototype.M=function(){d.prototype.M.call(this),this.g&&(ne.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},c}($e);function Xe(d){$e.call(this),this.h=d,this.g={}}Be(Xe,$e);var yt=[];function an(d,c,p,y){Array.isArray(p)||(p&&(yt[0]=p.toString()),p=yt);for(var b=0;b<p.length;b++){var E=me(c,p[b],y||d.handleEvent,!1,d.h||d);if(!E)break;d.g[E.key]=E}}function wi(d){At(d.g,function(c,p){this.g.hasOwnProperty(p)&&de(c)},d),d.g={}}function si(){this.g=!0}function Lo(d,c,p,y){d.info(function(){return"XMLHTTP TEXT ("+c+"): "+function lo(d,c){if(!d.g)return c;if(!c)return null;try{var p=JSON.parse(c);if(p)for(d=0;d<p.length;d++)if(Array.isArray(p[d])){var y=p[d];if(!(2>y.length)){var b=y[1];if(Array.isArray(b)&&!(1>b.length)){var E=b[0];if("noop"!=E&&"stop"!=E&&"close"!=E)for(var M=1;M<b.length;M++)b[M]=""}}}return ue(p)}catch{return c}}(d,p)+(y?" "+y:"")})}Xe.prototype.M=function(){Xe.Z.M.call(this),wi(this)},Xe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},si.prototype.Aa=function(){this.g=!1},si.prototype.info=function(){};var gc={},Nl=null;function mc(){return Nl=Nl||new Pe}function Fl(d){Kn.call(this,gc.Ma,d)}function Ui(d){var c=mc();le(c,new Fl(c,d))}function da(d,c){Kn.call(this,gc.STAT_EVENT,d),this.stat=c}function Bi(d){var c=mc();le(c,new da(c,d))}function Ji(d,c){Kn.call(this,gc.Na,d),this.size=c}function co(d,c){if("function"!=typeof d)throw Error("Fn must not be null and must be a function");return ne.setTimeout(function(){d()},c)}gc.Ma="serverreachability",Be(Fl,Kn),gc.STAT_EVENT="statevent",Be(da,Kn),gc.Na="timingevent",Be(Ji,Kn);var To={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},gu={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Eo(){}function Yo(){}Eo.prototype.h=null;var uo,tp={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function kd(){Kn.call(this,"d")}function Qf(){Kn.call(this,"c")}function Hr(){}function ha(d,c,p,y){this.l=d,this.j=c,this.m=p,this.X=y||1,this.V=new Xe(this),this.P=L0,this.W=new Qe(d=en?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ms}function Ms(){this.i=null,this.g="",this.h=!1}Be(kd,Kn),Be(Qf,Kn),Be(Hr,Eo),Hr.prototype.g=function(){return new XMLHttpRequest},Hr.prototype.i=function(){return{}},uo=new Hr;var L0=45e3,pa={},Xf={};function np(d,c,p){d.K=1,d.v=yc(Zs(c)),d.s=p,d.U=!0,nv(d,null)}function nv(d,c){d.F=Date.now(),ip(d),d.A=Zs(d.v);var p=d.A,y=d.X;Array.isArray(y)||(y=[String(y)]),nl(p.h,"t",y),d.C=0,p=d.l.H,d.h=new Ms,d.g=yp(d.l,p?c:null,!d.s),0<d.O&&(d.L=new Ee(gt(d.Ia,d,d.g),d.O)),an(d.V,d.g,"readystatechange",d.gb),c=d.H?Kt(d.H):{},d.s?(d.u||(d.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.s,c)):(d.u="GET",d.g.ea(d.A,d.u,null,c)),Ui(1),function An(d,c,p,y,b,E){d.info(function(){if(d.g)if(E)for(var M="",P=E.split("&"),B=0;B<P.length;B++){var G=P[B].split("=");if(1<G.length){var te=G[0];G=G[1];var fe=te.split("_");M=2<=fe.length&&"type"==fe[1]?M+(te+"=")+G+"&":M+(te+"=redacted&")}}else M=null;else M=E;return"XMLHTTP REQ ("+y+") [attempt "+b+"]: "+c+"\n"+p+"\n"+M})}(d.j,d.u,d.A,d.m,d.X,d.s)}function eg(d){return!!d.g&&"GET"==d.u&&2!=d.K&&d.l.Ba}function iv(d,c,p){for(var b,y=!0;!d.I&&d.C<p.length;){if((b=Wm(d,p))==Xf){4==c&&(d.o=4,Bi(14),y=!1),Lo(d.j,d.m,null,"[Incomplete Response]");break}if(b==pa){d.o=4,Bi(15),Lo(d.j,d.m,p,"[Invalid Chunk]"),y=!1;break}Lo(d.j,d.m,b,null),Km(d,b)}eg(d)&&b!=Xf&&b!=pa&&(d.h.g="",d.C=0),4!=c||0!=p.length||d.h.h||(d.o=1,Bi(16),y=!1),d.i=d.i&&y,y?0<p.length&&!d.aa&&(d.aa=!0,(c=d.l).g==d&&c.$&&!c.L&&(c.h.info("Great, no buffering proxy detected. Bytes received: "+p.length),Io(c),c.L=!0,Bi(11))):(Lo(d.j,d.m,p,"[Invalid Chunked Response]"),el(d),Gs(d))}function Wm(d,c){var p=d.C,y=c.indexOf("\n",p);return-1==y?Xf:(p=Number(c.substring(p,y)),isNaN(p)?pa:(y+=1)+p>c.length?Xf:(c=c.substr(y,p),d.C=y+p,c))}function ip(d){d.Y=Date.now()+d.P,rv(d,d.P)}function rv(d,c){if(null!=d.B)throw Error("WatchDog timer not null");d.B=co(gt(d.eb,d),c)}function Od(d){d.B&&(ne.clearTimeout(d.B),d.B=null)}function Gs(d){0==d.l.G||d.I||cv(d.l,d)}function el(d){Od(d);var c=d.L;c&&"function"==typeof c.na&&c.na(),d.L=null,Zt(d.W),wi(d.V),d.g&&(c=d.g,d.g=null,c.abort(),c.na())}function Km(d,c){try{var p=d.l;if(0!=p.G&&(p.g==d||lp(p.i,d)))if(p.I=d.N,!d.J&&lp(p.i,d)&&3==p.G){try{var y=p.Ca.g.parse(c)}catch{y=null}if(Array.isArray(y)&&3==y.length){var b=y;if(0==b[0]){e:if(!p.u){if(p.g){if(!(p.g.F+3e3<d.F))break e;Bd(p),Cu(p)}ho(p),Bi(18)}}else p.ta=b[1],0<p.ta-p.U&&37500>b[2]&&p.N&&0==p.A&&!p.v&&(p.v=co(gt(p.ab,p),6e3));if(1>=rg(p.i)&&p.ka){try{p.ka()}catch{}p.ka=void 0}}else sl(p,11)}else if((d.J||p.g==d)&&Bd(p),!Ne(c))for(b=p.Ca.g.parse(c),c=0;c<b.length;c++){var E=b[c];if(p.U=E[0],E=E[1],2==p.G)if("c"==E[0]){p.J=E[1],p.la=E[2];var M=E[3];null!=M&&(p.ma=M,p.h.info("VER="+p.ma));var P=E[4];null!=P&&(p.za=P,p.h.info("SVER="+p.za));var B=E[5];null!=B&&"number"==typeof B&&0<B&&(p.K=y=1.5*B,p.h.info("backChannelRequestTimeoutMs_="+y)),y=p;var G=d.g;if(G){var te=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(te){var fe=y.i;!fe.g&&(lt(te,"spdy")||lt(te,"quic")||lt(te,"h2"))&&(fe.j=fe.l,fe.g=new Set,fe.h&&(Ul(fe,fe.h),fe.h=null))}if(y.D){var ye=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;ye&&(y.sa=ye,vi(y.F,y.D,ye))}}p.G=3,p.j&&p.j.xa(),p.$&&(p.O=Date.now()-d.F,p.h.info("Handshake RTT: "+p.O+"ms"));var qe=d;if((y=p).oa=uv(y,y.H?y.la:null,y.W),qe.J){Nd(y.i,qe);var ze=qe,st=y.K;st&&ze.setTimeout(st),ze.B&&(Od(ze),ip(ze)),y.g=qe}else Hd(y);0<p.l.length&&Vd(p)}else"stop"!=E[0]&&"close"!=E[0]||sl(p,7);else 3==p.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?sl(p,7):Ld(p):"noop"!=E[0]&&p.j&&p.j.wa(E),p.A=0)}Ui(4)}catch{}}function ov(d,c){if(d.forEach&&"function"==typeof d.forEach)d.forEach(c,void 0);else if(we(d)||"string"==typeof d)ke(d,c,void 0);else{if(d.T&&"function"==typeof d.T)var p=d.T();else if(d.R&&"function"==typeof d.R)p=void 0;else if(we(d)||"string"==typeof d){p=[];for(var y=d.length,b=0;b<y;b++)p.push(b)}else for(b in p=[],y=0,d)p[y++]=b;y=function rp(d){if(d.R&&"function"==typeof d.R)return d.R();if("string"==typeof d)return d.split("");if(we(d)){for(var c=[],p=d.length,y=0;y<p;y++)c.push(d[y]);return c}for(y in c=[],p=0,d)c[p++]=d[y];return c}(d),b=y.length;for(var E=0;E<b;E++)c.call(void 0,y[E],p&&p[E],d)}}function ds(d,c){this.h={},this.g=[],this.i=0;var p=arguments.length;if(1<p){if(p%2)throw Error("Uneven number of arguments");for(var y=0;y<p;y+=2)this.set(arguments[y],arguments[y+1])}else if(d)if(d instanceof ds)for(p=d.T(),y=0;y<p.length;y++)this.set(p[y],d.get(p[y]));else for(y in d)this.set(y,d[y])}function qs(d){if(d.i!=d.g.length){for(var c=0,p=0;c<d.g.length;){var y=d.g[c];hs(d.h,y)&&(d.g[p++]=y),c++}d.g.length=p}if(d.i!=d.g.length){var b={};for(p=c=0;c<d.g.length;)hs(b,y=d.g[c])||(d.g[p++]=y,b[y]=1),c++;d.g.length=p}}function hs(d,c){return Object.prototype.hasOwnProperty.call(d,c)}(pe=ha.prototype).setTimeout=function(d){this.P=d},pe.gb=function(d){d=d.target;var c=this.L;c&&3==ol(d)?c.l():this.Ia(d)},pe.Ia=function(d){try{if(d==this.g)e:{var c=ol(this.g),p=this.g.Da(),y=this.g.ba();if(!(3>c)&&(3!=c||en||this.g&&(this.h.h||this.g.ga()||pp(this.g)))){this.I||4!=c||7==p||Ui(8==p||0>=y?3:2),Od(this);var b=this.g.ba();this.N=b;t:if(eg(this)){var E=pp(this.g);d="";var M=E.length,P=4==ol(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){el(this),Gs(this);var B="";break t}this.h.i=new ne.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,d+=this.h.i.decode(E[p],{stream:P&&p==M-1});E.splice(0,M),this.h.g+=d,this.C=0,B=this.h.g}else B=this.g.ga();if(this.i=200==b,function Ir(d,c,p,y,b,E,M){d.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+b+"]: "+c+"\n"+p+"\n"+E+" "+M})}(this.j,this.u,this.A,this.m,this.X,c,b),this.i){if(this.$&&!this.J){t:{if(this.g){var G,te=this.g;if((G=te.g?te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ne(G)){var fe=G;break t}}fe=null}if(!(b=fe)){this.i=!1,this.o=3,Bi(12),el(this),Gs(this);break e}Lo(this.j,this.m,b,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Km(this,b)}this.U?(iv(this,c,B),en&&this.i&&3==c&&(an(this.V,this.W,"tick",this.fb),this.W.start())):(Lo(this.j,this.m,B,null),Km(this,B)),4==c&&el(this),this.i&&!this.I&&(4==c?cv(this.l,this):(this.i=!1,ip(this)))}else 400==b&&0<B.indexOf("Unknown SID")?(this.o=3,Bi(12)):(this.o=0,Bi(13)),el(this),Gs(this)}}}catch{}},pe.fb=function(){if(this.g){var d=ol(this.g),c=this.g.ga();this.C<c.length&&(Od(this),iv(this,d,c),this.i&&4!=d&&ip(this))}},pe.cancel=function(){this.I=!0,el(this)},pe.eb=function(){this.B=null;var d=Date.now();0<=d-this.Y?(function ai(d,c){d.info(function(){return"TIMEOUT: "+c})}(this.j,this.A),2!=this.K&&(Ui(3),Bi(17)),el(this),this.o=2,Gs(this)):rv(this,this.Y-d)},(pe=ds.prototype).R=function(){qs(this);for(var d=[],c=0;c<this.g.length;c++)d.push(this.h[this.g[c]]);return d},pe.T=function(){return qs(this),this.g.concat()},pe.get=function(d,c){return hs(this.h,d)?this.h[d]:c},pe.set=function(d,c){hs(this.h,d)||(this.i++,this.g.push(d)),this.h[d]=c},pe.forEach=function(d,c){for(var p=this.T(),y=0;y<p.length;y++){var b=p[y],E=this.get(b);d.call(c,E,b,this)}};var _c=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function tl(d,c){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,d instanceof tl){this.g=void 0!==c?c:d.g,Rd(this,d.j),this.s=d.s,Ll(this,d.i),jn(this,d.m),this.l=d.l,c=d.h;var p=new Vl;p.i=c.i,c.g&&(p.g=new ds(c.g),p.h=c.h),mu(this,p),this.o=d.o}else d&&(p=String(d).match(_c))?(this.g=!!c,Rd(this,p[1]||"",!0),this.s=vc(p[2]||""),Ll(this,p[3]||"",!0),jn(this,p[4]),this.l=vc(p[5]||"",!0),mu(this,p[6]||"",!0),this.o=vc(p[7]||"")):(this.g=!!c,this.h=new Vl(null,this.g))}function Zs(d){return new tl(d)}function Rd(d,c,p){d.j=p?vc(c,!0):c,d.j&&(d.j=d.j.replace(/:$/,""))}function Ll(d,c,p){d.i=p?vc(c,!0):c}function jn(d,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);d.m=c}else d.m=null}function mu(d,c,p){c instanceof Vl?(d.h=c,function $s(d,c){c&&!d.j&&(Vo(d),d.i=null,d.g.forEach(function(p,y){var b=y.toLowerCase();y!=b&&(So(this,y),nl(this,b,p))},d)),d.j=c}(d.h,d.g)):(p||(c=ng(c,As)),d.h=new Vl(c,d.g))}function vi(d,c,p){d.h.set(c,p)}function yc(d){return vi(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function vc(d,c){return d?c?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ng(d,c,p){return"string"==typeof d?(d=encodeURI(d).replace(c,Mr),p&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Mr(d){return"%"+((d=d.charCodeAt(0))>>4&15).toString(16)+(15&d).toString(16)}tl.prototype.toString=function(){var d=[],c=this.j;c&&d.push(ng(c,op,!0),":");var p=this.i;return(p||"file"==c)&&(d.push("//"),(c=this.s)&&d.push(ng(c,op,!0),"@"),d.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(p=this.m)&&d.push(":",String(p))),(p=this.l)&&(this.i&&"/"!=p.charAt(0)&&d.push("/"),d.push(ng(p,"/"==p.charAt(0)?Pd:av,!0))),(p=this.h.toString())&&d.push("?",p),(p=this.o)&&d.push("#",ng(p,ig)),d.join("")};var op=/[#\/\?@]/g,av=/[#\?:]/g,Pd=/[#\?]/g,As=/[#\?@]/g,ig=/#/g;function Vl(d,c){this.h=this.g=null,this.i=d||null,this.j=!!c}function Vo(d){d.g||(d.g=new ds,d.h=0,d.i&&function sv(d,c){if(d){d=d.split("&");for(var p=0;p<d.length;p++){var y=d[p].indexOf("="),b=null;if(0<=y){var E=d[p].substring(0,y);b=d[p].substring(y+1)}else E=d[p];c(E,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}(d.i,function(c,p){d.add(decodeURIComponent(c.replace(/\+/g," ")),p)}))}function So(d,c){Vo(d),c=Hl(d,c),hs(d.g.h,c)&&(d.i=null,d.h-=d.g.get(c).length,hs((d=d.g).h,c)&&(delete d.h[c],d.i--,d.g.length>2*d.i&&qs(d)))}function bc(d,c){return Vo(d),c=Hl(d,c),hs(d.g.h,c)}function nl(d,c,p){So(d,c),0<p.length&&(d.i=null,d.g.set(Hl(d,c),Ue(p)),d.h+=p.length)}function Hl(d,c){return c=String(c),d.j&&(c=c.toLowerCase()),c}(pe=Vl.prototype).add=function(d,c){Vo(this),this.i=null,d=Hl(this,d);var p=this.g.get(d);return p||this.g.set(d,p=[]),p.push(c),this.h+=1,this},pe.forEach=function(d,c){Vo(this),this.g.forEach(function(p,y){ke(p,function(b){d.call(c,b,y,this)},this)},this)},pe.T=function(){Vo(this);for(var d=this.g.R(),c=this.g.T(),p=[],y=0;y<c.length;y++)for(var b=d[y],E=0;E<b.length;E++)p.push(c[y]);return p},pe.R=function(d){Vo(this);var c=[];if("string"==typeof d)bc(this,d)&&(c=Ce(c,this.g.get(Hl(this,d))));else{d=this.g.R();for(var p=0;p<d.length;p++)c=Ce(c,d[p])}return c},pe.set=function(d,c){return Vo(this),this.i=null,bc(this,d=Hl(this,d))&&(this.h-=this.g.get(d).length),this.g.set(d,[c]),this.h+=1,this},pe.get=function(d,c){return d&&0<(d=this.R(d)).length?String(d[0]):c},pe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var d=[],c=this.g.T(),p=0;p<c.length;p++){var y=c[p],b=encodeURIComponent(String(y));y=this.R(y);for(var E=0;E<y.length;E++){var M=b;""!==y[E]&&(M+="="+encodeURIComponent(String(y[E]))),d.push(M)}}return this.i=d.join("&")};var sp=function d(c,p){this.h=c,this.g=p};function Bl(d){this.l=d||Jn,d=ne.PerformanceNavigationTiming?0<(d=ne.performance.getEntriesByType("navigation")).length&&("hq"==d[0].nextHopProtocol||"h2"==d[0].nextHopProtocol):!!(ne.g&&ne.g.Ea&&ne.g.Ea()&&ne.g.Ea().Zb),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Jn=10;function ap(d){return!!d.h||!!d.g&&d.g.size>=d.j}function rg(d){return d.h?1:d.g?d.g.size:0}function lp(d,c){return d.h?d.h==c:!!d.g&&d.g.has(c)}function Ul(d,c){d.g?d.g.add(c):d.h=c}function Nd(d,c){d.h&&d.h==c?d.h=null:d.g&&d.g.has(c)&&d.g.delete(c)}function _u(d){var c,p;if(null!=d.h)return d.i.concat(d.h.D);if(null!=d.g&&0!==d.g.size){var y=d.i;try{for(var b=ve(d.g.values()),E=b.next();!E.done;E=b.next())y=y.concat(E.value.D)}catch(P){c={error:P}}finally{try{E&&!E.done&&(p=b.return)&&p.call(b)}finally{if(c)throw c.error}}return y}return Ue(d.i)}function cp(){}function wc(){this.g=new cp}function Et(d,c,p){var y=p||"";try{ov(d,function(b,E){var M=b;Re(b)&&(M=ue(b)),c.push(y+E+"="+encodeURIComponent(M))})}catch(b){throw c.push(y+"type="+encodeURIComponent("_badmap")),b}}function Aa(d,c,p,y,b){try{c.onload=null,c.onerror=null,c.onabort=null,c.ontimeout=null,b(y)}catch{}}function Cc(d){this.l=d.$b||null,this.j=d.ib||!1}function nr(d,c){Pe.call(this),this.D=d,this.u=c,this.m=void 0,this.readyState=up,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Bl.prototype.cancel=function(){var d,c;if(this.i=_u(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var p=ve(this.g.values()),y=p.next();!y.done;y=p.next())y.value.cancel()}catch(E){d={error:E}}finally{try{y&&!y.done&&(c=p.return)&&c.call(p)}finally{if(d)throw d.error}}this.g.clear()}},cp.prototype.stringify=function(d){return ne.JSON.stringify(d,void 0)},cp.prototype.parse=function(d){return ne.JSON.parse(d,void 0)},Be(Cc,Eo),Cc.prototype.g=function(){return new nr(this.l,this.j)},Cc.prototype.i=function(d){return function(){return d}}({}),Be(nr,Pe);var up=0;function jl(d){d.j.read().then(d.Sa.bind(d)).catch(d.ha.bind(d))}function ps(d){d.readyState=4,d.l=null,d.j=null,d.A=null,il(d)}function il(d){d.onreadystatechange&&d.onreadystatechange.call(d)}(pe=nr.prototype).open=function(d,c){if(this.readyState!=up)throw this.abort(),Error("Error reopening a connection");this.C=d,this.B=c,this.readyState=1,il(this)},pe.send=function(d){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var c={headers:this.v,method:this.C,credentials:this.m,cache:void 0};d&&(c.body=d),(this.D||ne).fetch(new Request(this.B,c)).then(this.Va.bind(this),this.ha.bind(this))},pe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ps(this)),this.readyState=up},pe.Va=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,il(this)),this.g&&(this.readyState=3,il(this),this.g)))if("arraybuffer"===this.responseType)d.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof ne.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jl(this)}else d.text().then(this.Ua.bind(this),this.ha.bind(this))},pe.Sa=function(d){if(this.g){if(this.u&&d.value)this.response.push(d.value);else if(!this.u){var c=d.value?d.value:new Uint8Array(0);(c=this.A.decode(c,{stream:!d.done}))&&(this.response=this.responseText+=c)}d.done?ps(this):il(this),3==this.readyState&&jl(this)}},pe.Ua=function(d){this.g&&(this.response=this.responseText=d,ps(this))},pe.Ta=function(d){this.g&&(this.response=d,ps(this))},pe.ha=function(){this.g&&ps(this)},pe.setRequestHeader=function(d,c){this.v.append(d,c)},pe.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},pe.getAllResponseHeaders=function(){if(!this.h)return"";for(var d=[],c=this.h.entries(),p=c.next();!p.done;)d.push((p=p.value)[0]+": "+p[1]),p=c.next();return d.join("\r\n")},Object.defineProperty(nr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(d){this.m=d?"include":"same-origin"}});var Tc=ne.JSON.parse;function vr(d){Pe.call(this),this.headers=new ds,this.u=d||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=lv,this.K=this.L=!1}Be(vr,Pe);var lv="",Fd=/^https?$/i,yu=["POST","PUT"];function ka(d){return"content-type"==d.toLowerCase()}function dp(d,c){d.h=!1,d.g&&(d.l=!0,d.g.abort(),d.l=!1),d.j=c,d.m=5,rl(d),hp(d)}function rl(d){d.D||(d.D=!0,le(d,"complete"),le(d,"error"))}function Oa(d){if(d.h&&typeof ie<"u"&&(!d.C[1]||4!=ol(d)||2!=d.ba()))if(d.v&&4==ol(d))Dt(d.Fa,0,d);else if(le(d,"readystatechange"),4==ol(d)){d.h=!1;try{var y,c=d.ba();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}if(!(y=p)){var b;if(b=0===c){var E=String(d.H).match(_c)[1]||null;if(!E&&ne.self&&ne.self.location){var M=ne.self.location.protocol;E=M.substr(0,M.length-1)}b=!Fd.test(E?E.toLowerCase():"")}y=b}if(y)le(d,"complete"),le(d,"success");else{d.m=6;try{var P=2<ol(d)?d.g.statusText:""}catch{P=""}d.j=P+" ["+d.ba()+"]",rl(d)}}finally{hp(d)}}}function hp(d,c){if(d.g){vu(d);var p=d.g,y=d.C[0]?ce:null;d.g=null,d.C=null,c||le(d,"ready");try{p.onreadystatechange=y}catch{}}}function vu(d){d.g&&d.K&&(d.g.ontimeout=null),d.A&&(ne.clearTimeout(d.A),d.A=null)}function ol(d){return d.g?d.g.readyState:0}function pp(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.J){case lv:case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ec(d,c,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=function fp(d){var c="";return At(d,function(p,y){c+=y,c+=":",c+=p,c+="\r\n"}),c}(p),"string"==typeof d?null!=p&&encodeURIComponent(String(p)):vi(d,c,p))}function bu(d,c,p){return p&&p.internalChannelParams&&p.internalChannelParams[d]||c}function wu(d){this.za=0,this.l=[],this.h=new si,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=bu("failFast",!1,d),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=bu("baseRetryDelayMs",5e3,d),this.$a=bu("retryDelaySeedMs",1e4,d),this.Ya=bu("forwardChannelMaxRetries",2,d),this.ra=bu("forwardChannelRequestTimeoutMs",2e4,d),this.qa=d&&d.xmlHttpFactory||void 0,this.Ba=d&&d.Yb||!1,this.K=void 0,this.H=d&&d.supportsCrossDomainXhr||!1,this.J="",this.i=new Bl(d&&d.concurrentRequestLimit),this.Ca=new wc,this.ja=d&&d.fastHandshake||!1,this.Ra=d&&d.Wb||!1,d&&d.Aa&&this.h.Aa(),d&&d.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&d&&d.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!d||!1!==d.Xb}function Ld(d){if(og(d),3==d.G){var c=d.V++,p=Zs(d.F);vi(p,"SID",d.J),vi(p,"RID",c),vi(p,"TYPE","terminate"),xc(d,p),(c=new ha(d,d.h,c,void 0)).K=2,c.v=yc(Zs(p)),p=!1,ne.navigator&&ne.navigator.sendBeacon&&(p=ne.navigator.sendBeacon(c.v.toString(),"")),!p&&ne.Image&&((new Image).src=c.v,p=!0),p||(c.g=yp(c.l,null),c.g.ea(c.v)),c.F=Date.now(),ip(c)}Ym(d)}function Cu(d){d.g&&(Io(d),d.g.cancel(),d.g=null)}function og(d){Cu(d),d.u&&(ne.clearTimeout(d.u),d.u=null),Bd(d),d.i.cancel(),d.m&&("number"==typeof d.m&&ne.clearTimeout(d.m),d.m=null)}function Tu(d,c){d.l.push(new sp(d.Za++,c)),3==d.G&&Vd(d)}function Vd(d){ap(d.i)||d.m||(d.m=!0,dn(d.Ha,d),d.C=0)}function mp(d,c){var p;p=c?c.m:d.V++;var y=Zs(d.F);vi(y,"SID",d.J),vi(y,"RID",p),vi(y,"AID",d.U),xc(d,y),d.o&&d.s&&Ec(y,d.o,d.s),p=new ha(d,d.h,p,d.C+1),null===d.o&&(p.H=d.s),c&&(d.l=c.D.concat(d.l)),c=_p(d,p,1e3),p.setTimeout(Math.round(.5*d.ra)+Math.round(.5*d.ra*Math.random())),Ul(d.i,p),np(p,y,c)}function xc(d,c){d.j&&ov({},function(p,y){vi(c,y,p)})}function _p(d,c,p){p=Math.min(d.l.length,p);var y=d.j?gt(d.j.Oa,d.j,d):null;e:for(var b=d.l,E=-1;;){var M=["count="+p];-1==E?0<p?M.push("ofs="+(E=b[0].h)):E=0:M.push("ofs="+E);for(var P=!0,B=0;B<p;B++){var G=b[B].h,te=b[B].g;if(0>(G-=E))E=Math.max(0,b[B].h-100),P=!1;else try{Et(te,M,"req"+G+"_")}catch{y&&y(te)}}if(P){y=M.join("&");break e}}return d=d.l.splice(0,p),c.D=d,y}function Hd(d){d.g||d.u||(d.Y=1,dn(d.Ga,d),d.A=0)}function ho(d){return!(d.g||d.u||3<=d.A||(d.Y++,d.u=co(gt(d.Ga,d),sg(d,d.A)),d.A++,0))}function Io(d){null!=d.B&&(ne.clearTimeout(d.B),d.B=null)}function fr(d){d.g=new ha(d,d.h,"rpc",d.Y),null===d.o&&(d.g.H=d.s),d.g.O=0;var c=Zs(d.oa);vi(c,"RID","rpc"),vi(c,"SID",d.J),vi(c,"CI",d.N?"0":"1"),vi(c,"AID",d.U),xc(d,c),vi(c,"TYPE","xmlhttp"),d.o&&d.s&&Ec(c,d.o,d.s),d.K&&d.g.setTimeout(d.K);var p=d.g;d=d.la,p.K=1,p.v=yc(Zs(c)),p.s=null,p.U=!0,nv(p,d)}function Bd(d){null!=d.v&&(ne.clearTimeout(d.v),d.v=null)}function cv(d,c){var p=null;if(d.g==c){Bd(d),Io(d),d.g=null;var y=2}else{if(!lp(d.i,c))return;p=c.D,Nd(d.i,c),y=1}if(d.I=c.N,0!=d.G)if(c.i)if(1==y){p=c.s?c.s.length:0,c=Date.now()-c.F;var b=d.C;le(y=mc(),new Ji(y,p,c,b)),Vd(d)}else Hd(d);else if(3==(b=c.o)||0==b&&0<d.I||!(1==y&&function gp(d,c){return!(rg(d.i)>=d.i.j-(d.m?1:0)||(d.m?(d.l=c.D.concat(d.l),0):1==d.G||2==d.G||d.C>=(d.Xa?0:d.Ya)||(d.m=co(gt(d.Ha,d,c),sg(d,d.C)),d.C++,0)))}(d,c)||2==y&&ho(d)))switch(p&&0<p.length&&(c=d.i,c.i=c.i.concat(p)),b){case 1:sl(d,5);break;case 4:sl(d,10);break;case 3:sl(d,6);break;default:sl(d,2)}}function sg(d,c){var p=d.Pa+Math.floor(Math.random()*d.$a);return d.j||(p*=2),p*c}function sl(d,c){if(d.h.info("Error code "+c),2==c){var p=null;d.j&&(p=null);var y=gt(d.jb,d);p||(p=new tl("//www.google.com/images/cleardot.gif"),ne.location&&"http"==ne.location.protocol||Rd(p,"https"),yc(p)),function di(d,c){var p=new si;if(ne.Image){var y=new Image;y.onload=Ke(Aa,p,y,"TestLoadImage: loaded",!0,c),y.onerror=Ke(Aa,p,y,"TestLoadImage: error",!1,c),y.onabort=Ke(Aa,p,y,"TestLoadImage: abort",!1,c),y.ontimeout=Ke(Aa,p,y,"TestLoadImage: timeout",!1,c),ne.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=d}else c(!1)}(p.toString(),y)}else Bi(2);d.G=0,d.j&&d.j.va(c),Ym(d),og(d)}function Ym(d){d.G=0,d.I=-1,d.j&&((0!=_u(d.i).length||0!=d.l.length)&&(d.i.i.length=0,Ue(d.l),d.l.length=0),d.j.ua())}function uv(d,c,p){var y=function tg(d){return d instanceof tl?Zs(d):new tl(d,void 0)}(p);if(""!=y.i)c&&Ll(y,c+"."+y.i),jn(y,y.m);else{var b=ne.location;y=function xo(d,c,p,y){var b=new tl(null,void 0);return d&&Rd(b,d),c&&Ll(b,c),p&&jn(b,p),y&&(b.l=y),b}(b.protocol,c?c+"."+b.hostname:b.hostname,+b.port,p)}return d.aa&&At(d.aa,function(E,M){vi(y,M,E)}),p=d.sa,(c=d.D)&&p&&vi(y,c,p),vi(y,"VER",d.ma),xc(d,y),y}function yp(d,c,p){if(c&&!d.H)throw Error("Can't create secondary domain capable XhrIo object.");return(c=new vr(p&&d.Ba&&!d.qa?new Cc({ib:!0}):d.qa)).L=d.H,c}function ag(){}function zl(){if(nn&&!(10<=Number(Dn)))throw Error("Environmental error: no available transport.")}function Ar(d,c){Pe.call(this),this.g=new wu(c),this.l=d,this.h=c&&c.messageUrlParams||null,d=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.s=d,d=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(d?d["X-WebChannel-Content-Type"]=c.messageContentType:d={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.ya&&(d?d["X-WebChannel-Client-Profile"]=c.ya:d={"X-WebChannel-Client-Profile":c.ya}),this.g.P=d,(d=c&&c.httpHeadersOverwriteParam)&&!Ne(d)&&(this.g.o=d),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!Ne(c)&&(this.g.D=c,null!==(d=this.h)&&c in d&&c in(d=this.h)&&delete d[c]),this.j=new fs(this)}function Jm(d){kd.call(this);var c=d.__sm__;if(c){e:{for(var p in c){d=p;break e}d=void 0}(this.i=d)&&(d=this.i,c=null!==c&&d in c?c[d]:void 0),this.data=c}else this.data=d}function dv(){Qf.call(this),this.status=1}function fs(d){this.g=d}(pe=vr.prototype).ea=function(d,c,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+d);c=c?c.toUpperCase():"GET",this.H=d,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():uo.g(),this.C=function zs(d){return d.h||(d.h=d.i())}(this.u?this.u:uo),this.g.onreadystatechange=gt(this.Fa,this);try{this.F=!0,this.g.open(c,String(d),!0),this.F=!1}catch(E){return void dp(this,E)}d=p||"";var b=new ds(this.headers);y&&ov(y,function(E,M){b.set(M,E)}),y=function be(d){e:{for(var c=ka,p=d.length,y="string"==typeof d?d.split(""):d,b=0;b<p;b++)if(b in y&&c.call(void 0,y[b],b,d)){c=b;break e}c=-1}return 0>c?null:"string"==typeof d?d.charAt(c):d[c]}(b.T()),p=ne.FormData&&d instanceof ne.FormData,!(0<=Me(yu,c))||y||p||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),b.forEach(function(E,M){this.g.setRequestHeader(M,E)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{vu(this),0<this.B&&((this.K=function Do(d){return nn&&function Tt(){return function ut(d){var c=_t;return Object.prototype.hasOwnProperty.call(c,9)?c[9]:c[9]=d(9)}(function(){for(var d=0,c=mt(String(Sn)).split("."),p=mt("9").split("."),y=Math.max(c.length,p.length),b=0;0==d&&b<y;b++){var E=c[b]||"",M=p[b]||"";do{if(E=/(\d*)(\D*)(.*)/.exec(E)||["","","",""],M=/(\d*)(\D*)(.*)/.exec(M)||["","","",""],0==E[0].length&&0==M[0].length)break;d=Xt(0==E[1].length?0:parseInt(E[1],10),0==M[1].length?0:parseInt(M[1],10))||Xt(0==E[2].length,0==M[2].length)||Xt(E[2],M[2]),E=E[3],M=M[3]}while(0==d)}return 0<=d})}()&&"number"==typeof d.timeout&&void 0!==d.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gt(this.pa,this)):this.A=Dt(this.pa,this.B,this)),this.v=!0,this.g.send(d),this.v=!1}catch(E){dp(this,E)}},pe.pa=function(){typeof ie<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,le(this,"timeout"),this.abort(8))},pe.abort=function(d){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=d||7,le(this,"complete"),le(this,"abort"),hp(this))},pe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hp(this,!0)),vr.Z.M.call(this)},pe.Fa=function(){this.s||(this.F||this.v||this.l?Oa(this):this.cb())},pe.cb=function(){Oa(this)},pe.ba=function(){try{return 2<ol(this)?this.g.status:-1}catch{return-1}},pe.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},pe.Qa=function(d){if(this.g){var c=this.g.responseText;return d&&0==c.indexOf(d)&&(c=c.substring(d.length)),Tc(c)}},pe.Da=function(){return this.m},pe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(pe=wu.prototype).ma=8,pe.G=1,pe.hb=function(d){try{this.h.info("Origin Trials invoked: "+d)}catch{}},pe.Ha=function(d){if(this.m)if(this.m=null,1==this.G){if(!d){this.V=Math.floor(1e5*Math.random()),d=this.V++;var c=new ha(this,this.h,d,void 0),p=this.s;if(this.P&&(p?Yt(p=Kt(p),this.P):p=this.P),null===this.o&&(c.H=p),this.ja)e:{for(var y=0,b=0;b<this.l.length;b++){var E=this.l[b];if(void 0===(E="__data__"in E.g&&"string"==typeof(E=E.g.__data__)?E.length:void 0))break;if(4096<(y+=E)){y=b;break e}if(4096===y||b===this.l.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=_p(this,c,y),vi(b=Zs(this.F),"RID",d),vi(b,"CVER",22),this.D&&vi(b,"X-HTTP-Session-Id",this.D),xc(this,b),this.o&&p&&Ec(b,this.o,p),Ul(this.i,c),this.Ra&&vi(b,"TYPE","init"),this.ja?(vi(b,"$req",y),vi(b,"SID","null"),c.$=!0,np(c,b,null)):np(c,b,y),this.G=2}}else 3==this.G&&(d?mp(this,d):0==this.l.length||ap(this.i)||mp(this))},pe.Ga=function(){if(this.u=null,fr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var d=2*this.O;this.h.info("BP detection timer enabled: "+d),this.B=co(gt(this.bb,this),d)}},pe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Bi(10),Cu(this),fr(this))},pe.ab=function(){null!=this.v&&(this.v=null,Cu(this),ho(this),Bi(19))},pe.jb=function(d){d?(this.h.info("Successfully pinged google.com"),Bi(2)):(this.h.info("Failed to ping google.com"),Bi(1))},(pe=ag.prototype).xa=function(){},pe.wa=function(){},pe.va=function(){},pe.ua=function(){},pe.Oa=function(){},zl.prototype.g=function(d,c){return new Ar(d,c)},Be(Ar,Pe),Ar.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var d=this.g,c=this.l,p=this.h||void 0;d.Wa&&(d.h.info("Origin Trials enabled."),dn(gt(d.hb,d,c))),Bi(0),d.W=c,d.aa=p||{},d.N=d.X,d.F=uv(d,null,d.W),Vd(d)},Ar.prototype.close=function(){Ld(this.g)},Ar.prototype.u=function(d){if("string"==typeof d){var c={};c.__data__=d,Tu(this.g,c)}else this.v?((c={}).__data__=ue(d),Tu(this.g,c)):Tu(this.g,d)},Ar.prototype.M=function(){this.g.j=null,delete this.j,Ld(this.g),delete this.g,Ar.Z.M.call(this)},Be(Jm,kd),Be(dv,Qf),Be(fs,ag),fs.prototype.xa=function(){le(this.g,"a")},fs.prototype.wa=function(d){le(this.g,new Jm(d))},fs.prototype.va=function(d){le(this.g,new dv(d))},fs.prototype.ua=function(){le(this.g,"b")},zl.prototype.createWebChannel=zl.prototype.g,Ar.prototype.send=Ar.prototype.u,Ar.prototype.open=Ar.prototype.m,Ar.prototype.close=Ar.prototype.close,To.NO_ERROR=0,To.TIMEOUT=8,To.HTTP_ERROR=6,gu.COMPLETE="complete",Yo.EventType=tp,tp.OPEN="a",tp.CLOSE="b",tp.ERROR="c",tp.MESSAGE="d",Pe.prototype.listen=Pe.prototype.N,vr.prototype.listenOnce=vr.prototype.O,vr.prototype.getLastError=vr.prototype.La,vr.prototype.getLastErrorCode=vr.prototype.Da,vr.prototype.getStatus=vr.prototype.ba,vr.prototype.getResponseJson=vr.prototype.Qa,vr.prototype.getResponseText=vr.prototype.ga,vr.prototype.send=vr.prototype.ea;var Ud=To,jd=gu,vp=gc,Qm_PROXY=10,Qm_NOPROXY=11,hv=Cc,zd=Yo,Xm=vr,gs=function(){function d(c,p){var y=this;this.previousValue=c,p&&(p.sequenceNumberHandler=function(b){return y.t(b)},this.i=function(b){return p.writeSequenceNumber(b)})}return d.prototype.t=function(c){return this.previousValue=Math.max(c,this.previousValue),this.previousValue},d.prototype.next=function(){var c=++this.previousValue;return this.i&&this.i(c),c},d}();gs.o=-1;var nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Rt=function(d){function c(p,y){var b=this;return(b=d.call(this,y)||this).code=p,b.message=y,b.name="FirebaseError",b.toString=function(){return b.name+": [code="+b.code+"]: "+b.message},b}return(0,V.ZT)(c,d),c}(Error),fa=new _e.Yd("@firebase/firestore");function Eu(){return fa.logLevel}function Qt(d){for(var c=[],p=1;p<arguments.length;p++)c[p-1]=arguments[p];if(fa.logLevel<=_e.in.DEBUG){var y=c.map(Dc);fa.debug.apply(fa,(0,V.ev)(["Firestore (8.10.1): "+d],y))}}function Qi(d){for(var c=[],p=1;p<arguments.length;p++)c[p-1]=arguments[p];if(fa.logLevel<=_e.in.ERROR){var y=c.map(Dc);fa.error.apply(fa,(0,V.ev)(["Firestore (8.10.1): "+d],y))}}function ll(d){for(var c=[],p=1;p<arguments.length;p++)c[p-1]=arguments[p];if(fa.logLevel<=_e.in.WARN){var y=c.map(Dc);fa.warn.apply(fa,(0,V.ev)(["Firestore (8.10.1): "+d],y))}}function Dc(d){if("string"==typeof d)return d;try{return JSON.stringify(d)}catch{return d}}function Fn(d){void 0===d&&(d="Unexpected state");var c="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+d;throw Qi(c),new Error(c)}function Ft(d,c){d||Fn()}function It(d,c){return d}function Br(d){var c=typeof self<"u"&&(self.crypto||self.msCrypto),p=new Uint8Array(d);if(c&&"function"==typeof c.getRandomValues)c.getRandomValues(p);else for(var y=0;y<d;y++)p[y]=Math.floor(256*Math.random());return p}var Jo=function(){function d(){}return d.u=function(){for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",p=Math.floor(256/c.length)*c.length,y="";y.length<20;)for(var b=Br(40),E=0;E<b.length;++E)y.length<20&&b[E]<p&&(y+=c.charAt(b[E]%c.length));return y},d}();function hi(d,c){return d<c?-1:d>c?1:0}function sr(d,c,p){return d.length===c.length&&d.every(function(y,b){return p(y,c[b])})}function Ic(d){return d+"\0"}var Li=function(){function d(c,p){if(this.seconds=c,this.nanoseconds=p,p<0)throw new Rt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+p);if(p>=1e9)throw new Rt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+p);if(c<-62135596800)throw new Rt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+c);if(c>=253402300800)throw new Rt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+c)}return d.now=function(){return d.fromMillis(Date.now())},d.fromDate=function(c){return d.fromMillis(c.getTime())},d.fromMillis=function(c){var p=Math.floor(c/1e3);return new d(p,Math.floor(1e6*(c-1e3*p)))},d.prototype.toDate=function(){return new Date(this.toMillis())},d.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},d.prototype._compareTo=function(c){return this.seconds===c.seconds?hi(this.nanoseconds,c.nanoseconds):hi(this.seconds,c.seconds)},d.prototype.isEqual=function(c){return c.seconds===this.seconds&&c.nanoseconds===this.nanoseconds},d.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},d.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},d.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},d}(),zn=function(){function d(c){this.timestamp=c}return d.fromTimestamp=function(c){return new d(c)},d.min=function(){return new d(new Li(0,0))},d.prototype.compareTo=function(c){return this.timestamp._compareTo(c.timestamp)},d.prototype.isEqual=function(c){return this.timestamp.isEqual(c.timestamp)},d.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},d.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},d.prototype.toTimestamp=function(){return this.timestamp},d}();function Mo(d){var c=0;for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&c++;return c}function xu(d,c){for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&c(p,d[p])}function Gd(d){for(var c in d)if(Object.prototype.hasOwnProperty.call(d,c))return!1;return!0}var wp=function(){function d(c,p,y){void 0===p?p=0:p>c.length&&Fn(),void 0===y?y=c.length-p:y>c.length-p&&Fn(),this.segments=c,this.offset=p,this.len=y}return Object.defineProperty(d.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),d.prototype.isEqual=function(c){return 0===d.comparator(this,c)},d.prototype.child=function(c){var p=this.segments.slice(this.offset,this.limit());return c instanceof d?c.forEach(function(y){p.push(y)}):p.push(c),this.construct(p)},d.prototype.limit=function(){return this.offset+this.length},d.prototype.popFirst=function(c){return this.construct(this.segments,this.offset+(c=void 0===c?1:c),this.length-c)},d.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},d.prototype.firstSegment=function(){return this.segments[this.offset]},d.prototype.lastSegment=function(){return this.get(this.length-1)},d.prototype.get=function(c){return this.segments[this.offset+c]},d.prototype.isEmpty=function(){return 0===this.length},d.prototype.isPrefixOf=function(c){if(c.length<this.length)return!1;for(var p=0;p<this.length;p++)if(this.get(p)!==c.get(p))return!1;return!0},d.prototype.isImmediateParentOf=function(c){if(this.length+1!==c.length)return!1;for(var p=0;p<this.length;p++)if(this.get(p)!==c.get(p))return!1;return!0},d.prototype.forEach=function(c){for(var p=this.offset,y=this.limit();p<y;p++)c(this.segments[p])},d.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},d.comparator=function(c,p){for(var y=Math.min(c.length,p.length),b=0;b<y;b++){var E=c.get(b),M=p.get(b);if(E<M)return-1;if(E>M)return 1}return c.length<p.length?-1:c.length>p.length?1:0},d}(),_i=function(d){function c(){return null!==d&&d.apply(this,arguments)||this}return(0,V.ZT)(c,d),c.prototype.construct=function(p,y,b){return new c(p,y,b)},c.prototype.canonicalString=function(){return this.toArray().join("/")},c.prototype.toString=function(){return this.canonicalString()},c.fromString=function(){for(var p=[],y=0;y<arguments.length;y++)p[y]=arguments[y];for(var b=[],E=0,M=p;E<M.length;E++){var P=M[E];if(P.indexOf("//")>=0)throw new Rt(nt.INVALID_ARGUMENT,"Invalid segment ("+P+"). Paths must not contain // in them.");b.push.apply(b,P.split("/").filter(function(B){return B.length>0}))}return new c(b)},c.emptyPath=function(){return new c([])},c}(wp),Ws=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ks=function(d){function c(){return null!==d&&d.apply(this,arguments)||this}return(0,V.ZT)(c,d),c.prototype.construct=function(p,y,b){return new c(p,y,b)},c.isValidIdentifier=function(p){return Ws.test(p)},c.prototype.canonicalString=function(){return this.toArray().map(function(p){return p=p.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),c.isValidIdentifier(p)||(p="`"+p+"`"),p}).join(".")},c.prototype.toString=function(){return this.canonicalString()},c.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},c.keyField=function(){return new c(["__name__"])},c.fromServerFormat=function(p){for(var y=[],b="",E=0,M=function(){if(0===b.length)throw new Rt(nt.INVALID_ARGUMENT,"Invalid field path ("+p+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");y.push(b),b=""},P=!1;E<p.length;){var B=p[E];if("\\"===B){if(E+1===p.length)throw new Rt(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+p);var G=p[E+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new Rt(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+p);b+=G,E+=2}else"`"===B?(P=!P,E++):"."!==B||P?(b+=B,E++):(M(),E++)}if(M(),P)throw new Rt(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+p);return new c(y)},c.emptyPath=function(){return new c([])},c}(wp),Ra=function(){function d(c){this.fields=c,c.sort(Ks.comparator)}return d.prototype.covers=function(c){for(var p=0,y=this.fields;p<y.length;p++)if(y[p].isPrefixOf(c))return!0;return!1},d.prototype.isEqual=function(c){return sr(this.fields,c.fields,function(p,y){return p.isEqual(y)})},d}(),Xr=function(){function d(c){this.binaryString=c}return d.fromBase64String=function(c){return new d(atob(c))},d.fromUint8Array=function(c){return new d(function(p){for(var y="",b=0;b<p.length;++b)y+=String.fromCharCode(p[b]);return y}(c))},d.prototype.toBase64=function(){return btoa(this.binaryString)},d.prototype.toUint8Array=function(){return function(c){for(var p=new Uint8Array(c.length),y=0;y<c.length;y++)p[y]=c.charCodeAt(y);return p}(this.binaryString)},d.prototype.approximateByteSize=function(){return 2*this.binaryString.length},d.prototype.compareTo=function(c){return hi(this.binaryString,c.binaryString)},d.prototype.isEqual=function(c){return this.binaryString===c.binaryString},d}();Xr.EMPTY_BYTE_STRING=new Xr("");var Cp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pa(d){if(Ft(!!d),"string"==typeof d){var c=0,p=Cp.exec(d);if(Ft(!!p),p[1]){var y=p[1];y=(y+"000000000").substr(0,9),c=Number(y)}var b=new Date(d);return{seconds:Math.floor(b.getTime()/1e3),nanos:c}}return{seconds:Ci(d.seconds),nanos:Ci(d.nanos)}}function Ci(d){return"number"==typeof d?d:"string"==typeof d?Number(d):0}function ar(d){return"string"==typeof d?Xr.fromBase64String(d):Xr.fromUint8Array(d)}function t_(d){var c,p;return"server_timestamp"===(null===(p=((null===(c=d?.mapValue)||void 0===c?void 0:c.fields)||{}).__type__)||void 0===p?void 0:p.stringValue)}function St(d){var c=d.mapValue.fields.__previous_value__;return t_(c)?St(c):c}function br(d){var c=Pa(d.mapValue.fields.__local_write_time__.timestampValue);return new Li(c.seconds,c.nanos)}function Ur(d){return null==d}function ms(d){return 0===d&&1/d==-1/0}function lg(d){return"number"==typeof d&&Number.isInteger(d)&&!ms(d)&&d<=Number.MAX_SAFE_INTEGER&&d>=Number.MIN_SAFE_INTEGER}var Mn=function(){function d(c){this.path=c}return d.fromPath=function(c){return new d(_i.fromString(c))},d.fromName=function(c){return new d(_i.fromString(c).popFirst(5))},d.prototype.hasCollectionId=function(c){return this.path.length>=2&&this.path.get(this.path.length-2)===c},d.prototype.isEqual=function(c){return null!==c&&0===_i.comparator(this.path,c.path)},d.prototype.toString=function(){return this.path.toString()},d.comparator=function(c,p){return _i.comparator(c.path,p.path)},d.isDocumentKey=function(c){return c.length%2==0},d.fromSegments=function(c){return new d(new _i(c.slice()))},d}();function Ho(d){return"nullValue"in d?0:"booleanValue"in d?1:"integerValue"in d||"doubleValue"in d?2:"timestampValue"in d?3:"stringValue"in d?5:"bytesValue"in d?6:"referenceValue"in d?7:"geoPointValue"in d?8:"arrayValue"in d?9:"mapValue"in d?t_(d)?4:10:Fn()}function Qo(d,c){var b,p=Ho(d);if(p!==Ho(c))return!1;switch(p){case 0:return!0;case 1:return d.booleanValue===c.booleanValue;case 4:return br(d).isEqual(br(c));case 3:return function(y,b){if("string"==typeof y.timestampValue&&"string"==typeof b.timestampValue&&y.timestampValue.length===b.timestampValue.length)return y.timestampValue===b.timestampValue;var E=Pa(y.timestampValue),M=Pa(b.timestampValue);return E.seconds===M.seconds&&E.nanos===M.nanos}(d,c);case 5:return d.stringValue===c.stringValue;case 6:return b=c,ar(d.bytesValue).isEqual(ar(b.bytesValue));case 7:return d.referenceValue===c.referenceValue;case 8:return function(y,b){return Ci(y.geoPointValue.latitude)===Ci(b.geoPointValue.latitude)&&Ci(y.geoPointValue.longitude)===Ci(b.geoPointValue.longitude)}(d,c);case 2:return function(y,b){if("integerValue"in y&&"integerValue"in b)return Ci(y.integerValue)===Ci(b.integerValue);if("doubleValue"in y&&"doubleValue"in b){var E=Ci(y.doubleValue),M=Ci(b.doubleValue);return E===M?ms(E)===ms(M):isNaN(E)&&isNaN(M)}return!1}(d,c);case 9:return sr(d.arrayValue.values||[],c.arrayValue.values||[],Qo);case 10:return function(y,b){var E=y.mapValue.fields||{},M=b.mapValue.fields||{};if(Mo(E)!==Mo(M))return!1;for(var P in E)if(E.hasOwnProperty(P)&&(void 0===M[P]||!Qo(E[P],M[P])))return!1;return!0}(d,c);default:return Fn()}}function Mc(d,c){return void 0!==(d.values||[]).find(function(p){return Qo(p,c)})}function cl(d,c){var b,E,M,P,p=Ho(d),y=Ho(c);if(p!==y)return hi(p,y);switch(p){case 0:return 0;case 1:return hi(d.booleanValue,c.booleanValue);case 2:return E=c,(M=Ci((b=d).integerValue||b.doubleValue))<(P=Ci(E.integerValue||E.doubleValue))?-1:M>P?1:M===P?0:isNaN(M)?isNaN(P)?0:-1:1;case 3:return Ac(d.timestampValue,c.timestampValue);case 4:return Ac(br(d),br(c));case 5:return hi(d.stringValue,c.stringValue);case 6:return function(b,E){var M=ar(b),P=ar(E);return M.compareTo(P)}(d.bytesValue,c.bytesValue);case 7:return function(b,E){for(var M=b.split("/"),P=E.split("/"),B=0;B<M.length&&B<P.length;B++){var G=hi(M[B],P[B]);if(0!==G)return G}return hi(M.length,P.length)}(d.referenceValue,c.referenceValue);case 8:return function(b,E){var M=hi(Ci(b.latitude),Ci(E.latitude));return 0!==M?M:hi(Ci(b.longitude),Ci(E.longitude))}(d.geoPointValue,c.geoPointValue);case 9:return function(b,E){for(var M=b.values||[],P=E.values||[],B=0;B<M.length&&B<P.length;++B){var G=cl(M[B],P[B]);if(G)return G}return hi(M.length,P.length)}(d.arrayValue,c.arrayValue);case 10:return function(b,E){var M=b.fields||{},P=Object.keys(M),B=E.fields||{},G=Object.keys(B);P.sort(),G.sort();for(var te=0;te<P.length&&te<G.length;++te){var fe=hi(P[te],G[te]);if(0!==fe)return fe;var ye=cl(M[P[te]],B[G[te]]);if(0!==ye)return ye}return hi(P.length,G.length)}(d.mapValue,c.mapValue);default:throw Fn()}}function Ac(d,c){if("string"==typeof d&&"string"==typeof c&&d.length===c.length)return hi(d,c);var p=Pa(d),y=Pa(c),b=hi(p.seconds,y.seconds);return 0!==b?b:hi(p.nanos,y.nanos)}function n_(d){return qd(d)}function qd(d){return"nullValue"in d?"null":"booleanValue"in d?""+d.booleanValue:"integerValue"in d?""+d.integerValue:"doubleValue"in d?""+d.doubleValue:"timestampValue"in d?"time("+(b=Pa(d.timestampValue)).seconds+","+b.nanos+")":"stringValue"in d?d.stringValue:"bytesValue"in d?ar(d.bytesValue).toBase64():"referenceValue"in d?Mn.fromName(d.referenceValue).toString():"geoPointValue"in d?"geo("+(c=d.geoPointValue).latitude+","+c.longitude+")":"arrayValue"in d?function(y){for(var b="[",E=!0,M=0,P=y.values||[];M<P.length;M++)E?E=!1:b+=",",b+=qd(P[M]);return b+"]"}(d.arrayValue):"mapValue"in d?function(y){for(var b="{",E=!0,M=0,P=Object.keys(y.fields||{}).sort();M<P.length;M++){var B=P[M];E?E=!1:b+=",",b+=B+":"+qd(y.fields[B])}return b+"}"}(d.mapValue):Fn();var b,c}function ji(d,c){return{referenceValue:"projects/"+d.projectId+"/databases/"+d.database+"/documents/"+c.path.canonicalString()}}function pv(d){return!!d&&"integerValue"in d}function i_(d){return!!d&&"arrayValue"in d}function r_(d){return!!d&&"nullValue"in d}function V0(d){return!!d&&"doubleValue"in d&&isNaN(Number(d.doubleValue))}function o_(d){return!!d&&"mapValue"in d}function rt(d){if(d.geoPointValue)return{geoPointValue:Object.assign({},d.geoPointValue)};if(d.timestampValue&&"object"==typeof d.timestampValue)return{timestampValue:Object.assign({},d.timestampValue)};if(d.mapValue){var c={mapValue:{fields:{}}};return xu(d.mapValue.fields,function(b,E){return c.mapValue.fields[b]=rt(E)}),c}if(d.arrayValue){for(var p={arrayValue:{values:[]}},y=0;y<(d.arrayValue.values||[]).length;++y)p.arrayValue.values[y]=rt(d.arrayValue.values[y]);return p}return Object.assign({},d)}var oi=function(){function d(c){this.value=c}return d.empty=function(){return new d({mapValue:{}})},d.prototype.field=function(c){if(c.isEmpty())return this.value;for(var p=this.value,y=0;y<c.length-1;++y)if(!o_(p=(p.mapValue.fields||{})[c.get(y)]))return null;return(p=(p.mapValue.fields||{})[c.lastSegment()])||null},d.prototype.set=function(c,p){this.getFieldsMap(c.popLast())[c.lastSegment()]=rt(p)},d.prototype.setAll=function(c){var p=this,y=Ks.emptyPath(),b={},E=[];c.forEach(function(P,B){if(!y.isImmediateParentOf(B)){var G=p.getFieldsMap(y);p.applyChanges(G,b,E),b={},E=[],y=B.popLast()}P?b[B.lastSegment()]=rt(P):E.push(B.lastSegment())});var M=this.getFieldsMap(y);this.applyChanges(M,b,E)},d.prototype.delete=function(c){var p=this.field(c.popLast());o_(p)&&p.mapValue.fields&&delete p.mapValue.fields[c.lastSegment()]},d.prototype.isEqual=function(c){return Qo(this.value,c.value)},d.prototype.getFieldsMap=function(c){var p=this.value;p.mapValue.fields||(p.mapValue={fields:{}});for(var y=0;y<c.length;++y){var b=p.mapValue.fields[c.get(y)];o_(b)&&b.mapValue.fields||(b={mapValue:{fields:{}}},p.mapValue.fields[c.get(y)]=b),p=b}return p.mapValue.fields},d.prototype.applyChanges=function(c,p,y){xu(p,function(P,B){return c[P]=B});for(var b=0,E=y;b<E.length;b++)delete c[E[b]]},d.prototype.clone=function(){return new d(rt(this.value))},d}();function po(d){var c=[];return xu(d.fields,function(p,y){var b=new Ks([p]);if(o_(y)){var E=po(y.mapValue).fields;if(0===E.length)c.push(b);else for(var M=0,P=E;M<P.length;M++)c.push(b.child(P[M]))}else c.push(b)}),new Ra(c)}var re=function(){function d(c,p,y,b,E){this.key=c,this.documentType=p,this.version=y,this.data=b,this.documentState=E}return d.newInvalidDocument=function(c){return new d(c,0,zn.min(),oi.empty(),0)},d.newFoundDocument=function(c,p,y){return new d(c,1,p,y,0)},d.newNoDocument=function(c,p){return new d(c,2,p,oi.empty(),0)},d.newUnknownDocument=function(c,p){return new d(c,3,p,oi.empty(),2)},d.prototype.convertToFoundDocument=function(c,p){return this.version=c,this.documentType=1,this.data=p,this.documentState=0,this},d.prototype.convertToNoDocument=function(c){return this.version=c,this.documentType=2,this.data=oi.empty(),this.documentState=0,this},d.prototype.convertToUnknownDocument=function(c){return this.version=c,this.documentType=3,this.data=oi.empty(),this.documentState=2,this},d.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},d.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(d.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),d.prototype.isValidDocument=function(){return 0!==this.documentType},d.prototype.isFoundDocument=function(){return 1===this.documentType},d.prototype.isNoDocument=function(){return 2===this.documentType},d.prototype.isUnknownDocument=function(){return 3===this.documentType},d.prototype.isEqual=function(c){return c instanceof d&&this.key.isEqual(c.key)&&this.version.isEqual(c.version)&&this.documentType===c.documentType&&this.documentState===c.documentState&&this.data.isEqual(c.data)},d.prototype.clone=function(){return new d(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},d.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},d}(),Ys=function(d,c,p,y,b,E,M){void 0===c&&(c=null),void 0===p&&(p=[]),void 0===y&&(y=[]),void 0===b&&(b=null),void 0===E&&(E=null),void 0===M&&(M=null),this.path=d,this.collectionGroup=c,this.orderBy=p,this.filters=y,this.limit=b,this.startAt=E,this.endAt=M,this.h=null};function kr(d,c,p,y,b,E,M){return void 0===c&&(c=null),void 0===p&&(p=[]),void 0===y&&(y=[]),void 0===b&&(b=null),void 0===E&&(E=null),void 0===M&&(M=null),new Ys(d,c,p,y,b,E,M)}function kc(d){var c=It(d);if(null===c.h){var p=c.path.canonicalString();null!==c.collectionGroup&&(p+="|cg:"+c.collectionGroup),p+="|f:",p+=c.filters.map(function(y){return(b=y).field.canonicalString()+b.op.toString()+n_(b.value);var b}).join(","),p+="|ob:",p+=c.orderBy.map(function(y){return(b=y).field.canonicalString()+b.dir;var b}).join(","),Ur(c.limit)||(p+="|l:",p+=c.limit),c.startAt&&(p+="|lb:",p+=ul(c.startAt)),c.endAt&&(p+="|ub:",p+=ul(c.endAt)),c.h=p}return c.h}function Na(d,c){if(d.limit!==c.limit||d.orderBy.length!==c.orderBy.length)return!1;for(var p=0;p<d.orderBy.length;p++)if(!Uo(d.orderBy[p],c.orderBy[p]))return!1;if(d.filters.length!==c.filters.length)return!1;for(var y=0;y<d.filters.length;y++)if((b=d.filters[y]).op!==(E=c.filters[y]).op||!b.field.isEqual(E.field)||!Qo(b.value,E.value))return!1;var b,E;return d.collectionGroup===c.collectionGroup&&!!d.path.isEqual(c.path)&&!!dl(d.startAt,c.startAt)&&dl(d.endAt,c.endAt)}function jr(d){return Mn.isDocumentKey(d.path)&&null===d.collectionGroup&&0===d.filters.length}var ir=function(d){function c(p,y,b){var E=this;return(E=d.call(this)||this).field=p,E.op=y,E.value=b,E}return(0,V.ZT)(c,d),c.create=function(p,y,b){return p.isKeyField()?"in"===y||"not-in"===y?this.l(p,y,b):new Bo(p,y,b):"array-contains"===y?new Gl(p,b):"in"===y?new Zd(p,b):"not-in"===y?new fv(p,b):"array-contains-any"===y?new cg(p,b):new c(p,y,b)},c.l=function(p,y,b){return"in"===y?new ks(p,b):new s_(p,b)},c.prototype.matches=function(p){var y=p.data.field(this.field);return"!="===this.op?null!==y&&this.m(cl(y,this.value)):null!==y&&Ho(this.value)===Ho(y)&&this.m(cl(y,this.value))},c.prototype.m=function(p){switch(this.op){case"<":return p<0;case"<=":return p<=0;case"==":return 0===p;case"!=":return 0!==p;case">":return p>0;case">=":return p>=0;default:return Fn()}},c.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},c}(function(){}),Bo=function(d){function c(p,y,b){var E=this;return(E=d.call(this,p,y,b)||this).key=Mn.fromName(b.referenceValue),E}return(0,V.ZT)(c,d),c.prototype.matches=function(p){var y=Mn.comparator(p.key,this.key);return this.m(y)},c}(ir),ks=function(d){function c(p,y){var b=this;return(b=d.call(this,p,"in",y)||this).keys=Oc(0,y),b}return(0,V.ZT)(c,d),c.prototype.matches=function(p){return this.keys.some(function(y){return y.isEqual(p.key)})},c}(ir),s_=function(d){function c(p,y){var b=this;return(b=d.call(this,p,"not-in",y)||this).keys=Oc(0,y),b}return(0,V.ZT)(c,d),c.prototype.matches=function(p){return!this.keys.some(function(y){return y.isEqual(p.key)})},c}(ir);function Oc(d,c){var p;return((null===(p=c.arrayValue)||void 0===p?void 0:p.values)||[]).map(function(y){return Mn.fromName(y.referenceValue)})}var Gl=function(d){function c(p,y){return d.call(this,p,"array-contains",y)||this}return(0,V.ZT)(c,d),c.prototype.matches=function(p){var y=p.data.field(this.field);return i_(y)&&Mc(y.arrayValue,this.value)},c}(ir),Zd=function(d){function c(p,y){return d.call(this,p,"in",y)||this}return(0,V.ZT)(c,d),c.prototype.matches=function(p){var y=p.data.field(this.field);return null!==y&&Mc(this.value.arrayValue,y)},c}(ir),fv=function(d){function c(p,y){return d.call(this,p,"not-in",y)||this}return(0,V.ZT)(c,d),c.prototype.matches=function(p){if(Mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var y=p.data.field(this.field);return null!==y&&!Mc(this.value.arrayValue,y)},c}(ir),cg=function(d){function c(p,y){return d.call(this,p,"array-contains-any",y)||this}return(0,V.ZT)(c,d),c.prototype.matches=function(p){var y=this,b=p.data.field(this.field);return!(!i_(b)||!b.arrayValue.values)&&b.arrayValue.values.some(function(E){return Mc(y.value.arrayValue,E)})},c}(ir),Tp=function(d,c){this.position=d,this.before=c};function ul(d){return(d.before?"b":"a")+":"+d.position.map(function(c){return n_(c)}).join(",")}var gr=function(d,c){void 0===c&&(c="asc"),this.field=d,this.dir=c};function Uo(d,c){return d.dir===c.dir&&d.field.isEqual(c.field)}function $d(d,c,p){for(var y=0,b=0;b<d.position.length;b++){var E=c[b],M=d.position[b];if(y=E.field.isKeyField()?Mn.comparator(Mn.fromName(M.referenceValue),p.key):cl(M,p.data.field(E.field)),"desc"===E.dir&&(y*=-1),0!==y)break}return d.before?y<=0:y<0}function dl(d,c){if(null===d)return null===c;if(null===c||d.before!==c.before||d.position.length!==c.position.length)return!1;for(var p=0;p<d.position.length;p++)if(!Qo(d.position[p],c.position[p]))return!1;return!0}var Os=function(d,c,p,y,b,E,M,P){void 0===c&&(c=null),void 0===p&&(p=[]),void 0===y&&(y=[]),void 0===b&&(b=null),void 0===E&&(E="F"),void 0===M&&(M=null),void 0===P&&(P=null),this.path=d,this.collectionGroup=c,this.explicitOrderBy=p,this.filters=y,this.limit=b,this.limitType=E,this.startAt=M,this.endAt=P,this.p=null,this.T=null};function Su(d,c,p,y,b,E,M,P){return new Os(d,c,p,y,b,E,M,P)}function ql(d){return new Os(d)}function Ep(d){return!Ur(d.limit)&&"F"===d.limitType}function Du(d){return!Ur(d.limit)&&"L"===d.limitType}function ug(d){return d.explicitOrderBy.length>0?d.explicitOrderBy[0].field:null}function Wd(d){for(var c=0,p=d.filters;c<p.length;c++){var y=p[c];if(y.g())return y.field}return null}function dg(d){return null!==d.collectionGroup}function _s(d){var c=It(d);if(null===c.p){c.p=[];var p=Wd(c),y=ug(c);if(null!==p&&null===y)p.isKeyField()||c.p.push(new gr(p)),c.p.push(new gr(Ks.keyField(),"asc"));else{for(var b=!1,E=0,M=c.explicitOrderBy;E<M.length;E++){var P=M[E];c.p.push(P),P.field.isKeyField()&&(b=!0)}if(!b){var B=c.explicitOrderBy.length>0?c.explicitOrderBy[c.explicitOrderBy.length-1].dir:"asc";c.p.push(new gr(Ks.keyField(),B))}}}return c.p}function fo(d){var c=It(d);if(!c.T)if("F"===c.limitType)c.T=kr(c.path,c.collectionGroup,_s(c),c.filters,c.limit,c.startAt,c.endAt);else{for(var p=[],y=0,b=_s(c);y<b.length;y++){var E=b[y];p.push(new gr(E.field,"desc"===E.dir?"asc":"desc"))}var P=c.endAt?new Tp(c.endAt.position,!c.endAt.before):null,B=c.startAt?new Tp(c.startAt.position,!c.startAt.before):null;c.T=kr(c.path,c.collectionGroup,p,c.filters,c.limit,P,B)}return c.T}function xp(d,c,p){return new Os(d.path,d.collectionGroup,d.explicitOrderBy.slice(),d.filters.slice(),c,p,d.startAt,d.endAt)}function ys(d,c){return Na(fo(d),fo(c))&&d.limitType===c.limitType}function Sp(d){return kc(fo(d))+"|lt:"+d.limitType}function Iu(d){return"Query(target="+(p=(c=fo(d)).path.canonicalString(),null!==c.collectionGroup&&(p+=" collectionGroup="+c.collectionGroup),c.filters.length>0&&(p+=", filters: ["+c.filters.map(function(y){return(b=y).field.canonicalString()+" "+b.op+" "+n_(b.value);var b}).join(", ")+"]"),Ur(c.limit)||(p+=", limit: "+c.limit),c.orderBy.length>0&&(p+=", orderBy: ["+c.orderBy.map(function(y){return(b=y).field.canonicalString()+" ("+b.dir+")";var b}).join(", ")+"]"),c.startAt&&(p+=", startAt: "+ul(c.startAt)),c.endAt&&(p+=", endAt: "+ul(c.endAt)),"Target("+p+"); limitType=")+d.limitType+")";var c,p}function Rc(d,c){return c.isFoundDocument()&&(b=(y=c).key.path,null!==(p=d).collectionGroup?y.key.hasCollectionId(p.collectionGroup)&&p.path.isPrefixOf(b):Mn.isDocumentKey(p.path)?p.path.isEqual(b):p.path.isImmediateParentOf(b))&&function(p,y){for(var b=0,E=p.explicitOrderBy;b<E.length;b++){var M=E[b];if(!M.field.isKeyField()&&null===y.data.field(M.field))return!1}return!0}(d,c)&&function(p,y){for(var b=0,E=p.filters;b<E.length;b++)if(!E[b].matches(y))return!1;return!0}(d,c)&&function(p,y){return!(p.startAt&&!$d(p.startAt,_s(p),y)||p.endAt&&$d(p.endAt,_s(p),y))}(d,c);var p,y,b}function Dp(d){return function(c,p){for(var y=!1,b=0,E=_s(d);b<E.length;b++){var M=E[b],P=Ip(M,c,p);if(0!==P)return P;y=y||M.field.isKeyField()}return 0}}function Ip(d,c,p){var b,M,P,B,y=d.field.isKeyField()?Mn.comparator(c.key,p.key):(M=p,P=c.data.field(b=d.field),B=M.data.field(b),null!==P&&null!==B?cl(P,B):Fn());switch(d.dir){case"asc":return y;case"desc":return-1*y;default:return Fn()}}function Kd(d,c){if(d.I){if(isNaN(c))return{doubleValue:"NaN"};if(c===1/0)return{doubleValue:"Infinity"};if(c===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ms(c)?"-0":c}}function Zl(d){return{integerValue:""+d}}function Fa(d,c){return lg(c)?Zl(c):Kd(d,c)}var Mu=function(){this._=void 0};function lr(d,c,p){return d instanceof hl?(E={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(y=p).seconds,nanos:y.nanoseconds}}}},(b=c)&&(E.fields.__previous_value__=b),{mapValue:E}):d instanceof ga?Au(d,c):d instanceof $l?hg(d,c):function(y,b){var E=Pc(y,b),M=ku(E)+ku(y.A);return pv(E)&&pv(y.A)?Zl(M):Kd(y.R,M)}(d,c);var y,b,E}function a_(d,c,p){return d instanceof ga?Au(d,c):d instanceof $l?hg(d,c):p}function Pc(d,c){return d instanceof Js?pv(p=c)||(y=p)&&"doubleValue"in y?c:{integerValue:0}:null;var y,p}var hl=function(d){function c(){return null!==d&&d.apply(this,arguments)||this}return(0,V.ZT)(c,d),c}(Mu),ga=function(d){function c(p){var y=this;return(y=d.call(this)||this).elements=p,y}return(0,V.ZT)(c,d),c}(Mu);function Au(d,c){for(var p=Yd(c),y=function(M){p.some(function(P){return Qo(P,M)})||p.push(M)},b=0,E=d.elements;b<E.length;b++)y(E[b]);return{arrayValue:{values:p}}}var $l=function(d){function c(p){var y=this;return(y=d.call(this)||this).elements=p,y}return(0,V.ZT)(c,d),c}(Mu);function hg(d,c){for(var p=Yd(c),y=function(M){p=p.filter(function(P){return!Qo(P,M)})},b=0,E=d.elements;b<E.length;b++)y(E[b]);return{arrayValue:{values:p}}}var Js=function(d){function c(p,y){var b=this;return(b=d.call(this)||this).R=p,b.A=y,b}return(0,V.ZT)(c,d),c}(Mu);function ku(d){return Ci(d.integerValue||d.doubleValue)}function Yd(d){return i_(d)&&d.arrayValue.values?d.arrayValue.values.slice():[]}var ma=function(d,c){this.field=d,this.transform=c},Ou=function(d,c){this.version=d,this.transformResults=c},zr=function(){function d(c,p){this.updateTime=c,this.exists=p}return d.none=function(){return new d},d.exists=function(c){return new d(void 0,c)},d.updateTime=function(c){return new d(c)},Object.defineProperty(d.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),d.prototype.isEqual=function(c){return this.exists===c.exists&&(this.updateTime?!!c.updateTime&&this.updateTime.isEqual(c.updateTime):!c.updateTime)},d}();function Qs(d,c){return void 0!==d.updateTime?c.isFoundDocument()&&c.version.isEqual(d.updateTime):void 0===d.exists||d.exists===c.isFoundDocument()}var pl=function(){};function Mp(d,c,p){var y,b,E,M,P;d instanceof Fc?(b=c,E=p,M=(y=d).value.clone(),P=l_(y.fieldTransforms,b,E.transformResults),M.setAll(P),b.convertToFoundDocument(E.version,M).setHasCommittedMutations()):d instanceof Lc?function(y,b,E){if(Qs(y.precondition,b)){var M=l_(y.fieldTransforms,b,E.transformResults),P=b.data;P.setAll(fg(y)),P.setAll(M),b.convertToFoundDocument(E.version,P).setHasCommittedMutations()}else b.convertToUnknownDocument(E.version)}(d,c,p):function(y,b,E){b.convertToNoDocument(E.version).setHasCommittedMutations()}(0,c,p)}function Ap(d,c,p){var b;d instanceof Fc?function(y,b,E){if(Qs(y.precondition,b)){var M=y.value.clone(),P=gg(y.fieldTransforms,E,b);M.setAll(P),b.convertToFoundDocument(Nc(b),M).setHasLocalMutations()}}(d,c,p):d instanceof Lc?function(y,b,E){if(Qs(y.precondition,b)){var M=gg(y.fieldTransforms,E,b),P=b.data;P.setAll(fg(y)),P.setAll(M),b.convertToFoundDocument(Nc(b),P).setHasLocalMutations()}}(d,c,p):Qs(d.precondition,b=c)&&b.convertToNoDocument(zn.min())}function pg(d,c){for(var p=null,y=0,b=d.fieldTransforms;y<b.length;y++){var E=b[y],M=c.data.field(E.field),P=Pc(E.transform,M||null);null!=P&&(null==p&&(p=oi.empty()),p.set(E.field,P))}return p||null}function La(d,c){return d.type===c.type&&!!d.key.isEqual(c.key)&&!!d.precondition.isEqual(c.precondition)&&(y=c.fieldTransforms,!!(void 0===(p=d.fieldTransforms)&&void 0===y||p&&y&&sr(p,y,function(b,E){return(M=b).field.isEqual((P=E).field)&&(G=P.transform,(B=M.transform)instanceof ga&&G instanceof ga||B instanceof $l&&G instanceof $l?sr(B.elements,G.elements,Qo):B instanceof Js&&G instanceof Js?Qo(B.A,G.A):B instanceof hl&&G instanceof hl);var M,P,B,G})))&&(0===d.type?d.value.isEqual(c.value):1!==d.type||d.data.isEqual(c.data)&&d.fieldMask.isEqual(c.fieldMask));var p,y}function Nc(d){return d.isFoundDocument()?d.version:zn.min()}var Fc=function(d){function c(p,y,b,E){void 0===E&&(E=[]);var M=this;return(M=d.call(this)||this).key=p,M.value=y,M.precondition=b,M.fieldTransforms=E,M.type=0,M}return(0,V.ZT)(c,d),c}(pl),Lc=function(d){function c(p,y,b,E,M){void 0===M&&(M=[]);var P=this;return(P=d.call(this)||this).key=p,P.data=y,P.fieldMask=b,P.precondition=E,P.fieldTransforms=M,P.type=1,P}return(0,V.ZT)(c,d),c}(pl);function fg(d){var c=new Map;return d.fieldMask.fields.forEach(function(p){if(!p.isEmpty()){var y=d.data.field(p);c.set(p,y)}}),c}function l_(d,c,p){var y=new Map;Ft(d.length===p.length);for(var b=0;b<p.length;b++){var E=d[b],M=E.transform,P=c.data.field(E.field);y.set(E.field,a_(M,P,p[b]))}return y}function gg(d,c,p){for(var y=new Map,b=0,E=d;b<E.length;b++){var M=E[b],P=M.transform,B=p.data.field(M.field);y.set(M.field,lr(P,B,c))}return y}var Gr,Ti,Ru=function(d){function c(p,y){var b=this;return(b=d.call(this)||this).key=p,b.precondition=y,b.type=2,b.fieldTransforms=[],b}return(0,V.ZT)(c,d),c}(pl),Pu=function(d){function c(p,y){var b=this;return(b=d.call(this)||this).key=p,b.precondition=y,b.type=3,b.fieldTransforms=[],b}return(0,V.ZT)(c,d),c}(pl),Wl=function(d){this.count=d};function mg(d){switch(d){case nt.OK:return Fn();case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0;default:return Fn()}}function kp(d){if(void 0===d)return Qi("GRPC error has no .code"),nt.UNKNOWN;switch(d){case Gr.OK:return nt.OK;case Gr.CANCELLED:return nt.CANCELLED;case Gr.UNKNOWN:return nt.UNKNOWN;case Gr.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case Gr.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case Gr.INTERNAL:return nt.INTERNAL;case Gr.UNAVAILABLE:return nt.UNAVAILABLE;case Gr.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case Gr.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case Gr.NOT_FOUND:return nt.NOT_FOUND;case Gr.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case Gr.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case Gr.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case Gr.ABORTED:return nt.ABORTED;case Gr.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case Gr.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case Gr.DATA_LOSS:return nt.DATA_LOSS;default:return Fn()}}(Ti=Gr||(Gr={}))[Ti.OK=0]="OK",Ti[Ti.CANCELLED=1]="CANCELLED",Ti[Ti.UNKNOWN=2]="UNKNOWN",Ti[Ti.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ti[Ti.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ti[Ti.NOT_FOUND=5]="NOT_FOUND",Ti[Ti.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ti[Ti.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ti[Ti.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ti[Ti.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ti[Ti.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ti[Ti.ABORTED=10]="ABORTED",Ti[Ti.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ti[Ti.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ti[Ti.INTERNAL=13]="INTERNAL",Ti[Ti.UNAVAILABLE=14]="UNAVAILABLE",Ti[Ti.DATA_LOSS=15]="DATA_LOSS";var Ao=function(){function d(c,p){this.comparator=c,this.root=p||Vc.EMPTY}return d.prototype.insert=function(c,p){return new d(this.comparator,this.root.insert(c,p,this.comparator).copy(null,null,Vc.BLACK,null,null))},d.prototype.remove=function(c){return new d(this.comparator,this.root.remove(c,this.comparator).copy(null,null,Vc.BLACK,null,null))},d.prototype.get=function(c){for(var p=this.root;!p.isEmpty();){var y=this.comparator(c,p.key);if(0===y)return p.value;y<0?p=p.left:y>0&&(p=p.right)}return null},d.prototype.indexOf=function(c){for(var p=0,y=this.root;!y.isEmpty();){var b=this.comparator(c,y.key);if(0===b)return p+y.left.size;b<0?y=y.left:(p+=y.left.size+1,y=y.right)}return-1},d.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(d.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),d.prototype.minKey=function(){return this.root.minKey()},d.prototype.maxKey=function(){return this.root.maxKey()},d.prototype.inorderTraversal=function(c){return this.root.inorderTraversal(c)},d.prototype.forEach=function(c){this.inorderTraversal(function(p,y){return c(p,y),!1})},d.prototype.toString=function(){var c=[];return this.inorderTraversal(function(p,y){return c.push(p+":"+y),!1}),"{"+c.join(", ")+"}"},d.prototype.reverseTraversal=function(c){return this.root.reverseTraversal(c)},d.prototype.getIterator=function(){return new Jd(this.root,null,this.comparator,!1)},d.prototype.getIteratorFrom=function(c){return new Jd(this.root,c,this.comparator,!1)},d.prototype.getReverseIterator=function(){return new Jd(this.root,null,this.comparator,!0)},d.prototype.getReverseIteratorFrom=function(c){return new Jd(this.root,c,this.comparator,!0)},d}(),Jd=function(){function d(c,p,y,b){this.isReverse=b,this.nodeStack=[];for(var E=1;!c.isEmpty();)if(E=p?y(c.key,p):1,b&&(E*=-1),E<0)c=this.isReverse?c.left:c.right;else{if(0===E){this.nodeStack.push(c);break}this.nodeStack.push(c),c=this.isReverse?c.right:c.left}}return d.prototype.getNext=function(){var c=this.nodeStack.pop(),p={key:c.key,value:c.value};if(this.isReverse)for(c=c.left;!c.isEmpty();)this.nodeStack.push(c),c=c.right;else for(c=c.right;!c.isEmpty();)this.nodeStack.push(c),c=c.left;return p},d.prototype.hasNext=function(){return this.nodeStack.length>0},d.prototype.peek=function(){if(0===this.nodeStack.length)return null;var c=this.nodeStack[this.nodeStack.length-1];return{key:c.key,value:c.value}},d}(),Vc=function(){function d(c,p,y,b,E){this.key=c,this.value=p,this.color=y??d.RED,this.left=b??d.EMPTY,this.right=E??d.EMPTY,this.size=this.left.size+1+this.right.size}return d.prototype.copy=function(c,p,y,b,E){return new d(c??this.key,p??this.value,y??this.color,b??this.left,E??this.right)},d.prototype.isEmpty=function(){return!1},d.prototype.inorderTraversal=function(c){return this.left.inorderTraversal(c)||c(this.key,this.value)||this.right.inorderTraversal(c)},d.prototype.reverseTraversal=function(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)},d.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},d.prototype.minKey=function(){return this.min().key},d.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},d.prototype.insert=function(c,p,y){var b=this,E=y(c,b.key);return(b=E<0?b.copy(null,null,null,b.left.insert(c,p,y),null):0===E?b.copy(null,p,null,null,null):b.copy(null,null,null,null,b.right.insert(c,p,y))).fixUp()},d.prototype.removeMin=function(){if(this.left.isEmpty())return d.EMPTY;var c=this;return c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),(c=c.copy(null,null,null,c.left.removeMin(),null)).fixUp()},d.prototype.remove=function(c,p){var y,b=this;if(p(c,b.key)<0)b.left.isEmpty()||b.left.isRed()||b.left.left.isRed()||(b=b.moveRedLeft()),b=b.copy(null,null,null,b.left.remove(c,p),null);else{if(b.left.isRed()&&(b=b.rotateRight()),b.right.isEmpty()||b.right.isRed()||b.right.left.isRed()||(b=b.moveRedRight()),0===p(c,b.key)){if(b.right.isEmpty())return d.EMPTY;y=b.right.min(),b=b.copy(y.key,y.value,null,null,b.right.removeMin())}b=b.copy(null,null,null,null,b.right.remove(c,p))}return b.fixUp()},d.prototype.isRed=function(){return this.color},d.prototype.fixUp=function(){var c=this;return c.right.isRed()&&!c.left.isRed()&&(c=c.rotateLeft()),c.left.isRed()&&c.left.left.isRed()&&(c=c.rotateRight()),c.left.isRed()&&c.right.isRed()&&(c=c.colorFlip()),c},d.prototype.moveRedLeft=function(){var c=this.colorFlip();return c.right.left.isRed()&&(c=(c=(c=c.copy(null,null,null,null,c.right.rotateRight())).rotateLeft()).colorFlip()),c},d.prototype.moveRedRight=function(){var c=this.colorFlip();return c.left.left.isRed()&&(c=(c=c.rotateRight()).colorFlip()),c},d.prototype.rotateLeft=function(){var c=this.copy(null,null,d.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)},d.prototype.rotateRight=function(){var c=this.copy(null,null,d.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)},d.prototype.colorFlip=function(){var c=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,p)},d.prototype.checkMaxDepth=function(){var c=this.check();return Math.pow(2,c)<=this.size+1},d.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Fn();var c=this.left.check();if(c!==this.right.check())throw Fn();return c+(this.isRed()?0:1)},d}();Vc.EMPTY=null,Vc.RED=!0,Vc.BLACK=!1,Vc.EMPTY=new(function(){function d(){this.size=0}return Object.defineProperty(d.prototype,"key",{get:function(){throw Fn()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"value",{get:function(){throw Fn()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"color",{get:function(){throw Fn()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"left",{get:function(){throw Fn()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"right",{get:function(){throw Fn()},enumerable:!1,configurable:!0}),d.prototype.copy=function(c,p,y,b,E){return this},d.prototype.insert=function(c,p,y){return new Vc(c,p)},d.prototype.remove=function(c,p){return this},d.prototype.isEmpty=function(){return!0},d.prototype.inorderTraversal=function(c){return!1},d.prototype.reverseTraversal=function(c){return!1},d.prototype.minKey=function(){return null},d.prototype.maxKey=function(){return null},d.prototype.isRed=function(){return!1},d.prototype.checkMaxDepth=function(){return!0},d.prototype.check=function(){return 0},d}());var Or=function(){function d(c){this.comparator=c,this.data=new Ao(this.comparator)}return d.prototype.has=function(c){return null!==this.data.get(c)},d.prototype.first=function(){return this.data.minKey()},d.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(d.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),d.prototype.indexOf=function(c){return this.data.indexOf(c)},d.prototype.forEach=function(c){this.data.inorderTraversal(function(p,y){return c(p),!1})},d.prototype.forEachInRange=function(c,p){for(var y=this.data.getIteratorFrom(c[0]);y.hasNext();){var b=y.getNext();if(this.comparator(b.key,c[1])>=0)return;p(b.key)}},d.prototype.forEachWhile=function(c,p){var y;for(y=void 0!==p?this.data.getIteratorFrom(p):this.data.getIterator();y.hasNext();)if(!c(y.getNext().key))return},d.prototype.firstAfterOrEqual=function(c){var p=this.data.getIteratorFrom(c);return p.hasNext()?p.getNext().key:null},d.prototype.getIterator=function(){return new _g(this.data.getIterator())},d.prototype.getIteratorFrom=function(c){return new _g(this.data.getIteratorFrom(c))},d.prototype.add=function(c){return this.copy(this.data.remove(c).insert(c,!0))},d.prototype.delete=function(c){return this.has(c)?this.copy(this.data.remove(c)):this},d.prototype.isEmpty=function(){return this.data.isEmpty()},d.prototype.unionWith=function(c){var p=this;return p.size<c.size&&(p=c,c=this),c.forEach(function(y){p=p.add(y)}),p},d.prototype.isEqual=function(c){if(!(c instanceof d)||this.size!==c.size)return!1;for(var p=this.data.getIterator(),y=c.data.getIterator();p.hasNext();){var b=p.getNext().key,E=y.getNext().key;if(0!==this.comparator(b,E))return!1}return!0},d.prototype.toArray=function(){var c=[];return this.forEach(function(p){c.push(p)}),c},d.prototype.toString=function(){var c=[];return this.forEach(function(p){return c.push(p)}),"SortedSet("+c.toString()+")"},d.prototype.copy=function(c){var p=new d(this.comparator);return p.data=c,p},d}(),_g=function(){function d(c){this.iter=c}return d.prototype.getNext=function(){return this.iter.getNext().key},d.prototype.hasNext=function(){return this.iter.hasNext()},d}(),yg=new Ao(Mn.comparator);function go(){return yg}var Op=new Ao(Mn.comparator);function fl(){return Op}var H0=new Ao(Mn.comparator);function c_(){return H0}var iT=new Or(Mn.comparator);function ki(){for(var d=[],c=0;c<arguments.length;c++)d[c]=arguments[c];for(var p=iT,y=0,b=d;y<b.length;y++){var E=b[y];p=p.add(E)}return p}var Qd=new Or(hi);function Rp(){return Qd}var Pp=function(){function d(c,p,y,b,E){this.snapshotVersion=c,this.targetChanges=p,this.targetMismatches=y,this.documentUpdates=b,this.resolvedLimboDocuments=E}return d.createSynthesizedRemoteEventForCurrentChange=function(c,p){var y=new Map;return y.set(c,Xd.createSynthesizedTargetChangeForCurrentChange(c,p)),new d(zn.min(),y,Rp(),go(),ki())},d}(),Xd=function(){function d(c,p,y,b,E){this.resumeToken=c,this.current=p,this.addedDocuments=y,this.modifiedDocuments=b,this.removedDocuments=E}return d.createSynthesizedTargetChangeForCurrentChange=function(c,p){return new d(Xr.EMPTY_BYTE_STRING,p,ki(),ki(),ki())},d}(),Xs=function(d,c,p,y){this.v=d,this.removedTargetIds=c,this.key=p,this.P=y},vg=function(d,c){this.targetId=d,this.V=c},Nu=function(d,c,p,y){void 0===p&&(p=Xr.EMPTY_BYTE_STRING),void 0===y&&(y=null),this.state=d,this.targetIds=c,this.resumeToken=p,this.cause=y},_a=function(){function d(){this.S=0,this.D=ya(),this.C=Xr.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(d.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),d.prototype.O=function(c){c.approximateByteSize()>0&&(this.k=!0,this.C=c)},d.prototype.M=function(){var c=ki(),p=ki(),y=ki();return this.D.forEach(function(b,E){switch(E){case 0:c=c.add(b);break;case 2:p=p.add(b);break;case 1:y=y.add(b);break;default:Fn()}}),new Xd(this.C,this.N,c,p,y)},d.prototype.L=function(){this.k=!1,this.D=ya()},d.prototype.B=function(c,p){this.k=!0,this.D=this.D.insert(c,p)},d.prototype.q=function(c){this.k=!0,this.D=this.D.remove(c)},d.prototype.U=function(){this.S+=1},d.prototype.K=function(){this.S-=1},d.prototype.j=function(){this.k=!0,this.N=!0},d}(),gv=function(){function d(c){this.W=c,this.G=new Map,this.H=go(),this.J=Np(),this.Y=new Or(hi)}return d.prototype.X=function(c){for(var p=0,y=c.v;p<y.length;p++){var b=y[p];c.P&&c.P.isFoundDocument()?this.Z(b,c.P):this.tt(b,c.key,c.P)}for(var E=0,M=c.removedTargetIds;E<M.length;E++)this.tt(b=M[E],c.key,c.P)},d.prototype.et=function(c){var p=this;this.forEachTarget(c,function(y){var b=p.nt(y);switch(c.state){case 0:p.st(y)&&b.O(c.resumeToken);break;case 1:b.K(),b.F||b.L(),b.O(c.resumeToken);break;case 2:b.K(),b.F||p.removeTarget(y);break;case 3:p.st(y)&&(b.j(),b.O(c.resumeToken));break;case 4:p.st(y)&&(p.it(y),b.O(c.resumeToken));break;default:Fn()}})},d.prototype.forEachTarget=function(c,p){var y=this;c.targetIds.length>0?c.targetIds.forEach(p):this.G.forEach(function(b,E){y.st(E)&&p(E)})},d.prototype.rt=function(c){var p=c.targetId,y=c.V.count,b=this.ot(p);if(b){var E=b.target;if(jr(E))if(0===y){var M=new Mn(E.path);this.tt(p,M,re.newNoDocument(M,zn.min()))}else Ft(1===y);else this.ct(p)!==y&&(this.it(p),this.Y=this.Y.add(p))}},d.prototype.ut=function(c){var p=this,y=new Map;this.G.forEach(function(M,P){var B=p.ot(P);if(B){if(M.current&&jr(B.target)){var G=new Mn(B.target.path);null!==p.H.get(G)||p.at(P,G)||p.tt(P,G,re.newNoDocument(G,c))}M.$&&(y.set(P,M.M()),M.L())}});var b=ki();this.J.forEach(function(M,P){var B=!0;P.forEachWhile(function(G){var te=p.ot(G);return!te||2===te.purpose||(B=!1,!1)}),B&&(b=b.add(M))});var E=new Pp(c,y,this.Y,this.H,b);return this.H=go(),this.J=Np(),this.Y=new Or(hi),E},d.prototype.Z=function(c,p){if(this.st(c)){var y=this.at(c,p.key)?2:0;this.nt(c).B(p.key,y),this.H=this.H.insert(p.key,p),this.J=this.J.insert(p.key,this.ht(p.key).add(c))}},d.prototype.tt=function(c,p,y){if(this.st(c)){var b=this.nt(c);this.at(c,p)?b.B(p,1):b.q(p),this.J=this.J.insert(p,this.ht(p).delete(c)),y&&(this.H=this.H.insert(p,y))}},d.prototype.removeTarget=function(c){this.G.delete(c)},d.prototype.ct=function(c){var p=this.nt(c).M();return this.W.getRemoteKeysForTarget(c).size+p.addedDocuments.size-p.removedDocuments.size},d.prototype.U=function(c){this.nt(c).U()},d.prototype.nt=function(c){var p=this.G.get(c);return p||(p=new _a,this.G.set(c,p)),p},d.prototype.ht=function(c){var p=this.J.get(c);return p||(p=new Or(hi),this.J=this.J.insert(c,p)),p},d.prototype.st=function(c){var p=null!==this.ot(c);return p||Qt("WatchChangeAggregator","Detected inactive target",c),p},d.prototype.ot=function(c){var p=this.G.get(c);return p&&p.F?null:this.W.lt(c)},d.prototype.it=function(c){var p=this;this.G.set(c,new _a),this.W.getRemoteKeysForTarget(c).forEach(function(y){p.tt(c,y,null)})},d.prototype.at=function(c,p){return this.W.getRemoteKeysForTarget(c).has(p)},d}();function Np(){return new Ao(Mn.comparator)}function ya(){return new Ao(Mn.comparator)}var Fu={asc:"ASCENDING",desc:"DESCENDING"},mv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},u_=function(d,c){this.databaseId=d,this.I=c};function eh(d,c){return d.I?new Date(1e3*c.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+c.nanoseconds).slice(-9)+"Z":{seconds:""+c.seconds,nanos:c.nanoseconds}}function _v(d,c){return d.I?c.toBase64():c.toUint8Array()}function B0(d,c){return eh(d,c.toTimestamp())}function mo(d){return Ft(!!d),zn.fromTimestamp((p=Pa(d),new Li(p.seconds,p.nanos)));var p}function R(d,c){return(p=d,new _i(["projects",p.projectId,"databases",p.database])).child("documents").child(c).canonicalString();var p}function S(d){var c=_i.fromString(d);return Ft(wg(c)),c}function I(d,c){return R(d.databaseId,c.path)}function L(d,c){var p=S(c);if(p.get(1)!==d.databaseId.projectId)throw new Rt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+p.get(1)+" vs "+d.databaseId.projectId);if(p.get(3)!==d.databaseId.database)throw new Rt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+p.get(3)+" vs "+d.databaseId.database);return new Mn(vt(p))}function Y(d,c){return R(d.databaseId,c)}function se(d){var c=S(d);return 4===c.length?_i.emptyPath():vt(c)}function Ie(d){return new _i(["projects",d.databaseId.projectId,"databases",d.databaseId.database]).canonicalString()}function vt(d){return Ft(d.length>4&&"documents"===d.get(4)),d.popFirst(5)}function hn(d,c,p){return{name:I(d,c),fields:p.value.mapValue.fields}}function bn(d,c,p){var y=L(d,c.name),b=mo(c.updateTime),E=new oi({mapValue:{fields:c.fields}}),M=re.newFoundDocument(y,b,E);return p&&M.setHasCommittedMutations(),p?M.setHasCommittedMutations():M}function Zn(d,c){var p,b;if(c instanceof Fc)p={update:hn(d,c.key,c.value)};else if(c instanceof Ru)p={delete:I(d,c.key)};else if(c instanceof Lc)p={update:hn(d,c.key,c.data),updateMask:U0(c.fieldMask)};else{if(!(c instanceof Pu))return Fn();p={verify:I(d,c.key)}}return c.fieldTransforms.length>0&&(p.updateTransforms=c.fieldTransforms.map(function(y){return function(b,E){var M=E.transform;if(M instanceof hl)return{fieldPath:E.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(M instanceof ga)return{fieldPath:E.field.canonicalString(),appendMissingElements:{values:M.elements}};if(M instanceof $l)return{fieldPath:E.field.canonicalString(),removeAllFromArray:{values:M.elements}};if(M instanceof Js)return{fieldPath:E.field.canonicalString(),increment:M.A};throw Fn()}(0,y)})),c.precondition.isNone||(p.currentDocument=void 0!==(b=c.precondition).updateTime?{updateTime:B0(d,b.updateTime)}:void 0!==b.exists?{exists:b.exists}:Fn()),p}function zi(d,c){var G,p=c.currentDocument?void 0!==(G=c.currentDocument).updateTime?zr.updateTime(mo(G.updateTime)):void 0!==G.exists?zr.exists(G.exists):zr.none():zr.none(),y=c.updateTransforms?c.updateTransforms.map(function(G){return function(te,fe){var ye=null;"setToServerValue"in fe?(Ft("REQUEST_TIME"===fe.setToServerValue),ye=new hl):"appendMissingElements"in fe?ye=new ga(fe.appendMissingElements.values||[]):"removeAllFromArray"in fe?ye=new $l(fe.removeAllFromArray.values||[]):"increment"in fe?ye=new Js(te,fe.increment):Fn();var st=Ks.fromServerFormat(fe.fieldPath);return new ma(st,ye)}(d,G)}):[];if(c.update){var b=L(d,c.update.name),E=new oi({mapValue:{fields:c.update.fields}});if(c.updateMask){var M=function(G){return new Ra((G.fieldPaths||[]).map(function(fe){return Ks.fromServerFormat(fe)}))}(c.updateMask);return new Lc(b,E,M,p,y)}return new Fc(b,E,p,y)}if(c.delete){var P=L(d,c.delete);return new Ru(P,p)}if(c.verify){var B=L(d,c.verify);return new Pu(B,p)}return Fn()}function jo(d,c){return{documents:[Y(d,c.path)]}}function gl(d,c){var p={structuredQuery:{}},y=c.path;null!==c.collectionGroup?(p.parent=Y(d,y),p.structuredQuery.from=[{collectionId:c.collectionGroup,allDescendants:!0}]):(p.parent=Y(d,y.popLast()),p.structuredQuery.from=[{collectionId:y.lastSegment()}]);var b=function(P){if(0!==P.length){var B=P.map(function(G){return function(te){if("=="===te.op){if(V0(te.value))return{unaryFilter:{field:Vu(te.field),op:"IS_NAN"}};if(r_(te.value))return{unaryFilter:{field:Vu(te.field),op:"IS_NULL"}}}else if("!="===te.op){if(V0(te.value))return{unaryFilter:{field:Vu(te.field),op:"IS_NOT_NAN"}};if(r_(te.value))return{unaryFilter:{field:Vu(te.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vu(te.field),op:nh(te.op),value:te.value}}}(G)});return 1===B.length?B[0]:{compositeFilter:{op:"AND",filters:B}}}}(c.filters);b&&(p.structuredQuery.where=b);var E=function(P){if(0!==P.length)return P.map(function(B){return{field:Vu((G=B).field),direction:Fp(G.dir)};var G})}(c.orderBy);E&&(p.structuredQuery.orderBy=E);var B,M=(B=c.limit,d.I||Ur(B)?B:{value:B});return null!==M&&(p.structuredQuery.limit=M),c.startAt&&(p.structuredQuery.startAt=bg(c.startAt)),c.endAt&&(p.structuredQuery.endAt=bg(c.endAt)),p}function Lu(d){var c=se(d.parent),p=d.structuredQuery,y=p.from?p.from.length:0,b=null;if(y>0){Ft(1===y);var E=p.from[0];E.allDescendants?b=E.collectionId:c=c.child(E.collectionId)}var M=[];p.where&&(M=d_(p.where));var P=[];p.orderBy&&(P=p.orderBy.map(function(fe){return new gr(Hu((ye=fe).field),function(qe){switch(qe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ye.direction));var ye}));var fe,ye,B=null;p.limit&&(B=Ur(ye="object"==typeof(fe=p.limit)?fe.value:fe)?null:ye);var G=null;p.startAt&&(G=th(p.startAt));var te=null;return p.endAt&&(te=th(p.endAt)),Su(c,b,P,M,B,"F",G,te)}function d_(d){return d?void 0!==d.unaryFilter?[yv(d)]:void 0!==d.fieldFilter?[Lp(d)]:void 0!==d.compositeFilter?d.compositeFilter.filters.map(function(c){return d_(c)}).reduce(function(c,p){return c.concat(p)}):Fn():[]}function bg(d){return{before:d.before,values:d.position}}function th(d){return new Tp(d.values||[],!!d.before)}function Fp(d){return Fu[d]}function nh(d){return mv[d]}function Vu(d){return{fieldPath:d.canonicalString()}}function Hu(d){return Ks.fromServerFormat(d.fieldPath)}function Lp(d){return ir.create(Hu(d.fieldFilter.field),function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fn()}}(d.fieldFilter.op),d.fieldFilter.value)}function yv(d){switch(d.unaryFilter.op){case"IS_NAN":var c=Hu(d.unaryFilter.field);return ir.create(c,"==",{doubleValue:NaN});case"IS_NULL":var p=Hu(d.unaryFilter.field);return ir.create(p,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var y=Hu(d.unaryFilter.field);return ir.create(y,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var b=Hu(d.unaryFilter.field);return ir.create(b,"!=",{nullValue:"NULL_VALUE"});default:return Fn()}}function U0(d){var c=[];return d.fields.forEach(function(p){return c.push(p.canonicalString())}),{fieldPaths:c}}function wg(d){return d.length>=4&&"projects"===d.get(0)&&"databases"===d.get(2)}function Va(d){for(var c="",p=0;p<d.length;p++)c.length>0&&(c=h_(c)),c=rT(d.get(p),c);return h_(c)}function rT(d,c){for(var p=c,y=d.length,b=0;b<y;b++){var E=d.charAt(b);switch(E){case"\0":p+="\x01\x10";break;case"\x01":p+="\x01\x11";break;default:p+=E}}return p}function h_(d){return d+"\x01\x01"}function Hc(d){var c=d.length;if(Ft(c>=2),2===c)return Ft("\x01"===d.charAt(0)&&"\x01"===d.charAt(1)),_i.emptyPath();for(var p=c-2,y=[],b="",E=0;E<c;){var M=d.indexOf("\x01",E);switch((M<0||M>p)&&Fn(),d.charAt(M+1)){case"\x01":var P=d.substring(E,M),B=void 0;0===b.length?B=P:(B=b+=P,b=""),y.push(B);break;case"\x10":b+=d.substring(E,M),b+="\0";break;case"\x11":b+=d.substring(E,M+1);break;default:Fn()}E=M+2}return new _i(y)}var j0=function(d,c){this.seconds=d,this.nanoseconds=c},Ha=function(d,c,p){this.ownerId=d,this.allowTabSynchronization=c,this.leaseTimestampMs=p};Ha.store="owner",Ha.key="owner";var rr=function(d,c,p){this.userId=d,this.lastAcknowledgedBatchId=c,this.lastStreamToken=p};rr.store="mutationQueues",rr.keyPath="userId";var mr=function(d,c,p,y,b){this.userId=d,this.batchId=c,this.localWriteTimeMs=p,this.baseMutations=y,this.mutations=b};mr.store="mutations",mr.keyPath="batchId",mr.userMutationsIndex="userMutationsIndex",mr.userMutationsKeyPath=["userId","batchId"];var Rs=function(){function d(){}return d.prefixForUser=function(c){return[c]},d.prefixForPath=function(c,p){return[c,Va(p)]},d.key=function(c,p,y){return[c,Va(p),y]},d}();Rs.store="documentMutations",Rs.PLACEHOLDER=new Rs;var z0=function(d,c){this.path=d,this.readTime=c},oT=function(d,c){this.path=d,this.version=c},eo=function(d,c,p,y,b,E){this.unknownDocument=d,this.noDocument=c,this.document=p,this.hasCommittedMutations=y,this.readTime=b,this.parentPath=E};eo.store="remoteDocuments",eo.readTimeIndex="readTimeIndex",eo.readTimeIndexPath="readTime",eo.collectionReadTimeIndex="collectionReadTimeIndex",eo.collectionReadTimeIndexPath=["parentPath","readTime"];var Bc=function(d){this.byteSize=d};Bc.store="remoteDocumentGlobal",Bc.key="remoteDocumentGlobalKey";var va=function(d,c,p,y,b,E,M){this.targetId=d,this.canonicalId=c,this.readTime=p,this.resumeToken=y,this.lastListenSequenceNumber=b,this.lastLimboFreeSnapshotVersion=E,this.query=M};va.store="targets",va.keyPath="targetId",va.queryTargetsIndexName="queryTargetsIndex",va.queryTargetsKeyPath=["canonicalId","targetId"];var vs=function(d,c,p){this.targetId=d,this.path=c,this.sequenceNumber=p};vs.store="targetDocuments",vs.keyPath=["targetId","path"],vs.documentTargetsIndex="documentTargetsIndex",vs.documentTargetsKeyPath=["path","targetId"];var Ba=function(d,c,p,y){this.highestTargetId=d,this.highestListenSequenceNumber=c,this.lastRemoteSnapshotVersion=p,this.targetCount=y};Ba.key="targetGlobalKey",Ba.store="targetGlobal";var Cg=function(d,c){this.collectionId=d,this.parent=c};Cg.store="collectionParents",Cg.keyPath=["collectionId","parent"];var ih=function(d,c,p,y){this.clientId=d,this.updateTimeMs=c,this.networkEnabled=p,this.inForeground=y};ih.store="clientMetadata",ih.keyPath="clientId";var Uc=function(d,c,p){this.bundleId=d,this.createTime=c,this.version=p};Uc.store="bundles",Uc.keyPath="bundleId";var rh=function(d,c,p){this.name=d,this.readTime=c,this.bundledQuery=p};rh.store="namedQueries",rh.keyPath="name";var sT=(0,V.ev)((0,V.ev)([],(0,V.ev)((0,V.ev)([],(0,V.ev)((0,V.ev)([],(0,V.ev)((0,V.ev)([],[rr.store,mr.store,Rs.store,eo.store,va.store,Ha.store,Ba.store,vs.store]),[ih.store])),[Bc.store])),[Cg.store])),[Uc.store,rh.store]),G0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",q0=function(){function d(){this.onCommittedListeners=[]}return d.prototype.addOnCommittedListener=function(c){this.onCommittedListeners.push(c)},d.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(c){return c()})},d}(),Ps=function(){var d=this;this.promise=new Promise(function(c,p){d.resolve=c,d.reject=p})},qt=function(){function d(c){var p=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,c(function(y){p.isDone=!0,p.result=y,p.nextCallback&&p.nextCallback(y)},function(y){p.isDone=!0,p.error=y,p.catchCallback&&p.catchCallback(y)})}return d.prototype.catch=function(c){return this.next(void 0,c)},d.prototype.next=function(c,p){var y=this;return this.callbackAttached&&Fn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(p,this.error):this.wrapSuccess(c,this.result):new d(function(b,E){y.nextCallback=function(M){y.wrapSuccess(c,M).next(b,E)},y.catchCallback=function(M){y.wrapFailure(p,M).next(b,E)}})},d.prototype.toPromise=function(){var c=this;return new Promise(function(p,y){c.next(p,y)})},d.prototype.wrapUserFunction=function(c){try{var p=c();return p instanceof d?p:d.resolve(p)}catch(y){return d.reject(y)}},d.prototype.wrapSuccess=function(c,p){return c?this.wrapUserFunction(function(){return c(p)}):d.resolve(p)},d.prototype.wrapFailure=function(c,p){return c?this.wrapUserFunction(function(){return c(p)}):d.reject(p)},d.resolve=function(c){return new d(function(p,y){p(c)})},d.reject=function(c){return new d(function(p,y){y(c)})},d.waitFor=function(c){return new d(function(p,y){var b=0,E=0,M=!1;c.forEach(function(P){++b,P.next(function(){++E,M&&E===b&&p()},function(B){return y(B)})}),M=!0,E===b&&p()})},d.or=function(c){for(var p=d.resolve(!1),y=function(M){p=p.next(function(P){return P?d.resolve(P):M()})},b=0,E=c;b<E.length;b++)y(E[b]);return p},d.forEach=function(c,p){var y=this,b=[];return c.forEach(function(E,M){b.push(p.call(y,E,M))}),this.waitFor(b)},d}(),Z0=function(){function d(c,p){var y=this;this.action=c,this.transaction=p,this.aborted=!1,this.ft=new Ps,this.transaction.oncomplete=function(){y.ft.resolve()},this.transaction.onabort=function(){p.error?y.ft.reject(new p_(c,p.error)):y.ft.resolve()},this.transaction.onerror=function(b){var E=$0(b.target.error);y.ft.reject(new p_(c,E))}}return d.open=function(c,p,y,b){try{return new d(p,c.transaction(b,y))}catch(E){throw new p_(p,E)}},Object.defineProperty(d.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),d.prototype.abort=function(c){c&&this.ft.reject(c),this.aborted||(Qt("SimpleDb","Aborting transaction:",c?c.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},d.prototype.store=function(c){var p=this.transaction.objectStore(c);return new aT(p)},d}(),oh=function(){function d(c,p,y){this.name=c,this.version=p,this.wt=y,12.2===d._t((0,W.z$)())&&Qi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return d.delete=function(c){return Qt("SimpleDb","Removing database:",c),sh(window.indexedDB.deleteDatabase(c)).toPromise()},d.yt=function(){if(typeof indexedDB>"u")return!1;if(d.gt())return!0;var c=(0,W.z$)(),p=d._t(c),y=0<p&&p<10,b=d.Et(c),E=0<b&&b<4.5;return!(c.indexOf("MSIE ")>0||c.indexOf("Trident/")>0||c.indexOf("Edge/")>0||y||E)},d.gt=function(){var c;return typeof process<"u"&&"YES"===(null===(c=process.env)||void 0===c?void 0:c.Tt)},d.It=function(c,p){return c.store(p)},d._t=function(c){var p=c.match(/i(?:phone|pad|pod) os ([\d_]+)/i),y=p?p[1].split("_").slice(0,2).join("."):"-1";return Number(y)},d.Et=function(c){var p=c.match(/Android ([\d.]+)/i),y=p?p[1].split(".").slice(0,2).join("."):"-1";return Number(y)},d.prototype.At=function(c){return(0,V.mG)(this,void 0,void 0,function(){var p,y=this;return(0,V.Jh)(this,function(b){switch(b.label){case 0:return this.db?[3,2]:(Qt("SimpleDb","Opening database:",this.name),p=this,[4,new Promise(function(E,M){var P=indexedDB.open(y.name,y.version);P.onsuccess=function(B){E(B.target.result)},P.onblocked=function(){M(new p_(c,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},P.onerror=function(B){var G=B.target.error;M("VersionError"===G.name?new Rt(nt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new p_(c,G))},P.onupgradeneeded=function(B){Qt("SimpleDb",'Database "'+y.name+'" requires upgrade from version:',B.oldVersion),y.wt.Rt(B.target.result,P.transaction,B.oldVersion,y.version).next(function(){Qt("SimpleDb","Database upgrade to version "+y.version+" complete")})}})]);case 1:p.db=b.sent(),b.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(E){return y.bt(E)}),this.db)]}})})},d.prototype.vt=function(c){this.bt=c,this.db&&(this.db.onversionchange=function(p){return c(p)})},d.prototype.runTransaction=function(c,p,y,b){return(0,V.mG)(this,void 0,void 0,function(){var E,M,P,B,G;return(0,V.Jh)(this,function(te){switch(te.label){case 0:E="readonly"===p,M=0,P=function(){var fe,ye,qe,ze,st;return(0,V.Jh)(this,function(Vt){switch(Vt.label){case 0:++M,Vt.label=1;case 1:return Vt.trys.push([1,4,,5]),[4,B.At(c)];case 2:return B.db=Vt.sent(),fe=Z0.open(B.db,c,E?"readonly":"readwrite",y),ye=b(fe).catch(function(tn){return fe.abort(tn),qt.reject(tn)}).toPromise(),qe={},ye.catch(function(){}),[4,fe.dt];case 3:return[2,(qe.value=(Vt.sent(),ye),qe)];case 4:return Qt("SimpleDb","Transaction failed with error:",(ze=Vt.sent()).message,"Retrying:",st="FirebaseError"!==ze.name&&M<3),B.close(),st?[3,5]:[2,{value:Promise.reject(ze)}];case 5:return[2]}})},B=this,te.label=1;case 1:return[5,P()];case 2:if("object"==typeof(G=te.sent()))return[2,G.value];te.label=3;case 3:return[3,1];case 4:return[2]}})})},d.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},d}(),_O=function(){function d(c){this.Pt=c,this.Vt=!1,this.St=null}return Object.defineProperty(d.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"cursor",{set:function(c){this.Pt=c},enumerable:!1,configurable:!0}),d.prototype.done=function(){this.Vt=!0},d.prototype.Ct=function(c){this.St=c},d.prototype.delete=function(){return sh(this.Pt.delete())},d}(),p_=function(d){function c(p,y){var b=this;return(b=d.call(this,nt.UNAVAILABLE,"IndexedDB transaction '"+p+"' failed: "+y)||this).name="IndexedDbTransactionError",b}return(0,V.ZT)(c,d),c}(Rt);function Bu(d){return"IndexedDbTransactionError"===d.name}var aT=function(){function d(c){this.store=c}return d.prototype.put=function(c,p){var y;return void 0!==p?(Qt("SimpleDb","PUT",this.store.name,c,p),y=this.store.put(p,c)):(Qt("SimpleDb","PUT",this.store.name,"<auto-key>",c),y=this.store.put(c)),sh(y)},d.prototype.add=function(c){return Qt("SimpleDb","ADD",this.store.name,c,c),sh(this.store.add(c))},d.prototype.get=function(c){var p=this;return sh(this.store.get(c)).next(function(y){return void 0===y&&(y=null),Qt("SimpleDb","GET",p.store.name,c,y),y})},d.prototype.delete=function(c){return Qt("SimpleDb","DELETE",this.store.name,c),sh(this.store.delete(c))},d.prototype.count=function(){return Qt("SimpleDb","COUNT",this.store.name),sh(this.store.count())},d.prototype.Nt=function(c,p){var y=this.cursor(this.options(c,p)),b=[];return this.xt(y,function(E,M){b.push(M)}).next(function(){return b})},d.prototype.kt=function(c,p){Qt("SimpleDb","DELETE ALL",this.store.name);var y=this.options(c,p);y.Ft=!1;var b=this.cursor(y);return this.xt(b,function(E,M,P){return P.delete()})},d.prototype.$t=function(c,p){var y;p?y=c:(y={},p=c);var b=this.cursor(y);return this.xt(b,p)},d.prototype.Ot=function(c){var p=this.cursor({});return new qt(function(y,b){p.onerror=function(E){var M=$0(E.target.error);b(M)},p.onsuccess=function(E){var M=E.target.result;M?c(M.primaryKey,M.value).next(function(P){P?M.continue():y()}):y()}})},d.prototype.xt=function(c,p){var y=[];return new qt(function(b,E){c.onerror=function(M){E(M.target.error)},c.onsuccess=function(M){var P=M.target.result;if(P){var B=new _O(P),G=p(P.primaryKey,P.value,B);if(G instanceof qt){var te=G.catch(function(fe){return B.done(),qt.reject(fe)});y.push(te)}B.isDone?b():null===B.Dt?P.continue():P.continue(B.Dt)}else b()}}).next(function(){return qt.waitFor(y)})},d.prototype.options=function(c,p){var y;return void 0!==c&&("string"==typeof c?y=c:p=c),{index:y,range:p}},d.prototype.cursor=function(c){var p="next";if(c.reverse&&(p="prev"),c.index){var y=this.store.index(c.index);return c.Ft?y.openKeyCursor(c.range,p):y.openCursor(c.range,p)}return this.store.openCursor(c.range,p)},d}();function sh(d){return new qt(function(c,p){d.onsuccess=function(y){c(y.target.result)},d.onerror=function(y){var b=$0(y.target.error);p(b)}})}var ah=!1;function $0(d){var c=oh._t((0,W.z$)());if(c>=12.2&&c<13){var p="An internal error was encountered in the Indexed Database server";if(d.message.indexOf(p)>=0){var y=new Rt("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+p+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ah||(ah=!0,setTimeout(function(){throw y},0)),y}}return d}var vv=function(d){function c(p,y){var b=this;return(b=d.call(this)||this).Mt=p,b.currentSequenceNumber=y,b}return(0,V.ZT)(c,d),c}(q0);function bs(d,c){var p=It(d);return oh.It(p.Mt,c)}var W0=function(){function d(c,p,y,b){this.batchId=c,this.localWriteTime=p,this.baseMutations=y,this.mutations=b}return d.prototype.applyToRemoteDocument=function(c,p){for(var y=p.mutationResults,b=0;b<this.mutations.length;b++){var E=this.mutations[b];E.key.isEqual(c.key)&&Mp(E,c,y[b])}},d.prototype.applyToLocalView=function(c){for(var p=0,y=this.baseMutations;p<y.length;p++)(M=y[p]).key.isEqual(c.key)&&Ap(M,c,this.localWriteTime);for(var b=0,E=this.mutations;b<E.length;b++){var M;(M=E[b]).key.isEqual(c.key)&&Ap(M,c,this.localWriteTime)}},d.prototype.applyToLocalDocumentSet=function(c){var p=this;this.mutations.forEach(function(y){var b=c.get(y.key),E=b;p.applyToLocalView(E),b.isValidDocument()||E.convertToNoDocument(zn.min())})},d.prototype.keys=function(){return this.mutations.reduce(function(c,p){return c.add(p.key)},ki())},d.prototype.isEqual=function(c){return this.batchId===c.batchId&&sr(this.mutations,c.mutations,function(p,y){return La(p,y)})&&sr(this.baseMutations,c.baseMutations,function(p,y){return La(p,y)})},d}(),K0=function(){function d(c,p,y,b){this.batch=c,this.commitVersion=p,this.mutationResults=y,this.docVersions=b}return d.from=function(c,p,y){Ft(c.mutations.length===y.length);for(var b=c_(),E=c.mutations,M=0;M<E.length;M++)b=b.insert(E[M].key,y[M].version);return new d(c,p,y,b)},d}(),Vp=function(){function d(c,p,y,b,E,M,P){void 0===E&&(E=zn.min()),void 0===M&&(M=zn.min()),void 0===P&&(P=Xr.EMPTY_BYTE_STRING),this.target=c,this.targetId=p,this.purpose=y,this.sequenceNumber=b,this.snapshotVersion=E,this.lastLimboFreeSnapshotVersion=M,this.resumeToken=P}return d.prototype.withSequenceNumber=function(c){return new d(this.target,this.targetId,this.purpose,c,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},d.prototype.withResumeToken=function(c,p){return new d(this.target,this.targetId,this.purpose,this.sequenceNumber,p,this.lastLimboFreeSnapshotVersion,c)},d.prototype.withLastLimboFreeSnapshotVersion=function(c){return new d(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,c,this.resumeToken)},d}(),lh=function(d){this.Lt=d};function bv(d,c){if(c.document)return bn(d.Lt,c.document,!!c.hasCommittedMutations);if(c.noDocument){var p=Mn.fromSegments(c.noDocument.path),y=Kl(c.noDocument.readTime),b=re.newNoDocument(p,y);return c.hasCommittedMutations?b.setHasCommittedMutations():b}if(c.unknownDocument){var E=Mn.fromSegments(c.unknownDocument.path);return y=Kl(c.unknownDocument.version),re.newUnknownDocument(E,y)}return Fn()}function wv(d,c,p){var fe,ye,y=Y0(p),b=c.key.path.popLast().toArray();if(c.isFoundDocument()){var E={name:I(fe=d.Lt,(ye=c).key),fields:ye.data.value.mapValue.fields,updateTime:eh(fe,ye.version.toTimestamp())},M=c.hasCommittedMutations;return new eo(null,null,E,M,y,b)}if(c.isNoDocument()){var P=c.key.path.toArray(),B=Hp(c.version);return M=c.hasCommittedMutations,new eo(null,new z0(P,B),null,M,y,b)}if(c.isUnknownDocument()){var G=c.key.path.toArray(),te=Hp(c.version);return new eo(new oT(G,te),null,null,!0,y,b)}return Fn()}function Y0(d){var c=d.toTimestamp();return[c.seconds,c.nanoseconds]}function lT(d){var c=new Li(d[0],d[1]);return zn.fromTimestamp(c)}function Hp(d){var c=d.toTimestamp();return new j0(c.seconds,c.nanoseconds)}function Kl(d){var c=new Li(d.seconds,d.nanoseconds);return zn.fromTimestamp(c)}function Tg(d,c){for(var p=(c.baseMutations||[]).map(function(B){return zi(d.Lt,B)}),y=0;y<c.mutations.length-1;++y)y+1<c.mutations.length&&void 0!==c.mutations[y+1].transform&&(c.mutations[y].updateTransforms=c.mutations[y+1].transform.fieldTransforms,c.mutations.splice(y+1,1),++y);var M=c.mutations.map(function(B){return zi(d.Lt,B)}),P=Li.fromMillis(c.localWriteTimeMs);return new W0(c.batchId,P,p,M)}function f_(d){var c,p,y=Kl(d.readTime),b=void 0!==d.lastLimboFreeSnapshotVersion?Kl(d.lastLimboFreeSnapshotVersion):zn.min();return void 0!==d.query.documents?(Ft(1===(p=d.query).documents.length),c=fo(ql(se(p.documents[0])))):c=fo(Lu(d.query)),new Vp(c,d.targetId,0,d.lastListenSequenceNumber,y,b,Xr.fromBase64String(d.resumeToken))}function cT(d,c){var p,y=Hp(c.snapshotVersion),b=Hp(c.lastLimboFreeSnapshotVersion);p=jr(c.target)?jo(d.Lt,c.target):gl(d.Lt,c.target);var E=c.resumeToken.toBase64();return new va(c.targetId,kc(c.target),y,E,c.sequenceNumber,b,p)}function Cv(d){var c=Lu({parent:d.parent,structuredQuery:d.structuredQuery});return"LAST"===d.limitType?xp(c,c.limit,"L"):c}var ml=function(){function d(){}return d.prototype.getBundleMetadata=function(c,p){return wn(c).get(p).next(function(y){if(y)return{id:(b=y).bundleId,createTime:Kl(b.createTime),version:b.version};var b})},d.prototype.saveBundleMetadata=function(c,p){return wn(c).put({bundleId:(y=p).id,createTime:Hp(mo(y.createTime)),version:y.version});var y},d.prototype.getNamedQuery=function(c,p){return Eg(c).get(p).next(function(y){if(y)return{name:(b=y).name,query:Cv(b.bundledQuery),readTime:Kl(b.readTime)};var b})},d.prototype.saveNamedQuery=function(c,p){return Eg(c).put({name:(y=p).name,readTime:Hp(mo(y.readTime)),bundledQuery:y.bundledQuery});var y},d}();function wn(d){return bs(d,Uc.store)}function Eg(d){return bs(d,rh.store)}var ii=function(){function d(){this.Bt=new ch}return d.prototype.addToCollectionParentIndex=function(c,p){return this.Bt.add(p),qt.resolve()},d.prototype.getCollectionParents=function(c,p){return qt.resolve(this.Bt.getEntries(p))},d}(),ch=function(){function d(){this.index={}}return d.prototype.add=function(c){var p=c.lastSegment(),y=c.popLast(),b=this.index[p]||new Or(_i.comparator),E=!b.has(y);return this.index[p]=b.add(y),E},d.prototype.has=function(c){var p=c.lastSegment(),y=c.popLast(),b=this.index[p];return b&&b.has(y)},d.prototype.getEntries=function(c){return(this.index[c]||new Or(_i.comparator)).toArray()},d}(),J0=function(){function d(){this.qt=new ch}return d.prototype.addToCollectionParentIndex=function(c,p){var y=this;if(!this.qt.has(p)){var b=p.lastSegment(),E=p.popLast();c.addOnCommittedListener(function(){y.qt.add(p)});var M={collectionId:b,parent:Va(E)};return Bp(c).put(M)}return qt.resolve()},d.prototype.getCollectionParents=function(c,p){var y=[],b=IDBKeyRange.bound([p,""],[Ic(p),""],!1,!0);return Bp(c).Nt(b).next(function(E){for(var M=0,P=E;M<P.length;M++){var B=P[M];if(B.collectionId!==p)break;y.push(Hc(B.parent))}return y})},d}();function Bp(d){return bs(d,Cg.store)}var Up={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ua=function(){function d(c,p,y){this.cacheSizeCollectionThreshold=c,this.percentileToCollect=p,this.maximumSequenceNumbersToCollect=y}return d.withCacheSize=function(c){return new d(c,d.DEFAULT_COLLECTION_PERCENTILE,d.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},d}();function uh(d,c,p){var y=d.store(mr.store),b=d.store(Rs.store),E=[],M=IDBKeyRange.only(p.batchId),P=0,B=y.$t({range:M},function(ze,st,Vt){return P++,Vt.delete()});E.push(B.next(function(){Ft(1===P)}));for(var G=[],te=0,fe=p.mutations;te<fe.length;te++){var ye=fe[te],qe=Rs.key(c,ye.key.path,p.batchId);E.push(b.delete(qe)),G.push(ye.key)}return qt.waitFor(E).next(function(){return G})}function Uu(d){if(!d)return 0;var c;if(d.document)c=d.document;else if(d.unknownDocument)c=d.unknownDocument;else{if(!d.noDocument)throw Fn();c=d.noDocument}return JSON.stringify(c).length}Ua.DEFAULT_COLLECTION_PERCENTILE=10,Ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ua.DEFAULT=new Ua(41943040,Ua.DEFAULT_COLLECTION_PERCENTILE,Ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ua.DISABLED=new Ua(-1,0,0);var uT=function(){function d(c,p,y,b){this.userId=c,this.R=p,this.Ut=y,this.referenceDelegate=b,this.Kt={}}return d.Qt=function(c,p,y,b){return Ft(""!==c.uid),new d(c.isAuthenticated()?c.uid:"",p,y,b)},d.prototype.checkEmpty=function(c){var p=!0,y=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ja(c).$t({index:mr.userMutationsIndex,range:y},function(b,E,M){p=!1,M.done()}).next(function(){return p})},d.prototype.addMutationBatch=function(c,p,y,b){var E=this,M=qr(c),P=ja(c);return P.add({}).next(function(B){Ft("number"==typeof B);for(var G=new W0(B,p,y,b),te=function(tn,Rn,Un){var li=Un.baseMutations.map(function(Zi){return Zn(tn.Lt,Zi)}),Di=Un.mutations.map(function(Zi){return Zn(tn.Lt,Zi)});return new mr(Rn,Un.batchId,Un.localWriteTime.toMillis(),li,Di)}(E.R,E.userId,G),fe=[],ye=new Or(function(tn,Rn){return hi(tn.canonicalString(),Rn.canonicalString())}),qe=0,ze=b;qe<ze.length;qe++){var st=ze[qe],Vt=Rs.key(E.userId,st.key.path,B);ye=ye.add(st.key.path.popLast()),fe.push(P.put(te)),fe.push(M.put(Vt,Rs.PLACEHOLDER))}return ye.forEach(function(tn){fe.push(E.Ut.addToCollectionParentIndex(c,tn))}),c.addOnCommittedListener(function(){E.Kt[B]=G.keys()}),qt.waitFor(fe).next(function(){return G})})},d.prototype.lookupMutationBatch=function(c,p){var y=this;return ja(c).get(p).next(function(b){return b?(Ft(b.userId===y.userId),Tg(y.R,b)):null})},d.prototype.jt=function(c,p){var y=this;return this.Kt[p]?qt.resolve(this.Kt[p]):this.lookupMutationBatch(c,p).next(function(b){if(b){var E=b.keys();return y.Kt[p]=E,E}return null})},d.prototype.getNextMutationBatchAfterBatchId=function(c,p){var y=this,b=p+1,E=IDBKeyRange.lowerBound([this.userId,b]),M=null;return ja(c).$t({index:mr.userMutationsIndex,range:E},function(P,B,G){B.userId===y.userId&&(Ft(B.batchId>=b),M=Tg(y.R,B)),G.done()}).next(function(){return M})},d.prototype.getHighestUnacknowledgedBatchId=function(c){var p=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),y=-1;return ja(c).$t({index:mr.userMutationsIndex,range:p,reverse:!0},function(b,E,M){y=E.batchId,M.done()}).next(function(){return y})},d.prototype.getAllMutationBatches=function(c){var p=this,y=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ja(c).Nt(mr.userMutationsIndex,y).next(function(b){return b.map(function(E){return Tg(p.R,E)})})},d.prototype.getAllMutationBatchesAffectingDocumentKey=function(c,p){var y=this,b=Rs.prefixForPath(this.userId,p.path),E=IDBKeyRange.lowerBound(b),M=[];return qr(c).$t({range:E},function(P,B,G){var te=P[0],ye=P[2],qe=Hc(P[1]);if(te===y.userId&&p.path.isEqual(qe))return ja(c).get(ye).next(function(ze){if(!ze)throw Fn();Ft(ze.userId===y.userId),M.push(Tg(y.R,ze))});G.done()}).next(function(){return M})},d.prototype.getAllMutationBatchesAffectingDocumentKeys=function(c,p){var y=this,b=new Or(hi),E=[];return p.forEach(function(M){var P=Rs.prefixForPath(y.userId,M.path),B=IDBKeyRange.lowerBound(P),G=qr(c).$t({range:B},function(te,fe,ye){var qe=te[0],st=te[2],Vt=Hc(te[1]);qe===y.userId&&M.path.isEqual(Vt)?b=b.add(st):ye.done()});E.push(G)}),qt.waitFor(E).next(function(){return y.Wt(c,b)})},d.prototype.getAllMutationBatchesAffectingQuery=function(c,p){var y=this,b=p.path,E=b.length+1,M=Rs.prefixForPath(this.userId,b),P=IDBKeyRange.lowerBound(M),B=new Or(hi);return qr(c).$t({range:P},function(G,te,fe){var ye=G[0],ze=G[2],st=Hc(G[1]);ye===y.userId&&b.isPrefixOf(st)?st.length===E&&(B=B.add(ze)):fe.done()}).next(function(){return y.Wt(c,B)})},d.prototype.Wt=function(c,p){var y=this,b=[],E=[];return p.forEach(function(M){E.push(ja(c).get(M).next(function(P){if(null===P)throw Fn();Ft(P.userId===y.userId),b.push(Tg(y.R,P))}))}),qt.waitFor(E).next(function(){return b})},d.prototype.removeMutationBatch=function(c,p){var y=this;return uh(c.Mt,this.userId,p).next(function(b){return c.addOnCommittedListener(function(){y.Gt(p.batchId)}),qt.forEach(b,function(E){return y.referenceDelegate.markPotentiallyOrphaned(c,E)})})},d.prototype.Gt=function(c){delete this.Kt[c]},d.prototype.performConsistencyCheck=function(c){var p=this;return this.checkEmpty(c).next(function(y){if(!y)return qt.resolve();var b=IDBKeyRange.lowerBound(Rs.prefixForUser(p.userId)),E=[];return qr(c).$t({range:b},function(M,P,B){if(M[0]===p.userId){var G=Hc(M[1]);E.push(G)}else B.done()}).next(function(){Ft(0===E.length)})})},d.prototype.containsKey=function(c,p){return Xo(c,this.userId,p)},d.prototype.zt=function(c){var p=this;return jc(c).get(this.userId).next(function(y){return y||new rr(p.userId,-1,"")})},d}();function Xo(d,c,p){var y=Rs.prefixForPath(c,p.path),b=y[1],E=IDBKeyRange.lowerBound(y),M=!1;return qr(d).$t({range:E,Ft:!0},function(P,B,G){P[0]===c&&P[1]===b&&(M=!0),G.done()}).next(function(){return M})}function ja(d){return bs(d,mr.store)}function qr(d){return bs(d,Rs.store)}function jc(d){return bs(d,rr.store)}var g_=function(){function d(c){this.Ht=c}return d.prototype.next=function(){return this.Ht+=2,this.Ht},d.Jt=function(){return new d(0)},d.Yt=function(){return new d(-1)},d}(),Q0=function(){function d(c,p){this.referenceDelegate=c,this.R=p}return d.prototype.allocateTargetId=function(c){var p=this;return this.Xt(c).next(function(y){var b=new g_(y.highestTargetId);return y.highestTargetId=b.next(),p.Zt(c,y).next(function(){return y.highestTargetId})})},d.prototype.getLastRemoteSnapshotVersion=function(c){return this.Xt(c).next(function(p){return zn.fromTimestamp(new Li(p.lastRemoteSnapshotVersion.seconds,p.lastRemoteSnapshotVersion.nanoseconds))})},d.prototype.getHighestSequenceNumber=function(c){return this.Xt(c).next(function(p){return p.highestListenSequenceNumber})},d.prototype.setTargetsMetadata=function(c,p,y){var b=this;return this.Xt(c).next(function(E){return E.highestListenSequenceNumber=p,y&&(E.lastRemoteSnapshotVersion=y.toTimestamp()),p>E.highestListenSequenceNumber&&(E.highestListenSequenceNumber=p),b.Zt(c,E)})},d.prototype.addTargetData=function(c,p){var y=this;return this.te(c,p).next(function(){return y.Xt(c).next(function(b){return b.targetCount+=1,y.ee(p,b),y.Zt(c,b)})})},d.prototype.updateTargetData=function(c,p){return this.te(c,p)},d.prototype.removeTargetData=function(c,p){var y=this;return this.removeMatchingKeysForTargetId(c,p.targetId).next(function(){return ju(c).delete(p.targetId)}).next(function(){return y.Xt(c)}).next(function(b){return Ft(b.targetCount>0),b.targetCount-=1,y.Zt(c,b)})},d.prototype.removeTargets=function(c,p,y){var b=this,E=0,M=[];return ju(c).$t(function(P,B){var G=f_(B);G.sequenceNumber<=p&&null===y.get(G.targetId)&&(E++,M.push(b.removeTargetData(c,G)))}).next(function(){return qt.waitFor(M)}).next(function(){return E})},d.prototype.forEachTarget=function(c,p){return ju(c).$t(function(y,b){var E=f_(b);p(E)})},d.prototype.Xt=function(c){return xg(c).get(Ba.key).next(function(p){return Ft(null!==p),p})},d.prototype.Zt=function(c,p){return xg(c).put(Ba.key,p)},d.prototype.te=function(c,p){return ju(c).put(cT(this.R,p))},d.prototype.ee=function(c,p){var y=!1;return c.targetId>p.highestTargetId&&(p.highestTargetId=c.targetId,y=!0),c.sequenceNumber>p.highestListenSequenceNumber&&(p.highestListenSequenceNumber=c.sequenceNumber,y=!0),y},d.prototype.getTargetCount=function(c){return this.Xt(c).next(function(p){return p.targetCount})},d.prototype.getTargetData=function(c,p){var y=kc(p),b=IDBKeyRange.bound([y,Number.NEGATIVE_INFINITY],[y,Number.POSITIVE_INFINITY]),E=null;return ju(c).$t({range:b,index:va.queryTargetsIndexName},function(M,P,B){var G=f_(P);Na(p,G.target)&&(E=G,B.done())}).next(function(){return E})},d.prototype.addMatchingKeys=function(c,p,y){var b=this,E=[],M=zu(c);return p.forEach(function(P){var B=Va(P.path);E.push(M.put(new vs(y,B))),E.push(b.referenceDelegate.addReference(c,y,P))}),qt.waitFor(E)},d.prototype.removeMatchingKeys=function(c,p,y){var b=this,E=zu(c);return qt.forEach(p,function(M){var P=Va(M.path);return qt.waitFor([E.delete([y,P]),b.referenceDelegate.removeReference(c,y,M)])})},d.prototype.removeMatchingKeysForTargetId=function(c,p){var y=zu(c),b=IDBKeyRange.bound([p],[p+1],!1,!0);return y.delete(b)},d.prototype.getMatchingKeysForTargetId=function(c,p){var y=IDBKeyRange.bound([p],[p+1],!1,!0),b=zu(c),E=ki();return b.$t({range:y,Ft:!0},function(M,P,B){var G=Hc(M[1]),te=new Mn(G);E=E.add(te)}).next(function(){return E})},d.prototype.containsKey=function(c,p){var y=Va(p.path),b=IDBKeyRange.bound([y],[Ic(y)],!1,!0),E=0;return zu(c).$t({index:vs.documentTargetsIndex,Ft:!0,range:b},function(M,P,B){0!==M[0]&&(E++,B.done())}).next(function(){return E>0})},d.prototype.lt=function(c,p){return ju(c).get(p).next(function(y){return y?f_(y):null})},d}();function ju(d){return bs(d,va.store)}function xg(d){return bs(d,Ba.store)}function zu(d){return bs(d,vs.store)}function Gu(d){return(0,V.mG)(this,void 0,void 0,function(){return(0,V.Jh)(this,function(c){if(d.code!==nt.FAILED_PRECONDITION||d.message!==G0)throw d;return Qt("LocalStore","Unexpectedly lost primary lease"),[2]})})}function jp(d,c){var y=d[1],E=c[1],M=hi(d[0],c[0]);return 0===M?hi(y,E):M}var Tv=function(){function d(c){this.ne=c,this.buffer=new Or(jp),this.se=0}return d.prototype.ie=function(){return++this.se},d.prototype.re=function(c){var p=[c,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(p);else{var y=this.buffer.last();jp(p,y)<0&&(this.buffer=this.buffer.delete(y).add(p))}},Object.defineProperty(d.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),d}(),dT=function(){function d(c,p){this.garbageCollector=c,this.asyncQueue=p,this.oe=!1,this.ce=null}return d.prototype.start=function(c){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(c)},d.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(d.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),d.prototype.ue=function(c){var p=this,y=this.oe?3e5:6e4;Qt("LruGarbageCollector","Garbage collection scheduled in "+y+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",y,function(){return(0,V.mG)(p,void 0,void 0,function(){var b;return(0,V.Jh)(this,function(E){switch(E.label){case 0:this.ce=null,this.oe=!0,E.label=1;case 1:return E.trys.push([1,3,,7]),[4,c.collectGarbage(this.garbageCollector)];case 2:return E.sent(),[3,7];case 3:return Bu(b=E.sent())?(Qt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",b),[3,6]):[3,4];case 4:return[4,Gu(b)];case 5:E.sent(),E.label=6;case 6:return[3,7];case 7:return[4,this.ue(c)];case 8:return E.sent(),[2]}})})})},d}(),es=function(){function d(c,p){this.ae=c,this.params=p}return d.prototype.calculateTargetCount=function(c,p){return this.ae.he(c).next(function(y){return Math.floor(p/100*y)})},d.prototype.nthSequenceNumber=function(c,p){var y=this;if(0===p)return qt.resolve(gs.o);var b=new Tv(p);return this.ae.forEachTarget(c,function(E){return b.re(E.sequenceNumber)}).next(function(){return y.ae.le(c,function(E){return b.re(E)})}).next(function(){return b.maxValue})},d.prototype.removeTargets=function(c,p,y){return this.ae.removeTargets(c,p,y)},d.prototype.removeOrphanedDocuments=function(c,p){return this.ae.removeOrphanedDocuments(c,p)},d.prototype.collect=function(c,p){var y=this;return-1===this.params.cacheSizeCollectionThreshold?(Qt("LruGarbageCollector","Garbage collection skipped; disabled"),qt.resolve(Up)):this.getCacheSize(c).next(function(b){return b<y.params.cacheSizeCollectionThreshold?(Qt("LruGarbageCollector","Garbage collection skipped; Cache size "+b+" is lower than threshold "+y.params.cacheSizeCollectionThreshold),Up):y.fe(c,p)})},d.prototype.getCacheSize=function(c){return this.ae.getCacheSize(c)},d.prototype.fe=function(c,p){var y,b,E,M,P,B,G,te=this,fe=Date.now();return this.calculateTargetCount(c,this.params.percentileToCollect).next(function(ye){return ye>te.params.maximumSequenceNumbersToCollect?(Qt("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+te.params.maximumSequenceNumbersToCollect+" from "+ye),b=te.params.maximumSequenceNumbersToCollect):b=ye,M=Date.now(),te.nthSequenceNumber(c,b)}).next(function(ye){return y=ye,P=Date.now(),te.removeTargets(c,y,p)}).next(function(ye){return E=ye,B=Date.now(),te.removeOrphanedDocuments(c,y)}).next(function(ye){return G=Date.now(),Eu()<=_e.in.DEBUG&&Qt("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(M-fe)+"ms\n\tDetermined least recently used "+b+" in "+(P-M)+"ms\n\tRemoved "+E+" targets in "+(B-P)+"ms\n\tRemoved "+ye+" documents in "+(G-B)+"ms\nTotal Duration: "+(G-fe)+"ms"),qt.resolve({didRun:!0,sequenceNumbersCollected:b,targetsRemoved:E,documentsRemoved:ye})})},d}(),X0=function(){function d(c,p){this.db=c,this.garbageCollector=new es(this,p)}return d.prototype.he=function(c){var p=this.de(c);return this.db.getTargetCache().getTargetCount(c).next(function(y){return p.next(function(b){return y+b})})},d.prototype.de=function(c){var p=0;return this.le(c,function(y){p++}).next(function(){return p})},d.prototype.forEachTarget=function(c,p){return this.db.getTargetCache().forEachTarget(c,p)},d.prototype.le=function(c,p){return this.we(c,function(y,b){return p(b)})},d.prototype.addReference=function(c,p,y){return ts(c,y)},d.prototype.removeReference=function(c,p,y){return ts(c,y)},d.prototype.removeTargets=function(c,p,y){return this.db.getTargetCache().removeTargets(c,p,y)},d.prototype.markPotentiallyOrphaned=function(c,p){return ts(c,p)},d.prototype._e=function(c,p){return b=p,E=!1,jc(y=c).Ot(function(M){return Xo(y,M,b).next(function(P){return P&&(E=!0),qt.resolve(!P)})}).next(function(){return E});var y,b,E},d.prototype.removeOrphanedDocuments=function(c,p){var y=this,b=this.db.getRemoteDocumentCache().newChangeBuffer(),E=[],M=0;return this.we(c,function(P,B){if(B<=p){var G=y._e(c,P).next(function(te){if(!te)return M++,b.getEntry(c,P).next(function(){return b.removeEntry(P),zu(c).delete([0,Va(P.path)])})});E.push(G)}}).next(function(){return qt.waitFor(E)}).next(function(){return b.apply(c)}).next(function(){return M})},d.prototype.removeTarget=function(c,p){var y=p.withSequenceNumber(c.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(c,y)},d.prototype.updateLimboDocument=function(c,p){return ts(c,p)},d.prototype.we=function(c,p){var y,b=zu(c),E=gs.o;return b.$t({index:vs.documentTargetsIndex},function(M,P){var G=P.path,te=P.sequenceNumber;0===M[0]?(E!==gs.o&&p(new Mn(Hc(y)),E),E=te,y=G):E=gs.o}).next(function(){E!==gs.o&&p(new Mn(Hc(y)),E)})},d.prototype.getCacheSize=function(c){return this.db.getRemoteDocumentCache().getSize(c)},d}();function ts(d,c){return zu(d).put((y=d.currentSequenceNumber,new vs(0,Va(c.path),y)));var y}var zp=function(){function d(c,p){this.mapKeyFn=c,this.equalsFn=p,this.inner={}}return d.prototype.get=function(c){var p=this.mapKeyFn(c),y=this.inner[p];if(void 0!==y)for(var b=0,E=y;b<E.length;b++){var M=E[b],B=M[1];if(this.equalsFn(M[0],c))return B}},d.prototype.has=function(c){return void 0!==this.get(c)},d.prototype.set=function(c,p){var y=this.mapKeyFn(c),b=this.inner[y];if(void 0!==b){for(var E=0;E<b.length;E++)if(this.equalsFn(b[E][0],c))return void(b[E]=[c,p]);b.push([c,p])}else this.inner[y]=[[c,p]]},d.prototype.delete=function(c){var p=this.mapKeyFn(c),y=this.inner[p];if(void 0===y)return!1;for(var b=0;b<y.length;b++)if(this.equalsFn(y[b][0],c))return 1===y.length?delete this.inner[p]:y.splice(b,1),!0;return!1},d.prototype.forEach=function(c){xu(this.inner,function(p,y){for(var b=0,E=y;b<E.length;b++){var M=E[b];c(M[0],M[1])}})},d.prototype.isEmpty=function(){return Gd(this.inner)},d}(),ew=function(){function d(){this.changes=new zp(function(c){return c.toString()},function(c,p){return c.isEqual(p)}),this.changesApplied=!1}return d.prototype.getReadTime=function(c){var p=this.changes.get(c);return p?p.readTime:zn.min()},d.prototype.addEntry=function(c,p){this.assertNotApplied(),this.changes.set(c.key,{document:c,readTime:p})},d.prototype.removeEntry=function(c,p){void 0===p&&(p=null),this.assertNotApplied(),this.changes.set(c,{document:re.newInvalidDocument(c),readTime:p})},d.prototype.getEntry=function(c,p){this.assertNotApplied();var y=this.changes.get(p);return void 0!==y?qt.resolve(y.document):this.getFromCache(c,p)},d.prototype.getEntries=function(c,p){return this.getAllFromCache(c,p)},d.prototype.apply=function(c){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(c)},d.prototype.assertNotApplied=function(){},d}(),tw=function(){function d(c,p){this.R=c,this.Ut=p}return d.prototype.addEntry=function(c,p,y){return _l(c).put(dh(p),y)},d.prototype.removeEntry=function(c,p){var y=_l(c),b=dh(p);return y.delete(b)},d.prototype.updateMetadata=function(c,p){var y=this;return this.getMetadata(c).next(function(b){return b.byteSize+=p,y.me(c,b)})},d.prototype.getEntry=function(c,p){var y=this;return _l(c).get(dh(p)).next(function(b){return y.ye(p,b)})},d.prototype.ge=function(c,p){var y=this;return _l(c).get(dh(p)).next(function(b){return{document:y.ye(p,b),size:Uu(b)}})},d.prototype.getEntries=function(c,p){var y=this,b=go();return this.pe(c,p,function(E,M){var P=y.ye(E,M);b=b.insert(E,P)}).next(function(){return b})},d.prototype.Ee=function(c,p){var y=this,b=go(),E=new Ao(Mn.comparator);return this.pe(c,p,function(M,P){var B=y.ye(M,P);b=b.insert(M,B),E=E.insert(M,Uu(P))}).next(function(){return{documents:b,Te:E}})},d.prototype.pe=function(c,p,y){if(p.isEmpty())return qt.resolve();var b=IDBKeyRange.bound(p.first().path.toArray(),p.last().path.toArray()),E=p.getIterator(),M=E.getNext();return _l(c).$t({range:b},function(P,B,G){for(var te=Mn.fromSegments(P);M&&Mn.comparator(M,te)<0;)y(M,null),M=E.getNext();M&&M.isEqual(te)&&(y(M,B),M=E.hasNext()?E.getNext():null),M?G.Ct(M.path.toArray()):G.done()}).next(function(){for(;M;)y(M,null),M=E.hasNext()?E.getNext():null})},d.prototype.getDocumentsMatchingQuery=function(c,p,y){var b=this,E=go(),M=p.path.length+1,P={};if(y.isEqual(zn.min())){var B=p.path.toArray();P.range=IDBKeyRange.lowerBound(B)}else{var G=p.path.toArray(),te=Y0(y);P.range=IDBKeyRange.lowerBound([G,te],!0),P.index=eo.collectionReadTimeIndex}return _l(c).$t(P,function(fe,ye,qe){if(fe.length===M){var ze=bv(b.R,ye);p.path.isPrefixOf(ze.key.path)?Rc(p,ze)&&(E=E.insert(ze.key,ze)):qe.done()}}).next(function(){return E})},d.prototype.newChangeBuffer=function(c){return new nw(this,!!c&&c.trackRemovals)},d.prototype.getSize=function(c){return this.getMetadata(c).next(function(p){return p.byteSize})},d.prototype.getMetadata=function(c){return m_(c).get(Bc.key).next(function(p){return Ft(!!p),p})},d.prototype.me=function(c,p){return m_(c).put(Bc.key,p)},d.prototype.ye=function(c,p){if(p){var y=bv(this.R,p);if(!y.isNoDocument()||!y.version.isEqual(zn.min()))return y}return re.newInvalidDocument(c)},d}(),nw=function(d){function c(p,y){var b=this;return(b=d.call(this)||this).Ie=p,b.trackRemovals=y,b.Ae=new zp(function(E){return E.toString()},function(E,M){return E.isEqual(M)}),b}return(0,V.ZT)(c,d),c.prototype.applyChanges=function(p){var y=this,b=[],E=0,M=new Or(function(P,B){return hi(P.canonicalString(),B.canonicalString())});return this.changes.forEach(function(P,B){var G=y.Ae.get(P);if(B.document.isValidDocument()){var te=wv(y.Ie.R,B.document,y.getReadTime(P));M=M.add(P.path.popLast());var fe=Uu(te);E+=fe-G,b.push(y.Ie.addEntry(p,P,te))}else if(E-=G,y.trackRemovals){var ye=wv(y.Ie.R,re.newNoDocument(P,zn.min()),y.getReadTime(P));b.push(y.Ie.addEntry(p,P,ye))}else b.push(y.Ie.removeEntry(p,P))}),M.forEach(function(P){b.push(y.Ie.Ut.addToCollectionParentIndex(p,P))}),b.push(this.Ie.updateMetadata(p,E)),qt.waitFor(b)},c.prototype.getFromCache=function(p,y){var b=this;return this.Ie.ge(p,y).next(function(E){return b.Ae.set(y,E.size),E.document})},c.prototype.getAllFromCache=function(p,y){var b=this;return this.Ie.Ee(p,y).next(function(E){var M=E.documents;return E.Te.forEach(function(P,B){b.Ae.set(P,B)}),M})},c}(ew);function m_(d){return bs(d,Bc.store)}function _l(d){return bs(d,eo.store)}function dh(d){return d.path.toArray()}var iw=function(){function d(c){this.R=c}return d.prototype.Rt=function(c,p,y,b){var E=this;Ft(y<b&&y>=0&&b<=11);var B,M=new Z0("createOrUpgrade",p);y<1&&b>=1&&(c.createObjectStore(Ha.store),(B=c).createObjectStore(rr.store,{keyPath:rr.keyPath}),B.createObjectStore(mr.store,{keyPath:mr.keyPath,autoIncrement:!0}).createIndex(mr.userMutationsIndex,mr.userMutationsKeyPath,{unique:!0}),B.createObjectStore(Rs.store),Ev(c),function(B){B.createObjectStore(eo.store)}(c));var P=qt.resolve();return y<3&&b>=3&&(0!==y&&(function(B){B.deleteObjectStore(vs.store),B.deleteObjectStore(va.store),B.deleteObjectStore(Ba.store)}(c),Ev(c)),P=P.next(function(){return function(B){var G=B.store(Ba.store),te=new Ba(0,0,zn.min().toTimestamp(),0);return G.put(Ba.key,te)}(M)})),y<4&&b>=4&&(0!==y&&(P=P.next(function(){return function(B,G){return G.store(mr.store).Nt().next(function(te){B.deleteObjectStore(mr.store),B.createObjectStore(mr.store,{keyPath:mr.keyPath,autoIncrement:!0}).createIndex(mr.userMutationsIndex,mr.userMutationsKeyPath,{unique:!0});var fe=G.store(mr.store),ye=te.map(function(qe){return fe.put(qe)});return qt.waitFor(ye)})}(c,M)})),P=P.next(function(){!function(B){B.createObjectStore(ih.store,{keyPath:ih.keyPath})}(c)})),y<5&&b>=5&&(P=P.next(function(){return E.Re(M)})),y<6&&b>=6&&(P=P.next(function(){return function(B){B.createObjectStore(Bc.store)}(c),E.be(M)})),y<7&&b>=7&&(P=P.next(function(){return E.ve(M)})),y<8&&b>=8&&(P=P.next(function(){return E.Pe(c,M)})),y<9&&b>=9&&(P=P.next(function(){(function(B){B.objectStoreNames.contains("remoteDocumentChanges")&&B.deleteObjectStore("remoteDocumentChanges")})(c),function(B){var G=B.objectStore(eo.store);G.createIndex(eo.readTimeIndex,eo.readTimeIndexPath,{unique:!1}),G.createIndex(eo.collectionReadTimeIndex,eo.collectionReadTimeIndexPath,{unique:!1})}(p)})),y<10&&b>=10&&(P=P.next(function(){return E.Ve(M)})),y<11&&b>=11&&(P=P.next(function(){(function(B){B.createObjectStore(Uc.store,{keyPath:Uc.keyPath})})(c),function(B){B.createObjectStore(rh.store,{keyPath:rh.keyPath})}(c)})),P},d.prototype.be=function(c){var p=0;return c.store(eo.store).$t(function(y,b){p+=Uu(b)}).next(function(){var y=new Bc(p);return c.store(Bc.store).put(Bc.key,y)})},d.prototype.Re=function(c){var p=this,y=c.store(rr.store),b=c.store(mr.store);return y.Nt().next(function(E){return qt.forEach(E,function(M){var P=IDBKeyRange.bound([M.userId,-1],[M.userId,M.lastAcknowledgedBatchId]);return b.Nt(mr.userMutationsIndex,P).next(function(B){return qt.forEach(B,function(G){Ft(G.userId===M.userId);var te=Tg(p.R,G);return uh(c,M.userId,te).next(function(){})})})})})},d.prototype.ve=function(c){var p=c.store(vs.store),y=c.store(eo.store);return c.store(Ba.store).get(Ba.key).next(function(b){var E=[];return y.$t(function(M,P){var B=new _i(M),G=[0,Va(B)];E.push(p.get(G).next(function(te){return te?qt.resolve():p.put(new vs(0,Va(B),b.highestListenSequenceNumber))}))}).next(function(){return qt.waitFor(E)})})},d.prototype.Pe=function(c,p){c.createObjectStore(Cg.store,{keyPath:Cg.keyPath});var y=p.store(Cg.store),b=new ch,E=function(M){if(b.add(M)){var P=M.lastSegment(),B=M.popLast();return y.put({collectionId:P,parent:Va(B)})}};return p.store(eo.store).$t({Ft:!0},function(M,P){var B=new _i(M);return E(B.popLast())}).next(function(){return p.store(Rs.store).$t({Ft:!0},function(M,P){var G=Hc(M[1]);return E(G.popLast())})})},d.prototype.Ve=function(c){var p=this,y=c.store(va.store);return y.$t(function(b,E){var M=f_(E),P=cT(p.R,M);return y.put(P)})},d}();function Ev(d){d.createObjectStore(vs.store,{keyPath:vs.keyPath}).createIndex(vs.documentTargetsIndex,vs.documentTargetsKeyPath,{unique:!0}),d.createObjectStore(va.store,{keyPath:va.keyPath}).createIndex(va.queryTargetsIndexName,va.queryTargetsKeyPath,{unique:!0}),d.createObjectStore(Ba.store)}var Yl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rw=function(){function d(c,p,y,b,E,M,P,B,G,te){if(this.allowTabSynchronization=c,this.persistenceKey=p,this.clientId=y,this.Se=E,this.window=M,this.document=P,this.De=G,this.Ce=te,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(fe){return Promise.resolve()},!d.yt())throw new Rt(nt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new X0(this,b),this.Le=p+"main",this.R=new lh(B),this.Be=new oh(this.Le,11,new iw(this.R)),this.qe=new Q0(this.referenceDelegate,this.R),this.Ut=new J0,this.Ue=new tw(this.R,this.Ut),this.Ke=new ml,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===te&&Qi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return d.prototype.start=function(){var c=this;return this.je().then(function(){if(!c.isPrimary&&!c.allowTabSynchronization)throw new Rt(nt.FAILED_PRECONDITION,Yl);return c.We(),c.Ge(),c.ze(),c.runTransaction("getHighestListenSequenceNumber","readonly",function(p){return c.qe.getHighestSequenceNumber(p)})}).then(function(p){c.Ne=new gs(p,c.De)}).then(function(){c.xe=!0}).catch(function(p){return c.Be&&c.Be.close(),Promise.reject(p)})},d.prototype.He=function(c){var p=this;return this.Me=function(y){return(0,V.mG)(p,void 0,void 0,function(){return(0,V.Jh)(this,function(b){return this.started?[2,c(y)]:[2]})})},c(this.isPrimary)},d.prototype.setDatabaseDeletedListener=function(c){var p=this;this.Be.vt(function(y){return(0,V.mG)(p,void 0,void 0,function(){return(0,V.Jh)(this,function(b){switch(b.label){case 0:return null===y.newVersion?[4,c()]:[3,2];case 1:b.sent(),b.label=2;case 2:return[2]}})})})},d.prototype.setNetworkEnabled=function(c){var p=this;this.networkEnabled!==c&&(this.networkEnabled=c,this.Se.enqueueAndForget(function(){return(0,V.mG)(p,void 0,void 0,function(){return(0,V.Jh)(this,function(y){switch(y.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:y.sent(),y.label=2;case 2:return[2]}})})}))},d.prototype.je=function(){var c=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(p){return Gc(p).put(new ih(c.clientId,Date.now(),c.networkEnabled,c.inForeground)).next(function(){if(c.isPrimary)return c.Je(p).next(function(y){y||(c.isPrimary=!1,c.Se.enqueueRetryable(function(){return c.Me(!1)}))})}).next(function(){return c.Ye(p)}).next(function(y){return c.isPrimary&&!y?c.Xe(p).next(function(){return!1}):!!y&&c.Ze(p).next(function(){return!0})})}).catch(function(p){if(Bu(p))return Qt("IndexedDbPersistence","Failed to extend owner lease: ",p),c.isPrimary;if(!c.allowTabSynchronization)throw p;return Qt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",p),!1}).then(function(p){c.isPrimary!==p&&c.Se.enqueueRetryable(function(){return c.Me(p)}),c.isPrimary=p})},d.prototype.Je=function(c){var p=this;return zc(c).get(Ha.key).next(function(y){return qt.resolve(p.tn(y))})},d.prototype.en=function(c){return Gc(c).delete(this.clientId)},d.prototype.nn=function(){return(0,V.mG)(this,void 0,void 0,function(){var c,p,y,E=this;return(0,V.Jh)(this,function(M){switch(M.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(P){var B=bs(P,ih.store);return B.Nt().next(function(G){var te=E.rn(G,18e5),fe=G.filter(function(ye){return-1===te.indexOf(ye)});return qt.forEach(fe,function(ye){return B.delete(ye.clientId)}).next(function(){return fe})})}).catch(function(){return[]})]);case 1:if(c=M.sent(),this.Qe)for(p=0,y=c;p<y.length;p++)this.Qe.removeItem(this.on(y[p].clientId));M.label=2;case 2:return[2]}})})},d.prototype.ze=function(){var c=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return c.je().then(function(){return c.nn()}).then(function(){return c.ze()})})},d.prototype.tn=function(c){return!!c&&c.ownerId===this.clientId},d.prototype.Ye=function(c){var p=this;return this.Ce?qt.resolve(!0):zc(c).get(Ha.key).next(function(y){if(null!==y&&p.sn(y.leaseTimestampMs,5e3)&&!p.cn(y.ownerId)){if(p.tn(y)&&p.networkEnabled)return!0;if(!p.tn(y)){if(!y.allowTabSynchronization)throw new Rt(nt.FAILED_PRECONDITION,Yl);return!1}}return!(!p.networkEnabled||!p.inForeground)||Gc(c).Nt().next(function(b){return void 0===p.rn(b,5e3).find(function(E){return!(p.clientId===E.clientId||!(!p.networkEnabled&&E.networkEnabled||!p.inForeground&&E.inForeground&&p.networkEnabled===E.networkEnabled))})})}).next(function(y){return p.isPrimary!==y&&Qt("IndexedDbPersistence","Client "+(y?"is":"is not")+" eligible for a primary lease."),y})},d.prototype.shutdown=function(){return(0,V.mG)(this,void 0,void 0,function(){var c=this;return(0,V.Jh)(this,function(p){switch(p.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Ha.store,ih.store],function(y){var b=new vv(y,gs.o);return c.Xe(b).next(function(){return c.en(b)})})];case 1:return p.sent(),this.Be.close(),this.ln(),[2]}})})},d.prototype.rn=function(c,p){var y=this;return c.filter(function(b){return y.sn(b.updateTimeMs,p)&&!y.cn(b.clientId)})},d.prototype.fn=function(){var c=this;return this.runTransaction("getActiveClients","readonly",function(p){return Gc(p).Nt().next(function(y){return c.rn(y,18e5).map(function(b){return b.clientId})})})},Object.defineProperty(d.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),d.prototype.getMutationQueue=function(c){return uT.Qt(c,this.R,this.Ut,this.referenceDelegate)},d.prototype.getTargetCache=function(){return this.qe},d.prototype.getRemoteDocumentCache=function(){return this.Ue},d.prototype.getIndexManager=function(){return this.Ut},d.prototype.getBundleCache=function(){return this.Ke},d.prototype.runTransaction=function(c,p,y){var E,b=this;return Qt("IndexedDbPersistence","Starting transaction:",c),this.Be.runTransaction(c,"readonly"===p?"readonly":"readwrite",sT,function(P){return E=new vv(P,b.Ne?b.Ne.next():gs.o),"readwrite-primary"===p?b.Je(E).next(function(B){return!!B||b.Ye(E)}).next(function(B){if(!B)throw Qi("Failed to obtain primary lease for action '"+c+"'."),b.isPrimary=!1,b.Se.enqueueRetryable(function(){return b.Me(!1)}),new Rt(nt.FAILED_PRECONDITION,G0);return y(E)}).next(function(B){return b.Ze(E).next(function(){return B})}):b.dn(E).next(function(){return y(E)})}).then(function(P){return E.raiseOnCommittedEvent(),P})},d.prototype.dn=function(c){var p=this;return zc(c).get(Ha.key).next(function(y){if(null!==y&&p.sn(y.leaseTimestampMs,5e3)&&!p.cn(y.ownerId)&&!p.tn(y)&&!(p.Ce||p.allowTabSynchronization&&y.allowTabSynchronization))throw new Rt(nt.FAILED_PRECONDITION,Yl)})},d.prototype.Ze=function(c){var p=new Ha(this.clientId,this.allowTabSynchronization,Date.now());return zc(c).put(Ha.key,p)},d.yt=function(){return oh.yt()},d.prototype.Xe=function(c){var p=this,y=zc(c);return y.get(Ha.key).next(function(b){return p.tn(b)?(Qt("IndexedDbPersistence","Releasing primary lease."),y.delete(Ha.key)):qt.resolve()})},d.prototype.sn=function(c,p){var y=Date.now();return!(c<y-p||c>y&&(Qi("Detected an update time that is in the future: "+c+" > "+y),1))},d.prototype.We=function(){var c=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){c.Se.enqueueAndForget(function(){return c.inForeground="visible"===c.document.visibilityState,c.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},d.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},d.prototype.Ge=function(){var c,p=this;"function"==typeof(null===(c=this.window)||void 0===c?void 0:c.addEventListener)&&(this.ke=function(){p.un(),(0,W.G6)()&&navigator.appVersion.match("Version/14")&&p.Se.enterRestrictedMode(!0),p.Se.enqueueAndForget(function(){return p.shutdown()})},this.window.addEventListener("pagehide",this.ke))},d.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},d.prototype.cn=function(c){var p;try{var y=null!==(null===(p=this.Qe)||void 0===p?void 0:p.getItem(this.on(c)));return Qt("IndexedDbPersistence","Client '"+c+"' "+(y?"is":"is not")+" zombied in LocalStorage"),y}catch(b){return Qi("IndexedDbPersistence","Failed to get zombied client id.",b),!1}},d.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(c){Qi("Failed to set zombie client id.",c)}},d.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch{}},d.prototype.on=function(c){return"firestore_zombie_"+this.persistenceKey+"_"+c},d}();function zc(d){return bs(d,Ha.store)}function Gc(d){return bs(d,ih.store)}function xv(d,c){var p=d.projectId;return d.isDefaultDatabase||(p+="."+d.database),"firestore/"+c+"/"+p+"/"}var ow=function(d,c){this.progress=d,this.wn=c},Sg=function(){function d(c,p,y){this.Ue=c,this._n=p,this.Ut=y}return d.prototype.mn=function(c,p){var y=this;return this._n.getAllMutationBatchesAffectingDocumentKey(c,p).next(function(b){return y.yn(c,p,b)})},d.prototype.yn=function(c,p,y){return this.Ue.getEntry(c,p).next(function(b){for(var E=0,M=y;E<M.length;E++)M[E].applyToLocalView(b);return b})},d.prototype.gn=function(c,p){c.forEach(function(y,b){for(var E=0,M=p;E<M.length;E++)M[E].applyToLocalView(b)})},d.prototype.pn=function(c,p){var y=this;return this.Ue.getEntries(c,p).next(function(b){return y.En(c,b).next(function(){return b})})},d.prototype.En=function(c,p){var y=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(c,p).next(function(b){return y.gn(p,b)})},d.prototype.getDocumentsMatchingQuery=function(c,p,y){return Mn.isDocumentKey((b=p).path)&&null===b.collectionGroup&&0===b.filters.length?this.Tn(c,p.path):dg(p)?this.In(c,p,y):this.An(c,p,y);var b},d.prototype.Tn=function(c,p){return this.mn(c,new Mn(p)).next(function(y){var b=fl();return y.isFoundDocument()&&(b=b.insert(y.key,y)),b})},d.prototype.In=function(c,p,y){var b=this,E=p.collectionGroup,M=fl();return this.Ut.getCollectionParents(c,E).next(function(P){return qt.forEach(P,function(B){var te,fe,G=(te=p,fe=B.child(E),new Os(fe,null,te.explicitOrderBy.slice(),te.filters.slice(),te.limit,te.limitType,te.startAt,te.endAt));return b.An(c,G,y).next(function(te){te.forEach(function(fe,ye){M=M.insert(fe,ye)})})}).next(function(){return M})})},d.prototype.An=function(c,p,y){var b,E,M=this;return this.Ue.getDocumentsMatchingQuery(c,p,y).next(function(P){return b=P,M._n.getAllMutationBatchesAffectingQuery(c,p)}).next(function(P){return M.Rn(c,E=P,b).next(function(B){b=B;for(var G=0,te=E;G<te.length;G++)for(var fe=te[G],ye=0,qe=fe.mutations;ye<qe.length;ye++){var ze=qe[ye],st=ze.key,Vt=b.get(st);null==Vt&&(Vt=re.newInvalidDocument(st),b=b.insert(st,Vt)),Ap(ze,Vt,fe.localWriteTime),Vt.isFoundDocument()||(b=b.remove(st))}})}).next(function(){return b.forEach(function(P,B){Rc(p,B)||(b=b.remove(P))}),b})},d.prototype.Rn=function(c,p,y){for(var b=ki(),E=0,M=p;E<M.length;E++)for(var P=0,B=M[E].mutations;P<B.length;P++){var G=B[P];G instanceof Lc&&null===y.get(G.key)&&(b=b.add(G.key))}var te=y;return this.Ue.getEntries(c,b).next(function(fe){return fe.forEach(function(ye,qe){qe.isFoundDocument()&&(te=te.insert(ye,qe))}),te})},d}(),__=function(){function d(c,p,y,b){this.targetId=c,this.fromCache=p,this.bn=y,this.vn=b}return d.Pn=function(c,p){for(var y=ki(),b=ki(),E=0,M=p.docChanges;E<M.length;E++){var P=M[E];switch(P.type){case 0:y=y.add(P.doc.key);break;case 1:b=b.add(P.doc.key)}}return new d(c,p.fromCache,y,b)},d}(),y_=function(){function d(){}return d.prototype.Vn=function(c){this.Sn=c},d.prototype.getDocumentsMatchingQuery=function(c,p,y,b){var M,E=this;return 0===(M=p).filters.length&&null===M.limit&&null==M.startAt&&null==M.endAt&&(0===M.explicitOrderBy.length||1===M.explicitOrderBy.length&&M.explicitOrderBy[0].field.isKeyField())||y.isEqual(zn.min())?this.Dn(c,p):this.Sn.pn(c,b).next(function(M){var P=E.Cn(p,M);return(Ep(p)||Du(p))&&E.Nn(p.limitType,P,b,y)?E.Dn(c,p):(Eu()<=_e.in.DEBUG&&Qt("QueryEngine","Re-using previous result from %s to execute query: %s",y.toString(),Iu(p)),E.Sn.getDocumentsMatchingQuery(c,p,y).next(function(B){return P.forEach(function(G){B=B.insert(G.key,G)}),B}))})},d.prototype.Cn=function(c,p){var y=new Or(Dp(c));return p.forEach(function(b,E){Rc(c,E)&&(y=y.add(E))}),y},d.prototype.Nn=function(c,p,y,b){if(y.size!==p.size)return!0;var E="F"===c?p.last():p.first();return!!E&&(E.hasPendingWrites||E.version.compareTo(b)>0)},d.prototype.Dn=function(c,p){return Eu()<=_e.in.DEBUG&&Qt("QueryEngine","Using full collection scan to execute query:",Iu(p)),this.Sn.getDocumentsMatchingQuery(c,p,zn.min())},d}(),Sv=function(){function d(c,p,y,b){this.persistence=c,this.xn=p,this.R=b,this.kn=new Ao(hi),this.Fn=new zp(function(E){return kc(E)},Na),this.$n=zn.min(),this._n=c.getMutationQueue(y),this.On=c.getRemoteDocumentCache(),this.qe=c.getTargetCache(),this.Mn=new Sg(this.On,this._n,this.persistence.getIndexManager()),this.Ke=c.getBundleCache(),this.xn.Vn(this.Mn)}return d.prototype.collectGarbage=function(c){var p=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(y){return c.collect(y,p.kn)})},d}();function sw(d,c,p,y){return new Sv(d,c,p,y)}function aw(d,c){return(0,V.mG)(this,void 0,void 0,function(){var p,y,b,E;return(0,V.Jh)(this,function(M){switch(M.label){case 0:return p=It(d),y=p._n,b=p.Mn,[4,p.persistence.runTransaction("Handle user change","readonly",function(P){var B;return p._n.getAllMutationBatches(P).next(function(G){return B=G,y=p.persistence.getMutationQueue(c),b=new Sg(p.On,y,p.persistence.getIndexManager()),y.getAllMutationBatches(P)}).next(function(G){for(var te=[],fe=[],ye=ki(),qe=0,ze=B;qe<ze.length;qe++){var st=ze[qe];te.push(st.batchId);for(var Vt=0,tn=st.mutations;Vt<tn.length;Vt++)ye=ye.add(tn[Vt].key)}for(var Un=0,li=G;Un<li.length;Un++){var Di=li[Un];fe.push(Di.batchId);for(var Zi=0,vo=Di.mutations;Zi<vo.length;Zi++)ye=ye.add(vo[Zi].key)}return b.pn(P,ye).next(function(Nh){return{Ln:Nh,removedBatchIds:te,addedBatchIds:fe}})})})];case 1:return E=M.sent(),[2,(p._n=y,p.Mn=b,p.xn.Vn(p.Mn),E)]}})})}function Dg(d,c){var p=It(d);return p.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(y){var M,P,B,G,te,fe,ye,b=c.batch.keys(),E=p.On.newChangeBuffer({trackRemovals:!0});return(M=p,P=y,B=c,G=E,te=B.batch,fe=te.keys(),ye=qt.resolve(),fe.forEach(function(qe){ye=ye.next(function(){return G.getEntry(P,qe)}).next(function(ze){var st=B.docVersions.get(qe);Ft(null!==st),ze.version.compareTo(st)<0&&(te.applyToRemoteDocument(ze,B),ze.isValidDocument()&&G.addEntry(ze,B.commitVersion))})}),ye.next(function(){return M._n.removeMutationBatch(P,te)})).next(function(){return E.apply(y)}).next(function(){return p._n.performConsistencyCheck(y)}).next(function(){return p.Mn.pn(y,b)})})}function Dv(d){var c=It(d);return c.persistence.runTransaction("Get last remote snapshot version","readonly",function(p){return c.qe.getLastRemoteSnapshotVersion(p)})}function hT(d,c){var p=It(d),y=c.snapshotVersion,b=p.kn;return p.persistence.runTransaction("Apply remote event","readwrite-primary",function(E){var M=p.On.newChangeBuffer({trackRemovals:!0});b=p.kn;var P=[];c.targetChanges.forEach(function(te,fe){var st,Vt,tn,ye=b.get(fe);if(ye){P.push(p.qe.removeMatchingKeys(E,te.removedDocuments,fe).next(function(){return p.qe.addMatchingKeys(E,te.addedDocuments,fe)}));var qe=te.resumeToken;if(qe.approximateByteSize()>0){var ze=ye.withResumeToken(qe,y).withSequenceNumber(E.currentSequenceNumber);b=b.insert(fe,ze),st=ye,tn=te,Ft((Vt=ze).resumeToken.approximateByteSize()>0),(0===st.resumeToken.approximateByteSize()||Vt.snapshotVersion.toMicroseconds()-st.snapshotVersion.toMicroseconds()>=3e8||tn.addedDocuments.size+tn.modifiedDocuments.size+tn.removedDocuments.size>0)&&P.push(p.qe.updateTargetData(E,ze))}}});var B=go();if(c.documentUpdates.forEach(function(te,fe){c.resolvedLimboDocuments.has(te)&&P.push(p.persistence.referenceDelegate.updateLimboDocument(E,te))}),P.push(lw(E,M,c.documentUpdates,y,void 0).next(function(te){B=te})),!y.isEqual(zn.min())){var G=p.qe.getLastRemoteSnapshotVersion(E).next(function(te){return p.qe.setTargetsMetadata(E,E.currentSequenceNumber,y)});P.push(G)}return qt.waitFor(P).next(function(){return M.apply(E)}).next(function(){return p.Mn.En(E,B)}).next(function(){return B})}).then(function(E){return p.kn=b,E})}function lw(d,c,p,y,b){var E=ki();return p.forEach(function(M){return E=E.add(M)}),c.getEntries(d,E).next(function(M){var P=go();return p.forEach(function(B,G){var te=M.get(B),fe=b?.get(B)||y;G.isNoDocument()&&G.version.isEqual(zn.min())?(c.removeEntry(B,fe),P=P.insert(B,G)):!te.isValidDocument()||G.version.compareTo(te.version)>0||0===G.version.compareTo(te.version)&&te.hasPendingWrites?(c.addEntry(G,fe),P=P.insert(B,G)):Qt("LocalStore","Ignoring outdated watch update for ",B,". Current version:",te.version," Watch version:",G.version)}),P})}function ns(d,c){var p=It(d);return p.persistence.runTransaction("Get next mutation batch","readonly",function(y){return void 0===c&&(c=-1),p._n.getNextMutationBatchAfterBatchId(y,c)})}function Jl(d,c){var p=It(d);return p.persistence.runTransaction("Allocate target","readwrite",function(y){var b;return p.qe.getTargetData(y,c).next(function(E){return E?qt.resolve(b=E):p.qe.allocateTargetId(y).next(function(M){return b=new Vp(c,M,0,y.currentSequenceNumber),p.qe.addTargetData(y,b).next(function(){return b})})})}).then(function(y){var b=p.kn.get(y.targetId);return(null===b||y.snapshotVersion.compareTo(b.snapshotVersion)>0)&&(p.kn=p.kn.insert(y.targetId,y),p.Fn.set(c,y.targetId)),y})}function Gp(d,c,p){return(0,V.mG)(this,void 0,void 0,function(){var y,b,E,M;return(0,V.Jh)(this,function(P){switch(P.label){case 0:y=It(d),b=y.kn.get(c),E=p?"readwrite":"readwrite-primary",P.label=1;case 1:return P.trys.push([1,4,,5]),p?[3,3]:[4,y.persistence.runTransaction("Release target",E,function(B){return y.persistence.referenceDelegate.removeTarget(B,b)})];case 2:P.sent(),P.label=3;case 3:return[3,5];case 4:if(!Bu(M=P.sent()))throw M;return Qt("LocalStore","Failed to update sequence numbers for target "+c+": "+M),[3,5];case 5:return y.kn=y.kn.remove(c),y.Fn.delete(b.target),[2]}})})}function Zr(d,c,p){var y=It(d),b=zn.min(),E=ki();return y.persistence.runTransaction("Execute query","readonly",function(M){return(P=y,B=M,G=fo(c),te=It(P),fe=te.Fn.get(G),void 0!==fe?qt.resolve(te.kn.get(fe)):te.qe.getTargetData(B,G)).next(function(P){if(P)return b=P.lastLimboFreeSnapshotVersion,y.qe.getMatchingKeysForTargetId(M,P.targetId).next(function(B){E=B})}).next(function(){return y.xn.getDocumentsMatchingQuery(M,c,p?b:zn.min(),p?E:ki())}).next(function(P){return{documents:P,Bn:E}});var P,B,G,te,fe})}function v_(d,c){var p=It(d),y=It(p.qe),b=p.kn.get(c);return b?Promise.resolve(b.target):p.persistence.runTransaction("Get target data","readonly",function(E){return y.lt(E,c).next(function(M){return M?M.target:null})})}function Iv(d){var c=It(d);return c.persistence.runTransaction("Get new document changes","readonly",function(p){return b=p,E=c.$n,M=It(c.On),P=go(),B=Y0(E),G=_l(b),te=IDBKeyRange.lowerBound(B,!0),G.$t({index:eo.readTimeIndex,range:te},function(fe,ye){var qe=bv(M.R,ye);P=P.insert(qe.key,qe),B=ye.readTime}).next(function(){return{wn:P,readTime:lT(B)}});var b,E,M,P,B,G,te}).then(function(p){var y=p.wn;return c.$n=p.readTime,y})}function qp(d){return(0,V.mG)(this,void 0,void 0,function(){var c;return(0,V.Jh)(this,function(p){return[2,(c=It(d)).persistence.runTransaction("Synchronize last document change read time","readonly",function(y){return E=_l(y),M=zn.min(),E.$t({index:eo.readTimeIndex,reverse:!0},function(P,B,G){B.readTime&&(M=lT(B.readTime)),G.done()}).next(function(){return M});var E,M}).then(function(y){c.$n=y})]})})}function ko(d,c,p,y){return(0,V.mG)(this,void 0,void 0,function(){var b,E,M,P,B,G,te,fe,ye,qe;return(0,V.Jh)(this,function(ze){switch(ze.label){case 0:for(b=It(d),E=ki(),M=go(),P=c_(),B=0,G=p;B<G.length;B++)fe=c.qn((te=G[B]).metadata.name),te.document&&(E=E.add(fe)),M=M.insert(fe,c.Un(te)),P=P.insert(fe,c.Kn(te.metadata.readTime));return ye=b.On.newChangeBuffer({trackRemovals:!0}),[4,Jl(b,(st=y,fo(ql(_i.fromString("__bundle__/docs/"+st)))))];case 1:return qe=ze.sent(),[2,b.persistence.runTransaction("Apply bundle documents","readwrite",function(st){return lw(st,ye,M,zn.min(),P).next(function(Vt){return ye.apply(st),Vt}).next(function(Vt){return b.qe.removeMatchingKeysForTargetId(st,qe.targetId).next(function(){return b.qe.addMatchingKeys(st,E,qe.targetId)}).next(function(){return b.Mn.En(st,Vt)}).next(function(){return Vt})})})]}var st})})}function hh(d,c,p){return void 0===p&&(p=ki()),(0,V.mG)(this,void 0,void 0,function(){var y,b;return(0,V.Jh)(this,function(E){switch(E.label){case 0:return[4,Jl(d,fo(Cv(c.bundledQuery)))];case 1:return y=E.sent(),[2,(b=It(d)).persistence.runTransaction("Save named query","readwrite",function(M){var P=mo(c.readTime);if(y.snapshotVersion.compareTo(P)>=0)return b.Ke.saveNamedQuery(M,c);var B=y.withResumeToken(Xr.EMPTY_BYTE_STRING,P);return b.kn=b.kn.insert(B.targetId,B),b.qe.updateTargetData(M,B).next(function(){return b.qe.removeMatchingKeysForTargetId(M,y.targetId)}).next(function(){return b.qe.addMatchingKeys(M,p,y.targetId)}).next(function(){return b.Ke.saveNamedQuery(M,c)})})]}})})}var Ig=function(){function d(c){this.R=c,this.Qn=new Map,this.jn=new Map}return d.prototype.getBundleMetadata=function(c,p){return qt.resolve(this.Qn.get(p))},d.prototype.saveBundleMetadata=function(c,p){var y;return this.Qn.set(p.id,{id:(y=p).id,version:y.version,createTime:mo(y.createTime)}),qt.resolve()},d.prototype.getNamedQuery=function(c,p){return qt.resolve(this.jn.get(p))},d.prototype.saveNamedQuery=function(c,p){return this.jn.set(p.name,{name:(y=p).name,query:Cv(y.bundledQuery),readTime:mo(y.readTime)}),qt.resolve();var y},d}(),Mg=function(){function d(){this.Wn=new Or(_o.Gn),this.zn=new Or(_o.Hn)}return d.prototype.isEmpty=function(){return this.Wn.isEmpty()},d.prototype.addReference=function(c,p){var y=new _o(c,p);this.Wn=this.Wn.add(y),this.zn=this.zn.add(y)},d.prototype.Jn=function(c,p){var y=this;c.forEach(function(b){return y.addReference(b,p)})},d.prototype.removeReference=function(c,p){this.Yn(new _o(c,p))},d.prototype.Xn=function(c,p){var y=this;c.forEach(function(b){return y.removeReference(b,p)})},d.prototype.Zn=function(c){var p=this,y=new Mn(new _i([])),b=new _o(y,c),E=new _o(y,c+1),M=[];return this.zn.forEachInRange([b,E],function(P){p.Yn(P),M.push(P.key)}),M},d.prototype.ts=function(){var c=this;this.Wn.forEach(function(p){return c.Yn(p)})},d.prototype.Yn=function(c){this.Wn=this.Wn.delete(c),this.zn=this.zn.delete(c)},d.prototype.es=function(c){var p=new Mn(new _i([])),y=new _o(p,c),b=new _o(p,c+1),E=ki();return this.zn.forEachInRange([y,b],function(M){E=E.add(M.key)}),E},d.prototype.containsKey=function(c){var p=new _o(c,0),y=this.Wn.firstAfterOrEqual(p);return null!==y&&c.isEqual(y.key)},d}(),_o=function(){function d(c,p){this.key=c,this.ns=p}return d.Gn=function(c,p){return Mn.comparator(c.key,p.key)||hi(c.ns,p.ns)},d.Hn=function(c,p){return hi(c.ns,p.ns)||Mn.comparator(c.key,p.key)},d}(),Mv=function(){function d(c,p){this.Ut=c,this.referenceDelegate=p,this._n=[],this.ss=1,this.rs=new Or(_o.Gn)}return d.prototype.checkEmpty=function(c){return qt.resolve(0===this._n.length)},d.prototype.addMutationBatch=function(c,p,y,b){var E=this.ss;this.ss++;var M=new W0(E,p,y,b);this._n.push(M);for(var P=0,B=b;P<B.length;P++){var G=B[P];this.rs=this.rs.add(new _o(G.key,E)),this.Ut.addToCollectionParentIndex(c,G.key.path.popLast())}return qt.resolve(M)},d.prototype.lookupMutationBatch=function(c,p){return qt.resolve(this.os(p))},d.prototype.getNextMutationBatchAfterBatchId=function(c,p){var b=this.cs(p+1),E=b<0?0:b;return qt.resolve(this._n.length>E?this._n[E]:null)},d.prototype.getHighestUnacknowledgedBatchId=function(){return qt.resolve(0===this._n.length?-1:this.ss-1)},d.prototype.getAllMutationBatches=function(c){return qt.resolve(this._n.slice())},d.prototype.getAllMutationBatchesAffectingDocumentKey=function(c,p){var y=this,b=new _o(p,0),E=new _o(p,Number.POSITIVE_INFINITY),M=[];return this.rs.forEachInRange([b,E],function(P){var B=y.os(P.ns);M.push(B)}),qt.resolve(M)},d.prototype.getAllMutationBatchesAffectingDocumentKeys=function(c,p){var y=this,b=new Or(hi);return p.forEach(function(E){var M=new _o(E,0),P=new _o(E,Number.POSITIVE_INFINITY);y.rs.forEachInRange([M,P],function(B){b=b.add(B.ns)})}),qt.resolve(this.us(b))},d.prototype.getAllMutationBatchesAffectingQuery=function(c,p){var y=p.path,b=y.length+1,E=y;Mn.isDocumentKey(E)||(E=E.child(""));var M=new _o(new Mn(E),0),P=new Or(hi);return this.rs.forEachWhile(function(B){var G=B.key.path;return!!y.isPrefixOf(G)&&(G.length===b&&(P=P.add(B.ns)),!0)},M),qt.resolve(this.us(P))},d.prototype.us=function(c){var p=this,y=[];return c.forEach(function(b){var E=p.os(b);null!==E&&y.push(E)}),y},d.prototype.removeMutationBatch=function(c,p){var y=this;Ft(0===this.hs(p.batchId,"removed")),this._n.shift();var b=this.rs;return qt.forEach(p.mutations,function(E){var M=new _o(E.key,p.batchId);return b=b.delete(M),y.referenceDelegate.markPotentiallyOrphaned(c,E.key)}).next(function(){y.rs=b})},d.prototype.Gt=function(c){},d.prototype.containsKey=function(c,p){var y=new _o(p,0),b=this.rs.firstAfterOrEqual(y);return qt.resolve(p.isEqual(b&&b.key))},d.prototype.performConsistencyCheck=function(c){return qt.resolve()},d.prototype.hs=function(c,p){return this.cs(c)},d.prototype.cs=function(c){return 0===this._n.length?0:c-this._n[0].batchId},d.prototype.os=function(c){var p=this.cs(c);return p<0||p>=this._n.length?null:this._n[p]},d}(),cw=function(){function d(c,p){this.Ut=c,this.ls=p,this.docs=new Ao(Mn.comparator),this.size=0}return d.prototype.addEntry=function(c,p,y){var b=p.key,E=this.docs.get(b),M=E?E.size:0,P=this.ls(p);return this.docs=this.docs.insert(b,{document:p.clone(),size:P,readTime:y}),this.size+=P-M,this.Ut.addToCollectionParentIndex(c,b.path.popLast())},d.prototype.removeEntry=function(c){var p=this.docs.get(c);p&&(this.docs=this.docs.remove(c),this.size-=p.size)},d.prototype.getEntry=function(c,p){var y=this.docs.get(p);return qt.resolve(y?y.document.clone():re.newInvalidDocument(p))},d.prototype.getEntries=function(c,p){var y=this,b=go();return p.forEach(function(E){var M=y.docs.get(E);b=b.insert(E,M?M.document.clone():re.newInvalidDocument(E))}),qt.resolve(b)},d.prototype.getDocumentsMatchingQuery=function(c,p,y){for(var b=go(),E=new Mn(p.path.child("")),M=this.docs.getIteratorFrom(E);M.hasNext();){var P=M.getNext(),G=P.value,te=G.document,fe=G.readTime;if(!p.path.isPrefixOf(P.key.path))break;fe.compareTo(y)<=0||Rc(p,te)&&(b=b.insert(te.key,te.clone()))}return qt.resolve(b)},d.prototype.fs=function(c,p){return qt.forEach(this.docs,function(y){return p(y)})},d.prototype.newChangeBuffer=function(c){return new uw(this)},d.prototype.getSize=function(c){return qt.resolve(this.size)},d}(),uw=function(d){function c(p){var y=this;return(y=d.call(this)||this).Ie=p,y}return(0,V.ZT)(c,d),c.prototype.applyChanges=function(p){var y=this,b=[];return this.changes.forEach(function(E,M){M.document.isValidDocument()?b.push(y.Ie.addEntry(p,M.document,y.getReadTime(E))):y.Ie.removeEntry(E)}),qt.waitFor(b)},c.prototype.getFromCache=function(p,y){return this.Ie.getEntry(p,y)},c.prototype.getAllFromCache=function(p,y){return this.Ie.getEntries(p,y)},c}(ew),dw=function(){function d(c){this.persistence=c,this.ds=new zp(function(p){return kc(p)},Na),this.lastRemoteSnapshotVersion=zn.min(),this.highestTargetId=0,this.ws=0,this._s=new Mg,this.targetCount=0,this.ys=g_.Jt()}return d.prototype.forEachTarget=function(c,p){return this.ds.forEach(function(y,b){return p(b)}),qt.resolve()},d.prototype.getLastRemoteSnapshotVersion=function(c){return qt.resolve(this.lastRemoteSnapshotVersion)},d.prototype.getHighestSequenceNumber=function(c){return qt.resolve(this.ws)},d.prototype.allocateTargetId=function(c){return this.highestTargetId=this.ys.next(),qt.resolve(this.highestTargetId)},d.prototype.setTargetsMetadata=function(c,p,y){return y&&(this.lastRemoteSnapshotVersion=y),p>this.ws&&(this.ws=p),qt.resolve()},d.prototype.te=function(c){this.ds.set(c.target,c);var p=c.targetId;p>this.highestTargetId&&(this.ys=new g_(p),this.highestTargetId=p),c.sequenceNumber>this.ws&&(this.ws=c.sequenceNumber)},d.prototype.addTargetData=function(c,p){return this.te(p),this.targetCount+=1,qt.resolve()},d.prototype.updateTargetData=function(c,p){return this.te(p),qt.resolve()},d.prototype.removeTargetData=function(c,p){return this.ds.delete(p.target),this._s.Zn(p.targetId),this.targetCount-=1,qt.resolve()},d.prototype.removeTargets=function(c,p,y){var b=this,E=0,M=[];return this.ds.forEach(function(P,B){B.sequenceNumber<=p&&null===y.get(B.targetId)&&(b.ds.delete(P),M.push(b.removeMatchingKeysForTargetId(c,B.targetId)),E++)}),qt.waitFor(M).next(function(){return E})},d.prototype.getTargetCount=function(c){return qt.resolve(this.targetCount)},d.prototype.getTargetData=function(c,p){var y=this.ds.get(p)||null;return qt.resolve(y)},d.prototype.addMatchingKeys=function(c,p,y){return this._s.Jn(p,y),qt.resolve()},d.prototype.removeMatchingKeys=function(c,p,y){this._s.Xn(p,y);var b=this.persistence.referenceDelegate,E=[];return b&&p.forEach(function(M){E.push(b.markPotentiallyOrphaned(c,M))}),qt.waitFor(E)},d.prototype.removeMatchingKeysForTargetId=function(c,p){return this._s.Zn(p),qt.resolve()},d.prototype.getMatchingKeysForTargetId=function(c,p){var y=this._s.es(p);return qt.resolve(y)},d.prototype.containsKey=function(c,p){return qt.resolve(this._s.containsKey(p))},d}(),Av=function(){function d(c,p){var y=this;this.gs={},this.Ne=new gs(0),this.xe=!1,this.xe=!0,this.referenceDelegate=c(this),this.qe=new dw(this),this.Ut=new ii,this.Ue=new cw(this.Ut,function(M){return y.referenceDelegate.ps(M)}),this.R=new lh(p),this.Ke=new Ig(this.R)}return d.prototype.start=function(){return Promise.resolve()},d.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(d.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),d.prototype.setDatabaseDeletedListener=function(){},d.prototype.setNetworkEnabled=function(){},d.prototype.getIndexManager=function(){return this.Ut},d.prototype.getMutationQueue=function(c){var p=this.gs[c.toKey()];return p||(p=new Mv(this.Ut,this.referenceDelegate),this.gs[c.toKey()]=p),p},d.prototype.getTargetCache=function(){return this.qe},d.prototype.getRemoteDocumentCache=function(){return this.Ue},d.prototype.getBundleCache=function(){return this.Ke},d.prototype.runTransaction=function(c,p,y){var b=this;Qt("MemoryPersistence","Starting transaction:",c);var E=new kv(this.Ne.next());return this.referenceDelegate.Es(),y(E).next(function(M){return b.referenceDelegate.Ts(E).next(function(){return M})}).toPromise().then(function(M){return E.raiseOnCommittedEvent(),M})},d.prototype.Is=function(c,p){return qt.or(Object.values(this.gs).map(function(y){return function(){return y.containsKey(c,p)}}))},d}(),kv=function(d){function c(p){var y=this;return(y=d.call(this)||this).currentSequenceNumber=p,y}return(0,V.ZT)(c,d),c}(q0),hw=function(){function d(c){this.persistence=c,this.As=new Mg,this.Rs=null}return d.bs=function(c){return new d(c)},Object.defineProperty(d.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Fn()},enumerable:!1,configurable:!0}),d.prototype.addReference=function(c,p,y){return this.As.addReference(y,p),this.vs.delete(y.toString()),qt.resolve()},d.prototype.removeReference=function(c,p,y){return this.As.removeReference(y,p),this.vs.add(y.toString()),qt.resolve()},d.prototype.markPotentiallyOrphaned=function(c,p){return this.vs.add(p.toString()),qt.resolve()},d.prototype.removeTarget=function(c,p){var y=this;this.As.Zn(p.targetId).forEach(function(E){return y.vs.add(E.toString())});var b=this.persistence.getTargetCache();return b.getMatchingKeysForTargetId(c,p.targetId).next(function(E){E.forEach(function(M){return y.vs.add(M.toString())})}).next(function(){return b.removeTargetData(c,p)})},d.prototype.Es=function(){this.Rs=new Set},d.prototype.Ts=function(c){var p=this,y=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qt.forEach(this.vs,function(b){var E=Mn.fromPath(b);return p.Ps(c,E).next(function(M){M||y.removeEntry(E)})}).next(function(){return p.Rs=null,y.apply(c)})},d.prototype.updateLimboDocument=function(c,p){var y=this;return this.Ps(c,p).next(function(b){b?y.vs.delete(p.toString()):y.vs.add(p.toString())})},d.prototype.ps=function(c){return 0},d.prototype.Ps=function(c,p){var y=this;return qt.or([function(){return qt.resolve(y.As.containsKey(p))},function(){return y.persistence.getTargetCache().containsKey(c,p)},function(){return y.persistence.Is(c,p)}])},d}(),is=function(){function d(c){this.uid=c}return d.prototype.isAuthenticated=function(){return null!=this.uid},d.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},d.prototype.isEqual=function(c){return c.uid===this.uid},d}();function Ag(d,c){return"firestore_clients_"+d+"_"+c}function b_(d,c,p){var y="firestore_mutations_"+d+"_"+p;return c.isAuthenticated()&&(y+="_"+c.uid),y}function kg(d,c){return"firestore_targets_"+d+"_"+c}is.UNAUTHENTICATED=new is(null),is.GOOGLE_CREDENTIALS=new is("google-credentials-uid"),is.FIRST_PARTY=new is("first-party-uid"),is.MOCK_USER=new is("mock-user");var wr=function(){function d(c,p,y,b){this.user=c,this.batchId=p,this.state=y,this.error=b}return d.Vs=function(c,p,y){var b,E=JSON.parse(y),M="object"==typeof E&&-1!==["pending","acknowledged","rejected"].indexOf(E.state)&&(void 0===E.error||"object"==typeof E.error);return M&&E.error&&(M="string"==typeof E.error.message&&"string"==typeof E.error.code)&&(b=new Rt(E.error.code,E.error.message)),M?new d(c,p,E.state,b):(Qi("SharedClientState","Failed to parse mutation state for ID '"+p+"': "+y),null)},d.prototype.Ss=function(){var c={state:this.state,updateTimeMs:Date.now()};return this.error&&(c.error={code:this.error.code,message:this.error.message}),JSON.stringify(c)},d}(),or=function(){function d(c,p,y){this.targetId=c,this.state=p,this.error=y}return d.Vs=function(c,p){var y,b=JSON.parse(p),E="object"==typeof b&&-1!==["not-current","current","rejected"].indexOf(b.state)&&(void 0===b.error||"object"==typeof b.error);return E&&b.error&&(E="string"==typeof b.error.message&&"string"==typeof b.error.code)&&(y=new Rt(b.error.code,b.error.message)),E?new d(c,b.state,y):(Qi("SharedClientState","Failed to parse target state for ID '"+c+"': "+p),null)},d.prototype.Ss=function(){var c={state:this.state,updateTimeMs:Date.now()};return this.error&&(c.error={code:this.error.code,message:this.error.message}),JSON.stringify(c)},d}(),Og=function(){function d(c,p){this.clientId=c,this.activeTargetIds=p}return d.Vs=function(c,p){for(var y=JSON.parse(p),b="object"==typeof y&&y.activeTargetIds instanceof Array,E=Rp(),M=0;b&&M<y.activeTargetIds.length;++M)b=lg(y.activeTargetIds[M]),E=E.add(y.activeTargetIds[M]);return b?new d(c,E):(Qi("SharedClientState","Failed to parse client data for instance '"+c+"': "+p),null)},d}(),Ov=function(){function d(c,p){this.clientId=c,this.onlineState=p}return d.Vs=function(c){var p=JSON.parse(c);return"object"==typeof p&&-1!==["Unknown","Online","Offline"].indexOf(p.onlineState)&&"string"==typeof p.clientId?new d(p.clientId,p.onlineState):(Qi("SharedClientState","Failed to parse online state: "+c),null)},d}(),pw=function(){function d(){this.activeTargetIds=Rp()}return d.prototype.Ds=function(c){this.activeTargetIds=this.activeTargetIds.add(c)},d.prototype.Cs=function(c){this.activeTargetIds=this.activeTargetIds.delete(c)},d.prototype.Ss=function(){var c={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(c)},d}(),fw=function(){function d(c,p,y,b,E){this.window=c,this.Se=p,this.persistenceKey=y,this.Ns=b,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Ao(hi),this.started=!1,this.$s=[];var M=y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=E,this.Os=Ag(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.Fs=this.Fs.insert(this.Ns,new pw),this.Ls=new RegExp("^firestore_clients_"+M+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+M+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+M+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks=function(P){return"firestore_bundle_loaded_"+P}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return d.yt=function(c){return!(!c||!c.localStorage)},d.prototype.start=function(){return(0,V.mG)(this,void 0,void 0,function(){var c,p,y,b,E,M,P,B,G,te,ye=this;return(0,V.Jh)(this,function(qe){switch(qe.label){case 0:return[4,this.syncEngine.fn()];case 1:for(c=qe.sent(),p=0,y=c;p<y.length;p++)(b=y[p])!==this.Ns&&(E=this.getItem(Ag(this.persistenceKey,b)))&&(M=Og.Vs(b,E))&&(this.Fs=this.Fs.insert(M.clientId,M));for(this.Qs(),(P=this.storage.getItem(this.Us))&&(B=this.js(P))&&this.Ws(B),G=0,te=this.$s;G<te.length;G++)this.ks(te[G]);return this.$s=[],this.window.addEventListener("pagehide",function(){return ye.shutdown()}),this.started=!0,[2]}})})},d.prototype.writeSequenceNumber=function(c){this.setItem(this.Ms,JSON.stringify(c))},d.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},d.prototype.isActiveQueryTarget=function(c){var p=!1;return this.Fs.forEach(function(y,b){b.activeTargetIds.has(c)&&(p=!0)}),p},d.prototype.addPendingMutation=function(c){this.zs(c,"pending")},d.prototype.updateMutationState=function(c,p,y){this.zs(c,p,y),this.Hs(c)},d.prototype.addLocalQueryTarget=function(c){var p="not-current";if(this.isActiveQueryTarget(c)){var y=this.storage.getItem(kg(this.persistenceKey,c));if(y){var b=or.Vs(c,y);b&&(p=b.state)}}return this.Js.Ds(c),this.Qs(),p},d.prototype.removeLocalQueryTarget=function(c){this.Js.Cs(c),this.Qs()},d.prototype.isLocalQueryTarget=function(c){return this.Js.activeTargetIds.has(c)},d.prototype.clearQueryState=function(c){this.removeItem(kg(this.persistenceKey,c))},d.prototype.updateQueryState=function(c,p,y){this.Ys(c,p,y)},d.prototype.handleUserChange=function(c,p,y){var b=this;p.forEach(function(E){b.Hs(E)}),this.currentUser=c,y.forEach(function(E){b.addPendingMutation(E)})},d.prototype.setOnlineState=function(c){this.Xs(c)},d.prototype.notifyBundleLoaded=function(){this.Zs()},d.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},d.prototype.getItem=function(c){var p=this.storage.getItem(c);return Qt("SharedClientState","READ",c,p),p},d.prototype.setItem=function(c,p){Qt("SharedClientState","SET",c,p),this.storage.setItem(c,p)},d.prototype.removeItem=function(c){Qt("SharedClientState","REMOVE",c),this.storage.removeItem(c)},d.prototype.ks=function(c){var p=this,y=c;if(y.storageArea===this.storage){if(Qt("SharedClientState","EVENT",y.key,y.newValue),y.key===this.Os)return void Qi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,V.mG)(p,void 0,void 0,function(){var b,E,M,P,B,G;return(0,V.Jh)(this,function(te){if(this.started){if(null!==y.key)if(this.Ls.test(y.key)){if(null==y.newValue)return b=this.ti(y.key),[2,this.ei(b,null)];if(E=this.ni(y.key,y.newValue))return[2,this.ei(E.clientId,E)]}else if(this.Bs.test(y.key)){if(null!==y.newValue&&(M=this.si(y.key,y.newValue)))return[2,this.ii(M)]}else if(this.qs.test(y.key)){if(null!==y.newValue&&(P=this.ri(y.key,y.newValue)))return[2,this.oi(P)]}else if(y.key===this.Us){if(null!==y.newValue&&(B=this.js(y.newValue)))return[2,this.Ws(B)]}else if(y.key===this.Ms)(G=function(fe){var ye=gs.o;if(null!=fe)try{var qe=JSON.parse(fe);Ft("number"==typeof qe),ye=qe}catch(ze){Qi("SharedClientState","Failed to read sequence number from WebStorage",ze)}return ye}(y.newValue))!==gs.o&&this.sequenceNumberHandler(G);else if(y.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(y);return[2]})})})}},Object.defineProperty(d.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),d.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},d.prototype.zs=function(c,p,y){var b=new wr(this.currentUser,c,p,y),E=b_(this.persistenceKey,this.currentUser,c);this.setItem(E,b.Ss())},d.prototype.Hs=function(c){var p=b_(this.persistenceKey,this.currentUser,c);this.removeItem(p)},d.prototype.Xs=function(c){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:c}))},d.prototype.Ys=function(c,p,y){var b=kg(this.persistenceKey,c),E=new or(c,p,y);this.setItem(b,E.Ss())},d.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},d.prototype.ti=function(c){var p=this.Ls.exec(c);return p?p[1]:null},d.prototype.ni=function(c,p){var y=this.ti(c);return Og.Vs(y,p)},d.prototype.si=function(c,p){var y=this.Bs.exec(c),b=Number(y[1]);return wr.Vs(new is(void 0!==y[2]?y[2]:null),b,p)},d.prototype.ri=function(c,p){var y=this.qs.exec(c),b=Number(y[1]);return or.Vs(b,p)},d.prototype.js=function(c){return Ov.Vs(c)},d.prototype.ii=function(c){return(0,V.mG)(this,void 0,void 0,function(){return(0,V.Jh)(this,function(p){return c.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(c.batchId,c.state,c.error)]:(Qt("SharedClientState","Ignoring mutation for non-active user "+c.user.uid),[2])})})},d.prototype.oi=function(c){return this.syncEngine.ai(c.targetId,c.state,c.error)},d.prototype.ei=function(c,p){var y=this,b=p?this.Fs.insert(c,p):this.Fs.remove(c),E=this.Gs(this.Fs),M=this.Gs(b),P=[],B=[];return M.forEach(function(G){E.has(G)||P.push(G)}),E.forEach(function(G){M.has(G)||B.push(G)}),this.syncEngine.hi(P,B).then(function(){y.Fs=b})},d.prototype.Ws=function(c){this.Fs.get(c.clientId)&&this.onlineStateHandler(c.onlineState)},d.prototype.Gs=function(c){var p=Rp();return c.forEach(function(y,b){p=p.unionWith(b.activeTargetIds)}),p},d}(),w_=function(){function d(){this.li=new pw,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return d.prototype.addPendingMutation=function(c){},d.prototype.updateMutationState=function(c,p,y){},d.prototype.addLocalQueryTarget=function(c){return this.li.Ds(c),this.fi[c]||"not-current"},d.prototype.updateQueryState=function(c,p,y){this.fi[c]=p},d.prototype.removeLocalQueryTarget=function(c){this.li.Cs(c)},d.prototype.isLocalQueryTarget=function(c){return this.li.activeTargetIds.has(c)},d.prototype.clearQueryState=function(c){delete this.fi[c]},d.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},d.prototype.isActiveQueryTarget=function(c){return this.li.activeTargetIds.has(c)},d.prototype.start=function(){return this.li=new pw,Promise.resolve()},d.prototype.handleUserChange=function(c,p,y){},d.prototype.setOnlineState=function(c){},d.prototype.shutdown=function(){},d.prototype.writeSequenceNumber=function(c){},d.prototype.notifyBundleLoaded=function(){},d}(),sD=function(){function d(){}return d.prototype.di=function(c){},d.prototype.shutdown=function(){},d}(),yl=function(){function d(){var c=this;this.wi=function(){return c._i()},this.mi=function(){return c.yi()},this.gi=[],this.pi()}return d.prototype.di=function(c){this.gi.push(c)},d.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},d.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},d.prototype._i=function(){Qt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var c=0,p=this.gi;c<p.length;c++)(0,p[c])(0)},d.prototype.yi=function(){Qt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var c=0,p=this.gi;c<p.length;c++)(0,p[c])(1)},d.yt=function(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},d}(),Rg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Pg=function(){function d(c){this.Ei=c.Ei,this.Ti=c.Ti}return d.prototype.Ii=function(c){this.Ai=c},d.prototype.Ri=function(c){this.bi=c},d.prototype.onMessage=function(c){this.vi=c},d.prototype.close=function(){this.Ti()},d.prototype.send=function(c){this.Ei(c)},d.prototype.Pi=function(){this.Ai()},d.prototype.Vi=function(c){this.bi(c)},d.prototype.Si=function(c){this.vi(c)},d}(),pT=function(d){function c(p){var y=this;return(y=d.call(this,p)||this).forceLongPolling=p.forceLongPolling,y.autoDetectLongPolling=p.autoDetectLongPolling,y.useFetchStreams=p.useFetchStreams,y}return(0,V.ZT)(c,d),c.prototype.Fi=function(p,y,b,E){return new Promise(function(M,P){var B=new Xm;B.listenOnce(jd.COMPLETE,function(){try{switch(B.getLastErrorCode()){case Ud.NO_ERROR:var te=B.getResponseJson();Qt("Connection","XHR received:",JSON.stringify(te)),M(te);break;case Ud.TIMEOUT:Qt("Connection",'RPC "'+p+'" timed out'),P(new Rt(nt.DEADLINE_EXCEEDED,"Request time out"));break;case Ud.HTTP_ERROR:var fe=B.getStatus();if(Qt("Connection",'RPC "'+p+'" failed with status:',fe,"response text:",B.getResponseText()),fe>0){var ye=B.getResponseJson().error;if(ye&&ye.status&&ye.message){var qe=(st=ye.status.toLowerCase().replace(/_/g,"-"),Object.values(nt).indexOf(st)>=0?st:nt.UNKNOWN);P(new Rt(qe,ye.message))}else P(new Rt(nt.UNKNOWN,"Server responded with status "+B.getStatus()))}else P(new Rt(nt.UNAVAILABLE,"Connection failed."));break;default:Fn()}}finally{Qt("Connection",'RPC "'+p+'" completed.')}var st});var G=JSON.stringify(E);B.send(y,"POST",G,b,15)})},c.prototype.Oi=function(p,y){var b=[this.Di,"/","google.firestore.v1.Firestore","/",p,"/channel"],E=new zl,M=mc(),P={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(P.xmlHttpFactory=new hv({})),this.ki(P.initMessageHeaders,y),(0,W.uI)()||(0,W.b$)()||(0,W.d)()||(0,W.w1)()||(0,W.Mn)()||(0,W.ru)()||(P.httpHeadersOverwriteParam="$httpHeaders");var B=b.join("");Qt("Connection","Creating WebChannel: "+B,P);var G=E.createWebChannel(B,P),te=!1,fe=!1,ye=new Pg({Ei:function(ze){fe?Qt("Connection","Not sending because WebChannel is closed:",ze):(te||(Qt("Connection","Opening WebChannel transport."),G.open(),te=!0),Qt("Connection","WebChannel sending:",ze),G.send(ze))},Ti:function(){return G.close()}}),qe=function(ze,st,Vt){ze.listen(st,function(tn){try{Vt(tn)}catch(Rn){setTimeout(function(){throw Rn},0)}})};return qe(G,zd.EventType.OPEN,function(){fe||Qt("Connection","WebChannel transport opened.")}),qe(G,zd.EventType.CLOSE,function(){fe||(fe=!0,Qt("Connection","WebChannel transport closed"),ye.Vi())}),qe(G,zd.EventType.ERROR,function(ze){fe||(fe=!0,ll("Connection","WebChannel transport errored:",ze),ye.Vi(new Rt(nt.UNAVAILABLE,"The operation could not be completed")))}),qe(G,zd.EventType.MESSAGE,function(ze){var st;if(!fe){var Vt=ze.data[0];Ft(!!Vt);var Rn=Vt.error||(null===(st=Vt[0])||void 0===st?void 0:st.error);if(Rn){Qt("Connection","WebChannel received error:",Rn);var Un=Rn.status,li=function(Zi){var vo=Gr[Zi];if(void 0!==vo)return kp(vo)}(Un),Di=Rn.message;void 0===li&&(li=nt.INTERNAL,Di="Unknown error status: "+Un+" with message "+Rn.message),fe=!0,ye.Vi(new Rt(li,Di)),G.close()}else Qt("Connection","WebChannel received:",Vt),ye.Si(Vt)}}),qe(M,vp.STAT_EVENT,function(ze){ze.stat===Qm_PROXY?Qt("Connection","Detected buffering proxy"):ze.stat===Qm_NOPROXY&&Qt("Connection","Detected no buffering proxy")}),setTimeout(function(){ye.Pi()},0),ye},c}(function(){function d(c){this.databaseInfo=c,this.databaseId=c.databaseId,this.Di=(c.ssl?"https":"http")+"://"+c.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return d.prototype.Ni=function(c,p,y,b){var E=this.xi(c,p);Qt("RestConnection","Sending: ",E,y);var M={};return this.ki(M,b),this.Fi(c,E,M,y).then(function(P){return Qt("RestConnection","Received: ",P),P},function(P){throw ll("RestConnection",c+" failed with error: ",P,"url: ",E,"request:",y),P})},d.prototype.$i=function(c,p,y,b){return this.Ni(c,p,y,b)},d.prototype.ki=function(c,p){if(c["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",c["Content-Type"]="text/plain",this.databaseInfo.appId&&(c["X-Firebase-GMPID"]=this.databaseInfo.appId),p)for(var y in p.authHeaders)p.authHeaders.hasOwnProperty(y)&&(c[y]=p.authHeaders[y])},d.prototype.xi=function(c,p){return this.Di+"/v1/"+p+":"+Rg[c]},d}());function Ng(){return typeof window<"u"?window:null}function Fg(){return typeof document<"u"?document:null}function qc(d){return new u_(d,!0)}var Zp=function(){function d(c,p,y,b,E){void 0===y&&(y=1e3),void 0===b&&(b=1.5),void 0===E&&(E=6e4),this.Se=c,this.timerId=p,this.Mi=y,this.Li=b,this.Bi=E,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return d.prototype.reset=function(){this.qi=0},d.prototype.Qi=function(){this.qi=this.Bi},d.prototype.ji=function(c){var p=this;this.cancel();var y=Math.floor(this.qi+this.Wi()),b=Math.max(0,Date.now()-this.Ki),E=Math.max(0,y-b);E>0&&Qt("ExponentialBackoff","Backing off for "+E+" ms (base delay: "+this.qi+" ms, delay with jitter: "+y+" ms, last attempt: "+b+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,E,function(){return p.Ki=Date.now(),c()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},d.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},d.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},d.prototype.Wi=function(){return(Math.random()-.5)*this.qi},d}(),Lg=function(){function d(c,p,y,b,E,M){this.Se=c,this.zi=y,this.Hi=b,this.Ji=E,this.listener=M,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Zp(c,p)}return d.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},d.prototype.er=function(){return 2===this.state},d.prototype.start=function(){3!==this.state?this.auth():this.nr()},d.prototype.stop=function(){return(0,V.mG)(this,void 0,void 0,function(){return(0,V.Jh)(this,function(c){switch(c.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})},d.prototype.sr=function(){this.state=0,this.Zi.reset()},d.prototype.ir=function(){var c=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return c.rr()}))},d.prototype.cr=function(c){this.ur(),this.stream.send(c)},d.prototype.rr=function(){return(0,V.mG)(this,void 0,void 0,function(){return(0,V.Jh)(this,function(c){return this.er()?[2,this.close(0)]:[2]})})},d.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},d.prototype.close=function(c,p){return(0,V.mG)(this,void 0,void 0,function(){return(0,V.Jh)(this,function(y){switch(y.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==c?this.Zi.reset():p&&p.code===nt.RESOURCE_EXHAUSTED?(Qi(p.toString()),Qi("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):p&&p.code===nt.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=c,[4,this.listener.Ri(p)];case 1:return y.sent(),[2]}})})},d.prototype.ar=function(){},d.prototype.auth=function(){var c=this;this.state=1;var p=this.hr(this.Yi),y=this.Yi;this.Ji.getToken().then(function(b){c.Yi===y&&c.lr(b)},function(b){p(function(){var E=new Rt(nt.UNKNOWN,"Fetching auth token failed: "+b.message);return c.dr(E)})})},d.prototype.lr=function(c){var p=this,y=this.hr(this.Yi);this.stream=this.wr(c),this.stream.Ii(function(){y(function(){return p.state=2,p.listener.Ii()})}),this.stream.Ri(function(b){y(function(){return p.dr(b)})}),this.stream.onMessage(function(b){y(function(){return p.onMessage(b)})})},d.prototype.nr=function(){var c=this;this.state=4,this.Zi.ji(function(){return(0,V.mG)(c,void 0,void 0,function(){return(0,V.Jh)(this,function(p){return this.state=0,this.start(),[2]})})})},d.prototype.dr=function(c){return Qt("PersistentStream","close with error: "+c),this.stream=null,this.close(3,c)},d.prototype.hr=function(c){var p=this;return function(y){p.Se.enqueueAndForget(function(){return p.Yi===c?y():(Qt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},d}(),Vg=function(d){function c(p,y,b,E,M){var P=this;return(P=d.call(this,p,"listen_stream_connection_backoff","listen_stream_idle",y,b,M)||this).R=E,P}return(0,V.ZT)(c,d),c.prototype.wr=function(p){return this.Hi.Oi("Listen",p)},c.prototype.onMessage=function(p){this.Zi.reset();var y=function(E,M){var P,Vt;if("targetChange"in M){var B="NO_CHANGE"===(Vt=M.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Vt?1:"REMOVE"===Vt?2:"CURRENT"===Vt?3:"RESET"===Vt?4:Fn(),G=M.targetChange.targetIds||[],te=function(Vt,tn){return Vt.I?(Ft(void 0===tn||"string"==typeof tn),Xr.fromBase64String(tn||"")):(Ft(void 0===tn||tn instanceof Uint8Array),Xr.fromUint8Array(tn||new Uint8Array))}(E,M.targetChange.resumeToken),fe=(ye=M.targetChange.cause)&&function(Vt){var tn=void 0===Vt.code?nt.UNKNOWN:kp(Vt.code);return new Rt(tn,Vt.message||"")}(ye);P=new Nu(B,G,te,fe||null)}else if("documentChange"in M){G=L(E,(B=M.documentChange).document.name),te=mo(B.document.updateTime);var ye=new oi({mapValue:{fields:B.document.fields}}),qe=(fe=re.newFoundDocument(G,te,ye),B.targetIds||[]);P=new Xs(qe,B.removedTargetIds||[],fe.key,fe)}else if("documentDelete"in M)G=L(E,(B=M.documentDelete).document),te=B.readTime?mo(B.readTime):zn.min(),ye=re.newNoDocument(G,te),P=new Xs([],fe=B.removedTargetIds||[],ye.key,ye);else if("documentRemove"in M)G=L(E,(B=M.documentRemove).document),P=new Xs([],te=B.removedTargetIds||[],G,null);else{if(!("filter"in M))return Fn();var st=M.filter;G=new Wl(B=st.count||0),P=new vg(te=st.targetId,G)}return P}(this.R,p),b=function(E){if(!("targetChange"in E))return zn.min();var M=E.targetChange;return M.targetIds&&M.targetIds.length?zn.min():M.readTime?mo(M.readTime):zn.min()}(p);return this.listener._r(y,b)},c.prototype.mr=function(p){var E,M,P,B,y={};y.database=Ie(this.R),y.addTarget=(E=this.R,(P=jr(B=(M=p).target)?{documents:jo(E,B)}:{query:gl(E,B)}).targetId=M.targetId,M.resumeToken.approximateByteSize()>0?P.resumeToken=_v(E,M.resumeToken):M.snapshotVersion.compareTo(zn.min())>0&&(P.readTime=eh(E,M.snapshotVersion.toTimestamp())),P);var b=function(E,M){var P=function(B,G){switch(G){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Fn()}}(0,M.purpose);return null==P?null:{"goog-listen-tags":P}}(0,p);b&&(y.labels=b),this.cr(y)},c.prototype.yr=function(p){var y={};y.database=Ie(this.R),y.removeTarget=p,this.cr(y)},c}(Lg),C_=function(d){function c(p,y,b,E,M){var P=this;return(P=d.call(this,p,"write_stream_connection_backoff","write_stream_idle",y,b,M)||this).R=E,P.gr=!1,P}return(0,V.ZT)(c,d),Object.defineProperty(c.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),c.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,d.prototype.start.call(this)},c.prototype.ar=function(){this.gr&&this.Er([])},c.prototype.wr=function(p){return this.Hi.Oi("Write",p)},c.prototype.onMessage=function(p){if(Ft(!!p.streamToken),this.lastStreamToken=p.streamToken,this.gr){this.Zi.reset();var y=(M=p.commitTime,(E=p.writeResults)&&E.length>0?(Ft(void 0!==M),E.map(function(P){return G=M,(te=mo((B=P).updateTime?B.updateTime:G)).isEqual(zn.min())&&(te=mo(G)),new Ou(te,B.transformResults||[]);var B,G,te})):[]),b=mo(p.commitTime);return this.listener.Tr(b,y)}var E,M;return Ft(!p.writeResults||0===p.writeResults.length),this.gr=!0,this.listener.Ir()},c.prototype.Ar=function(){var p={};p.database=Ie(this.R),this.cr(p)},c.prototype.Er=function(p){var y=this,b={streamToken:this.lastStreamToken,writes:p.map(function(E){return Zn(y.R,E)})};this.cr(b)},c}(Lg),gw=function(d){function c(p,y,b){var E=this;return(E=d.call(this)||this).credentials=p,E.Hi=y,E.R=b,E.Rr=!1,E}return(0,V.ZT)(c,d),c.prototype.br=function(){if(this.Rr)throw new Rt(nt.FAILED_PRECONDITION,"The client has already been terminated.")},c.prototype.Ni=function(p,y,b){var E=this;return this.br(),this.credentials.getToken().then(function(M){return E.Hi.Ni(p,y,b,M)}).catch(function(M){throw"FirebaseError"===M.name?(M.code===nt.UNAUTHENTICATED&&E.credentials.invalidateToken(),M):new Rt(nt.UNKNOWN,M.toString())})},c.prototype.$i=function(p,y,b){var E=this;return this.br(),this.credentials.getToken().then(function(M){return E.Hi.$i(p,y,b,M)}).catch(function(M){throw"FirebaseError"===M.name?(M.code===nt.UNAUTHENTICATED&&E.credentials.invalidateToken(),M):new Rt(nt.UNKNOWN,M.toString())})},c.prototype.terminate=function(){this.Rr=!0},c}(function(){}),T_=function(){function d(c,p){this.asyncQueue=c,this.onlineStateHandler=p,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return d.prototype.Sr=function(){var c=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return c.Pr=null,c.Cr("Backend didn't respond within 10 seconds."),c.Dr("Offline"),Promise.resolve()}))},d.prototype.Nr=function(c){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+c.toString()),this.Dr("Offline")))},d.prototype.set=function(c){this.kr(),this.vr=0,"Online"===c&&(this.Vr=!1),this.Dr(c)},d.prototype.Dr=function(c){c!==this.state&&(this.state=c,this.onlineStateHandler(c))},d.prototype.Cr=function(c){var p="Could not reach Cloud Firestore backend. "+c+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Qi(p),this.Vr=!1):Qt("OnlineStateTracker",p)},d.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},d}(),ph=function(d,c,p,y,b){var E=this;this.localStore=d,this.datastore=c,this.asyncQueue=p,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=b,this.Lr.di(function(M){p.enqueueAndForget(function(){return(0,V.mG)(E,void 0,void 0,function(){return(0,V.Jh)(this,function(P){switch(P.label){case 0:return ea(this)?(Qt("RemoteStore","Restarting streams for network reachability change."),[4,function(B){return(0,V.mG)(this,void 0,void 0,function(){var G;return(0,V.Jh)(this,function(te){switch(te.label){case 0:return(G=It(B)).Or.add(4),[4,Zu(G)];case 1:return te.sent(),G.Br.set("Unknown"),G.Or.delete(4),[4,qu(G)];case 2:return te.sent(),[2]}})})}(this)]):[3,2];case 1:P.sent(),P.label=2;case 2:return[2]}})})})}),this.Br=new T_(p,y)};function qu(d){return(0,V.mG)(this,void 0,void 0,function(){var c,p;return(0,V.Jh)(this,function(y){switch(y.label){case 0:if(!ea(d))return[3,4];c=0,p=d.Mr,y.label=1;case 1:return c<p.length?[4,(0,p[c])(!0)]:[3,4];case 2:y.sent(),y.label=3;case 3:return c++,[3,1];case 4:return[2]}})})}function Zu(d){return(0,V.mG)(this,void 0,void 0,function(){var c,p;return(0,V.Jh)(this,function(y){switch(y.label){case 0:c=0,p=d.Mr,y.label=1;case 1:return c<p.length?[4,(0,p[c])(!1)]:[3,4];case 2:y.sent(),y.label=3;case 3:return c++,[3,1];case 4:return[2]}})})}function fh(d,c){var p=It(d);p.$r.has(c.targetId)||(p.$r.set(c.targetId,c),Nv(p)?Pv(p):vl(p).er()&&Rv(p,c))}function gh(d,c){var p=It(d),y=vl(p);p.$r.delete(c),y.er()&&mh(p,c),0===p.$r.size&&(y.er()?y.ir():ea(p)&&p.Br.set("Unknown"))}function Rv(d,c){d.qr.U(c.targetId),vl(d).mr(c)}function mh(d,c){d.qr.U(c),vl(d).yr(c)}function Pv(d){d.qr=new gv({getRemoteKeysForTarget:function(c){return d.remoteSyncer.getRemoteKeysForTarget(c)},lt:function(c){return d.$r.get(c)||null}}),vl(d).start(),d.Br.Sr()}function Nv(d){return ea(d)&&!vl(d).tr()&&d.$r.size>0}function ea(d){return 0===It(d).Or.size}function Fv(d){d.qr=void 0}function Hg(d){return(0,V.mG)(this,void 0,void 0,function(){return(0,V.Jh)(this,function(c){return d.$r.forEach(function(p,y){Rv(d,p)}),[2]})})}function E_(d,c){return(0,V.mG)(this,void 0,void 0,function(){return(0,V.Jh)(this,function(p){return Fv(d),Nv(d)?(d.Br.Nr(c),Pv(d)):d.Br.set("Unknown"),[2]})})}function $p(d,c,p){return(0,V.mG)(this,void 0,void 0,function(){var y,b,E;return(0,V.Jh)(this,function(M){switch(M.label){case 0:if(d.Br.set("Online"),!(c instanceof Nu&&2===c.state&&c.cause))return[3,6];M.label=1;case 1:return M.trys.push([1,3,,5]),[4,function(P,B){return(0,V.mG)(this,void 0,void 0,function(){var G,te,fe,ye;return(0,V.Jh)(this,function(qe){switch(qe.label){case 0:G=B.cause,te=0,fe=B.targetIds,qe.label=1;case 1:return te<fe.length?P.$r.has(ye=fe[te])?[4,P.remoteSyncer.rejectListen(ye,G)]:[3,3]:[3,5];case 2:qe.sent(),P.$r.delete(ye),P.qr.removeTarget(ye),qe.label=3;case 3:qe.label=4;case 4:return te++,[3,1];case 5:return[2]}})})}(d,c)];case 2:return M.sent(),[3,5];case 3:return y=M.sent(),Qt("RemoteStore","Failed to remove targets %s: %s ",c.targetIds.join(","),y),[4,_h(d,y)];case 4:return M.sent(),[3,5];case 5:return[3,13];case 6:if(c instanceof Xs?d.qr.X(c):c instanceof vg?d.qr.rt(c):d.qr.et(c),p.isEqual(zn.min()))return[3,13];M.label=7;case 7:return M.trys.push([7,11,,13]),[4,Dv(d.localStore)];case 8:return b=M.sent(),p.compareTo(b)>=0?[4,(P=d,B=p,G=P.qr.ut(B),G.targetChanges.forEach(function(te,fe){if(te.resumeToken.approximateByteSize()>0){var ye=P.$r.get(fe);ye&&P.$r.set(fe,ye.withResumeToken(te.resumeToken,B))}}),G.targetMismatches.forEach(function(te){var fe=P.$r.get(te);if(fe){P.$r.set(te,fe.withResumeToken(Xr.EMPTY_BYTE_STRING,fe.snapshotVersion)),mh(P,te);var ye=new Vp(fe.target,te,1,fe.sequenceNumber);Rv(P,ye)}}),P.remoteSyncer.applyRemoteEvent(G))]:[3,10];case 9:M.sent(),M.label=10;case 10:return[3,13];case 11:return Qt("RemoteStore","Failed to raise snapshot:",E=M.sent()),[4,_h(d,E)];case 12:return M.sent(),[3,13];case 13:return[2]}var P,B,G})})}function _h(d,c,p){return(0,V.mG)(this,void 0,void 0,function(){var y=this;return(0,V.Jh)(this,function(b){switch(b.label){case 0:if(!Bu(c))throw c;return d.Or.add(1),[4,Zu(d)];case 1:return b.sent(),d.Br.set("Offline"),p||(p=function(){return Dv(d.localStore)}),d.asyncQueue.enqueueRetryable(function(){return(0,V.mG)(y,void 0,void 0,function(){return(0,V.Jh)(this,function(E){switch(E.label){case 0:return Qt("RemoteStore","Retrying IndexedDB access"),[4,p()];case 1:return E.sent(),d.Or.delete(1),[4,qu(d)];case 2:return E.sent(),[2]}})})}),[2]}})})}function ws(d,c){return c().catch(function(p){return _h(d,p,c)})}function yh(d){return(0,V.mG)(this,void 0,void 0,function(){var c,p,y,b,E;return(0,V.Jh)(this,function(M){switch(M.label){case 0:c=It(d),p=Ql(c),y=c.Fr.length>0?c.Fr[c.Fr.length-1].batchId:-1,M.label=1;case 1:if(!(ea(P=c)&&P.Fr.length<10))return[3,7];M.label=2;case 2:return M.trys.push([2,4,,6]),[4,ns(c.localStore,y)];case 3:return null===(b=M.sent())?(0===c.Fr.length&&p.ir(),[3,7]):(y=b.batchId,function(P,B){P.Fr.push(B);var G=Ql(P);G.er()&&G.pr&&G.Er(B.mutations)}(c,b),[3,6]);case 4:return E=M.sent(),[4,_h(c,E)];case 5:return M.sent(),[3,6];case 6:return[3,1];case 7:return vh(c)&&Wp(c),[2]}var P})})}function vh(d){return ea(d)&&!Ql(d).tr()&&d.Fr.length>0}function Wp(d){Ql(d).start()}function $u(d){return(0,V.mG)(this,void 0,void 0,function(){return(0,V.Jh)(this,function(c){return Ql(d).Ar(),[2]})})}function x_(d){return(0,V.mG)(this,void 0,void 0,function(){var c,p,y;return(0,V.Jh)(this,function(E){for(c=Ql(d),p=0,y=d.Fr;p<y.length;p++)c.Er(y[p].mutations);return[2]})})}function Lv(d,c,p){return(0,V.mG)(this,void 0,void 0,function(){var y,b;return(0,V.Jh)(this,function(E){switch(E.label){case 0:return y=d.Fr.shift(),b=K0.from(y,c,p),[4,ws(d,function(){return d.remoteSyncer.applySuccessfulWrite(b)})];case 1:return E.sent(),[4,yh(d)];case 2:return E.sent(),[2]}})})}function mw(d,c){return(0,V.mG)(this,void 0,void 0,function(){return(0,V.Jh)(this,function(p){switch(p.label){case 0:return c&&Ql(d).pr?[4,function(y,b){return(0,V.mG)(this,void 0,void 0,function(){var E,M;return(0,V.Jh)(this,function(P){switch(P.label){case 0:return mg(M=b.code)&&M!==nt.ABORTED?(E=y.Fr.shift(),Ql(y).sr(),[4,ws(y,function(){return y.remoteSyncer.rejectFailedWrite(E.batchId,b)})]):[3,3];case 1:return P.sent(),[4,yh(y)];case 2:P.sent(),P.label=3;case 3:return[2]}})})}(d,c)]:[3,2];case 1:p.sent(),p.label=2;case 2:return vh(d)&&Wp(d),[2]}})})}function Kp(d,c){return(0,V.mG)(this,void 0,void 0,function(){var p;return(0,V.Jh)(this,function(y){switch(y.label){case 0:return p=It(d),c?(p.Or.delete(2),[4,qu(p)]):[3,2];case 1:return y.sent(),[3,5];case 2:return c?[3,4]:(p.Or.add(2),[4,Zu(p)]);case 3:y.sent(),p.Br.set("Unknown"),y.label=4;case 4:y.label=5;case 5:return[2]}})})}function vl(d){var p,y,b,E,c=this;return d.Ur||(d.Ur=(p=d.datastore,y=d.asyncQueue,b={Ii:Hg.bind(null,d),Ri:E_.bind(null,d),_r:$p.bind(null,d)},(E=It(p)).br(),new Vg(y,E.Hi,E.credentials,E.R,b)),d.Mr.push(function(p){return(0,V.mG)(c,void 0,void 0,function(){return(0,V.Jh)(this,function(y){switch(y.label){case 0:return p?(d.Ur.sr(),Nv(d)?Pv(d):d.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,d.Ur.stop()];case 2:y.sent(),Fv(d),y.label=3;case 3:return[2]}})})})),d.Ur}function Ql(d){var p,y,b,E,c=this;return d.Kr||(d.Kr=(p=d.datastore,y=d.asyncQueue,b={Ii:$u.bind(null,d),Ri:mw.bind(null,d),Ir:x_.bind(null,d),Tr:Lv.bind(null,d)},(E=It(p)).br(),new C_(y,E.Hi,E.credentials,E.R,b)),d.Mr.push(function(p){return(0,V.mG)(c,void 0,void 0,function(){return(0,V.Jh)(this,function(y){switch(y.label){case 0:return p?(d.Kr.sr(),[4,yh(d)]):[3,2];case 1:return y.sent(),[3,4];case 2:return[4,d.Kr.stop()];case 3:y.sent(),d.Fr.length>0&&(Qt("RemoteStore","Stopping write stream with "+d.Fr.length+" pending writes"),d.Fr=[]),y.label=4;case 4:return[2]}})})})),d.Kr}var S_=function(){function d(c,p,y,b,E){this.asyncQueue=c,this.timerId=p,this.targetTimeMs=y,this.op=b,this.removalCallback=E,this.deferred=new Ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(M){})}return d.createAndSchedule=function(c,p,y,b,E){var M=new d(c,p,Date.now()+y,b,E);return M.start(y),M},d.prototype.start=function(c){var p=this;this.timerHandle=setTimeout(function(){return p.handleDelayElapsed()},c)},d.prototype.skipDelay=function(){return this.handleDelayElapsed()},d.prototype.cancel=function(c){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Rt(nt.CANCELLED,"Operation cancelled"+(c?": "+c:""))))},d.prototype.handleDelayElapsed=function(){var c=this;this.asyncQueue.enqueueAndForget(function(){return null!==c.timerHandle?(c.clearTimeout(),c.op().then(function(p){return c.deferred.resolve(p)})):Promise.resolve()})},d.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},d}();function Xl(d,c){if(Qi("AsyncQueue",c+": "+d),Bu(d))return new Rt(nt.UNAVAILABLE,c+": "+d);throw d}var bh=function(){function d(c){this.comparator=c?function(p,y){return c(p,y)||Mn.comparator(p.key,y.key)}:function(p,y){return Mn.comparator(p.key,y.key)},this.keyedMap=fl(),this.sortedSet=new Ao(this.comparator)}return d.emptySet=function(c){return new d(c.comparator)},d.prototype.has=function(c){return null!=this.keyedMap.get(c)},d.prototype.get=function(c){return this.keyedMap.get(c)},d.prototype.first=function(){return this.sortedSet.minKey()},d.prototype.last=function(){return this.sortedSet.maxKey()},d.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},d.prototype.indexOf=function(c){var p=this.keyedMap.get(c);return p?this.sortedSet.indexOf(p):-1},Object.defineProperty(d.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),d.prototype.forEach=function(c){this.sortedSet.inorderTraversal(function(p,y){return c(p),!1})},d.prototype.add=function(c){var p=this.delete(c.key);return p.copy(p.keyedMap.insert(c.key,c),p.sortedSet.insert(c,null))},d.prototype.delete=function(c){var p=this.get(c);return p?this.copy(this.keyedMap.remove(c),this.sortedSet.remove(p)):this},d.prototype.isEqual=function(c){if(!(c instanceof d)||this.size!==c.size)return!1;for(var p=this.sortedSet.getIterator(),y=c.sortedSet.getIterator();p.hasNext();){var b=p.getNext().key,E=y.getNext().key;if(!b.isEqual(E))return!1}return!0},d.prototype.toString=function(){var c=[];return this.forEach(function(p){c.push(p.toString())}),0===c.length?"DocumentSet ()":"DocumentSet (\n  "+c.join("  \n")+"\n)"},d.prototype.copy=function(c,p){var y=new d;return y.comparator=this.comparator,y.keyedMap=c,y.sortedSet=p,y},d}(),Bg=function(){function d(){this.Qr=new Ao(Mn.comparator)}return d.prototype.track=function(c){var p=c.doc.key,y=this.Qr.get(p);y?0!==c.type&&3===y.type?this.Qr=this.Qr.insert(p,c):3===c.type&&1!==y.type?this.Qr=this.Qr.insert(p,{type:y.type,doc:c.doc}):2===c.type&&2===y.type?this.Qr=this.Qr.insert(p,{type:2,doc:c.doc}):2===c.type&&0===y.type?this.Qr=this.Qr.insert(p,{type:0,doc:c.doc}):1===c.type&&0===y.type?this.Qr=this.Qr.remove(p):1===c.type&&2===y.type?this.Qr=this.Qr.insert(p,{type:1,doc:y.doc}):0===c.type&&1===y.type?this.Qr=this.Qr.insert(p,{type:2,doc:c.doc}):Fn():this.Qr=this.Qr.insert(p,c)},d.prototype.jr=function(){var c=[];return this.Qr.inorderTraversal(function(p,y){c.push(y)}),c},d}(),Ug=function(){function d(c,p,y,b,E,M,P,B){this.query=c,this.docs=p,this.oldDocs=y,this.docChanges=b,this.mutatedKeys=E,this.fromCache=M,this.syncStateChanged=P,this.excludesMetadataChanges=B}return d.fromInitialDocuments=function(c,p,y,b){var E=[];return p.forEach(function(M){E.push({type:0,doc:M})}),new d(c,p,bh.emptySet(p),E,y,b,!0,!1)},Object.defineProperty(d.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),d.prototype.isEqual=function(c){if(!(this.fromCache===c.fromCache&&this.syncStateChanged===c.syncStateChanged&&this.mutatedKeys.isEqual(c.mutatedKeys)&&ys(this.query,c.query)&&this.docs.isEqual(c.docs)&&this.oldDocs.isEqual(c.oldDocs)))return!1;var p=this.docChanges,y=c.docChanges;if(p.length!==y.length)return!1;for(var b=0;b<p.length;b++)if(p[b].type!==y[b].type||!p[b].doc.isEqual(y[b].doc))return!1;return!0},d}(),Yp=function(){this.Wr=void 0,this.listeners=[]},wh=function(){this.queries=new zp(function(d){return Sp(d)},ys),this.onlineState="Unknown",this.Gr=new Set};function Jp(d,c){return(0,V.mG)(this,void 0,void 0,function(){var p,y,b,E,M,P,B;return(0,V.Jh)(this,function(G){switch(G.label){case 0:if(p=It(d),b=!1,(E=p.queries.get(y=c.query))||(b=!0,E=new Yp),!b)return[3,4];G.label=1;case 1:return G.trys.push([1,3,,4]),M=E,[4,p.onListen(y)];case 2:return M.Wr=G.sent(),[3,4];case 3:return P=G.sent(),B=Xl(P,"Initialization of query '"+Iu(c.query)+"' failed"),[2,void c.onError(B)];case 4:return p.queries.set(y,E),E.listeners.push(c),c.zr(p.onlineState),E.Wr&&c.Hr(E.Wr)&&Ch(p),[2]}})})}function Qp(d,c){return(0,V.mG)(this,void 0,void 0,function(){var p,y,b,E,M;return(0,V.Jh)(this,function(P){return p=It(d),b=!1,(E=p.queries.get(y=c.query))&&(M=E.listeners.indexOf(c))>=0&&(E.listeners.splice(M,1),b=0===E.listeners.length),b?[2,(p.queries.delete(y),p.onUnlisten(y))]:[2]})})}function Vv(d,c){for(var p=It(d),y=!1,b=0,E=c;b<E.length;b++){var M=E[b],B=p.queries.get(M.query);if(B){for(var G=0,te=B.listeners;G<te.length;G++)te[G].Hr(M)&&(y=!0);B.Wr=M}}y&&Ch(p)}function D_(d,c,p){var y=It(d),b=y.queries.get(c);if(b)for(var E=0,M=b.listeners;E<M.length;E++)M[E].onError(p);y.queries.delete(c)}function Ch(d){d.Gr.forEach(function(c){c.next()})}var Th=function(){function d(c,p,y){this.query=c,this.Jr=p,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=y||{}}return d.prototype.Hr=function(c){if(!this.options.includeMetadataChanges){for(var p=[],y=0,b=c.docChanges;y<b.length;y++){var E=b[y];3!==E.type&&p.push(E)}c=new Ug(c.query,c.docs,c.oldDocs,p,c.mutatedKeys,c.fromCache,c.syncStateChanged,!0)}var M=!1;return this.Yr?this.Zr(c)&&(this.Jr.next(c),M=!0):this.eo(c,this.onlineState)&&(this.no(c),M=!0),this.Xr=c,M},d.prototype.onError=function(c){this.Jr.error(c)},d.prototype.zr=function(c){this.onlineState=c;var p=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,c)&&(this.no(this.Xr),p=!0),p},d.prototype.eo=function(c,p){return!c.fromCache||!(this.options.so&&"Offline"!==p||c.docs.isEmpty()&&"Offline"!==p)},d.prototype.Zr=function(c){return c.docChanges.length>0||!!(c.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==c.hasPendingWrites)&&!0===this.options.includeMetadataChanges},d.prototype.no=function(c){c=Ug.fromInitialDocuments(c.query,c.docs,c.mutatedKeys,c.fromCache),this.Yr=!0,this.Jr.next(c)},d}(),Hv=function(){function d(c,p){this.payload=c,this.byteLength=p}return d.prototype.io=function(){return"metadata"in this.payload},d}(),jg=function(){function d(c){this.R=c}return d.prototype.qn=function(c){return L(this.R,c)},d.prototype.Un=function(c){return c.metadata.exists?bn(this.R,c.document,!1):re.newNoDocument(this.qn(c.metadata.name),this.Kn(c.metadata.readTime))},d.prototype.Kn=function(c){return mo(c)},d}();!function(){function d(c,p,y){this.ro=c,this.localStore=p,this.R=y,this.queries=[],this.documents=[],this.progress=function Zc(d){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:d.totalDocuments,totalBytes:d.totalBytes}}(c)}d.prototype.oo=function(c){this.progress.bytesLoaded+=c.byteLength;var p=this.progress.documentsLoaded;return c.payload.namedQuery?this.queries.push(c.payload.namedQuery):c.payload.documentMetadata?(this.documents.push({metadata:c.payload.documentMetadata}),c.payload.documentMetadata.exists||++p):c.payload.document&&(this.documents[this.documents.length-1].document=c.payload.document,++p),p!==this.progress.documentsLoaded?(this.progress.documentsLoaded=p,Object.assign({},this.progress)):null},d.prototype.co=function(c){for(var p=new Map,y=new jg(this.R),b=0,E=c;b<E.length;b++){var M=E[b];if(M.metadata.queries)for(var P=y.qn(M.metadata.name),B=0,G=M.metadata.queries;B<G.length;B++){var te=G[B],fe=(p.get(te)||ki()).add(P);p.set(te,fe)}}return p},d.prototype.complete=function(){return(0,V.mG)(this,void 0,void 0,function(){var c,p,y,b,E;return(0,V.Jh)(this,function(M){switch(M.label){case 0:return[4,ko(this.localStore,new jg(this.R),this.documents,this.ro.id)];case 1:c=M.sent(),p=this.co(this.documents),y=0,b=this.queries,M.label=2;case 2:return y<b.length?[4,hh(this.localStore,E=b[y],p.get(E.name))]:[3,5];case 3:M.sent(),M.label=4;case 4:return y++,[3,2];case 5:return[2,(this.progress.taskState="Success",new ow(Object.assign({},this.progress),c))]}})})}}();var Xp=function(d){this.key=d},Bv=function(d){this.key=d},Uv=function(){function d(c,p){this.query=c,this.uo=p,this.ao=null,this.current=!1,this.ho=ki(),this.mutatedKeys=ki(),this.lo=Dp(c),this.fo=new bh(this.lo)}return Object.defineProperty(d.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),d.prototype._o=function(c,p){var y=this,b=p?p.mo:new Bg,E=p?p.fo:this.fo,M=p?p.mutatedKeys:this.mutatedKeys,P=E,B=!1,G=Ep(this.query)&&E.size===this.query.limit?E.last():null,te=Du(this.query)&&E.size===this.query.limit?E.first():null;if(c.inorderTraversal(function(ye,qe){var ze=E.get(ye),st=Rc(y.query,qe)?qe:null,Vt=!!ze&&y.mutatedKeys.has(ze.key),tn=!!st&&(st.hasLocalMutations||y.mutatedKeys.has(st.key)&&st.hasCommittedMutations),Rn=!1;ze&&st?ze.data.isEqual(st.data)?Vt!==tn&&(b.track({type:3,doc:st}),Rn=!0):y.yo(ze,st)||(b.track({type:2,doc:st}),Rn=!0,(G&&y.lo(st,G)>0||te&&y.lo(st,te)<0)&&(B=!0)):!ze&&st?(b.track({type:0,doc:st}),Rn=!0):ze&&!st&&(b.track({type:1,doc:ze}),Rn=!0,(G||te)&&(B=!0)),Rn&&(st?(P=P.add(st),M=tn?M.add(ye):M.delete(ye)):(P=P.delete(ye),M=M.delete(ye)))}),Ep(this.query)||Du(this.query))for(;P.size>this.query.limit;){var fe=Ep(this.query)?P.last():P.first();P=P.delete(fe.key),M=M.delete(fe.key),b.track({type:1,doc:fe})}return{fo:P,mo:b,Nn:B,mutatedKeys:M}},d.prototype.yo=function(c,p){return c.hasLocalMutations&&p.hasCommittedMutations&&!p.hasLocalMutations},d.prototype.applyChanges=function(c,p,y){var b=this,E=this.fo;this.fo=c.fo,this.mutatedKeys=c.mutatedKeys;var M=c.mo.jr();M.sort(function(te,fe){return qe=fe.type,(ze=function(st){switch(st){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fn()}})(te.type)-ze(qe)||b.lo(te.doc,fe.doc);var qe,ze}),this.po(y);var P=p?this.Eo():[],B=0===this.ho.size&&this.current?1:0,G=B!==this.ao;return this.ao=B,0!==M.length||G?{snapshot:new Ug(this.query,c.fo,E,M,c.mutatedKeys,0===B,G,!1),To:P}:{To:P}},d.prototype.zr=function(c){return this.current&&"Offline"===c?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Bg,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},d.prototype.Io=function(c){return!this.uo.has(c)&&!!this.fo.has(c)&&!this.fo.get(c).hasLocalMutations},d.prototype.po=function(c){var p=this;c&&(c.addedDocuments.forEach(function(y){return p.uo=p.uo.add(y)}),c.modifiedDocuments.forEach(function(y){}),c.removedDocuments.forEach(function(y){return p.uo=p.uo.delete(y)}),this.current=c.current)},d.prototype.Eo=function(){var c=this;if(!this.current)return[];var p=this.ho;this.ho=ki(),this.fo.forEach(function(b){c.Io(b.key)&&(c.ho=c.ho.add(b.key))});var y=[];return p.forEach(function(b){c.ho.has(b)||y.push(new Bv(b))}),this.ho.forEach(function(b){p.has(b)||y.push(new Xp(b))}),y},d.prototype.Ao=function(c){this.uo=c.Bn,this.ho=ki();var p=this._o(c.documents);return this.applyChanges(p,!0)},d.prototype.Ro=function(){return Ug.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},d}(),Eh=function(d,c,p){this.query=d,this.targetId=c,this.view=p},jv=function(d){this.key=d,this.bo=!1},Wu=function(){function d(c,p,y,b,E,M){this.localStore=c,this.remoteStore=p,this.eventManager=y,this.sharedClientState=b,this.currentUser=E,this.maxConcurrentLimboResolutions=M,this.vo={},this.Po=new zp(function(P){return Sp(P)},ys),this.Vo=new Map,this.So=new Set,this.Do=new Ao(Mn.comparator),this.Co=new Map,this.No=new Mg,this.xo={},this.ko=new Map,this.Fo=g_.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(d.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),d}();function _w(d,c){return(0,V.mG)(this,void 0,void 0,function(){var p,b,E,M,P;return(0,V.Jh)(this,function(B){switch(B.label){case 0:return p=$g(d),(E=p.Po.get(c))?(p.sharedClientState.addLocalQueryTarget(E.targetId),b=E.view.Ro(),[3,4]):[3,1];case 1:return[4,Jl(p.localStore,fo(c))];case 2:return M=B.sent(),P=p.sharedClientState.addLocalQueryTarget(M.targetId),[4,zv(p,c,M.targetId,"current"===P)];case 3:b=B.sent(),p.isPrimaryClient&&fh(p.remoteStore,M),B.label=4;case 4:return[2,b]}})})}function zv(d,c,p,y){return(0,V.mG)(this,void 0,void 0,function(){var b,E,M,P,B,G;return(0,V.Jh)(this,function(te){switch(te.label){case 0:return d.Oo=function(fe,ye,qe){return function(ze,st,Vt,tn){return(0,V.mG)(this,void 0,void 0,function(){var Rn,Un,li;return(0,V.Jh)(this,function(Di){switch(Di.label){case 0:return(Rn=st.view._o(Vt)).Nn?[4,Zr(ze.localStore,st.query,!1).then(function(Zi){return st.view._o(Zi.documents,Rn)})]:[3,2];case 1:Rn=Di.sent(),Di.label=2;case 2:return Un=tn&&tn.targetChanges.get(st.targetId),li=st.view.applyChanges(Rn,ze.isPrimaryClient,Un),[2,(M_(ze,st.targetId,li.To),li.snapshot)]}})})}(d,fe,ye,qe)},[4,Zr(d.localStore,c,!0)];case 1:return b=te.sent(),E=new Uv(c,b.Bn),M=E._o(b.documents),P=Xd.createSynthesizedTargetChangeForCurrentChange(p,y&&"Offline"!==d.onlineState),B=E.applyChanges(M,d.isPrimaryClient,P),M_(d,p,B.To),G=new Eh(c,p,E),[2,(d.Po.set(c,G),d.Vo.has(p)?d.Vo.get(p).push(c):d.Vo.set(p,[c]),B.snapshot)]}})})}function rs(d,c){return(0,V.mG)(this,void 0,void 0,function(){var p,y,b;return(0,V.Jh)(this,function(E){switch(E.label){case 0:return p=It(d),y=p.Po.get(c),(b=p.Vo.get(y.targetId)).length>1?[2,(p.Vo.set(y.targetId,b.filter(function(M){return!ys(M,c)})),void p.Po.delete(c))]:p.isPrimaryClient?(p.sharedClientState.removeLocalQueryTarget(y.targetId),p.sharedClientState.isActiveQueryTarget(y.targetId)?[3,2]:[4,Gp(p.localStore,y.targetId,!1).then(function(){p.sharedClientState.clearQueryState(y.targetId),gh(p.remoteStore,y.targetId),ec(p,y.targetId)}).catch(Gu)]):[3,3];case 1:E.sent(),E.label=2;case 2:return[3,5];case 3:return ec(p,y.targetId),[4,Gp(p.localStore,y.targetId,!0)];case 4:E.sent(),E.label=5;case 5:return[2]}})})}function $c(d,c,p){return(0,V.mG)(this,void 0,void 0,function(){var y,b,E,M;return(0,V.Jh)(this,function(P){switch(P.label){case 0:y=tf(d),P.label=1;case 1:return P.trys.push([1,5,,6]),[4,(B=y.localStore,G=c,fe=It(B),ye=Li.now(),qe=G.reduce(function(ze,st){return ze.add(st.key)},ki()),fe.persistence.runTransaction("Locally write mutations","readwrite",function(ze){return fe.Mn.pn(ze,qe).next(function(st){te=st;for(var Vt=[],tn=0,Rn=G;tn<Rn.length;tn++){var Un=Rn[tn],li=pg(Un,te.get(Un.key));null!=li&&Vt.push(new Lc(Un.key,li,po(li.value.mapValue),zr.exists(!0)))}return fe._n.addMutationBatch(ze,ye,Vt,G)})}).then(function(ze){return ze.applyToLocalDocumentSet(te),{batchId:ze.batchId,changes:te}}))];case 2:return b=P.sent(),y.sharedClientState.addPendingMutation(b.batchId),function(B,G,te){var fe=B.xo[B.currentUser.toKey()];fe||(fe=new Ao(hi)),fe=fe.insert(G,te),B.xo[B.currentUser.toKey()]=fe}(y,b.batchId,p),[4,Wc(y,b.changes)];case 3:return P.sent(),[4,yh(y.remoteStore)];case 4:return P.sent(),[3,6];case 5:return E=P.sent(),M=Xl(E,"Failed to persist write"),p.reject(M),[3,6];case 6:return[2]}var B,G,te,fe,ye,qe})})}function ef(d,c){return(0,V.mG)(this,void 0,void 0,function(){var p,y;return(0,V.Jh)(this,function(b){switch(b.label){case 0:p=It(d),b.label=1;case 1:return b.trys.push([1,4,,6]),[4,hT(p.localStore,c)];case 2:return y=b.sent(),c.targetChanges.forEach(function(E,M){var P=p.Co.get(M);P&&(Ft(E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size<=1),E.addedDocuments.size>0?P.bo=!0:E.modifiedDocuments.size>0?Ft(P.bo):E.removedDocuments.size>0&&(Ft(P.bo),P.bo=!1))}),[4,Wc(p,y,c)];case 3:return b.sent(),[3,6];case 4:return[4,Gu(b.sent())];case 5:return b.sent(),[3,6];case 6:return[2]}})})}function Gg(d,c,p){var y=It(d);if(y.isPrimaryClient&&0===p||!y.isPrimaryClient&&1===p){var b=[];y.Po.forEach(function(E,M){var P=M.view.zr(c);P.snapshot&&b.push(P.snapshot)}),function(E,M){var P=It(E);P.onlineState=M;var B=!1;P.queries.forEach(function(G,te){for(var fe=0,ye=te.listeners;fe<ye.length;fe++)ye[fe].zr(M)&&(B=!0)}),B&&Ch(P)}(y.eventManager,c),b.length&&y.vo._r(b),y.onlineState=c,y.isPrimaryClient&&y.sharedClientState.setOnlineState(c)}}function I_(d,c,p){return(0,V.mG)(this,void 0,void 0,function(){var y,b,E,M,P,B;return(0,V.Jh)(this,function(G){switch(G.label){case 0:return(y=It(d)).sharedClientState.updateQueryState(c,"rejected",p),b=y.Co.get(c),(E=b&&b.key)?(M=(M=new Ao(Mn.comparator)).insert(E,re.newNoDocument(E,zn.min())),P=ki().add(E),B=new Pp(zn.min(),new Map,new Or(hi),M,P),[4,ef(y,B)]):[3,2];case 1:return G.sent(),y.Do=y.Do.remove(E),y.Co.delete(c),A_(y),[3,4];case 2:return[4,Gp(y.localStore,c,!1).then(function(){return ec(y,c,p)}).catch(Gu)];case 3:G.sent(),G.label=4;case 4:return[2]}})})}function yw(d,c){return(0,V.mG)(this,void 0,void 0,function(){var p,y,b;return(0,V.Jh)(this,function(E){switch(E.label){case 0:p=It(d),y=c.batch.batchId,E.label=1;case 1:return E.trys.push([1,4,,6]),[4,Dg(p.localStore,c)];case 2:return b=E.sent(),qv(p,y,null),Gv(p,y),p.sharedClientState.updateMutationState(y,"acknowledged"),[4,Wc(p,b)];case 3:return E.sent(),[3,6];case 4:return[4,Gu(E.sent())];case 5:return E.sent(),[3,6];case 6:return[2]}})})}function Cr(d,c,p){return(0,V.mG)(this,void 0,void 0,function(){var y,b;return(0,V.Jh)(this,function(E){switch(E.label){case 0:y=It(d),E.label=1;case 1:return E.trys.push([1,4,,6]),[4,(M=y.localStore,P=c,B=It(M),B.persistence.runTransaction("Reject batch","readwrite-primary",function(G){var te;return B._n.lookupMutationBatch(G,P).next(function(fe){return Ft(null!==fe),te=fe.keys(),B._n.removeMutationBatch(G,fe)}).next(function(){return B._n.performConsistencyCheck(G)}).next(function(){return B.Mn.pn(G,te)})}))];case 2:return b=E.sent(),qv(y,c,p),Gv(y,c),y.sharedClientState.updateMutationState(c,"rejected",p),[4,Wc(y,b)];case 3:return E.sent(),[3,6];case 4:return[4,Gu(E.sent())];case 5:return E.sent(),[3,6];case 6:return[2]}var M,P,B})})}function qg(d,c){return(0,V.mG)(this,void 0,void 0,function(){var p,y,b,E,M;return(0,V.Jh)(this,function(P){switch(P.label){case 0:ea((p=It(d)).remoteStore)||Qt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),P.label=1;case 1:return P.trys.push([1,3,,4]),[4,(B=p.localStore,G=It(B),G.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(te){return G._n.getHighestUnacknowledgedBatchId(te)}))];case 2:return-1===(y=P.sent())?[2,void c.resolve()]:((b=p.ko.get(y)||[]).push(c),p.ko.set(y,b),[3,4]);case 3:return E=P.sent(),M=Xl(E,"Initialization of waitForPendingWrites() operation failed"),c.reject(M),[3,4];case 4:return[2]}var B,G})})}function Gv(d,c){(d.ko.get(c)||[]).forEach(function(p){p.resolve()}),d.ko.delete(c)}function qv(d,c,p){var y=It(d),b=y.xo[y.currentUser.toKey()];if(b){var E=b.get(c);E&&(p?E.reject(p):E.resolve(),b=b.remove(c)),y.xo[y.currentUser.toKey()]=b}}function ec(d,c,p){void 0===p&&(p=null),d.sharedClientState.removeLocalQueryTarget(c);for(var y=0,b=d.Vo.get(c);y<b.length;y++){var E=b[y];d.Po.delete(E),p&&d.vo.Mo(E,p)}d.Vo.delete(c),d.isPrimaryClient&&d.No.Zn(c).forEach(function(M){d.No.containsKey(M)||Qn(d,M)})}function Qn(d,c){d.So.delete(c.path.canonicalString());var p=d.Do.get(c);null!==p&&(gh(d.remoteStore,p),d.Do=d.Do.remove(c),d.Co.delete(p),A_(d))}function M_(d,c,p){for(var y=0,b=p;y<b.length;y++){var E=b[y];E instanceof Xp?(d.No.addReference(E.key,c),Zv(d,E)):E instanceof Bv?(Qt("SyncEngine","Document no longer in limbo: "+E.key),d.No.removeReference(E.key,c),d.No.containsKey(E.key)||Qn(d,E.key)):Fn()}}function Zv(d,c){var p=c.key,y=p.path.canonicalString();d.Do.get(p)||d.So.has(y)||(Qt("SyncEngine","New document in limbo: "+p),d.So.add(y),A_(d))}function A_(d){for(;d.So.size>0&&d.Do.size<d.maxConcurrentLimboResolutions;){var c=d.So.values().next().value;d.So.delete(c);var p=new Mn(_i.fromString(c)),y=d.Fo.next();d.Co.set(y,new jv(p)),d.Do=d.Do.insert(p,y),fh(d.remoteStore,new Vp(fo(ql(p.path)),y,2,gs.o))}}function Wc(d,c,p){return(0,V.mG)(this,void 0,void 0,function(){var y,b,E,M;return(0,V.Jh)(this,function(P){switch(P.label){case 0:return y=It(d),b=[],E=[],M=[],y.Po.isEmpty()?[3,3]:(y.Po.forEach(function(B,G){M.push(y.Oo(G,c,p).then(function(te){if(te){y.isPrimaryClient&&y.sharedClientState.updateQueryState(G.targetId,te.fromCache?"not-current":"current"),b.push(te);var fe=__.Pn(G.targetId,te);E.push(fe)}}))}),[4,Promise.all(M)]);case 1:return P.sent(),y.vo._r(b),[4,function(B,G){return(0,V.mG)(this,void 0,void 0,function(){var te,fe,ye,qe,ze,st,Vt,Rn;return(0,V.Jh)(this,function(Un){switch(Un.label){case 0:te=It(B),Un.label=1;case 1:return Un.trys.push([1,3,,4]),[4,te.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(li){return qt.forEach(G,function(Di){return qt.forEach(Di.bn,function(Zi){return te.persistence.referenceDelegate.addReference(li,Di.targetId,Zi)}).next(function(){return qt.forEach(Di.vn,function(Zi){return te.persistence.referenceDelegate.removeReference(li,Di.targetId,Zi)})})})})];case 2:return Un.sent(),[3,4];case 3:if(!Bu(fe=Un.sent()))throw fe;return Qt("LocalStore","Failed to update sequence numbers: "+fe),[3,4];case 4:for(ye=0,qe=G;ye<qe.length;ye++)st=(ze=qe[ye]).targetId,ze.fromCache||(Vt=te.kn.get(st),Rn=Vt.withLastLimboFreeSnapshotVersion(Vt.snapshotVersion),te.kn=te.kn.insert(st,Rn));return[2]}})})}(y.localStore,E)];case 2:P.sent(),P.label=3;case 3:return[2]}})})}function fT(d,c){return(0,V.mG)(this,void 0,void 0,function(){var p,y;return(0,V.Jh)(this,function(b){switch(b.label){case 0:return(p=It(d)).currentUser.isEqual(c)?[3,3]:(Qt("SyncEngine","User change. New user:",c.toKey()),[4,aw(p.localStore,c)]);case 1:return y=b.sent(),p.currentUser=c,(E=p).ko.forEach(function(P){P.forEach(function(B){B.reject(new Rt(nt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),E.ko.clear(),p.sharedClientState.handleUserChange(c,y.removedBatchIds,y.addedBatchIds),[4,Wc(p,y.Ln)];case 2:b.sent(),b.label=3;case 3:return[2]}var E})})}function vw(d,c){var p=It(d),y=p.Co.get(c);if(y&&y.bo)return ki().add(y.key);var b=ki(),E=p.Vo.get(c);if(!E)return b;for(var M=0,P=E;M<P.length;M++){var G=p.Po.get(P[M]);b=b.unionWith(G.view.wo)}return b}function Zg(d,c){return(0,V.mG)(this,void 0,void 0,function(){var p,y,b;return(0,V.Jh)(this,function(E){switch(E.label){case 0:return[4,Zr((p=It(d)).localStore,c.query,!0)];case 1:return y=E.sent(),b=c.view.Ao(y),[2,(p.isPrimaryClient&&M_(p,c.targetId,b.To),b)]}})})}function Kc(d){return(0,V.mG)(this,void 0,void 0,function(){var c;return(0,V.Jh)(this,function(p){return[2,Iv((c=It(d)).localStore).then(function(y){return Wc(c,y)})]})})}function bw(d,c,p,y){return(0,V.mG)(this,void 0,void 0,function(){var b,E;return(0,V.Jh)(this,function(M){switch(M.label){case 0:return[4,(P=(b=It(d)).localStore,B=c,G=It(P),te=It(G._n),G.persistence.runTransaction("Lookup mutation documents","readonly",function(fe){return te.jt(fe,B).next(function(ye){return ye?G.Mn.pn(fe,ye):qt.resolve(null)})}))];case 1:return null===(E=M.sent())?[3,6]:"pending"!==p?[3,3]:[4,yh(b.remoteStore)];case 2:return M.sent(),[3,4];case 3:"acknowledged"===p||"rejected"===p?(qv(b,c,y||null),Gv(b,c),function(P,B){It(It(P)._n).Gt(B)}(b.localStore,c)):Fn(),M.label=4;case 4:return[4,Wc(b,E)];case 5:return M.sent(),[3,7];case 6:Qt("SyncEngine","Cannot apply mutation batch with id: "+c),M.label=7;case 7:return[2]}var P,B,G,te})})}function ww(d,c){return(0,V.mG)(this,void 0,void 0,function(){var p,y,b,E,M,B,G;return(0,V.Jh)(this,function(te){switch(te.label){case 0:return $g(p=It(d)),tf(p),!0!==c||!0===p.$o?[3,3]:(y=p.sharedClientState.getAllActiveQueryTargets(),[4,Cw(p,y.toArray())]);case 1:return b=te.sent(),p.$o=!0,[4,Kp(p.remoteStore,!0)];case 2:for(te.sent(),E=0,M=b;E<M.length;E++)fh(p.remoteStore,M[E]);return[3,7];case 3:return!1!==c||!1===p.$o?[3,7]:(B=[],G=Promise.resolve(),p.Vo.forEach(function(fe,ye){p.sharedClientState.isLocalQueryTarget(ye)?B.push(ye):G=G.then(function(){return ec(p,ye),Gp(p.localStore,ye,!0)}),gh(p.remoteStore,ye)}),[4,G]);case 4:return te.sent(),[4,Cw(p,B)];case 5:return te.sent(),(ye=It(p)).Co.forEach(function(qe,ze){gh(ye.remoteStore,ze)}),ye.No.ts(),ye.Co=new Map,ye.Do=new Ao(Mn.comparator),p.$o=!1,[4,Kp(p.remoteStore,!1)];case 6:te.sent(),te.label=7;case 7:return[2]}var ye})})}function Cw(d,c,p){return(0,V.mG)(this,void 0,void 0,function(){var y,b,E,M,P,B,G,te,fe,ye,ze,st,Vt;return(0,V.Jh)(this,function(tn){switch(tn.label){case 0:y=It(d),b=[],E=[],M=0,P=c,tn.label=1;case 1:return M<P.length?(G=void 0,(te=y.Vo.get(B=P[M]))&&0!==te.length?[4,Jl(y.localStore,fo(te[0]))]:[3,7]):[3,13];case 2:G=tn.sent(),fe=0,ye=te,tn.label=3;case 3:return fe<ye.length?(ze=y.Po.get(ye[fe]),[4,Zg(y,ze)]):[3,6];case 4:(st=tn.sent()).snapshot&&E.push(st.snapshot),tn.label=5;case 5:return fe++,[3,3];case 6:return[3,11];case 7:return[4,v_(y.localStore,B)];case 8:return Vt=tn.sent(),[4,Jl(y.localStore,Vt)];case 9:return G=tn.sent(),[4,zv(y,Ku(Vt),B,!1)];case 10:tn.sent(),tn.label=11;case 11:b.push(G),tn.label=12;case 12:return M++,[3,1];case 13:return[2,(y.vo._r(E),b)]}})})}function Ku(d){return Su(d.path,d.collectionGroup,d.orderBy,d.filters,d.limit,"F",d.startAt,d.endAt)}function Tw(d){var c=It(d);return It(It(c.localStore).persistence).fn()}function xh(d,c,p,y){return(0,V.mG)(this,void 0,void 0,function(){var b,E,M;return(0,V.Jh)(this,function(P){switch(P.label){case 0:return(b=It(d)).$o?(Qt("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!b.Vo.has(c))return[3,8];switch(p){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Iv(b.localStore)];case 3:return E=P.sent(),M=Pp.createSynthesizedRemoteEventForCurrentChange(c,"current"===p),[4,Wc(b,E,M)];case 4:return P.sent(),[3,8];case 5:return[4,Gp(b.localStore,c,!0)];case 6:return P.sent(),ec(b,c,y),[3,8];case 7:Fn(),P.label=8;case 8:return[2]}})})}function Ew(d,c,p){return(0,V.mG)(this,void 0,void 0,function(){var y,b,E,M,P,B,G,te,fe;return(0,V.Jh)(this,function(qe){switch(qe.label){case 0:if(!(y=$g(d)).$o)return[3,10];b=0,E=c,qe.label=1;case 1:return b<E.length?y.Vo.has(M=E[b])?(Qt("SyncEngine","Adding an already active target "+M),[3,5]):[4,v_(y.localStore,M)]:[3,6];case 2:return P=qe.sent(),[4,Jl(y.localStore,P)];case 3:return B=qe.sent(),[4,zv(y,Ku(P),B.targetId,!1)];case 4:qe.sent(),fh(y.remoteStore,B),qe.label=5;case 5:return b++,[3,1];case 6:G=function(ze){return(0,V.Jh)(this,function(st){switch(st.label){case 0:return y.Vo.has(ze)?[4,Gp(y.localStore,ze,!1).then(function(){gh(y.remoteStore,ze),ec(y,ze)}).catch(Gu)]:[3,2];case 1:st.sent(),st.label=2;case 2:return[2]}})},te=0,fe=p,qe.label=7;case 7:return te<fe.length?[5,G(fe[te])]:[3,10];case 8:qe.sent(),qe.label=9;case 9:return te++,[3,7];case 10:return[2]}})})}function $g(d){var c=It(d);return c.remoteStore.remoteSyncer.applyRemoteEvent=ef.bind(null,c),c.remoteStore.remoteSyncer.getRemoteKeysForTarget=vw.bind(null,c),c.remoteStore.remoteSyncer.rejectListen=I_.bind(null,c),c.vo._r=Vv.bind(null,c.eventManager),c.vo.Mo=D_.bind(null,c.eventManager),c}function tf(d){var c=It(d);return c.remoteStore.remoteSyncer.applySuccessfulWrite=yw.bind(null,c),c.remoteStore.remoteSyncer.rejectFailedWrite=Cr.bind(null,c),c}var $v=function(){function d(){this.synchronizeTabs=!1}return d.prototype.initialize=function(c){return(0,V.mG)(this,void 0,void 0,function(){return(0,V.Jh)(this,function(p){switch(p.label){case 0:return this.R=qc(c.databaseInfo.databaseId),this.sharedClientState=this.Bo(c),this.persistence=this.qo(c),[4,this.persistence.start()];case 1:return p.sent(),this.gcScheduler=this.Uo(c),this.localStore=this.Ko(c),[2]}})})},d.prototype.Uo=function(c){return null},d.prototype.Ko=function(c){return sw(this.persistence,new y_,c.initialUser,this.R)},d.prototype.qo=function(c){return new Av(hw.bs,this.R)},d.prototype.Bo=function(c){return new w_},d.prototype.terminate=function(){return(0,V.mG)(this,void 0,void 0,function(){return(0,V.Jh)(this,function(c){switch(c.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return c.sent(),[4,this.persistence.shutdown()];case 2:return c.sent(),[2]}})})},d}(),Wv=function(d){function c(p,y,b){var E=this;return(E=d.call(this)||this).Qo=p,E.cacheSizeBytes=y,E.forceOwnership=b,E.synchronizeTabs=!1,E}return(0,V.ZT)(c,d),c.prototype.initialize=function(p){return(0,V.mG)(this,void 0,void 0,function(){var y=this;return(0,V.Jh)(this,function(b){switch(b.label){case 0:return[4,d.prototype.initialize.call(this,p)];case 1:return b.sent(),[4,qp(this.localStore)];case 2:return b.sent(),[4,this.Qo.initialize(this,p)];case 3:return b.sent(),[4,tf(this.Qo.syncEngine)];case 4:return b.sent(),[4,yh(this.Qo.remoteStore)];case 5:return b.sent(),[4,this.persistence.He(function(){return y.gcScheduler&&!y.gcScheduler.started&&y.gcScheduler.start(y.localStore),Promise.resolve()})];case 6:return b.sent(),[2]}})})},c.prototype.Ko=function(p){return sw(this.persistence,new y_,p.initialUser,this.R)},c.prototype.Uo=function(p){return new dT(this.persistence.referenceDelegate.garbageCollector,p.asyncQueue)},c.prototype.qo=function(p){var y=xv(p.databaseInfo.databaseId,p.databaseInfo.persistenceKey),b=void 0!==this.cacheSizeBytes?Ua.withCacheSize(this.cacheSizeBytes):Ua.DEFAULT;return new rw(this.synchronizeTabs,y,p.clientId,b,p.asyncQueue,Ng(),Fg(),this.R,this.sharedClientState,!!this.forceOwnership)},c.prototype.Bo=function(p){return new w_},c}($v),gT=function(d){function c(p,y){var b=this;return(b=d.call(this,p,y,!1)||this).Qo=p,b.cacheSizeBytes=y,b.synchronizeTabs=!0,b}return(0,V.ZT)(c,d),c.prototype.initialize=function(p){return(0,V.mG)(this,void 0,void 0,function(){var y,b=this;return(0,V.Jh)(this,function(E){switch(E.label){case 0:return[4,d.prototype.initialize.call(this,p)];case 1:return E.sent(),y=this.Qo.syncEngine,this.sharedClientState instanceof fw?(this.sharedClientState.syncEngine={ui:bw.bind(null,y),ai:xh.bind(null,y),hi:Ew.bind(null,y),fn:Tw.bind(null,y),ci:Kc.bind(null,y)},[4,this.sharedClientState.start()]):[3,3];case 2:E.sent(),E.label=3;case 3:return[4,this.persistence.He(function(M){return(0,V.mG)(b,void 0,void 0,function(){return(0,V.Jh)(this,function(P){switch(P.label){case 0:return[4,ww(this.Qo.syncEngine,M)];case 1:return P.sent(),this.gcScheduler&&(M&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):M||this.gcScheduler.stop()),[2]}})})})];case 4:return E.sent(),[2]}})})},c.prototype.Bo=function(p){var y=Ng();if(!fw.yt(y))throw new Rt(nt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var b=xv(p.databaseInfo.databaseId,p.databaseInfo.persistenceKey);return new fw(y,p.asyncQueue,b,p.clientId,p.initialUser)},c}(Wv),k_=function(){function d(){}return d.prototype.initialize=function(c,p){return(0,V.mG)(this,void 0,void 0,function(){var y=this;return(0,V.Jh)(this,function(b){switch(b.label){case 0:return this.localStore?[3,2]:(this.localStore=c.localStore,this.sharedClientState=c.sharedClientState,this.datastore=this.createDatastore(p),this.remoteStore=this.createRemoteStore(p),this.eventManager=this.createEventManager(p),this.syncEngine=this.createSyncEngine(p,!c.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(E){return Gg(y.syncEngine,E,1)},this.remoteStore.remoteSyncer.handleCredentialChange=fT.bind(null,this.syncEngine),[4,Kp(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:b.sent(),b.label=2;case 2:return[2]}})})},d.prototype.createEventManager=function(c){return new wh},d.prototype.createDatastore=function(c){var y=qc(c.databaseInfo.databaseId),b=new pT(c.databaseInfo);return new gw(c.credentials,b,y)},d.prototype.createRemoteStore=function(c){var p,y,b,E,M,P=this;return p=this.localStore,y=this.datastore,b=c.asyncQueue,E=function(B){return Gg(P.syncEngine,B,0)},M=yl.yt()?new yl:new sD,new ph(p,y,b,E,M)},d.prototype.createSyncEngine=function(c,p){return G=p,te=new Wu(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,c.initialUser,c.maxConcurrentLimboResolutions),G&&(te.$o=!0),te;var G,te},d.prototype.terminate=function(){return function(c){return(0,V.mG)(this,void 0,void 0,function(){var p;return(0,V.Jh)(this,function(y){switch(y.label){case 0:return p=It(c),Qt("RemoteStore","RemoteStore shutting down."),p.Or.add(5),[4,Zu(p)];case 1:return y.sent(),p.Lr.shutdown(),p.Br.set("Unknown"),[2]}})})}(this.remoteStore)},d}(),Kv=function(){function d(c){this.observer=c,this.muted=!1}return d.prototype.next=function(c){this.observer.next&&this.jo(this.observer.next,c)},d.prototype.error=function(c){this.observer.error?this.jo(this.observer.error,c):console.error("Uncaught Error in snapshot listener:",c)},d.prototype.Wo=function(){this.muted=!0},d.prototype.jo=function(c,p){var y=this;this.muted||setTimeout(function(){y.muted||c(p)},0)},d}(),nf=(function(){function d(c,p){var y=this;this.Go=c,this.R=p,this.metadata=new Ps,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(b){b&&b.io()?y.metadata.resolve(b.payload.metadata):y.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(b?.payload)))},function(b){return y.metadata.reject(b)})}d.prototype.close=function(){return this.Go.cancel()},d.prototype.getMetadata=function(){return(0,V.mG)(this,void 0,void 0,function(){return(0,V.Jh)(this,function(c){return[2,this.metadata.promise]})})},d.prototype.Lo=function(){return(0,V.mG)(this,void 0,void 0,function(){return(0,V.Jh)(this,function(c){switch(c.label){case 0:return[4,this.getMetadata()];case 1:return[2,(c.sent(),this.Ho())]}})})},d.prototype.Ho=function(){return(0,V.mG)(this,void 0,void 0,function(){var c,p,y,b;return(0,V.Jh)(this,function(E){switch(E.label){case 0:return[4,this.Jo()];case 1:return null===(c=E.sent())?[2,null]:(p=this.zo.decode(c),y=Number(p),isNaN(y)&&this.Yo("length string ("+p+") is not valid number"),[4,this.Xo(y)]);case 2:return b=E.sent(),[2,new Hv(JSON.parse(b),c.length+y)]}})})},d.prototype.Zo=function(){return this.buffer.findIndex(function(c){return c==="{".charCodeAt(0)})},d.prototype.Jo=function(){return(0,V.mG)(this,void 0,void 0,function(){var c,p;return(0,V.Jh)(this,function(y){switch(y.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(y.sent())return[3,3];y.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((c=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),p=this.buffer.slice(0,c),[2,(this.buffer=this.buffer.slice(c),p)])}})})},d.prototype.Xo=function(c){return(0,V.mG)(this,void 0,void 0,function(){var p;return(0,V.Jh)(this,function(y){switch(y.label){case 0:return this.buffer.length<c?[4,this.tc()]:[3,3];case 1:y.sent()&&this.Yo("Reached the end of bundle when more is expected."),y.label=2;case 2:return[3,0];case 3:return p=this.zo.decode(this.buffer.slice(0,c)),[2,(this.buffer=this.buffer.slice(c),p)]}})})},d.prototype.Yo=function(c){throw this.Go.cancel(),new Error("Invalid bundle format: "+c)},d.prototype.tc=function(){return(0,V.mG)(this,void 0,void 0,function(){var c,p;return(0,V.Jh)(this,function(y){switch(y.label){case 0:return[4,this.Go.read()];case 1:return(c=y.sent()).done||((p=new Uint8Array(this.buffer.length+c.value.length)).set(this.buffer),p.set(c.value,this.buffer.length),this.buffer=p),[2,c.done]}})})}}(),function(){function d(c){this.datastore=c,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return d.prototype.lookup=function(c){return(0,V.mG)(this,void 0,void 0,function(){var p,y=this;return(0,V.Jh)(this,function(b){switch(b.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Rt(nt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(E,M){return(0,V.mG)(this,void 0,void 0,function(){var P,B,G,te,fe,ye;return(0,V.Jh)(this,function(qe){switch(qe.label){case 0:return P=It(E),B=Ie(P.R)+"/documents",G={documents:M.map(function(ze){return I(P.R,ze)})},[4,P.$i("BatchGetDocuments",B,G)];case 1:return te=qe.sent(),fe=new Map,te.forEach(function(ze){var Vt,tn,st=(Vt=P.R,"found"in(tn=ze)?function(Rn,Un){Ft(!!Un.found);var li=L(Rn,Un.found.name),Di=mo(Un.found.updateTime),Zi=new oi({mapValue:{fields:Un.found.fields}});return re.newFoundDocument(li,Di,Zi)}(Vt,tn):"missing"in tn?function(Rn,Un){Ft(!!Un.missing),Ft(!!Un.readTime);var li=L(Rn,Un.missing),Di=mo(Un.readTime);return re.newNoDocument(li,Di)}(Vt,tn):Fn());fe.set(st.key.toString(),st)}),ye=[],[2,(M.forEach(function(ze){var st=fe.get(ze.toString());Ft(!!st),ye.push(st)}),ye)]}})})}(this.datastore,c)];case 1:return[2,((p=b.sent()).forEach(function(E){return y.recordVersion(E)}),p)]}})})},d.prototype.set=function(c,p){this.write(p.toMutation(c,this.precondition(c))),this.writtenDocs.add(c.toString())},d.prototype.update=function(c,p){try{this.write(p.toMutation(c,this.preconditionForUpdate(c)))}catch(y){this.lastWriteError=y}this.writtenDocs.add(c.toString())},d.prototype.delete=function(c){this.write(new Ru(c,this.precondition(c))),this.writtenDocs.add(c.toString())},d.prototype.commit=function(){return(0,V.mG)(this,void 0,void 0,function(){var c,p=this;return(0,V.Jh)(this,function(y){switch(y.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return c=this.readVersions,this.mutations.forEach(function(b){c.delete(b.key.toString())}),c.forEach(function(b,E){var M=Mn.fromPath(E);p.mutations.push(new Pu(M,p.precondition(M)))}),[4,function(b,E){return(0,V.mG)(this,void 0,void 0,function(){var M,P,B;return(0,V.Jh)(this,function(G){switch(G.label){case 0:return M=It(b),P=Ie(M.R)+"/documents",B={writes:E.map(function(te){return Zn(M.R,te)})},[4,M.Ni("Commit",P,B)];case 1:return G.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return y.sent(),this.committed=!0,[2]}})})},d.prototype.recordVersion=function(c){var p;if(c.isFoundDocument())p=c.version;else{if(!c.isNoDocument())throw Fn();p=zn.min()}var y=this.readVersions.get(c.key.toString());if(y){if(!p.isEqual(y))throw new Rt(nt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(c.key.toString(),p)},d.prototype.precondition=function(c){var p=this.readVersions.get(c.toString());return!this.writtenDocs.has(c.toString())&&p?zr.updateTime(p):zr.none()},d.prototype.preconditionForUpdate=function(c){var p=this.readVersions.get(c.toString());if(!this.writtenDocs.has(c.toString())&&p){if(p.isEqual(zn.min()))throw new Rt(nt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zr.updateTime(p)}return zr.exists(!0)},d.prototype.write=function(c){this.ensureCommitNotCalled(),this.mutations.push(c)},d.prototype.ensureCommitNotCalled=function(){},d}()),O_=function(){function d(c,p,y,b){this.asyncQueue=c,this.datastore=p,this.updateFunction=y,this.deferred=b,this.ec=5,this.Zi=new Zp(this.asyncQueue,"transaction_retry")}return d.prototype.run=function(){this.ec-=1,this.nc()},d.prototype.nc=function(){var c=this;this.Zi.ji(function(){return(0,V.mG)(c,void 0,void 0,function(){var p,y,b=this;return(0,V.Jh)(this,function(E){return p=new nf(this.datastore),(y=this.sc(p))&&y.then(function(M){b.asyncQueue.enqueueAndForget(function(){return p.commit().then(function(){b.deferred.resolve(M)}).catch(function(P){b.ic(P)})})}).catch(function(M){b.ic(M)}),[2]})})})},d.prototype.sc=function(c){try{var p=this.updateFunction(c);return!Ur(p)&&p.catch&&p.then?p:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(y){return this.deferred.reject(y),null}},d.prototype.ic=function(c){var p=this;this.ec>0&&this.rc(c)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return p.nc(),Promise.resolve()})):this.deferred.reject(c)},d.prototype.rc=function(c){if("FirebaseError"===c.name){var p=c.code;return"aborted"===p||"failed-precondition"===p||!mg(p)}return!1},d}(),rf=function(){function d(c,p,y){var b=this;this.credentials=c,this.asyncQueue=p,this.databaseInfo=y,this.user=is.UNAUTHENTICATED,this.clientId=Jo.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(p,function(E){return(0,V.mG)(b,void 0,void 0,function(){return(0,V.Jh)(this,function(M){switch(M.label){case 0:return Qt("FirestoreClient","Received user=",E.uid),[4,this.credentialListener(E)];case 1:return M.sent(),this.user=E,[2]}})})})}return d.prototype.getConfiguration=function(){return(0,V.mG)(this,void 0,void 0,function(){return(0,V.Jh)(this,function(c){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},d.prototype.setCredentialChangeListener=function(c){this.credentialListener=c},d.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Rt(nt.FAILED_PRECONDITION,"The client has already been terminated.")},d.prototype.terminate=function(){var c=this;this.asyncQueue.enterRestrictedMode();var p=new Ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,V.mG)(c,void 0,void 0,function(){var y,b;return(0,V.Jh)(this,function(E){switch(E.label){case 0:return E.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:E.sent(),E.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:E.sent(),E.label=4;case 4:return this.credentials.removeChangeListener(),p.resolve(),[3,6];case 5:return y=E.sent(),b=Xl(y,"Failed to shutdown persistence"),p.reject(b),[3,6];case 6:return[2]}})})}),p.promise},d}();function Yu(d,c){return(0,V.mG)(this,void 0,void 0,function(){var p,y,b=this;return(0,V.Jh)(this,function(E){switch(E.label){case 0:return d.asyncQueue.verifyOperationInProgress(),Qt("FirestoreClient","Initializing OfflineComponentProvider"),[4,d.getConfiguration()];case 1:return p=E.sent(),[4,c.initialize(p)];case 2:return E.sent(),y=p.initialUser,d.setCredentialChangeListener(function(M){return(0,V.mG)(b,void 0,void 0,function(){return(0,V.Jh)(this,function(P){switch(P.label){case 0:return y.isEqual(M)?[3,2]:[4,aw(c.localStore,M)];case 1:P.sent(),y=M,P.label=2;case 2:return[2]}})})}),c.persistence.setDatabaseDeletedListener(function(){return d.terminate()}),d.offlineComponents=c,[2]}})})}function R_(d,c){return(0,V.mG)(this,void 0,void 0,function(){var p,y;return(0,V.Jh)(this,function(b){switch(b.label){case 0:return d.asyncQueue.verifyOperationInProgress(),[4,Kg(d)];case 1:return p=b.sent(),Qt("FirestoreClient","Initializing OnlineComponentProvider"),[4,d.getConfiguration()];case 2:return y=b.sent(),[4,c.initialize(p,y)];case 3:return b.sent(),d.setCredentialChangeListener(function(E){return function(M,P){return(0,V.mG)(this,void 0,void 0,function(){var B,G;return(0,V.Jh)(this,function(te){switch(te.label){case 0:return(B=It(M)).asyncQueue.verifyOperationInProgress(),Qt("RemoteStore","RemoteStore received new credentials"),G=ea(B),B.Or.add(3),[4,Zu(B)];case 1:return te.sent(),G&&B.Br.set("Unknown"),[4,B.remoteSyncer.handleCredentialChange(P)];case 2:return te.sent(),B.Or.delete(3),[4,qu(B)];case 3:return te.sent(),[2]}})})}(c.remoteStore,E)}),d.onlineComponents=c,[2]}})})}function Kg(d){return(0,V.mG)(this,void 0,void 0,function(){return(0,V.Jh)(this,function(c){switch(c.label){case 0:return d.offlineComponents?[3,2]:(Qt("FirestoreClient","Using default OfflineComponentProvider"),[4,Yu(d,new $v)]);case 1:c.sent(),c.label=2;case 2:return[2,d.offlineComponents]}})})}function Ju(d){return(0,V.mG)(this,void 0,void 0,function(){return(0,V.Jh)(this,function(c){switch(c.label){case 0:return d.onlineComponents?[3,2]:(Qt("FirestoreClient","Using default OnlineComponentProvider"),[4,R_(d,new k_)]);case 1:c.sent(),c.label=2;case 2:return[2,d.onlineComponents]}})})}function sf(d){return Kg(d).then(function(c){return c.persistence})}function Yv(d){return Kg(d).then(function(c){return c.localStore})}function to(d){return Ju(d).then(function(c){return c.remoteStore})}function P_(d){return Ju(d).then(function(c){return c.syncEngine})}function Sh(d){return(0,V.mG)(this,void 0,void 0,function(){var c,p;return(0,V.Jh)(this,function(y){switch(y.label){case 0:return[4,Ju(d)];case 1:return c=y.sent(),[2,((p=c.eventManager).onListen=_w.bind(null,c.syncEngine),p.onUnlisten=rs.bind(null,c.syncEngine),p)]}})})}function Sw(d,c,p){var y=this;void 0===p&&(p={});var b=new Ps;return d.asyncQueue.enqueueAndForget(function(){return(0,V.mG)(y,void 0,void 0,function(){var E;return(0,V.Jh)(this,function(M){switch(M.label){case 0:return E=function(P,B,G,te,fe){var ye=new Kv({next:function(ze){B.enqueueAndForget(function(){return Qp(P,qe)});var st=ze.docs.has(G);!st&&ze.fromCache?fe.reject(new Rt(nt.UNAVAILABLE,"Failed to get document because the client is offline.")):st&&ze.fromCache&&te&&"server"===te.source?fe.reject(new Rt(nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):fe.resolve(ze)},error:function(ze){return fe.reject(ze)}}),qe=new Th(ql(G.path),ye,{includeMetadataChanges:!0,so:!0});return Jp(P,qe)},[4,Sh(d)];case 1:return[2,E.apply(void 0,[M.sent(),d.asyncQueue,c,p,b])]}})})}),b.promise}function Jv(d,c,p){var y=this;void 0===p&&(p={});var b=new Ps;return d.asyncQueue.enqueueAndForget(function(){return(0,V.mG)(y,void 0,void 0,function(){var E;return(0,V.Jh)(this,function(M){switch(M.label){case 0:return E=function(P,B,G,te,fe){var ye=new Kv({next:function(ze){B.enqueueAndForget(function(){return Qp(P,qe)}),ze.fromCache&&"server"===te.source?fe.reject(new Rt(nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):fe.resolve(ze)},error:function(ze){return fe.reject(ze)}}),qe=new Th(G,ye,{includeMetadataChanges:!0,so:!0});return Jp(P,qe)},[4,Sh(d)];case 1:return[2,E.apply(void 0,[M.sent(),d.asyncQueue,c,p,b])]}})})}),b.promise}var Dw=function(d,c,p,y,b,E,M,P){this.databaseId=d,this.appId=c,this.persistenceKey=p,this.host=y,this.ssl=b,this.forceLongPolling=E,this.autoDetectLongPolling=M,this.useFetchStreams=P},Dh=function(){function d(c,p){this.projectId=c,this.database=p||"(default)"}return Object.defineProperty(d.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),d.prototype.isEqual=function(c){return c instanceof d&&c.projectId===this.projectId&&c.database===this.database},d}(),Iw=new Map,Yg=function(d,c){this.user=c,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+d},Jg=function(){function d(){this.changeListener=null}return d.prototype.getToken=function(){return Promise.resolve(null)},d.prototype.invalidateToken=function(){},d.prototype.setChangeListener=function(c,p){this.changeListener=p,c.enqueueRetryable(function(){return p(is.UNAUTHENTICATED)})},d.prototype.removeChangeListener=function(){this.changeListener=null},d}(),_T=function(){function d(c){this.token=c,this.changeListener=null}return d.prototype.getToken=function(){return Promise.resolve(this.token)},d.prototype.invalidateToken=function(){},d.prototype.setChangeListener=function(c,p){var y=this;this.changeListener=p,c.enqueueRetryable(function(){return p(y.token.user)})},d.prototype.removeChangeListener=function(){this.changeListener=null},d}(),ta=function(){function d(c){var p=this;this.currentUser=is.UNAUTHENTICATED,this.oc=new Ps,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){p.cc++,p.currentUser=p.ac(),p.oc.resolve(),p.changeListener&&p.asyncQueue.enqueueRetryable(function(){return p.changeListener(p.currentUser)})};var y=function(b){Qt("FirebaseCredentialsProvider","Auth detected"),p.auth=b,p.auth.addAuthTokenListener(p.uc)};c.onInit(function(b){return y(b)}),setTimeout(function(){if(!p.auth){var b=c.getImmediate({optional:!0});b?y(b):(Qt("FirebaseCredentialsProvider","Auth not yet detected"),p.oc.resolve())}},0)}return d.prototype.getToken=function(){var c=this,p=this.cc,y=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(y).then(function(b){return c.cc!==p?(Qt("FirebaseCredentialsProvider","getToken aborted due to token change."),c.getToken()):b?(Ft("string"==typeof b.accessToken),new Yg(b.accessToken,c.currentUser)):null}):Promise.resolve(null)},d.prototype.invalidateToken=function(){this.forceRefresh=!0},d.prototype.setChangeListener=function(c,p){var y=this;this.asyncQueue=c,this.asyncQueue.enqueueRetryable(function(){return(0,V.mG)(y,void 0,void 0,function(){return(0,V.Jh)(this,function(b){switch(b.label){case 0:return[4,this.oc.promise];case 1:return b.sent(),[4,p(this.currentUser)];case 2:return b.sent(),this.changeListener=p,[2]}})})})},d.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},d.prototype.ac=function(){var c=this.auth&&this.auth.getUid();return Ft(null===c||"string"==typeof c),new is(c)},d}(),Qv=function(){function d(c,p,y){this.hc=c,this.lc=p,this.fc=y,this.type="FirstParty",this.user=is.FIRST_PARTY}return Object.defineProperty(d.prototype,"authHeaders",{get:function(){var c={"X-Goog-AuthUser":this.lc},p=this.hc.auth.getAuthHeaderValueForFirstParty([]);return p&&(c.Authorization=p),this.fc&&(c["X-Goog-Iam-Authorization-Token"]=this.fc),c},enumerable:!1,configurable:!0}),d}(),Mw=function(){function d(c,p,y){this.hc=c,this.lc=p,this.fc=y}return d.prototype.getToken=function(){return Promise.resolve(new Qv(this.hc,this.lc,this.fc))},d.prototype.setChangeListener=function(c,p){c.enqueueRetryable(function(){return p(is.FIRST_PARTY)})},d.prototype.removeChangeListener=function(){},d.prototype.invalidateToken=function(){},d}();function Qu(d,c,p){if(!p)throw new Rt(nt.INVALID_ARGUMENT,"Function "+d+"() cannot be called with an empty "+c+".")}function os(d,c){if(void 0===c)return{merge:!1};if(void 0!==c.mergeFields&&void 0!==c.merge)throw new Rt(nt.INVALID_ARGUMENT,"Invalid options passed to function "+d+'(): You cannot specify both "merge" and "mergeFields".');return c}function N_(d,c,p,y){if(!0===c&&!0===y)throw new Rt(nt.INVALID_ARGUMENT,d+" and "+p+" cannot be used together.")}function F_(d){if(!Mn.isDocumentKey(d))throw new Rt(nt.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+d+" has "+d.length+".")}function Ih(d){if(Mn.isDocumentKey(d))throw new Rt(nt.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+d+" has "+d.length+".")}function ba(d){if(void 0===d)return"undefined";if(null===d)return"null";if("string"==typeof d)return d.length>20&&(d=d.substring(0,20)+"..."),JSON.stringify(d);if("number"==typeof d||"boolean"==typeof d)return""+d;if("object"==typeof d){if(d instanceof Array)return"an array";var c=function(p){if(p.constructor){var y=/function\s+([^\s(]+)\s*\(/.exec(p.constructor.toString());if(y&&y.length>1)return y[1]}return null}(d);return c?"a custom "+c+" object":"an object"}return"function"==typeof d?"a function":Fn()}function Ei(d,c){if("_delegate"in d&&(d=d._delegate),!(d instanceof c)){if(c.name===d.constructor.name)throw new Rt(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var p=ba(d);throw new Rt(nt.INVALID_ARGUMENT,"Expected type '"+c.name+"', but it was: "+p)}return d}function af(d,c){if(c<=0)throw new Rt(nt.INVALID_ARGUMENT,"Function "+d+"() requires a positive number, but it was: "+c+".")}var L_=function(){function d(c){var p;if(void 0===c.host){if(void 0!==c.ssl)throw new Rt(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=c.host,this.ssl=null===(p=c.ssl)||void 0===p||p;if(this.credentials=c.credentials,this.ignoreUndefinedProperties=!!c.ignoreUndefinedProperties,void 0===c.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==c.cacheSizeBytes&&c.cacheSizeBytes<1048576)throw new Rt(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=c.cacheSizeBytes}this.experimentalForceLongPolling=!!c.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!c.experimentalAutoDetectLongPolling,this.useFetchStreams=!!c.useFetchStreams,N_("experimentalForceLongPolling",c.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",c.experimentalAutoDetectLongPolling)}return d.prototype.isEqual=function(c){return this.host===c.host&&this.ssl===c.ssl&&this.credentials===c.credentials&&this.cacheSizeBytes===c.cacheSizeBytes&&this.experimentalForceLongPolling===c.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===c.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===c.ignoreUndefinedProperties&&this.useFetchStreams===c.useFetchStreams},d}(),Qg=function(){function d(c,p){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new L_({}),this._settingsFrozen=!1,c instanceof Dh?(this._databaseId=c,this._credentials=new Jg):(this._app=c,this._databaseId=function(y){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Rt(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dh(y.options.projectId)}(c),this._credentials=new ta(p))}return Object.defineProperty(d.prototype,"app",{get:function(){if(!this._app)throw new Rt(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),d.prototype._setSettings=function(c){if(this._settingsFrozen)throw new Rt(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new L_(c),void 0!==c.credentials&&(this._credentials=function(p){if(!p)return new Jg;switch(p.type){case"gapi":var y=p.client;return Ft(!("object"!=typeof y||null===y||!y.auth||!y.auth.getAuthHeaderValueForFirstParty)),new Mw(y,p.sessionIndex||"0",p.iamToken||null);case"provider":return p.client;default:throw new Rt(nt.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(c.credentials))},d.prototype._getSettings=function(){return this._settings},d.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},d.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},d.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},d.prototype._terminate=function(){return(p=Iw.get(this))&&(Qt("ComponentProvider","Removing Datastore"),Iw.delete(this),p.terminate()),Promise.resolve();var p},d}(),Xi=function(){function d(c,p,y){this.converter=p,this._key=y,this.type="document",this.firestore=c}return Object.defineProperty(d.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"parent",{get:function(){return new za(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),d.prototype.withConverter=function(c){return new d(this.firestore,c,this._key)},d}(),na=function(){function d(c,p,y){this.converter=p,this._query=y,this.type="query",this.firestore=c}return d.prototype.withConverter=function(c){return new d(this.firestore,c,this._query)},d}(),za=function(d){function c(p,y,b){var E=this;return(E=d.call(this,p,y,ql(b))||this)._path=b,E.type="collection",E}return(0,V.ZT)(c,d),Object.defineProperty(c.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"parent",{get:function(){var p=this._path.popLast();return p.isEmpty()?null:new Xi(this.firestore,null,new Mn(p))},enumerable:!1,configurable:!0}),c.prototype.withConverter=function(p){return new c(this.firestore,p,this._path)},c}(na);function Mh(d,c){for(var p,y=[],b=2;b<arguments.length;b++)y[b-2]=arguments[b];if(d=(0,W.m9)(d),Qu("collection","path",c),d instanceof Qg)return Ih(p=_i.fromString.apply(_i,(0,V.ev)([c],y))),new za(d,null,p);if(!(d instanceof Xi||d instanceof za))throw new Rt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ih(p=_i.fromString.apply(_i,(0,V.ev)([d.path],y)).child(_i.fromString(c))),new za(d.firestore,null,p)}function Xu(d,c){for(var p,y=[],b=2;b<arguments.length;b++)y[b-2]=arguments[b];if(d=(0,W.m9)(d),1===arguments.length&&(c=Jo.u()),Qu("doc","path",c),d instanceof Qg)return F_(p=_i.fromString.apply(_i,(0,V.ev)([c],y))),new Xi(d,null,new Mn(p));if(!(d instanceof Xi||d instanceof za))throw new Rt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return F_(p=d._path.child(_i.fromString.apply(_i,(0,V.ev)([c],y)))),new Xi(d.firestore,d instanceof za?d.converter:null,new Mn(p))}function Xg(d,c){return d=(0,W.m9)(d),c=(0,W.m9)(c),(d instanceof Xi||d instanceof za)&&(c instanceof Xi||c instanceof za)&&d.firestore===c.firestore&&d.path===c.path&&d.converter===c.converter}function Ah(d,c){return d=(0,W.m9)(d),c=(0,W.m9)(c),d instanceof na&&c instanceof na&&d.firestore===c.firestore&&ys(d._query,c._query)&&d.converter===c.converter}var yT=function(){function d(){var c=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Zp(this,"async_queue_retry"),this.Ic=function(){var y=Fg();y&&Qt("AsyncQueue","Visibility state changed to "+y.visibilityState),c.Zi.Gi()};var p=Fg();p&&"function"==typeof p.addEventListener&&p.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(d.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),d.prototype.enqueueAndForget=function(c){this.enqueue(c)},d.prototype.enqueueAndForgetEvenWhileRestricted=function(c){this.Ac(),this.Rc(c)},d.prototype.enterRestrictedMode=function(c){if(!this._c){this._c=!0,this.Ec=c||!1;var p=Fg();p&&"function"==typeof p.removeEventListener&&p.removeEventListener("visibilitychange",this.Ic)}},d.prototype.enqueue=function(c){var p=this;if(this.Ac(),this._c)return new Promise(function(){});var y=new Ps;return this.Rc(function(){return p._c&&p.Ec?Promise.resolve():(c().then(y.resolve,y.reject),y.promise)}).then(function(){return y.promise})},d.prototype.enqueueRetryable=function(c){var p=this;this.enqueueAndForget(function(){return p.wc.push(c),p.bc()})},d.prototype.bc=function(){return(0,V.mG)(this,void 0,void 0,function(){var c,p=this;return(0,V.Jh)(this,function(y){switch(y.label){case 0:if(0===this.wc.length)return[3,5];y.label=1;case 1:return y.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return y.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Bu(c=y.sent()))throw c;return Qt("AsyncQueue","Operation failed with retryable error: "+c),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return p.bc()}),y.label=5;case 5:return[2]}})})},d.prototype.Rc=function(c){var p=this,y=this.dc.then(function(){return p.gc=!0,c().catch(function(b){throw p.yc=b,p.gc=!1,Qi("INTERNAL UNHANDLED ERROR: ",(M=(E=b).message||"",E.stack&&(M=E.stack.includes(E.message)?E.stack:E.message+"\n"+E.stack),M)),b;var E,M}).then(function(b){return p.gc=!1,b})});return this.dc=y,y},d.prototype.enqueueAfterDelay=function(c,p,y){var b=this;this.Ac(),this.Tc.indexOf(c)>-1&&(p=0);var E=S_.createAndSchedule(this,c,p,y,function(M){return b.vc(M)});return this.mc.push(E),E},d.prototype.Ac=function(){this.yc&&Fn()},d.prototype.verifyOperationInProgress=function(){},d.prototype.Pc=function(){return(0,V.mG)(this,void 0,void 0,function(){var c;return(0,V.Jh)(this,function(p){switch(p.label){case 0:return[4,c=this.dc];case 1:p.sent(),p.label=2;case 2:if(c!==this.dc)return[3,0];p.label=3;case 3:return[2]}})})},d.prototype.Vc=function(c){for(var p=0,y=this.mc;p<y.length;p++)if(y[p].timerId===c)return!0;return!1},d.prototype.Sc=function(c){var p=this;return this.Pc().then(function(){p.mc.sort(function(M,P){return M.targetTimeMs-P.targetTimeMs});for(var y=0,b=p.mc;y<b.length;y++){var E=b[y];if(E.skipDelay(),"all"!==c&&E.timerId===c)break}return p.Pc()})},d.prototype.Dc=function(c){this.Tc.push(c)},d.prototype.vc=function(c){var p=this.mc.indexOf(c);this.mc.splice(p,1)},d}();function kh(d){return function(c,p){if("object"!=typeof c||null===c)return!1;for(var y=c,b=0,E=["next","error","complete"];b<E.length;b++){var M=E[b];if(M in y&&"function"==typeof y[M])return!0}return!1}(d)}!function(){function d(){this._progressObserver={},this._taskCompletionResolver=new Ps,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}d.prototype.onProgress=function(c,p,y){this._progressObserver={next:c,error:p,complete:y}},d.prototype.catch=function(c){return this._taskCompletionResolver.promise.catch(c)},d.prototype.then=function(c,p){return this._taskCompletionResolver.promise.then(c,p)},d.prototype._completeWith=function(c){this._updateProgress(c),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(c)},d.prototype._failWith=function(c){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(c),this._taskCompletionResolver.reject(c)},d.prototype._updateProgress=function(c){this._lastProgress=c,this._progressObserver.next&&this._progressObserver.next(c)}}();var $r=function(d){function c(p,y){var b=this;return(b=d.call(this,p,y)||this).type="firestore",b._queue=new yT,b._persistenceKey="name"in p?p.name:"[DEFAULT]",b}return(0,V.ZT)(c,d),c.prototype._terminate=function(){return this._firestoreClient||kw(this),this._firestoreClient.terminate()},c}(Qg);function yo(d){return d._firestoreClient||kw(d),d._firestoreClient.verifyNotTerminated(),d._firestoreClient}function kw(d){var c,E,P,p=d._freezeSettings(),y=(E=(null===(c=d._app)||void 0===c?void 0:c.options.appId)||"",new Dw(d._databaseId,E,d._persistenceKey,(P=p).host,P.ssl,P.experimentalForceLongPolling,P.experimentalAutoDetectLongPolling,P.useFetchStreams));d._firestoreClient=new rf(d._credentials,d._queue,y)}function em(d,c,p){var y=this,b=new Ps;return d.asyncQueue.enqueue(function(){return(0,V.mG)(y,void 0,void 0,function(){var E;return(0,V.Jh)(this,function(M){switch(M.label){case 0:return M.trys.push([0,3,,4]),[4,Yu(d,p)];case 1:return M.sent(),[4,R_(d,c)];case 2:return M.sent(),b.resolve(),[3,4];case 3:if(!("FirebaseError"===(P=E=M.sent()).name?P.code===nt.FAILED_PRECONDITION||P.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&P instanceof DOMException)||22===P.code||20===P.code||11===P.code))throw E;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+E),b.reject(E),[3,4];case 4:return[2]}var P})})}).then(function(){return b.promise})}function wa(d){if(d._initialized||d._terminated)throw new Rt(nt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ga=function(){function d(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];for(var y=0;y<c.length;++y)if(0===c[y].length)throw new Rt(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ks(c)}return d.prototype.isEqual=function(c){return this._internalPath.isEqual(c._internalPath)},d}(),Yc=function(){function d(c){this._byteString=c}return d.fromBase64String=function(c){try{return new d(Xr.fromBase64String(c))}catch(p){throw new Rt(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+p)}},d.fromUint8Array=function(c){return new d(Xr.fromUint8Array(c))},d.prototype.toBase64=function(){return this._byteString.toBase64()},d.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},d.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},d.prototype.isEqual=function(c){return this._byteString.isEqual(c._byteString)},d}(),qa=function(d){this._methodName=d},lf=function(){function d(c,p){if(!isFinite(c)||c<-90||c>90)throw new Rt(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+c);if(!isFinite(p)||p<-180||p>180)throw new Rt(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+p);this._lat=c,this._long=p}return Object.defineProperty(d.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),d.prototype.isEqual=function(c){return this._lat===c._lat&&this._long===c._long},d.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},d.prototype._compareTo=function(c){return hi(this._lat,c._lat)||hi(this._long,c._long)},d}(),aD=/^__.*__$/,Ow=function(){function d(c,p,y){this.data=c,this.fieldMask=p,this.fieldTransforms=y}return d.prototype.toMutation=function(c,p){return null!==this.fieldMask?new Lc(c,this.data,this.fieldMask,p,this.fieldTransforms):new Fc(c,this.data,p,this.fieldTransforms)},d}(),vT=function(){function d(c,p,y){this.data=c,this.fieldMask=p,this.fieldTransforms=y}return d.prototype.toMutation=function(c,p){return new Lc(c,this.data,this.fieldMask,p,this.fieldTransforms)},d}();function bT(d){switch(d){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fn()}}var Rw=function(){function d(c,p,y,b,E,M){this.settings=c,this.databaseId=p,this.R=y,this.ignoreUndefinedProperties=b,void 0===E&&this.Cc(),this.fieldTransforms=E||[],this.fieldMask=M||[]}return Object.defineProperty(d.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),d.prototype.xc=function(c){return new d(Object.assign(Object.assign({},this.settings),c),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},d.prototype.kc=function(c){var p,y=null===(p=this.path)||void 0===p?void 0:p.child(c),b=this.xc({path:y,Fc:!1});return b.$c(c),b},d.prototype.Oc=function(c){var p,y=null===(p=this.path)||void 0===p?void 0:p.child(c),b=this.xc({path:y,Fc:!1});return b.Cc(),b},d.prototype.Mc=function(c){return this.xc({path:void 0,Fc:!0})},d.prototype.Lc=function(c){return no(c,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},d.prototype.contains=function(c){return void 0!==this.fieldMask.find(function(p){return c.isPrefixOf(p)})||void 0!==this.fieldTransforms.find(function(p){return c.isPrefixOf(p.field)})},d.prototype.Cc=function(){if(this.path)for(var c=0;c<this.path.length;c++)this.$c(this.path.get(c))},d.prototype.$c=function(c){if(0===c.length)throw this.Lc("Document fields must not be empty");if(bT(this.Nc)&&aD.test(c))throw this.Lc('Document fields cannot begin and end with "__"')},d}(),lD=function(){function d(c,p,y){this.databaseId=c,this.ignoreUndefinedProperties=p,this.R=y||qc(c)}return d.prototype.Uc=function(c,p,y,b){return void 0===b&&(b=!1),new Rw({Nc:c,methodName:p,qc:y,path:Ks.emptyPath(),Fc:!1,Bc:b},this.databaseId,this.R,this.ignoreUndefinedProperties)},d}();function Jc(d){var c=d._freezeSettings(),p=qc(d._databaseId);return new lD(d._databaseId,!!c.ignoreUndefinedProperties,p)}function Xv(d,c,p,y,b,E){void 0===E&&(E={});var M=d.Uc(E.merge||E.mergeFields?2:0,c,p,b);nb("Data must be an object, but it was:",M,y);var P,B,G=mn(y,M);if(E.merge)P=new Ra(M.fieldMask),B=M.fieldTransforms;else if(E.mergeFields){for(var te=[],fe=0,ye=E.mergeFields;fe<ye.length;fe++){var qe=ln(c,ye[fe],p);if(!M.contains(qe))throw new Rt(nt.INVALID_ARGUMENT,"Field '"+qe+"' is specified in your field mask but missing from your input data.");ib(te,qe)||te.push(qe)}P=new Ra(te),B=M.fieldTransforms.filter(function(ze){return P.covers(ze.field)})}else P=null,B=M.fieldTransforms;return new Ow(new oi(G),P,B)}var eb=function(d){function c(){return null!==d&&d.apply(this,arguments)||this}return(0,V.ZT)(c,d),c.prototype._toFieldTransform=function(p){if(2!==p.Nc)throw p.Lc(1===p.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return p.fieldMask.push(p.path),null},c.prototype.isEqual=function(p){return p instanceof c},c}(qa);function zo(d,c,p){return new Rw({Nc:3,qc:c.settings.qc,methodName:d._methodName,Fc:p},c.databaseId,c.R,c.ignoreUndefinedProperties)}var Ca=function(d){function c(){return null!==d&&d.apply(this,arguments)||this}return(0,V.ZT)(c,d),c.prototype._toFieldTransform=function(p){return new ma(p.path,new hl)},c.prototype.isEqual=function(p){return p instanceof c},c}(qa),tc=function(d){function c(p,y){var b=this;return(b=d.call(this,p)||this).Kc=y,b}return(0,V.ZT)(c,d),c.prototype._toFieldTransform=function(p){var y=zo(this,p,!0),b=this.Kc.map(function(M){return Qc(M,y)}),E=new ga(b);return new ma(p.path,E)},c.prototype.isEqual=function(p){return this===p},c}(qa),tb=function(d){function c(p,y){var b=this;return(b=d.call(this,p)||this).Kc=y,b}return(0,V.ZT)(c,d),c.prototype._toFieldTransform=function(p){var y=zo(this,p,!0),b=this.Kc.map(function(M){return Qc(M,y)}),E=new $l(b);return new ma(p.path,E)},c.prototype.isEqual=function(p){return this===p},c}(qa),Pw=function(d){function c(p,y){var b=this;return(b=d.call(this,p)||this).Qc=y,b}return(0,V.ZT)(c,d),c.prototype._toFieldTransform=function(p){var y=new Js(p.R,Fa(p.R,this.Qc));return new ma(p.path,y)},c.prototype.isEqual=function(p){return this===p},c}(qa);function Nt(d,c,p,y){var b=d.Uc(1,c,p);nb("Data must be an object, but it was:",b,y);var E=[],M=oi.empty();xu(y,function(B,G){var te=Mt(c,B,p);G=(0,W.m9)(G);var fe=b.Oc(te);if(G instanceof eb)E.push(te);else{var ye=Qc(G,fe);null!=ye&&(E.push(te),M.set(te,ye))}});var P=new Ra(E);return new vT(M,P,b.fieldTransforms)}function Rr(d,c,p,y,b,E){var M=d.Uc(1,c,p),P=[ln(c,y,p)],B=[b];if(E.length%2!=0)throw new Rt(nt.INVALID_ARGUMENT,"Function "+c+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var G=0;G<E.length;G+=2)P.push(ln(c,E[G])),B.push(E[G+1]);for(var te=[],fe=oi.empty(),ye=P.length-1;ye>=0;--ye)if(!ib(te,P[ye])){var qe=P[ye],ze=B[ye];ze=(0,W.m9)(ze);var st=M.Oc(qe);if(ze instanceof eb)te.push(qe);else{var Vt=Qc(ze,st);null!=Vt&&(te.push(qe),fe.set(qe,Vt))}}var tn=new Ra(te);return new vT(fe,tn,M.fieldTransforms)}function ed(d,c,p,y){return void 0===y&&(y=!1),Qc(p,d.Uc(y?4:3,c))}function Qc(d,c){if($n(d=(0,W.m9)(d)))return nb("Unsupported field value:",c,d),mn(d,c);if(d instanceof qa)return function(p,y){if(!bT(y.Nc))throw y.Lc(p._methodName+"() can only be used with update() and set()");if(!y.path)throw y.Lc(p._methodName+"() is not currently supported inside arrays");var b=p._toFieldTransform(y);b&&y.fieldTransforms.push(b)}(d,c),null;if(void 0===d&&c.ignoreUndefinedProperties)return null;if(c.path&&c.fieldMask.push(c.path),d instanceof Array){if(c.settings.Fc&&4!==c.Nc)throw c.Lc("Nested arrays are not supported");return function(p,y){for(var b=[],E=0,M=0,P=p;M<P.length;M++){var B=Qc(P[M],y.Mc(E));null==B&&(B={nullValue:"NULL_VALUE"}),b.push(B),E++}return{arrayValue:{values:b}}}(d,c)}return function(p,y){if(null===(p=(0,W.m9)(p)))return{nullValue:"NULL_VALUE"};if("number"==typeof p)return Fa(y.R,p);if("boolean"==typeof p)return{booleanValue:p};if("string"==typeof p)return{stringValue:p};if(p instanceof Date){var b=Li.fromDate(p);return{timestampValue:eh(y.R,b)}}if(p instanceof Li)return b=new Li(p.seconds,1e3*Math.floor(p.nanoseconds/1e3)),{timestampValue:eh(y.R,b)};if(p instanceof lf)return{geoPointValue:{latitude:p.latitude,longitude:p.longitude}};if(p instanceof Yc)return{bytesValue:_v(y.R,p._byteString)};if(p instanceof Xi){var E=p.firestore._databaseId;if(!E.isEqual(b=y.databaseId))throw y.Lc("Document reference is for database "+E.projectId+"/"+E.database+" but should be for database "+b.projectId+"/"+b.database);return{referenceValue:R(p.firestore._databaseId||y.databaseId,p._key.path)}}throw y.Lc("Unsupported field value: "+ba(p))}(d,c)}function mn(d,c){var p={};return Gd(d)?c.path&&c.path.length>0&&c.fieldMask.push(c.path):xu(d,function(y,b){var E=Qc(b,c.kc(y));null!=E&&(p[y]=E)}),{mapValue:{fields:p}}}function $n(d){return!("object"!=typeof d||null===d||d instanceof Array||d instanceof Date||d instanceof Li||d instanceof lf||d instanceof Yc||d instanceof Xi||d instanceof qa)}function nb(d,c,p){if(!$n(p)||"object"!=typeof(b=p)||null===b||Object.getPrototypeOf(b)!==Object.prototype&&null!==Object.getPrototypeOf(b)){var y=ba(p);throw c.Lc("an object"===y?d+" a custom object":d+" "+y)}var b}function ln(d,c,p){if((c=(0,W.m9)(c))instanceof Ga)return c._internalPath;if("string"==typeof c)return Mt(d,c);throw no("Field path arguments must be of type string or FieldPath.",d,!1,void 0,p)}var ot=new RegExp("[~\\*/\\[\\]]");function Mt(d,c,p){if(c.search(ot)>=0)throw no("Invalid field path ("+c+"). Paths must not contain '~', '*', '/', '[', or ']'",d,!1,void 0,p);try{return(new(Ga.bind.apply(Ga,(0,V.ev)([void 0],c.split(".")))))._internalPath}catch{throw no("Invalid field path ("+c+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",d,!1,void 0,p)}}function no(d,c,p,y,b){var E=y&&!y.isEmpty(),M=void 0!==b,P="Function "+c+"() called with invalid data";p&&(P+=" (via `toFirestore()`)");var B="";return(E||M)&&(B+=" (found",E&&(B+=" in field "+y),M&&(B+=" in document "+b),B+=")"),new Rt(nt.INVALID_ARGUMENT,(P+=". ")+d+B)}function ib(d,c){return d.some(function(p){return p.isEqual(c)})}var td=function(){function d(c,p,y,b,E){this._firestore=c,this._userDataWriter=p,this._key=y,this._document=b,this._converter=E}return Object.defineProperty(d.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"ref",{get:function(){return new Xi(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),d.prototype.exists=function(){return null!==this._document},d.prototype.data=function(){if(this._document){if(this._converter){var c=new cf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(c)}return this._userDataWriter.convertValue(this._document.data.value)}},d.prototype.get=function(c){if(this._document){var p=this._document.data.field(uf("DocumentSnapshot.get",c));if(null!==p)return this._userDataWriter.convertValue(p)}},d}(),cf=function(d){function c(){return null!==d&&d.apply(this,arguments)||this}return(0,V.ZT)(c,d),c.prototype.data=function(){return d.prototype.data.call(this)},c}(td);function uf(d,c){return"string"==typeof c?Mt(d,c):c instanceof Ga?c._internalPath:c._delegate._internalPath}var Za=function(){function d(c,p){this.hasPendingWrites=c,this.fromCache=p}return d.prototype.isEqual=function(c){return this.hasPendingWrites===c.hasPendingWrites&&this.fromCache===c.fromCache},d}(),$a=function(d){function c(p,y,b,E,M,P){var B=this;return(B=d.call(this,p,y,b,E,P)||this)._firestore=p,B._firestoreImpl=p,B.metadata=M,B}return(0,V.ZT)(c,d),c.prototype.exists=function(){return d.prototype.exists.call(this)},c.prototype.data=function(p){if(void 0===p&&(p={}),this._document){if(this._converter){var y=new nc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(y,p)}return this._userDataWriter.convertValue(this._document.data.value,p.serverTimestamps)}},c.prototype.get=function(p,y){if(void 0===y&&(y={}),this._document){var b=this._document.data.field(uf("DocumentSnapshot.get",p));if(null!==b)return this._userDataWriter.convertValue(b,y.serverTimestamps)}},c}(td),nc=function(d){function c(){return null!==d&&d.apply(this,arguments)||this}return(0,V.ZT)(c,d),c.prototype.data=function(p){return void 0===p&&(p={}),d.prototype.data.call(this,p)},c}($a),nd=function(){function d(c,p,y,b){this._firestore=c,this._userDataWriter=p,this._snapshot=b,this.metadata=new Za(b.hasPendingWrites,b.fromCache),this.query=y}return Object.defineProperty(d.prototype,"docs",{get:function(){var c=[];return this.forEach(function(p){return c.push(p)}),c},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),d.prototype.forEach=function(c,p){var y=this;this._snapshot.docs.forEach(function(b){c.call(p,new nc(y._firestore,y._userDataWriter,b.key,b,new Za(y._snapshot.mutatedKeys.has(b.key),y._snapshot.fromCache),y.query.converter))})},d.prototype.docChanges=function(c){void 0===c&&(c={});var p=!!c.includeMetadataChanges;if(p&&this._snapshot.excludesMetadataChanges)throw new Rt(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===p||(this._cachedChanges=function(y,b){if(y._snapshot.oldDocs.isEmpty()){var E=0;return y._snapshot.docChanges.map(function(P){return{type:"added",doc:new nc(y._firestore,y._userDataWriter,P.doc.key,P.doc,new Za(y._snapshot.mutatedKeys.has(P.doc.key),y._snapshot.fromCache),y.query.converter),oldIndex:-1,newIndex:E++}})}var M=y._snapshot.oldDocs;return y._snapshot.docChanges.filter(function(P){return b||3!==P.type}).map(function(P){var B=new nc(y._firestore,y._userDataWriter,P.doc.key,P.doc,new Za(y._snapshot.mutatedKeys.has(P.doc.key),y._snapshot.fromCache),y.query.converter),G=-1,te=-1;return 0!==P.type&&(G=M.indexOf(P.doc.key),M=M.delete(P.doc.key)),1!==P.type&&(te=(M=M.add(P.doc)).indexOf(P.doc.key)),{type:wT(P.type),doc:B,oldIndex:G,newIndex:te}})}(this,p),this._cachedChangesIncludeMetadataChanges=p),this._cachedChanges},d}();function wT(d){switch(d){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fn()}}function rb(d,c){return d instanceof $a&&c instanceof $a?d._firestore===c._firestore&&d._key.isEqual(c._key)&&(null===d._document?null===c._document:d._document.isEqual(c._document))&&d._converter===c._converter:d instanceof nd&&c instanceof nd&&d._firestore===c._firestore&&Ah(d.query,c.query)&&d.metadata.isEqual(c.metadata)&&d._snapshot.isEqual(c._snapshot)}function tm(d){if(Du(d)&&0===d.explicitOrderBy.length)throw new Rt(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ei=function(){};function ia(d){for(var c=[],p=1;p<arguments.length;p++)c[p-1]=arguments[p];for(var y=0,b=c;y<b.length;y++){var E=b[y];d=E._apply(d)}return d}var V_=function(d){function c(p,y,b){var E=this;return(E=d.call(this)||this).jc=p,E.Wc=y,E.Gc=b,E.type="where",E}return(0,V.ZT)(c,d),c.prototype._apply=function(p){var E,P,y=Jc(p.firestore),b=function(E,M,P,B,G,te,fe){var ye;if(G.isKeyField()){if("array-contains"===te||"array-contains-any"===te)throw new Rt(nt.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+te+"' queries on FieldPath.documentId().");if("in"===te||"not-in"===te){on(fe,te);for(var qe=[],ze=0,st=fe;ze<st.length;ze++)qe.push(Pr(B,E,st[ze]));ye={arrayValue:{values:qe}}}else ye=Pr(B,E,fe)}else"in"!==te&&"not-in"!==te&&"array-contains-any"!==te||on(fe,te),ye=ed(P,"where",fe,"in"===te||"not-in"===te);var tn=ir.create(G,te,ye);return function(Rn,Un){if(Un.g()){var li=Wd(Rn);if(null!==li&&!li.isEqual(Un.field))throw new Rt(nt.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+li.toString()+"' and '"+Un.field.toString()+"'");var Di=ug(Rn);null!==Di&&nm(0,Un.field,Di)}var Zi=function(vo,gf){for(var Nh=0,z_=vo.filters;Nh<z_.length;Nh++){var Lw=z_[Nh];if(gf.indexOf(Lw.op)>=0)return Lw.op}return null}(Rn,function(vo){switch(vo){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Un.op));if(null!==Zi)throw new Rt(nt.INVALID_ARGUMENT,Zi===Un.op?"Invalid query. You cannot use more than one '"+Un.op.toString()+"' filter.":"Invalid query. You cannot use '"+Un.op.toString()+"' filters with '"+Zi.toString()+"' filters.")}(E,tn),tn}(p._query,0,y,p.firestore._databaseId,this.jc,this.Wc,this.Gc);return new na(p.firestore,p.converter,(P=(E=p._query).filters.concat([b]),new Os(E.path,E.collectionGroup,E.explicitOrderBy.slice(),P,E.limit,E.limitType,E.startAt,E.endAt)))},c}(ei),Tr=function(d){function c(p,y){var b=this;return(b=d.call(this)||this).jc=p,b.zc=y,b.type="orderBy",b}return(0,V.ZT)(c,d),c.prototype._apply=function(p){var b,M,y=function(b,E,M){if(null!==b.startAt)throw new Rt(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==b.endAt)throw new Rt(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var P=new gr(E,M);return function(B,G){if(null===ug(B)){var te=Wd(B);null!==te&&nm(0,te,G.field)}}(b,P),P}(p._query,this.jc,this.zc);return new na(p.firestore,p.converter,(M=(b=p._query).explicitOrderBy.concat([y]),new Os(b.path,b.collectionGroup,M,b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)))},c}(ei),Xn=function(d){function c(p,y,b){var E=this;return(E=d.call(this)||this).type=p,E.Hc=y,E.Jc=b,E}return(0,V.ZT)(c,d),c.prototype._apply=function(p){return new na(p.firestore,p.converter,xp(p._query,this.Hc,this.Jc))},c}(ei),df=function(d){function c(p,y,b){var E=this;return(E=d.call(this)||this).type=p,E.Yc=y,E.Xc=b,E}return(0,V.ZT)(c,d),c.prototype._apply=function(p){var b,E,y=Nw(p,this.type,this.Yc,this.Xc);return new na(p.firestore,p.converter,(E=y,new Os((b=p._query).path,b.collectionGroup,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,E,b.endAt)))},c}(ei),xi=function(d){function c(p,y,b){var E=this;return(E=d.call(this)||this).type=p,E.Yc=y,E.Xc=b,E}return(0,V.ZT)(c,d),c.prototype._apply=function(p){var b,E,y=Nw(p,this.type,this.Yc,this.Xc);return new na(p.firestore,p.converter,(E=y,new Os((b=p._query).path,b.collectionGroup,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,E)))},c}(ei);function Nw(d,c,p,y){if(p[0]=(0,W.m9)(p[0]),p[0]instanceof td)return function(E,M,P,B,G){if(!B)throw new Rt(nt.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+P+"().");for(var te=[],fe=0,ye=_s(E);fe<ye.length;fe++){var qe=ye[fe];if(qe.field.isKeyField())te.push(ji(M,B.key));else{var ze=B.data.field(qe.field);if(t_(ze))throw new Rt(nt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+qe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ze){var st=qe.field.canonicalString();throw new Rt(nt.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+st+"' (used as the orderBy) does not exist.")}te.push(ze)}}return new Tp(te,G)}(d._query,d.firestore._databaseId,c,p[0]._document,y);var b=Jc(d.firestore);return function(E,M,P,B,G,te){var fe=E.explicitOrderBy;if(G.length>fe.length)throw new Rt(nt.INVALID_ARGUMENT,"Too many arguments provided to "+B+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var ye=[],qe=0;qe<G.length;qe++){var ze=G[qe];if(fe[qe].field.isKeyField()){if("string"!=typeof ze)throw new Rt(nt.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+B+"(), but got a "+typeof ze);if(!dg(E)&&-1!==ze.indexOf("/"))throw new Rt(nt.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+B+"() must be a plain document ID, but '"+ze+"' contains a slash.");var st=E.path.child(_i.fromString(ze));if(!Mn.isDocumentKey(st))throw new Rt(nt.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+B+"() must result in a valid document path, but '"+st+"' is not because it contains an odd number of segments.");var Vt=new Mn(st);ye.push(ji(M,Vt))}else{var tn=ed(P,B,ze);ye.push(tn)}}return new Tp(ye,te)}(d._query,d.firestore._databaseId,b,c,p,y)}function Pr(d,c,p){if("string"==typeof(p=(0,W.m9)(p))){if(""===p)throw new Rt(nt.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!dg(c)&&-1!==p.indexOf("/"))throw new Rt(nt.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+p+"' contains a '/' character.");var y=c.path.child(_i.fromString(p));if(!Mn.isDocumentKey(y))throw new Rt(nt.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+y+"' is not because it has an odd number of segments ("+y.length+").");return ji(d,new Mn(y))}if(p instanceof Xi)return ji(d,p._key);throw new Rt(nt.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ba(p)+".")}function on(d,c){if(!Array.isArray(d)||0===d.length)throw new Rt(nt.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+c.toString()+"' filters.");if(d.length>10)throw new Rt(nt.INVALID_ARGUMENT,"Invalid Query. '"+c.toString()+"' filters support a maximum of 10 elements in the value array.")}function nm(d,c,p){if(!p.isEqual(c))throw new Rt(nt.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+c.toString()+"' and so you must also use '"+c.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+p.toString()+"' instead.")}var ss=function(){function d(){}return d.prototype.convertValue=function(c,p){switch(void 0===p&&(p="none"),Ho(c)){case 0:return null;case 1:return c.booleanValue;case 2:return Ci(c.integerValue||c.doubleValue);case 3:return this.convertTimestamp(c.timestampValue);case 4:return this.convertServerTimestamp(c,p);case 5:return c.stringValue;case 6:return this.convertBytes(ar(c.bytesValue));case 7:return this.convertReference(c.referenceValue);case 8:return this.convertGeoPoint(c.geoPointValue);case 9:return this.convertArray(c.arrayValue,p);case 10:return this.convertObject(c.mapValue,p);default:throw Fn()}},d.prototype.convertObject=function(c,p){var y=this,b={};return xu(c.fields,function(E,M){b[E]=y.convertValue(M,p)}),b},d.prototype.convertGeoPoint=function(c){return new lf(Ci(c.latitude),Ci(c.longitude))},d.prototype.convertArray=function(c,p){var y=this;return(c.values||[]).map(function(b){return y.convertValue(b,p)})},d.prototype.convertServerTimestamp=function(c,p){switch(p){case"previous":var y=St(c);return null==y?null:this.convertValue(y,p);case"estimate":return this.convertTimestamp(br(c));default:return null}},d.prototype.convertTimestamp=function(c){var p=Pa(c);return new Li(p.seconds,p.nanos)},d.prototype.convertDocumentKey=function(c,p){var y=_i.fromString(c);Ft(wg(y));var b=new Dh(y.get(1),y.get(3)),E=new Mn(y.popFirst(5));return b.isEqual(p)||Qi("Document "+E+" contains a document reference within a different database ("+b.projectId+"/"+b.database+") which is not supported. It will be treated as a reference in the current database ("+p.projectId+"/"+p.database+") instead."),E},d}();function bl(d,c,p){return d?p&&(p.merge||p.mergeFields)?d.toFirestore(c,p):d.toFirestore(c):c}var H_=function(d){function c(p){var y=this;return(y=d.call(this)||this).firestore=p,y}return(0,V.ZT)(c,d),c.prototype.convertBytes=function(p){return new Yc(p)},c.prototype.convertReference=function(p){var y=this.convertDocumentKey(p,this.firestore._databaseId);return new Xi(this.firestore,null,y)},c}(ss),B_=function(){function d(c,p){this._firestore=c,this._commitHandler=p,this._mutations=[],this._committed=!1,this._dataReader=Jc(c)}return d.prototype.set=function(c,p,y){this._verifyNotCommitted();var b=Xc(c,this._firestore),E=bl(b.converter,p,y),M=Xv(this._dataReader,"WriteBatch.set",b._key,E,null!==b.converter,y);return this._mutations.push(M.toMutation(b._key,zr.none())),this},d.prototype.update=function(c,p,y){for(var b=[],E=3;E<arguments.length;E++)b[E-3]=arguments[E];this._verifyNotCommitted();var M,P=Xc(c,this._firestore);return M="string"==typeof(p=(0,W.m9)(p))||p instanceof Ga?Rr(this._dataReader,"WriteBatch.update",P._key,p,y,b):Nt(this._dataReader,"WriteBatch.update",P._key,p),this._mutations.push(M.toMutation(P._key,zr.exists(!0))),this},d.prototype.delete=function(c){this._verifyNotCommitted();var p=Xc(c,this._firestore);return this._mutations=this._mutations.concat(new Ru(p._key,zr.none())),this},d.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},d.prototype._verifyNotCommitted=function(){if(this._committed)throw new Rt(nt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},d}();function Xc(d,c){if((d=(0,W.m9)(d)).firestore!==c)throw new Rt(nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return d}var ic=function(d){function c(p){var y=this;return(y=d.call(this)||this).firestore=p,y}return(0,V.ZT)(c,d),c.prototype.convertBytes=function(p){return new Yc(p)},c.prototype.convertReference=function(p){var y=this.convertDocumentKey(p,this.firestore._databaseId);return new Xi(this.firestore,null,y)},c}(ss);function Ns(d,c,p){d=Ei(d,Xi);var y=Ei(d.firestore,$r),b=bl(d.converter,c,p);return hf(y,[Xv(Jc(y),"setDoc",d._key,b,null!==d.converter,p).toMutation(d._key,zr.none())])}function U_(d,c,p){for(var y=[],b=3;b<arguments.length;b++)y[b-3]=arguments[b];d=Ei(d,Xi);var E=Ei(d.firestore,$r),M=Jc(E);return hf(E,[("string"==typeof(c=(0,W.m9)(c))||c instanceof Ga?Rr(M,"updateDoc",d._key,c,p,y):Nt(M,"updateDoc",d._key,c)).toMutation(d._key,zr.exists(!0))])}function ob(d){for(var c,p,y,b=[],E=1;E<arguments.length;E++)b[E-1]=arguments[E];d=(0,W.m9)(d);var M={includeMetadataChanges:!1},P=0;"object"!=typeof b[P]||kh(b[P])||(M=b[P],P++);var B,G,te,fe={includeMetadataChanges:M.includeMetadataChanges};if(kh(b[P])){var ye=b[P];b[P]=null===(c=ye.next)||void 0===c?void 0:c.bind(ye),b[P+1]=null===(p=ye.error)||void 0===p?void 0:p.bind(ye),b[P+2]=null===(y=ye.complete)||void 0===y?void 0:y.bind(ye)}if(d instanceof Xi)G=Ei(d.firestore,$r),te=ql(d._key.path),B={next:function(st){b[P]&&b[P](wl(G,d,st))},error:b[P+1],complete:b[P+2]};else{var qe=Ei(d,na);G=Ei(qe.firestore,$r),te=qe._query;var ze=new ic(G);B={next:function(st){b[P]&&b[P](new nd(G,ze,qe,st))},error:b[P+1],complete:b[P+2]},tm(d._query)}return function(st,Vt,tn,Rn){var Un=this,li=new Kv(Rn),Di=new Th(Vt,li,tn);return st.asyncQueue.enqueueAndForget(function(){return(0,V.mG)(Un,void 0,void 0,function(){var Zi;return(0,V.Jh)(this,function(vo){switch(vo.label){case 0:return Zi=Jp,[4,Sh(st)];case 1:return[2,Zi.apply(void 0,[vo.sent(),Di])]}})})}),function(){li.Wo(),st.asyncQueue.enqueueAndForget(function(){return(0,V.mG)(Un,void 0,void 0,function(){var Zi;return(0,V.Jh)(this,function(vo){switch(vo.label){case 0:return Zi=Qp,[4,Sh(st)];case 1:return[2,Zi.apply(void 0,[vo.sent(),Di])]}})})})}}(yo(G),te,fe,B)}function hf(d,c){return function(p,y){var b=this,E=new Ps;return p.asyncQueue.enqueueAndForget(function(){return(0,V.mG)(b,void 0,void 0,function(){var M;return(0,V.Jh)(this,function(P){switch(P.label){case 0:return M=$c,[4,P_(p)];case 1:return[2,M.apply(void 0,[P.sent(),y,E])]}})})}),E.promise}(yo(d),c)}function wl(d,c,p){var y=p.docs.get(c._key),b=new ic(d);return new $a(d,b,c._key,y,new Za(p.hasPendingWrites,p.fromCache),c.converter)}var sb=function(d){function c(p,y){var b=this;return(b=d.call(this,p,y)||this)._firestore=p,b}return(0,V.ZT)(c,d),c.prototype.get=function(p){var y=this,b=Xc(p,this._firestore),E=new ic(this._firestore);return d.prototype.get.call(this,p).then(function(M){return new $a(y._firestore,E,b._key,M._document,new Za(!1,!1),b.converter)})},c}(function(){function d(c,p){this._firestore=c,this._transaction=p,this._dataReader=Jc(c)}return d.prototype.get=function(c){var p=this,y=Xc(c,this._firestore),b=new H_(this._firestore);return this._transaction.lookup([y._key]).then(function(E){if(!E||1!==E.length)return Fn();var M=E[0];if(M.isFoundDocument())return new td(p._firestore,b,M.key,M,y.converter);if(M.isNoDocument())return new td(p._firestore,b,y._key,null,y.converter);throw Fn()})},d.prototype.set=function(c,p,y){var b=Xc(c,this._firestore),E=bl(b.converter,p,y),M=Xv(this._dataReader,"Transaction.set",b._key,E,null!==b.converter,y);return this._transaction.set(b._key,M),this},d.prototype.update=function(c,p,y){for(var b=[],E=3;E<arguments.length;E++)b[E-3]=arguments[E];var M,P=Xc(c,this._firestore);return M="string"==typeof(p=(0,W.m9)(p))||p instanceof Ga?Rr(this._dataReader,"Transaction.update",P._key,p,y,b):Nt(this._dataReader,"Transaction.update",P._key,p),this._transaction.update(P._key,M),this},d.prototype.delete=function(c){var p=Xc(c,this._firestore);return this._transaction.delete(p._key),this},d}());function et(){if(typeof Uint8Array>"u")throw new Rt(nt.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function im(){if(typeof atob>"u")throw new Rt(nt.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Wa=function(){function d(c){this._delegate=c}return d.fromBase64String=function(c){return im(),new d(Yc.fromBase64String(c))},d.fromUint8Array=function(c){return et(),new d(Yc.fromUint8Array(c))},d.prototype.toBase64=function(){return im(),this._delegate.toBase64()},d.prototype.toUint8Array=function(){return et(),this._delegate.toUint8Array()},d.prototype.isEqual=function(c){return this._delegate.isEqual(c._delegate)},d.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},d}(),Fw=function(){function d(){}return d.prototype.enableIndexedDbPersistence=function(c,p){return function(y,b){wa(y=Ei(y,$r));var E=yo(y),M=y._freezeSettings(),P=new k_;return em(E,P,new Wv(P,M.cacheSizeBytes,b?.forceOwnership))}(c._delegate,{forceOwnership:p})},d.prototype.enableMultiTabIndexedDbPersistence=function(c){return function(p){wa(p=Ei(p,$r));var y=yo(p),b=p._freezeSettings(),E=new k_;return em(y,E,new gT(E,b.cacheSizeBytes))}(c._delegate)},d.prototype.clearIndexedDbPersistence=function(c){return function(p){var y=this;if(p._initialized&&!p._terminated)throw new Rt(nt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var b=new Ps;return p._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,V.mG)(y,void 0,void 0,function(){var E;return(0,V.Jh)(this,function(M){switch(M.label){case 0:return M.trys.push([0,2,,3]),[4,function(P){return(0,V.mG)(this,void 0,void 0,function(){return(0,V.Jh)(this,function(G){switch(G.label){case 0:return oh.yt()?[4,oh.delete(P+"main")]:[2,Promise.resolve()];case 1:return G.sent(),[2]}})})}(xv(p._databaseId,p._persistenceKey))];case 1:return M.sent(),b.resolve(),[3,3];case 2:return E=M.sent(),b.reject(E),[3,3];case 3:return[2]}})})}),b.promise}(c._delegate)},d}(),Rh=function(){function d(c,p,y){var b=this;this._delegate=p,this.Zc=y,this.INTERNAL={delete:function(){return b.terminate()}},c instanceof Dh||(this.tu=c)}return Object.defineProperty(d.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),d.prototype.settings=function(c){var p=this._delegate._getSettings();c.merge||p.host===c.host||ll("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),c.merge&&delete(c=Object.assign(Object.assign({},p),c)).merge,this._delegate._setSettings(c)},d.prototype.useEmulator=function(c,p,y){void 0===y&&(y={}),function(b,E,M,P){var B;void 0===P&&(P={});var G=(b=Ei(b,Qg))._getSettings();if("firestore.googleapis.com"!==G.host&&G.host!==E&&ll("Host has been set in both settings() and useEmulator(), emulator host will be used"),b._setSettings(Object.assign(Object.assign({},G),{host:E+":"+M,ssl:!1})),P.mockUserToken){var te,fe;if("string"==typeof P.mockUserToken)te=P.mockUserToken,fe=is.MOCK_USER;else{te=(0,W.Sg)(P.mockUserToken,null===(B=b._app)||void 0===B?void 0:B.options.projectId);var ye=P.mockUserToken.sub||P.mockUserToken.user_id;if(!ye)throw new Rt(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");fe=new is(ye)}b._credentials=new _T(new Yg(te,fe))}}(this._delegate,c,p,y)},d.prototype.enableNetwork=function(){return function(c){var p=this;return c.asyncQueue.enqueue(function(){return(0,V.mG)(p,void 0,void 0,function(){var y,b;return(0,V.Jh)(this,function(E){switch(E.label){case 0:return[4,sf(c)];case 1:return y=E.sent(),[4,to(c)];case 2:return b=E.sent(),[2,(y.setNetworkEnabled(!0),M=b,P=It(M),P.Or.delete(0),qu(P))]}var M,P})})})}(yo(Ei(this._delegate,$r)))},d.prototype.disableNetwork=function(){return function(c){var p=this;return c.asyncQueue.enqueue(function(){return(0,V.mG)(p,void 0,void 0,function(){var y,b;return(0,V.Jh)(this,function(E){switch(E.label){case 0:return[4,sf(c)];case 1:return y=E.sent(),[4,to(c)];case 2:return b=E.sent(),[2,(y.setNetworkEnabled(!1),function(M){return(0,V.mG)(this,void 0,void 0,function(){var P;return(0,V.Jh)(this,function(B){switch(B.label){case 0:return(P=It(M)).Or.add(0),[4,Zu(P)];case 1:return B.sent(),P.Br.set("Offline"),[2]}})})}(b))]}})})})}(yo(Ei(this._delegate,$r)))},d.prototype.enablePersistence=function(c){var p=!1,y=!1;return c&&N_("synchronizeTabs",p=!!c.synchronizeTabs,"experimentalForceOwningTab",y=!!c.experimentalForceOwningTab),p?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,y)},d.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},d.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},d.prototype.waitForPendingWrites=function(){return function(c){var p=this,y=new Ps;return c.asyncQueue.enqueueAndForget(function(){return(0,V.mG)(p,void 0,void 0,function(){var b;return(0,V.Jh)(this,function(E){switch(E.label){case 0:return b=qg,[4,P_(c)];case 1:return[2,b.apply(void 0,[E.sent(),y])]}})})}),y.promise}(yo(Ei(this._delegate,$r)))},d.prototype.onSnapshotsInSync=function(c){return y=c,function(b,E){var M=this,P=new Kv(E);return b.asyncQueue.enqueueAndForget(function(){return(0,V.mG)(M,void 0,void 0,function(){var B;return(0,V.Jh)(this,function(G){switch(G.label){case 0:return B=function(te,fe){It(te).Gr.add(fe),fe.next()},[4,Sh(b)];case 1:return[2,B.apply(void 0,[G.sent(),P])]}})})}),function(){P.Wo(),b.asyncQueue.enqueueAndForget(function(){return(0,V.mG)(M,void 0,void 0,function(){var B;return(0,V.Jh)(this,function(G){switch(G.label){case 0:return B=function(te,fe){It(te).Gr.delete(fe)},[4,Sh(b)];case 1:return[2,B.apply(void 0,[G.sent(),P])]}})})})}}(yo(Ei(this._delegate,$r)),kh(y)?y:{next:y});var y},Object.defineProperty(d.prototype,"app",{get:function(){if(!this.tu)throw new Rt(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),d.prototype.collection=function(c){try{return new Vi(this,Mh(this._delegate,c))}catch(p){throw Cs(p,"collection()","Firestore.collection()")}},d.prototype.doc=function(c){try{return new ff(this,Xu(this._delegate,c))}catch(p){throw Cs(p,"doc()","Firestore.doc()")}},d.prototype.collectionGroup=function(c){try{return new cr(this,function(p,y){if(p=Ei(p,Qg),Qu("collectionGroup","collection id",y),y.indexOf("/")>=0)throw new Rt(nt.INVALID_ARGUMENT,"Invalid collection ID '"+y+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new na(p,null,(b=y,new Os(_i.emptyPath(),b)));var b}(this._delegate,c))}catch(p){throw Cs(p,"collectionGroup()","Firestore.collectionGroup()")}},d.prototype.runTransaction=function(c){var y,p=this;return function(E,M){var P=this,B=new Ps;return E.asyncQueue.enqueueAndForget(function(){return(0,V.mG)(P,void 0,void 0,function(){var G;return(0,V.Jh)(this,function(te){switch(te.label){case 0:return[4,(fe=E,Ju(fe).then(function(ye){return ye.datastore}))];case 1:return G=te.sent(),new O_(E.asyncQueue,G,M,B).run(),[2]}var fe})})}),B.promise}(yo(y=this._delegate),function(E){return function(y){return c(new oc(p,y))}(new sb(y,E))})},d.prototype.batch=function(){var c=this;return yo(this._delegate),new ab(new B_(this._delegate,function(p){return hf(c._delegate,p)}))},d.prototype.loadBundle=function(c){throw new Rt(nt.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},d.prototype.namedQuery=function(c){throw new Rt(nt.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},d}(),Cl=function(d){function c(p){var y=this;return(y=d.call(this)||this).firestore=p,y}return(0,V.ZT)(c,d),c.prototype.convertBytes=function(p){return new Wa(new Yc(p))},c.prototype.convertReference=function(p){var y=this.convertDocumentKey(p,this.firestore._databaseId);return ff.eu(y,this.firestore,null)},c}(ss),oc=function(){function d(c,p){this._firestore=c,this._delegate=p,this._userDataWriter=new Cl(c)}return d.prototype.get=function(c){var p=this,y=rd(c);return this._delegate.get(y).then(function(b){return new Tl(p._firestore,new $a(p._firestore._delegate,p._userDataWriter,b._key,b._document,b.metadata,y.converter))})},d.prototype.set=function(c,p,y){var b=rd(c);return y?(os("Transaction.set",y),this._delegate.set(b,p,y)):this._delegate.set(b,p),this},d.prototype.update=function(c,p,y){for(var b,E=[],M=3;M<arguments.length;M++)E[M-3]=arguments[M];var P=rd(c);return 2===arguments.length?this._delegate.update(P,p):(b=this._delegate).update.apply(b,(0,V.ev)([P,p,y],E)),this},d.prototype.delete=function(c){var p=rd(c);return this._delegate.delete(p),this},d}(),ab=function(){function d(c){this._delegate=c}return d.prototype.set=function(c,p,y){var b=rd(c);return y?(os("WriteBatch.set",y),this._delegate.set(b,p,y)):this._delegate.set(b,p),this},d.prototype.update=function(c,p,y){for(var b,E=[],M=3;M<arguments.length;M++)E[M-3]=arguments[M];var P=rd(c);return 2===arguments.length?this._delegate.update(P,p):(b=this._delegate).update.apply(b,(0,V.ev)([P,p,y],E)),this},d.prototype.delete=function(c){var p=rd(c);return this._delegate.delete(p),this},d.prototype.commit=function(){return this._delegate.commit()},d}(),pf=function(){function d(c,p,y){this._firestore=c,this._userDataWriter=p,this._delegate=y}return d.prototype.fromFirestore=function(c,p){var y=new nc(this._firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,null);return this._delegate.fromFirestore(new id(this._firestore,y),p??{})},d.prototype.toFirestore=function(c,p){return p?this._delegate.toFirestore(c,p):this._delegate.toFirestore(c)},d.nu=function(c,p){var y=d.su,b=y.get(c);b||y.set(c,b=new WeakMap);var E=b.get(p);return E||(E=new d(c,new Cl(c),p),b.set(p,E)),E},d}();pf.su=new WeakMap;var ff=function(){function d(c,p){this.firestore=c,this._delegate=p,this._userDataWriter=new Cl(c)}return d.iu=function(c,p,y){if(c.length%2!=0)throw new Rt(nt.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+c.canonicalString()+" has "+c.length);return new d(p,new Xi(p._delegate,y,new Mn(c)))},d.eu=function(c,p,y){return new d(p,new Xi(p._delegate,y,c))},Object.defineProperty(d.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"parent",{get:function(){return new Vi(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),d.prototype.collection=function(c){try{return new Vi(this.firestore,Mh(this._delegate,c))}catch(p){throw Cs(p,"collection()","DocumentReference.collection()")}},d.prototype.isEqual=function(c){return(c=(0,W.m9)(c))instanceof Xi&&Xg(this._delegate,c)},d.prototype.set=function(c,p){p=os("DocumentReference.set",p);try{return p?Ns(this._delegate,c,p):Ns(this._delegate,c)}catch(y){throw Cs(y,"setDoc()","DocumentReference.set()")}},d.prototype.update=function(c,p){for(var y=[],b=2;b<arguments.length;b++)y[b-2]=arguments[b];try{return 1===arguments.length?U_(this._delegate,c):U_.apply(void 0,(0,V.ev)([this._delegate,c,p],y))}catch(E){throw Cs(E,"updateDoc()","DocumentReference.update()")}},d.prototype.delete=function(){return hf(Ei((c=this._delegate).firestore,$r),[new Ru(c._key,zr.none())]);var c},d.prototype.onSnapshot=function(){for(var c=this,p=[],y=0;y<arguments.length;y++)p[y]=arguments[y];var b=Fs(p),E=lb(p,function(M){return new Tl(c.firestore,new $a(c.firestore._delegate,c._userDataWriter,M._key,M._document,M.metadata,c._delegate.converter))});return ob(this._delegate,b,E)},d.prototype.get=function(c){var p=this;return("cache"===c?.source?function(y){y=Ei(y,Xi);var b=Ei(y.firestore,$r),E=yo(b),M=new ic(b);return function(P,B){var G=this,te=new Ps;return P.asyncQueue.enqueueAndForget(function(){return(0,V.mG)(G,void 0,void 0,function(){var fe;return(0,V.Jh)(this,function(ye){switch(ye.label){case 0:return fe=function(qe,ze,st){return(0,V.mG)(this,void 0,void 0,function(){var Vt,tn;return(0,V.Jh)(this,function(Rn){switch(Rn.label){case 0:return Rn.trys.push([0,2,,3]),[4,(Un=qe,li=ze,Di=It(Un),Di.persistence.runTransaction("read document","readonly",function(Zi){return Di.Mn.mn(Zi,li)}))];case 1:return(tn=Rn.sent()).isFoundDocument()?st.resolve(tn):tn.isNoDocument()?st.resolve(null):st.reject(new Rt(nt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return Vt=Rn.sent(),tn=Xl(Vt,"Failed to get document '"+ze+" from cache"),st.reject(tn),[3,3];case 3:return[2]}var Un,li,Di})})},[4,Yv(P)];case 1:return[2,fe.apply(void 0,[ye.sent(),B,te])]}})})}),te.promise}(E,y._key).then(function(P){return new $a(b,M,y._key,P,new Za(null!==P&&P.hasLocalMutations,!0),y.converter)})}(this._delegate):"server"===c?.source?function(y){y=Ei(y,Xi);var b=Ei(y.firestore,$r);return Sw(yo(b),y._key,{source:"server"}).then(function(E){return wl(b,y,E)})}(this._delegate):function(y){y=Ei(y,Xi);var b=Ei(y.firestore,$r);return Sw(yo(b),y._key).then(function(E){return wl(b,y,E)})}(this._delegate)).then(function(y){return new Tl(p.firestore,new $a(p.firestore._delegate,p._userDataWriter,y._key,y._document,y.metadata,p._delegate.converter))})},d.prototype.withConverter=function(c){return new d(this.firestore,this._delegate.withConverter(c?pf.nu(this.firestore,c):null))},d}();function Cs(d,c,p){return d.message=d.message.replace(c,p),d}function Fs(d){for(var c=0,p=d;c<p.length;c++){var y=p[c];if("object"==typeof y&&!kh(y))return y}return{}}function lb(d,c){var p,y,b;return{next:function(E){b.next&&b.next(c(E))},error:null===(p=(b=kh(d[0])?d[0]:kh(d[1])?d[1]:"function"==typeof d[0]?{next:d[0],error:d[1],complete:d[2]}:{next:d[1],error:d[2],complete:d[3]}).error)||void 0===p?void 0:p.bind(b),complete:null===(y=b.complete)||void 0===y?void 0:y.bind(b)}}var Tl=function(){function d(c,p){this._firestore=c,this._delegate=p}return Object.defineProperty(d.prototype,"ref",{get:function(){return new ff(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),d.prototype.data=function(c){return this._delegate.data(c)},d.prototype.get=function(c,p){return this._delegate.get(c,p)},d.prototype.isEqual=function(c){return rb(this._delegate,c._delegate)},d}(),id=function(d){function c(){return null!==d&&d.apply(this,arguments)||this}return(0,V.ZT)(c,d),c.prototype.data=function(p){return this._delegate.data(p)},c}(Tl),cr=function(){function d(c,p){this.firestore=c,this._delegate=p,this._userDataWriter=new Cl(c)}return d.prototype.where=function(c,p,y){try{return new d(this.firestore,ia(this._delegate,(M=y,P=p,B=uf("where",b=c),new V_(B,P,M))))}catch(b){throw Cs(b,/(orderBy|where)\(\)/,"Query.$1()")}var b,M,P,B},d.prototype.orderBy=function(c,p){try{return new d(this.firestore,ia(this._delegate,function(y,b){void 0===b&&(b="asc");var E=b,M=uf("orderBy",y);return new Tr(M,E)}(c,p)))}catch(y){throw Cs(y,/(orderBy|where)\(\)/,"Query.$1()")}},d.prototype.limit=function(c){try{return new d(this.firestore,ia(this._delegate,(af("limit",p=c),new Xn("limit",p,"F"))))}catch(p){throw Cs(p,"limit()","Query.limit()")}var p},d.prototype.limitToLast=function(c){try{return new d(this.firestore,ia(this._delegate,(af("limitToLast",p=c),new Xn("limitToLast",p,"L"))))}catch(p){throw Cs(p,"limitToLast()","Query.limitToLast()")}var p},d.prototype.startAt=function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];try{return new d(this.firestore,ia(this._delegate,function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];return new df("startAt",y,!0)}.apply(void 0,c)))}catch(y){throw Cs(y,"startAt()","Query.startAt()")}},d.prototype.startAfter=function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];try{return new d(this.firestore,ia(this._delegate,function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];return new df("startAfter",y,!1)}.apply(void 0,c)))}catch(y){throw Cs(y,"startAfter()","Query.startAfter()")}},d.prototype.endBefore=function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];try{return new d(this.firestore,ia(this._delegate,function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];return new xi("endBefore",y,!0)}.apply(void 0,c)))}catch(y){throw Cs(y,"endBefore()","Query.endBefore()")}},d.prototype.endAt=function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];try{return new d(this.firestore,ia(this._delegate,function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];return new xi("endAt",y,!1)}.apply(void 0,c)))}catch(y){throw Cs(y,"endAt()","Query.endAt()")}},d.prototype.isEqual=function(c){return Ah(this._delegate,c._delegate)},d.prototype.get=function(c){var p=this;return("cache"===c?.source?function(y){y=Ei(y,na);var b=Ei(y.firestore,$r),E=yo(b),M=new ic(b);return function(P,B){var G=this,te=new Ps;return P.asyncQueue.enqueueAndForget(function(){return(0,V.mG)(G,void 0,void 0,function(){var fe;return(0,V.Jh)(this,function(ye){switch(ye.label){case 0:return fe=function(qe,ze,st){return(0,V.mG)(this,void 0,void 0,function(){var Vt,tn,Rn,Un,li;return(0,V.Jh)(this,function(Di){switch(Di.label){case 0:return Di.trys.push([0,2,,3]),[4,Zr(qe,ze,!0)];case 1:return li=Di.sent(),Vt=new Uv(ze,li.Bn),tn=Vt._o(li.documents),Rn=Vt.applyChanges(tn,!1),st.resolve(Rn.snapshot),[3,3];case 2:return Un=Di.sent(),li=Xl(Un,"Failed to execute query '"+ze+" against cache"),st.reject(li),[3,3];case 3:return[2]}})})},[4,Yv(P)];case 1:return[2,fe.apply(void 0,[ye.sent(),B,te])]}})})}),te.promise}(E,y._query).then(function(P){return new nd(b,M,y,P)})}(this._delegate):"server"===c?.source?function(y){y=Ei(y,na);var b=Ei(y.firestore,$r),E=yo(b),M=new ic(b);return Jv(E,y._query,{source:"server"}).then(function(P){return new nd(b,M,y,P)})}(this._delegate):function(y){y=Ei(y,na);var b=Ei(y.firestore,$r),E=yo(b),M=new ic(b);return tm(y._query),Jv(E,y._query).then(function(P){return new nd(b,M,y,P)})}(this._delegate)).then(function(y){return new Wr(p.firestore,new nd(p.firestore._delegate,p._userDataWriter,p._delegate,y._snapshot))})},d.prototype.onSnapshot=function(){for(var c=this,p=[],y=0;y<arguments.length;y++)p[y]=arguments[y];var b=Fs(p),E=lb(p,function(M){return new Wr(c.firestore,new nd(c.firestore._delegate,c._userDataWriter,c._delegate,M._snapshot))});return ob(this._delegate,b,E)},d.prototype.withConverter=function(c){return new d(this.firestore,this._delegate.withConverter(c?pf.nu(this.firestore,c):null))},d}(),j_=function(){function d(c,p){this._firestore=c,this._delegate=p}return Object.defineProperty(d.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"doc",{get:function(){return new id(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),d}(),Wr=function(){function d(c,p){this._firestore=c,this._delegate=p}return Object.defineProperty(d.prototype,"query",{get:function(){return new cr(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"docs",{get:function(){var c=this;return this._delegate.docs.map(function(p){return new id(c._firestore,p)})},enumerable:!1,configurable:!0}),d.prototype.docChanges=function(c){var p=this;return this._delegate.docChanges(c).map(function(y){return new j_(p._firestore,y)})},d.prototype.forEach=function(c,p){var y=this;this._delegate.forEach(function(b){c.call(p,new id(y._firestore,b))})},d.prototype.isEqual=function(c){return rb(this._delegate,c._delegate)},d}(),Vi=function(d){function c(p,y){var b=this;return(b=d.call(this,p,y)||this).firestore=p,b._delegate=y,b}return(0,V.ZT)(c,d),Object.defineProperty(c.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"parent",{get:function(){var p=this._delegate.parent;return p?new ff(this.firestore,p):null},enumerable:!1,configurable:!0}),c.prototype.doc=function(p){try{return new ff(this.firestore,void 0===p?Xu(this._delegate):Xu(this._delegate,p))}catch(y){throw Cs(y,"doc()","CollectionReference.doc()")}},c.prototype.add=function(p){var b,E,M,P,B,y=this;return(b=this._delegate,E=p,M=Ei(b.firestore,$r),P=Xu(b),B=bl(b.converter,E),hf(M,[Xv(Jc(b.firestore),"addDoc",P._key,B,null!==b.converter,{}).toMutation(P._key,zr.exists(!1))]).then(function(){return P})).then(function(b){return new ff(y.firestore,b)})},c.prototype.isEqual=function(p){return Xg(this._delegate,p._delegate)},c.prototype.withConverter=function(p){return new c(this.firestore,this._delegate.withConverter(p?pf.nu(this.firestore,p):null))},c}(cr);function rd(d){return Ei(d,Xi)}var Ph=function(){function d(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];this._delegate=new(Ga.bind.apply(Ga,(0,V.ev)([void 0],c)))}return d.documentId=function(){return new d(Ks.keyField().canonicalString())},d.prototype.isEqual=function(c){return(c=(0,W.m9)(c))instanceof Ga&&this._delegate._internalPath.isEqual(c._internalPath)},d}(),Ls=function(){function d(c){this._delegate=c}return d.serverTimestamp=function(){var c=new Ca("serverTimestamp");return c._methodName="FieldValue.serverTimestamp",new d(c)},d.delete=function(){var c=new eb("deleteField");return c._methodName="FieldValue.delete",new d(c)},d.arrayUnion=function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];var y=function(){for(var b=[],E=0;E<arguments.length;E++)b[E]=arguments[E];return new tc("arrayUnion",b)}.apply(void 0,c);return y._methodName="FieldValue.arrayUnion",new d(y)},d.arrayRemove=function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];var y=function(){for(var b=[],E=0;E<arguments.length;E++)b[E]=arguments[E];return new tb("arrayRemove",b)}.apply(void 0,c);return y._methodName="FieldValue.arrayRemove",new d(y)},d.increment=function(c){var p=new Pw("increment",c);return p._methodName="FieldValue.increment",new d(p)},d.prototype.isEqual=function(c){return this._delegate.isEqual(c._delegate)},d}(),cD=q(1716),sc={Firestore:Rh,GeoPoint:lf,Timestamp:Li,Blob:Wa,Transaction:oc,WriteBatch:ab,DocumentReference:ff,DocumentSnapshot:Tl,Query:cr,QueryDocumentSnapshot:id,QuerySnapshot:Wr,CollectionReference:Vi,FieldPath:Ph,FieldValue:Ls,setLogLevel:function rc(d){fa.setLogLevel(d)},CACHE_SIZE_UNLIMITED:-1};!function io(d){d.INTERNAL.registerComponent(new cD.wA("firestore",function(y){return c=y.getProvider("app").getImmediate(),p=y.getProvider("auth-internal"),new Rh(c,new $r(c,p),new Fw);var c,p},"PUBLIC").setServiceProps(Object.assign({},sc))),d.registerVersion("@firebase/firestore","2.4.1")}(a.Z)},9751:(cn,Ye,q)=>{"use strict";q.d(Ye,{y:()=>Se});var a=q(930),V=q(727),W=q(8822),_e=q(9635),Ve=q(2416),Ae=q(576),ve=q(2806);let Se=(()=>{class ce{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const je=new ce;return je.source=this,je.operator=Re,je}subscribe(Re,je,ct){const He=function ne(ce){return ce&&ce instanceof a.Lv||function ie(ce){return ce&&(0,Ae.m)(ce.next)&&(0,Ae.m)(ce.error)&&(0,Ae.m)(ce.complete)}(ce)&&(0,V.Nn)(ce)}(Re)?Re:new a.Hp(Re,je,ct);return(0,ve.x)(()=>{const{operator:Fe,source:xt}=this;He.add(Fe?Fe.call(He,xt):xt?this._subscribe(He):this._trySubscribe(He))}),He}_trySubscribe(Re){try{return this._subscribe(Re)}catch(je){Re.error(je)}}forEach(Re,je){return new(je=pe(je))((ct,He)=>{const Fe=new a.Hp({next:xt=>{try{Re(xt)}catch(gt){He(gt),Fe.unsubscribe()}},error:He,complete:ct});this.subscribe(Fe)})}_subscribe(Re){var je;return null===(je=this.source)||void 0===je?void 0:je.subscribe(Re)}[W.L](){return this}pipe(...Re){return(0,_e.U)(Re)(this)}toPromise(Re){return new(Re=pe(Re))((je,ct)=>{let He;this.subscribe(Fe=>He=Fe,Fe=>ct(Fe),()=>je(He))})}}return ce.create=we=>new ce(we),ce})();function pe(ce){var we;return null!==(we=ce??Ve.v.Promise)&&void 0!==we?we:Promise}},7579:(cn,Ye,q)=>{"use strict";q.d(Ye,{x:()=>ve});var a=q(9751),V=q(727);const _e=(0,q(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ve=q(8737),Ae=q(2806);let ve=(()=>{class pe extends a.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ne){const ce=new Se(this,this);return ce.operator=ne,ce}_throwIfClosed(){if(this.closed)throw new _e}next(ne){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ce of this.currentObservers)ce.next(ne)}})}error(ne){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ne;const{observers:ce}=this;for(;ce.length;)ce.shift().error(ne)}})}complete(){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ne}=this;for(;ne.length;)ne.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ne;return(null===(ne=this.observers)||void 0===ne?void 0:ne.length)>0}_trySubscribe(ne){return this._throwIfClosed(),super._trySubscribe(ne)}_subscribe(ne){return this._throwIfClosed(),this._checkFinalizedStatuses(ne),this._innerSubscribe(ne)}_innerSubscribe(ne){const{hasError:ce,isStopped:we,observers:Re}=this;return ce||we?V.Lc:(this.currentObservers=null,Re.push(ne),new V.w0(()=>{this.currentObservers=null,(0,Ve.P)(Re,ne)}))}_checkFinalizedStatuses(ne){const{hasError:ce,thrownError:we,isStopped:Re}=this;ce?ne.error(we):Re&&ne.complete()}asObservable(){const ne=new a.y;return ne.source=this,ne}}return pe.create=(ie,ne)=>new Se(ie,ne),pe})();class Se extends ve{constructor(ie,ne){super(),this.destination=ie,this.source=ne}next(ie){var ne,ce;null===(ce=null===(ne=this.destination)||void 0===ne?void 0:ne.next)||void 0===ce||ce.call(ne,ie)}error(ie){var ne,ce;null===(ce=null===(ne=this.destination)||void 0===ne?void 0:ne.error)||void 0===ce||ce.call(ne,ie)}complete(){var ie,ne;null===(ne=null===(ie=this.destination)||void 0===ie?void 0:ie.complete)||void 0===ne||ne.call(ie)}_subscribe(ie){var ne,ce;return null!==(ce=null===(ne=this.source)||void 0===ne?void 0:ne.subscribe(ie))&&void 0!==ce?ce:V.Lc}}},930:(cn,Ye,q)=>{"use strict";q.d(Ye,{Hp:()=>ct,Lv:()=>ce});var a=q(576),V=q(727),W=q(2416),_e=q(7849),Ve=q(5032);const Ae=pe("C",void 0,void 0);function pe(Ke,Be,$e){return{kind:Ke,value:Be,error:$e}}var ie=q(3410),ne=q(2806);class ce extends V.w0{constructor(Be){super(),this.isStopped=!1,Be?(this.destination=Be,(0,V.Nn)(Be)&&Be.add(this)):this.destination=gt}static create(Be,$e,Je){return new ct(Be,$e,Je)}next(Be){this.isStopped?xt(function Se(Ke){return pe("N",Ke,void 0)}(Be),this):this._next(Be)}error(Be){this.isStopped?xt(function ve(Ke){return pe("E",void 0,Ke)}(Be),this):(this.isStopped=!0,this._error(Be))}complete(){this.isStopped?xt(Ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Be){this.destination.next(Be)}_error(Be){try{this.destination.error(Be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const we=Function.prototype.bind;function Re(Ke,Be){return we.call(Ke,Be)}class je{constructor(Be){this.partialObserver=Be}next(Be){const{partialObserver:$e}=this;if($e.next)try{$e.next(Be)}catch(Je){He(Je)}}error(Be){const{partialObserver:$e}=this;if($e.error)try{$e.error(Be)}catch(Je){He(Je)}else He(Be)}complete(){const{partialObserver:Be}=this;if(Be.complete)try{Be.complete()}catch($e){He($e)}}}class ct extends ce{constructor(Be,$e,Je){let ge;if(super(),(0,a.m)(Be)||!Be)ge={next:Be??void 0,error:$e??void 0,complete:Je??void 0};else{let Me;this&&W.v.useDeprecatedNextContext?(Me=Object.create(Be),Me.unsubscribe=()=>this.unsubscribe(),ge={next:Be.next&&Re(Be.next,Me),error:Be.error&&Re(Be.error,Me),complete:Be.complete&&Re(Be.complete,Me)}):ge=Be}this.destination=new je(ge)}}function He(Ke){W.v.useDeprecatedSynchronousErrorHandling?(0,ne.O)(Ke):(0,_e.h)(Ke)}function xt(Ke,Be){const{onStoppedNotification:$e}=W.v;$e&&ie.z.setTimeout(()=>$e(Ke,Be))}const gt={closed:!0,next:Ve.Z,error:function Fe(Ke){throw Ke},complete:Ve.Z}},727:(cn,Ye,q)=>{"use strict";q.d(Ye,{Lc:()=>Ae,w0:()=>Ve,Nn:()=>ve});var a=q(576);const W=(0,q(3888).d)(pe=>function(ne){pe(this),this.message=ne?`${ne.length} errors occurred during unsubscription:\n${ne.map((ce,we)=>`${we+1}) ${ce.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ne});var _e=q(8737);class Ve{constructor(ie){this.initialTeardown=ie,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ie;if(!this.closed){this.closed=!0;const{_parentage:ne}=this;if(ne)if(this._parentage=null,Array.isArray(ne))for(const Re of ne)Re.remove(this);else ne.remove(this);const{initialTeardown:ce}=this;if((0,a.m)(ce))try{ce()}catch(Re){ie=Re instanceof W?Re.errors:[Re]}const{_finalizers:we}=this;if(we){this._finalizers=null;for(const Re of we)try{Se(Re)}catch(je){ie=ie??[],je instanceof W?ie=[...ie,...je.errors]:ie.push(je)}}if(ie)throw new W(ie)}}add(ie){var ne;if(ie&&ie!==this)if(this.closed)Se(ie);else{if(ie instanceof Ve){if(ie.closed||ie._hasParent(this))return;ie._addParent(this)}(this._finalizers=null!==(ne=this._finalizers)&&void 0!==ne?ne:[]).push(ie)}}_hasParent(ie){const{_parentage:ne}=this;return ne===ie||Array.isArray(ne)&&ne.includes(ie)}_addParent(ie){const{_parentage:ne}=this;this._parentage=Array.isArray(ne)?(ne.push(ie),ne):ne?[ne,ie]:ie}_removeParent(ie){const{_parentage:ne}=this;ne===ie?this._parentage=null:Array.isArray(ne)&&(0,_e.P)(ne,ie)}remove(ie){const{_finalizers:ne}=this;ne&&(0,_e.P)(ne,ie),ie instanceof Ve&&ie._removeParent(this)}}Ve.EMPTY=(()=>{const pe=new Ve;return pe.closed=!0,pe})();const Ae=Ve.EMPTY;function ve(pe){return pe instanceof Ve||pe&&"closed"in pe&&(0,a.m)(pe.remove)&&(0,a.m)(pe.add)&&(0,a.m)(pe.unsubscribe)}function Se(pe){(0,a.m)(pe)?pe():pe.unsubscribe()}},2416:(cn,Ye,q)=>{"use strict";q.d(Ye,{v:()=>a});const a={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(cn,Ye,q)=>{"use strict";q.d(Ye,{E:()=>V});const V=new(q(9751).y)(Ve=>Ve.complete())},8996:(cn,Ye,q)=>{"use strict";q.d(Ye,{D:()=>Be});var a=q(8421),V=q(5363),W=q(9468),Ae=q(9751),Se=q(2202),pe=q(576),ie=q(9672);function ce($e,Je){if(!$e)throw new Error("Iterable cannot be null");return new Ae.y(ge=>{(0,ie.f)(ge,Je,()=>{const Me=$e[Symbol.asyncIterator]();(0,ie.f)(ge,Je,()=>{Me.next().then(ke=>{ke.done?ge.complete():ge.next(ke.value)})},0,!0)})})}var we=q(3670),Re=q(8239),je=q(1144),ct=q(6495),He=q(2206),Fe=q(4532),xt=q(3260);function Be($e,Je){return Je?function Ke($e,Je){if(null!=$e){if((0,we.c)($e))return function _e($e,Je){return(0,a.Xf)($e).pipe((0,W.R)(Je),(0,V.Q)(Je))}($e,Je);if((0,je.z)($e))return function ve($e,Je){return new Ae.y(ge=>{let Me=0;return Je.schedule(function(){Me===$e.length?ge.complete():(ge.next($e[Me++]),ge.closed||this.schedule())})})}($e,Je);if((0,Re.t)($e))return function Ve($e,Je){return(0,a.Xf)($e).pipe((0,W.R)(Je),(0,V.Q)(Je))}($e,Je);if((0,He.D)($e))return ce($e,Je);if((0,ct.T)($e))return function ne($e,Je){return new Ae.y(ge=>{let Me;return(0,ie.f)(ge,Je,()=>{Me=$e[Se.h](),(0,ie.f)(ge,Je,()=>{let ke,be;try{({value:ke,done:be}=Me.next())}catch(Ce){return void ge.error(Ce)}be?ge.complete():ge.next(ke)},0,!0)}),()=>(0,pe.m)(Me?.return)&&Me.return()})}($e,Je);if((0,xt.L)($e))return function gt($e,Je){return ce((0,xt.Q)($e),Je)}($e,Je)}throw(0,Fe.z)($e)}($e,Je):(0,a.Xf)($e)}},8421:(cn,Ye,q)=>{"use strict";q.d(Ye,{Xf:()=>we});var a=q(655),V=q(1144),W=q(8239),_e=q(9751),Ve=q(3670),Ae=q(2206),ve=q(4532),Se=q(6495),pe=q(3260),ie=q(576),ne=q(7849),ce=q(8822);function we(Ke){if(Ke instanceof _e.y)return Ke;if(null!=Ke){if((0,Ve.c)(Ke))return function Re(Ke){return new _e.y(Be=>{const $e=Ke[ce.L]();if((0,ie.m)($e.subscribe))return $e.subscribe(Be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ke);if((0,V.z)(Ke))return function je(Ke){return new _e.y(Be=>{for(let $e=0;$e<Ke.length&&!Be.closed;$e++)Be.next(Ke[$e]);Be.complete()})}(Ke);if((0,W.t)(Ke))return function ct(Ke){return new _e.y(Be=>{Ke.then($e=>{Be.closed||(Be.next($e),Be.complete())},$e=>Be.error($e)).then(null,ne.h)})}(Ke);if((0,Ae.D)(Ke))return Fe(Ke);if((0,Se.T)(Ke))return function He(Ke){return new _e.y(Be=>{for(const $e of Ke)if(Be.next($e),Be.closed)return;Be.complete()})}(Ke);if((0,pe.L)(Ke))return function xt(Ke){return Fe((0,pe.Q)(Ke))}(Ke)}throw(0,ve.z)(Ke)}function Fe(Ke){return new _e.y(Be=>{(function gt(Ke,Be){var $e,Je,ge,Me;return(0,a.mG)(this,void 0,void 0,function*(){try{for($e=(0,a.KL)(Ke);!(Je=yield $e.next()).done;)if(Be.next(Je.value),Be.closed)return}catch(ke){ge={error:ke}}finally{try{Je&&!Je.done&&(Me=$e.return)&&(yield Me.call($e))}finally{if(ge)throw ge.error}}Be.complete()})})(Ke,Be).catch($e=>Be.error($e))})}},6451:(cn,Ye,q)=>{"use strict";q.d(Ye,{T:()=>Ae});var a=q(8189),V=q(8421),W=q(515),_e=q(3269),Ve=q(8996);function Ae(...ve){const Se=(0,_e.yG)(ve),pe=(0,_e._6)(ve,1/0),ie=ve;return ie.length?1===ie.length?(0,V.Xf)(ie[0]):(0,a.J)(pe)((0,Ve.D)(ie,Se)):W.E}},5403:(cn,Ye,q)=>{"use strict";q.d(Ye,{Q:()=>W,x:()=>V});var a=q(930);function V(_e,Ve,Ae,ve,Se){return new W(_e,Ve,Ae,ve,Se)}class W extends a.Lv{constructor(Ve,Ae,ve,Se,pe,ie){super(Ve),this.onFinalize=pe,this.shouldUnsubscribe=ie,this._next=Ae?function(ne){try{Ae(ne)}catch(ce){Ve.error(ce)}}:super._next,this._error=Se?function(ne){try{Se(ne)}catch(ce){Ve.error(ce)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(ne){Ve.error(ne)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ve;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ae}=this;super.unsubscribe(),!Ae&&(null===(Ve=this.onFinalize)||void 0===Ve||Ve.call(this))}}}},4004:(cn,Ye,q)=>{"use strict";q.d(Ye,{U:()=>W});var a=q(4482),V=q(5403);function W(_e,Ve){return(0,a.e)((Ae,ve)=>{let Se=0;Ae.subscribe((0,V.x)(ve,pe=>{ve.next(_e.call(Ve,pe,Se++))}))})}},8189:(cn,Ye,q)=>{"use strict";q.d(Ye,{J:()=>W});var a=q(5577),V=q(4671);function W(_e=1/0){return(0,a.z)(V.y,_e)}},5577:(cn,Ye,q)=>{"use strict";q.d(Ye,{z:()=>Se});var a=q(4004),V=q(8421),W=q(4482),_e=q(9672),Ve=q(5403),ve=q(576);function Se(pe,ie,ne=1/0){return(0,ve.m)(ie)?Se((ce,we)=>(0,a.U)((Re,je)=>ie(ce,Re,we,je))((0,V.Xf)(pe(ce,we))),ne):("number"==typeof ie&&(ne=ie),(0,W.e)((ce,we)=>function Ae(pe,ie,ne,ce,we,Re,je,ct){const He=[];let Fe=0,xt=0,gt=!1;const Ke=()=>{gt&&!He.length&&!Fe&&ie.complete()},Be=Je=>Fe<ce?$e(Je):He.push(Je),$e=Je=>{Re&&ie.next(Je),Fe++;let ge=!1;(0,V.Xf)(ne(Je,xt++)).subscribe((0,Ve.x)(ie,Me=>{we?.(Me),Re?Be(Me):ie.next(Me)},()=>{ge=!0},void 0,()=>{if(ge)try{for(Fe--;He.length&&Fe<ce;){const Me=He.shift();je?(0,_e.f)(ie,je,()=>$e(Me)):$e(Me)}Ke()}catch(Me){ie.error(Me)}}))};return pe.subscribe((0,Ve.x)(ie,Be,()=>{gt=!0,Ke()})),()=>{ct?.()}}(ce,we,pe,ne)))}},5363:(cn,Ye,q)=>{"use strict";q.d(Ye,{Q:()=>_e});var a=q(9672),V=q(4482),W=q(5403);function _e(Ve,Ae=0){return(0,V.e)((ve,Se)=>{ve.subscribe((0,W.x)(Se,pe=>(0,a.f)(Se,Ve,()=>Se.next(pe),Ae),()=>(0,a.f)(Se,Ve,()=>Se.complete(),Ae),pe=>(0,a.f)(Se,Ve,()=>Se.error(pe),Ae)))})}},3099:(cn,Ye,q)=>{"use strict";q.d(Ye,{B:()=>Ve});var a=q(8421),V=q(7579),W=q(930),_e=q(4482);function Ve(ve={}){const{connector:Se=(()=>new V.x),resetOnError:pe=!0,resetOnComplete:ie=!0,resetOnRefCountZero:ne=!0}=ve;return ce=>{let we,Re,je,ct=0,He=!1,Fe=!1;const xt=()=>{Re?.unsubscribe(),Re=void 0},gt=()=>{xt(),we=je=void 0,He=Fe=!1},Ke=()=>{const Be=we;gt(),Be?.unsubscribe()};return(0,_e.e)((Be,$e)=>{ct++,!Fe&&!He&&xt();const Je=je=je??Se();$e.add(()=>{ct--,0===ct&&!Fe&&!He&&(Re=Ae(Ke,ne))}),Je.subscribe($e),!we&&ct>0&&(we=new W.Hp({next:ge=>Je.next(ge),error:ge=>{Fe=!0,xt(),Re=Ae(gt,pe,ge),Je.error(ge)},complete:()=>{He=!0,xt(),Re=Ae(gt,ie),Je.complete()}}),(0,a.Xf)(Be).subscribe(we))})(ce)}}function Ae(ve,Se,...pe){if(!0===Se)return void ve();if(!1===Se)return;const ie=new W.Hp({next:()=>{ie.unsubscribe(),ve()}});return Se(...pe).subscribe(ie)}},9468:(cn,Ye,q)=>{"use strict";q.d(Ye,{R:()=>V});var a=q(4482);function V(W,_e=0){return(0,a.e)((Ve,Ae)=>{Ae.add(W.schedule(()=>Ve.subscribe(Ae),_e))})}},8505:(cn,Ye,q)=>{"use strict";q.d(Ye,{b:()=>Ve});var a=q(576),V=q(4482),W=q(5403),_e=q(4671);function Ve(Ae,ve,Se){const pe=(0,a.m)(Ae)||ve||Se?{next:Ae,error:ve,complete:Se}:Ae;return pe?(0,V.e)((ie,ne)=>{var ce;null===(ce=pe.subscribe)||void 0===ce||ce.call(pe);let we=!0;ie.subscribe((0,W.x)(ne,Re=>{var je;null===(je=pe.next)||void 0===je||je.call(pe,Re),ne.next(Re)},()=>{var Re;we=!1,null===(Re=pe.complete)||void 0===Re||Re.call(pe),ne.complete()},Re=>{var je;we=!1,null===(je=pe.error)||void 0===je||je.call(pe,Re),ne.error(Re)},()=>{var Re,je;we&&(null===(Re=pe.unsubscribe)||void 0===Re||Re.call(pe)),null===(je=pe.finalize)||void 0===je||je.call(pe)}))}):_e.y}},4408:(cn,Ye,q)=>{"use strict";q.d(Ye,{o:()=>Ve});var a=q(727);class V extends a.w0{constructor(ve,Se){super()}schedule(ve,Se=0){return this}}const W={setInterval(Ae,ve,...Se){const{delegate:pe}=W;return pe?.setInterval?pe.setInterval(Ae,ve,...Se):setInterval(Ae,ve,...Se)},clearInterval(Ae){const{delegate:ve}=W;return(ve?.clearInterval||clearInterval)(Ae)},delegate:void 0};var _e=q(8737);class Ve extends V{constructor(ve,Se){super(ve,Se),this.scheduler=ve,this.work=Se,this.pending=!1}schedule(ve,Se=0){if(this.closed)return this;this.state=ve;const pe=this.id,ie=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(ie,pe,Se)),this.pending=!0,this.delay=Se,this.id=this.id||this.requestAsyncId(ie,this.id,Se),this}requestAsyncId(ve,Se,pe=0){return W.setInterval(ve.flush.bind(ve,this),pe)}recycleAsyncId(ve,Se,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return Se;W.clearInterval(Se)}execute(ve,Se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(ve,Se);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,Se){let ie,pe=!1;try{this.work(ve)}catch(ne){pe=!0,ie=ne||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),ie}unsubscribe(){if(!this.closed){const{id:ve,scheduler:Se}=this,{actions:pe}=Se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,_e.P)(pe,this),null!=ve&&(this.id=this.recycleAsyncId(Se,ve,null)),this.delay=null,super.unsubscribe()}}}},7565:(cn,Ye,q)=>{"use strict";q.d(Ye,{v:()=>W});var a=q(6063);class V{constructor(Ve,Ae=V.now){this.schedulerActionCtor=Ve,this.now=Ae}schedule(Ve,Ae=0,ve){return new this.schedulerActionCtor(this,Ve).schedule(ve,Ae)}}V.now=a.l.now;class W extends V{constructor(Ve,Ae=V.now){super(Ve,Ae),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Ve){const{actions:Ae}=this;if(this._active)return void Ae.push(Ve);let ve;this._active=!0;do{if(ve=Ve.execute(Ve.state,Ve.delay))break}while(Ve=Ae.shift());if(this._active=!1,ve){for(;Ve=Ae.shift();)Ve.unsubscribe();throw ve}}}},4986:(cn,Ye,q)=>{"use strict";q.d(Ye,{P:()=>_e,z:()=>W});var a=q(4408);const W=new(q(7565).v)(a.o),_e=W},6063:(cn,Ye,q)=>{"use strict";q.d(Ye,{l:()=>a});const a={now:()=>(a.delegate||Date).now(),delegate:void 0}},3410:(cn,Ye,q)=>{"use strict";q.d(Ye,{z:()=>a});const a={setTimeout(V,W,..._e){const{delegate:Ve}=a;return Ve?.setTimeout?Ve.setTimeout(V,W,..._e):setTimeout(V,W,..._e)},clearTimeout(V){const{delegate:W}=a;return(W?.clearTimeout||clearTimeout)(V)},delegate:void 0}},2202:(cn,Ye,q)=>{"use strict";q.d(Ye,{h:()=>V});const V=function a(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(cn,Ye,q)=>{"use strict";q.d(Ye,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(cn,Ye,q)=>{"use strict";q.d(Ye,{_6:()=>Ae,jO:()=>_e,yG:()=>Ve});var a=q(576),V=q(3532);function W(ve){return ve[ve.length-1]}function _e(ve){return(0,a.m)(W(ve))?ve.pop():void 0}function Ve(ve){return(0,V.K)(W(ve))?ve.pop():void 0}function Ae(ve,Se){return"number"==typeof W(ve)?ve.pop():Se}},8737:(cn,Ye,q)=>{"use strict";function a(V,W){if(V){const _e=V.indexOf(W);0<=_e&&V.splice(_e,1)}}q.d(Ye,{P:()=>a})},3888:(cn,Ye,q)=>{"use strict";function a(V){const _e=V(Ve=>{Error.call(Ve),Ve.stack=(new Error).stack});return _e.prototype=Object.create(Error.prototype),_e.prototype.constructor=_e,_e}q.d(Ye,{d:()=>a})},2806:(cn,Ye,q)=>{"use strict";q.d(Ye,{O:()=>_e,x:()=>W});var a=q(2416);let V=null;function W(Ve){if(a.v.useDeprecatedSynchronousErrorHandling){const Ae=!V;if(Ae&&(V={errorThrown:!1,error:null}),Ve(),Ae){const{errorThrown:ve,error:Se}=V;if(V=null,ve)throw Se}}else Ve()}function _e(Ve){a.v.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=Ve)}},9672:(cn,Ye,q)=>{"use strict";function a(V,W,_e,Ve=0,Ae=!1){const ve=W.schedule(function(){_e(),Ae?V.add(this.schedule(null,Ve)):this.unsubscribe()},Ve);if(V.add(ve),!Ae)return ve}q.d(Ye,{f:()=>a})},4671:(cn,Ye,q)=>{"use strict";function a(V){return V}q.d(Ye,{y:()=>a})},1144:(cn,Ye,q)=>{"use strict";q.d(Ye,{z:()=>a});const a=V=>V&&"number"==typeof V.length&&"function"!=typeof V},2206:(cn,Ye,q)=>{"use strict";q.d(Ye,{D:()=>V});var a=q(576);function V(W){return Symbol.asyncIterator&&(0,a.m)(W?.[Symbol.asyncIterator])}},576:(cn,Ye,q)=>{"use strict";function a(V){return"function"==typeof V}q.d(Ye,{m:()=>a})},3670:(cn,Ye,q)=>{"use strict";q.d(Ye,{c:()=>W});var a=q(8822),V=q(576);function W(_e){return(0,V.m)(_e[a.L])}},6495:(cn,Ye,q)=>{"use strict";q.d(Ye,{T:()=>W});var a=q(2202),V=q(576);function W(_e){return(0,V.m)(_e?.[a.h])}},8239:(cn,Ye,q)=>{"use strict";q.d(Ye,{t:()=>V});var a=q(576);function V(W){return(0,a.m)(W?.then)}},3260:(cn,Ye,q)=>{"use strict";q.d(Ye,{L:()=>_e,Q:()=>W});var a=q(655),V=q(576);function W(Ve){return(0,a.FC)(this,arguments,function*(){const ve=Ve.getReader();try{for(;;){const{value:Se,done:pe}=yield(0,a.qq)(ve.read());if(pe)return yield(0,a.qq)(void 0);yield yield(0,a.qq)(Se)}}finally{ve.releaseLock()}})}function _e(Ve){return(0,V.m)(Ve?.getReader)}},3532:(cn,Ye,q)=>{"use strict";q.d(Ye,{K:()=>V});var a=q(576);function V(W){return W&&(0,a.m)(W.schedule)}},4482:(cn,Ye,q)=>{"use strict";q.d(Ye,{A:()=>V,e:()=>W});var a=q(576);function V(_e){return(0,a.m)(_e?.lift)}function W(_e){return Ve=>{if(V(Ve))return Ve.lift(function(Ae){try{return _e(Ae,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(cn,Ye,q)=>{"use strict";function a(){}q.d(Ye,{Z:()=>a})},9635:(cn,Ye,q)=>{"use strict";q.d(Ye,{U:()=>W,z:()=>V});var a=q(4671);function V(..._e){return W(_e)}function W(_e){return 0===_e.length?a.y:1===_e.length?_e[0]:function(Ae){return _e.reduce((ve,Se)=>Se(ve),Ae)}}},7849:(cn,Ye,q)=>{"use strict";q.d(Ye,{h:()=>W});var a=q(2416),V=q(3410);function W(_e){V.z.setTimeout(()=>{const{onUnhandledError:Ve}=a.v;if(!Ve)throw _e;Ve(_e)})}},4532:(cn,Ye,q)=>{"use strict";function a(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}q.d(Ye,{z:()=>a})},5945:()=>{},655:(cn,Ye,q)=>{"use strict";q.d(Ye,{CR:()=>we,FC:()=>Fe,Jh:()=>pe,KL:()=>gt,XA:()=>ce,ZT:()=>V,_T:()=>_e,ev:()=>ct,mG:()=>Se,pi:()=>W,qq:()=>He});var a=function(be,Ce){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ue,Ne){Ue.__proto__=Ne}||function(Ue,Ne){for(var mt in Ne)Object.prototype.hasOwnProperty.call(Ne,mt)&&(Ue[mt]=Ne[mt])})(be,Ce)};function V(be,Ce){if("function"!=typeof Ce&&null!==Ce)throw new TypeError("Class extends value "+String(Ce)+" is not a constructor or null");function Ue(){this.constructor=be}a(be,Ce),be.prototype=null===Ce?Object.create(Ce):(Ue.prototype=Ce.prototype,new Ue)}var W=function(){return W=Object.assign||function(Ce){for(var Ue,Ne=1,mt=arguments.length;Ne<mt;Ne++)for(var lt in Ue=arguments[Ne])Object.prototype.hasOwnProperty.call(Ue,lt)&&(Ce[lt]=Ue[lt]);return Ce},W.apply(this,arguments)};function _e(be,Ce){var Ue={};for(var Ne in be)Object.prototype.hasOwnProperty.call(be,Ne)&&Ce.indexOf(Ne)<0&&(Ue[Ne]=be[Ne]);if(null!=be&&"function"==typeof Object.getOwnPropertySymbols){var mt=0;for(Ne=Object.getOwnPropertySymbols(be);mt<Ne.length;mt++)Ce.indexOf(Ne[mt])<0&&Object.prototype.propertyIsEnumerable.call(be,Ne[mt])&&(Ue[Ne[mt]]=be[Ne[mt]])}return Ue}function Se(be,Ce,Ue,Ne){return new(Ue||(Ue=Promise))(function(lt,Xt){function gn(At){try{Ct(Ne.next(At))}catch(Kt){Xt(Kt)}}function rn(At){try{Ct(Ne.throw(At))}catch(Kt){Xt(Kt)}}function Ct(At){At.done?lt(At.value):function mt(lt){return lt instanceof Ue?lt:new Ue(function(Xt){Xt(lt)})}(At.value).then(gn,rn)}Ct((Ne=Ne.apply(be,Ce||[])).next())})}function pe(be,Ce){var Ne,mt,lt,Xt,Ue={label:0,sent:function(){if(1&lt[0])throw lt[1];return lt[1]},trys:[],ops:[]};return Xt={next:gn(0),throw:gn(1),return:gn(2)},"function"==typeof Symbol&&(Xt[Symbol.iterator]=function(){return this}),Xt;function gn(Ct){return function(At){return function rn(Ct){if(Ne)throw new TypeError("Generator is already executing.");for(;Ue;)try{if(Ne=1,mt&&(lt=2&Ct[0]?mt.return:Ct[0]?mt.throw||((lt=mt.return)&&lt.call(mt),0):mt.next)&&!(lt=lt.call(mt,Ct[1])).done)return lt;switch(mt=0,lt&&(Ct=[2&Ct[0],lt.value]),Ct[0]){case 0:case 1:lt=Ct;break;case 4:return Ue.label++,{value:Ct[1],done:!1};case 5:Ue.label++,mt=Ct[1],Ct=[0];continue;case 7:Ct=Ue.ops.pop(),Ue.trys.pop();continue;default:if(!(lt=(lt=Ue.trys).length>0&&lt[lt.length-1])&&(6===Ct[0]||2===Ct[0])){Ue=0;continue}if(3===Ct[0]&&(!lt||Ct[1]>lt[0]&&Ct[1]<lt[3])){Ue.label=Ct[1];break}if(6===Ct[0]&&Ue.label<lt[1]){Ue.label=lt[1],lt=Ct;break}if(lt&&Ue.label<lt[2]){Ue.label=lt[2],Ue.ops.push(Ct);break}lt[2]&&Ue.ops.pop(),Ue.trys.pop();continue}Ct=Ce.call(be,Ue)}catch(At){Ct=[6,At],mt=0}finally{Ne=lt=0}if(5&Ct[0])throw Ct[1];return{value:Ct[0]?Ct[1]:void 0,done:!0}}([Ct,At])}}}function ce(be){var Ce="function"==typeof Symbol&&Symbol.iterator,Ue=Ce&&be[Ce],Ne=0;if(Ue)return Ue.call(be);if(be&&"number"==typeof be.length)return{next:function(){return be&&Ne>=be.length&&(be=void 0),{value:be&&be[Ne++],done:!be}}};throw new TypeError(Ce?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(be,Ce){var Ue="function"==typeof Symbol&&be[Symbol.iterator];if(!Ue)return be;var mt,Xt,Ne=Ue.call(be),lt=[];try{for(;(void 0===Ce||Ce-- >0)&&!(mt=Ne.next()).done;)lt.push(mt.value)}catch(gn){Xt={error:gn}}finally{try{mt&&!mt.done&&(Ue=Ne.return)&&Ue.call(Ne)}finally{if(Xt)throw Xt.error}}return lt}function ct(be,Ce,Ue){if(Ue||2===arguments.length)for(var lt,Ne=0,mt=Ce.length;Ne<mt;Ne++)(lt||!(Ne in Ce))&&(lt||(lt=Array.prototype.slice.call(Ce,0,Ne)),lt[Ne]=Ce[Ne]);return be.concat(lt||Array.prototype.slice.call(Ce))}function He(be){return this instanceof He?(this.v=be,this):new He(be)}function Fe(be,Ce,Ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var mt,Ne=Ue.apply(be,Ce||[]),lt=[];return mt={},Xt("next"),Xt("throw"),Xt("return"),mt[Symbol.asyncIterator]=function(){return this},mt;function Xt(Bt){Ne[Bt]&&(mt[Bt]=function(Yt){return new Promise(function(Jt,ut){lt.push([Bt,Yt,Jt,ut])>1||gn(Bt,Yt)})})}function gn(Bt,Yt){try{!function rn(Bt){Bt.value instanceof He?Promise.resolve(Bt.value.v).then(Ct,At):Kt(lt[0][2],Bt)}(Ne[Bt](Yt))}catch(Jt){Kt(lt[0][3],Jt)}}function Ct(Bt){gn("next",Bt)}function At(Bt){gn("throw",Bt)}function Kt(Bt,Yt){Bt(Yt),lt.shift(),lt.length&&gn(lt[0][0],lt[0][1])}}function gt(be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,Ce=be[Symbol.asyncIterator];return Ce?Ce.call(be):(be=ce(be),Ue={},Ne("next"),Ne("throw"),Ne("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue);function Ne(lt){Ue[lt]=be[lt]&&function(Xt){return new Promise(function(gn,rn){!function mt(lt,Xt,gn,rn){Promise.resolve(rn).then(function(Ct){lt({value:Ct,done:gn})},Xt)}(gn,rn,(Xt=be[lt](Xt)).done,Xt.value)})}}}},4650:(cn,Ye,q)=>{"use strict";q.d(Ye,{$8M:()=>lg,$Z:()=>Qv,AFp:()=>zC,AaK:()=>Se,Akn:()=>lc,AsE:()=>jT,BQk:()=>ub,CHM:()=>Aa,CRH:()=>RC,CZH:()=>Rb,CqO:()=>OT,D6c:()=>FR,DdM:()=>II,EJc:()=>ix,EiD:()=>Hc,EpF:()=>AT,F$t:()=>W_,F4k:()=>kT,FYo:()=>ja,FiY:()=>ku,G48:()=>DR,Gf:()=>RI,GfV:()=>Q0,GkF:()=>Fh,Gpc:()=>ne,HTZ:()=>Cm,Hsn:()=>_D,Ikx:()=>$T,JOm:()=>yl,JVY:()=>u_,Jf7:()=>Ag,KtG:()=>Cc,L6k:()=>eh,LAX:()=>B0,LFG:()=>lr,LSH:()=>z0,Lbi:()=>qC,Lck:()=>vI,MAs:()=>MT,MGl:()=>Lh,MMx:()=>_C,NdJ:()=>cm,O4$:()=>Bd,OlP:()=>ji,Oqu:()=>dm,PXZ:()=>sM,Q6J:()=>Zw,QGY:()=>yf,QP$:()=>by,QbO:()=>tx,Qsj:()=>qr,QtT:()=>cE,R0b:()=>sa,RDi:()=>_g,Rgc:()=>my,SBq:()=>Uu,SDv:()=>pC,Sil:()=>vR,Suo:()=>OC,TTD:()=>hs,TgZ:()=>Kw,Tol:()=>HT,Udp:()=>eC,VKq:()=>MI,W1O:()=>PE,WLB:()=>AI,X6Q:()=>YC,XFs:()=>tt,Xpm:()=>X,Xts:()=>rh,Y36:()=>ta,YKP:()=>pE,YNc:()=>IT,Yjl:()=>le,Yz7:()=>Yt,ZZ4:()=>e1,_Bn:()=>xb,_UZ:()=>Jw,_Vd:()=>Up,_c5:()=>CM,_uU:()=>MD,aQg:()=>t1,c2e:()=>KI,cJS:()=>ut,cg1:()=>Go,dDg:()=>Fb,dqk:()=>Pt,eBb:()=>_v,eFA:()=>aM,ekj:()=>tC,eoX:()=>ox,f3M:()=>Pc,g9A:()=>GC,h0i:()=>wm,hGG:()=>TM,hij:()=>ey,iGM:()=>OI,ifc:()=>Ht,ip1:()=>$I,kEZ:()=>kI,kL8:()=>oC,kcU:()=>sg,l5B:()=>hy,lG2:()=>Pe,lqb:()=>lh,lri:()=>KC,mCW:()=>vt,n5z:()=>St,oAB:()=>$t,oxw:()=>RT,pB0:()=>mo,pQV:()=>lE,q3G:()=>rr,q4F:()=>ju,qLn:()=>Gc,qOj:()=>z_,qZA:()=>Yw,qzn:()=>Fu,rFY:()=>py,rWj:()=>iM,s9C:()=>Qw,sBO:()=>dM,sIi:()=>mf,s_b:()=>DC,soG:()=>Uh,tb:()=>ZC,tp0:()=>ma,uIk:()=>TT,vHH:()=>je,vpe:()=>hd,wAp:()=>qn,xp6:()=>M_,ynx:()=>ad,z2F:()=>gd,z3N:()=>ya,zSh:()=>vv,zs3:()=>xh});var a=q(7579),V=q(727),W=q(9751),_e=q(6451),Ve=q(3099);function Ae(h){for(let f in h)if(h[f]===Ae)return f;throw Error("Could not find renamed property on target object.")}function ve(h,f){for(const m in f)f.hasOwnProperty(m)&&!h.hasOwnProperty(m)&&(h[m]=f[m])}function Se(h){if("string"==typeof h)return h;if(Array.isArray(h))return"["+h.map(Se).join(", ")+"]";if(null==h)return""+h;if(h.overriddenName)return`${h.overriddenName}`;if(h.name)return`${h.name}`;const f=h.toString();if(null==f)return""+f;const m=f.indexOf("\n");return-1===m?f:f.substring(0,m)}function pe(h,f){return null==h||""===h?null===f?"":f:null==f||""===f?h:h+" "+f}const ie=Ae({__forward_ref__:Ae});function ne(h){return h.__forward_ref__=ne,h.toString=function(){return Se(this())},h}function ce(h){return we(h)?h():h}function we(h){return"function"==typeof h&&h.hasOwnProperty(ie)&&h.__forward_ref__===ne}class je extends Error{constructor(f,m){super(function ct(h,f){return`NG0${Math.abs(h)}${f?": "+f.trim():""}`}(f,m)),this.code=f}}function He(h){return"string"==typeof h?h:null==h?"":String(h)}function Be(h,f){throw new je(-201,!1)}function Ct(h,f,m,v){throw new Error(`ASSERTION ERROR: ${h}`+(null==v?"":` [Expected=> ${m} ${v} ${f} <=Actual]`))}function Yt(h){return{token:h.token,providedIn:h.providedIn||null,factory:h.factory,value:void 0}}function ut(h){return{providers:h.providers||[],imports:h.imports||[]}}function sn(h){return nn(h,ri)||nn(h,Sn)}function nn(h,f){return h.hasOwnProperty(f)?h[f]:null}function Tn(h){return h&&(h.hasOwnProperty(vn)||h.hasOwnProperty(yi))?h[vn]:null}const ri=Ae({\u0275prov:Ae}),vn=Ae({\u0275inj:Ae}),Sn=Ae({ngInjectableDef:Ae}),yi=Ae({ngInjectorDef:Ae});var tt=(()=>((tt=tt||{})[tt.Default=0]="Default",tt[tt.Host=1]="Host",tt[tt.Self=2]="Self",tt[tt.SkipSelf=4]="SkipSelf",tt[tt.Optional=8]="Optional",tt))();let Le;function Tt(h){const f=Le;return Le=h,f}function Gt(h,f,m){const v=sn(h);return v&&"root"==v.providedIn?void 0===v.value?v.value=v.factory():v.value:m&tt.Optional?null:void 0!==f?f:void Be(Se(h))}function Dn(h){return{toString:h}.toString()}var Gn=(()=>((Gn=Gn||{})[Gn.OnPush=0]="OnPush",Gn[Gn.Default=1]="Default",Gn))(),Ht=(()=>{return(h=Ht||(Ht={}))[h.Emulated=0]="Emulated",h[h.None=2]="None",h[h.ShadowDom=3]="ShadowDom",Ht;var h})();const Pt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),mi={},kn=[],ci=Ae({\u0275cmp:Ae}),Yi=Ae({\u0275dir:Ae}),In=Ae({\u0275pipe:Ae}),qi=Ae({\u0275mod:Ae}),me=Ae({\u0275fac:Ae}),z=Ae({__NG_ELEMENT_ID__:Ae});let K=0;function X(h){return Dn(()=>{const m=!0===h.standalone,v={},C={type:h.type,providersResolver:null,decls:h.decls,vars:h.vars,factory:null,template:h.template||null,consts:h.consts||null,ngContentSelectors:h.ngContentSelectors,hostBindings:h.hostBindings||null,hostVars:h.hostVars||0,hostAttrs:h.hostAttrs||null,contentQueries:h.contentQueries||null,declaredInputs:v,inputs:null,outputs:null,exportAs:h.exportAs||null,onPush:h.changeDetection===Gn.OnPush,directiveDefs:null,pipeDefs:null,standalone:m,dependencies:m&&h.dependencies||null,getStandaloneInjector:null,selectors:h.selectors||kn,viewQuery:h.viewQuery||null,features:h.features||null,data:h.data||{},encapsulation:h.encapsulation||Ht.Emulated,id:"c"+K++,styles:h.styles||kn,_:null,setInput:null,schemas:h.schemas||null,tView:null},x=h.dependencies,k=h.features;return C.inputs=Hn(h.inputs,v),C.outputs=Hn(h.outputs),k&&k.forEach(N=>N(C)),C.directiveDefs=x?()=>("function"==typeof x?x():x).map(de).filter(Ge):null,C.pipeDefs=x?()=>("function"==typeof x?x():x).map(De).filter(Ge):null,C})}function de(h){return oe(h)||ue(h)}function Ge(h){return null!==h}const wt={};function $t(h){return Dn(()=>{const f={type:h.type,bootstrap:h.bootstrap||kn,declarations:h.declarations||kn,imports:h.imports||kn,exports:h.exports||kn,transitiveCompileScopes:null,schemas:h.schemas||null,id:h.id||null};return null!=h.id&&(wt[h.id]=h.type),f})}function Hn(h,f){if(null==h)return mi;const m={};for(const v in h)if(h.hasOwnProperty(v)){let C=h[v],x=C;Array.isArray(C)&&(x=C[1],C=C[0]),m[C]=v,f&&(f[C]=x)}return m}const Pe=X;function le(h){return{type:h.type,name:h.name,factory:null,pure:!1!==h.pure,standalone:!0===h.standalone,onDestroy:h.type.prototype.ngOnDestroy||null}}function oe(h){return h[ci]||null}function ue(h){return h[Yi]||null}function De(h){return h[In]||null}function at(h,f){const m=h[qi]||null;if(!m&&!0===f)throw new Error(`Type ${Se(h)} does not have '\u0275mod' property.`);return m}function co(h){return Array.isArray(h)&&"object"==typeof h[1]}function To(h){return Array.isArray(h)&&!0===h[1]}function gu(h){return 0!=(8&h.flags)}function Eo(h){return 2==(2&h.flags)}function zs(h){return 1==(1&h.flags)}function Yo(h){return null!==h.template}function tp(h){return 0!=(256&h[2])}function ds(h,f){return h.hasOwnProperty(me)?h[me]:null}class qs{constructor(f,m,v){this.previousValue=f,this.currentValue=m,this.firstChange=v}isFirstChange(){return this.firstChange}}function hs(){return _c}function _c(h){return h.type.prototype.ngOnChanges&&(h.setInput=tl),sv}function sv(){const h=Rd(this),f=h?.current;if(f){const m=h.previous;if(m===mi)h.previous=f;else for(let v in f)m[v]=f[v];h.current=null,this.ngOnChanges(f)}}function tl(h,f,m,v){const C=Rd(h)||function Ll(h,f){return h[Zs]=f}(h,{previous:mi,current:null}),x=C.current||(C.current={}),k=C.previous,N=this.declaredInputs[m],H=k[N];x[N]=new qs(H&&H.currentValue,f,k===mi),h[v]=f}hs.ngInherit=!0;const Zs="__ngSimpleChanges__";function Rd(h){return h[Zs]||null}function Mr(h){for(;Array.isArray(h);)h=h[0];return h}function Pd(h,f){return Mr(f[h])}function As(h,f){return Mr(f[h.index])}function Vl(h,f){return h.data[f]}function So(h,f){const m=f[h];return co(m)?m:m[0]}function bc(h){return 4==(4&h[2])}function nl(h){return 64==(64&h[2])}function $s(h,f){return null==f?null:h[f]}function sp(h){h[18]=0}function Bl(h,f){h[5]+=f;let m=h,v=h[3];for(;null!==v&&(1===f&&1===m[5]||-1===f&&0===m[5]);)v[5]+=f,m=v,v=v[3]}const Jn={lFrame:Vd(null),bindingsEnabled:!0};function _u(){return Jn.bindingsEnabled}function Et(){return Jn.lFrame.lView}function di(){return Jn.lFrame.tView}function Aa(h){return Jn.lFrame.contextLView=h,h[8]}function Cc(h){return Jn.lFrame.contextLView=null,h}function nr(){let h=up();for(;null!==h&&64===h.type;)h=h.parent;return h}function up(){return Jn.lFrame.currentTNode}function jl(){const h=Jn.lFrame,f=h.currentTNode;return h.isParent?f:f.parent}function ps(h,f){const m=Jn.lFrame;m.currentTNode=h,m.isParent=f}function il(){return Jn.lFrame.isParent}function Tc(){Jn.lFrame.isParent=!1}function Do(){const h=Jn.lFrame;let f=h.bindingRootIndex;return-1===f&&(f=h.bindingRootIndex=h.tView.bindingStartIndex),f}function ka(){return Jn.lFrame.bindingIndex}function rl(){return Jn.lFrame.bindingIndex++}function Oa(h){const f=Jn.lFrame,m=f.bindingIndex;return f.bindingIndex=f.bindingIndex+h,m}function vu(h){Jn.lFrame.inI18n=h}function ol(h,f){const m=Jn.lFrame;m.bindingIndex=m.bindingRootIndex=h,fp(f)}function fp(h){Jn.lFrame.currentDirectiveIndex=h}function bu(){return Jn.lFrame.currentQueryIndex}function wu(h){Jn.lFrame.currentQueryIndex=h}function Ld(h){const f=h[1];return 2===f.type?f.declTNode:1===f.type?h[6]:null}function Cu(h,f,m){if(m&tt.SkipSelf){let C=f,x=h;for(;!(C=C.parent,null!==C||m&tt.Host||(C=Ld(x),null===C||(x=x[15],10&C.type))););if(null===C)return!1;f=C,h=x}const v=Jn.lFrame=Tu();return v.currentTNode=f,v.lView=h,!0}function og(h){const f=Tu(),m=h[1];Jn.lFrame=f,f.currentTNode=m.firstChild,f.lView=h,f.tView=m,f.contextLView=h,f.bindingIndex=m.bindingStartIndex,f.inI18n=!1}function Tu(){const h=Jn.lFrame,f=null===h?null:h.child;return null===f?Vd(h):f}function Vd(h){const f={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:h,child:null,inI18n:!1};return null!==h&&(h.child=f),f}function gp(){const h=Jn.lFrame;return Jn.lFrame=h.parent,h.currentTNode=null,h.lView=null,h}const mp=gp;function xc(){const h=gp();h.isParent=!0,h.tView=null,h.selectedIndex=-1,h.contextLView=null,h.elementDepthCount=0,h.currentDirectiveIndex=-1,h.currentNamespace=null,h.bindingRootIndex=-1,h.bindingIndex=-1,h.currentQueryIndex=0}function ho(){return Jn.lFrame.selectedIndex}function Io(h){Jn.lFrame.selectedIndex=h}function fr(){const h=Jn.lFrame;return Vl(h.tView,h.selectedIndex)}function Bd(){Jn.lFrame.currentNamespace="svg"}function sg(){!function sl(){Jn.lFrame.currentNamespace=null}()}function yp(h,f){for(let m=f.directiveStart,v=f.directiveEnd;m<v;m++){const x=h.data[m].type.prototype,{ngAfterContentInit:k,ngAfterContentChecked:N,ngAfterViewInit:H,ngAfterViewChecked:U,ngOnDestroy:ee}=x;k&&(h.contentHooks||(h.contentHooks=[])).push(-m,k),N&&((h.contentHooks||(h.contentHooks=[])).push(m,N),(h.contentCheckHooks||(h.contentCheckHooks=[])).push(m,N)),H&&(h.viewHooks||(h.viewHooks=[])).push(-m,H),U&&((h.viewHooks||(h.viewHooks=[])).push(m,U),(h.viewCheckHooks||(h.viewCheckHooks=[])).push(m,U)),null!=ee&&(h.destroyHooks||(h.destroyHooks=[])).push(m,ee)}}function ag(h,f,m){Jm(h,f,3,m)}function zl(h,f,m,v){(3&h[2])===m&&Jm(h,f,m,v)}function Ar(h,f){let m=h[2];(3&m)===f&&(m&=2047,m+=1,h[2]=m)}function Jm(h,f,m,v){const x=v??-1,k=f.length-1;let N=0;for(let H=void 0!==v?65535&h[18]:0;H<k;H++)if("number"==typeof f[H+1]){if(N=f[H],null!=v&&N>=v)break}else f[H]<0&&(h[18]+=65536),(N<x||-1==x)&&(dv(h,m,f,H),h[18]=(4294901760&h[18])+H+2),H++}function dv(h,f,m,v){const C=m[v]<0,x=m[v+1],N=h[C?-m[v]:m[v]];if(C){if(h[2]>>11<h[18]>>16&&(3&h[2])===f){h[2]+=2048;try{x.call(N)}finally{}}}else try{x.call(N)}finally{}}class al{constructor(f,m,v){this.factory=f,this.resolving=!1,this.canSeeViewProviders=m,this.injectImpl=v}}function e_(h,f,m){let v=0;for(;v<m.length;){const C=m[v];if("number"==typeof C){if(0!==C)break;v++;const x=m[v++],k=m[v++],N=m[v++];h.setAttribute(f,k,N,x)}else{const x=C,k=m[++v];gs(x)?h.setProperty(f,x,k):h.setAttribute(f,x,k),v++}}return v}function bp(h){return 3===h||4===h||6===h}function gs(h){return 64===h.charCodeAt(0)}function nt(h,f){if(null!==f&&0!==f.length)if(null===h||0===h.length)h=f.slice();else{let m=-1;for(let v=0;v<f.length;v++){const C=f[v];"number"==typeof C?m=C:0===m||Rt(h,m,C,null,-1===m||2===m?f[++v]:null)}}return h}function Rt(h,f,m,v,C){let x=0,k=h.length;if(-1===f)k=-1;else for(;x<h.length;){const N=h[x++];if("number"==typeof N){if(N===f){k=-1;break}if(N>f){k=x-1;break}}}for(;x<h.length;){const N=h[x];if("number"==typeof N)break;if(N===m){if(null===v)return void(null!==C&&(h[x+1]=C));if(v===h[x+1])return void(h[x+2]=C)}x++,null!==v&&x++,null!==C&&x++}-1!==k&&(h.splice(k,0,f),x=k+1),h.splice(x++,0,m),null!==v&&h.splice(x++,0,v),null!==C&&h.splice(x++,0,C)}function fa(h){return-1!==h}function Eu(h){return 32767&h}function Qi(h,f){let m=function Qt(h){return h>>16}(h),v=f;for(;m>0;)v=v[15],m--;return v}let ll=!0;function Dc(h){const f=ll;return ll=h,f}let Br=0;const Jo={};function sr(h,f){const m=Li(h,f);if(-1!==m)return m;const v=f[1];v.firstCreatePass&&(h.injectorIndex=f.length,Ic(v.data,h),Ic(f,null),Ic(v.blueprint,null));const C=zn(h,f),x=h.injectorIndex;if(fa(C)){const k=Eu(C),N=Qi(C,f),H=N[1].data;for(let U=0;U<8;U++)f[x+U]=N[k+U]|H[k+U]}return f[x+8]=C,x}function Ic(h,f){h.push(0,0,0,0,0,0,0,0,f)}function Li(h,f){return-1===h.injectorIndex||h.parent&&h.parent.injectorIndex===h.injectorIndex||null===f[h.injectorIndex+8]?-1:h.injectorIndex}function zn(h,f){if(h.parent&&-1!==h.parent.injectorIndex)return h.parent.injectorIndex;let m=0,v=null,C=f;for(;null!==C;){if(v=ms(C),null===v)return-1;if(m++,C=C[15],-1!==v.injectorIndex)return v.injectorIndex|m<<16}return-1}function Mo(h,f,m){!function hi(h,f,m){let v;"string"==typeof m?v=m.charCodeAt(0)||0:m.hasOwnProperty(z)&&(v=m[z]),null==v&&(v=m[z]=Br++);const C=255&v;f.data[h+(C>>5)]|=1<<C}(h,f,m)}function Gd(h,f,m){if(m&tt.Optional)return h;Be()}function wp(h,f,m,v){if(m&tt.Optional&&void 0===v&&(v=null),0==(m&(tt.Self|tt.Host))){const C=h[9],x=Tt(void 0);try{return C?C.get(f,v,m&tt.Optional):Gt(f,v,m&tt.Optional)}finally{Tt(x)}}return Gd(v,0,m)}function _i(h,f,m,v=tt.Default,C){if(null!==h){if(1024&f[2]){const k=function Ur(h,f,m,v,C){let x=h,k=f;for(;null!==x&&null!==k&&1024&k[2]&&!(256&k[2]);){const N=Ws(x,k,m,v|tt.Self,Jo);if(N!==Jo)return N;let H=x.parent;if(!H){const U=k[21];if(U){const ee=U.get(m,Jo,v);if(ee!==Jo)return ee}H=ms(k),k=k[15]}x=H}return C}(h,f,m,v,Jo);if(k!==Jo)return k}const x=Ws(h,f,m,v,Jo);if(x!==Jo)return x}return wp(f,m,v,C)}function Ws(h,f,m,v,C){const x=function Cp(h){if("string"==typeof h)return h.charCodeAt(0)||0;const f=h.hasOwnProperty(z)?h[z]:void 0;return"number"==typeof f?f>=0?255&f:t_:f}(m);if("function"==typeof x){if(!Cu(f,h,v))return v&tt.Host?Gd(C,0,v):wp(f,m,v,C);try{const k=x(v);if(null!=k||v&tt.Optional)return k;Be()}finally{mp()}}else if("number"==typeof x){let k=null,N=Li(h,f),H=-1,U=v&tt.Host?f[16][6]:null;for((-1===N||v&tt.SkipSelf)&&(H=-1===N?zn(h,f):f[N+8],-1!==H&&Ci(v,!1)?(k=f[1],N=Eu(H),f=Qi(H,f)):N=-1);-1!==N;){const ee=f[1];if(Pa(x,N,ee.data)){const he=Ks(N,f,m,k,v,U);if(he!==Jo)return he}H=f[N+8],-1!==H&&Ci(v,f[1].data[N+8]===U)&&Pa(x,N,f)?(k=ee,N=Eu(H),f=Qi(H,f)):N=-1}}return C}function Ks(h,f,m,v,C,x){const k=f[1],N=k.data[h+8],ee=Ra(N,k,m,null==v?Eo(N)&&ll:v!=k&&0!=(3&N.type),C&tt.Host&&x===N);return null!==ee?Xr(f,k,ee,N):Jo}function Ra(h,f,m,v,C){const x=h.providerIndexes,k=f.data,N=1048575&x,H=h.directiveStart,ee=x>>20,xe=C?N+ee:h.directiveEnd;for(let Ze=v?N:N+ee;Ze<xe;Ze++){const bt=k[Ze];if(Ze<H&&m===bt||Ze>=H&&bt.type===m)return Ze}if(C){const Ze=k[H];if(Ze&&Yo(Ze)&&Ze.type===m)return H}return null}function Xr(h,f,m,v){let C=h[m];const x=f.data;if(function Sc(h){return h instanceof al}(C)){const k=C;k.resolving&&function xt(h,f){const m=f?`. Dependency path: ${f.join(" > ")} > ${h}`:"";throw new je(-200,`Circular dependency in DI detected for ${h}${m}`)}(function Fe(h){return"function"==typeof h?h.name||h.toString():"object"==typeof h&&null!=h&&"function"==typeof h.type?h.type.name||h.type.toString():He(h)}(x[m]));const N=Dc(k.canSeeViewProviders);k.resolving=!0;const H=k.injectImpl?Tt(k.injectImpl):null;Cu(h,v,tt.Default);try{C=h[m]=k.factory(void 0,x,h,v),f.firstCreatePass&&m>=v.directiveStart&&function uv(h,f,m){const{ngOnChanges:v,ngOnInit:C,ngDoCheck:x}=f.type.prototype;if(v){const k=_c(f);(m.preOrderHooks||(m.preOrderHooks=[])).push(h,k),(m.preOrderCheckHooks||(m.preOrderCheckHooks=[])).push(h,k)}C&&(m.preOrderHooks||(m.preOrderHooks=[])).push(0-h,C),x&&((m.preOrderHooks||(m.preOrderHooks=[])).push(h,x),(m.preOrderCheckHooks||(m.preOrderCheckHooks=[])).push(h,x))}(m,x[m],f)}finally{null!==H&&Tt(H),Dc(N),k.resolving=!1,mp()}}return C}function Pa(h,f,m){return!!(m[f+(h>>5)]&1<<h)}function Ci(h,f){return!(h&tt.Self||h&tt.Host&&f)}class ar{constructor(f,m){this._tNode=f,this._lView=m}get(f,m,v){return _i(this._tNode,this._lView,f,v,m)}}function t_(){return new ar(nr(),Et())}function St(h){return Dn(()=>{const f=h.prototype.constructor,m=f[me]||br(f),v=Object.prototype;let C=Object.getPrototypeOf(h.prototype).constructor;for(;C&&C!==v;){const x=C[me]||br(C);if(x&&x!==m)return x;C=Object.getPrototypeOf(C)}return x=>new x})}function br(h){return we(h)?()=>{const f=br(ce(h));return f&&f()}:ds(h)}function ms(h){const f=h[1],m=f.type;return 2===m?f.declTNode:1===m?h[6]:null}function lg(h){return function xu(h,f){if("class"===f)return h.classes;if("style"===f)return h.styles;const m=h.attrs;if(m){const v=m.length;let C=0;for(;C<v;){const x=m[C];if(bp(x))break;if(0===x)C+=2;else if("number"==typeof x)for(C++;C<v&&"string"==typeof m[C];)C++;else{if(x===f)return m[C+1];C+=2}}}return null}(nr(),h)}const Ho="__parameters__";function Ac(h,f,m){return Dn(()=>{const v=function cl(h){return function(...m){if(h){const v=h(...m);for(const C in v)this[C]=v[C]}}}(f);function C(...x){if(this instanceof C)return v.apply(this,x),this;const k=new C(...x);return N.annotation=k,N;function N(H,U,ee){const he=H.hasOwnProperty(Ho)?H[Ho]:Object.defineProperty(H,Ho,{value:[]})[Ho];for(;he.length<=ee;)he.push(null);return(he[ee]=he[ee]||[]).push(k),H}}return m&&(C.prototype=Object.create(m.prototype)),C.prototype.ngMetadataName=h,C.annotationCls=C,C})}class ji{constructor(f,m){this._desc=f,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof m?this.__NG_ELEMENT_ID__=m:void 0!==m&&(this.\u0275prov=Yt({token:this,providedIn:m.providedIn||"root",factory:m.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Bo(h,f){void 0===f&&(f=h);for(let m=0;m<h.length;m++){let v=h[m];Array.isArray(v)?(f===h&&(f=h.slice(0,m)),Bo(v,f)):f!==h&&f.push(v)}return f}function ks(h,f){h.forEach(m=>Array.isArray(m)?ks(m,f):f(m))}function s_(h,f,m){f>=h.length?h.push(m):h.splice(f,0,m)}function Oc(h,f){return f>=h.length-1?h.pop():h.splice(f,1)[0]}function Gl(h,f){const m=[];for(let v=0;v<h;v++)m.push(f);return m}function Uo(h,f,m){let v=dl(h,f);return v>=0?h[1|v]=m:(v=~v,function cg(h,f,m,v){let C=h.length;if(C==f)h.push(m,v);else if(1===C)h.push(v,h[0]),h[0]=m;else{for(C--,h.push(h[C-1],h[C]);C>f;)h[C]=h[C-2],C--;h[f]=m,h[f+1]=v}}(h,v,f,m)),v}function $d(h,f){const m=dl(h,f);if(m>=0)return h[1|m]}function dl(h,f){return function Su(h,f,m){let v=0,C=h.length>>m;for(;C!==v;){const x=v+(C-v>>1),k=h[x<<m];if(f===k)return x<<m;k>f?C=x:v=x+1}return~(C<<m)}(h,f,1)}const ys={},Sp="__NG_DI_FLAG__",Iu="ngTempTokenPath",Dp=/\n/gm,Kd="__source";let Zl;function Fa(h){const f=Zl;return Zl=h,f}function Mu(h,f=tt.Default){if(void 0===Zl)throw new je(-203,!1);return null===Zl?Gt(h,void 0,f):Zl.get(h,f&tt.Optional?null:void 0,f)}function lr(h,f=tt.Default){return(function _t(){return Le}()||Mu)(ce(h),f)}function Pc(h,f=tt.Default){return"number"!=typeof f&&(f=0|(f.optional&&8)|(f.host&&1)|(f.self&&2)|(f.skipSelf&&4)),lr(h,f)}function hl(h){const f=[];for(let m=0;m<h.length;m++){const v=ce(h[m]);if(Array.isArray(v)){if(0===v.length)throw new je(900,!1);let C,x=tt.Default;for(let k=0;k<v.length;k++){const N=v[k],H=Au(N);"number"==typeof H?-1===H?C=N.token:x|=H:C=N}f.push(lr(C,x))}else f.push(lr(v))}return f}function ga(h,f){return h[Sp]=f,h.prototype[Sp]=f,h}function Au(h){return h[Sp]}const ku=ga(Ac("Optional"),8),ma=ga(Ac("SkipSelf"),4);let Or,go;function _g(h){Or=h}function fl(h){return function Op(){if(void 0===go&&(go=null,Pt.trustedTypes))try{go=Pt.trustedTypes.createPolicy("angular",{createHTML:h=>h,createScript:h=>h,createScriptURL:h=>h})}catch{}return go}()?.createHTML(h)||h}class Xs{constructor(f){this.changingThisBreaksApplicationSecurity=f}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class vg extends Xs{getTypeName(){return"HTML"}}class Nu extends Xs{getTypeName(){return"Style"}}class _a extends Xs{getTypeName(){return"Script"}}class gv extends Xs{getTypeName(){return"URL"}}class Np extends Xs{getTypeName(){return"ResourceURL"}}function ya(h){return h instanceof Xs?h.changingThisBreaksApplicationSecurity:h}function Fu(h,f){const m=function mv(h){return h instanceof Xs&&h.getTypeName()||null}(h);if(null!=m&&m!==f){if("ResourceURL"===m&&"URL"===f)return!0;throw new Error(`Required a safe ${f}, got a ${m} (see https://g.co/ng/security#xss)`)}return m===f}function u_(h){return new vg(h)}function eh(h){return new Nu(h)}function _v(h){return new _a(h)}function B0(h){return new gv(h)}function mo(h){return new Np(h)}function R(h){const f=new I(h);return function L(){try{return!!(new window.DOMParser).parseFromString(fl(""),"text/html")}catch{return!1}}()?new S(f):f}class S{constructor(f){this.inertDocumentHelper=f}getInertBodyElement(f){f="<body><remove></remove>"+f;try{const m=(new window.DOMParser).parseFromString(fl(f),"text/html").body;return null===m?this.inertDocumentHelper.getInertBodyElement(f):(m.removeChild(m.firstChild),m)}catch{return null}}}class I{constructor(f){if(this.defaultDoc=f,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const m=this.inertDocument.createElement("html");this.inertDocument.appendChild(m);const v=this.inertDocument.createElement("body");m.appendChild(v)}}getInertBodyElement(f){const m=this.inertDocument.createElement("template");if("content"in m)return m.innerHTML=fl(f),m;const v=this.inertDocument.createElement("body");return v.innerHTML=fl(f),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(v),v}stripCustomNsAttrs(f){const m=f.attributes;for(let C=m.length-1;0<C;C--){const k=m.item(C).name;("xmlns:ns1"===k||0===k.indexOf("ns1:"))&&f.removeAttribute(k)}let v=f.firstChild;for(;v;)v.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(v),v=v.nextSibling}}const Y=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ie=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function vt(h){return(h=String(h)).match(Y)||h.match(Ie)?h:"unsafe:"+h}function hn(h){return(h=String(h)).split(",").map(f=>vt(f.trim())).join(", ")}function bn(h){const f={};for(const m of h.split(","))f[m]=!0;return f}function Zn(...h){const f={};for(const m of h)for(const v in m)m.hasOwnProperty(v)&&(f[v]=!0);return f}const zi=bn("area,br,col,hr,img,wbr"),jo=bn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),gl=bn("rp,rt"),th=Zn(zi,Zn(jo,bn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Zn(gl,bn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Zn(gl,jo)),Fp=bn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),nh=bn("srcset"),Lp=Zn(Fp,nh,bn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),bn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),yv=bn("script,style,template");class U0{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(f){let m=f.firstChild,v=!0;for(;m;)if(m.nodeType===Node.ELEMENT_NODE?v=this.startElement(m):m.nodeType===Node.TEXT_NODE?this.chars(m.nodeValue):this.sanitizedSomething=!0,v&&m.firstChild)m=m.firstChild;else for(;m;){m.nodeType===Node.ELEMENT_NODE&&this.endElement(m);let C=this.checkClobberedElement(m,m.nextSibling);if(C){m=C;break}m=this.checkClobberedElement(m,m.parentNode)}return this.buf.join("")}startElement(f){const m=f.nodeName.toLowerCase();if(!th.hasOwnProperty(m))return this.sanitizedSomething=!0,!yv.hasOwnProperty(m);this.buf.push("<"),this.buf.push(m);const v=f.attributes;for(let C=0;C<v.length;C++){const x=v.item(C),k=x.name,N=k.toLowerCase();if(!Lp.hasOwnProperty(N)){this.sanitizedSomething=!0;continue}let H=x.value;Fp[N]&&(H=vt(H)),nh[N]&&(H=hn(H)),this.buf.push(" ",k,'="',rT(H),'"')}return this.buf.push(">"),!0}endElement(f){const m=f.nodeName.toLowerCase();th.hasOwnProperty(m)&&!zi.hasOwnProperty(m)&&(this.buf.push("</"),this.buf.push(m),this.buf.push(">"))}chars(f){this.buf.push(rT(f))}checkClobberedElement(f,m){if(m&&(f.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${f.outerHTML}`);return m}}const wg=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Va=/([^\#-~ |!])/g;function rT(h){return h.replace(/&/g,"&amp;").replace(wg,function(f){return"&#"+(1024*(f.charCodeAt(0)-55296)+(f.charCodeAt(1)-56320)+65536)+";"}).replace(Va,function(f){return"&#"+f.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let h_;function Hc(h,f){let m=null;try{h_=h_||R(h);let v=f?String(f):"";m=h_.getInertBodyElement(v);let C=5,x=v;do{if(0===C)throw new Error("Failed to sanitize html because the input is unstable");C--,v=x,x=m.innerHTML,m=h_.getInertBodyElement(v)}while(v!==x);return fl((new U0).sanitizeChildren(j0(m)||m))}finally{if(m){const v=j0(m)||m;for(;v.firstChild;)v.removeChild(v.firstChild)}}}function j0(h){return"content"in h&&function Ha(h){return h.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===h.nodeName}(h)?h.content:null}var rr=(()=>((rr=rr||{})[rr.NONE=0]="NONE",rr[rr.HTML=1]="HTML",rr[rr.STYLE=2]="STYLE",rr[rr.SCRIPT=3]="SCRIPT",rr[rr.URL=4]="URL",rr[rr.RESOURCE_URL=5]="RESOURCE_URL",rr))();function z0(h){const f=function Uc(){const h=Et();return h&&h[12]}();return f?f.sanitize(rr.URL,h)||"":Fu(h,"URL")?ya(h):vt(He(h))}const rh=new ji("ENVIRONMENT_INITIALIZER"),sT=new ji("INJECTOR",-1),G0=new ji("INJECTOR_DEF_TYPES");class q0{get(f,m=ys){if(m===ys){const v=new Error(`NullInjectorError: No provider for ${Se(f)}!`);throw v.name="NullInjectorError",v}return m}}function Ps(...h){return{\u0275providers:qt(0,h)}}function qt(h,...f){const m=[],v=new Set;let C;return ks(f,x=>{const k=x;oh(k,m,[],v)&&(C||(C=[]),C.push(k))}),void 0!==C&&Z0(C,m),m}function Z0(h,f){for(let m=0;m<h.length;m++){const{providers:C}=h[m];ks(C,x=>{f.push(x)})}}function oh(h,f,m,v){if(!(h=ce(h)))return!1;let C=null,x=Tn(h);const k=!x&&oe(h);if(x||k){if(k&&!k.standalone)return!1;C=h}else{const H=h.ngModule;if(x=Tn(H),!x)return!1;C=H}const N=v.has(C);if(k){if(N)return!1;if(v.add(C),k.dependencies){const H="function"==typeof k.dependencies?k.dependencies():k.dependencies;for(const U of H)oh(U,f,m,v)}}else{if(!x)return!1;{if(null!=x.imports&&!N){let U;v.add(C);try{ks(x.imports,ee=>{oh(ee,f,m,v)&&(U||(U=[]),U.push(ee))})}finally{}void 0!==U&&Z0(U,f)}if(!N){const U=ds(C)||(()=>new C);f.push({provide:C,useFactory:U,deps:kn},{provide:G0,useValue:C,multi:!0},{provide:rh,useValue:()=>lr(C),multi:!0})}const H=x.providers;null==H||N||ks(H,ee=>{f.push(ee)})}}return C!==h&&void 0!==h.providers}const p_=Ae({provide:String,useValue:Ae});function Bu(h){return null!==h&&"object"==typeof h&&p_ in h}function ah(h){return"function"==typeof h}const vv=new ji("Set Injector scope."),bs={},W0={};let K0;function Vp(){return void 0===K0&&(K0=new q0),K0}class lh{}class bv extends lh{constructor(f,m,v,C){super(),this.parent=m,this.source=v,this.scopes=C,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ml(f,k=>this.processProvider(k)),this.records.set(sT,Kl(void 0,this)),C.has("environment")&&this.records.set(lh,Kl(void 0,this));const x=this.records.get(vv);null!=x&&"string"==typeof x.value&&this.scopes.add(x.value),this.injectorDefTypes=new Set(this.get(G0.multi,kn,tt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const f of this._ngOnDestroyHooks)f.ngOnDestroy();for(const f of this._onDestroyHooks)f()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(f){this._onDestroyHooks.push(f)}runInContext(f){this.assertNotDestroyed();const m=Fa(this),v=Tt(void 0);try{return f()}finally{Fa(m),Tt(v)}}get(f,m=ys,v=tt.Default){this.assertNotDestroyed();const C=Fa(this),x=Tt(void 0);try{if(!(v&tt.SkipSelf)){let N=this.records.get(f);if(void 0===N){const H=function cT(h){return"function"==typeof h||"object"==typeof h&&h instanceof ji}(f)&&sn(f);N=H&&this.injectableDefInScope(H)?Kl(wv(f),bs):null,this.records.set(f,N)}if(null!=N)return this.hydrate(f,N)}return(v&tt.Self?Vp():this.parent).get(f,m=v&tt.Optional&&m===ys?null:m)}catch(k){if("NullInjectorError"===k.name){if((k[Iu]=k[Iu]||[]).unshift(Se(f)),C)throw k;return function $l(h,f,m,v){const C=h[Iu];throw f[Kd]&&C.unshift(f[Kd]),h.message=function hg(h,f,m,v=null){h=h&&"\n"===h.charAt(0)&&"\u0275"==h.charAt(1)?h.slice(2):h;let C=Se(f);if(Array.isArray(f))C=f.map(Se).join(" -> ");else if("object"==typeof f){let x=[];for(let k in f)if(f.hasOwnProperty(k)){let N=f[k];x.push(k+":"+("string"==typeof N?JSON.stringify(N):Se(N)))}C=`{${x.join(", ")}}`}return`${m}${v?"("+v+")":""}[${C}]: ${h.replace(Dp,"\n  ")}`}("\n"+h.message,C,m,v),h.ngTokenPath=C,h[Iu]=null,h}(k,f,"R3InjectorError",this.source)}throw k}finally{Tt(x),Fa(C)}}resolveInjectorInitializers(){const f=Fa(this),m=Tt(void 0);try{const v=this.get(rh.multi,kn,tt.Self);for(const C of v)C()}finally{Fa(f),Tt(m)}}toString(){const f=[],m=this.records;for(const v of m.keys())f.push(Se(v));return`R3Injector[${f.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new je(205,!1)}processProvider(f){let m=ah(f=ce(f))?f:ce(f&&f.provide);const v=function lT(h){return Bu(h)?Kl(void 0,h.useValue):Kl(Hp(h),bs)}(f);if(ah(f)||!0!==f.multi)this.records.get(m);else{let C=this.records.get(m);C||(C=Kl(void 0,bs,!0),C.factory=()=>hl(C.multi),this.records.set(m,C)),m=f,C.multi.push(f)}this.records.set(m,v)}hydrate(f,m){return m.value===bs&&(m.value=W0,m.value=m.factory()),"object"==typeof m.value&&m.value&&function f_(h){return null!==h&&"object"==typeof h&&"function"==typeof h.ngOnDestroy}(m.value)&&this._ngOnDestroyHooks.add(m.value),m.value}injectableDefInScope(f){if(!f.providedIn)return!1;const m=ce(f.providedIn);return"string"==typeof m?"any"===m||this.scopes.has(m):this.injectorDefTypes.has(m)}}function wv(h){const f=sn(h),m=null!==f?f.factory:ds(h);if(null!==m)return m;if(h instanceof ji)throw new je(204,!1);if(h instanceof Function)return function Y0(h){const f=h.length;if(f>0)throw Gl(f,"?"),new je(204,!1);const m=function un(h){const f=h&&(h[ri]||h[Sn]);if(f){const m=function en(h){if(h.hasOwnProperty("name"))return h.name;const f=(""+h).match(/^function\s*([^\s(]+)/);return null===f?"":f[1]}(h);return console.warn(`DEPRECATED: DI is instantiating a token "${m}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${m}" class.`),f}return null}(h);return null!==m?()=>m.factory(h):()=>new h}(h);throw new je(204,!1)}function Hp(h,f,m){let v;if(ah(h)){const C=ce(h);return ds(C)||wv(C)}if(Bu(h))v=()=>ce(h.useValue);else if(function sh(h){return!(!h||!h.useFactory)}(h))v=()=>h.useFactory(...hl(h.deps||[]));else if(function aT(h){return!(!h||!h.useExisting)}(h))v=()=>lr(ce(h.useExisting));else{const C=ce(h&&(h.useClass||h.provide));if(!function Tg(h){return!!h.deps}(h))return ds(C)||wv(C);v=()=>new C(...hl(h.deps))}return v}function Kl(h,f,m=!1){return{factory:h,value:f,multi:m?[]:void 0}}function Cv(h){return!!h.\u0275providers}function ml(h,f){for(const m of h)Array.isArray(m)?ml(m,f):Cv(m)?ml(m.\u0275providers,f):f(m)}class Eg{}class Bp{resolveComponentFactory(f){throw function ii(h){const f=Error(`No component factory found for ${Se(h)}. Did you add it to @NgModule.entryComponents?`);return f.ngComponent=h,f}(f)}}let Up=(()=>{class h{}return h.NULL=new Bp,h})();function Ua(){return uh(nr(),Et())}function uh(h,f){return new Uu(As(h,f))}let Uu=(()=>{class h{constructor(m){this.nativeElement=m}}return h.__NG_ELEMENT_ID__=Ua,h})();function uT(h){return h instanceof Uu?h.nativeElement:h}class ja{}let qr=(()=>{class h{}return h.__NG_ELEMENT_ID__=()=>function jc(){const h=Et(),m=So(nr().index,h);return(co(m)?m:h)[11]}(),h})(),g_=(()=>{class h{}return h.\u0275prov=Yt({token:h,providedIn:"root",factory:()=>null}),h})();class Q0{constructor(f){this.full=f,this.major=f.split(".")[0],this.minor=f.split(".")[1],this.patch=f.split(".").slice(2).join(".")}}const ju=new Q0("14.1.1"),xg={};function zc(h){return h.ngOriginalError}class Gc{constructor(){this._console=console}handleError(f){const m=this._findOriginalError(f);this._console.error("ERROR",f),m&&this._console.error("ORIGINAL ERROR",m)}_findOriginalError(f){let m=f&&zc(f);for(;m&&zc(m);)m=zc(m);return m||null}}const xv=/^>|^->|<!--|-->|--!>|<!-$/g,ow=/(<|>)/;const Dg=new Map;let Dv=0;const qp="__ngContext__";function ko(h,f){co(f)?(h[qp]=f[20],function lw(h){Dg.set(h[20],h)}(f)):h[qp]=f}function hh(h){const f=h[qp];return"number"==typeof f?function ns(h){return Dg.get(h)||null}(f):f||null}function Ig(h){const f=hh(h);return f?co(f)?f:f.lView:null}const is=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Pt))();function Ag(h){return h.ownerDocument.defaultView}function or(h){return h instanceof Function?h():h}var yl=(()=>((yl=yl||{})[yl.Important=1]="Important",yl[yl.DashCase=2]="DashCase",yl))();let Rg;function Pg(h,f){return Rg(h,f)}function qc(h){const f=h[3];return To(f)?f[3]:f}function Vg(h){return gw(h[13])}function C_(h){return gw(h[4])}function gw(h){for(;null!==h&&!To(h);)h=h[4];return h}function ph(h,f,m,v,C){if(null!=v){let x,k=!1;To(v)?x=v:co(v)&&(k=!0,v=v[0]);const N=Mr(v);0===h&&null!==m?null==C?x_(f,m,N):$u(f,m,N,C||null,!0):1===h&&null!==m?$u(f,m,N,C||null,!0):2===h?Vv(f,N,k):3===h&&f.destroyNode(N),null!=x&&function jg(h,f,m,v,C){const x=m[7];x!==Mr(m)&&ph(f,h,v,x,C);for(let N=10;N<m.length;N++){const H=m[N];Ch(H[1],H,h,f,v,x)}}(f,h,x,m,C)}}function qu(h,f){return h.createText(f)}function Zu(h,f,m){h.setValue(f,m)}function fh(h,f){return h.createComment(function __(h){return h.replace(xv,f=>f.replace(ow,"\u200b$1\u200b"))}(f))}function gh(h,f,m){return h.createElement(f,m)}function Hg(h,f){const m=h[9],v=m.indexOf(f),C=f[3];512&f[2]&&(f[2]&=-513,Bl(C,-1)),m.splice(v,1)}function E_(h,f){if(h.length<=10)return;const m=10+f,v=h[m];if(v){const C=v[17];null!==C&&C!==h&&Hg(C,v),f>0&&(h[m-1][4]=v[4]);const x=Oc(h,10+f);!function Rv(h,f){Ch(h,f,f[11],2,null,null),f[0]=null,f[6]=null}(v[1],v);const k=x[19];null!==k&&k.detachView(x[1]),v[3]=null,v[4]=null,v[2]&=-65}return v}function $p(h,f){if(!(128&f[2])){const m=f[11];m.destroyNode&&Ch(h,f,m,3,null,null),function Nv(h){let f=h[13];if(!f)return _h(h[1],h);for(;f;){let m=null;if(co(f))m=f[13];else{const v=f[10];v&&(m=v)}if(!m){for(;f&&!f[4]&&f!==h;)co(f)&&_h(f[1],f),f=f[3];null===f&&(f=h),co(f)&&_h(f[1],f),m=f&&f[4]}f=m}}(f)}}function _h(h,f){if(!(128&f[2])){f[2]&=-65,f[2]|=128,function yh(h,f){let m;if(null!=h&&null!=(m=h.destroyHooks))for(let v=0;v<m.length;v+=2){const C=f[m[v]];if(!(C instanceof al)){const x=m[v+1];if(Array.isArray(x))for(let k=0;k<x.length;k+=2){const N=C[x[k]],H=x[k+1];try{H.call(N)}finally{}}else try{x.call(C)}finally{}}}}(h,f),function ws(h,f){const m=h.cleanup,v=f[7];let C=-1;if(null!==m)for(let x=0;x<m.length-1;x+=2)if("string"==typeof m[x]){const k=m[x+1],N="function"==typeof k?k(f):Mr(f[k]),H=v[C=m[x+2]],U=m[x+3];"boolean"==typeof U?N.removeEventListener(m[x],H,U):U>=0?v[C=U]():v[C=-U].unsubscribe(),x+=2}else{const k=v[C=m[x+1]];m[x].call(k)}if(null!==v){for(let x=C+1;x<v.length;x++)(0,v[x])();f[7]=null}}(h,f),1===f[1].type&&f[11].destroy();const m=f[17];if(null!==m&&To(f[3])){m!==f[3]&&Hg(m,f);const v=f[19];null!==v&&v.detachView(h)}!function Jl(h){Dg.delete(h[20])}(f)}}function vh(h,f,m){return Wp(h,f.parent,m)}function Wp(h,f,m){let v=f;for(;null!==v&&40&v.type;)v=(f=v).parent;if(null===v)return m[0];if(2&v.flags){const C=h.data[v.directiveStart].encapsulation;if(C===Ht.None||C===Ht.Emulated)return null}return As(v,m)}function $u(h,f,m,v,C){h.insertBefore(f,m,v,C)}function x_(h,f,m){h.appendChild(f,m)}function Lv(h,f,m,v,C){null!==v?$u(h,f,m,v,C):x_(h,f,m)}function vl(h,f){return h.parentNode(f)}function S_(h,f,m){return bh(h,f,m)}function Xl(h,f,m){return 40&h.type?As(h,m):null}let Bg,bh=Xl;function Ug(h,f){bh=h,Bg=f}function Yp(h,f,m,v){const C=vh(h,v,f),x=f[11],N=S_(v.parent||f[6],v,f);if(null!=C)if(Array.isArray(m))for(let H=0;H<m.length;H++)Lv(x,C,m[H],N,!1);else Lv(x,C,m,N,!1);void 0!==Bg&&Bg(x,v,f,m,C)}function wh(h,f){if(null!==f){const m=f.type;if(3&m)return As(f,h);if(4&m)return Qp(-1,h[f.index]);if(8&m){const v=f.child;if(null!==v)return wh(h,v);{const C=h[f.index];return To(C)?Qp(-1,C):Mr(C)}}if(32&m)return Pg(f,h)()||Mr(h[f.index]);{const v=Jp(h,f);return null!==v?Array.isArray(v)?v[0]:wh(qc(h[16]),v):wh(h,f.next)}}return null}function Jp(h,f){return null!==f?h[16][6].projection[f.projection]:null}function Qp(h,f){const m=10+h+1;if(m<f.length){const v=f[m],C=v[1].firstChild;if(null!==C)return wh(v,C)}return f[7]}function Vv(h,f,m){const v=vl(h,f);v&&function mw(h,f,m,v){h.removeChild(f,m,v)}(h,v,f,m)}function D_(h,f,m,v,C,x,k){for(;null!=m;){const N=v[m.index],H=m.type;if(k&&0===f&&(N&&ko(Mr(N),v),m.flags|=4),64!=(64&m.flags))if(8&H)D_(h,f,m.child,v,C,x,!1),ph(f,h,C,N,x);else if(32&H){const U=Pg(m,v);let ee;for(;ee=U();)ph(f,h,C,ee,x);ph(f,h,C,N,x)}else 16&H?Hv(h,f,v,m,C,x):ph(f,h,C,N,x);m=k?m.projectionNext:m.next}}function Ch(h,f,m,v,C,x){D_(m,v,h.firstChild,f,C,x,!1)}function Hv(h,f,m,v,C,x){const k=m[16],H=k[6].projection[v.projection];if(Array.isArray(H))for(let U=0;U<H.length;U++)ph(f,h,C,H[U],x);else D_(h,f,H,k[3],C,x,!0)}function Zc(h,f,m){h.setAttribute(f,"style",m)}function Xp(h,f,m){""===m?h.removeAttribute(f,"class"):h.setAttribute(f,"class",m)}function Bv(h,f,m){let v=h.length;for(;;){const C=h.indexOf(f,m);if(-1===C)return C;if(0===C||h.charCodeAt(C-1)<=32){const x=f.length;if(C+x===v||h.charCodeAt(C+x)<=32)return C}m=C+1}}const Eh="ng-template";function jv(h,f,m){let v=0;for(;v<h.length;){let C=h[v++];if(m&&"class"===C){if(C=h[v],-1!==Bv(C.toLowerCase(),f,0))return!0}else if(1===C){for(;v<h.length&&"string"==typeof(C=h[v++]);)if(C.toLowerCase()===f)return!0;return!1}}return!1}function Wu(h){return 4===h.type&&h.value!==Eh}function _w(h,f,m){return f===(4!==h.type||m?h.value:Eh)}function zv(h,f,m){let v=4;const C=h.attrs||[],x=function I_(h){for(let f=0;f<h.length;f++)if(bp(h[f]))return f;return h.length}(C);let k=!1;for(let N=0;N<f.length;N++){const H=f[N];if("number"!=typeof H){if(!k)if(4&v){if(v=2|1&v,""!==H&&!_w(h,H,m)||""===H&&1===f.length){if(rs(v))return!1;k=!0}}else{const U=8&v?H:f[++N];if(8&v&&null!==h.attrs){if(!jv(h.attrs,U,m)){if(rs(v))return!1;k=!0}continue}const he=$c(8&v?"class":H,C,Wu(h),m);if(-1===he){if(rs(v))return!1;k=!0;continue}if(""!==U){let xe;xe=he>x?"":C[he+1].toLowerCase();const Ze=8&v?xe:null;if(Ze&&-1!==Bv(Ze,U,0)||2&v&&U!==xe){if(rs(v))return!1;k=!0}}}}else{if(!k&&!rs(v)&&!rs(H))return!1;if(k&&rs(H))continue;k=!1,v=H|1&v}}return rs(v)||k}function rs(h){return 0==(1&h)}function $c(h,f,m,v){if(null===f)return-1;let C=0;if(v||!m){let x=!1;for(;C<f.length;){const k=f[C];if(k===h)return C;if(3===k||6===k)x=!0;else{if(1===k||2===k){let N=f[++C];for(;"string"==typeof N;)N=f[++C];continue}if(4===k)break;if(0===k){C+=4;continue}}C+=x?1:2}return-1}return function yw(h,f){let m=h.indexOf(4);if(m>-1)for(m++;m<h.length;){const v=h[m];if("number"==typeof v)return-1;if(v===f)return m;m++}return-1}(f,h)}function ef(h,f,m=!1){for(let v=0;v<f.length;v++)if(zv(h,f[v],m))return!0;return!1}function Cr(h,f){e:for(let m=0;m<f.length;m++){const v=f[m];if(h.length===v.length){for(let C=0;C<h.length;C++)if(h[C]!==v[C])continue e;return!0}}return!1}function qg(h,f){return h?":not("+f.trim()+")":f}function Gv(h){let f=h[0],m=1,v=2,C="",x=!1;for(;m<h.length;){let k=h[m];if("string"==typeof k)if(2&v){const N=h[++m];C+="["+k+(N.length>0?'="'+N+'"':"")+"]"}else 8&v?C+="."+k:4&v&&(C+=" "+k);else""!==C&&!rs(k)&&(f+=qg(x,C),C=""),v=k,x=x||!rs(v);m++}return""!==C&&(f+=qg(x,C)),f}const Qn={};function M_(h){Zv(di(),Et(),ho()+h,!1)}function Zv(h,f,m,v){if(!v)if(3==(3&f[2])){const x=h.preOrderCheckHooks;null!==x&&ag(f,x,m)}else{const x=h.preOrderHooks;null!==x&&zl(f,x,0,m)}Io(m)}function Ku(h,f=null,m=null,v){const C=Tw(h,f,m,v);return C.resolveInjectorInitializers(),C}function Tw(h,f=null,m=null,v,C=new Set){const x=[m||kn,Ps(h)];return v=v||("object"==typeof h?void 0:Se(h)),new bv(x,f||Vp(),v||null,C)}let xh=(()=>{class h{static create(m,v){if(Array.isArray(m))return Ku({name:""},v,m,"");{const C=m.name??"";return Ku({name:C},m.parent,m.providers,C)}}}return h.THROW_IF_NOT_FOUND=ys,h.NULL=new q0,h.\u0275prov=Yt({token:h,providedIn:"any",factory:()=>lr(sT)}),h.__NG_ELEMENT_ID__=-1,h})();function ta(h,f=tt.Default){const m=Et();return null===m?lr(h,f):_i(nr(),m,ce(h),f)}function Qv(){throw new Error("invalid")}function Qu(h,f){return h<<17|f<<2}function os(h){return h>>17&32767}function Ih(h){return 2|h}function ba(h){return(131068&h)>>2}function Ei(h,f){return-131069&h|f<<2}function L_(h){return 1|h}function Mt(h,f){const m=h.contentQueries;if(null!==m)for(let v=0;v<m.length;v+=2){const C=m[v],x=m[v+1];if(-1!==x){const k=h.data[x];wu(C),k.contentQueries(2,f[x],x)}}}function td(h,f,m,v,C,x,k,N,H,U,ee){const he=f.blueprint.slice();return he[0]=C,he[2]=76|v,(null!==ee||h&&1024&h[2])&&(he[2]|=1024),sp(he),he[3]=he[15]=h,he[8]=m,he[10]=k||h&&h[10],he[11]=N||h&&h[11],he[12]=H||h&&h[12]||null,he[9]=U||h&&h[9]||null,he[6]=x,he[20]=function hT(){return Dv++}(),he[21]=ee,he[16]=2==f.type?h[16]:he,he}function cf(h,f,m,v,C){let x=h.data[f];if(null===x)x=uf(h,f,m,v,C),function hp(){return Jn.lFrame.inI18n}()&&(x.flags|=64);else if(64&x.type){x.type=m,x.value=v,x.attrs=C;const k=jl();x.injectorIndex=null===k?-1:k.injectorIndex}return ps(x,!0),x}function uf(h,f,m,v,C){const x=up(),k=il(),H=h.data[f]=function Nw(h,f,m,v,C,x){return{type:m,index:v,insertBeforeIndex:null,injectorIndex:f?f.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:C,attrs:x,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:f,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,k?x:x&&x.parent,m,f,v,C);return null===h.firstChild&&(h.firstChild=H),null!==x&&(k?null==x.child&&null!==H.parent&&(x.child=H):null===x.next&&(x.next=H)),H}function Za(h,f,m,v){if(0===m)return-1;const C=f.length;for(let x=0;x<m;x++)f.push(v),h.blueprint.push(v),h.data.push(null);return C}function $a(h,f,m){og(f);try{const v=h.viewQuery;null!==v&&sc(1,v,m);const C=h.template;null!==C&&wT(h,f,C,1,m),h.firstCreatePass&&(h.firstCreatePass=!1),h.staticContentQueries&&Mt(h,f),h.staticViewQueries&&sc(2,h.viewQuery,m);const x=h.components;null!==x&&function ib(h,f){for(let m=0;m<f.length;m++)cr(h,f[m])}(f,x)}catch(v){throw h.firstCreatePass&&(h.incompleteFirstPass=!0,h.firstCreatePass=!1),v}finally{f[2]&=-5,xc()}}function nc(h,f,m,v){const C=f[2];if(128!=(128&C)){og(f);try{sp(f),function dp(h){return Jn.lFrame.bindingIndex=h}(h.bindingStartIndex),null!==m&&wT(h,f,m,2,v);const k=3==(3&C);if(k){const U=h.preOrderCheckHooks;null!==U&&ag(f,U,null)}else{const U=h.preOrderHooks;null!==U&&zl(f,U,0,null),Ar(f,0)}if(function lb(h){for(let f=Vg(h);null!==f;f=C_(f)){if(!f[2])continue;const m=f[9];for(let v=0;v<m.length;v++){const C=m[v],x=C[3];0==(512&C[2])&&Bl(x,1),C[2]|=512}}}(f),function Fs(h){for(let f=Vg(h);null!==f;f=C_(f))for(let m=10;m<f.length;m++){const v=f[m],C=v[1];nl(v)&&nc(C,v,C.template,v[8])}}(f),null!==h.contentQueries&&Mt(h,f),k){const U=h.contentCheckHooks;null!==U&&ag(f,U)}else{const U=h.contentHooks;null!==U&&zl(f,U,1),Ar(f,1)}!function ot(h,f){const m=h.hostBindingOpCodes;if(null!==m)try{for(let v=0;v<m.length;v++){const C=m[v];if(C<0)Io(~C);else{const x=C,k=m[++v],N=m[++v];ol(k,x),N(2,f[x])}}}finally{Io(-1)}}(h,f);const N=h.components;null!==N&&function no(h,f){for(let m=0;m<f.length;m++)Tl(h,f[m])}(f,N);const H=h.viewQuery;if(null!==H&&sc(2,H,v),k){const U=h.viewCheckHooks;null!==U&&ag(f,U)}else{const U=h.viewHooks;null!==U&&zl(f,U,2),Ar(f,2)}!0===h.firstUpdatePass&&(h.firstUpdatePass=!1),f[2]&=-41,512&f[2]&&(f[2]&=-513,Bl(f[3],-1))}finally{xc()}}}function nd(h,f,m,v){const C=f[10],k=bc(f);try{!k&&C.begin&&C.begin(),k&&$a(h,f,v),nc(h,f,m,v)}finally{!k&&C.end&&C.end()}}function wT(h,f,m,v,C){const x=ho(),k=2&v;try{Io(-1),k&&f.length>22&&Zv(h,f,22,!1),m(v,C)}finally{Io(x)}}function rb(h,f,m){if(gu(f)){const C=f.directiveEnd;for(let x=f.directiveStart;x<C;x++){const k=h.data[x];k.contentQueries&&k.contentQueries(1,m[x],x)}}}function tm(h,f,m){!_u()||(function ob(h,f,m,v){const C=m.directiveStart,x=m.directiveEnd;h.firstCreatePass||sr(m,f),ko(v,f);const k=m.initialInputs;for(let N=C;N<x;N++){const H=h.data[N],U=Yo(H);U&&Cl(f,m,H);const ee=Xr(f,h,N,m);ko(ee,f),null!==k&&ab(0,N-C,ee,H,0,k),U&&(So(m.index,f)[8]=ee)}}(h,f,m,As(m,f)),128==(128&m.flags)&&function hf(h,f,m){const v=m.directiveStart,C=m.directiveEnd,x=m.index,k=function pp(){return Jn.lFrame.currentDirectiveIndex}();try{Io(x);for(let N=v;N<C;N++){const H=h.data[N],U=f[N];fp(N),(null!==H.hostBindings||0!==H.hostVars||null!==H.hostAttrs)&&wl(H,U)}}finally{Io(-1),fp(k)}}(h,f,m))}function ei(h,f,m=As){const v=f.localNames;if(null!==v){let C=f.index+1;for(let x=0;x<v.length;x+=2){const k=v[x+1],N=-1===k?m(f,h):h[k];h[C++]=N}}}function ia(h){const f=h.tView;return null===f||f.incompleteFirstPass?h.tView=V_(1,null,h.template,h.decls,h.vars,h.directiveDefs,h.pipeDefs,h.viewQuery,h.schemas,h.consts):f}function V_(h,f,m,v,C,x,k,N,H,U){const ee=22+v,he=ee+C,xe=function Tr(h,f){const m=[];for(let v=0;v<f;v++)m.push(v<h?null:Qn);return m}(ee,he),Ze="function"==typeof U?U():U;return xe[1]={type:h,blueprint:xe,template:m,queries:null,viewQuery:N,declTNode:f,data:xe.slice().fill(null,ee),bindingStartIndex:ee,expandoStartIndex:he,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof x?x():x,pipeRegistry:"function"==typeof k?k():k,firstChild:null,schemas:H,consts:Ze,incompleteFirstPass:!1}}function xi(h,f,m,v){const C=c(f);null===m?C.push(v):(C.push(m),h.firstCreatePass&&p(h).push(v,C.length-1))}function Pr(h,f,m){for(let v in h)if(h.hasOwnProperty(v)){const C=h[v];(m=null===m?{}:m).hasOwnProperty(v)?m[v].push(f,C):m[v]=[f,C]}return m}function on(h,f){const v=f.directiveEnd,C=h.data,x=f.attrs,k=[];let N=null,H=null;for(let U=f.directiveStart;U<v;U++){const ee=C[U],he=ee.inputs,xe=null===x||Wu(f)?null:pf(he,x);k.push(xe),N=Pr(he,U,N),H=Pr(ee.outputs,U,H)}null!==N&&(N.hasOwnProperty("class")&&(f.flags|=16),N.hasOwnProperty("style")&&(f.flags|=32)),f.initialInputs=k,f.inputs=N,f.outputs=H}function ss(h,f,m,v,C,x,k,N){const H=As(f,m);let ee,U=f.inputs;!N&&null!=U&&(ee=U[v])?(E(h,m,ee,v,C),Eo(f)&&bl(m,f.index)):3&f.type&&(v=function nm(h){return"class"===h?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h}(v),C=null!=k?k(C,f.value||"",v):C,x.setProperty(H,v,C))}function bl(h,f){const m=So(f,h);16&m[2]||(m[2]|=32)}function ic(h,f,m,v){let C=!1;if(_u()){const x=function sb(h,f,m){const v=h.directiveRegistry;let C=null;if(v)for(let x=0;x<v.length;x++){const k=v[x];ef(m,k.selectors,!1)&&(C||(C=[]),Mo(sr(m,f),h,k.type),Yo(k)?(et(h,m),C.unshift(k)):C.push(k))}return C}(h,f,m),k=null===v?null:{"":-1};if(null!==x){C=!0,Fw(m,h.data.length,x.length);for(let ee=0;ee<x.length;ee++){const he=x[ee];he.providersResolver&&he.providersResolver(he)}let N=!1,H=!1,U=Za(h,f,x.length,null);for(let ee=0;ee<x.length;ee++){const he=x[ee];m.mergedAttrs=nt(m.mergedAttrs,he.hostAttrs),Rh(h,m,f,U,he),Wa(U,he,k),null!==he.contentQueries&&(m.flags|=8),(null!==he.hostBindings||null!==he.hostAttrs||0!==he.hostVars)&&(m.flags|=128);const xe=he.type.prototype;!N&&(xe.ngOnChanges||xe.ngOnInit||xe.ngDoCheck)&&((h.preOrderHooks||(h.preOrderHooks=[])).push(m.index),N=!0),!H&&(xe.ngOnChanges||xe.ngDoCheck)&&((h.preOrderCheckHooks||(h.preOrderCheckHooks=[])).push(m.index),H=!0),U++}on(h,m)}k&&function im(h,f,m){if(f){const v=h.localNames=[];for(let C=0;C<f.length;C+=2){const x=m[f[C+1]];if(null==x)throw new je(-301,!1);v.push(f[C],x)}}}(m,v,k)}return m.mergedAttrs=nt(m.mergedAttrs,m.attrs),C}function Ns(h,f,m,v,C,x){const k=x.hostBindings;if(k){let N=h.hostBindingOpCodes;null===N&&(N=h.hostBindingOpCodes=[]);const H=~f.index;(function U_(h){let f=h.length;for(;f>0;){const m=h[--f];if("number"==typeof m&&m<0)return m}return 0})(N)!=H&&N.push(H),N.push(v,C,k)}}function wl(h,f){null!==h.hostBindings&&h.hostBindings(1,f)}function et(h,f){f.flags|=2,(h.components||(h.components=[])).push(f.index)}function Wa(h,f,m){if(m){if(f.exportAs)for(let v=0;v<f.exportAs.length;v++)m[f.exportAs[v]]=h;Yo(f)&&(m[""]=h)}}function Fw(h,f,m){h.flags|=1,h.directiveStart=f,h.directiveEnd=f+m,h.providerIndexes=f}function Rh(h,f,m,v,C){h.data[v]=C;const x=C.factory||(C.factory=ds(C.type)),k=new al(x,Yo(C),ta);h.blueprint[v]=k,m[v]=k,Ns(h,f,0,v,Za(h,m,C.hostVars,Qn),C)}function Cl(h,f,m){const v=As(f,h),C=ia(m),x=h[10],k=Wr(h,td(h,C,null,m.onPush?32:16,v,f,x,x.createRenderer(v,m),null,null,null));h[f.index]=k}function oc(h,f,m,v,C,x,k){if(null==x)h.removeAttribute(f,C,m);else{const N=null==k?He(x):k(x,v||"",C);h.setAttribute(f,C,N,m)}}function ab(h,f,m,v,C,x){const k=x[f];if(null!==k){const N=v.setInput;for(let H=0;H<k.length;){const U=k[H++],ee=k[H++],he=k[H++];null!==N?v.setInput(m,he,U,ee):m[ee]=he}}}function pf(h,f){let m=null,v=0;for(;v<f.length;){const C=f[v];if(0!==C)if(5!==C){if("number"==typeof C)break;h.hasOwnProperty(C)&&(null===m&&(m=[]),m.push(C,h[C],f[v+1])),v+=2}else v+=2;else v+=4}return m}function Cs(h,f,m,v){return new Array(h,!0,!1,f,null,0,v,m,null,null)}function Tl(h,f){const m=So(f,h);if(nl(m)){const v=m[1];48&m[2]?nc(v,m,v.template,m[8]):m[5]>0&&id(m)}}function id(h){for(let v=Vg(h);null!==v;v=C_(v))for(let C=10;C<v.length;C++){const x=v[C];if(512&x[2]){const k=x[1];nc(k,x,k.template,x[8])}else x[5]>0&&id(x)}const m=h[1].components;if(null!==m)for(let v=0;v<m.length;v++){const C=So(m[v],h);nl(C)&&C[5]>0&&id(C)}}function cr(h,f){const m=So(f,h),v=m[1];(function j_(h,f){for(let m=f.length;m<h.blueprint.length;m++)f.push(h.blueprint[m])})(v,m),$a(v,m,m[8])}function Wr(h,f){return h[13]?h[14][4]=f:h[13]=f,h[14]=f,f}function Vi(h){for(;h;){h[2]|=32;const f=qc(h);if(tp(h)&&!f)return h;h=f}return null}function CT(h){!function Ph(h){for(let f=0;f<h.components.length;f++){const m=h.components[f],v=Ig(m);if(null!==v){const C=v[1];nd(C,v,C.template,m)}}}(h[8])}function sc(h,f,m){wu(0),f(h,m)}const d=(()=>Promise.resolve(null))();function c(h){return h[7]||(h[7]=[])}function p(h){return h.cleanup||(h.cleanup=[])}function b(h,f){const m=h[9],v=m?m.get(Gc,null):null;v&&v.handleError(f)}function E(h,f,m,v,C){for(let x=0;x<m.length;){const k=m[x++],N=m[x++],H=f[k],U=h.data[k];null!==U.setInput?U.setInput(H,C,v,N):H[N]=C}}function M(h,f,m){const v=Pd(f,h);Zu(h[11],v,m)}function P(h,f,m){let v=m?h.styles:null,C=m?h.classes:null,x=0;if(null!==f)for(let k=0;k<f.length;k++){const N=f[k];"number"==typeof N?x=N:1==x?C=pe(C,N):2==x&&(v=pe(v,N+": "+f[++k]+";"))}m?h.styles=v:h.stylesWithoutHost=v,m?h.classes=C:h.classesWithoutHost=C}function B(h,f,m,v,C=!1){for(;null!==m;){const x=f[m.index];if(null!==x&&v.push(Mr(x)),To(x))for(let N=10;N<x.length;N++){const H=x[N],U=H[1].firstChild;null!==U&&B(H[1],H,U,v)}const k=m.type;if(8&k)B(h,f,m.child,v);else if(32&k){const N=Pg(m,f);let H;for(;H=N();)v.push(H)}else if(16&k){const N=Jp(f,m);if(Array.isArray(N))v.push(...N);else{const H=qc(f[16]);B(H[1],H,N,v,!0)}}m=C?m.projectionNext:m.next}return v}class G{constructor(f,m){this._lView=f,this._cdRefInjectingView=m,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const f=this._lView,m=f[1];return B(m,f,m.firstChild,[])}get context(){return this._lView[8]}set context(f){this._lView[8]=f}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const f=this._lView[3];if(To(f)){const m=f[8],v=m?m.indexOf(this):-1;v>-1&&(E_(f,v),Oc(m,v))}this._attachedToViewContainer=!1}$p(this._lView[1],this._lView)}onDestroy(f){xi(this._lView[1],this._lView,null,f)}markForCheck(){Vi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Ls(h,f,m){const v=f[10];v.begin&&v.begin();try{nc(h,f,h.template,m)}catch(C){throw b(f,C),C}finally{v.end&&v.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new je(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Pv(h,f){Ch(h,f,f[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(f){if(this._attachedToViewContainer)throw new je(902,!1);this._appRef=f}}class te extends G{constructor(f){super(f),this._view=f}detectChanges(){CT(this._view)}checkNoChanges(){}get context(){return null}}class fe extends Up{constructor(f){super(),this.ngModule=f}resolveComponentFactory(f){const m=oe(f);return new st(m,this.ngModule)}}function ye(h){const f=[];for(let m in h)h.hasOwnProperty(m)&&f.push({propName:h[m],templateName:m});return f}class ze{constructor(f,m){this.injector=f,this.parentInjector=m}get(f,m,v){const C=this.injector.get(f,xg,v);return C!==xg||m===xg?C:this.parentInjector.get(f,m,v)}}class st extends Eg{constructor(f,m){super(),this.componentDef=f,this.ngModule=m,this.componentType=f.type,this.selector=function qv(h){return h.map(Gv).join(",")}(f.selectors),this.ngContentSelectors=f.ngContentSelectors?f.ngContentSelectors:[],this.isBoundToModule=!!m}get inputs(){return ye(this.componentDef.inputs)}get outputs(){return ye(this.componentDef.outputs)}create(f,m,v,C){let x=(C=C||this.ngModule)instanceof lh?C:C?.injector;x&&null!==this.componentDef.getStandaloneInjector&&(x=this.componentDef.getStandaloneInjector(x)||x);const k=x?new ze(f,x):f,N=k.get(ja,null);if(null===N)throw new je(407,!1);const H=k.get(g_,null),U=N.createRenderer(null,this.componentDef),ee=this.componentDef.selectors[0][0]||"div",he=v?function df(h,f,m){return h.selectRootElement(f,m===Ht.ShadowDom)}(U,v,this.componentDef.encapsulation):gh(N.createRenderer(null,this.componentDef),ee,function qe(h){const f=h.toLowerCase();return"svg"===f?"svg":"math"===f?"math":null}(ee)),xe=this.componentDef.onPush?288:272,Ze=function Zi(h,f){return{components:[],scheduler:h||is,clean:d,playerHandler:f||null,flags:0}}(),bt=V_(0,null,null,1,0,null,null,null,null,null),Ut=td(null,bt,Ze,xe,null,null,N,U,H,k,null);let pn,xn;og(Ut);try{const pt=function li(h,f,m,v,C,x){const k=m[1];m[22]=h;const H=cf(k,22,2,"#host",null),U=H.mergedAttrs=f.hostAttrs;null!==U&&(P(H,U,!0),null!==h&&(e_(C,h,U),null!==H.classes&&Xp(C,h,H.classes),null!==H.styles&&Zc(C,h,H.styles)));const ee=v.createRenderer(h,f),he=td(m,ia(f),null,f.onPush?32:16,m[22],H,v,ee,x||null,null,null);return k.firstCreatePass&&(Mo(sr(H,m),k,f.type),et(k,H),Fw(H,m.length,1)),Wr(m,he),m[22]=he}(he,this.componentDef,Ut,N,U);if(he)if(v)e_(U,he,["ng-version",ju.full]);else{const{attrs:kt,classes:Bn}=function ec(h){const f=[],m=[];let v=1,C=2;for(;v<h.length;){let x=h[v];if("string"==typeof x)2===C?""!==x&&f.push(x,h[++v]):8===C&&m.push(x);else{if(!rs(C))break;C=x}v++}return{attrs:f,classes:m}}(this.componentDef.selectors[0]);kt&&e_(U,he,kt),Bn&&Bn.length>0&&Xp(U,he,Bn.join(" "))}if(xn=Vl(bt,22),void 0!==m){const kt=xn.projection=[];for(let Bn=0;Bn<this.ngContentSelectors.length;Bn++){const Oi=m[Bn];kt.push(null!=Oi?Array.from(Oi):null)}}pn=function Di(h,f,m,v,C){const x=m[1],k=function Xc(h,f,m){const v=nr();h.firstCreatePass&&(m.providersResolver&&m.providersResolver(m),Rh(h,v,f,Za(h,f,1,null),m),on(h,v));const C=Xr(f,h,v.directiveStart,v);ko(C,f);const x=As(v,f);return x&&ko(x,f),C}(x,m,f);if(v.components.push(k),h[8]=k,null!==C)for(const H of C)H(k,f);if(f.contentQueries){const H=nr();f.contentQueries(1,k,H.directiveStart)}const N=nr();return!x.firstCreatePass||null===f.hostBindings&&null===f.hostAttrs||(Io(N.index),Ns(m[1],N,0,N.directiveStart,N.directiveEnd,f),wl(f,k)),k}(pt,this.componentDef,Ut,Ze,[vo]),$a(bt,Ut,null)}finally{xc()}return new Rn(this.componentType,pn,uh(xn,Ut),Ut,xn)}}class Rn extends class wn{}{constructor(f,m,v,C,x){super(),this.location=v,this._rootLView=C,this._tNode=x,this.instance=m,this.hostView=this.changeDetectorRef=new te(C),this.componentType=f}setInput(f,m){const v=this._tNode.inputs;let C;if(null!==v&&(C=v[f])){const x=this._rootLView;E(x[1],x,C,f,m),bl(x,this._tNode.index)}}get injector(){return new ar(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(f){this.hostView.onDestroy(f)}}function vo(){const h=nr();yp(Et()[1],h)}function z_(h){let f=function Nh(h){return Object.getPrototypeOf(h.prototype).constructor}(h.type),m=!0;const v=[h];for(;f;){let C;if(Yo(h))C=f.\u0275cmp||f.\u0275dir;else{if(f.\u0275cmp)throw new je(903,!1);C=f.\u0275dir}if(C){if(m){v.push(C);const k=h;k.inputs=Vw(h.inputs),k.declaredInputs=Vw(h.declaredInputs),k.outputs=Vw(h.outputs);const N=C.hostBindings;N&&dD(h,N);const H=C.viewQuery,U=C.contentQueries;if(H&&uD(h,H),U&&Vs(h,U),ve(h.inputs,C.inputs),ve(h.declaredInputs,C.declaredInputs),ve(h.outputs,C.outputs),Yo(C)&&C.data.animation){const ee=h.data;ee.animation=(ee.animation||[]).concat(C.data.animation)}}const x=C.features;if(x)for(let k=0;k<x.length;k++){const N=x[k];N&&N.ngInherit&&N(h),N===z_&&(m=!1)}}f=Object.getPrototypeOf(f)}!function Lw(h){let f=0,m=null;for(let v=h.length-1;v>=0;v--){const C=h[v];C.hostVars=f+=C.hostVars,C.hostAttrs=nt(C.hostAttrs,m=nt(m,C.hostAttrs))}}(v)}function Vw(h){return h===mi?{}:h===kn?[]:h}function uD(h,f){const m=h.viewQuery;h.viewQuery=m?(v,C)=>{f(v,C),m(v,C)}:f}function Vs(h,f){const m=h.contentQueries;h.contentQueries=m?(v,C,x)=>{f(v,C,x),m(v,C,x)}:f}function dD(h,f){const m=h.hostBindings;h.hostBindings=m?(v,C)=>{f(v,C),m(v,C)}:f}let od=null;function rm(){if(!od){const h=Pt.Symbol;if(h&&h.iterator)od=h.iterator;else{const f=Object.getOwnPropertyNames(Map.prototype);for(let m=0;m<f.length;++m){const v=f[m];"entries"!==v&&"size"!==v&&Map.prototype[v]===Map.prototype.entries&&(od=v)}}}return od}function mf(h){return!!Uw(h)&&(Array.isArray(h)||!(h instanceof Map)&&rm()in h)}function Uw(h){return null!==h&&("function"==typeof h||"object"==typeof h)}function sd(h,f,m){return h[f]=m}function cb(h,f){return h[f]}function ra(h,f,m){return!Object.is(h[f],m)&&(h[f]=m,!0)}function _f(h,f,m,v){const C=ra(h,f,m);return ra(h,f+1,v)||C}function ac(h,f,m,v,C,x){const k=_f(h,f,m,v);return _f(h,f+2,C,x)||k}function TT(h,f,m,v){const C=Et();return ra(C,rl(),f)&&(di(),function rc(h,f,m,v,C,x){const k=As(h,f);oc(f[11],k,x,h.value,m,v,C)}(fr(),C,h,f,m,v)),TT}function El(h,f,m,v){return ra(h,rl(),m)?f+He(m)+v:Qn}function IT(h,f,m,v,C,x,k,N){const H=Et(),U=di(),ee=h+22,he=U.firstCreatePass?function gD(h,f,m,v,C,x,k,N,H){const U=f.consts,ee=cf(f,h,4,k||null,$s(U,N));ic(f,m,ee,$s(U,H)),yp(f,ee);const he=ee.tViews=V_(2,ee,v,C,x,f.directiveRegistry,f.pipeRegistry,null,f.schemas,U);return null!==f.queries&&(f.queries.template(f,ee),he.queries=f.queries.embeddedTView(ee)),ee}(ee,U,H,f,m,v,C,x,k):U.data[ee];ps(he,!1);const xe=H[11].createComment("");Yp(U,H,xe,he),ko(xe,H),Wr(H,H[ee]=Cs(xe,H,xe,he)),zs(he)&&tm(U,H,he),null!=k&&ei(H,he,N)}function MT(h){return function Vo(h,f){return h[f]}(function lv(){return Jn.lFrame.contextLView}(),22+h)}function Zw(h,f,m){const v=Et();return ra(v,rl(),f)&&ss(di(),fr(),v,h,f,v[11],m,!1),Zw}function $w(h,f,m,v,C){const k=C?"class":"style";E(h,m,f.inputs[k],k,v)}function Kw(h,f,m,v){const C=Et(),x=di(),k=22+h,N=C[11],H=C[k]=gh(N,f,function Ym(){return Jn.lFrame.currentNamespace}()),U=x.firstCreatePass?function Ww(h,f,m,v,C,x,k){const N=f.consts,U=cf(f,h,2,C,$s(N,x));return ic(f,m,U,$s(N,k)),null!==U.attrs&&P(U,U.attrs,!1),null!==U.mergedAttrs&&P(U,U.mergedAttrs,!0),null!==f.queries&&f.queries.elementStart(f,U),U}(k,x,C,0,f,m,v):x.data[k];ps(U,!0);const ee=U.mergedAttrs;null!==ee&&e_(N,H,ee);const he=U.classes;null!==he&&Xp(N,H,he);const xe=U.styles;return null!==xe&&Zc(N,H,xe),64!=(64&U.flags)&&Yp(x,C,H,U),0===function lp(){return Jn.lFrame.elementDepthCount}()&&ko(H,C),function Ul(){Jn.lFrame.elementDepthCount++}(),zs(U)&&(tm(x,C,U),rb(x,U,C)),null!==v&&ei(C,U),Kw}function Yw(){let h=nr();il()?Tc():(h=h.parent,ps(h,!1));const f=h;!function Nd(){Jn.lFrame.elementDepthCount--}();const m=di();return m.firstCreatePass&&(yp(m,h),gu(h)&&m.queries.elementEnd(h)),null!=f.classesWithoutHost&&function Qm(h){return 0!=(16&h.flags)}(f)&&$w(m,f,Et(),f.classesWithoutHost,!0),null!=f.stylesWithoutHost&&function hv(h){return 0!=(32&h.flags)}(f)&&$w(m,f,Et(),f.stylesWithoutHost,!1),Yw}function Jw(h,f,m,v){return Kw(h,f,m,v),Yw(),Jw}function ad(h,f,m){const v=Et(),C=di(),x=h+22,k=C.firstCreatePass?function $_(h,f,m,v,C){const x=f.consts,k=$s(x,v),N=cf(f,h,8,"ng-container",k);return null!==k&&P(N,k,!0),ic(f,m,N,$s(x,C)),null!==f.queries&&f.queries.elementStart(f,N),N}(x,C,v,f,m):C.data[x];ps(k,!0);const N=v[x]=v[11].createComment("");return Yp(C,v,N,k),ko(N,v),zs(k)&&(tm(C,v,k),rb(C,k,v)),null!=m&&ei(v,k),ad}function ub(){let h=nr();const f=di();return il()?Tc():(h=h.parent,ps(h,!1)),f.firstCreatePass&&(yp(f,h),gu(h)&&f.queries.elementEnd(h)),ub}function Fh(h,f,m){return ad(h,f,m),ub(),Fh}function AT(){return Et()}function yf(h){return!!h&&"function"==typeof h.then}function kT(h){return!!h&&"function"==typeof h.subscribe}const OT=kT;function cm(h,f,m,v){const C=Et(),x=di(),k=nr();return function Kr(h,f,m,v,C,x,k,N){const H=zs(v),ee=h.firstCreatePass&&p(h),he=f[8],xe=c(f);let Ze=!0;if(3&v.type||N){const pn=As(v,f),xn=N?N(pn):pn,pt=xe.length,kt=N?Oi=>N(Mr(Oi[v.index])):v.index;let Bn=null;if(!N&&H&&(Bn=function bO(h,f,m,v){const C=h.cleanup;if(null!=C)for(let x=0;x<C.length-1;x+=2){const k=C[x];if(k===m&&C[x+1]===v){const N=f[7],H=C[x+2];return N.length>H?N[H]:null}"string"==typeof k&&(x+=2)}return null}(h,f,C,v.index)),null!==Bn)(Bn.__ngLastListenerFn__||Bn).__ngNextListenerFn__=x,Bn.__ngLastListenerFn__=x,Ze=!1;else{x=hb(v,f,he,x,!1);const Oi=m.listen(xn,C,x);xe.push(x,Oi),ee&&ee.push(C,kt,pt,pt+1)}}else x=hb(v,f,he,x,!1);const bt=v.outputs;let Ut;if(Ze&&null!==bt&&(Ut=bt[C])){const pn=Ut.length;if(pn)for(let xn=0;xn<pn;xn+=2){const Nr=f[Ut[xn]][Ut[xn+1]].subscribe(x),kf=xe.length;xe.push(x,Nr),ee&&ee.push(C,v.index,kf,-(kf+1))}}}(x,C,C[11],k,h,f,0,v),cm}function db(h,f,m,v){try{return!1!==m(v)}catch(C){return b(h,C),!1}}function hb(h,f,m,v,C){return function x(k){if(k===Function)return v;Vi(2&h.flags?So(h.index,f):f);let H=db(f,0,v,k),U=x.__ngNextListenerFn__;for(;U;)H=db(f,0,U,k)&&H,U=U.__ngNextListenerFn__;return C&&!1===H&&(k.preventDefault(),k.returnValue=!1),H}}function RT(h=1){return function _p(h){return(Jn.lFrame.contextLView=function Hd(h,f){for(;h>0;)f=f[15],h--;return f}(h,Jn.lFrame.contextLView))[8]}(h)}function wO(h,f){let m=null;const v=function Gg(h){const f=h.attrs;if(null!=f){const m=f.indexOf(5);if(0==(1&m))return f[m+1]}return null}(h);for(let C=0;C<f.length;C++){const x=f[C];if("*"!==x){if(null===v?ef(h,x,!0):Cr(v,x))return C}else m=C}return m}function W_(h){const f=Et()[16][6];if(!f.projection){const v=f.projection=Gl(h?h.length:1,null),C=v.slice();let x=f.child;for(;null!==x;){const k=h?wO(x,h):0;null!==k&&(C[k]?C[k].projectionNext=x:v[k]=x,C[k]=x),x=x.next}}}function _D(h,f=0,m){const v=Et(),C=di(),x=cf(C,22+h,16,null,m||null);null===x.projection&&(x.projection=f),Tc(),64!=(64&x.flags)&&function Th(h,f,m){Hv(f[11],0,f,m,vh(h,m,f),S_(m.parent||f[6],m,f))}(C,v,x)}function Qw(h,f,m){return Lh(h,"",f,"",m),Qw}function Lh(h,f,m,v,C){const x=Et(),k=El(x,f,m,v);return k!==Qn&&ss(di(),fr(),x,h,k,x[11],C,!1),Lh}function Vh(h,f,m,v,C){const x=h[m+1],k=null===f;let N=v?os(x):ba(x),H=!1;for(;0!==N&&(!1===H||k);){const ee=h[N+1];CO(h[N],f)&&(H=!0,h[N+1]=v?L_(ee):Ih(ee)),N=v?os(ee):ba(ee)}H&&(h[m+1]=v?Ih(x):L_(x))}function CO(h,f){return null===h||null==f||(Array.isArray(h)?h[1]:h)===f||!(!Array.isArray(h)||"string"!=typeof f)&&dl(h,f)>=0}const $i={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function LT(h){return h.substring($i.key,$i.keyEnd)}function pb(h){return h.substring($i.value,$i.valueEnd)}function nu(h,f){const m=$i.textEnd;return m===f?-1:(f=$i.keyEnd=function pi(h,f,m){for(;f<m&&h.charCodeAt(f)>32;)f++;return f}(h,$i.key=f,m),Y_(h,f,m))}function K_(h,f){const m=$i.textEnd;let v=$i.key=Y_(h,f,m);return m===v?-1:(v=$i.keyEnd=function TO(h,f,m){let v;for(;f<m&&(45===(v=h.charCodeAt(f))||95===v||(-33&v)>=65&&(-33&v)<=90||v>=48&&v<=57);)f++;return f}(h,v,m),v=fb(h,v,m),v=$i.value=Y_(h,v,m),v=$i.valueEnd=function gb(h,f,m){let v=-1,C=-1,x=-1,k=f,N=k;for(;k<m;){const H=h.charCodeAt(k++);if(59===H)return N;34===H||39===H?N=k=J_(h,H,k,m):f===k-4&&85===x&&82===C&&76===v&&40===H?N=k=J_(h,41,k,m):H>32&&(N=k),x=C,C=v,v=-33&H}return N}(h,v,m),fb(h,v,m))}function TD(h){$i.key=0,$i.keyEnd=0,$i.value=0,$i.valueEnd=0,$i.textEnd=h.length}function Y_(h,f,m){for(;f<m&&h.charCodeAt(f)<=32;)f++;return f}function fb(h,f,m,v){return(f=Y_(h,f,m))<m&&f++,f}function J_(h,f,m,v){let C=-1,x=m;for(;x<v;){const k=h.charCodeAt(x++);if(k==f&&92!==C)return x;C=92==k&&92===C?0:k}throw new Error}function eC(h,f,m){return ru(h,f,m,!1),eC}function tC(h,f){return ru(h,f,null,!0),tC}function lc(h){ou(iC,EO,h,!1)}function EO(h,f){for(let m=function CD(h){return TD(h),K_(h,Y_(h,0,$i.textEnd))}(f);m>=0;m=K_(f,m))iC(h,LT(f),pb(f))}function HT(h){ou(Uo,iu,h,!0)}function iu(h,f){for(let m=function wD(h){return TD(h),nu(h,Y_(h,0,$i.textEnd))}(f);m>=0;m=nu(f,m))Uo(h,LT(f),!0)}function ru(h,f,m,v){const C=Et(),x=di(),k=Oa(2);x.firstUpdatePass&&Q_(x,h,k,v),f!==Qn&&ra(C,k,f)&&X_(x,x.data[ho()],C,C[11],h,C[k+1]=function DD(h,f){return null==h||("string"==typeof f?h+=f:"object"==typeof h&&(h=Se(ya(h)))),h}(f,m),v,k)}function ou(h,f,m,v){const C=di(),x=Oa(2);C.firstUpdatePass&&Q_(C,null,x,v);const k=Et();if(m!==Qn&&ra(k,x,m)){const N=C.data[ho()];if(ID(N,v)&&!ED(C,x)){let H=v?N.classesWithoutHost:N.stylesWithoutHost;null!==H&&(m=pe(H,m||"")),$w(C,N,k,m,v)}else!function SD(h,f,m,v,C,x,k,N){C===Qn&&(C=kn);let H=0,U=0,ee=0<C.length?C[0]:null,he=0<x.length?x[0]:null;for(;null!==ee||null!==he;){const xe=H<C.length?C[H+1]:void 0,Ze=U<x.length?x[U+1]:void 0;let Ut,bt=null;ee===he?(H+=2,U+=2,xe!==Ze&&(bt=he,Ut=Ze)):null===he||null!==ee&&ee<he?(H+=2,bt=ee):(U+=2,bt=he,Ut=Ze),null!==bt&&X_(h,f,m,v,bt,Ut,k,N),ee=H<C.length?C[H]:null,he=U<x.length?x[U]:null}}(C,N,k,k[11],k[x+1],k[x+1]=function cd(h,f,m){if(null==m||""===m)return kn;const v=[],C=ya(m);if(Array.isArray(C))for(let x=0;x<C.length;x++)h(v,C[x],!0);else if("object"==typeof C)for(const x in C)C.hasOwnProperty(x)&&h(v,x,C[x]);else"string"==typeof C&&f(v,C);return v}(h,f,m),v,x)}}function ED(h,f){return f>=h.expandoStartIndex}function Q_(h,f,m,v){const C=h.data;if(null===C[m+1]){const x=C[ho()],k=ED(h,m);ID(x,v)&&null===f&&!k&&(f=!1),f=function xD(h,f,m,v){const C=function Ec(h){const f=Jn.lFrame.currentDirectiveIndex;return-1===f?null:h[f]}(h);let x=v?f.residualClasses:f.residualStyles;if(null===C)0===(v?f.classBindings:f.styleBindings)&&(m=Hh(m=nC(null,h,f,m,v),f.attrs,v),x=null);else{const k=f.directiveStylingLast;if(-1===k||h[k]!==C)if(m=nC(C,h,f,m,v),null===x){let H=function xO(h,f,m){const v=m?f.classBindings:f.styleBindings;if(0!==ba(v))return h[os(v)]}(h,f,v);void 0!==H&&Array.isArray(H)&&(H=nC(null,h,f,H[1],v),H=Hh(H,f.attrs,v),function Ts(h,f,m,v){h[os(m?f.classBindings:f.styleBindings)]=v}(h,f,v,H))}else x=function BT(h,f,m){let v;const C=f.directiveEnd;for(let x=1+f.directiveStylingLast;x<C;x++)v=Hh(v,h[x].hostAttrs,m);return Hh(v,f.attrs,m)}(h,f,v)}return void 0!==x&&(v?f.residualClasses=x:f.residualStyles=x),m}(C,x,f,v),function vD(h,f,m,v,C,x){let k=x?f.classBindings:f.styleBindings,N=os(k),H=ba(k);h[v]=m;let ee,U=!1;if(Array.isArray(m)){const he=m;ee=he[1],(null===ee||dl(he,ee)>0)&&(U=!0)}else ee=m;if(C)if(0!==H){const xe=os(h[N+1]);h[v+1]=Qu(xe,N),0!==xe&&(h[xe+1]=Ei(h[xe+1],v)),h[N+1]=function F_(h,f){return 131071&h|f<<17}(h[N+1],v)}else h[v+1]=Qu(N,0),0!==N&&(h[N+1]=Ei(h[N+1],v)),N=v;else h[v+1]=Qu(H,0),0===N?N=v:h[H+1]=Ei(h[H+1],v),H=v;U&&(h[v+1]=Ih(h[v+1])),Vh(h,ee,v,!0),Vh(h,ee,v,!1),function bD(h,f,m,v,C){const x=C?h.residualClasses:h.residualStyles;null!=x&&"string"==typeof f&&dl(x,f)>=0&&(m[v+1]=L_(m[v+1]))}(f,ee,h,v,x),k=Qu(N,H),x?f.classBindings=k:f.styleBindings=k}(C,x,f,m,k,v)}}function nC(h,f,m,v,C){let x=null;const k=m.directiveEnd;let N=m.directiveStylingLast;for(-1===N?N=m.directiveStart:N++;N<k&&(x=f[N],v=Hh(v,x.hostAttrs,C),x!==h);)N++;return null!==h&&(m.directiveStylingLast=N),v}function Hh(h,f,m){const v=m?1:2;let C=-1;if(null!==f)for(let x=0;x<f.length;x++){const k=f[x];"number"==typeof k?C=k:C===v&&(Array.isArray(h)||(h=void 0===h?[]:["",h]),Uo(h,k,!!m||f[++x]))}return void 0===h?null:h}function iC(h,f,m){Uo(h,f,ya(m))}function X_(h,f,m,v,C,x,k,N){if(!(3&f.type))return;const H=h.data,U=H[N+1];mb(function af(h){return 1==(1&h)}(U)?UT(H,f,m,C,ba(U),k):void 0)||(mb(x)||function N_(h){return 2==(2&h)}(U)&&(x=UT(H,null,m,C,N,k)),function zg(h,f,m,v,C){if(f)C?h.addClass(m,v):h.removeClass(m,v);else{let x=-1===v.indexOf("-")?void 0:yl.DashCase;null==C?h.removeStyle(m,v,x):("string"==typeof C&&C.endsWith("!important")&&(C=C.slice(0,-10),x|=yl.Important),h.setStyle(m,v,C,x))}}(v,k,Pd(ho(),m),C,x))}function UT(h,f,m,v,C,x){const k=null===f;let N;for(;C>0;){const H=h[C],U=Array.isArray(H),ee=U?H[1]:H,he=null===ee;let xe=m[C+1];xe===Qn&&(xe=he?kn:void 0);let Ze=he?$d(xe,v):ee===v?xe:void 0;if(U&&!mb(Ze)&&(Ze=$d(H,v)),mb(Ze)&&(N=Ze,k))return N;const bt=h[C+1];C=k?os(bt):ba(bt)}if(null!==f){let H=x?f.residualClasses:f.residualStyles;null!=H&&(N=$d(H,v))}return N}function mb(h){return void 0!==h}function ID(h,f){return 0!=(h.flags&(f?16:32))}function MD(h,f=""){const m=Et(),v=di(),C=h+22,x=v.firstCreatePass?cf(v,C,1,f,null):v.data[C],k=m[C]=qu(m[11],f);Yp(v,m,k,x),ps(x,!1)}function dm(h){return ey("",h,""),dm}function ey(h,f,m){const v=Et(),C=El(v,h,f,m);return C!==Qn&&M(v,ho(),C),ey}function jT(h,f,m,v,C){const x=Et(),k=function eu(h,f,m,v,C,x){const N=_f(h,ka(),m,C);return Oa(2),N?f+He(m)+v+He(C)+x:Qn}(x,h,f,m,v,C);return k!==Qn&&M(x,ho(),k),jT}function $T(h,f,m){const v=Et();return ra(v,rl(),f)&&ss(di(),fr(),v,h,f,v[11],m,!0),$T}const hm=void 0;var $D=["en",[["a","p"],["AM","PM"],hm],[["AM","PM"],hm,hm],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hm,"{1} 'at' {0}",hm],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ZD(h){const m=Math.floor(Math.abs(h)),v=h.toString().replace(/^[^.]*\.?/,"").length;return 1===m&&0===v?1:5}];let iy={};function Go(h){const f=function NO(h){return h.toLowerCase().replace(/_/g,"-")}(h);let m=sC(f);if(m)return m;const v=f.split("-")[0];if(m=sC(v),m)return m;if("en"===v)return $D;throw new je(701,!1)}function oC(h){return Go(h)[qn.PluralCase]}function sC(h){return h in iy||(iy[h]=Pt.ng&&Pt.ng.common&&Pt.ng.common.locales&&Pt.ng.common.locales[h]),iy[h]}var qn=(()=>((qn=qn||{})[qn.LocaleId=0]="LocaleId",qn[qn.DayPeriodsFormat=1]="DayPeriodsFormat",qn[qn.DayPeriodsStandalone=2]="DayPeriodsStandalone",qn[qn.DaysFormat=3]="DaysFormat",qn[qn.DaysStandalone=4]="DaysStandalone",qn[qn.MonthsFormat=5]="MonthsFormat",qn[qn.MonthsStandalone=6]="MonthsStandalone",qn[qn.Eras=7]="Eras",qn[qn.FirstDayOfWeek=8]="FirstDayOfWeek",qn[qn.WeekendRange=9]="WeekendRange",qn[qn.DateFormat=10]="DateFormat",qn[qn.TimeFormat=11]="TimeFormat",qn[qn.DateTimeFormat=12]="DateTimeFormat",qn[qn.NumberSymbols=13]="NumberSymbols",qn[qn.NumberFormats=14]="NumberFormats",qn[qn.CurrencyCode=15]="CurrencyCode",qn[qn.CurrencySymbol=16]="CurrencySymbol",qn[qn.CurrencyName=17]="CurrencyName",qn[qn.Currencies=18]="Currencies",qn[qn.Directionality=19]="Directionality",qn[qn.PluralCase=20]="PluralCase",qn[qn.ExtraData=21]="ExtraData",qn))();const YD=["zero","one","two","few","many"],cc="en-US",dd={marker:"element"},vf={marker:"ICU"};var ro=(()=>((ro=ro||{})[ro.SHIFT=2]="SHIFT",ro[ro.APPEND_EAGERLY=1]="APPEND_EAGERLY",ro[ro.COMMENT=2]="COMMENT",ro))();let lC=cc;function KT(h){(function rn(h,f){null==h&&Ct(f,h,null,"!=")})(h,"Expected localeId to be defined"),"string"==typeof h&&(lC=h.toLowerCase().replace(/_/g,"-"))}function XD(h,f,m){const v=f.insertBeforeIndex,C=Array.isArray(v)?v[0]:v;return null===C?Xl(h,0,m):Mr(m[C])}function YT(h,f,m,v,C){const x=f.insertBeforeIndex;if(Array.isArray(x)){let k=v,N=null;if(3&f.type||(N=k,k=C),null!==k&&0==(2&f.flags))for(let H=1;H<x.length;H++)$u(h,k,m[x[H]],N,!1)}}function JT(h,f){if(h.push(f),h.length>1)for(let m=h.length-2;m>=0;m--){const v=h[m];_b(v)||yb(v,f)&&null===gm(v)&&FO(v,f.index)}}function _b(h){return!(64&h.type)}function yb(h,f){return _b(f)||h.index>f.index}function gm(h){const f=h.insertBeforeIndex;return Array.isArray(f)?f[0]:f}function FO(h,f){const m=h.insertBeforeIndex;Array.isArray(m)?m[0]=f:(Ug(XD,YT),h.insertBeforeIndex=f)}function ry(h,f){const m=h.data[f];return null===m||"string"==typeof m?null:m.hasOwnProperty("currentCaseLViewIndex")?m:m.value}function HO(h,f,m){const v=uf(h,m,64,null,null);return JT(f,v),v}function bf(h,f){const m=f[h.currentCaseLViewIndex];return null===m?m:m<0?~m:m}function wf(h){return h>>>17}function Cf(h){return(131070&h)>>>1}let vb=0,mm=0;function oy(h,f,m,v){const C=m[11];let k,x=null;for(let N=0;N<f.length;N++){const H=f[N];if("string"==typeof H){const U=f[++N];null===m[U]&&(m[U]=qu(C,H))}else if("number"==typeof H)switch(1&H){case 0:const U=wf(H);let ee,he;if(null===x&&(x=U,k=vl(C,v)),U===x?(ee=v,he=k):(ee=null,he=Mr(m[U])),null!==he){const Ut=Cf(H);$u(C,he,m[Ut],ee,!1);const xn=ry(h,Ut);if(null!==xn&&"object"==typeof xn){const pt=bf(xn,m);null!==pt&&oy(h,xn.create[pt],m,m[xn.anchorIdx])}}break;case 1:const Ze=f[++N],bt=f[++N];oc(C,Pd(H>>>1,m),null,null,Ze,bt,null)}else switch(H){case vf:const U=f[++N],ee=f[++N];null===m[ee]&&ko(m[ee]=fh(C,U),m);break;case dd:const he=f[++N],xe=f[++N];null===m[xe]&&ko(m[xe]=gh(C,he,null),m)}}}function bb(h,f,m,v,C){for(let x=0;x<m.length;x++){const k=m[x],N=m[++x];if(k&C){let H="";for(let U=x+1;U<=x+N;U++){const ee=m[U];if("string"==typeof ee)H+=ee;else if("number"==typeof ee)if(ee<0)H+=He(f[v-ee]);else{const he=ee>>>2;switch(3&ee){case 1:const xe=m[++U],Ze=m[++U],bt=h.data[he];"string"==typeof bt?oc(f[11],f[he],null,bt,xe,H,Ze):ss(h,bt,f,xe,H,f[11],Ze,!1);break;case 0:const Ut=f[he];null!==Ut&&Zu(f[11],Ut,H);break;case 2:tI(h,ry(h,he),f,H);break;case 3:sy(h,ry(h,he),v,f)}}}}else{const H=m[x+1];if(H>0&&3==(3&H)){const ee=ry(h,H>>>2);f[ee.currentCaseLViewIndex]<0&&sy(h,ee,v,f)}}x+=N}}function sy(h,f,m,v){let C=v[f.currentCaseLViewIndex];if(null!==C){let x=vb;C<0&&(C=v[f.currentCaseLViewIndex]=~C,x=-1),bb(h,v,f.update[C],m,x)}}function tI(h,f,m,v){const C=function Ya(h,f){let m=h.cases.indexOf(f);if(-1===m)switch(h.type){case 1:{const v=function aC(h,f){const m=oC(f)(parseInt(h,10)),v=YD[m];return void 0!==v?v:"other"}(f,function QD(){return lC}());m=h.cases.indexOf(v),-1===m&&"other"!==v&&(m=h.cases.indexOf("other"));break}case 0:m=h.cases.indexOf("other")}return-1===m?null:m}(f,v);if(bf(f,m)!==C&&(XT(h,f,m),m[f.currentCaseLViewIndex]=null===C?null:~C,null!==C)){const k=m[f.anchorIdx];k&&oy(h,f.create[C],m,k)}}function XT(h,f,m){let v=bf(f,m);if(null!==v){const C=f.remove[v];for(let x=0;x<C.length;x++){const k=C[x];if(k>0){const N=Pd(k,m);null!==N&&Vv(m[11],N)}else XT(h,ry(h,~k),m)}}}function nI(){const h=[];let m,v,f=-1;function x(N,H){f=0;const U=bf(N,H);v=null!==U?N.remove[U]:kn}function k(){if(f<v.length){const N=v[f++];return N>0?m[N]:(h.push(f,v),x(m[1].data[~N],m),k())}return 0===h.length?null:(v=h.pop(),f=h.pop(),k())}return function C(N,H){for(m=H;h.length;)h.pop();return x(N.value,H),k}}const wb=/\ufffd(\d+):?\d*\ufffd/gi,zO=/\ufffd(\d+)\ufffd/,bm=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Tf=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,iI=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,GO=/\uE500/g;function rI(h,f,m,v,C,x,k){const N=Za(h,v,1,null);let H=N<<ro.SHIFT,U=jl();f===U&&(U=null),null===U&&(H|=ro.APPEND_EAGERLY),k&&(H|=ro.COMMENT,function pT(h){void 0===Rg&&(Rg=h())}(nI)),C.push(H,null===x?"":x);const ee=uf(h,N,k?32:1,null===x?"":x,null);JT(m,ee);const he=ee.index;return ps(ee,!1),null!==U&&f!==U&&function VO(h,f){let m=h.insertBeforeIndex;null===m?(Ug(XD,YT),m=h.insertBeforeIndex=[null,f]):(function ke(h,f,m){h!=f&&Ct(m,h,f,"==")}(Array.isArray(m),!0,"Expecting array here"),m.push(f))}(U,he),ee}function uC(h,f,m,v,C,x,k){const N=k.match(wb),H=rI(h,f,m,x,v,N?null:k,!1);N&&ly(C,k,H.index,null,0,null)}function ly(h,f,m,v,C,x){const k=h.length,N=k+1;h.push(null,null);const H=k+2,U=f.split(wb);let ee=0;for(let he=0;he<U.length;he++){const xe=U[he];if(1&he){const Ze=C+parseInt(xe,10);h.push(-1-Ze),ee|=aI(Ze)}else""!==xe&&h.push(xe)}return h.push(m<<2|(v?1:0)),v&&h.push(v,x),h[k]=ee,h[N]=h.length-H,ee}function aI(h){return 1<<Math.min(h,31)}function Ef(h){let f,x,m="",v=0,C=!1;for(;null!==(f=Tf.exec(h));)C?f[0]===`\ufffd/*${x}\ufffd`&&(v=f.index,C=!1):(m+=h.substring(v,f.index+f[0].length),x=f[1],C=!0);return m+=h.slice(v),m}function nE(h,f,m,v,C,x){let k=0;const N={type:C.type,currentCaseLViewIndex:Za(h,f,1,null),anchorIdx:x,cases:[],create:[],remove:[],update:[]};(function Es(h,f,m){h.push(aI(f.mainBinding),2,-1-f.mainBinding,m<<2|2)})(m,C,x),function LO(h,f,m){const v=h.data[f];null===v?h.data[f]=m:v.value=m}(h,x,N);const H=C.values;for(let U=0;U<H.length;U++){const ee=H[U],he=[];for(let xe=0;xe<ee.length;xe++){const Ze=ee[xe];if("string"!=typeof Ze){const bt=he.push(Ze)-1;ee[xe]=`\x3c!--\ufffd${bt}\ufffd--\x3e`}}k=uI(h,N,f,m,v,C.cases[U],ee.join(""),he)|k}k&&function $O(h,f,m){h.push(f,1,m<<2|3)}(m,k,x)}function cI(h){const f=[],m=[];let v=1,C=0;const x=iE(h=h.replace(bm,function(k,N,H){return v="select"===H?0:1,C=parseInt(N.slice(1),10),""}));for(let k=0;k<x.length;){let N=x[k++].trim();1===v&&(N=N.replace(/\s*(?:=)?(\w+)\s*/,"$1")),N.length&&f.push(N);const H=iE(x[k++]);f.length>m.length&&m.push(H)}return{type:v,mainBinding:C,cases:f,values:m}}function iE(h){if(!h)return[];let f=0;const m=[],v=[],C=/[{}]/g;let x;for(C.lastIndex=0;x=C.exec(h);){const N=x.index;if("}"==x[0]){if(m.pop(),0==m.length){const H=h.substring(f,N);bm.test(H)?v.push(cI(H)):v.push(H),f=N+1}}else{if(0==m.length){const H=h.substring(f,N);v.push(H),f=N+1}m.push("{")}}const k=h.substring(f);return v.push(k),v}function uI(h,f,m,v,C,x,k,N){const H=[],U=[],ee=[];f.cases.push(x),f.create.push(H),f.remove.push(U),f.update.push(ee);const xe=R(function yg(){return void 0!==Or?Or:typeof document<"u"?document:void 0}()).getInertBodyElement(k),Ze=j0(xe)||xe;return Ze?dI(h,f,m,v,H,U,ee,Ze,C,N,0):0}function dI(h,f,m,v,C,x,k,N,H,U,ee){let he=0,xe=N.firstChild;for(;xe;){const Ze=Za(h,m,1,null);switch(xe.nodeType){case Node.ELEMENT_NODE:const bt=xe,Ut=bt.tagName.toLowerCase();if(th.hasOwnProperty(Ut)){oE(C,dd,Ut,H,Ze),h.data[Ze]=Ut;const kt=bt.attributes;for(let Bn=0;Bn<kt.length;Bn++){const Oi=kt.item(Bn),Nr=Oi.name.toLowerCase();Oi.value.match(wb)?Lp.hasOwnProperty(Nr)&&ly(k,Oi.value,Ze,Oi.name,0,Fp[Nr]?vt:nh[Nr]?hn:null):WO(C,Ze,Oi)}he=dI(h,f,m,v,C,x,k,xe,Ze,U,ee+1)|he,hI(x,Ze,ee)}break;case Node.TEXT_NODE:const pn=xe.textContent||"",xn=pn.match(wb);oE(C,null,xn?"":pn,H,Ze),hI(x,Ze,ee),xn&&(he=ly(k,pn,Ze,null,0,null)|he);break;case Node.COMMENT_NODE:const pt=zO.exec(xe.textContent||"");if(pt){const Bn=U[parseInt(pt[1],10)];oE(C,vf,"",H,Ze),nE(h,m,v,H,Bn,Ze),rE(x,Ze,ee)}}xe=xe.nextSibling}return he}function hI(h,f,m){0===m&&h.push(f)}function rE(h,f,m){0===m&&(h.push(~f),h.push(f))}function oE(h,f,m,v,C){null!==f&&h.push(f),h.push(m,C,function BO(h,f,m){return h|f<<17|m<<1}(0,v,C))}function WO(h,f,m){h.push(f<<1|1,m.name,m.value)}function Eb(h,f,m=-1){const v=di(),C=Et(),x=22+h,k=$s(v.consts,f),N=jl();v.firstCreatePass&&function ZO(h,f,m,v,C,x){const k=jl(),N=[],H=[],U=[[]];C=function Cb(h,f){if(function lI(h){return-1===h}(f))return Ef(h);{const m=h.indexOf(`:${f}\ufffd`)+2+f.toString().length,v=h.search(new RegExp(`\ufffd\\/\\*\\d+:${f}\ufffd`));return Ef(h.substring(m,v))}}(C,x);const ee=function qO(h){return h.replace(GO," ")}(C).split(iI);for(let he=0;he<ee.length;he++){let xe=ee[he];if(0==(1&he)){const Ze=iE(xe);for(let bt=0;bt<Ze.length;bt++){let Ut=Ze[bt];if(0==(1&bt)){const pn=Ut;""!==pn&&uC(h,k,U[0],N,H,m,pn)}else{const pn=Ut;if("object"!=typeof pn)throw new Error(`Unable to parse ICU expression in "${C}" message.`);nE(h,m,H,f,pn,rI(h,k,U[0],m,N,"",!0).index)}}}else{const Ze=47===xe.charCodeAt(0),Ut=(xe.charCodeAt(Ze?1:0),22+Number.parseInt(xe.substring(Ze?2:1)));if(Ze)U.shift(),ps(jl(),!1);else{const pn=HO(h,U[0],Ut);U.unshift([]),ps(pn,!0)}}}h.data[v]={create:N,update:H}}(v,null===N?0:N.index,C,x,k,m);const H=v.data[x],ee=Wp(v,N===C[6]?null:N,C);(function eI(h,f,m,v){const C=h[11];for(let x=0;x<f.length;x++){const k=f[x++],N=f[x],H=(k&ro.COMMENT)===ro.COMMENT,U=(k&ro.APPEND_EAGERLY)===ro.APPEND_EAGERLY,ee=k>>>ro.SHIFT;let he=h[ee];null===he&&(he=h[ee]=H?C.createComment(N):qu(C,N)),U&&null!==m&&$u(C,m,he,v,!1)}})(C,H.create,ee,N&&8&N.type?C[N.index]:null),vu(!0)}function pC(h,f,m){Eb(h,f,m),function hC(){vu(!1)}()}function lE(h){return function cC(h){h&&(vb|=1<<Math.min(mm,31)),mm++}(ra(Et(),rl(),h)),lE}function cE(h){!function UO(h,f,m){if(mm>0){const v=h.data[m];bb(h,f,Array.isArray(v)?v:v.update,ka()-mm-1,vb)}vb=0,mm=0}(di(),Et(),h+22)}function dE(h,f,m,v,C){if(h=ce(h),Array.isArray(h))for(let x=0;x<h.length;x++)dE(h[x],f,m,v,C);else{const x=di(),k=Et();let N=ah(h)?h:ce(h.provide),H=Hp(h);const U=nr(),ee=1048575&U.providerIndexes,he=U.directiveStart,xe=U.providerIndexes>>20;if(ah(h)||!h.multi){const Ze=new al(H,C,ta),bt=gC(N,f,C?ee:ee+xe,he);-1===bt?(Mo(sr(U,k),x,N),fC(x,h,f.length),f.push(N),U.directiveStart++,U.directiveEnd++,C&&(U.providerIndexes+=1048576),m.push(Ze),k.push(Ze)):(m[bt]=Ze,k[bt]=Ze)}else{const Ze=gC(N,f,ee+xe,he),bt=gC(N,f,ee,ee+xe),Ut=Ze>=0&&m[Ze],pn=bt>=0&&m[bt];if(C&&!pn||!C&&!Ut){Mo(sr(U,k),x,N);const xn=function hE(h,f,m,v,C){const x=new al(h,m,ta);return x.multi=[],x.index=f,x.componentProviders=0,yI(x,C,v&&!m),x}(C?cy:JO,m.length,C,v,H);!C&&pn&&(m[bt].providerFactory=xn),fC(x,h,f.length,0),f.push(N),U.directiveStart++,U.directiveEnd++,C&&(U.providerIndexes+=1048576),m.push(xn),k.push(xn)}else fC(x,h,Ze>-1?Ze:bt,yI(m[C?bt:Ze],H,!C&&v));!C&&v&&pn&&m[bt].componentProviders++}}}function fC(h,f,m,v){const C=ah(f),x=function $0(h){return!!h.useClass}(f);if(C||x){const H=(x?ce(f.useClass):f).prototype.ngOnDestroy;if(H){const U=h.destroyHooks||(h.destroyHooks=[]);if(!C&&f.multi){const ee=U.indexOf(m);-1===ee?U.push(m,[v,H]):U[ee+1].push(v,H)}else U.push(m,H)}}}function yI(h,f,m){return m&&h.componentProviders++,h.multi.push(f)-1}function gC(h,f,m,v){for(let C=m;C<v;C++)if(f[C]===h)return C;return-1}function JO(h,f,m,v){return xf(this.multi,[])}function cy(h,f,m,v){const C=this.multi;let x;if(this.providerFactory){const k=this.providerFactory.componentProviders,N=Xr(m,m[1],this.providerFactory.index,v);x=N.slice(0,k),xf(C,x);for(let H=k;H<N.length;H++)x.push(N[H])}else x=[],xf(C,x);return x}function xf(h,f){for(let m=0;m<h.length;m++)f.push((0,h[m])());return f}function xb(h,f=[]){return m=>{m.providersResolver=(v,C)=>function uE(h,f,m){const v=di();if(v.firstCreatePass){const C=Yo(h);dE(m,v.data,v.blueprint,C,!0),dE(f,v.data,v.blueprint,C,!1)}}(v,C?C(h):h,f)}}class wm{}class pE{}function vI(h,f){return new mC(h,f??null)}class mC extends wm{constructor(f,m){super(),this._parent=m,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fe(this);const v=at(f);this._bootstrapComponents=or(v.bootstrap),this._r3Injector=Tw(f,m,[{provide:wm,useValue:this},{provide:Up,useValue:this.componentFactoryResolver}],Se(f),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(f)}get injector(){return this._r3Injector}destroy(){const f=this._r3Injector;!f.destroyed&&f.destroy(),this.destroyCbs.forEach(m=>m()),this.destroyCbs=null}onDestroy(f){this.destroyCbs.push(f)}}class fE extends pE{constructor(f){super(),this.moduleType=f}create(f){return new mC(this.moduleType,f)}}class gE extends wm{constructor(f,m,v){super(),this.componentFactoryResolver=new fe(this),this.instance=null;const C=new bv([...f,{provide:wm,useValue:this},{provide:Up,useValue:this.componentFactoryResolver}],m||Vp(),v,new Set(["environment"]));this.injector=C,C.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(f){this.injector.onDestroy(f)}}function _C(h,f,m=null){return new gE(h,f,m).injector}function II(h,f,m){const v=Do()+h,C=Et();return C[v]===Qn?sd(C,v,m?f.call(m):f()):cb(C,v)}function MI(h,f,m,v){return function bE(h,f,m,v,C,x){const k=f+m;return ra(h,k,C)?sd(h,k+1,x?v.call(x,C):v(C)):Tm(h,k+1)}(Et(),Do(),h,f,m,v)}function AI(h,f,m,v,C){return function TC(h,f,m,v,C,x,k){const N=f+m;return _f(h,N,C,x)?sd(h,N+2,k?v.call(k,C,x):v(C,x)):Tm(h,N+2)}(Et(),Do(),h,f,m,v,C)}function kI(h,f,m,v,C,x){return function EC(h,f,m,v,C,x,k,N){const H=f+m;return function jw(h,f,m,v,C){const x=_f(h,f,m,v);return ra(h,f+2,C)||x}(h,H,C,x,k)?sd(h,H+3,N?v.call(N,C,x,k):v(C,x,k)):Tm(h,H+3)}(Et(),Do(),h,f,m,v,C,x)}function hy(h,f,m,v,C,x,k){return function Bh(h,f,m,v,C,x,k,N,H){const U=f+m;return ac(h,U,C,x,k,N)?sd(h,U+4,H?v.call(H,C,x,k,N):v(C,x,k,N)):Tm(h,U+4)}(Et(),Do(),h,f,m,v,C,x,k)}function Cm(h,f,m,v,C,x,k,N,H){const U=Do()+h,ee=Et(),he=ac(ee,U,m,v,C,x);return _f(ee,U+4,k,N)||he?sd(ee,U+6,H?f.call(H,m,v,C,x,k,N):f(m,v,C,x,k,N)):cb(ee,U+6)}function py(h,f,m,v){return function wE(h,f,m,v,C,x){let k=f+m,N=!1;for(let H=0;H<C.length;H++)ra(h,k++,C[H])&&(N=!0);return N?sd(h,k,v.apply(x,C)):Tm(h,k)}(Et(),Do(),h,f,m,v)}function Tm(h,f){const m=h[f];return m===Qn?void 0:m}function Db(h){return f=>{setTimeout(h,void 0,f)}}const hd=class gy extends a.x{constructor(f=!1){super(),this.__isAsync=f}emit(f){super.next(f)}subscribe(f,m,v){let C=f,x=m||(()=>null),k=v;if(f&&"object"==typeof f){const H=f;C=H.next?.bind(H),x=H.error?.bind(H),k=H.complete?.bind(H)}this.__isAsync&&(x=Db(x),C&&(C=Db(C)),k&&(k=Db(k)));const N=super.subscribe({next:C,error:x,complete:k});return f instanceof V.w0&&f.add(N),N}};function nR(){return this._results[rm()]()}class SC{constructor(f=!1){this._emitDistinctChangesOnly=f,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const m=rm(),v=SC.prototype;v[m]||(v[m]=nR)}get changes(){return this._changes||(this._changes=new hd)}get(f){return this._results[f]}map(f){return this._results.map(f)}filter(f){return this._results.filter(f)}find(f){return this._results.find(f)}reduce(f,m){return this._results.reduce(f,m)}forEach(f){this._results.forEach(f)}some(f){return this._results.some(f)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(f,m){const v=this;v.dirty=!1;const C=Bo(f);(this._changesDetected=!function ir(h,f,m){if(h.length!==f.length)return!1;for(let v=0;v<h.length;v++){let C=h[v],x=f[v];if(m&&(C=m(C),x=m(x)),x!==C)return!1}return!0}(v._results,C,m))&&(v._results=C,v.length=C.length,v.last=C[this.length-1],v.first=C[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let my=(()=>{class h{}return h.__NG_ELEMENT_ID__=rR,h})();const iR=my,SE=class extends iR{constructor(f,m,v){super(),this._declarationLView=f,this._declarationTContainer=m,this.elementRef=v}createEmbeddedView(f,m){const v=this._declarationTContainer.tViews,C=td(this._declarationLView,v,f,16,null,v.declTNode,null,null,null,null,m||null);C[17]=this._declarationLView[this._declarationTContainer.index];const k=this._declarationLView[19];return null!==k&&(C[19]=k.createEmbeddedView(v)),$a(v,C,f),new G(C)}};function rR(){return _y(nr(),Et())}function _y(h,f){return 4&h.type?new SE(f,h,uh(h,f)):null}let DC=(()=>{class h{}return h.__NG_ELEMENT_ID__=DE,h})();function DE(){return MC(nr(),Et())}const oR=DC,IC=class extends oR{constructor(f,m,v){super(),this._lContainer=f,this._hostTNode=m,this._hostLView=v}get element(){return uh(this._hostTNode,this._hostLView)}get injector(){return new ar(this._hostTNode,this._hostLView)}get parentInjector(){const f=zn(this._hostTNode,this._hostLView);if(fa(f)){const m=Qi(f,this._hostLView),v=Eu(f);return new ar(m[1].data[v+8],m)}return new ar(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(f){const m=IE(this._lContainer);return null!==m&&m[f]||null}get length(){return this._lContainer.length-10}createEmbeddedView(f,m,v){let C,x;"number"==typeof v?C=v:null!=v&&(C=v.index,x=v.injector);const k=f.createEmbeddedView(m||{},x);return this.insert(k,C),k}createComponent(f,m,v,C,x){const k=f&&!function Na(h){return"function"==typeof h}(f);let N;if(k)N=m;else{const he=m||{};N=he.index,v=he.injector,C=he.projectableNodes,x=he.environmentInjector||he.ngModuleRef}const H=k?f:new st(oe(f)),U=v||this.parentInjector;if(!x&&null==H.ngModule){const xe=(k?U:this.parentInjector).get(lh,null);xe&&(x=xe)}const ee=H.create(U,C,void 0,x);return this.insert(ee.hostView,N),ee}insert(f,m){const v=f._lView,C=v[1];if(function Hl(h){return To(h[3])}(v)){const ee=this.indexOf(f);if(-1!==ee)this.detach(ee);else{const he=v[3],xe=new IC(he,he[6],he[3]);xe.detach(xe.indexOf(f))}}const x=this._adjustIndex(m),k=this._lContainer;!function ea(h,f,m,v){const C=10+v,x=m.length;v>0&&(m[C-1][4]=f),v<x-10?(f[4]=m[C],s_(m,10+v,f)):(m.push(f),f[4]=null),f[3]=m;const k=f[17];null!==k&&m!==k&&function Fv(h,f){const m=h[9];f[16]!==f[3][3][16]&&(h[2]=!0),null===m?h[9]=[f]:m.push(f)}(k,f);const N=f[19];null!==N&&N.insertView(h),f[2]|=64}(C,v,k,x);const N=Qp(x,k),H=v[11],U=vl(H,k[7]);return null!==U&&function mh(h,f,m,v,C,x){v[0]=C,v[6]=f,Ch(h,v,m,1,C,x)}(C,k[6],H,v,U,N),f.attachToViewContainerRef(),s_(Ib(k),x,f),f}move(f,m){return this.insert(f,m)}indexOf(f){const m=IE(this._lContainer);return null!==m?m.indexOf(f):-1}remove(f){const m=this._adjustIndex(f,-1),v=E_(this._lContainer,m);v&&(Oc(Ib(this._lContainer),m),$p(v[1],v))}detach(f){const m=this._adjustIndex(f,-1),v=E_(this._lContainer,m);return v&&null!=Oc(Ib(this._lContainer),m)?new G(v):null}_adjustIndex(f,m=0){return f??this.length+m}};function IE(h){return h[8]}function Ib(h){return h[8]||(h[8]=[])}function MC(h,f){let m;const v=f[h.index];if(To(v))m=v;else{let C;if(8&h.type)C=Mr(v);else{const x=f[11];C=x.createComment("");const k=As(h,f);$u(x,vl(x,k),C,function Ql(h,f){return h.nextSibling(f)}(x,k),!1)}f[h.index]=m=Cs(v,f,C,h),Wr(f,m)}return new IC(m,h,f)}class Mb{constructor(f){this.queryList=f,this.matches=null}clone(){return new Mb(this.queryList)}setDirty(){this.queryList.setDirty()}}class Sf{constructor(f=[]){this.queries=f}createEmbeddedView(f){const m=f.queries;if(null!==m){const v=null!==f.contentQueries?f.contentQueries[0]:m.length,C=[];for(let x=0;x<v;x++){const k=m.getByIndex(x);C.push(this.queries[k.indexInDeclarationView].clone())}return new Sf(C)}return null}insertView(f){this.dirtyQueriesWithMatches(f)}detachView(f){this.dirtyQueriesWithMatches(f)}dirtyQueriesWithMatches(f){for(let m=0;m<this.queries.length;m++)null!==RE(f,m).matches&&this.queries[m].setDirty()}}class xm{constructor(f,m,v=null){this.predicate=f,this.flags=m,this.read=v}}class AC{constructor(f=[]){this.queries=f}elementStart(f,m){for(let v=0;v<this.queries.length;v++)this.queries[v].elementStart(f,m)}elementEnd(f){for(let m=0;m<this.queries.length;m++)this.queries[m].elementEnd(f)}embeddedTView(f){let m=null;for(let v=0;v<this.length;v++){const C=null!==m?m.length:0,x=this.getByIndex(v).embeddedTView(f,C);x&&(x.indexInDeclarationView=v,null!==m?m.push(x):m=[x])}return null!==m?new AC(m):null}template(f,m){for(let v=0;v<this.queries.length;v++)this.queries[v].template(f,m)}getByIndex(f){return this.queries[f]}get length(){return this.queries.length}track(f){this.queries.push(f)}}class Df{constructor(f,m=-1){this.metadata=f,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=m}elementStart(f,m){this.isApplyingToNode(m)&&this.matchTNode(f,m)}elementEnd(f){this._declarationNodeIndex===f.index&&(this._appliesToNextNode=!1)}template(f,m){this.elementStart(f,m)}embeddedTView(f,m){return this.isApplyingToNode(f)?(this.crossesNgTemplate=!0,this.addMatch(-f.index,m),new Df(this.metadata)):null}isApplyingToNode(f){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const m=this._declarationNodeIndex;let v=f.parent;for(;null!==v&&8&v.type&&v.index!==m;)v=v.parent;return m===(null!==v?v.index:-1)}return this._appliesToNextNode}matchTNode(f,m){const v=this.metadata.predicate;if(Array.isArray(v))for(let C=0;C<v.length;C++){const x=v[C];this.matchTNodeWithReadOption(f,m,sR(m,x)),this.matchTNodeWithReadOption(f,m,Ra(m,f,x,!1,!1))}else v===my?4&m.type&&this.matchTNodeWithReadOption(f,m,-1):this.matchTNodeWithReadOption(f,m,Ra(m,f,v,!1,!1))}matchTNodeWithReadOption(f,m,v){if(null!==v){const C=this.metadata.read;if(null!==C)if(C===Uu||C===DC||C===my&&4&m.type)this.addMatch(m.index,-2);else{const x=Ra(m,f,C,!1,!1);null!==x&&this.addMatch(m.index,x)}else this.addMatch(m.index,v)}}addMatch(f,m){null===this.matches?this.matches=[f,m]:this.matches.push(f,m)}}function sR(h,f){const m=h.localNames;if(null!==m)for(let v=0;v<m.length;v+=2)if(m[v]===f)return m[v+1];return null}function AE(h,f,m,v){return-1===m?function aR(h,f){return 11&h.type?uh(h,f):4&h.type?_y(h,f):null}(f,h):-2===m?function kE(h,f,m){return m===Uu?uh(f,h):m===my?_y(f,h):m===DC?MC(f,h):void 0}(h,f,v):Xr(h,h[1],m,f)}function kC(h,f,m,v){const C=f[19].queries[v];if(null===C.matches){const x=h.data,k=m.matches,N=[];for(let H=0;H<k.length;H+=2){const U=k[H];N.push(U<0?null:AE(f,x[U],k[H+1],m.metadata.read))}C.matches=N}return C.matches}function Ab(h,f,m,v){const C=h.queries.getByIndex(m),x=C.matches;if(null!==x){const k=kC(h,f,C,m);for(let N=0;N<x.length;N+=2){const H=x[N];if(H>0)v.push(k[N/2]);else{const U=x[N+1],ee=f[-H];for(let he=10;he<ee.length;he++){const xe=ee[he];xe[17]===xe[3]&&Ab(xe[1],xe,U,v)}if(null!==ee[9]){const he=ee[9];for(let xe=0;xe<he.length;xe++){const Ze=he[xe];Ab(Ze[1],Ze,U,v)}}}}}return v}function OI(h){const f=Et(),m=di(),v=bu();wu(v+1);const C=RE(m,v);if(h.dirty&&bc(f)===(2==(2&C.metadata.flags))){if(null===C.matches)h.reset([]);else{const x=C.crossesNgTemplate?Ab(m,f,v,[]):kC(m,f,C,v);h.reset(x,uT),h.notifyOnChanges()}return!0}return!1}function RI(h,f,m){const v=di();v.firstCreatePass&&(PI(v,new xm(h,f,m),-1),2==(2&f)&&(v.staticViewQueries=!0)),OE(v,Et(),f)}function OC(h,f,m,v){const C=di();if(C.firstCreatePass){const x=nr();PI(C,new xm(f,m,v),x.index),function NI(h,f){const m=h.contentQueries||(h.contentQueries=[]);f!==(m.length?m[m.length-1]:-1)&&m.push(h.queries.length-1,f)}(C,h),2==(2&m)&&(C.staticContentQueries=!0)}OE(C,Et(),m)}function RC(){return function lR(h,f){return h[19].queries[f].queryList}(Et(),bu())}function OE(h,f,m){const v=new SC(4==(4&m));xi(h,f,v,v.destroy),null===f[19]&&(f[19]=new Sf),f[19].queries.push(new Mb(v))}function PI(h,f,m){null===h.queries&&(h.queries=new AC),h.queries.track(new Df(f,m))}function RE(h,f){return h.queries.getByIndex(f)}function PE(h,f){return _y(h,f)}function by(h){const f=oe(h)||ue(h)||De(h);return null!==f&&f.standalone}function jC(...h){}const $I=new ji("Application Initializer");let Rb=(()=>{class h{constructor(m){this.appInits=m,this.resolve=jC,this.reject=jC,this.initialized=!1,this.done=!1,this.donePromise=new Promise((v,C)=>{this.resolve=v,this.reject=C})}runInitializers(){if(this.initialized)return;const m=[],v=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let C=0;C<this.appInits.length;C++){const x=this.appInits[C]();if(yf(x))m.push(x);else if(OT(x)){const k=new Promise((N,H)=>{x.subscribe({complete:N,error:H})});m.push(k)}}Promise.all(m).then(()=>{v()}).catch(C=>{this.reject(C)}),0===m.length&&v(),this.initialized=!0}}return h.\u0275fac=function(m){return new(m||h)(lr($I,8))},h.\u0275prov=Yt({token:h,factory:h.\u0275fac,providedIn:"root"}),h})();const zC=new ji("AppId",{providedIn:"root",factory:function ex(){return`${Pb()}${Pb()}${Pb()}`}});function Pb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const GC=new ji("Platform Initializer"),qC=new ji("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ZC=new ji("appBootstrapListener"),tx=new ji("AnimationModuleType");let KI=(()=>{class h{log(m){console.log(m)}warn(m){console.warn(m)}}return h.\u0275fac=function(m){return new(m||h)},h.\u0275prov=Yt({token:h,factory:h.\u0275fac,providedIn:"platform"}),h})();const Uh=new ji("LocaleId",{providedIn:"root",factory:()=>Pc(Uh,tt.Optional|tt.SkipSelf)||function nx(){return typeof $localize<"u"&&$localize.locale||cc}()}),ix=new ji("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class YI{constructor(f,m){this.ngModuleFactory=f,this.componentFactories=m}}let vR=(()=>{class h{compileModuleSync(m){return new fE(m)}compileModuleAsync(m){return Promise.resolve(this.compileModuleSync(m))}compileModuleAndAllComponentsSync(m){const v=this.compileModuleSync(m),x=or(at(m).declarations).reduce((k,N)=>{const H=oe(N);return H&&k.push(new st(H)),k},[]);return new YI(v,x)}compileModuleAndAllComponentsAsync(m){return Promise.resolve(this.compileModuleAndAllComponentsSync(m))}clearCache(){}clearCacheFor(m){}getModuleId(m){}}return h.\u0275fac=function(m){return new(m||h)},h.\u0275prov=Yt({token:h,factory:h.\u0275fac,providedIn:"root"}),h})();const eM=(()=>Promise.resolve(0))();function $C(h){typeof Zone>"u"?eM.then(()=>{h&&h.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",h)}class sa{constructor({enableLongStackTrace:f=!1,shouldCoalesceEventChangeDetection:m=!1,shouldCoalesceRunChangeDetection:v=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hd(!1),this.onMicrotaskEmpty=new hd(!1),this.onStable=new hd(!1),this.onError=new hd(!1),typeof Zone>"u")throw new je(908,!1);Zone.assertZonePatched();const C=this;if(C._nesting=0,C._outer=C._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const x=Zone.AsyncStackTaggingZoneSpec;C._inner=C._inner.fork(new x("Angular"))}Zone.TaskTrackingZoneSpec&&(C._inner=C._inner.fork(new Zone.TaskTrackingZoneSpec)),f&&Zone.longStackTraceZoneSpec&&(C._inner=C._inner.fork(Zone.longStackTraceZoneSpec)),C.shouldCoalesceEventChangeDetection=!v&&m,C.shouldCoalesceRunChangeDetection=v,C.lastRequestAnimationFrameId=-1,C.nativeRequestAnimationFrame=function tM(){let h=Pt.requestAnimationFrame,f=Pt.cancelAnimationFrame;if(typeof Zone<"u"&&h&&f){const m=h[Zone.__symbol__("OriginalDelegate")];m&&(h=m);const v=f[Zone.__symbol__("OriginalDelegate")];v&&(f=v)}return{nativeRequestAnimationFrame:h,nativeCancelAnimationFrame:f}}().nativeRequestAnimationFrame,function Nb(h){const f=()=>{!function nM(h){h.isCheckStableRunning||-1!==h.lastRequestAnimationFrameId||(h.lastRequestAnimationFrameId=h.nativeRequestAnimationFrame.call(Pt,()=>{h.fakeTopEventTask||(h.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{h.lastRequestAnimationFrameId=-1,rx(h),h.isCheckStableRunning=!0,WC(h),h.isCheckStableRunning=!1},void 0,()=>{},()=>{})),h.fakeTopEventTask.invoke()}),rx(h))}(h)};h._inner=h._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(m,v,C,x,k,N)=>{try{return xr(h),m.invokeTask(C,x,k,N)}finally{(h.shouldCoalesceEventChangeDetection&&"eventTask"===x.type||h.shouldCoalesceRunChangeDetection)&&f(),Bs(h)}},onInvoke:(m,v,C,x,k,N,H)=>{try{return xr(h),m.invoke(C,x,k,N,H)}finally{h.shouldCoalesceRunChangeDetection&&f(),Bs(h)}},onHasTask:(m,v,C,x)=>{m.hasTask(C,x),v===C&&("microTask"==x.change?(h._hasPendingMicrotasks=x.microTask,rx(h),WC(h)):"macroTask"==x.change&&(h.hasPendingMacrotasks=x.macroTask))},onHandleError:(m,v,C,x)=>(m.handleError(C,x),h.runOutsideAngular(()=>h.onError.emit(x)),!1)})}(C)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!sa.isInAngularZone())throw new je(909,!1)}static assertNotInAngularZone(){if(sa.isInAngularZone())throw new je(909,!1)}run(f,m,v){return this._inner.run(f,m,v)}runTask(f,m,v,C){const x=this._inner,k=x.scheduleEventTask("NgZoneEvent: "+C,f,Hi,jC,jC);try{return x.runTask(k,m,v)}finally{x.cancelTask(k)}}runGuarded(f,m,v){return this._inner.runGuarded(f,m,v)}runOutsideAngular(f){return this._outer.run(f)}}const Hi={};function WC(h){if(0==h._nesting&&!h.hasPendingMicrotasks&&!h.isStable)try{h._nesting++,h.onMicrotaskEmpty.emit(null)}finally{if(h._nesting--,!h.hasPendingMicrotasks)try{h.runOutsideAngular(()=>h.onStable.emit(null))}finally{h.isStable=!0}}}function rx(h){h.hasPendingMicrotasks=!!(h._hasPendingMicrotasks||(h.shouldCoalesceEventChangeDetection||h.shouldCoalesceRunChangeDetection)&&-1!==h.lastRequestAnimationFrameId)}function xr(h){h._nesting++,h.isStable&&(h.isStable=!1,h.onUnstable.emit(null))}function Bs(h){h._nesting--,WC(h)}class pd{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hd,this.onMicrotaskEmpty=new hd,this.onStable=new hd,this.onError=new hd}run(f,m,v){return f.apply(m,v)}runGuarded(f,m,v){return f.apply(m,v)}runOutsideAngular(f){return f()}runTask(f,m,v,C){return f.apply(m,v)}}const KC=new ji(""),iM=new ji("");let sx,Fb=(()=>{class h{constructor(m,v,C){this._ngZone=m,this.registry=v,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,sx||(function rM(h){sx=h}(C),C.addToWindow(v)),this._watchAngularEvents(),m.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{sa.assertNotInAngularZone(),$C(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$C(()=>{for(;0!==this._callbacks.length;){let m=this._callbacks.pop();clearTimeout(m.timeoutId),m.doneCb(this._didWork)}this._didWork=!1});else{let m=this.getPendingTasks();this._callbacks=this._callbacks.filter(v=>!v.updateCb||!v.updateCb(m)||(clearTimeout(v.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(m=>({source:m.source,creationLocation:m.creationLocation,data:m.data})):[]}addCallback(m,v,C){let x=-1;v&&v>0&&(x=setTimeout(()=>{this._callbacks=this._callbacks.filter(k=>k.timeoutId!==x),m(this._didWork,this.getPendingTasks())},v)),this._callbacks.push({doneCb:m,timeoutId:x,updateCb:C})}whenStable(m,v,C){if(C&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(m,v,C),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(m){this.registry.registerApplication(m,this)}unregisterApplication(m){this.registry.unregisterApplication(m)}findProviders(m,v,C){return[]}}return h.\u0275fac=function(m){return new(m||h)(lr(sa),lr(ox),lr(iM))},h.\u0275prov=Yt({token:h,factory:h.\u0275fac}),h})(),ox=(()=>{class h{constructor(){this._applications=new Map}registerApplication(m,v){this._applications.set(m,v)}unregisterApplication(m){this._applications.delete(m)}unregisterAllApplications(){this._applications.clear()}getTestability(m){return this._applications.get(m)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(m,v=!0){return sx?.findTestabilityInTree(this,m,v)??null}}return h.\u0275fac=function(m){return new(m||h)},h.\u0275prov=Yt({token:h,factory:h.\u0275fac,providedIn:"platform"}),h})(),fd=null;const oM=new ji("AllowMultipleToken"),ax=new ji("PlatformDestroyListeners");class sM{constructor(f,m){this.name=f,this.token=m}}function aM(h,f,m=[]){const v=`Platform: ${f}`,C=new ji(v);return(x=[])=>{let k=cx();if(!k||k.injector.get(oM,!1)){const N=[...m,...x,{provide:C,useValue:!0}];h?h(N):function CR(h){if(fd&&!fd.get(oM,!1))throw new je(400,!1);fd=h;const f=h.get(cM);(function lx(h){const f=h.get(GC,null);f&&f.forEach(m=>m())})(h)}(function lM(h=[],f){return xh.create({name:f,providers:[{provide:vv,useValue:"platform"},{provide:ax,useValue:new Set([()=>fd=null])},...h]})}(N,v))}return function ER(h){const f=cx();if(!f)throw new je(401,!1);return f}()}}function cx(){return fd?.get(cM)??null}let cM=(()=>{class h{constructor(m){this._injector=m,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(m,v){const C=function jh(h,f){let m;return m="noop"===h?new pd:("zone.js"===h?void 0:h)||new sa(f),m}(v?.ngZone,function ux(h){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!h||!h.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!h||!h.ngZoneRunCoalescing)||!1}}(v)),x=[{provide:sa,useValue:C}];return C.run(()=>{const k=xh.create({providers:x,parent:this.injector,name:m.moduleType.name}),N=m.create(k),H=N.injector.get(Gc,null);if(!H)throw new je(402,!1);return C.runOutsideAngular(()=>{const U=C.onError.subscribe({next:ee=>{H.handleError(ee)}});N.onDestroy(()=>{Im(this._modules,N),U.unsubscribe()})}),function xR(h,f,m){try{const v=m();return yf(v)?v.catch(C=>{throw f.runOutsideAngular(()=>h.handleError(C)),C}):v}catch(v){throw f.runOutsideAngular(()=>h.handleError(v)),v}}(H,C,()=>{const U=N.injector.get(Rb);return U.runInitializers(),U.donePromise.then(()=>(KT(N.injector.get(Uh,cc)||cc),this._moduleDoBootstrap(N),N))})})}bootstrapModule(m,v=[]){const C=su({},v);return function iV(h,f,m){const v=new fE(m);return Promise.resolve(v)}(0,0,m).then(x=>this.bootstrapModuleFactory(x,C))}_moduleDoBootstrap(m){const v=m.injector.get(gd);if(m._bootstrapComponents.length>0)m._bootstrapComponents.forEach(C=>v.bootstrap(C));else{if(!m.instance.ngDoBootstrap)throw new je(403,!1);m.instance.ngDoBootstrap(v)}this._modules.push(m)}onDestroy(m){this._destroyListeners.push(m)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new je(404,!1);this._modules.slice().forEach(v=>v.destroy()),this._destroyListeners.forEach(v=>v());const m=this._injector.get(ax,null);m&&(m.forEach(v=>v()),m.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return h.\u0275fac=function(m){return new(m||h)(lr(xh))},h.\u0275prov=Yt({token:h,factory:h.\u0275fac,providedIn:"platform"}),h})();function su(h,f){return Array.isArray(f)?f.reduce(su,h):{...h,...f}}let gd=(()=>{class h{constructor(m,v,C){this._zone=m,this._injector=v,this._exceptionHandler=C,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const x=new W.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),k=new W.y(N=>{let H;this._zone.runOutsideAngular(()=>{H=this._zone.onStable.subscribe(()=>{sa.assertNotInAngularZone(),$C(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const U=this._zone.onUnstable.subscribe(()=>{sa.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{H.unsubscribe(),U.unsubscribe()}});this.isStable=(0,_e.T)(x,k.pipe((0,Ve.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(m,v){const C=m instanceof Eg;if(!this._injector.get(Rb).done)throw!C&&by(m),new je(405,false);let k;k=C?m:this._injector.get(Up).resolveComponentFactory(m),this.componentTypes.push(k.componentType);const N=function qo(h){return h.isBoundToModule}(k)?void 0:this._injector.get(wm),U=k.create(xh.NULL,[],v||k.selector,N),ee=U.location.nativeElement,he=U.injector.get(KC,null);return he?.registerApplication(ee),U.onDestroy(()=>{this.detachView(U.hostView),Im(this.components,U),he?.unregisterApplication(ee)}),this._loadComponent(U),U}tick(){if(this._runningTick)throw new je(101,!1);try{this._runningTick=!0;for(let m of this._views)m.detectChanges()}catch(m){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(m))}finally{this._runningTick=!1}}attachView(m){const v=m;this._views.push(v),v.attachToAppRef(this)}detachView(m){const v=m;Im(this._views,v),v.detachFromAppRef()}_loadComponent(m){this.attachView(m.hostView),this.tick(),this.components.push(m),this._injector.get(ZC,[]).concat(this._bootstrapListeners).forEach(C=>C(m))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(m=>m()),this._views.slice().forEach(m=>m.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(m){return this._destroyListeners.push(m),()=>Im(this._destroyListeners,m)}destroy(){if(this._destroyed)throw new je(406,!1);const m=this._injector;m.destroy&&!m.destroyed&&m.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return h.\u0275fac=function(m){return new(m||h)(lr(sa),lr(lh),lr(Gc))},h.\u0275prov=Yt({token:h,factory:h.\u0275fac,providedIn:"root"}),h})();function Im(h,f){const m=h.indexOf(f);m>-1&&h.splice(m,1)}let dx=!0,hx=!1;function YC(){return hx=!0,dx}function DR(){if(hx)throw new Error("Cannot enable prod mode after platform setup.");dx=!1}let dM=(()=>{class h{}return h.__NG_ELEMENT_ID__=fx,h})();function fx(h){return function IR(h,f,m){if(Eo(h)&&!m){const v=So(h.index,f);return new G(v,v)}return 47&h.type?new G(f[16],f):null}(nr(),Et(),16==(16&h))}class _x{constructor(){}supports(f){return mf(f)}create(f){return new Bb(f)}}const gM=(h,f)=>f;class Bb{constructor(f){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=f||gM}forEachItem(f){let m;for(m=this._itHead;null!==m;m=m._next)f(m)}forEachOperation(f){let m=this._itHead,v=this._removalsHead,C=0,x=null;for(;m||v;){const k=!v||m&&m.currentIndex<_M(v,C,x)?m:v,N=_M(k,C,x),H=k.currentIndex;if(k===v)C--,v=v._nextRemoved;else if(m=m._next,null==k.previousIndex)C++;else{x||(x=[]);const U=N-C,ee=H-C;if(U!=ee){for(let xe=0;xe<U;xe++){const Ze=xe<x.length?x[xe]:x[xe]=0,bt=Ze+xe;ee<=bt&&bt<U&&(x[xe]=Ze+1)}x[k.previousIndex]=ee-U}}N!==H&&f(k,N,H)}}forEachPreviousItem(f){let m;for(m=this._previousItHead;null!==m;m=m._nextPrevious)f(m)}forEachAddedItem(f){let m;for(m=this._additionsHead;null!==m;m=m._nextAdded)f(m)}forEachMovedItem(f){let m;for(m=this._movesHead;null!==m;m=m._nextMoved)f(m)}forEachRemovedItem(f){let m;for(m=this._removalsHead;null!==m;m=m._nextRemoved)f(m)}forEachIdentityChange(f){let m;for(m=this._identityChangesHead;null!==m;m=m._nextIdentityChange)f(m)}diff(f){if(null==f&&(f=[]),!mf(f))throw new je(900,!1);return this.check(f)?this:null}onDestroy(){}check(f){this._reset();let C,x,k,m=this._itHead,v=!1;if(Array.isArray(f)){this.length=f.length;for(let N=0;N<this.length;N++)x=f[N],k=this._trackByFn(N,x),null!==m&&Object.is(m.trackById,k)?(v&&(m=this._verifyReinsertion(m,x,k,N)),Object.is(m.item,x)||this._addIdentityChange(m,x)):(m=this._mismatch(m,x,k,N),v=!0),m=m._next}else C=0,function pD(h,f){if(Array.isArray(h))for(let m=0;m<h.length;m++)f(h[m]);else{const m=h[rm()]();let v;for(;!(v=m.next()).done;)f(v.value)}}(f,N=>{k=this._trackByFn(C,N),null!==m&&Object.is(m.trackById,k)?(v&&(m=this._verifyReinsertion(m,N,k,C)),Object.is(m.item,N)||this._addIdentityChange(m,N)):(m=this._mismatch(m,N,k,C),v=!0),m=m._next,C++}),this.length=C;return this._truncate(m),this.collection=f,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let f;for(f=this._previousItHead=this._itHead;null!==f;f=f._next)f._nextPrevious=f._next;for(f=this._additionsHead;null!==f;f=f._nextAdded)f.previousIndex=f.currentIndex;for(this._additionsHead=this._additionsTail=null,f=this._movesHead;null!==f;f=f._nextMoved)f.previousIndex=f.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(f,m,v,C){let x;return null===f?x=this._itTail:(x=f._prev,this._remove(f)),null!==(f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(v,null))?(Object.is(f.item,m)||this._addIdentityChange(f,m),this._reinsertAfter(f,x,C)):null!==(f=null===this._linkedRecords?null:this._linkedRecords.get(v,C))?(Object.is(f.item,m)||this._addIdentityChange(f,m),this._moveAfter(f,x,C)):f=this._addAfter(new Af(m,v),x,C),f}_verifyReinsertion(f,m,v,C){let x=null===this._unlinkedRecords?null:this._unlinkedRecords.get(v,null);return null!==x?f=this._reinsertAfter(x,f._prev,C):f.currentIndex!=C&&(f.currentIndex=C,this._addToMoves(f,C)),f}_truncate(f){for(;null!==f;){const m=f._next;this._addToRemovals(this._unlink(f)),f=m}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(f,m,v){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(f);const C=f._prevRemoved,x=f._nextRemoved;return null===C?this._removalsHead=x:C._nextRemoved=x,null===x?this._removalsTail=C:x._prevRemoved=C,this._insertAfter(f,m,v),this._addToMoves(f,v),f}_moveAfter(f,m,v){return this._unlink(f),this._insertAfter(f,m,v),this._addToMoves(f,v),f}_addAfter(f,m,v){return this._insertAfter(f,m,v),this._additionsTail=null===this._additionsTail?this._additionsHead=f:this._additionsTail._nextAdded=f,f}_insertAfter(f,m,v){const C=null===m?this._itHead:m._next;return f._next=C,f._prev=m,null===C?this._itTail=f:C._prev=f,null===m?this._itHead=f:m._next=f,null===this._linkedRecords&&(this._linkedRecords=new mM),this._linkedRecords.put(f),f.currentIndex=v,f}_remove(f){return this._addToRemovals(this._unlink(f))}_unlink(f){null!==this._linkedRecords&&this._linkedRecords.remove(f);const m=f._prev,v=f._next;return null===m?this._itHead=v:m._next=v,null===v?this._itTail=m:v._prev=m,f}_addToMoves(f,m){return f.previousIndex===m||(this._movesTail=null===this._movesTail?this._movesHead=f:this._movesTail._nextMoved=f),f}_addToRemovals(f){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mM),this._unlinkedRecords.put(f),f.currentIndex=null,f._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=f,f._prevRemoved=null):(f._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=f),f}_addIdentityChange(f,m){return f.item=m,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=f:this._identityChangesTail._nextIdentityChange=f,f}}class Af{constructor(f,m){this.item=f,this.trackById=m,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AR{constructor(){this._head=null,this._tail=null}add(f){null===this._head?(this._head=this._tail=f,f._nextDup=null,f._prevDup=null):(this._tail._nextDup=f,f._prevDup=this._tail,f._nextDup=null,this._tail=f)}get(f,m){let v;for(v=this._head;null!==v;v=v._nextDup)if((null===m||m<=v.currentIndex)&&Object.is(v.trackById,f))return v;return null}remove(f){const m=f._prevDup,v=f._nextDup;return null===m?this._head=v:m._nextDup=v,null===v?this._tail=m:v._prevDup=m,null===this._head}}class mM{constructor(){this.map=new Map}put(f){const m=f.trackById;let v=this.map.get(m);v||(v=new AR,this.map.set(m,v)),v.add(f)}get(f,m){const C=this.map.get(f);return C?C.get(f,m):null}remove(f){const m=f.trackById;return this.map.get(m).remove(f)&&this.map.delete(m),f}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _M(h,f,m){const v=h.previousIndex;if(null===v)return v;let C=0;return m&&v<m.length&&(C=m[v]),v+f+C}class yM{constructor(){}supports(f){return f instanceof Map||Uw(f)}create(){return new vM}}class vM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(f){let m;for(m=this._mapHead;null!==m;m=m._next)f(m)}forEachPreviousItem(f){let m;for(m=this._previousMapHead;null!==m;m=m._nextPrevious)f(m)}forEachChangedItem(f){let m;for(m=this._changesHead;null!==m;m=m._nextChanged)f(m)}forEachAddedItem(f){let m;for(m=this._additionsHead;null!==m;m=m._nextAdded)f(m)}forEachRemovedItem(f){let m;for(m=this._removalsHead;null!==m;m=m._nextRemoved)f(m)}diff(f){if(f){if(!(f instanceof Map||Uw(f)))throw new je(900,!1)}else f=new Map;return this.check(f)?this:null}onDestroy(){}check(f){this._reset();let m=this._mapHead;if(this._appendAfter=null,this._forEach(f,(v,C)=>{if(m&&m.key===C)this._maybeAddToChanges(m,v),this._appendAfter=m,m=m._next;else{const x=this._getOrCreateRecordForKey(C,v);m=this._insertBeforeOrAppend(m,x)}}),m){m._prev&&(m._prev._next=null),this._removalsHead=m;for(let v=m;null!==v;v=v._nextRemoved)v===this._mapHead&&(this._mapHead=null),this._records.delete(v.key),v._nextRemoved=v._next,v.previousValue=v.currentValue,v.currentValue=null,v._prev=null,v._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(f,m){if(f){const v=f._prev;return m._next=f,m._prev=v,f._prev=m,v&&(v._next=m),f===this._mapHead&&(this._mapHead=m),this._appendAfter=f,f}return this._appendAfter?(this._appendAfter._next=m,m._prev=this._appendAfter):this._mapHead=m,this._appendAfter=m,null}_getOrCreateRecordForKey(f,m){if(this._records.has(f)){const C=this._records.get(f);this._maybeAddToChanges(C,m);const x=C._prev,k=C._next;return x&&(x._next=k),k&&(k._prev=x),C._next=null,C._prev=null,C}const v=new kR(f);return this._records.set(f,v),v.currentValue=m,this._addToAdditions(v),v}_reset(){if(this.isDirty){let f;for(this._previousMapHead=this._mapHead,f=this._previousMapHead;null!==f;f=f._next)f._nextPrevious=f._next;for(f=this._changesHead;null!==f;f=f._nextChanged)f.previousValue=f.currentValue;for(f=this._additionsHead;null!=f;f=f._nextAdded)f.previousValue=f.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(f,m){Object.is(m,f.currentValue)||(f.previousValue=f.currentValue,f.currentValue=m,this._addToChanges(f))}_addToAdditions(f){null===this._additionsHead?this._additionsHead=this._additionsTail=f:(this._additionsTail._nextAdded=f,this._additionsTail=f)}_addToChanges(f){null===this._changesHead?this._changesHead=this._changesTail=f:(this._changesTail._nextChanged=f,this._changesTail=f)}_forEach(f,m){f instanceof Map?f.forEach(m):Object.keys(f).forEach(v=>m(f[v],v))}}class kR{constructor(f){this.key=f,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function bM(){return new e1([new _x])}let e1=(()=>{class h{constructor(m){this.factories=m}static create(m,v){if(null!=v){const C=v.factories.slice();m=m.concat(C)}return new h(m)}static extend(m){return{provide:h,useFactory:v=>h.create(m,v||bM()),deps:[[h,new ma,new ku]]}}find(m){const v=this.factories.find(C=>C.supports(m));if(null!=v)return v;throw new je(901,!1)}}return h.\u0275prov=Yt({token:h,providedIn:"root",factory:bM}),h})();function wM(){return new t1([new yM])}let t1=(()=>{class h{constructor(m){this.factories=m}static create(m,v){if(v){const C=v.factories.slice();m=m.concat(C)}return new h(m)}static extend(m){return{provide:h,useFactory:v=>h.create(m,v||wM()),deps:[[h,new ma,new ku]]}}find(m){const v=this.factories.find(C=>C.supports(m));if(v)return v;throw new je(901,!1)}}return h.\u0275prov=Yt({token:h,providedIn:"root",factory:wM}),h})();const CM=aM(null,"core",[]);let TM=(()=>{class h{constructor(m){}}return h.\u0275fac=function(m){return new(m||h)(lr(gd))},h.\u0275mod=$t({type:h}),h.\u0275inj=ut({}),h})();function FR(h){return"boolean"==typeof h?h:null!=h&&"false"!==h}},3942:(cn,Ye,q)=>{"use strict";q.d(Ye,{Z:()=>je});var a=q(2090),V=q(4859),W=q(9681),_e=q(1877);class Ve{constructor(He,Fe){this._delegate=He,this.firebase=Fe,(0,W._addComponent)(He,new V.wA("app-compat",()=>this,"PUBLIC")),this.container=He.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(He){this._delegate.automaticDataCollectionEnabled=He}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(He=>{this._delegate.checkDestroyed(),He()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,W.deleteApp)(this._delegate)))}_getService(He,Fe=W._DEFAULT_ENTRY_NAME){var xt;this._delegate.checkDestroyed();const gt=this._delegate.container.getProvider(He);return!gt.isInitialized()&&"EXPLICIT"===(null===(xt=gt.getComponent())||void 0===xt?void 0:xt.instantiationMode)&&gt.initialize(),gt.getImmediate({identifier:Fe})}_removeServiceInstance(He,Fe=W._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(He).clearInstance(Fe)}_addComponent(He){(0,W._addComponent)(this._delegate,He)}_addOrOverwriteComponent(He){(0,W._addOrOverwriteComponent)(this._delegate,He)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ie=function pe(){const ct=function Se(ct){const He={},Fe={__esModule:!0,initializeApp:function Ke(ge,Me={}){const ke=W.initializeApp(ge,Me);if((0,a.r3)(He,ke.name))return He[ke.name];const be=new ct(ke,Fe);return He[ke.name]=be,be},app:gt,registerVersion:W.registerVersion,setLogLevel:W.setLogLevel,onLog:W.onLog,apps:null,SDK_VERSION:W.SDK_VERSION,INTERNAL:{registerComponent:function $e(ge){const Me=ge.name,ke=Me.replace("-compat","");if(W._registerComponent(ge)&&"PUBLIC"===ge.type){const be=(Ce=gt())=>{if("function"!=typeof Ce[ke])throw ve.create("invalid-app-argument",{appName:Me});return Ce[ke]()};void 0!==ge.serviceProps&&(0,a.ZB)(be,ge.serviceProps),Fe[ke]=be,ct.prototype[ke]=function(...Ce){return this._getService.bind(this,Me).apply(this,ge.multipleInstances?Ce:[])}}return"PUBLIC"===ge.type?Fe[ke]:null},removeApp:function xt(ge){delete He[ge]},useAsService:function Je(ge,Me){return"serverAuth"===Me?null:Me},modularAPIs:W}};function gt(ge){if(!(0,a.r3)(He,ge=ge||W._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:ge});return He[ge]}return Fe.default=Fe,Object.defineProperty(Fe,"apps",{get:function Be(){return Object.keys(He).map(ge=>He[ge])}}),gt.App=ct,Fe}(Ve);return ct.INTERNAL=Object.assign(Object.assign({},ct.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function He(Fe){(0,a.ZB)(ct,Fe)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),ct}(),ne=new _e.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){ne.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ct=self.firebase.SDK_VERSION;ct&&ct.indexOf("LITE")>=0&&ne.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const je=ie;!function Re(ct){(0,W.registerVersion)("@firebase/app-compat","0.1.30",ct)}()},9681:(cn,Ye,q)=>{"use strict";q.r(Ye),q.d(Ye,{FirebaseError:()=>_e.ZR,SDK_VERSION:()=>ri,_DEFAULT_ENTRY_NAME:()=>rn,_addComponent:()=>Bt,_addOrOverwriteComponent:()=>Yt,_apps:()=>At,_clearComponents:()=>nn,_components:()=>Kt,_getProvider:()=>ut,_registerComponent:()=>Jt,_removeServiceInstance:()=>sn,deleteApp:()=>tt,getApp:()=>Sn,getApps:()=>yi,initializeApp:()=>vn,onLog:()=>Tt,registerVersion:()=>_t,setLogLevel:()=>Gt});var a=q(5861),V=q(4859),W=q(1877),_e=q(2090),Ve=q(8766);class Ae{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(de=>{if(function ve(X){return"VERSION"===X.getComponent()?.type}(de)){const Ge=de.getImmediate();return`${Ge.library}/${Ge.version}`}return null}).filter(de=>de).join(" ")}}const Se="@firebase/app",ie=new W.Yd("@firebase/app"),rn="[DEFAULT]",Ct={[Se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},At=new Map,Kt=new Map;function Bt(X,J){try{X.container.addComponent(J)}catch(de){ie.debug(`Component ${J.name} failed to register with FirebaseApp ${X.name}`,de)}}function Yt(X,J){X.container.addOrOverwriteComponent(J)}function Jt(X){const J=X.name;if(Kt.has(J))return ie.debug(`There were multiple attempts to register component ${J}.`),!1;Kt.set(J,X);for(const de of At.values())Bt(de,X);return!0}function ut(X,J){const de=X.container.getProvider("heartbeat").getImmediate({optional:!0});return de&&de.triggerHeartbeat(),X.container.getProvider(J)}function sn(X,J,de=rn){ut(X,J).clearInstance(de)}function nn(){Kt.clear()}const en=new _e.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Tn{constructor(J,de,Ge){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},de),this._name=de.name,this._automaticDataCollectionEnabled=de.automaticDataCollectionEnabled,this._container=Ge,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw en.create("app-deleted",{appName:this._name})}}const ri="9.9.1";function vn(X,J={}){"object"!=typeof J&&(J={name:J});const de=Object.assign({name:rn,automaticDataCollectionEnabled:!1},J),Ge=de.name;if("string"!=typeof Ge||!Ge)throw en.create("bad-app-name",{appName:String(Ge)});const wt=At.get(Ge);if(wt){if((0,_e.vZ)(X,wt.options)&&(0,_e.vZ)(de,wt.config))return wt;throw en.create("duplicate-app",{appName:Ge})}const $t=new V.H0(Ge);for(const Hn of Kt.values())$t.addComponent(Hn);const yn=new Tn(X,de,$t);return At.set(Ge,yn),yn}function Sn(X=rn){const J=At.get(X);if(!J)throw en.create("no-app",{appName:X});return J}function yi(){return Array.from(At.values())}function tt(X){return Le.apply(this,arguments)}function Le(){return(Le=(0,a.Z)(function*(X){const J=X.name;At.has(J)&&(At.delete(J),yield Promise.all(X.container.getProviders().map(de=>de.delete())),X.isDeleted=!0)})).apply(this,arguments)}function _t(X,J,de){var Ge;let wt=null!==(Ge=Ct[X])&&void 0!==Ge?Ge:X;de&&(wt+=`-${de}`);const $t=wt.match(/\s|\//),yn=J.match(/\s|\//);if($t||yn){const Hn=[`Unable to register library "${wt}" with version "${J}":`];return $t&&Hn.push(`library name "${wt}" contains illegal characters (whitespace or "/")`),$t&&yn&&Hn.push("and"),yn&&Hn.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void ie.warn(Hn.join(" "))}Jt(new V.wA(`${wt}-version`,()=>({library:wt,version:J}),"VERSION"))}function Tt(X,J){if(null!==X&&"function"!=typeof X)throw en.create("invalid-log-argument");(0,W.Am)(X,J)}function Gt(X){(0,W.Ub)(X)}const Gn="firebase-heartbeat-store";let Kn=null;function Vn(){return Kn||(Kn=(0,Ve.X3)("firebase-heartbeat-database",1,{upgrade:(X,J)=>{0===J&&X.createObjectStore(Gn)}}).catch(X=>{throw en.create("storage-open",{originalErrorMessage:X.message})})),Kn}function Pt(){return(Pt=(0,a.Z)(function*(X){var J;try{return(yield Vn()).transaction(Gn).objectStore(Gn).get(mi(X))}catch(de){throw en.create("storage-get",{originalErrorMessage:null===(J=de)||void 0===J?void 0:J.message})}})).apply(this,arguments)}function Yn(X,J){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,a.Z)(function*(X,J){var de;try{const wt=(yield Vn()).transaction(Gn,"readwrite");return yield wt.objectStore(Gn).put(J,mi(X)),wt.done}catch(Ge){throw en.create("storage-set",{originalErrorMessage:null===(de=Ge)||void 0===de?void 0:de.message})}})).apply(this,arguments)}function mi(X){return`${X.name}!${X.options.appId}`}class Yi{constructor(J){this.container=J,this._heartbeatsCache=null;const de=this.container.getProvider("app").getImmediate();this._storage=new me(de),this._heartbeatsCachePromise=this._storage.read().then(Ge=>(this._heartbeatsCache=Ge,Ge))}triggerHeartbeat(){var J=this;return(0,a.Z)(function*(){const Ge=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),wt=In();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==wt&&!J._heartbeatsCache.heartbeats.some($t=>$t.date===wt))return J._heartbeatsCache.heartbeats.push({date:wt,agent:Ge}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter($t=>{const yn=new Date($t.date).valueOf();return Date.now()-yn<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,a.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const de=In(),{heartbeatsToSend:Ge,unsentEntries:wt}=function qi(X,J=1024){const de=[];let Ge=X.slice();for(const wt of X){const $t=de.find(yn=>yn.agent===wt.agent);if($t){if($t.dates.push(wt.date),z(de)>J){$t.dates.pop();break}}else if(de.push({agent:wt.agent,dates:[wt.date]}),z(de)>J){de.pop();break}Ge=Ge.slice(1)}return{heartbeatsToSend:de,unsentEntries:Ge}}(J._heartbeatsCache.heartbeats),$t=(0,_e.L)(JSON.stringify({version:2,heartbeats:Ge}));return J._heartbeatsCache.lastSentHeartbeatDate=de,wt.length>0?(J._heartbeatsCache.heartbeats=wt,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),$t})()}}function In(){return(new Date).toISOString().substring(0,10)}class me{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,_e.hl)()&&(0,_e.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,a.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function Ht(X){return Pt.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var de=this;return(0,a.Z)(function*(){var Ge;if(yield de._canUseIndexedDBPromise){const $t=yield de.read();return Yn(de.app,{lastSentHeartbeatDate:null!==(Ge=J.lastSentHeartbeatDate)&&void 0!==Ge?Ge:$t.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var de=this;return(0,a.Z)(function*(){var Ge;if(yield de._canUseIndexedDBPromise){const $t=yield de.read();return Yn(de.app,{lastSentHeartbeatDate:null!==(Ge=J.lastSentHeartbeatDate)&&void 0!==Ge?Ge:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...J.heartbeats]})}})()}}function z(X){return(0,_e.L)(JSON.stringify({version:2,heartbeats:X})).length}!function K(X){Jt(new V.wA("platform-logger",J=>new Ae(J),"PRIVATE")),Jt(new V.wA("heartbeat",J=>new Yi(J),"PRIVATE")),_t(Se,"0.7.29",X),_t(Se,"0.7.29","esm2017"),_t("fire-js","")}("")},4859:(cn,Ye,q)=>{"use strict";q.d(Ye,{H0:()=>Se,wA:()=>W,zt:()=>Ve});var a=q(5861),V=q(2090);class W{constructor(ie,ne,ce){this.name=ie,this.instanceFactory=ne,this.type=ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ie){return this.instantiationMode=ie,this}setMultipleInstances(ie){return this.multipleInstances=ie,this}setServiceProps(ie){return this.serviceProps=ie,this}setInstanceCreatedCallback(ie){return this.onInstanceCreated=ie,this}}const _e="[DEFAULT]";class Ve{constructor(ie,ne){this.name=ie,this.container=ne,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ie){const ne=this.normalizeInstanceIdentifier(ie);if(!this.instancesDeferred.has(ne)){const ce=new V.BH;if(this.instancesDeferred.set(ne,ce),this.isInitialized(ne)||this.shouldAutoInitialize())try{const we=this.getOrInitializeService({instanceIdentifier:ne});we&&ce.resolve(we)}catch{}}return this.instancesDeferred.get(ne).promise}getImmediate(ie){var ne;const ce=this.normalizeInstanceIdentifier(ie?.identifier),we=null!==(ne=ie?.optional)&&void 0!==ne&&ne;if(!this.isInitialized(ce)&&!this.shouldAutoInitialize()){if(we)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ce})}catch(Re){if(we)return null;throw Re}}getComponent(){return this.component}setComponent(ie){if(ie.name!==this.name)throw Error(`Mismatching Component ${ie.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ie,this.shouldAutoInitialize()){if(function ve(pe){return"EAGER"===pe.instantiationMode}(ie))try{this.getOrInitializeService({instanceIdentifier:_e})}catch{}for(const[ne,ce]of this.instancesDeferred.entries()){const we=this.normalizeInstanceIdentifier(ne);try{const Re=this.getOrInitializeService({instanceIdentifier:we});ce.resolve(Re)}catch{}}}}clearInstance(ie=_e){this.instancesDeferred.delete(ie),this.instancesOptions.delete(ie),this.instances.delete(ie)}delete(){var ie=this;return(0,a.Z)(function*(){const ne=Array.from(ie.instances.values());yield Promise.all([...ne.filter(ce=>"INTERNAL"in ce).map(ce=>ce.INTERNAL.delete()),...ne.filter(ce=>"_delete"in ce).map(ce=>ce._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ie=_e){return this.instances.has(ie)}getOptions(ie=_e){return this.instancesOptions.get(ie)||{}}initialize(ie={}){const{options:ne={}}=ie,ce=this.normalizeInstanceIdentifier(ie.instanceIdentifier);if(this.isInitialized(ce))throw Error(`${this.name}(${ce}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const we=this.getOrInitializeService({instanceIdentifier:ce,options:ne});for(const[Re,je]of this.instancesDeferred.entries())ce===this.normalizeInstanceIdentifier(Re)&&je.resolve(we);return we}onInit(ie,ne){var ce;const we=this.normalizeInstanceIdentifier(ne),Re=null!==(ce=this.onInitCallbacks.get(we))&&void 0!==ce?ce:new Set;Re.add(ie),this.onInitCallbacks.set(we,Re);const je=this.instances.get(we);return je&&ie(je,we),()=>{Re.delete(ie)}}invokeOnInitCallbacks(ie,ne){const ce=this.onInitCallbacks.get(ne);if(ce)for(const we of ce)try{we(ie,ne)}catch{}}getOrInitializeService({instanceIdentifier:ie,options:ne={}}){let ce=this.instances.get(ie);if(!ce&&this.component&&(ce=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=ie,pe===_e?void 0:pe),options:ne}),this.instances.set(ie,ce),this.instancesOptions.set(ie,ne),this.invokeOnInitCallbacks(ce,ie),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ie,ce)}catch{}var pe;return ce||null}normalizeInstanceIdentifier(ie=_e){return this.component?this.component.multipleInstances?ie:_e:ie}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Se{constructor(ie){this.name=ie,this.providers=new Map}addComponent(ie){const ne=this.getProvider(ie.name);if(ne.isComponentSet())throw new Error(`Component ${ie.name} has already been registered with ${this.name}`);ne.setComponent(ie)}addOrOverwriteComponent(ie){this.getProvider(ie.name).isComponentSet()&&this.providers.delete(ie.name),this.addComponent(ie)}getProvider(ie){if(this.providers.has(ie))return this.providers.get(ie);const ne=new Ve(ie,this);return this.providers.set(ie,ne),ne}getProviders(){return Array.from(this.providers.values())}}},2833:(cn,Ye,q)=>{"use strict";var a=q(5861),V=q(9681),W=q(4859),_e=q(2090),Ve=q(8766);const Ae="@firebase/installations",ve="0.5.12",pe=`w:${ve}`,ie="FIS_v2",ct=new _e.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function He(Ee){return Ee instanceof _e.ZR&&Ee.code.includes("request-failed")}function Fe({projectId:Ee}){return`https://firebaseinstallations.googleapis.com/v1/projects/${Ee}/installations`}function xt(Ee){return{token:Ee.token,requestStatus:2,expiresIn:Me(Ee.expiresIn),creationTime:Date.now()}}function gt(Ee,Xe){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,a.Z)(function*(Ee,Xe){const an=(yield Xe.json()).error;return ct.create("request-failed",{requestName:Ee,serverCode:an.code,serverMessage:an.message,serverStatus:an.status})})).apply(this,arguments)}function Be({apiKey:Ee}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Ee})}function $e(Ee,{refreshToken:Xe}){const yt=Be(Ee);return yt.append("Authorization",function ke(Ee){return`${ie} ${Ee}`}(Xe)),yt}function Je(Ee){return ge.apply(this,arguments)}function ge(){return(ge=(0,a.Z)(function*(Ee){const Xe=yield Ee();return Xe.status>=500&&Xe.status<600?Ee():Xe})).apply(this,arguments)}function Me(Ee){return Number(Ee.replace("s","000"))}function be(Ee,Xe){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,a.Z)(function*({appConfig:Ee,heartbeatServiceProvider:Xe},{fid:yt}){const an=Fe(Ee),wi=Be(Ee),si=Xe.getImmediate({optional:!0});if(si){const ai=yield si.getHeartbeatsHeader();ai&&wi.append("x-firebase-client",ai)}const Ir={method:"POST",headers:wi,body:JSON.stringify({fid:yt,authVersion:ie,appId:Ee.appId,sdkVersion:pe})},Lo=yield Je(()=>fetch(an,Ir));if(Lo.ok){const ai=yield Lo.json();return{fid:ai.fid||yt,registrationStatus:2,refreshToken:ai.refreshToken,authToken:xt(ai.authToken)}}throw yield gt("Create Installation",Lo)})).apply(this,arguments)}function Ue(Ee){return new Promise(Xe=>{setTimeout(Xe,Ee)})}const mt=/^[cdef][\w-]{21}$/;function Xt(){try{const Ee=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(Ee),Ee[0]=112+Ee[0]%16;const yt=function gn(Ee){return function Ne(Ee){return btoa(String.fromCharCode(...Ee)).replace(/\+/g,"-").replace(/\//g,"_")}(Ee).substr(0,22)}(Ee);return mt.test(yt)?yt:""}catch{return""}}function rn(Ee){return`${Ee.appName}!${Ee.appId}`}const Ct=new Map;function At(Ee,Xe){const yt=rn(Ee);Yt(yt,Xe),function Jt(Ee,Xe){const yt=function sn(){return!ut&&"BroadcastChannel"in self&&(ut=new BroadcastChannel("[Firebase] FID Change"),ut.onmessage=Ee=>{Yt(Ee.data.key,Ee.data.fid)}),ut}();yt&&yt.postMessage({key:Ee,fid:Xe}),function nn(){0===Ct.size&&ut&&(ut.close(),ut=null)}()}(yt,Xe)}function Yt(Ee,Xe){const yt=Ct.get(Ee);if(yt)for(const an of yt)an(Xe)}let ut=null;const Tn="firebase-installations-store";let ri=null;function vn(){return ri||(ri=(0,Ve.X3)("firebase-installations-database",1,{upgrade:(Ee,Xe)=>{0===Xe&&Ee.createObjectStore(Tn)}})),ri}function Sn(Ee,Xe){return yi.apply(this,arguments)}function yi(){return(yi=(0,a.Z)(function*(Ee,Xe){const yt=rn(Ee),wi=(yield vn()).transaction(Tn,"readwrite"),si=wi.objectStore(Tn),An=yield si.get(yt);return yield si.put(Xe,yt),yield wi.done,(!An||An.fid!==Xe.fid)&&At(Ee,Xe.fid),Xe})).apply(this,arguments)}function tt(Ee){return Le.apply(this,arguments)}function Le(){return(Le=(0,a.Z)(function*(Ee){const Xe=rn(Ee),an=(yield vn()).transaction(Tn,"readwrite");yield an.objectStore(Tn).delete(Xe),yield an.done})).apply(this,arguments)}function _t(Ee,Xe){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,a.Z)(function*(Ee,Xe){const yt=rn(Ee),wi=(yield vn()).transaction(Tn,"readwrite"),si=wi.objectStore(Tn),An=yield si.get(yt),Ir=Xe(An);return void 0===Ir?yield si.delete(yt):yield si.put(Ir,yt),yield wi.done,Ir&&(!An||An.fid!==Ir.fid)&&At(Ee,Ir.fid),Ir})).apply(this,arguments)}function Gt(Ee){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,a.Z)(function*(Ee){let Xe;const yt=yield _t(Ee.appConfig,an=>{const wi=Dn(an),si=Gn(Ee,wi);return Xe=si.registrationPromise,si.installationEntry});return""===yt.fid?{installationEntry:yield Xe}:{installationEntry:yt,registrationPromise:Xe}})).apply(this,arguments)}function Dn(Ee){return Ni(Ee||{fid:Xt(),registrationStatus:0})}function Gn(Ee,Xe){if(0===Xe.registrationStatus){if(!navigator.onLine)return{installationEntry:Xe,registrationPromise:Promise.reject(ct.create("app-offline"))};const yt={fid:Xe.fid,registrationStatus:1,registrationTime:Date.now()},an=function Kn(Ee,Xe){return Vn.apply(this,arguments)}(Ee,yt);return{installationEntry:yt,registrationPromise:an}}return 1===Xe.registrationStatus?{installationEntry:Xe,registrationPromise:Ht(Ee)}:{installationEntry:Xe}}function Vn(){return(Vn=(0,a.Z)(function*(Ee,Xe){try{const yt=yield be(Ee,Xe);return Sn(Ee.appConfig,yt)}catch(yt){throw He(yt)&&409===yt.customData.serverCode?yield tt(Ee.appConfig):yield Sn(Ee.appConfig,{fid:Xe.fid,registrationStatus:0}),yt}})).apply(this,arguments)}function Ht(Ee){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,a.Z)(function*(Ee){let Xe=yield Yn(Ee.appConfig);for(;1===Xe.registrationStatus;)yield Ue(100),Xe=yield Yn(Ee.appConfig);if(0===Xe.registrationStatus){const{installationEntry:yt,registrationPromise:an}=yield Gt(Ee);return an||yt}return Xe})).apply(this,arguments)}function Yn(Ee){return _t(Ee,Xe=>{if(!Xe)throw ct.create("installation-not-found");return Ni(Xe)})}function Ni(Ee){return function mi(Ee){return 1===Ee.registrationStatus&&Ee.registrationTime+1e4<Date.now()}(Ee)?{fid:Ee.fid,registrationStatus:0}:Ee}function kn(Ee,Xe){return ci.apply(this,arguments)}function ci(){return(ci=(0,a.Z)(function*({appConfig:Ee,heartbeatServiceProvider:Xe},yt){const an=Yi(Ee,yt),wi=$e(Ee,yt),si=Xe.getImmediate({optional:!0});if(si){const ai=yield si.getHeartbeatsHeader();ai&&wi.append("x-firebase-client",ai)}const Ir={method:"POST",headers:wi,body:JSON.stringify({installation:{sdkVersion:pe,appId:Ee.appId}})},Lo=yield Je(()=>fetch(an,Ir));if(Lo.ok)return xt(yield Lo.json());throw yield gt("Generate Auth Token",Lo)})).apply(this,arguments)}function Yi(Ee,{fid:Xe}){return`${Fe(Ee)}/${Xe}/authTokens:generate`}function In(Ee){return qi.apply(this,arguments)}function qi(){return(qi=(0,a.Z)(function*(Ee,Xe=!1){let yt;const an=yield _t(Ee.appConfig,si=>{if(!de(si))throw ct.create("not-registered");const An=si.authToken;if(!Xe&&Ge(An))return si;if(1===An.requestStatus)return yt=me(Ee,Xe),si;{if(!navigator.onLine)throw ct.create("app-offline");const Ir=$t(si);return yt=X(Ee,Ir),Ir}});return yt?yield yt:an.authToken})).apply(this,arguments)}function me(Ee,Xe){return z.apply(this,arguments)}function z(){return(z=(0,a.Z)(function*(Ee,Xe){let yt=yield K(Ee.appConfig);for(;1===yt.authToken.requestStatus;)yield Ue(100),yt=yield K(Ee.appConfig);const an=yt.authToken;return 0===an.requestStatus?In(Ee,Xe):an})).apply(this,arguments)}function K(Ee){return _t(Ee,Xe=>{if(!de(Xe))throw ct.create("not-registered");return function yn(Ee){return 1===Ee.requestStatus&&Ee.requestTime+1e4<Date.now()}(Xe.authToken)?Object.assign(Object.assign({},Xe),{authToken:{requestStatus:0}}):Xe})}function X(Ee,Xe){return J.apply(this,arguments)}function J(){return(J=(0,a.Z)(function*(Ee,Xe){try{const yt=yield kn(Ee,Xe),an=Object.assign(Object.assign({},Xe),{authToken:yt});return yield Sn(Ee.appConfig,an),yt}catch(yt){if(!He(yt)||401!==yt.customData.serverCode&&404!==yt.customData.serverCode){const an=Object.assign(Object.assign({},Xe),{authToken:{requestStatus:0}});yield Sn(Ee.appConfig,an)}else yield tt(Ee.appConfig);throw yt}})).apply(this,arguments)}function de(Ee){return void 0!==Ee&&2===Ee.registrationStatus}function Ge(Ee){return 2===Ee.requestStatus&&!function wt(Ee){const Xe=Date.now();return Xe<Ee.creationTime||Ee.creationTime+Ee.expiresIn<Xe+36e5}(Ee)}function $t(Ee){const Xe={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},Ee),{authToken:Xe})}function Pe(){return(Pe=(0,a.Z)(function*(Ee){const Xe=Ee,{installationEntry:yt,registrationPromise:an}=yield Gt(Xe);return an?an.catch(console.error):In(Xe).catch(console.error),yt.fid})).apply(this,arguments)}function oe(){return(oe=(0,a.Z)(function*(Ee,Xe=!1){const yt=Ee;return yield ue(yt),(yield In(yt,Xe)).token})).apply(this,arguments)}function ue(Ee){return De.apply(this,arguments)}function De(){return(De=(0,a.Z)(function*(Ee){const{registrationPromise:Xe}=yield Gt(Ee);Xe&&(yield Xe)})).apply(this,arguments)}function Si(Ee){return ct.create("missing-app-config-values",{valueName:Ee})}const Te="installations",Zt=Ee=>{const Xe=Ee.getProvider("app").getImmediate(),yt=function En(Ee){if(!Ee||!Ee.options)throw Si("App Configuration");if(!Ee.name)throw Si("App Name");const Xe=["projectId","apiKey","appId"];for(const yt of Xe)if(!Ee.options[yt])throw Si(yt);return{appName:Ee.name,projectId:Ee.options.projectId,apiKey:Ee.options.apiKey,appId:Ee.options.appId}}(Xe);return{app:Xe,appConfig:yt,heartbeatServiceProvider:(0,V._getProvider)(Xe,"heartbeat"),_delete:()=>Promise.resolve()}},Dt=Ee=>{const Xe=Ee.getProvider("app").getImmediate(),yt=(0,V._getProvider)(Xe,Te).getImmediate();return{getId:()=>function Hn(Ee){return Pe.apply(this,arguments)}(yt),getToken:wi=>function le(Ee){return oe.apply(this,arguments)}(yt,wi)}};(function On(){(0,V._registerComponent)(new W.wA(Te,Zt,"PUBLIC")),(0,V._registerComponent)(new W.wA("installations-internal",Dt,"PRIVATE"))})(),(0,V.registerVersion)(Ae,ve),(0,V.registerVersion)(Ae,ve,"esm2017")},1877:(cn,Ye,q)=>{"use strict";q.d(Ye,{Am:()=>pe,Ub:()=>Se,Yd:()=>ve,in:()=>V});const a=[];var V=(()=>{return(ie=V||(V={}))[ie.DEBUG=0]="DEBUG",ie[ie.VERBOSE=1]="VERBOSE",ie[ie.INFO=2]="INFO",ie[ie.WARN=3]="WARN",ie[ie.ERROR=4]="ERROR",ie[ie.SILENT=5]="SILENT",V;var ie})();const W={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},_e=V.INFO,Ve={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},Ae=(ie,ne,...ce)=>{if(ne<ie.logLevel)return;const we=(new Date).toISOString(),Re=Ve[ne];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${ne})`);console[Re](`[${we}]  ${ie.name}:`,...ce)};class ve{constructor(ne){this.name=ne,this._logLevel=_e,this._logHandler=Ae,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(ne){if(!(ne in V))throw new TypeError(`Invalid value "${ne}" assigned to \`logLevel\``);this._logLevel=ne}setLogLevel(ne){this._logLevel="string"==typeof ne?W[ne]:ne}get logHandler(){return this._logHandler}set logHandler(ne){if("function"!=typeof ne)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ne}get userLogHandler(){return this._userLogHandler}set userLogHandler(ne){this._userLogHandler=ne}debug(...ne){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...ne),this._logHandler(this,V.DEBUG,...ne)}log(...ne){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...ne),this._logHandler(this,V.VERBOSE,...ne)}info(...ne){this._userLogHandler&&this._userLogHandler(this,V.INFO,...ne),this._logHandler(this,V.INFO,...ne)}warn(...ne){this._userLogHandler&&this._userLogHandler(this,V.WARN,...ne),this._logHandler(this,V.WARN,...ne)}error(...ne){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...ne),this._logHandler(this,V.ERROR,...ne)}}function Se(ie){a.forEach(ne=>{ne.setLogLevel(ie)})}function pe(ie,ne){for(const ce of a){let we=null;ne&&ne.level&&(we=W[ne.level]),ce.userLogHandler=null===ie?null:(Re,je,...ct)=>{const He=ct.map(Fe=>{if(null==Fe)return null;if("string"==typeof Fe)return Fe;if("number"==typeof Fe||"boolean"==typeof Fe)return Fe.toString();if(Fe instanceof Error)return Fe.message;try{return JSON.stringify(Fe)}catch{return null}}).filter(Fe=>Fe).join(" ");je>=(we??Re.logLevel)&&ie({level:V[je].toLowerCase(),message:He,args:ct,type:Re.name})}}}},8766:(cn,Ye,q)=>{"use strict";q.d(Ye,{Lj:()=>Ke,X3:()=>gt});var a=q(5861);let W,_e;const ve=new WeakMap,Se=new WeakMap,pe=new WeakMap,ie=new WeakMap,ne=new WeakMap;let Re={get(Me,ke,be){if(Me instanceof IDBTransaction){if("done"===ke)return Se.get(Me);if("objectStoreNames"===ke)return Me.objectStoreNames||pe.get(Me);if("store"===ke)return be.objectStoreNames[1]?void 0:be.objectStore(be.objectStoreNames[0])}return Fe(Me[ke])},set:(Me,ke,be)=>(Me[ke]=be,!0),has:(Me,ke)=>Me instanceof IDBTransaction&&("done"===ke||"store"===ke)||ke in Me};function He(Me){return"function"==typeof Me?function ct(Me){return Me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ae(){return _e||(_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Me)?function(...ke){return Me.apply(xt(this),ke),Fe(ve.get(this))}:function(...ke){return Fe(Me.apply(xt(this),ke))}:function(ke,...be){const Ce=Me.call(xt(this),ke,...be);return pe.set(Ce,ke.sort?ke.sort():[ke]),Fe(Ce)}}(Me):(Me instanceof IDBTransaction&&function we(Me){if(Se.has(Me))return;const ke=new Promise((be,Ce)=>{const Ue=()=>{Me.removeEventListener("complete",Ne),Me.removeEventListener("error",mt),Me.removeEventListener("abort",mt)},Ne=()=>{be(),Ue()},mt=()=>{Ce(Me.error||new DOMException("AbortError","AbortError")),Ue()};Me.addEventListener("complete",Ne),Me.addEventListener("error",mt),Me.addEventListener("abort",mt)});Se.set(Me,ke)}(Me),((Me,ke)=>ke.some(be=>Me instanceof be))(Me,function Ve(){return W||(W=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Me,Re):Me)}function Fe(Me){if(Me instanceof IDBRequest)return function ce(Me){const ke=new Promise((be,Ce)=>{const Ue=()=>{Me.removeEventListener("success",Ne),Me.removeEventListener("error",mt)},Ne=()=>{be(Fe(Me.result)),Ue()},mt=()=>{Ce(Me.error),Ue()};Me.addEventListener("success",Ne),Me.addEventListener("error",mt)});return ke.then(be=>{be instanceof IDBCursor&&ve.set(be,Me)}).catch(()=>{}),ne.set(ke,Me),ke}(Me);if(ie.has(Me))return ie.get(Me);const ke=He(Me);return ke!==Me&&(ie.set(Me,ke),ne.set(ke,Me)),ke}const xt=Me=>ne.get(Me);function gt(Me,ke,{blocked:be,upgrade:Ce,blocking:Ue,terminated:Ne}={}){const mt=indexedDB.open(Me,ke),lt=Fe(mt);return Ce&&mt.addEventListener("upgradeneeded",Xt=>{Ce(Fe(mt.result),Xt.oldVersion,Xt.newVersion,Fe(mt.transaction))}),be&&mt.addEventListener("blocked",()=>be()),lt.then(Xt=>{Ne&&Xt.addEventListener("close",()=>Ne()),Ue&&Xt.addEventListener("versionchange",()=>Ue())}).catch(()=>{}),lt}function Ke(Me,{blocked:ke}={}){const be=indexedDB.deleteDatabase(Me);return ke&&be.addEventListener("blocked",()=>ke()),Fe(be).then(()=>{})}const Be=["get","getKey","getAll","getAllKeys","count"],$e=["put","add","delete","clear"],Je=new Map;function ge(Me,ke){if(!(Me instanceof IDBDatabase)||ke in Me||"string"!=typeof ke)return;if(Je.get(ke))return Je.get(ke);const be=ke.replace(/FromIndex$/,""),Ce=ke!==be,Ue=$e.includes(be);if(!(be in(Ce?IDBIndex:IDBObjectStore).prototype)||!Ue&&!Be.includes(be))return;const Ne=function(){var mt=(0,a.Z)(function*(lt,...Xt){const gn=this.transaction(lt,Ue?"readwrite":"readonly");let rn=gn.store;return Ce&&(rn=rn.index(Xt.shift())),(yield Promise.all([rn[be](...Xt),Ue&&gn.done]))[0]});return function(Xt){return mt.apply(this,arguments)}}();return Je.set(ke,Ne),Ne}!function je(Me){Re=Me(Re)}(Me=>({...Me,get:(ke,be,Ce)=>ge(ke,be)||Me.get(ke,be,Ce),has:(ke,be)=>!!ge(ke,be)||Me.has(ke,be)}))},5861:(cn,Ye,q)=>{"use strict";function a(W,_e,Ve,Ae,ve,Se,pe){try{var ie=W[Se](pe),ne=ie.value}catch(ce){return void Ve(ce)}ie.done?_e(ne):Promise.resolve(ne).then(Ae,ve)}function V(W){return function(){var _e=this,Ve=arguments;return new Promise(function(Ae,ve){var Se=W.apply(_e,Ve);function pe(ne){a(Se,Ae,ve,pe,ie,"next",ne)}function ie(ne){a(Se,Ae,ve,pe,ie,"throw",ne)}pe(void 0)})}}q.d(Ye,{Z:()=>V})}},cn=>{cn(cn.s=5910)}]);