<app-header-normal></app-header-normal>

<p-toast position="bottom-center" key="c" (onClose)="onReject()" [baseZIndex]="5000">
  <ng-template let-message pTemplate="message">
    <div class="p-flex p-flex-column" style="flex: 1">
      <div class="p-text-center">
        <i class="pi pi-exclamation-triangle" style="font-size: 3rem"></i>
        <h4>{{message.summary}}</h4>
        <p>{{message.detail}}</p>
      </div>
      <div class="p-grid p-fluid">
        <div class="p-col-6">
          <button type="button" pButton (click)="onConfirm()" label="Yes" class="p-button-success"></button>
        </div>
        <div class="p-col-6">
          <button type="button" pButton (click)="onReject()" label="No" class="p-button-secondary"></button>
        </div>
      </div>
    </div>
  </ng-template>
</p-toast>

<div class="container-fluid dashboardContainer">
  <div class="row">
    <!-- Sidebar navigation -->
    <nav class="col-md-3 d-md-block bg-light sidebar">
      <div class="sidebar-sticky">
        <ul class="nav flex-column" *ngIf="authService.userData as user">
          <li class="nav-item">
            <div>
              <div class="media">
                <div style="justify-content: center; justify-items: center;">
                  <img class=" align-self-start mr-5 img-thumbnail rounded-circle center"
                    src="{{person.photoURL ? person.photoURL : '/assets/img/account/dummy.png'}}"
                    alt="{{ user.displayName }}" />
                </div>

                <p>{{ user.displayName }}</p>
              </div>
            </div>
          </li>
          <!-- <li class="nav-item" (click)="userAccPage='profile'"> -->
          <li class="nav-item" (click)="slide('profile')">
            <a class="nav-link active">
              <img src="../../../../assets/img/account/user.png" alt="profile">
              Profile
            </a>
          </li>
          <li>
            <a class="nav-link" (click)="slide('cards')">
              <img src="../../../../assets/img/account/credit-card.png" alt="cards">
              Credit/Debit Cards
            </a>
          </li>
          <li>
            <a class="nav-link" (click)="slide('address')">
              <img src="../../../../assets/img/account/address.png" alt="address">
              Addresses
            </a>
          </li>
          <li>
            <a class="nav-link" (click)="slide('password')">
              <img src="../../../../assets/img/account/password.png" alt="password">
              Change Password
            </a>
          </li>
          <li>
            <a class="nav-link" (click)="slide('purchases')">
              <img src="../../../../assets/img/account/checklist.png" alt="purchases">
              My Purchases
            </a>
          </li>
          <li>
            <a class="nav-link" (click)="slide('vouchers')">
              <img src="../../../../assets/img/account/price-tag.png" alt="vouchers">
              My vouchers
            </a>
          </li>
          <!-- Calling SignOut() Api from AuthService -->
          <li class="nav-item">
            <a class="nav-link" (click)="authService.logout()">
              <img src="../../../../assets/img/account/exit.png" alt="logout">
              Log out
            </a>
          </li>
        </ul>
      </div>
    </nav>
    <!-- Main content -->
    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4 main" [ngSwitch]="userAccPage">
      <div class="pages">
        <!-- first page: profile page  -->
        <div class="inner-adjust" *ngSwitchCase="'profile'">
          <div class="pt-3 pb-2 mb-3 border-bottom">
            <h1 class="h2">User Profile</h1>
          </div>
          <!-- Show user data when logged in -->
          <div class="row" *ngIf="authService.userData as user">
            <div class="col-md-12">
              <div>
                <div class="profile-pic">
                  <img class="align-self-start mr-5 img-thumbnail rounded-circle center" src="{{
                    person.photoURL ? person.photoURL : '/assets/img/account/dummy.png'
                  }}" alt="{{ person.displayName }}" />

                  <div class="upload-profile-pic">

                    <label>
                      <input type="file" class="text-nowrap text-truncate" (change)="selectFile($event)" />
                    </label>
                    <button class="btn btn-success btn-sm" [disabled]="!selectedFiles" (click)="upload()">
                      Upload
                    </button>
                    <div *ngIf="currentFileUpload" class="progress mt-2">
                      <div class="progress-bar progress-bar-info" role="progressbar"
                        attr.aria-valuenow="{{ percentage }}" aria-valuemin="0" aria-valuemax="100"
                        [ngStyle]="{ width: percentage + '%' }">
                        {{ percentage }}%
                      </div>
                    </div>
                  </div>
                </div>

                <div class="media-body">
                  <!-- <div #filled class="userAttr" *ngIf="name else notFilled"> -->
                  <div class="userAttr">
                    <p class="userAttr-title">Name</p>
                    <p> : </p>
                    <!-- <strong>{{person.displayName}}</strong> -->
                    <input #nameInput class="nameInputBox" type="text" id="name" name="name"
                      [(ngModel)]="person.displayName">
                  </div>
                  <span class="userAttr">
                    <p class="userAttr-title">Email</p>
                    <p> : </p>
                    <strong>{{person.email}}</strong>
                  </span>
                  <span class="userAttr">
                    <p class="userAttr-title">Address</p>
                    <p> : </p>
                    <textarea #locationInput class="locationTextArea" name="location" rows="5" cols="25" wrap="soft"
                      maxlength="100" style="overflow:hidden; resize:none;"> </textarea>
                  </span>
                </div>
              </div>
              <div>
                <!-- <button type="button" pButton pRipple class="saveBtn" (click)="saveUserData(locationInput.value, nameInput.value)">save</button> -->
                <button type="button" pButton pRipple (click)="showConfirm(locationInput.value, nameInput.value)"
                  label="Confirm" class="ui-button-warning"></button>
              </div>
            </div>
          </div>
        </div>

        <!-- second page: credit/debit cards page  -->
        <div class="inner-adjust" *ngSwitchCase="'cards'">
          <div class="pt-3 pb-2 mb-3 border-bottom">
            <h1 class="h2">Credit Debit Cards</h1>
          </div>
        </div>

        <!-- third page: addresses page  -->
        <div class="inner-adjust" *ngSwitchCase="'address'">
          <div class="pt-3 pb-2 mb-3 border-bottom">
            <h1 class="h2">Addresses</h1>
          </div>
        </div>

        <!-- fourth page: chg pw page  -->
        <div class="inner-adjust" *ngSwitchCase="'password'">
          <div class="pt-3 pb-2 mb-3 border-bottom">
            <h1 class="h2">Password</h1>
          </div>
        </div>

        <!-- fifth page: my purchases page  -->
        <div class="inner-adjust" *ngSwitchCase="'purchases'">
          <div class="pt-3 pb-2 mb-3 border-bottom">
            <h1 class="h2">My Purchases</h1>
          </div>
        </div>

        <!-- sixth page: my vouchers page  -->
        <div class="inner-adjust" *ngSwitchCase="'vouchers'">
          <div class="pt-3 pb-2 mb-3 border-bottom">
            <h1 class="h2">My Vouchers</h1>
          </div>
        </div>
      </div>

    </main>
  </div>
</div>
